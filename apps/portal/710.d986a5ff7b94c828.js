(self.webpackChunk_central_factory_portal=self.webpackChunk_central_factory_portal||[]).push([[710],{710:(oe,N,l)=>{l.r(N);var g=l(1481),u=l(7777),D=l(9283),p=l(7340);function B(){return"undefined"!=typeof window&&void 0!==window.document}function L(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function F(E){switch(E.length){case 0:return new p.ZN;case 1:return E[0];default:return new p.ZE(E)}}function x(E,a,s,m,k={},W={}){const re=[],ae=[];let ye=-1,Le=null;if(m.forEach(Ge=>{const Xe=Ge.offset,dt=Xe==ye,Tt=dt&&Le||{};Object.keys(Ge).forEach(ct=>{let vt=ct,Rt=Ge[ct];if("offset"!==ct)switch(vt=a.normalizePropertyName(vt,re),Rt){case p.k1:Rt=k[ct];break;case p.l3:Rt=W[ct];break;default:Rt=a.normalizeStyleValue(ct,vt,Rt,re)}Tt[vt]=Rt}),dt||ae.push(Tt),Le=Tt,ye=Xe}),re.length){const Ge="\n - ";throw new Error(`Unable to animate due to the following errors:${Ge}${re.join(Ge)}`)}return ae}function P(E,a,s,m){switch(a){case"start":E.onStart(()=>m(s&&w(s,"start",E)));break;case"done":E.onDone(()=>m(s&&w(s,"done",E)));break;case"destroy":E.onDestroy(()=>m(s&&w(s,"destroy",E)))}}function w(E,a,s){const W=S(E.element,E.triggerName,E.fromState,E.toState,a||E.phaseName,s.totalTime??E.totalTime,!!s.disabled),re=E._data;return null!=re&&(W._data=re),W}function S(E,a,s,m,k="",W=0,re){return{element:E,triggerName:a,fromState:s,toState:m,phaseName:k,totalTime:W,disabled:!!re}}function T(E,a,s){let m;return E instanceof Map?(m=E.get(a),m||E.set(a,m=s)):(m=E[a],m||(m=E[a]=s)),m}function I(E){const a=E.indexOf(":");return[E.substring(1,a),E.substr(a+1)]}let M=(E,a)=>!1,R=(E,a,s)=>[];(L()||"undefined"!=typeof Element)&&(M=B()?(E,a)=>{for(;a&&a!==document.documentElement;){if(a===E)return!0;a=a.parentNode||a.host}return!1}:(E,a)=>E.contains(a),R=(E,a,s)=>{let m=[];if(s){const k=E.querySelectorAll(a);for(let W=0;W<k.length;W++)m.push(k[W])}else{const k=E.querySelector(a);k&&m.push(k)}return m});let c=null,o=!1;function v(E){c||(c=("undefined"!=typeof document?document.body:null)||{},o=!!c.style&&"WebkitAppearance"in c.style);let a=!0;return c.style&&!function(E){return"ebkit"==E.substring(1,6)}(E)&&(a=E in c.style,!a&&o&&(a="Webkit"+E.charAt(0).toUpperCase()+E.substr(1)in c.style)),a}const K=M,ue=R;function we(E){const a={};return Object.keys(E).forEach(s=>{const m=s.replace(/([a-z])([A-Z])/g,"$1-$2");a[m]=E[s]}),a}let ge=(()=>{class E{validateStyleProperty(s){return v(s)}matchesElement(s,m){return!1}containsElement(s,m){return K(s,m)}query(s,m,k){return ue(s,m,k)}computeStyle(s,m,k){return k||""}animate(s,m,k,W,re,ae=[],ye){return new p.ZN(k,W)}}return E.\u0275fac=function(s){return new(s||E)},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac}),E})(),pe=(()=>{class E{}return E.NOOP=new ge,E})();const G="ng-enter",q="ng-leave",H="ng-trigger",ie=".ng-trigger",Ce="ng-animating",Fe=".ng-animating";function me(E){if("number"==typeof E)return E;const a=E.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:_e(parseFloat(a[1]),a[2])}function _e(E,a){return"s"===a?1e3*E:E}function ne(E,a,s){return E.hasOwnProperty("duration")?E:function(E,a,s){let k,W=0,re="";if("string"==typeof E){const ae=E.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ae)return a.push(`The provided timing value "${E}" is invalid.`),{duration:0,delay:0,easing:""};k=_e(parseFloat(ae[1]),ae[2]);const ye=ae[3];null!=ye&&(W=_e(parseFloat(ye),ae[4]));const Le=ae[5];Le&&(re=Le)}else k=E;if(!s){let ae=!1,ye=a.length;k<0&&(a.push("Duration values below 0 are not allowed for this animation step."),ae=!0),W<0&&(a.push("Delay values below 0 are not allowed for this animation step."),ae=!0),ae&&a.splice(ye,0,`The provided timing value "${E}" is invalid.`)}return{duration:k,delay:W,easing:re}}(E,a,s)}function Te(E,a={}){return Object.keys(E).forEach(s=>{a[s]=E[s]}),a}function Ze(E,a,s={}){if(a)for(let m in E)s[m]=E[m];else Te(E,s);return s}function ut(E,a,s){return s?a+":"+s+";":""}function et(E){let a="";for(let s=0;s<E.style.length;s++){const m=E.style.item(s);a+=ut(0,m,E.style.getPropertyValue(m))}for(const s in E.style)E.style.hasOwnProperty(s)&&!s.startsWith("_")&&(a+=ut(0,Ue(s),E.style[s]));E.setAttribute("style",a)}function lt(E,a,s){E.style&&(Object.keys(a).forEach(m=>{const k=qr(m);s&&!s.hasOwnProperty(m)&&(s[m]=E.style[k]),E.style[k]=a[m]}),L()&&et(E))}function wt(E,a){E.style&&(Object.keys(a).forEach(s=>{const m=qr(s);E.style[m]=""}),L()&&et(E))}function It(E){return Array.isArray(E)?1==E.length?E[0]:(0,p.vP)(E):E}const kr=new RegExp("{{\\s*(.+?)\\s*}}","g");function br(E){let a=[];if("string"==typeof E){let s;for(;s=kr.exec(E);)a.push(s[1]);kr.lastIndex=0}return a}function ar(E,a,s){const m=E.toString(),k=m.replace(kr,(W,re)=>{let ae=a[re];return a.hasOwnProperty(re)||(s.push(`Please provide a value for the animation param ${re}`),ae=""),ae.toString()});return k==m?E:k}function hr(E){const a=[];let s=E.next();for(;!s.done;)a.push(s.value),s=E.next();return a}const rr=/-+([a-z0-9])/g;function qr(E){return E.replace(rr,(...a)=>a[1].toUpperCase())}function Ue(E){return E.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Mt(E,a){return 0===E||0===a}function Lt(E,a,s){const m=Object.keys(s);if(m.length&&a.length){let W=a[0],re=[];if(m.forEach(ae=>{W.hasOwnProperty(ae)||re.push(ae),W[ae]=s[ae]}),re.length)for(var k=1;k<a.length;k++){let ae=a[k];re.forEach(function(ye){ae[ye]=ln(E,ye)})}}return a}function xt(E,a,s){switch(a.type){case 7:return E.visitTrigger(a,s);case 0:return E.visitState(a,s);case 1:return E.visitTransition(a,s);case 2:return E.visitSequence(a,s);case 3:return E.visitGroup(a,s);case 4:return E.visitAnimate(a,s);case 5:return E.visitKeyframes(a,s);case 6:return E.visitStyle(a,s);case 8:return E.visitReference(a,s);case 9:return E.visitAnimateChild(a,s);case 10:return E.visitAnimateRef(a,s);case 11:return E.visitQuery(a,s);case 12:return E.visitStagger(a,s);default:throw new Error(`Unable to resolve animation metadata node #${a.type}`)}}function ln(E,a){return window.getComputedStyle(E)[a]}function Mi(E,a){const s=[];return"string"==typeof E?E.split(/\s*,\s*/).forEach(m=>function(E,a,s){if(":"==E[0]){const ye=function(E,a){switch(E){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(s,m)=>parseFloat(m)>parseFloat(s);case":decrement":return(s,m)=>parseFloat(m)<parseFloat(s);default:return a.push(`The transition alias value "${E}" is not supported`),"* => *"}}(E,s);if("function"==typeof ye)return void a.push(ye);E=ye}const m=E.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==m||m.length<4)return s.push(`The provided transition expression "${E}" is not supported`),a;const k=m[1],W=m[2],re=m[3];a.push(ci(k,re));"<"==W[0]&&!("*"==k&&"*"==re)&&a.push(ci(re,k))}(m,s,a)):s.push(E),s}const Fn=new Set(["true","1"]),fn=new Set(["false","0"]);function ci(E,a){const s=Fn.has(E)||fn.has(E),m=Fn.has(a)||fn.has(a);return(k,W)=>{let re="*"==E||E==k,ae="*"==a||a==W;return!re&&s&&"boolean"==typeof k&&(re=k?Fn.has(E):fn.has(E)),!ae&&m&&"boolean"==typeof W&&(ae=W?Fn.has(a):fn.has(a)),re&&ae}}const Ws=new RegExp("s*:selfs*,?","g");function xi(E,a,s){return new ki(E).build(a,s)}class ki{constructor(a){this._driver=a}build(a,s){const m=new Hs(s);return this._resetContextStyleTimingState(m),xt(this,It(a),m)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles={},a.collectedStyles[""]={},a.currentTime=0}visitTrigger(a,s){let m=s.queryCount=0,k=s.depCount=0;const W=[],re=[];return"@"==a.name.charAt(0)&&s.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),a.definitions.forEach(ae=>{if(this._resetContextStyleTimingState(s),0==ae.type){const ye=ae,Le=ye.name;Le.toString().split(/\s*,\s*/).forEach(Ge=>{ye.name=Ge,W.push(this.visitState(ye,s))}),ye.name=Le}else if(1==ae.type){const ye=this.visitTransition(ae,s);m+=ye.queryCount,k+=ye.depCount,re.push(ye)}else s.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:a.name,states:W,transitions:re,queryCount:m,depCount:k,options:null}}visitState(a,s){const m=this.visitStyle(a.styles,s),k=a.options&&a.options.params||null;if(m.containsDynamicStyles){const W=new Set,re=k||{};if(m.styles.forEach(ae=>{if(jn(ae)){const ye=ae;Object.keys(ye).forEach(Le=>{br(ye[Le]).forEach(Ge=>{re.hasOwnProperty(Ge)||W.add(Ge)})})}}),W.size){const ae=hr(W.values());s.errors.push(`state("${a.name}", ...) must define default values for all the following style substitutions: ${ae.join(", ")}`)}}return{type:0,name:a.name,style:m,options:k?{params:k}:null}}visitTransition(a,s){s.queryCount=0,s.depCount=0;const m=xt(this,It(a.animation),s);return{type:1,matchers:Mi(a.expr,s.errors),animation:m,queryCount:s.queryCount,depCount:s.depCount,options:qt(a.options)}}visitSequence(a,s){return{type:2,steps:a.steps.map(m=>xt(this,m,s)),options:qt(a.options)}}visitGroup(a,s){const m=s.currentTime;let k=0;const W=a.steps.map(re=>{s.currentTime=m;const ae=xt(this,re,s);return k=Math.max(k,s.currentTime),ae});return s.currentTime=k,{type:3,steps:W,options:qt(a.options)}}visitAnimate(a,s){const m=function(E,a){let s=null;if(E.hasOwnProperty("duration"))s=E;else if("number"==typeof E)return li(ne(E,a).duration,0,"");const m=E;if(m.split(/\s+/).some(W=>"{"==W.charAt(0)&&"{"==W.charAt(1))){const W=li(0,0,"");return W.dynamic=!0,W.strValue=m,W}return s=s||ne(m,a),li(s.duration,s.delay,s.easing)}(a.timings,s.errors);s.currentAnimateTimings=m;let k,W=a.styles?a.styles:(0,p.oB)({});if(5==W.type)k=this.visitKeyframes(W,s);else{let re=a.styles,ae=!1;if(!re){ae=!0;const Le={};m.easing&&(Le.easing=m.easing),re=(0,p.oB)(Le)}s.currentTime+=m.duration+m.delay;const ye=this.visitStyle(re,s);ye.isEmptyStep=ae,k=ye}return s.currentAnimateTimings=null,{type:4,timings:m,style:k,options:null}}visitStyle(a,s){const m=this._makeStyleAst(a,s);return this._validateStyleAst(m,s),m}_makeStyleAst(a,s){const m=[];Array.isArray(a.styles)?a.styles.forEach(re=>{"string"==typeof re?re==p.l3?m.push(re):s.errors.push(`The provided style string value ${re} is not allowed.`):m.push(re)}):m.push(a.styles);let k=!1,W=null;return m.forEach(re=>{if(jn(re)){const ae=re,ye=ae.easing;if(ye&&(W=ye,delete ae.easing),!k)for(let Le in ae)if(ae[Le].toString().indexOf("{{")>=0){k=!0;break}}}),{type:6,styles:m,easing:W,offset:a.offset,containsDynamicStyles:k,options:null}}_validateStyleAst(a,s){const m=s.currentAnimateTimings;let k=s.currentTime,W=s.currentTime;m&&W>0&&(W-=m.duration+m.delay),a.styles.forEach(re=>{"string"!=typeof re&&Object.keys(re).forEach(ae=>{if(!this._driver.validateStyleProperty(ae))return void s.errors.push(`The provided animation property "${ae}" is not a supported CSS property for animations`);const ye=s.collectedStyles[s.currentQuerySelector],Le=ye[ae];let Ge=!0;Le&&(W!=k&&W>=Le.startTime&&k<=Le.endTime&&(s.errors.push(`The CSS property "${ae}" that exists between the times of "${Le.startTime}ms" and "${Le.endTime}ms" is also being animated in a parallel animation between the times of "${W}ms" and "${k}ms"`),Ge=!1),W=Le.startTime),Ge&&(ye[ae]={startTime:W,endTime:k}),s.options&&function(E,a,s){const m=a.params||{},k=br(E);k.length&&k.forEach(W=>{m.hasOwnProperty(W)||s.push(`Unable to resolve the local animation param ${W} in the given list of values`)})}(re[ae],s.options,s.errors)})})}visitKeyframes(a,s){const m={type:5,styles:[],options:null};if(!s.currentAnimateTimings)return s.errors.push("keyframes() must be placed inside of a call to animate()"),m;let W=0;const re=[];let ae=!1,ye=!1,Le=0;const Ge=a.steps.map(Gt=>{const Zt=this._makeStyleAst(Gt,s);let gr=null!=Zt.offset?Zt.offset:function(E){if("string"==typeof E)return null;let a=null;if(Array.isArray(E))E.forEach(s=>{if(jn(s)&&s.hasOwnProperty("offset")){const m=s;a=parseFloat(m.offset),delete m.offset}});else if(jn(E)&&E.hasOwnProperty("offset")){const s=E;a=parseFloat(s.offset),delete s.offset}return a}(Zt.styles),cr=0;return null!=gr&&(W++,cr=Zt.offset=gr),ye=ye||cr<0||cr>1,ae=ae||cr<Le,Le=cr,re.push(cr),Zt});ye&&s.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),ae&&s.errors.push("Please ensure that all keyframe offsets are in order");const Xe=a.steps.length;let dt=0;W>0&&W<Xe?s.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==W&&(dt=1/(Xe-1));const Tt=Xe-1,ct=s.currentTime,vt=s.currentAnimateTimings,Rt=vt.duration;return Ge.forEach((Gt,Zt)=>{const gr=dt>0?Zt==Tt?1:dt*Zt:re[Zt],cr=gr*Rt;s.currentTime=ct+vt.delay+cr,vt.duration=cr,this._validateStyleAst(Gt,s),Gt.offset=gr,m.styles.push(Gt)}),m}visitReference(a,s){return{type:8,animation:xt(this,It(a.animation),s),options:qt(a.options)}}visitAnimateChild(a,s){return s.depCount++,{type:9,options:qt(a.options)}}visitAnimateRef(a,s){return{type:10,animation:this.visitReference(a.animation,s),options:qt(a.options)}}visitQuery(a,s){const m=s.currentQuerySelector,k=a.options||{};s.queryCount++,s.currentQuery=a;const[W,re]=function(E){const a=!!E.split(/\s*,\s*/).find(s=>":self"==s);return a&&(E=E.replace(Ws,"")),E=E.replace(/@\*/g,ie).replace(/@\w+/g,s=>ie+"-"+s.substr(1)).replace(/:animating/g,Fe),[E,a]}(a.selector);s.currentQuerySelector=m.length?m+" "+W:W,T(s.collectedStyles,s.currentQuerySelector,{});const ae=xt(this,It(a.animation),s);return s.currentQuery=null,s.currentQuerySelector=m,{type:11,selector:W,limit:k.limit||0,optional:!!k.optional,includeSelf:re,animation:ae,originalSelector:a.selector,options:qt(a.options)}}visitStagger(a,s){s.currentQuery||s.errors.push("stagger() can only be used inside of query()");const m="full"===a.timings?{duration:0,delay:0,easing:"full"}:ne(a.timings,s.errors,!0);return{type:12,animation:xt(this,It(a.animation),s),timings:m,options:null}}}class Hs{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function jn(E){return!Array.isArray(E)&&"object"==typeof E}function qt(E){return E?(E=Te(E)).params&&(E.params=function(E){return E?Te(E):null}(E.params)):E={},E}function li(E,a,s){return{duration:E,delay:a,easing:s}}function Kr(E,a,s,m,k,W,re=null,ae=!1){return{type:1,element:E,keyframes:a,preStyleProps:s,postStyleProps:m,duration:k,delay:W,totalTime:k+W,easing:re,subTimeline:ae}}class fi{constructor(){this._map=new Map}get(a){return this._map.get(a)||[]}append(a,s){let m=this._map.get(a);m||this._map.set(a,m=[]),m.push(...s)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const as=new RegExp(":enter","g"),Gs=new RegExp(":leave","g");function Oe(E,a,s,m,k,W={},re={},ae,ye,Le=[]){return(new ve).buildKeyframes(E,a,s,m,k,W,re,ae,ye,Le)}class ve{buildKeyframes(a,s,m,k,W,re,ae,ye,Le,Ge=[]){Le=Le||new fi;const Xe=new De(a,s,Le,k,W,Ge,[]);Xe.options=ye,Xe.currentTimeline.setStyles([re],null,Xe.errors,ye),xt(this,m,Xe);const dt=Xe.timelines.filter(Tt=>Tt.containsAnimation());if(dt.length&&Object.keys(ae).length){const Tt=dt[dt.length-1];Tt.allowOnlyTimelineStyles()||Tt.setStyles([ae],null,Xe.errors,ye)}return dt.length?dt.map(Tt=>Tt.buildKeyframes()):[Kr(s,[],[],[],0,0,"",!1)]}visitTrigger(a,s){}visitState(a,s){}visitTransition(a,s){}visitAnimateChild(a,s){const m=s.subInstructions.get(s.element);if(m){const k=s.createSubContext(a.options),W=s.currentTimeline.currentTime,re=this._visitSubInstructions(m,k,k.options);W!=re&&s.transformIntoNewTimeline(re)}s.previousNode=a}visitAnimateRef(a,s){const m=s.createSubContext(a.options);m.transformIntoNewTimeline(),this.visitReference(a.animation,m),s.transformIntoNewTimeline(m.currentTimeline.currentTime),s.previousNode=a}_visitSubInstructions(a,s,m){let W=s.currentTimeline.currentTime;const re=null!=m.duration?me(m.duration):null,ae=null!=m.delay?me(m.delay):null;return 0!==re&&a.forEach(ye=>{const Le=s.appendInstructionToTimeline(ye,re,ae);W=Math.max(W,Le.duration+Le.delay)}),W}visitReference(a,s){s.updateOptions(a.options,!0),xt(this,a.animation,s),s.previousNode=a}visitSequence(a,s){const m=s.subContextCount;let k=s;const W=a.options;if(W&&(W.params||W.delay)&&(k=s.createSubContext(W),k.transformIntoNewTimeline(),null!=W.delay)){6==k.previousNode.type&&(k.currentTimeline.snapshotCurrentStyles(),k.previousNode=se);const re=me(W.delay);k.delayNextStep(re)}a.steps.length&&(a.steps.forEach(re=>xt(this,re,k)),k.currentTimeline.applyStylesToKeyframe(),k.subContextCount>m&&k.transformIntoNewTimeline()),s.previousNode=a}visitGroup(a,s){const m=[];let k=s.currentTimeline.currentTime;const W=a.options&&a.options.delay?me(a.options.delay):0;a.steps.forEach(re=>{const ae=s.createSubContext(a.options);W&&ae.delayNextStep(W),xt(this,re,ae),k=Math.max(k,ae.currentTimeline.currentTime),m.push(ae.currentTimeline)}),m.forEach(re=>s.currentTimeline.mergeTimelineCollectedStyles(re)),s.transformIntoNewTimeline(k),s.previousNode=a}_visitTiming(a,s){if(a.dynamic){const m=a.strValue;return ne(s.params?ar(m,s.params,s.errors):m,s.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,s){const m=s.currentAnimateTimings=this._visitTiming(a.timings,s),k=s.currentTimeline;m.delay&&(s.incrementTime(m.delay),k.snapshotCurrentStyles());const W=a.style;5==W.type?this.visitKeyframes(W,s):(s.incrementTime(m.duration),this.visitStyle(W,s),k.applyStylesToKeyframe()),s.currentAnimateTimings=null,s.previousNode=a}visitStyle(a,s){const m=s.currentTimeline,k=s.currentAnimateTimings;!k&&m.getCurrentStyleProperties().length&&m.forwardFrame();const W=k&&k.easing||a.easing;a.isEmptyStep?m.applyEmptyStep(W):m.setStyles(a.styles,W,s.errors,s.options),s.previousNode=a}visitKeyframes(a,s){const m=s.currentAnimateTimings,k=s.currentTimeline.duration,W=m.duration,ae=s.createSubContext().currentTimeline;ae.easing=m.easing,a.styles.forEach(ye=>{ae.forwardTime((ye.offset||0)*W),ae.setStyles(ye.styles,ye.easing,s.errors,s.options),ae.applyStylesToKeyframe()}),s.currentTimeline.mergeTimelineCollectedStyles(ae),s.transformIntoNewTimeline(k+W),s.previousNode=a}visitQuery(a,s){const m=s.currentTimeline.currentTime,k=a.options||{},W=k.delay?me(k.delay):0;W&&(6===s.previousNode.type||0==m&&s.currentTimeline.getCurrentStyleProperties().length)&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=se);let re=m;const ae=s.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!k.optional,s.errors);s.currentQueryTotal=ae.length;let ye=null;ae.forEach((Le,Ge)=>{s.currentQueryIndex=Ge;const Xe=s.createSubContext(a.options,Le);W&&Xe.delayNextStep(W),Le===s.element&&(ye=Xe.currentTimeline),xt(this,a.animation,Xe),Xe.currentTimeline.applyStylesToKeyframe(),re=Math.max(re,Xe.currentTimeline.currentTime)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(re),ye&&(s.currentTimeline.mergeTimelineCollectedStyles(ye),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=a}visitStagger(a,s){const m=s.parentContext,k=s.currentTimeline,W=a.timings,re=Math.abs(W.duration),ae=re*(s.currentQueryTotal-1);let ye=re*s.currentQueryIndex;switch(W.duration<0?"reverse":W.easing){case"reverse":ye=ae-ye;break;case"full":ye=m.currentStaggerTime}const Ge=s.currentTimeline;ye&&Ge.delayNextStep(ye);const Xe=Ge.currentTime;xt(this,a.animation,s),s.previousNode=a,m.currentStaggerTime=k.currentTime-Xe+(k.startTime-m.currentTimeline.startTime)}}const se={};class De{constructor(a,s,m,k,W,re,ae,ye){this._driver=a,this.element=s,this.subInstructions=m,this._enterClassName=k,this._leaveClassName=W,this.errors=re,this.timelines=ae,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=se,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ye||new $e(this._driver,s,0),ae.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,s){if(!a)return;const m=a;let k=this.options;null!=m.duration&&(k.duration=me(m.duration)),null!=m.delay&&(k.delay=me(m.delay));const W=m.params;if(W){let re=k.params;re||(re=this.options.params={}),Object.keys(W).forEach(ae=>{(!s||!re.hasOwnProperty(ae))&&(re[ae]=ar(W[ae],re,this.errors))})}}_copyOptions(){const a={};if(this.options){const s=this.options.params;if(s){const m=a.params={};Object.keys(s).forEach(k=>{m[k]=s[k]})}}return a}createSubContext(a=null,s,m){const k=s||this.element,W=new De(this._driver,k,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(k,m||0));return W.previousNode=this.previousNode,W.currentAnimateTimings=this.currentAnimateTimings,W.options=this._copyOptions(),W.updateOptions(a),W.currentQueryIndex=this.currentQueryIndex,W.currentQueryTotal=this.currentQueryTotal,W.parentContext=this,this.subContextCount++,W}transformIntoNewTimeline(a){return this.previousNode=se,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,s,m){const k={duration:s??a.duration,delay:this.currentTimeline.currentTime+(m??0)+a.delay,easing:""},W=new it(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,k,a.stretchStartingKeyframe);return this.timelines.push(W),k}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,s,m,k,W,re){let ae=[];if(k&&ae.push(this.element),a.length>0){a=(a=a.replace(as,"."+this._enterClassName)).replace(Gs,"."+this._leaveClassName);let Le=this._driver.query(this.element,a,1!=m);0!==m&&(Le=m<0?Le.slice(Le.length+m,Le.length):Le.slice(0,m)),ae.push(...Le)}return!W&&0==ae.length&&re.push(`\`query("${s}")\` returned zero elements. (Use \`query("${s}", { optional: true })\` if you wish to allow this.)`),ae}}class $e{constructor(a,s,m,k){this._driver=a,this.element=s,this.startTime=m,this._elementTimelineStylesLookup=k,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(s),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(s,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const s=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||s?(this.forwardTime(this.currentTime+a),s&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,s){return this.applyStylesToKeyframe(),new $e(this._driver,a,s||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,s){this._localTimelineStyles[a]=s,this._globalTimelineStyles[a]=s,this._styleSummary[a]={time:this.currentTime,value:s}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&(this._previousKeyframe.easing=a),Object.keys(this._globalTimelineStyles).forEach(s=>{this._backFill[s]=this._globalTimelineStyles[s]||p.l3,this._currentKeyframe[s]=p.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,s,m,k){s&&(this._previousKeyframe.easing=s);const W=k&&k.params||{},re=function(E,a){const s={};let m;return E.forEach(k=>{"*"===k?(m=m||Object.keys(a),m.forEach(W=>{s[W]=p.l3})):Ze(k,!1,s)}),s}(a,this._globalTimelineStyles);Object.keys(re).forEach(ae=>{const ye=ar(re[ae],W,m);this._pendingStyles[ae]=ye,this._localTimelineStyles.hasOwnProperty(ae)||(this._backFill[ae]=this._globalTimelineStyles.hasOwnProperty(ae)?this._globalTimelineStyles[ae]:p.l3),this._updateStyle(ae,ye)})}applyStylesToKeyframe(){const a=this._pendingStyles,s=Object.keys(a);0!=s.length&&(this._pendingStyles={},s.forEach(m=>{this._currentKeyframe[m]=a[m]}),Object.keys(this._localTimelineStyles).forEach(m=>{this._currentKeyframe.hasOwnProperty(m)||(this._currentKeyframe[m]=this._localTimelineStyles[m])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(a=>{const s=this._localTimelineStyles[a];this._pendingStyles[a]=s,this._updateStyle(a,s)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let s in this._currentKeyframe)a.push(s);return a}mergeTimelineCollectedStyles(a){Object.keys(a._styleSummary).forEach(s=>{const m=this._styleSummary[s],k=a._styleSummary[s];(!m||k.time>m.time)&&this._updateStyle(s,k.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,s=new Set,m=1===this._keyframes.size&&0===this.duration;let k=[];this._keyframes.forEach((ae,ye)=>{const Le=Ze(ae,!0);Object.keys(Le).forEach(Ge=>{const Xe=Le[Ge];Xe==p.k1?a.add(Ge):Xe==p.l3&&s.add(Ge)}),m||(Le.offset=ye/this.duration),k.push(Le)});const W=a.size?hr(a.values()):[],re=s.size?hr(s.values()):[];if(m){const ae=k[0],ye=Te(ae);ae.offset=0,ye.offset=1,k=[ae,ye]}return Kr(this.element,k,W,re,this.duration,this.startTime,this.easing,!1)}}class it extends $e{constructor(a,s,m,k,W,re,ae=!1){super(a,s,re.delay),this.keyframes=m,this.preStyleProps=k,this.postStyleProps=W,this._stretchStartingKeyframe=ae,this.timings={duration:re.duration,delay:re.delay,easing:re.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:s,duration:m,easing:k}=this.timings;if(this._stretchStartingKeyframe&&s){const W=[],re=m+s,ae=s/re,ye=Ze(a[0],!1);ye.offset=0,W.push(ye);const Le=Ze(a[0],!1);Le.offset=Bt(ae),W.push(Le);const Ge=a.length-1;for(let Xe=1;Xe<=Ge;Xe++){let dt=Ze(a[Xe],!1);dt.offset=Bt((s+dt.offset*m)/re),W.push(dt)}m=re,s=0,k="",a=W}return Kr(this.element,a,this.preStyleProps,this.postStyleProps,m,s,k,!0)}}function Bt(E,a=3){const s=Math.pow(10,a-1);return Math.round(E*s)/s}class dn{}class oa extends dn{normalizePropertyName(a,s){return qr(a)}normalizeStyleValue(a,s,m,k){let W="";const re=m.toString().trim();if(aa[s]&&0!==m&&"0"!==m)if("number"==typeof m)W="px";else{const ae=m.match(/^[+-]?[\d\.]+([a-z]*)$/);ae&&0==ae[1].length&&k.push(`Please provide a CSS unit value for ${a}:${m}`)}return re+W}}const aa=(()=>function(E){const a={};return E.forEach(s=>a[s]=!0),a}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Zs(E,a,s,m,k,W,re,ae,ye,Le,Ge,Xe,dt){return{type:0,element:E,triggerName:a,isRemovalTransition:k,fromState:s,fromStyles:W,toState:m,toStyles:re,timelines:ae,queriedElements:ye,preStyleProps:Le,postStyleProps:Ge,totalTime:Xe,errors:dt}}const us={};class cs{constructor(a,s,m){this._triggerName=a,this.ast=s,this._stateStyles=m}match(a,s,m,k){return function(E,a,s,m,k){return E.some(W=>W(a,s,m,k))}(this.ast.matchers,a,s,m,k)}buildStyles(a,s,m){const k=this._stateStyles["*"],W=this._stateStyles[a],re=k?k.buildStyles(s,m):{};return W?W.buildStyles(s,m):re}build(a,s,m,k,W,re,ae,ye,Le,Ge){const Xe=[],dt=this.ast.options&&this.ast.options.params||us,ct=this.buildStyles(m,ae&&ae.params||us,Xe),vt=ye&&ye.params||us,Rt=this.buildStyles(k,vt,Xe),Gt=new Set,Zt=new Map,gr=new Map,cr="void"===k,ni={params:{...dt,...vt}},Zr=Ge?[]:Oe(a,s,this.ast.animation,W,re,ct,Rt,ni,Le,Xe);let yr=0;if(Zr.forEach(on=>{yr=Math.max(on.duration+on.delay,yr)}),Xe.length)return Zs(s,this._triggerName,m,k,cr,ct,Rt,[],[],Zt,gr,yr,Xe);Zr.forEach(on=>{const an=on.element,zo=T(Zt,an,{});on.preStyleProps.forEach(kn=>zo[kn]=!0);const Ri=T(gr,an,{});on.postStyleProps.forEach(kn=>Ri[kn]=!0),an!==s&&Gt.add(an)});const sn=hr(Gt.values());return Zs(s,this._triggerName,m,k,cr,ct,Rt,Zr,sn,Zt,gr,yr)}}class Ys{constructor(a,s,m){this.styles=a,this.defaultParams=s,this.normalizer=m}buildStyles(a,s){const m={},k=Te(this.defaultParams);return Object.keys(a).forEach(W=>{const re=a[W];null!=re&&(k[W]=re)}),this.styles.styles.forEach(W=>{if("string"!=typeof W){const re=W;Object.keys(re).forEach(ae=>{let ye=re[ae];ye.length>1&&(ye=ar(ye,k,s));const Le=this.normalizer.normalizePropertyName(ae,s);ye=this.normalizer.normalizeStyleValue(ae,Le,ye,s),m[Le]=ye})}}),m}}class ua{constructor(a,s,m){this.name=a,this.ast=s,this._normalizer=m,this.transitionFactories=[],this.states={},s.states.forEach(k=>{this.states[k.name]=new Ys(k.style,k.options&&k.options.params||{},m)}),fs(this.states,"true","1"),fs(this.states,"false","0"),s.transitions.forEach(k=>{this.transitionFactories.push(new cs(a,k,this.states))}),this.fallbackTransition=function(E,a,s){return new cs(E,{type:1,animation:{type:2,steps:[],options:null},matchers:[(re,ae)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,s,m,k){return this.transitionFactories.find(re=>re.match(a,s,m,k))||null}matchStyles(a,s,m){return this.fallbackTransition.buildStyles(a,s,m)}}function fs(E,a,s){E.hasOwnProperty(a)?E.hasOwnProperty(s)||(E[s]=E[a]):E.hasOwnProperty(s)&&(E[a]=E[s])}const Js=new fi;class Xs{constructor(a,s,m){this.bodyNode=a,this._driver=s,this._normalizer=m,this._animations={},this._playersById={},this.players=[]}register(a,s){const m=[],k=xi(this._driver,s,m);if(m.length)throw new Error(`Unable to build the animation due to the following errors: ${m.join("\n")}`);this._animations[a]=k}_buildPlayer(a,s,m){const k=a.element,W=x(0,this._normalizer,0,a.keyframes,s,m);return this._driver.animate(k,W,a.duration,a.delay,a.easing,[],!0)}create(a,s,m={}){const k=[],W=this._animations[a];let re;const ae=new Map;if(W?(re=Oe(this._driver,s,W,G,q,{},{},m,Js,k),re.forEach(Ge=>{const Xe=T(ae,Ge.element,{});Ge.postStyleProps.forEach(dt=>Xe[dt]=null)})):(k.push("The requested animation doesn't exist or has already been destroyed"),re=[]),k.length)throw new Error(`Unable to create the animation due to the following errors: ${k.join("\n")}`);ae.forEach((Ge,Xe)=>{Object.keys(Ge).forEach(dt=>{Ge[dt]=this._driver.computeStyle(Xe,dt,p.l3)})});const Le=F(re.map(Ge=>{const Xe=ae.get(Ge.element);return this._buildPlayer(Ge,{},Xe)}));return this._playersById[a]=Le,Le.onDestroy(()=>this.destroy(a)),this.players.push(Le),Le}destroy(a){const s=this._getPlayer(a);s.destroy(),delete this._playersById[a];const m=this.players.indexOf(s);m>=0&&this.players.splice(m,1)}_getPlayer(a){const s=this._playersById[a];if(!s)throw new Error(`Unable to find the timeline player referenced by ${a}`);return s}listen(a,s,m,k){const W=S(s,"","","");return P(this._getPlayer(a),m,W,k),()=>{}}command(a,s,m,k){if("register"==m)return void this.register(a,k[0]);if("create"==m)return void this.create(a,s,k[0]||{});const W=this._getPlayer(a);switch(m){case"play":W.play();break;case"pause":W.pause();break;case"reset":W.reset();break;case"restart":W.restart();break;case"finish":W.finish();break;case"init":W.init();break;case"setPosition":W.setPosition(parseFloat(k[0]));break;case"destroy":this.destroy(a)}}}const qs="ng-animate-queued",eo="ng-animate-disabled",ro=[],hi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},wn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},sr="__ng_removed";class ds{constructor(a,s=""){this.namespaceId=s;const m=a&&a.hasOwnProperty("value");if(this.value=(m?a.value:a)??null,m){const W=Te(a);delete W.value,this.options=W}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(a){const s=a.params;if(s){const m=this.options.params;Object.keys(s).forEach(k=>{null==m[k]&&(m[k]=s[k])})}}}const Sn="void",pi=new ds(Sn);class fa{constructor(a,s,m){this.id=a,this.hostElement=s,this._engine=m,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,Ar(s,this._hostClassName)}listen(a,s,m,k){if(!this._triggers.hasOwnProperty(s))throw new Error(`Unable to listen on the animation trigger event "${m}" because the animation trigger "${s}" doesn't exist!`);if(null==m||0==m.length)throw new Error(`Unable to listen on the animation trigger "${s}" because the provided event is undefined!`);if("start"!=(E=m)&&"done"!=E)throw new Error(`The provided animation trigger event "${m}" for the animation trigger "${s}" is not supported!`);var E;const W=T(this._elementListeners,a,[]),re={name:s,phase:m,callback:k};W.push(re);const ae=T(this._engine.statesByElement,a,{});return ae.hasOwnProperty(s)||(Ar(a,H),Ar(a,H+"-"+s),ae[s]=pi),()=>{this._engine.afterFlush(()=>{const ye=W.indexOf(re);ye>=0&&W.splice(ye,1),this._triggers[s]||delete ae[s]})}}register(a,s){return!this._triggers[a]&&(this._triggers[a]=s,!0)}_getTrigger(a){const s=this._triggers[a];if(!s)throw new Error(`The provided animation trigger "${a}" has not been registered!`);return s}trigger(a,s,m,k=!0){const W=this._getTrigger(s),re=new hs(this.id,s,a);let ae=this._engine.statesByElement.get(a);ae||(Ar(a,H),Ar(a,H+"-"+s),this._engine.statesByElement.set(a,ae={}));let ye=ae[s];const Le=new ds(m,this.id);if(!(m&&m.hasOwnProperty("value"))&&ye&&Le.absorbOptions(ye.options),ae[s]=Le,ye||(ye=pi),Le.value!==Sn&&ye.value===Le.value){if(!function(E,a){const s=Object.keys(E),m=Object.keys(a);if(s.length!=m.length)return!1;for(let k=0;k<s.length;k++){const W=s[k];if(!a.hasOwnProperty(W)||E[W]!==a[W])return!1}return!0}(ye.params,Le.params)){const vt=[],Rt=W.matchStyles(ye.value,ye.params,vt),Gt=W.matchStyles(Le.value,Le.params,vt);vt.length?this._engine.reportError(vt):this._engine.afterFlush(()=>{wt(a,Rt),lt(a,Gt)})}return}const dt=T(this._engine.playersByElement,a,[]);dt.forEach(vt=>{vt.namespaceId==this.id&&vt.triggerName==s&&vt.queued&&vt.destroy()});let Tt=W.matchTransition(ye.value,Le.value,a,Le.params),ct=!1;if(!Tt){if(!k)return;Tt=W.fallbackTransition,ct=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:s,transition:Tt,fromState:ye,toState:Le,player:re,isFallbackTransition:ct}),ct||(Ar(a,qs),re.onStart(()=>{zn(a,qs)})),re.onDone(()=>{let vt=this.players.indexOf(re);vt>=0&&this.players.splice(vt,1);const Rt=this._engine.playersByElement.get(a);if(Rt){let Gt=Rt.indexOf(re);Gt>=0&&Rt.splice(Gt,1)}}),this.players.push(re),dt.push(re),re}deregister(a){delete this._triggers[a],this._engine.statesByElement.forEach((s,m)=>{delete s[a]}),this._elementListeners.forEach((s,m)=>{this._elementListeners.set(m,s.filter(k=>k.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const s=this._engine.playersByElement.get(a);s&&(s.forEach(m=>m.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,s){const m=this._engine.driver.query(a,ie,!0);m.forEach(k=>{if(k[sr])return;const W=this._engine.fetchNamespacesByElement(k);W.size?W.forEach(re=>re.triggerLeaveAnimation(k,s,!1,!0)):this.clearElementCache(k)}),this._engine.afterFlushAnimationsDone(()=>m.forEach(k=>this.clearElementCache(k)))}triggerLeaveAnimation(a,s,m,k){const W=this._engine.statesByElement.get(a);if(W){const re=[];if(Object.keys(W).forEach(ae=>{if(this._triggers[ae]){const ye=this.trigger(a,ae,Sn,k);ye&&re.push(ye)}}),re.length)return this._engine.markElementAsRemoved(this.id,a,!0,s),m&&F(re).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const s=this._elementListeners.get(a),m=this._engine.statesByElement.get(a);if(s&&m){const k=new Set;s.forEach(W=>{const re=W.name;if(k.has(re))return;k.add(re);const ye=this._triggers[re].fallbackTransition,Le=m[re]||pi,Ge=new ds(Sn),Xe=new hs(this.id,re,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:re,transition:ye,fromState:Le,toState:Ge,player:Xe,isFallbackTransition:!0})})}}removeNode(a,s){const m=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,s),this.triggerLeaveAnimation(a,s,!0))return;let k=!1;if(m.totalAnimations){const W=m.players.length?m.playersByQueriedElement.get(a):[];if(W&&W.length)k=!0;else{let re=a;for(;re=re.parentNode;)if(m.statesByElement.get(re)){k=!0;break}}}if(this.prepareLeaveAnimationListeners(a),k)m.markElementAsRemoved(this.id,a,!1,s);else{const W=a[sr];(!W||W===hi)&&(m.afterFlush(()=>this.clearElementCache(a)),m.destroyInnerAnimations(a),m._onRemovalComplete(a,s))}}insertNode(a,s){Ar(a,this._hostClassName)}drainQueuedTransitions(a){const s=[];return this._queue.forEach(m=>{const k=m.player;if(k.destroyed)return;const W=m.element,re=this._elementListeners.get(W);re&&re.forEach(ae=>{if(ae.name==m.triggerName){const ye=S(W,m.triggerName,m.fromState.value,m.toState.value);ye._data=a,P(m.player,ae.phase,ye,ae.callback)}}),k.markedForDestroy?this._engine.afterFlush(()=>{k.destroy()}):s.push(m)}),this._queue=[],s.sort((m,k)=>{const W=m.transition.ast.depCount,re=k.transition.ast.depCount;return 0==W||0==re?W-re:this._engine.driver.containsElement(m.element,k.element)?1:-1})}destroy(a){this.players.forEach(s=>s.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}elementContainsData(a){let s=!1;return this._elementListeners.has(a)&&(s=!0),s=!!this._queue.find(m=>m.element===a)||s,s}}class no{constructor(a,s,m){this.bodyNode=a,this.driver=s,this._normalizer=m,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(k,W)=>{}}_onRemovalComplete(a,s){this.onRemovalComplete(a,s)}get queuedPlayers(){const a=[];return this._namespaceList.forEach(s=>{s.players.forEach(m=>{m.queued&&a.push(m)})}),a}createNamespace(a,s){const m=new fa(a,s,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,s)?this._balanceNamespaceList(m,s):(this.newHostElements.set(s,m),this.collectEnterElement(s)),this._namespaceLookup[a]=m}_balanceNamespaceList(a,s){const m=this._namespaceList.length-1;if(m>=0){let k=!1;for(let W=m;W>=0;W--)if(this.driver.containsElement(this._namespaceList[W].hostElement,s)){this._namespaceList.splice(W+1,0,a),k=!0;break}k||this._namespaceList.splice(0,0,a)}else this._namespaceList.push(a);return this.namespacesByHostElement.set(s,a),a}register(a,s){let m=this._namespaceLookup[a];return m||(m=this.createNamespace(a,s)),m}registerTrigger(a,s,m){let k=this._namespaceLookup[a];k&&k.register(s,m)&&this.totalAnimations++}destroy(a,s){if(!a)return;const m=this._fetchNamespace(a);this.afterFlush(()=>{this.namespacesByHostElement.delete(m.hostElement),delete this._namespaceLookup[a];const k=this._namespaceList.indexOf(m);k>=0&&this._namespaceList.splice(k,1)}),this.afterFlushAnimationsDone(()=>m.destroy(s))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const s=new Set,m=this.statesByElement.get(a);if(m){const k=Object.keys(m);for(let W=0;W<k.length;W++){const re=m[k[W]].namespaceId;if(re){const ae=this._fetchNamespace(re);ae&&s.add(ae)}}}return s}trigger(a,s,m,k){if(mi(s)){const W=this._fetchNamespace(a);if(W)return W.trigger(s,m,k),!0}return!1}insertNode(a,s,m,k){if(!mi(s))return;const W=s[sr];if(W&&W.setForRemoval){W.setForRemoval=!1,W.setForMove=!0;const re=this.collectedLeaveElements.indexOf(s);re>=0&&this.collectedLeaveElements.splice(re,1)}if(a){const re=this._fetchNamespace(a);re&&re.insertNode(s,m)}k&&this.collectEnterElement(s)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,s){s?this.disabledNodes.has(a)||(this.disabledNodes.add(a),Ar(a,eo)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),zn(a,eo))}removeNode(a,s,m,k){if(mi(s)){const W=a?this._fetchNamespace(a):null;if(W?W.removeNode(s,k):this.markElementAsRemoved(a,s,!1,k),m){const re=this.namespacesByHostElement.get(s);re&&re.id!==a&&re.removeNode(s,k)}}else this._onRemovalComplete(s,k)}markElementAsRemoved(a,s,m,k){this.collectedLeaveElements.push(s),s[sr]={namespaceId:a,setForRemoval:k,hasAnimation:m,removedBeforeQueried:!1}}listen(a,s,m,k,W){return mi(s)?this._fetchNamespace(a).listen(s,m,k,W):()=>{}}_buildInstruction(a,s,m,k,W){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,m,k,a.fromState.options,a.toState.options,s,W)}destroyInnerAnimations(a){let s=this.driver.query(a,ie,!0);s.forEach(m=>this.destroyActiveAnimationsForElement(m)),0!=this.playersByQueriedElement.size&&(s=this.driver.query(a,Fe,!0),s.forEach(m=>this.finishActiveQueriedAnimationOnElement(m)))}destroyActiveAnimationsForElement(a){const s=this.playersByElement.get(a);s&&s.forEach(m=>{m.queued?m.markedForDestroy=!0:m.destroy()})}finishActiveQueriedAnimationOnElement(a){const s=this.playersByQueriedElement.get(a);s&&s.forEach(m=>m.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return F(this.players).onDone(()=>a());a()})}processLeaveNode(a){const s=a[sr];if(s&&s.setForRemoval){if(a[sr]=hi,s.namespaceId){this.destroyInnerAnimations(a);const m=this._fetchNamespace(s.namespaceId);m&&m.clearElementCache(a)}this._onRemovalComplete(a,s.setForRemoval)}a.classList?.contains(eo)&&this.markElementAsDisabled(a,!1),this.driver.query(a,".ng-animate-disabled",!0).forEach(m=>{this.markElementAsDisabled(m,!1)})}flush(a=-1){let s=[];if(this.newHostElements.size&&(this.newHostElements.forEach((m,k)=>this._balanceNamespaceList(m,k)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let m=0;m<this.collectedEnterElements.length;m++)Ar(this.collectedEnterElements[m],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const m=[];try{s=this._flushAnimations(m,a)}finally{for(let k=0;k<m.length;k++)m[k]()}}else for(let m=0;m<this.collectedLeaveElements.length;m++)this.processLeaveNode(this.collectedLeaveElements[m]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(m=>m()),this._flushFns=[],this._whenQuietFns.length){const m=this._whenQuietFns;this._whenQuietFns=[],s.length?F(s).onDone(()=>{m.forEach(k=>k())}):m.forEach(k=>k())}}reportError(a){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${a.join("\n")}`)}_flushAnimations(a,s){const m=new fi,k=[],W=new Map,re=[],ae=new Map,ye=new Map,Le=new Map,Ge=new Set;this.disabledNodes.forEach(rt=>{Ge.add(rt);const ot=this.driver.query(rt,".ng-animate-queued",!0);for(let gt=0;gt<ot.length;gt++)Ge.add(ot[gt])});const Xe=this.bodyNode,dt=Array.from(this.statesByElement.keys()),Tt=io(dt,this.collectedEnterElements),ct=new Map;let vt=0;Tt.forEach((rt,ot)=>{const gt=G+vt++;ct.set(ot,gt),rt.forEach(Ft=>Ar(Ft,gt))});const Rt=[],Gt=new Set,Zt=new Set;for(let rt=0;rt<this.collectedLeaveElements.length;rt++){const ot=this.collectedLeaveElements[rt],gt=ot[sr];gt&&gt.setForRemoval&&(Rt.push(ot),Gt.add(ot),gt.hasAnimation?this.driver.query(ot,".ng-star-inserted",!0).forEach(Ft=>Gt.add(Ft)):Zt.add(ot))}const gr=new Map,cr=io(dt,Array.from(Gt));cr.forEach((rt,ot)=>{const gt=q+vt++;gr.set(ot,gt),rt.forEach(Ft=>Ar(Ft,gt))}),a.push(()=>{Tt.forEach((rt,ot)=>{const gt=ct.get(ot);rt.forEach(Ft=>zn(Ft,gt))}),cr.forEach((rt,ot)=>{const gt=gr.get(ot);rt.forEach(Ft=>zn(Ft,gt))}),Rt.forEach(rt=>{this.processLeaveNode(rt)})});const ni=[],Zr=[];for(let rt=this._namespaceList.length-1;rt>=0;rt--)this._namespaceList[rt].drainQueuedTransitions(s).forEach(gt=>{const Ft=gt.player,or=gt.element;if(ni.push(Ft),this.collectedEnterElements.length){const Wr=or[sr];if(Wr&&Wr.setForMove)return void Ft.destroy()}const zr=!Xe||!this.driver.containsElement(Xe,or),xr=gr.get(or),Ln=ct.get(or),Yt=this._buildInstruction(gt,m,Ln,xr,zr);if(Yt.errors&&Yt.errors.length)return void Zr.push(Yt);if(zr)return Ft.onStart(()=>wt(or,Yt.fromStyles)),Ft.onDestroy(()=>lt(or,Yt.toStyles)),void k.push(Ft);if(gt.isFallbackTransition)return Ft.onStart(()=>wt(or,Yt.fromStyles)),Ft.onDestroy(()=>lt(or,Yt.toStyles)),void k.push(Ft);const Qu=[];Yt.timelines.forEach(Wr=>{Wr.stretchStartingKeyframe=!0,this.disabledNodes.has(Wr.element)||Qu.push(Wr)}),Yt.timelines=Qu,m.append(or,Yt.timelines),re.push({instruction:Yt,player:Ft,element:or}),Yt.queriedElements.forEach(Wr=>T(ae,Wr,[]).push(Ft)),Yt.preStyleProps.forEach((Wr,ii)=>{const Ns=Object.keys(Wr);if(Ns.length){let si=ye.get(ii);si||ye.set(ii,si=new Set),Ns.forEach(ru=>si.add(ru))}}),Yt.postStyleProps.forEach((Wr,ii)=>{const Ns=Object.keys(Wr);let si=Le.get(ii);si||Le.set(ii,si=new Set),Ns.forEach(ru=>si.add(ru))})});if(Zr.length){const rt=[];Zr.forEach(ot=>{rt.push(`@${ot.triggerName} has failed due to:\n`),ot.errors.forEach(gt=>rt.push(`- ${gt}\n`))}),ni.forEach(ot=>ot.destroy()),this.reportError(rt)}const yr=new Map,sn=new Map;re.forEach(rt=>{const ot=rt.element;m.has(ot)&&(sn.set(ot,ot),this._beforeAnimationBuild(rt.player.namespaceId,rt.instruction,yr))}),k.forEach(rt=>{const ot=rt.element;this._getPreviousPlayers(ot,!1,rt.namespaceId,rt.triggerName,null).forEach(Ft=>{T(yr,ot,[]).push(Ft),Ft.destroy()})});const on=Rt.filter(rt=>ga(rt,ye,Le)),an=new Map;ms(an,this.driver,Zt,Le,p.l3).forEach(rt=>{ga(rt,ye,Le)&&on.push(rt)});const Ri=new Map;Tt.forEach((rt,ot)=>{ms(Ri,this.driver,new Set(rt),ye,p.k1)}),on.forEach(rt=>{const ot=an.get(rt),gt=Ri.get(rt);an.set(rt,{...ot,...gt})});const kn=[],Wo=[],Ko={};re.forEach(rt=>{const{element:ot,player:gt,instruction:Ft}=rt;if(m.has(ot)){if(Ge.has(ot))return gt.onDestroy(()=>lt(ot,Ft.toStyles)),gt.disabled=!0,gt.overrideTotalTime(Ft.totalTime),void k.push(gt);let or=Ko;if(sn.size>1){let xr=ot;const Ln=[];for(;xr=xr.parentNode;){const Yt=sn.get(xr);if(Yt){or=Yt;break}Ln.push(xr)}Ln.forEach(Yt=>sn.set(Yt,or))}const zr=this._buildAnimation(gt.namespaceId,Ft,yr,W,Ri,an);if(gt.setRealPlayer(zr),or===Ko)kn.push(gt);else{const xr=this.playersByElement.get(or);xr&&xr.length&&(gt.parentPlayer=F(xr)),k.push(gt)}}else wt(ot,Ft.fromStyles),gt.onDestroy(()=>lt(ot,Ft.toStyles)),Wo.push(gt),Ge.has(ot)&&k.push(gt)}),Wo.forEach(rt=>{const ot=W.get(rt.element);if(ot&&ot.length){const gt=F(ot);rt.setRealPlayer(gt)}}),k.forEach(rt=>{rt.parentPlayer?rt.syncPlayerEvents(rt.parentPlayer):rt.destroy()});for(let rt=0;rt<Rt.length;rt++){const ot=Rt[rt],gt=ot[sr];if(zn(ot,q),gt&&gt.hasAnimation)continue;let Ft=[];if(ae.size){let zr=ae.get(ot);zr&&zr.length&&Ft.push(...zr);let xr=this.driver.query(ot,Fe,!0);for(let Ln=0;Ln<xr.length;Ln++){let Yt=ae.get(xr[Ln]);Yt&&Yt.length&&Ft.push(...Yt)}}const or=Ft.filter(zr=>!zr.destroyed);or.length?ma(this,ot,or):this.processLeaveNode(ot)}return Rt.length=0,kn.forEach(rt=>{this.players.push(rt),rt.onDone(()=>{rt.destroy();const ot=this.players.indexOf(rt);this.players.splice(ot,1)}),rt.play()}),kn}elementContainsData(a,s){let m=!1;const k=s[sr];return k&&k.setForRemoval&&(m=!0),this.playersByElement.has(s)&&(m=!0),this.playersByQueriedElement.has(s)&&(m=!0),this.statesByElement.has(s)&&(m=!0),this._fetchNamespace(a).elementContainsData(s)||m}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,s,m,k,W){let re=[];if(s){const ae=this.playersByQueriedElement.get(a);ae&&(re=ae)}else{const ae=this.playersByElement.get(a);if(ae){const ye=!W||W==Sn;ae.forEach(Le=>{Le.queued||!ye&&Le.triggerName!=k||re.push(Le)})}}return(m||k)&&(re=re.filter(ae=>!(m&&m!=ae.namespaceId||k&&k!=ae.triggerName))),re}_beforeAnimationBuild(a,s,m){const W=s.element,re=s.isRemovalTransition?void 0:a,ae=s.isRemovalTransition?void 0:s.triggerName;for(const ye of s.timelines){const Le=ye.element,Ge=Le!==W,Xe=T(m,Le,[]);this._getPreviousPlayers(Le,Ge,re,ae,s.toState).forEach(Tt=>{const ct=Tt.getRealPlayer();ct.beforeDestroy&&ct.beforeDestroy(),Tt.destroy(),Xe.push(Tt)})}wt(W,s.fromStyles)}_buildAnimation(a,s,m,k,W,re){const ae=s.triggerName,ye=s.element,Le=[],Ge=new Set,Xe=new Set,dt=s.timelines.map(ct=>{const vt=ct.element;Ge.add(vt);const Rt=vt[sr];if(Rt&&Rt.removedBeforeQueried)return new p.ZN(ct.duration,ct.delay);const Gt=vt!==ye,Zt=function(E){const a=[];return hn(E,a),a}((m.get(vt)||ro).map(yr=>yr.getRealPlayer())).filter(yr=>!!yr.element&&yr.element===vt),gr=W.get(vt),cr=re.get(vt),ni=x(0,this._normalizer,0,ct.keyframes,gr,cr),Zr=this._buildPlayer(ct,ni,Zt);if(ct.subTimeline&&k&&Xe.add(vt),Gt){const yr=new hs(a,ae,vt);yr.setRealPlayer(Zr),Le.push(yr)}return Zr});Le.forEach(ct=>{T(this.playersByQueriedElement,ct.element,[]).push(ct),ct.onDone(()=>function(E,a,s){let m;if(E instanceof Map){if(m=E.get(a),m){if(m.length){const k=m.indexOf(s);m.splice(k,1)}0==m.length&&E.delete(a)}}else if(m=E[a],m){if(m.length){const k=m.indexOf(s);m.splice(k,1)}0==m.length&&delete E[a]}return m}(this.playersByQueriedElement,ct.element,ct))}),Ge.forEach(ct=>Ar(ct,Ce));const Tt=F(dt);return Tt.onDestroy(()=>{Ge.forEach(ct=>zn(ct,Ce)),lt(ye,s.toStyles)}),Xe.forEach(ct=>{T(k,ct,[]).push(Tt)}),Tt}_buildPlayer(a,s,m){return s.length>0?this.driver.animate(a.element,s,a.duration,a.delay,a.easing,m):new p.ZN(a.duration,a.delay)}}class hs{constructor(a,s,m){this.namespaceId=a,this.triggerName=s,this.element=m,this._player=new p.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,Object.keys(this._queuedCallbacks).forEach(s=>{this._queuedCallbacks[s].forEach(m=>P(a,s,void 0,m))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const s=this._player;s.triggerCallback&&a.onStart(()=>s.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,s){T(this._queuedCallbacks,a,[]).push(s)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const s=this._player;s.triggerCallback&&s.triggerCallback(a)}}function mi(E){return E&&1===E.nodeType}function ps(E,a){const s=E.style.display;return E.style.display=a??"none",s}function ms(E,a,s,m,k){const W=[];s.forEach(ye=>W.push(ps(ye)));const re=[];m.forEach((ye,Le)=>{const Ge={};ye.forEach(Xe=>{const dt=Ge[Xe]=a.computeStyle(Le,Xe,k);(!dt||0==dt.length)&&(Le[sr]=wn,re.push(Le))}),E.set(Le,Ge)});let ae=0;return s.forEach(ye=>ps(ye,W[ae++])),re}function io(E,a){const s=new Map;if(E.forEach(ae=>s.set(ae,[])),0==a.length)return s;const k=new Set(a),W=new Map;function re(ae){if(!ae)return 1;let ye=W.get(ae);if(ye)return ye;const Le=ae.parentNode;return ye=s.has(Le)?Le:k.has(Le)?1:re(Le),W.set(ae,ye),ye}return a.forEach(ae=>{const ye=re(ae);1!==ye&&s.get(ye).push(ae)}),s}function Ar(E,a){E.classList?.add(a)}function zn(E,a){E.classList?.remove(a)}function ma(E,a,s){F(s).onDone(()=>E.processLeaveNode(a))}function hn(E,a){for(let s=0;s<E.length;s++){const m=E[s];m instanceof p.ZE?hn(m.players,a):a.push(m)}}function ga(E,a,s){const m=s.get(E);if(!m)return!1;let k=a.get(E);return k?m.forEach(W=>k.add(W)):a.set(E,m),s.delete(E),!0}class vi{constructor(a,s,m){this.bodyNode=a,this._driver=s,this._normalizer=m,this._triggerCache={},this.onRemovalComplete=(k,W)=>{},this._transitionEngine=new no(a,s,m),this._timelineEngine=new Xs(a,s,m),this._transitionEngine.onRemovalComplete=(k,W)=>this.onRemovalComplete(k,W)}registerTrigger(a,s,m,k,W){const re=a+"-"+k;let ae=this._triggerCache[re];if(!ae){const ye=[],Le=xi(this._driver,W,ye);if(ye.length)throw new Error(`The animation trigger "${k}" has failed to build due to the following errors:\n - ${ye.join("\n - ")}`);ae=function(E,a,s){return new ua(E,a,s)}(k,Le,this._normalizer),this._triggerCache[re]=ae}this._transitionEngine.registerTrigger(s,k,ae)}register(a,s){this._transitionEngine.register(a,s)}destroy(a,s){this._transitionEngine.destroy(a,s)}onInsert(a,s,m,k){this._transitionEngine.insertNode(a,s,m,k)}onRemove(a,s,m,k){this._transitionEngine.removeNode(a,s,k||!1,m)}disableAnimations(a,s){this._transitionEngine.markElementAsDisabled(a,s)}process(a,s,m,k){if("@"==m.charAt(0)){const[W,re]=I(m);this._timelineEngine.command(W,s,re,k)}else this._transitionEngine.trigger(a,s,m,k)}listen(a,s,m,k,W){if("@"==m.charAt(0)){const[re,ae]=I(m);return this._timelineEngine.listen(re,s,ae,W)}return this._transitionEngine.listen(a,s,m,k,W)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function so(E,a){let s=null,m=null;return Array.isArray(a)&&a.length?(s=Li(a[0]),a.length>1&&(m=Li(a[a.length-1]))):a&&(s=Li(a)),s||m?new ya(E,s,m):null}let ya=(()=>{class E{constructor(s,m,k){this._element=s,this._startStyles=m,this._endStyles=k,this._state=0;let W=E.initialStylesByElement.get(s);W||E.initialStylesByElement.set(s,W={}),this._initialStyles=W}start(){this._state<1&&(this._startStyles&&lt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lt(this._element,this._initialStyles),this._endStyles&&(lt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(E.initialStylesByElement.delete(this._element),this._startStyles&&(wt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wt(this._element,this._endStyles),this._endStyles=null),lt(this._element,this._initialStyles),this._state=3)}}return E.initialStylesByElement=new WeakMap,E})();function Li(E){let a=null;const s=Object.keys(E);for(let m=0;m<s.length;m++){const k=s[m];_a(k)&&(a=a||{},a[k]=E[k])}return a}function _a(E){return"display"===E||"position"===E}const ao="animation",uo="animationend";class Ea{constructor(a,s,m,k,W,re,ae){this._element=a,this._name=s,this._duration=m,this._delay=k,this._easing=W,this._fillMode=re,this._onDoneFn=ae,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=ye=>this._handleCallback(ye)}apply(){(function(E,a){const s=vs(E,"").trim();let m=0;s.length&&(function(E,a){let s=0;for(let m=0;m<E.length;m++)","===E.charAt(m)&&s++;return s}(s)+1,a=`${s}, ${a}`),Fi(E,"",a)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),fo(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){co(this._element,this._name,"paused")}resume(){co(this._element,this._name,"running")}setPosition(a){const s=lo(this._element,this._name);this._position=a*this._duration,Fi(this._element,"Delay",`-${this._position}ms`,s)}getPosition(){return this._position}_handleCallback(a){const s=a._ngTestManualTimestamp||Date.now(),m=1e3*parseFloat(a.elapsedTime.toFixed(3));a.animationName==this._name&&Math.max(s-this._startTime,0)>=this._delay&&m>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),fo(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(E,a){const m=vs(E,"").split(","),k=Bi(m,a);k>=0&&(m.splice(k,1),Fi(E,"",m.join(",")))}(this._element,this._name))}}function co(E,a,s){Fi(E,"PlayState",s,lo(E,a))}function lo(E,a){const s=vs(E,"");return s.indexOf(",")>0?Bi(s.split(","),a):Bi([s],a)}function Bi(E,a){for(let s=0;s<E.length;s++)if(E[s].indexOf(a)>=0)return s;return-1}function fo(E,a,s){s?E.removeEventListener(uo,a):E.addEventListener(uo,a)}function Fi(E,a,s,m){const k=ao+a;if(null!=m){const W=E.style[k];if(W.length){const re=W.split(",");re[m]=s,s=re.join(",")}}E.style[k]=s}function vs(E,a){return E.style[ao+a]||""}class pn{constructor(a,s,m,k,W,re,ae,ye){this.element=a,this.keyframes=s,this.animationName=m,this._duration=k,this._delay=W,this._finalStyles=ae,this._specialStyles=ye,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=re||"linear",this.totalTime=k+W,this._buildStyler()}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(a=>a()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(a){this._styler.setPosition(a)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ea(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(a){const s="start"==a?this._onStartFns:this._onDoneFns;s.forEach(m=>m()),s.length=0}beforeDestroy(){this.init();const a={};if(this.hasStarted()){const s=this._state>=3;Object.keys(this._finalStyles).forEach(m=>{"offset"!=m&&(a[m]=s?this._finalStyles[m]:ln(this.element,m))})}this.currentSnapshot=a}}class pr extends p.ZN{constructor(a,s){super(),this.element=a,this._startingStyles={},this.__initialized=!1,this._styles=we(s)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(a=>{this._startingStyles[a]=this.element.style[a]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(a=>this.element.style.setProperty(a,this._styles[a])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(a=>{const s=this._startingStyles[a];s?this.element.style.setProperty(a,s):this.element.style.removeProperty(a)}),this._startingStyles=null,super.destroy())}}class Fr{constructor(){this._count=0}validateStyleProperty(a){return v(a)}matchesElement(a,s){return!1}containsElement(a,s){return K(a,s)}query(a,s,m){return ue(a,s,m)}computeStyle(a,s,m){return window.getComputedStyle(a)[s]}buildKeyframeElement(a,s,m){m=m.map(ae=>we(ae));let k=`@keyframes ${s} {\n`,W="";m.forEach(ae=>{W=" ";const ye=parseFloat(ae.offset);k+=`${W}${100*ye}% {\n`,W+=" ",Object.keys(ae).forEach(Le=>{const Ge=ae[Le];switch(Le){case"offset":return;case"easing":return void(Ge&&(k+=`${W}animation-timing-function: ${Ge};\n`));default:return void(k+=`${W}${Le}: ${Ge};\n`)}}),k+=`${W}}\n`}),k+="}\n";const re=document.createElement("style");return re.textContent=k,re}animate(a,s,m,k,W,re=[],ae){const ye=re.filter(Rt=>Rt instanceof pn),Le={};Mt(m,k)&&ye.forEach(Rt=>{let Gt=Rt.currentSnapshot;Object.keys(Gt).forEach(Zt=>Le[Zt]=Gt[Zt])});const Ge=function(E){let a={};return E&&(Array.isArray(E)?E:[E]).forEach(m=>{Object.keys(m).forEach(k=>{"offset"==k||"easing"==k||(a[k]=m[k])})}),a}(s=Lt(a,s,Le));if(0==m)return new pr(a,Ge);const Xe="gen_css_kf_"+this._count++,dt=this.buildKeyframeElement(a,Xe,s);(function(E){const a=E.getRootNode?.();return"undefined"!=typeof ShadowRoot&&a instanceof ShadowRoot?a:document.head})(a).appendChild(dt);const ct=so(a,s),vt=new pn(a,s,Xe,m,k,W,Ge,ct);return vt.onDestroy(()=>{var E;(E=dt).parentNode.removeChild(E)}),vt}}class gi{constructor(a,s,m,k){this.element=a,this.keyframes=s,this.options=m,this._specialStyles=k,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=m.duration,this._delay=m.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(a,s,m){return a.animate(s,m)}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a={};if(this.hasStarted()){const s=this._finalKeyframe;Object.keys(s).forEach(m=>{"offset"!=m&&(a[m]=this._finished?s[m]:ln(this.element,m))})}this.currentSnapshot=a}triggerCallback(a){const s="start"==a?this._onStartFns:this._onDoneFns;s.forEach(m=>m()),s.length=0}}class ho{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Wn().toString()),this._cssKeyframesDriver=new Fr}validateStyleProperty(a){return v(a)}matchesElement(a,s){return!1}containsElement(a,s){return K(a,s)}query(a,s,m){return ue(a,s,m)}computeStyle(a,s,m){return window.getComputedStyle(a)[s]}overrideWebAnimationsSupport(a){this._isNativeImpl=a}animate(a,s,m,k,W,re=[],ae){if(!ae&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(a,s,m,k,W,re);const Ge={duration:m,delay:k,fill:0==k?"both":"forwards"};W&&(Ge.easing=W);const Xe={},dt=re.filter(ct=>ct instanceof gi);Mt(m,k)&&dt.forEach(ct=>{let vt=ct.currentSnapshot;Object.keys(vt).forEach(Rt=>Xe[Rt]=vt[Rt])});const Tt=so(a,s=Lt(a,s=s.map(ct=>Ze(ct,!1)),Xe));return new gi(a,s,Ge,Tt)}}function Wn(){return B()&&Element.prototype.animate||{}}var Nr=l(1457);let Ui=(()=>{class E extends p._j{constructor(s,m){super(),this._nextAnimationId=0,this._renderer=s.createRenderer(m.body,{id:"0",encapsulation:u.ViewEncapsulation.None,styles:[],data:{animation:[]}})}build(s){const m=this._nextAnimationId.toString();this._nextAnimationId++;const k=Array.isArray(s)?(0,p.vP)(s):s;return mo(this._renderer,null,m,"register",[k]),new Da(m,this._renderer)}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275inject(u.RendererFactory2),u.\u0275\u0275inject(Nr.DOCUMENT))},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac}),E})();class Da extends p.LC{constructor(a,s){super(),this._id=a,this._renderer=s}create(a,s){return new po(this._id,a,s||{},this._renderer)}}class po{constructor(a,s,m,k){this.id=a,this.element=s,this._renderer=k,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",m)}_listen(a,s){return this._renderer.listen(this.element,`@@${this.id}:${a}`,s)}_command(a,...s){return mo(this._renderer,this.element,this.id,a,s)}onDone(a){this._listen("done",a)}onStart(a){this._listen("start",a)}onDestroy(a){this._listen("destroy",a)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(a){this._command("setPosition",a)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function mo(E,a,s,m,k){return E.setProperty(a,`@@${s}:${m}`,k)}const vo="@.disabled";let Aa=(()=>{class E{constructor(s,m,k){this.delegate=s,this.engine=m,this._zone=k,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),m.onRemovalComplete=(W,re)=>{const ae=re?.parentNode(W);ae&&re.removeChild(ae,W)}}createRenderer(s,m){const W=this.delegate.createRenderer(s,m);if(!(s&&m&&m.data&&m.data.animation)){let Ge=this._rendererCache.get(W);return Ge||(Ge=new $i("",W,this.engine),this._rendererCache.set(W,Ge)),Ge}const re=m.id,ae=m.id+"-"+this._currentId;this._currentId++,this.engine.register(ae,s);const ye=Ge=>{Array.isArray(Ge)?Ge.forEach(ye):this.engine.registerTrigger(re,ae,s,Ge.name,Ge)};return m.data.animation.forEach(ye),new _s(this,ae,W,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(s,m,k){s>=0&&s<this._microtaskId?this._zone.run(()=>m(k)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(W=>{const[re,ae]=W;re(ae)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([m,k]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275inject(u.RendererFactory2),u.\u0275\u0275inject(vi),u.\u0275\u0275inject(u.NgZone))},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac}),E})();class $i{constructor(a,s,m){this.namespaceId=a,this.delegate=s,this.engine=m,this.destroyNode=this.delegate.destroyNode?k=>s.destroyNode(k):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(a,s){return this.delegate.createElement(a,s)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,s){this.delegate.appendChild(a,s),this.engine.onInsert(this.namespaceId,s,a,!1)}insertBefore(a,s,m,k=!0){this.delegate.insertBefore(a,s,m),this.engine.onInsert(this.namespaceId,s,a,k)}removeChild(a,s,m){this.engine.onRemove(this.namespaceId,s,this.delegate,m)}selectRootElement(a,s){return this.delegate.selectRootElement(a,s)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,s,m,k){this.delegate.setAttribute(a,s,m,k)}removeAttribute(a,s,m){this.delegate.removeAttribute(a,s,m)}addClass(a,s){this.delegate.addClass(a,s)}removeClass(a,s){this.delegate.removeClass(a,s)}setStyle(a,s,m,k){this.delegate.setStyle(a,s,m,k)}removeStyle(a,s,m){this.delegate.removeStyle(a,s,m)}setProperty(a,s,m){"@"==s.charAt(0)&&s==vo?this.disableAnimations(a,!!m):this.delegate.setProperty(a,s,m)}setValue(a,s){this.delegate.setValue(a,s)}listen(a,s,m){return this.delegate.listen(a,s,m)}disableAnimations(a,s){this.engine.disableAnimations(a,s)}}class _s extends $i{constructor(a,s,m,k){super(s,m,k),this.factory=a,this.namespaceId=s}setProperty(a,s,m){"@"==s.charAt(0)?"."==s.charAt(1)&&s==vo?this.disableAnimations(a,m=void 0===m||!!m):this.engine.process(this.namespaceId,a,s.substr(1),m):this.delegate.setProperty(a,s,m)}listen(a,s,m){if("@"==s.charAt(0)){const k=function(E){switch(E){case"body":return document.body;case"document":return document;case"window":return window;default:return E}}(a);let W=s.substr(1),re="";return"@"!=W.charAt(0)&&([W,re]=function(E){const a=E.indexOf(".");return[E.substring(0,a),E.substr(a+1)]}(W)),this.engine.listen(this.namespaceId,k,W,re,ae=>{this.factory.scheduleListenerCallback(ae._data||-1,m,ae)})}return this.delegate.listen(a,s,m)}}let Pa=(()=>{class E extends vi{constructor(s,m,k){super(s.body,m,k)}ngOnDestroy(){this.flush()}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275inject(Nr.DOCUMENT),u.\u0275\u0275inject(pe),u.\u0275\u0275inject(dn))},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac}),E})();const zi=new u.InjectionToken("AnimationModuleType"),Es=[{provide:p._j,useClass:Ui},{provide:dn,useFactory:function(){return new oa}},{provide:vi,useClass:Pa},{provide:u.RendererFactory2,useFactory:function(E,a,s){return new Aa(E,a,s)},deps:[g.se,vi,u.NgZone]}],ws=[{provide:pe,useFactory:function(){return"function"==typeof Wn()?new ho:new Fr}},{provide:zi,useValue:"BrowserAnimations"},...Es],yo=[{provide:pe,useClass:ge},{provide:zi,useValue:"NoopAnimations"},...Es];let _o=(()=>{class E{static withConfig(s){return{ngModule:E,providers:s.disableAnimations?yo:ws}}}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({providers:ws,imports:[g.b2]}),E})();var lr=l(2816);const Be={properties:{id:{type:"string",description:"Id"},name:{type:"string",description:"Name"},shortName:{type:"string",description:"Short name"},description:{type:"string",description:"Description"},startUrl:{type:"string",description:"Start url"},icons:{type:"array",description:"Icons",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"}},required:["src","sizes","type"]}},themeColor:{type:"string",description:"Theme color"},backgroundColor:{type:"string",description:"Background color"},screenshots:{type:"array",description:"Screenshots",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"},platform:{type:"string",description:"Platform"},label:{type:"string",description:"Label"}},required:["src","sizes","type","platform","label"]}},iarcRatingId:{type:"string",description:"IARC rating id"},categories:{type:"array",description:"Categories",items:{type:"string",description:"Category"}},additionalProperties:{type:"object",description:"Additional properties",properties:{permissions:{type:"array",description:"Permissions",items:{type:"object",properties:{kind:{type:"string",description:"Kind",enum:["collection"]},mode:{type:"string",description:"Mode",enum:["read","write","delete"]},target:{type:"string",description:"Target"}},required:["kind","mode","target"]}},internal:{type:"boolean",description:"Internal"},starred:{type:"boolean",description:"Internal"},defaultShortcut:{type:"string",description:"Default shortcut"},sidebarShortcuts:{type:"array",description:"Sidebar shortcuts",items:{type:"string",description:"Sidebar shortcut"}}}},shortcuts:{type:"array",description:"Shortcuts",items:{type:"object",properties:{name:{type:"string",description:"Name"},url:{type:"string",description:"Url"},icons:{type:"array",description:"Icons",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"}},required:["src","sizes","type"]}},shortName:{type:"string",description:"Short name"},description:{type:"string",description:"Description"}},required:["name","url"]}},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","name","startUrl","createdAt","updatedAt"]},Ta={provide:lr.RY,useValue:{name:"storeapplications",creator:{schema:{title:"Store Store",description:"User Applications",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:Be.properties,required:["id","name","startUrl","createdAt","updatedAt"]}}},multi:!0},Ma={provide:lr.RY,useValue:{name:"userapplications",creator:{schema:{title:"User Applications",description:"User Applications",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:Be.properties,required:["id","name","startUrl","createdAt","updatedAt"]}}},multi:!0};var _t=l(899),bo=l(4995);const jt={provide:lr.To,useValue:{name:"userapplications",upsert:!0,data:[{id:"com.central-factory.portal",name:"Central Factory Portal",description:"Central Factory Portal",startUrl:"/",icons:[{src:"assets/icons/mdi/open-in-app.svg",sizes:"512x512",type:"image/svg+xml"}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:_t.k.Collection,mode:_t.R.Read,target:"userpreferences"},{kind:_t.k.Collection,mode:_t.R.Read,target:"useravatars"},{kind:_t.k.Collection,mode:_t.R.Read,target:"userapplications"}]}},{id:"com.central-factory.player",name:"Application Player",description:"Access to many local and hosted web applications. Applications can be loaded through a webview or through a webpack module federation.",startUrl:"play",icons:[{src:"assets/icons/mdi/view-grid.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Application Player",url:"/play",icons:[{src:"assets/icons/mdi/view-grid.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:_t.k.Collection,mode:_t.R.Read,target:"userapplications"},{kind:_t.k.Collection,mode:_t.R.Write,target:"userapplications"},{kind:_t.k.Collection,mode:_t.R.Delete,target:"userapplications"},{kind:_t.k.Collection,mode:_t.R.Read,target:"storeapplications"},{kind:_t.k.Collection,mode:_t.R.Write,target:"storeapplications"},{kind:_t.k.Collection,mode:_t.R.Delete,target:"storeapplications"}],sidebarShortcuts:["Application Player"]}},{id:"com.central-factory.user-avatars",name:"User Avatars",description:"Avatars management module. Customize your user avatars.",startUrl:"user-avatars",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Selected Avatar",url:"/selected-avatar",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}]},{name:"Select Avatar",url:"/select-avatar",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:_t.k.Collection,mode:_t.R.Read,target:"useravatars"},{kind:_t.k.Collection,mode:_t.R.Write,target:"useravatars"},{kind:_t.k.Collection,mode:_t.R.Delete,target:"useravatars"},{kind:_t.k.Collection,mode:_t.R.Read,target:"userpreferences"},{kind:_t.k.Collection,mode:_t.R.Write,target:"userpreferences"}],sidebarShortcuts:["Selected Avatar"]}},{id:"com.central-factory.inventory",name:"Inventory",description:"Assets management module. Manage and preview your assets.",startUrl:"inventory",icons:[{src:"assets/icons/mdi/bag-personal.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Inventory",url:"/inventory",icons:[{src:"assets/icons/mdi/bag-personal.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:_t.k.Collection,mode:_t.R.Read,target:"userassets"},{kind:_t.k.Collection,mode:_t.R.Write,target:"userassets"},{kind:_t.k.Collection,mode:_t.R.Delete,target:"userassets"}],sidebarShortcuts:["Inventory"]}},{id:"com.central-factory.marketplace",name:"Marketplace",description:"Portal Marketplace. Sell your assets and acquire new ones.",startUrl:"marketplace",icons:[{src:"assets/icons/mdi/store.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Marketplace",url:"/marketplace",icons:[{src:"assets/icons/mdi/store.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:_t.k.Collection,mode:_t.R.Read,target:"userassets"},{kind:_t.k.Collection,mode:_t.R.Write,target:"userassets"},{kind:_t.k.Collection,mode:_t.R.Delete,target:"userassets"}],sidebarShortcuts:["Marketplace"]}},{id:"com.central-factory.settings",name:"Settings",description:"Customize your portal experience. Manage your preferences.",startUrl:"settings",icons:[{src:"assets/icons/mdi/cog.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Settings",url:"/settings",icons:[{src:"assets/icons/mdi/cog.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{internal:!0,author:{id:"com.central-factory",name:"Central Factory"},permissions:[{kind:_t.k.Collection,mode:_t.R.Read,target:"userpreferences"},{kind:_t.k.Collection,mode:_t.R.Write,target:"userpreferences"}],sidebarShortcuts:["Settings"]}},{id:"com.central-factory.codex",name:"Codex",description:"Official documentation for the Central Factory Metaverse",startUrl:"codex",categories:["productivity"],icons:[{src:"assets/icons/mdi/book-open-page-variant.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Codex",url:"https://www.aitorllamas.com/metaverse/apps/codex",icons:[{src:"assets/icons/mdi/book-open-page-variant.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},renderingType:bo.B.Webview,supportsBrowser:!0,internal:!1,permissions:[],defaultShortcut:"Codex",sidebarShortcuts:[],colors:[{variation:bo.c.Primary,color:"#706fd3"}]}}]},multi:!0},ka={provide:lr.RY,useValue:{name:"userassets",creator:{schema:{title:"User Assets",description:"User assets",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},name:{type:"string",description:"Name"},model:{type:"string",description:"Model"},description:{type:"string",description:"Description"},digital:{type:"boolean",description:"Digital"},private:{type:"boolean",description:"Private"},kind:{type:"string",description:"Kind",enum:["unknown","currency","land","material","building","equipment","furniture","machine","vehicle","media-resource","other"]},url:{type:"string",description:"Url"},previewUrl:{type:"string",description:"Preview url"},currentValue:{type:"object",description:"Current value",properties:{usd:{type:"string",description:"Usd"},eth:{type:"string",description:"Eth"}}},purchaseValue:{type:"object",description:"Purchase value",properties:{usd:{type:"string",description:"Usd"},eth:{type:"string",description:"Eth"}}},purchaseDate:{format:"date-time",type:"string"},data:{type:"object",description:"Data"},owner:{type:"string",description:"Owner"},producer:{type:"string",description:"Producer"},permissions:{type:"array",description:"Permissions",items:{type:"object",description:"Permission"}},createdAt:{format:"date-time",type:"string",description:"Created at"},updatedAt:{format:"date-time",type:"string",description:"Updated at"}}}}},multi:!0},Wi={type:"object",description:"Appearance",properties:{format:{type:"string"},src:{type:"string"},smallPreviewUrl:{type:"string"},previewCamera:{type:"object",properties:{position:{type:"string"},rotation:{type:"string"},scale:{type:"string"}}}}},jr={provide:lr.RY,useValue:{name:"useravatars",creator:{schema:{title:"User Avatars",description:"User Avatars",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},welcomeMessage:{type:"string",description:"Welcome message"},name:{type:"string",description:"Name"},title:{type:"string",description:"Title"},selectedAppearance:Wi,appearances:{type:"array",description:"Appearances",items:Wi},scopes:{type:"array",description:"Scopes",items:{type:"object",properties:{integration:{type:"string",description:"Integration"},domain:{type:"string",description:"Domain"},scope:{type:"string",description:"Scope"}}}},skills:{type:"array",description:"Skills",items:{type:"object",properties:{domain:{type:"string",description:"Domain"},scope:{type:"string",description:"Scope"},skill:{type:"string",description:"Skill"}}}},createdAt:{format:"date-time",type:"string",description:"Created at"},updatedAt:{format:"date-time",type:"string",description:"Updated at"}},attachments:{encrypted:!1}}}},multi:!0},La={provide:lr.RY,useValue:{name:"applicationpermissions",creator:{schema:{title:"Application Permissions",description:"Application Permissions",version:0,keyCompression:!0,primaryKey:{key:"id",fields:["appId","kind","mode","target"],separator:":"},type:"object",properties:{id:{type:"string",description:"Id"},appId:{type:"string",description:"AppId"},kind:{type:"string",description:"Kind",enum:["collection"]},mode:{type:"string",description:"Mode",enum:["read","write","delete"]},target:{type:"string",description:"Target"},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","appId","kind","mode","target"],encrypted:["kind","mode","target"]}}},multi:!0},_u={provide:lr.RY,useValue:{name:"userpreferences",creator:{schema:{title:"User Preferences",description:"User preferences",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},key:{type:"string",description:"Key"},value:{description:"Value"},avatar:{type:"string"},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","value"]}}},multi:!0},Ba={provide:lr.To,useValue:{name:"userpreferences",upsert:!1,data:[{id:"settings.customization",key:"settings.customization",value:{theme:{name:"Default",path:"assets/themes/default/variables.css"}}}]},multi:!0};var rn=l(43),_i=l(4438),Eo=l(2085),Ki=l(2051);let wo=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({}),E})(),bi=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({}),E})(),Fa=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({imports:[[Nr.CommonModule,_i.O,Ki.Y,wo,bi]]}),E})();const An={production:!1,demo:!0,useMocks:!0,autologin:!0,showSplashScreen:!1,webUrl:"http://localhost:3000",documentationUrl:"http://localhost:3000/docs",blogUrl:"http://localhost:3000/blog",developersUrl:"http://localhost:3000/developers"};var Cs=l(5088),Hn=(()=>{return(E=Hn||(Hn={})).Body="body",E.Head="head",E.Ears="ears",E.Face="face",E.Eyes="eyes",E.Nose="nose",E.Mouth="mouth",E.Neck="neck",E.Chest="chest",E.Waist="waist",E.Back="back",E.Arms="arms",E.RightArm="right-arm",E.LeftArm="left-arm",E.Wrist="wrist",E.Hands="hands",E.RightHand="right-hand",E.LeftHand="left-hand",E.Legs="legs",E.RightLeg="right-leg",E.LeftLeg="left-leg",E.Feet="feet",E.RightFoot="right-foot",E.LeftFoot="left-foot",E.Finger="finger",Hn;var E})();const bu={id:"1",name:"Raven's Cloak",model:"Raven's Cloak",producer:"Shop5363155 Store",owner:"Metam",description:"Microfiber hooded cloak with fleece lining",kind:Cs.R.Equipment,previewUrl:"https://i.imgur.com/ukcsu1q.png",url:"https://es.aliexpress.com/item/1005001952208453.html",currentValue:{usd:"23.62",eth:"0.0070218623"},purchaseValue:{usd:"23.62",eth:"0.0070218623"},purchaseDate:(new Date).toISOString(),digital:!1,private:!0,data:{allowedSlots:[Hn.Back],colors:["#ff0000","#00ff00","#0000ff"],isEquipped:!1}},Eu={id:"2",name:"Foundation's Coat",model:"Foundation's Coat",producer:"Shop1948549 Store",owner:"Metam",description:"Hooded coat with thick fleece lining",kind:Cs.R.Equipment,previewUrl:"https://i.imgur.com/w1XmjIj.png",url:"https://es.aliexpress.com/item/1005003209038453.html",currentValue:{usd:"43.9",eth:"0.01305079404"},purchaseValue:{usd:"43.9",eth:"0.01305079404"},purchaseDate:(new Date).toISOString(),digital:!1,private:!0,data:{allowedSlots:[Hn.Chest],colors:["#ff0000","#00ff00","#0000ff"],isEquipped:!1}},So=((new Date).toISOString(),{provide:lr.To,useValue:{name:"userassets",upsert:!0,data:[bu,Eu]},multi:!0});var mr=l(120);const Ot={provide:lr.To,useValue:{name:"useravatars",upsert:!0,data:[{id:"1",welcomeMessage:"Hello!",name:"Thomas Anderson",title:"Software Engineer",selectedAppearance:{id:"2",filename:"appearance.glb",format:mr.g.Model,src:"assets/avatars/samples/thomas-anderson/default/appearance.glb",portrait:{id:"5a6ecf92-141f-46ca-aa9f-b67c009a5df1",filename:"portrait.png",format:mr.g.Image,src:"assets/avatars/samples/thomas-anderson/default/portrait.png"}},appearances:[{id:"1",filename:"appearance.glb",format:mr.g.Model,src:"assets/avatars/samples/thomas-anderson/neo/appearance.glb",portrait:{id:"690798c7-9bf0-45ce-b76a-7982ee119322",filename:"portrait.png",format:mr.g.Image,src:"assets/avatars/samples/thomas-anderson/neo/portrait.png"},previewCamera:{position:"0 1.5 0.7",rotation:"-5 0 0",scale:"0.4 0.4 0.4"}},{id:"2",filename:"50f2bc3a-fe0c-4036-8546-15a2bc63c1cf",format:mr.g.Model,src:"assets/avatars/samples/thomas-anderson/default/appearance.glb",portrait:{id:"5a6ecf92-141f-46ca-aa9f-b67c009a5df1",filename:"portrait.png",format:mr.g.Image,src:"assets/avatars/samples/thomas-anderson/default/portrait.png"},previewCamera:{position:"0 1.5 0.7",rotation:"-5 0 0",scale:"1 1 1"}}],scopes:[{integration:"CF",domain:"Calendars",scope:"manage"},{integration:"Google",domain:"Calendars",scope:"manage"},{integration:"NFT",domain:"Tokens",scope:"manage"}],skills:[{domain:"calendar",scope:"manage",skill:"create"},{domain:"event",scope:"manage",skill:"create"},{domain:"assets",scope:"manage",skill:"trade"}]},{id:"2",welcomeMessage:"Hello!",name:"Elliot Alderson",title:"Software Engineer",selectedAppearance:{id:"1",filename:"appearance.glb",format:mr.g.Model,src:"assets/avatars/samples/elliot-alderson/default/appearance.glb",portrait:{id:"74f583ff-8c6d-4433-9aa4-4d4a7903dac4",filename:"portrait.png",format:mr.g.Image,src:"assets/avatars/samples/elliot-alderson/default/portrait.png"}},appearances:[{id:"1",filename:"appearance.glb",format:mr.g.Model,src:"assets/avatars/samples/elliot-alderson/default/appearance.glb",portrait:{id:"4d84c56a-f62b-4df1-a566-a5124cf4f75a",filename:"portrait.png",format:mr.g.Image,src:"assets/avatars/samples/elliot-alderson/default/portrait.png"}}],scopes:[],skills:[]},{id:"3",welcomeMessage:"Hello!",name:"Alan Turing",title:"Software Engineer",selectedAppearance:{id:"3",format:mr.g.Model,src:"assets/avatars/samples/alan-turing/default/appearance.glb",filename:"appearance.glb",portrait:{id:"8eccca39-ba05-4cf5-a106-3dffd9f563b0",filename:"portrait.png",format:mr.g.Image,src:"assets/avatars/samples/alan-turing/default/portrait.png"}},appearances:[{id:"3",filename:"appearance.glb",format:mr.g.Model,src:"assets/avatars/samples/alan-turing/default/appearance.glb",portrait:{id:"ab321f41-8a46-42b4-9e42-29f95042d734",filename:"portrait.png",format:mr.g.Image,src:"assets/avatars/samples/alan-turing/default/portrait.png"}}],scopes:[],skills:[]}]},multi:!0};var Hi=l(3905);let Vi=(()=>{class E{static forRoot({enabled:s=!1,autologin:m=!1}){const k=[];return s&&(k.push(Ot),k.push(So)),m&&k.push({provide:u.APP_INITIALIZER,useFactory:W=>()=>(0,Hi.z)(W.setupDatabase("test","test1234")),deps:[lr.v2],multi:!0}),{ngModule:E,providers:k}}}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({}),E})();var Sr=l(428),Gi=l(3900),Vr=l(4004),Vn=l(8505);const Gn=new u.InjectionToken("ON_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/select-avatar"});let mn=(()=>{class E{constructor(s,m,k){this.entityManager=s,this.router=m,this.failureRedirectTo=k}canActivate(){return this.entityManager.getRepository("userpreferences","com.central-factory.user-avatars").pipe((0,Gi.w)(s=>s.findOne({selector:{id:"userAvatars.selectedAvatar"}})),(0,Vr.U)(s=>!(!s||!s.value)),(0,Vn.b)(s=>{s||this.router.navigate([this.failureRedirectTo])}))}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275inject(lr.v2),u.\u0275\u0275inject(Sr.Router),u.\u0275\u0275inject(Gn))},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const On=new u.InjectionToken("ON_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/login"});let vr=(()=>{class E{constructor(s,m,k){this.entityManager=s,this.router=m,this.failureRedirectTo=k}canActivate(){const s=this.entityManager.isDatabaseCreated();return s||this.router.navigate([this.failureRedirectTo]),s}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275inject(lr.v2),u.\u0275\u0275inject(Sr.Router),u.\u0275\u0275inject(On))},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();const Co=new u.InjectionToken("ON_NOT_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/"});let nn=(()=>{class E{constructor(s,m,k){this.entityManager=s,this.router=m,this.failureRedirectTo=k}canActivate(){const s=this.entityManager.isDatabaseCreated();return s&&this.router.navigate([this.failureRedirectTo]),!s}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275inject(lr.v2),u.\u0275\u0275inject(Sr.Router),u.\u0275\u0275inject(Co))},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();var Ur=l(6961),Qi=l(4918),Pn=l(7165);(0,p.oQ)([(0,p.oB)({transform:"translate3d(0, 0, 0)"}),(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:.2}),(0,p.oB)({transform:"translate3d(0, -30px, 0)",offset:.4}),(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:.53}),(0,p.oB)({transform:"translate3d(0, -15px, 0)",offset:.7}),(0,p.oB)({transform:"translate3d(0, -4px, 0)",offset:.9}),(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1}),(0,p.oB)({opacity:0}),(0,p.oB)({opacity:1}),(0,p.oB)({opacity:0}),(0,p.oB)({opacity:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(1, 1, 1)"}),(0,p.oB)({transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})"}),(0,p.oB)({transform:"scale3d(1, 1, 1)"})])),{params:{scale:1.25,timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:0}),(0,p.oB)({transform:"scale3d(1.25, 0.75, 1)",offset:.3}),(0,p.oB)({transform:"scale3d(0.75, 1.25, 1)",offset:.4}),(0,p.oB)({transform:"scale3d(1.15, 0.85, 1)",offset:.5}),(0,p.oB)({transform:"scale3d(.95, 1.05, 1)",offset:.65}),(0,p.oB)({transform:"scale3d(1.05, .95, 1)",offset:.75}),(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:0}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.1}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.2}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.3}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.4}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.5}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.6}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.7}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.8}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.9}),(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"rotate3d(0, 0, 1, 15deg)",offset:.2}),(0,p.oB)({transform:"rotate3d(0, 0, 1, -10deg)",offset:.4}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 5deg)",offset:.6}),(0,p.oB)({transform:"rotate3d(0, 0, 1, -5deg)",offset:.8}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 0deg)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:0}),(0,p.oB)({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.1}),(0,p.oB)({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.2}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.3}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.4}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.5}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.6}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.7}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.8}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.9}),(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"none",offset:0}),(0,p.oB)({transform:"translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg)",offset:.15}),(0,p.oB)({transform:"translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg)",offset:.3}),(0,p.oB)({transform:"translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg)",offset:.45}),(0,p.oB)({transform:"translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg)",offset:.6}),(0,p.oB)({transform:"translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg)",offset:.75}),(0,p.oB)({transform:"none",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"none",offset:0}),(0,p.oB)({transform:"none",offset:.11}),(0,p.oB)({transform:"skewX(-12.5deg) skewY(-12.5deg)",offset:.22}),(0,p.oB)({transform:"skewX(6.25deg) skewY(6.25deg)",offset:.33}),(0,p.oB)({transform:"skewX(-3.125deg) skewY(-3.125deg)",offset:.44}),(0,p.oB)({transform:"skewX(1.5625deg) skewY(1.5625deg)",offset:.55}),(0,p.oB)({transform:"skewX(-0.78125deg) skewY(-0.78125deg)",offset:.66}),(0,p.oB)({transform:"skewX(0.390625deg) skewY(0.390625deg)",offset:.77}),(0,p.oB)({transform:"skewX(-0.1953125deg) skewY(-0.1953125deg)",offset:.88}),(0,p.oB)({transform:"none",offset:1})])),{params:{timing:1,delay:0}});const Wt=(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1)",offset:.2}),(0,p.oB)({transform:"scale3d(.9, .9, .9)",offset:.4}),(0,p.oB)({opacity:1,transform:"scale3d(1.03, 1.03, 1.03)",offset:.6}),(0,p.oB)({transform:"scale3d(.97, .97, .97)",offset:.8}),(0,p.oB)({opacity:1,transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}});function Zi(E,a,s,m){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.6}),(0,p.oB)({transform:"translate3d(0, {{ c }}, 0)",offset:.75}),(0,p.oB)({transform:"translate3d(0, {{ d }}, 0)",offset:.9}),(0,p.oB)({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:E,b:a,c:s,d:m}})}function vn(E,a,s,m){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:.6}),(0,p.oB)({transform:"translate3d({{ c }}, 0, 0)",offset:.75}),(0,p.oB)({transform:"translate3d({{ d }}, 0, 0)",offset:.9}),(0,p.oB)({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:E,b:a,c:s,d:m}})}function gn(E,a,s,m){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, {{ a }}, 0)",offset:.2}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.4}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ c }}, 0)",offset:.45}),(0,p.oB)({opacity:0,transform:"translate3d(0, {{ d }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a,c:s,d:m}})}function wi(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,transform:"translate3d({{ a }}, 0, 0)",offset:.2}),(0,p.oB)({opacity:0,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}function Si(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}function Ci(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}Zi("-3000px","25px","-10px","5px"),Zi("3000px","-25px","10px","-5px"),vn("-3000px","25px","-10px","5px"),vn("3000px","-25px","10px","-5px"),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(.9, .9, .9)",offset:.2}),(0,p.oB)({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.5}),(0,p.oB)({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.55}),(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:1})])),{params:{timing:1,delay:0,scale:1.1}}),gn("10px","-20px","-20px","2000px"),gn("-10px","20px","20px","-2000px"),wi("20px","-2000px"),wi("-20px","2000px"),Si(0,0),Ci("-100%",0);const Di=Ci("100%",0);function Rn(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:0,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}function Ai(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:0,transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}function Mn(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}function Xn(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}function Rs(E,a){return(0,p.oQ)([(0,p.oB)({"backface-visibility":"visible"}),(0,p.jt)("{{ timing }}s {{ delay }}s ease-in",(0,p.F4)([(0,p.oB)({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),(0,p.oB)({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),(0,p.oB)({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),(0,p.oB)({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),(0,p.oB)({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0,rotateX:E,rotateY:a}})}function Pi(E,a){return(0,p.oQ)([(0,p.oB)({"backface-visibility":"visible"}),(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"perspective(400px)",offset:0}),(0,p.oB)({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.3}),(0,p.oB)({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:1})]))],{params:{timing:1,delay:0,rotateX:E,rotateY:a}})}function j(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({"transform-origin":"{{ origin }}",opacity:0,transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:0}),(0,p.oB)({"transform-origin":"{{ origin }}",opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,origin:E,degrees:a}})}function tt(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({"transform-origin":"{{ origin }}",opacity:1,transform:"none",offset:0}),(0,p.oB)({"transform-origin":"{{ origin }}",opacity:0,transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:1})])),{params:{timing:1,delay:0,origin:E,degrees:a}})}function qn(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ b }}, 0)",offset:.6})])),{params:{timing:1,delay:0,a:E,b:a}})}function Va(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ b }}, 0, 0)",offset:.6})])),{params:{timing:1,delay:0,a:E,b:a}})}function Ga(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ a }}, 0)",offset:.4}),(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}function Qa(E,a){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ a }}, 0, 0)",offset:.4}),(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:E,b:a}})}Si("-100%",0),Si("100%",0),Rn(0,0),Ai("-100%",0),Ai("100%",0),Rn("-100%",0),Rn("100%",0),Xn("-100%",0),Xn("100%",0),Mn("-100%",0),Mn("100%",0),Xn(0,"-100%"),Xn(0,"100%"),Mn(0,"-100%"),Mn(0,"100%"),(0,p.oQ)([(0,p.oB)({"backface-visibility":"visible"}),(0,p.jt)("{{ timing }}s {{ delay }}s ease-out",(0,p.F4)([(0,p.oB)({transform:"perspective(400px) rotate3d(0, 1, 0, -360deg)",offset:0}),(0,p.oB)({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -190deg)",offset:.4}),(0,p.oB)({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -170deg)",offset:.5}),(0,p.oB)({transform:"perspective(400px) scale3d(.95, .95, .95)",offset:.8}),(0,p.oB)({transform:"perspective(400px)",offset:1})]))],{params:{timing:1,delay:0}}),Rs(1,0),Rs(0,1),Pi(1,0),Pi(0,1),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(100%, 0, 0) skewX(-30deg)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d(0, 0, 0) skewX(0)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s ease-out",(0,p.F4)([(0,p.oB)({opacity:1,offset:0}),(0,p.oB)({opacity:0,transform:"translate3d(100%, 0, 0) skewX(30deg)",offset:1})])),{params:{timing:1,delay:0}}),j("center","-200deg"),j("left bottom","-45deg"),j("right bottom","45deg"),j("left bottom","45deg"),j("right bottom","-90deg"),tt("center","200deg"),tt("left bottom","45deg"),tt("right bottom","-45deg"),tt("left bottom","-45deg"),tt("right bottom","90deg"),(0,p.oQ)([(0,p.oB)({"transform-origin":"top left"}),(0,p.jt)("{{ timing }}s {{ delay }}s ease-in-out",(0,p.F4)([(0,p.oB)({transform:"rotate3d(0, 0, 1, 80deg)",offset:.2}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 60deg)",offset:.4}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 80deg)",offset:.6}),(0,p.oB)({opacity:1,transform:"rotate3d(0, 0, 1, 60deg)",offset:.8}),(0,p.oB)({opacity:0,transform:"translate3d(0, 700px, 0)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale(0.1) rotate(30deg)","transform-origin":"center bottom",offset:0}),(0,p.oB)({opacity:.5,transform:"rotate(-10deg)",offset:.5}),(0,p.oB)({opacity:.7,transform:"rotate(3deg)",offset:.7}),(0,p.oB)({opacity:1,transform:"scale(1)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg)",offset:0}),(0,p.oB)({opacity:1,transform:"none",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,offset:0}),(0,p.oB)({opacity:0,transform:"translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),(0,p.oB)({opacity:1,transform:"scale3d(1, 1, 1)",offset:.5})]))],{params:{timing:1,delay:0}}),qn("-1000px","10px"),qn("1000px","-10px"),Va("-1000px","10px"),Va("1000px","-10px"),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,offset:0}),(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:.5}),(0,p.oB)({opacity:0,offset:1})]))],{params:{timing:1,delay:0}}),Ga("-60px","2000px"),Ga("60px","-2000px"),Qa("42px","-2000px"),Qa("-42px","2000px");var Ou=l(7579),xo=l(4128),$r=l(9300),ti=l(1884),Ii=l(2722),ks=l(1623),Ls=l(3454),ri=l(7967),ko=l(5183),Lo=l(6111),Iu=l(405),Bs=l(8753),Ti=l(9750),Za=l(5605);let Tu=(()=>{class E{constructor(){this.title="CF Portal",this.titleClick=new u.EventEmitter}onTitleClick(){this.titleClick.emit()}}return E.\u0275fac=function(s){return new(s||E)},E.\u0275cmp=u.\u0275\u0275defineComponent({type:E,selectors:[["cf-navbar"]],inputs:{environment:"environment",title:"title"},outputs:{titleClick:"titleClick"},decls:24,vars:10,consts:[["cfBlock","navbar"],["cfBlock","navbar-section","cfMod","left"],["cfElem","title",3,"click"],["cfElem","icon","src","assets/logo.svg",3,"svgClass"],["cfElem","text"],["cfBlock","navbar-section","cfMod","right"],["cfBlock","list","cfMod","horizontal"],["cfElem","item"],["src","assets/icons/mdi/web.svg","cfElem","icon",3,"svgClass"],["cfElem","link",3,"href"],["src","assets/icons/mdi/text-box-search-outline.svg","cfElem","icon",3,"svgClass"],["src","assets/icons/mdi/post-outline.svg","cfElem","icon",3,"svgClass"],["src","assets/icons/mdi/code-tags.svg","cfElem","icon",3,"svgClass"]],template:function(s,m){1&s&&(u.\u0275\u0275elementStart(0,"div",0),u.\u0275\u0275elementStart(1,"div",1),u.\u0275\u0275elementStart(2,"h1",2),u.\u0275\u0275listener("click",function(){return m.onTitleClick()}),u.\u0275\u0275element(3,"cf-svg-icon",3),u.\u0275\u0275elementStart(4,"span",4),u.\u0275\u0275text(5),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(6,"div",5),u.\u0275\u0275elementStart(7,"ul",6),u.\u0275\u0275elementStart(8,"li",7),u.\u0275\u0275element(9,"cf-svg-icon",8),u.\u0275\u0275elementStart(10,"a",9),u.\u0275\u0275text(11,"Website"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(12,"li",7),u.\u0275\u0275element(13,"cf-svg-icon",10),u.\u0275\u0275elementStart(14,"a",9),u.\u0275\u0275text(15,"Documentation"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(16,"li",7),u.\u0275\u0275element(17,"cf-svg-icon",11),u.\u0275\u0275elementStart(18,"a",9),u.\u0275\u0275text(19,"Blog"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(20,"li",7),u.\u0275\u0275element(21,"cf-svg-icon",12),u.\u0275\u0275elementStart(22,"a",9),u.\u0275\u0275text(23," Developers "),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()),2&s&&(u.\u0275\u0275advance(3),u.\u0275\u0275property("svgClass","icon__svg"),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate(m.title),u.\u0275\u0275advance(4),u.\u0275\u0275property("svgClass","icon__svg"),u.\u0275\u0275advance(1),u.\u0275\u0275property("href",null==m.environment?null:m.environment.webUrl,u.\u0275\u0275sanitizeUrl),u.\u0275\u0275advance(3),u.\u0275\u0275property("svgClass","icon__svg"),u.\u0275\u0275advance(1),u.\u0275\u0275property("href",null==m.environment?null:m.environment.documentationUrl,u.\u0275\u0275sanitizeUrl),u.\u0275\u0275advance(3),u.\u0275\u0275property("svgClass","icon__svg"),u.\u0275\u0275advance(1),u.\u0275\u0275property("href",null==m.environment?null:m.environment.blogUrl,u.\u0275\u0275sanitizeUrl),u.\u0275\u0275advance(3),u.\u0275\u0275property("svgClass","icon__svg"),u.\u0275\u0275advance(1),u.\u0275\u0275property("href",null==m.environment?null:m.environment.developersUrl,u.\u0275\u0275sanitizeUrl))},directives:[ks.G,ri.I,Ls.e,Ti.b],encapsulation:2}),E})();const Ya=function(E){return{"button--active":E}};function Ru(E,a){if(1&E){const s=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementContainerStart(0),u.\u0275\u0275elementStart(1,"a",19),u.\u0275\u0275listener("click",function(){const W=u.\u0275\u0275restoreView(s).$implicit;return u.\u0275\u0275nextContext(3).onSidebarItemClick(W)}),u.\u0275\u0275elementStart(2,"div",9),u.\u0275\u0275elementStart(3,"span",10),u.\u0275\u0275text(4),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(5,"button",20),u.\u0275\u0275element(6,"cf-svg-icon",21),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementContainerEnd()}if(2&E){const s=a.$implicit;u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(s.name),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction1(4,Ya,s.active)),u.\u0275\u0275advance(1),u.\u0275\u0275property("src",s.icon)("svgClass","icon__svg")}}const Bo=function(E){return{"background-color":E,"margin-top":"15px"}};function Fo(E,a){if(1&E){const s=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",22),u.\u0275\u0275elementStart(1,"div",22),u.\u0275\u0275elementStart(2,"div",9),u.\u0275\u0275elementStart(3,"span",10),u.\u0275\u0275text(4),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(5,"button",23),u.\u0275\u0275listener("click",function(){const W=u.\u0275\u0275restoreView(s).$implicit;return u.\u0275\u0275nextContext(3).onRecentlyOpenedItemClick(W)}),u.\u0275\u0275element(6,"cf-svg-icon",21),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()}if(2&E){const s=a.$implicit;u.\u0275\u0275advance(4),u.\u0275\u0275textInterpolate(s.name),u.\u0275\u0275advance(1),u.\u0275\u0275property("cdkDragData",s.application)("ngClass",u.\u0275\u0275pureFunction1(6,Ya,s.active))("ngStyle",u.\u0275\u0275pureFunction1(8,Bo,s.color)),u.\u0275\u0275advance(1),u.\u0275\u0275property("src",s.icon)("svgClass","icon__svg")}}const No=function(){return[]};function jo(E,a){if(1&E){const s=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"div",24),u.\u0275\u0275elementStart(1,"cf-splash-screen",25),u.\u0275\u0275listener("splashScreenHide",function(){return u.\u0275\u0275restoreView(s),u.\u0275\u0275nextContext(3).showSplashScreen=!1}),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()}if(2&E){const s=u.\u0275\u0275nextContext(3);u.\u0275\u0275advance(1),u.\u0275\u0275propertyInterpolate1("welcomeMessage","Welcome to ",null==s.openedSidebarItem?null:s.openedSidebarItem.name,""),u.\u0275\u0275property("mods","in-scene")("displayLoadingTime",2e3)("displayWelcomeTime",1e3)("title",(null==s.openedSidebarItem?null:s.openedSidebarItem.name)||"")("logo",(null==s.openedSidebarItem?null:s.openedSidebarItem.icon)||"")("backgroundColor",(null==s.openedSidebarItem?null:s.openedSidebarItem.color)||"")("loadingTexts",(null==s.openedSidebarItem||null==s.openedSidebarItem.application||null==s.openedSidebarItem.application.description?null:s.openedSidebarItem.application.description.split("."))||u.\u0275\u0275pureFunction0(8,No))}}const Mu=function(){return["/select-avatar"]},xu=function(){return["applications-carousel"]},ku=function(E){return{"scene__content--splash-screen":E}};function Lu(E,a){if(1&E){const s=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"cf-sidebar-container"),u.\u0275\u0275elementStart(1,"cf-sidebar",6),u.\u0275\u0275listener("openedChange",function(k){return u.\u0275\u0275restoreView(s),u.\u0275\u0275nextContext(2).sidebarIsOpen=k}),u.\u0275\u0275elementStart(2,"div",7),u.\u0275\u0275elementStart(3,"a",8),u.\u0275\u0275listener("click",function(){return u.\u0275\u0275restoreView(s),u.\u0275\u0275nextContext(2).onSidebarItemClick({name:"Select Avatar",routerLink:["/select-avatar"],icon:"assets/icons/mdi/account-switch.svg",application:{id:"com.central-factory.user-avatars",name:"User Avatars",description:"Select an avatar",startUrl:"/select-avatar"},active:!1})}),u.\u0275\u0275elementStart(4,"div",9),u.\u0275\u0275elementStart(5,"span",10),u.\u0275\u0275text(6,"Account"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(7,"cf-avatar-appearance-portrait",11),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(8,Ru,7,6,"ng-container",12),u.\u0275\u0275elementStart(9,"div",13),u.\u0275\u0275template(10,Fo,7,10,"div",14),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(11,"router-outlet",15),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(12,"div",16),u.\u0275\u0275elementStart(13,"div",17),u.\u0275\u0275template(14,jo,2,9,"div",18),u.\u0275\u0275element(15,"router-outlet"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()}if(2&E){const s=u.\u0275\u0275nextContext().ngIf,m=u.\u0275\u0275nextContext();u.\u0275\u0275advance(1),u.\u0275\u0275property("opened",m.sidebarIsOpen)("dock",!0)("dockedSize","100px")("showBackdrop",!0)("closeOnClickBackdrop",!0)("closeOnClickOutside",!0),u.\u0275\u0275advance(2),u.\u0275\u0275property("routerLink",u.\u0275\u0275pureFunction0(15,Mu)),u.\u0275\u0275advance(4),u.\u0275\u0275property("appearancePortrait",null==s.selectedAvatar.selectedAppearance?null:s.selectedAvatar.selectedAppearance.portrait),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngForOf",m.sidebarItems),u.\u0275\u0275advance(1),u.\u0275\u0275property("cdkDropListData",m.recentlyOpenedSidebarItems)("cdkDropListConnectedTo",u.\u0275\u0275pureFunction0(16,xu)),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngForOf",m.recentlyOpenedSidebarItems),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngClass",u.\u0275\u0275pureFunction1(17,ku,m.showSplashScreen))("@sceneContentAnimationState",m.sceneContentAnimationState),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",m.showSplashScreen)}}function Ja(E,a){1&E&&(u.\u0275\u0275elementStart(0,"div",26),u.\u0275\u0275elementStart(1,"div",27),u.\u0275\u0275element(2,"router-outlet"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd())}function Bu(E,a){if(1&E){const s=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"cf-navbar",28),u.\u0275\u0275listener("titleClick",function(){u.\u0275\u0275restoreView(s);const k=u.\u0275\u0275nextContext(2);return k.sidebarIsOpen=!k.sidebarIsOpen}),u.\u0275\u0275elementEnd()}if(2&E){const s=u.\u0275\u0275nextContext(2);u.\u0275\u0275property("title",s.title)}}const Fu=function(E){return{"no-navbar":E}};function Xa(E,a){if(1&E&&(u.\u0275\u0275elementContainerStart(0),u.\u0275\u0275elementStart(1,"div",1),u.\u0275\u0275elementStart(2,"div",2),u.\u0275\u0275template(3,Lu,16,19,"cf-sidebar-container",3),u.\u0275\u0275template(4,Ja,3,0,"ng-template",null,4,u.\u0275\u0275templateRefExtractor),u.\u0275\u0275elementEnd(),u.\u0275\u0275template(6,Bu,1,1,"cf-navbar",5),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementContainerEnd()),2&E){const s=a.ngIf,m=u.\u0275\u0275reference(5),k=u.\u0275\u0275nextContext();u.\u0275\u0275advance(2),u.\u0275\u0275property("cfMod",u.\u0275\u0275pureFunction1(4,Fu,!k.showNavbar)),u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",s.selectedAvatar)("ngIfElse",m),u.\u0275\u0275advance(3),u.\u0275\u0275property("ngIf",k.showNavbar)}}const Nu=function(E){return{selectedAvatar:E}};var Ir=(()=>{return(E=Ir||(Ir={})).Idle="Idle",E.Opened="Opened",E.Animated="Animated",Ir;var E})();const Uu=[{path:"",component:(()=>{class E{constructor(s,m,k,W,re,ae){this.router=s,this.entityManager=m,this.selectedAvatarState=k,this.selectedApplicationState=W,this.recentlyOpenedApplicationsState=re,this.customizationSettingsState=ae,this.title="Metaverse Portal",this.sidebarIsOpen=!1,this.sidebarItems=[],this.recentlyOpenedSidebarItems=[],this.showSplashScreen=!1,this.showNavbar=!1,this.sceneContentAnimationState=Ir.Idle,this.selectedAvatar$=this.selectedAvatarState.avatar$,this.recentlyOpenedApplications$=this.recentlyOpenedApplicationsState.applications$.pipe((0,Vr.U)(ye=>ye.reverse()),(0,Vr.U)(ye=>this.generateSidebarItems(ye))),this.destroy$=new Ou.x}ngOnInit(){this.customizationSettingsState.customizationSettings$.pipe((0,Vr.U)(s=>s?.theme),(0,$r.h)(s=>void 0!==s),(0,ti.x)((s,m)=>s?.path===m?.path),(0,$r.h)((a,s)=>1<=s),(0,Vn.b)(s=>{this.sceneContentAnimationState=Ir.Idle,setTimeout(()=>this.sceneContentAnimationState=Ir.Animated,100)}),(0,Ii.R)(this.destroy$)).subscribe(),this.recentlyOpenedApplications$.pipe((0,Ii.R)(this.destroy$),(0,Vn.b)(s=>this.recentlyOpenedSidebarItems=s)).subscribe(),this.router.events.pipe((0,$r.h)(s=>s instanceof Sr.NavigationEnd),(0,Ii.R)(this.destroy$)).subscribe(()=>{this.setSidebarItemsActive(this.sidebarItems)}),this.entityManager.initialize$.pipe((0,Gi.w)(()=>(0,xo.D)([this.entityManager.getRepository("userapplications","com.central-factory.portal")])),(0,Vn.b)(([s])=>this.subscribeToDataChanges(s))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onRecentlyOpenedItemClick(s){this.sceneContentAnimationState=Ir.Idle,setTimeout(()=>{this.sceneContentAnimationState=Ir.Opened,s.application&&(this.selectedApplicationState.selectApplication(s.application),this.selectedApplicationState.openSidebar())},100)}onSidebarItemClick(s){this.sceneContentAnimationState=Ir.Idle,setTimeout(()=>{this.sceneContentAnimationState=Ir.Opened,this.showSplashScreen=!0,this.openedSidebarItem=s,s.routerLink&&this.router.navigate(s.routerLink)},100)}subscribeToDataChanges(s){s.find({selector:{"additionalProperties.sidebarShortcuts":{$exists:!0}}}).pipe((0,Vn.b)(m=>{this.sidebarItems=this.generateSidebarItems(m)}),(0,Ii.R)(this.destroy$)).subscribe()}generateSidebarItems(s){const m=s.sort((k,W)=>k.createdAt.localeCompare(W.createdAt)).reduce((k,W)=>{const ye=W.shortcuts||[],Ge=(W.additionalProperties?.sidebarShortcuts||[]).map(Xe=>ye.find(dt=>dt.name===Xe)).filter(Xe=>!!Xe).map(Xe=>({name:Xe.name,routerLink:[Xe.url],icon:Xe.icons&&Xe.icons.length>0?Xe.icons[0].src:"",color:W.additionalProperties?.colors?.find(dt=>"primary"===dt.variation)?.color||(!0===W.additionalProperties?.internal?"var(--color-base-primary-medium)":void 0),active:!1,application:W}));return k.concat(Ge)},[]);return this.setSidebarItemsActive(m),m}setSidebarItemsActive(s){s.forEach(m=>{m.active=this.router.url.startsWith(m.routerLink.join("/"))})}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275directiveInject(Sr.Router),u.\u0275\u0275directiveInject(lr.v2),u.\u0275\u0275directiveInject(Pn.Y),u.\u0275\u0275directiveInject(Qi.H),u.\u0275\u0275directiveInject(Ur.r),u.\u0275\u0275directiveInject(rn.T))},E.\u0275cmp=u.\u0275\u0275defineComponent({type:E,selectors:[["cf-portal-layout"]],decls:2,vars:5,consts:[[4,"ngIf"],["cfBlock","scene"],["cfElem","body",3,"cfMod"],[4,"ngIf","ngIfElse"],["notSelectedAvatarLayout",""],["cfElem","navbar",3,"title","titleClick",4,"ngIf"],[3,"opened","dock","dockedSize","showBackdrop","closeOnClickBackdrop","closeOnClickOutside","openedChange"],[2,"margin-top","20px"],["cfBlock","sidebar-item",1,"d-block",3,"routerLink","click"],["cfElem","text"],["cfElem","text-content"],[3,"appearancePortrait"],[4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo"],["class","d-block","cfBlock","sidebar-item",4,"ngFor","ngForOf"],["name","sidebar"],["cf-sidebar-content",""],[1,"scene__content",3,"ngClass"],["cfBlock","scene-content","cfMod","splash-screen",4,"ngIf"],["cfBlock","sidebar-item",1,"d-block",3,"click"],["cfBlock","button","cfMod","fab",2,"margin-top","15px",3,"ngClass"],["cfElem","icon",3,"src","svgClass"],["cfBlock","sidebar-item",1,"d-block"],["cdkDrag","","cfBlock","button","cfMod","fab",3,"cdkDragData","ngClass","ngStyle","click"],["cfBlock","scene-content","cfMod","splash-screen"],[3,"mods","displayLoadingTime","displayWelcomeTime","title","logo","backgroundColor","welcomeMessage","loadingTexts","splashScreenHide"],[1,"scene__container"],[1,"scene__content"],["cfElem","navbar",3,"title","titleClick"]],template:function(s,m){1&s&&(u.\u0275\u0275template(0,Xa,7,6,"ng-container",0),u.\u0275\u0275pipe(1,"async")),2&s&&u.\u0275\u0275property("ngIf",u.\u0275\u0275pureFunction1(3,Nu,u.\u0275\u0275pipeBind1(1,1,m.selectedAvatar$)))},directives:[Nr.NgIf,ks.G,Ls.e,ri.I,ko.L,Lo.k,Sr.RouterLinkWithHref,Iu.P,Nr.NgForOf,Bs.Wj,Sr.RouterOutlet,Nr.NgClass,Ti.b,Bs.Zt,Nr.NgStyle,Za.wn,Tu],pipes:[Nr.AsyncPipe],encapsulation:2,data:{animation:[(0,p.X$)("sceneContentAnimationState",[(0,p.eR)(`${Ir.Idle} => ${Ir.Animated}`,(0,p._7)(Wt)),(0,p.eR)(`${Ir.Idle} => ${Ir.Opened}`,(0,p._7)(Di,{params:{timing:.5}}))])]}}),E})(),children:[{path:"login",loadChildren:()=>l.e(12).then(l.bind(l,12)).then(E=>E.LoginModule),canActivate:[nn]},{path:"select-avatar",loadChildren:()=>l.e(700).then(l.bind(l,8700)).then(E=>E.SelectAvatarModule),canActivate:[vr]},{path:"create-avatar",loadChildren:()=>l.e(531).then(l.bind(l,3531)).then(E=>E.CreateAvatarModule),canActivate:[vr]},{path:"selected-avatar",loadChildren:()=>l.e(959).then(l.bind(l,1959)).then(E=>E.SelectedAvatarModule),canActivate:[vr,mn]},{path:"play",loadChildren:()=>l.e(491).then(l.bind(l,6491)).then(E=>E.PlayModule),canActivate:[vr,mn]},{path:"manage-applications",loadChildren:()=>l.e(835).then(l.bind(l,9835)).then(E=>E.ManageApplicationsModule),canActivate:[vr,mn]},{path:"inventory",loadChildren:()=>l.e(740).then(l.bind(l,2740)).then(E=>E.InventoryModule),canActivate:[vr,mn]},{path:"marketplace",loadChildren:()=>l.e(483).then(l.bind(l,6483)).then(E=>E.MarketplaceModule),canActivate:[vr,mn]},{path:"settings",loadChildren:()=>l.e(672).then(l.bind(l,6672)).then(E=>E.SettingsModule),canActivate:[vr,mn]},{path:"",redirectTo:"play",pathMatch:"full"}]}];let $u=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({imports:[[Sr.RouterModule.forRoot(Uu)],Sr.RouterModule]}),E})();var Wu=l(4968);const Fs=E=>"touchend"===E.type||"touchcancel"===E.type?E.changedTouches[0]:E.type.startsWith("touch")?E.targetTouches[0]:E,qa=E=>"touchstart"===E.type||"mousedown"===E.type&&0===E.button;let Ku=(()=>{class E{constructor(s){this.resizeBegin=new u.EventEmitter,this.resizing=new u.EventEmitter,this.resizeEnd=new u.EventEmitter,this.element=s.nativeElement}ngAfterViewInit(){this.south&&this.createHandle("resize-handle-s"),this.east&&this.createHandle("resize-handle-e"),this.southEast&&this.createHandle("resize-handle-se");const s=window.getComputedStyle(this.element);this.minWidth=parseFloat(s.minWidth),this.maxWidth=parseFloat(s.maxWidth),this.minHeight=parseFloat(s.minHeight),this.maxHeight=parseFloat(s.maxHeight)}ngOnDestroy(){this.destroySubscription()}onMousedown(s){if(!qa(s))return;const m=s.target.classList,k=m.contains("resize-handle-s"),W=m.contains("resize-handle-e"),re=m.contains("resize-handle-se"),ae=Fs(s),ye=this.element.clientWidth,Le=this.element.clientHeight,Ge=ae.screenX,Xe=ae.screenY,dt=s.type.startsWith("touch"),Tt=dt?"touchmove":"mousemove",ct=dt?"touchend":"mouseup";if(k||W||re){this.initResize(s,k,W,re);const vt=(0,Wu.R)(document,ct);this.subscription=vt.subscribe(Gt=>this.onMouseup(Gt));const Rt=(0,Wu.R)(document,Tt).pipe((0,Ii.R)(vt)).subscribe(Gt=>this.move(Gt,ye,Le,Ge,Xe));this.subscription.add(Rt)}}move(s,m,k,W,re){const ae=Fs(s),Le=ae.screenY-re;this.newWidth=m+(ae.screenX-W),this.newHeight=k+Le,this.resizeWidth(ae),this.resizeHeight(ae)}onMouseup(s){this.endResize(s),this.destroySubscription()}destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}createHandle(s){const m=document.createElement("span");m.className=s,this.element.appendChild(m)}initResize(s,m,k,W){m&&(this.resizingS=!0),k&&(this.resizingE=!0),W&&(this.resizingSE=!0),this.element.classList.add("resizing"),this.newWidth=this.element.clientWidth,this.newHeight=this.element.clientHeight,s.stopPropagation(),this.resizeBegin.emit()}endResize(s){this.resizingS=!1,this.resizingE=!1,this.resizingSE=!1,this.element.classList.remove("resizing"),this.resizeEnd.emit({event:Fs(s),width:this.newWidth,height:this.newHeight})}resizeWidth(s){(this.resizingSE||this.resizingE)&&(!this.minWidth||this.newWidth>=this.minWidth)&&(!this.maxWidth||this.newWidth<=this.maxWidth)&&(this.ghost||(this.element.style.width=`${this.newWidth}px`),this.resizing.emit({event:s,width:this.newWidth,height:this.newHeight,direction:"horizontal"}))}resizeHeight(s){(this.resizingSE||this.resizingS)&&(!this.minHeight||this.newHeight>=this.minHeight)&&(!this.maxHeight||this.newHeight<=this.maxHeight)&&(this.ghost||(this.element.style.height=`${this.newHeight}px`),this.resizing.emit({event:s,width:this.newWidth,height:this.newHeight,direction:"vertical"}))}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275directiveInject(u.ElementRef))},E.\u0275dir=u.\u0275\u0275defineDirective({type:E,selectors:[["","cfResizable",""]],hostBindings:function(s,m){1&s&&u.\u0275\u0275listener("mousedown",function(W){return m.onMousedown(W)})("touchstart",function(W){return m.onMousedown(W)})},inputs:{south:"south",east:"east",southEast:"southEast",ghost:"ghost"},outputs:{resizeBegin:"resizeBegin",resizing:"resizing",resizeEnd:"resizeEnd"}}),E})(),eu=(()=>{class E{constructor(s,m){this.element=s,this.ngZone=m,this.dragX=!0,this.dragY=!0,this.dragStart=new u.EventEmitter,this.dragMove=new u.EventEmitter,this.dragEnd=new u.EventEmitter,this.isDragging=!1,this.globalListeners=new Map}ngOnChanges(s){s.dragEventTarget&&s.dragEventTarget.currentValue&&this.onMousedown(this.dragEventTarget)}ngOnDestroy(){this.removeEventListener()}onMousedown(s){if(qa(s)&&(this.dragX||this.dragY)){const m=Fs(s);this.initDrag(m.pageX,m.pageY),this.addEventListeners(s),this.dragStart.emit(s)}}onMousemove(s){const m=Fs(s);this.onDrag(m.pageX,m.pageY),this.dragMove.emit(s)}onMouseup(s){this.endDrag(),this.removeEventListener(),this.dragEnd.emit(s)}addEventListeners(s){const m=s.type.startsWith("touch"),W=m?"touchend":"mouseup";this.globalListeners.set(m?"touchmove":"mousemove",{handler:re=>this.onMousemove(re),options:!1}).set(W,{handler:re=>this.onMouseup(re),options:!1}),this.ngZone.runOutsideAngular(()=>{this.globalListeners.forEach((re,ae)=>{window.document.addEventListener(ae,re.handler,re.options)})})}removeEventListener(){this.globalListeners.forEach((s,m)=>{window.document.removeEventListener(m,s.handler,s.options)})}initDrag(s,m){this.isDragging=!0,this.lastPageX=s,this.lastPageY=m,this.element.nativeElement.classList.add("dragging")}onDrag(s,m){if(this.isDragging){const k=s-this.lastPageX,W=m-this.lastPageY,re=this.element.nativeElement.getBoundingClientRect();this.element.nativeElement.style.left=re.left+k+"px",this.element.nativeElement.style.top=re.top+W+"px",this.lastPageX=s,this.lastPageY=m}}endDrag(){this.isDragging=!1,this.element.nativeElement.classList.remove("dragging")}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(u.NgZone))},E.\u0275dir=u.\u0275\u0275defineDirective({type:E,selectors:[["","cfDraggable",""]],inputs:{dragEventTarget:"dragEventTarget",dragX:"dragX",dragY:"dragY"},outputs:{dragStart:"dragStart",dragMove:"dragMove",dragEnd:"dragEnd"},features:[u.\u0275\u0275NgOnChangesFeature]}),E})();const il=["modalRoot"],Hu=["modalBody"],sl=["modalHeader"],Vu=["modalFooter"],ol=["closeIcon"];function al(E,a){if(1&E){const s=u.\u0275\u0275getCurrentView();u.\u0275\u0275elementStart(0,"cf-svg-icon",14),u.\u0275\u0275listener("click",function(k){return u.\u0275\u0275restoreView(s),u.\u0275\u0275nextContext().toggleMaximize(k)}),u.\u0275\u0275elementEnd()}if(2&E){const s=u.\u0275\u0275nextContext();u.\u0275\u0275property("src",s.maximized?"assets/icons/mdi/window-restore.svg":"assets/icons/mdi/window-maximize.svg")}}const ul=[[["",8,"window-header__content"]],[["",8,"window-body__content"]],[["",8,"window-footer__content"]]],cl=[".window-header__content",".window-body__content",".window-footer__content"];let ll=(()=>{class E{constructor(s){this.element=s,this.scrollTopEnable=!0,this.maximizable=!1,this.backdrop=!0,this.openModal=new u.EventEmitter,this.closeModal=new u.EventEmitter,this.resizeModal=new u.EventEmitter,this.maximizeModal=new u.EventEmitter}ngAfterViewChecked(){this.executePostDisplayActions&&(this.center(),this.executePostDisplayActions=!1)}onKeyDown(s){s.preventDefault(),s.stopPropagation(),this.hide()}onWindowResize(){this.executePostDisplayActions=!0,this.center()}show(){this.executePostDisplayActions=!0,this.visible=!0,setTimeout(()=>{this.modalRoot.nativeElement.focus(),this.scrollTopEnable&&(this.modalBody.nativeElement.scrollTop=0),this.openModal.emit(!0)},1)}hide(){this.visible=!1,this.closeModal.emit(!0),this.focusLastModal()}center(){let s=this.modalRoot.nativeElement.offsetWidth,m=this.modalRoot.nativeElement.offsetHeight;0===s&&0===m&&(this.modalRoot.nativeElement.style.visibility="hidden",this.modalRoot.nativeElement.style.display="block",s=this.modalRoot.nativeElement.offsetWidth,m=this.modalRoot.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.display="none",this.modalRoot.nativeElement.style.visibility="visible");const k=Math.max((window.innerWidth-s)/2,0),W=Math.max((window.innerHeight-m)/2,0);this.modalRoot.nativeElement.style.left=k+"px",this.modalRoot.nativeElement.style.top=W+"px"}initDrag(s){s.target!==this.closeIcon.nativeElement&&(this.maximized||(this.dragEventTarget=s))}onResize(s){"vertical"===s.direction&&this.calcBodyHeight(),this.resizeModal.emit(s)}calcBodyHeight(){this.modalBody.nativeElement.style.height=this.modalRoot.nativeElement.offsetHeight-(this.modalHeader.nativeElement.offsetHeight+this.modalFooter.nativeElement.offsetHeight)+"px",this.modalBody.nativeElement.style.maxHeight="none"}getMaxModalIndex(){return((E="body *")=>Array.from(document.querySelectorAll(E)).map(a=>parseFloat(window.getComputedStyle(a).zIndex)).filter(a=>!isNaN(a)).sort((a,s)=>a-s).pop()||0)(".ui-modal")}focusLastModal(){const s=((E,a)=>{if("function"==typeof E.closest)return E.closest(a)||null;for(;E;){if(E.matches(a))return E;E=E.parentElement}return null})(this.element.nativeElement.parentElement,".window-modal");s&&s.focus()}toggleMaximize(s){this.maximized?this.revertMaximize():this.maximize(),this.maximizeModal.emit(this.maximized),s.preventDefault()}maximize(){this.preMaximizePageX=parseFloat(this.modalRoot.nativeElement.style.top),this.preMaximizePageY=parseFloat(this.modalRoot.nativeElement.style.left),this.preMaximizeRootWidth=this.modalRoot.nativeElement.offsetWidth,this.preMaximizeRootHeight=this.modalRoot.nativeElement.offsetHeight,this.preMaximizeBodyHeight=this.modalBody.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.top="0px",this.modalRoot.nativeElement.style.left="0px",this.modalRoot.nativeElement.style.width="100vw",this.modalRoot.nativeElement.style.height="100vh",this.modalBody.nativeElement.style.height="calc(100vh - "+(this.modalHeader.nativeElement.offsetHeight+this.modalFooter.nativeElement.offsetHeight)+"px)",this.modalBody.nativeElement.style.maxHeight="none",this.maximized=!0}revertMaximize(){this.modalRoot.nativeElement.style.top=this.preMaximizePageX+"px",this.modalRoot.nativeElement.style.left=this.preMaximizePageY+"px",this.modalRoot.nativeElement.style.width=this.preMaximizeRootWidth+"px",this.modalRoot.nativeElement.style.height=this.preMaximizeRootHeight+"px",this.modalBody.nativeElement.style.height=this.preMaximizeBodyHeight+"px",this.maximized=!1}moveOnTop(){if(!this.backdrop){const s=this.getMaxModalIndex();let m=parseFloat(window.getComputedStyle(this.modalRoot.nativeElement).zIndex)||0;m<=s&&(m=s+1,this.modalRoot.nativeElement.style.zIndex=m.toString())}}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275directiveInject(u.ElementRef))},E.\u0275cmp=u.\u0275\u0275defineComponent({type:E,selectors:[["cf-window"]],viewQuery:function(s,m){if(1&s&&(u.\u0275\u0275viewQuery(il,5),u.\u0275\u0275viewQuery(Hu,5),u.\u0275\u0275viewQuery(sl,5),u.\u0275\u0275viewQuery(Vu,5),u.\u0275\u0275viewQuery(ol,5)),2&s){let k;u.\u0275\u0275queryRefresh(k=u.\u0275\u0275loadQuery())&&(m.modalRoot=k.first),u.\u0275\u0275queryRefresh(k=u.\u0275\u0275loadQuery())&&(m.modalBody=k.first),u.\u0275\u0275queryRefresh(k=u.\u0275\u0275loadQuery())&&(m.modalHeader=k.first),u.\u0275\u0275queryRefresh(k=u.\u0275\u0275loadQuery())&&(m.modalFooter=k.first),u.\u0275\u0275queryRefresh(k=u.\u0275\u0275loadQuery())&&(m.closeIcon=k.first)}},hostBindings:function(s,m){1&s&&u.\u0275\u0275listener("keydown.esc",function(W){return m.onKeyDown(W)})("resize",function(){return m.onWindowResize()},!1,u.\u0275\u0275resolveWindow)},inputs:{scrollTopEnable:"scrollTopEnable",maximizable:"maximizable",backdrop:"backdrop"},outputs:{openModal:"openModal",closeModal:"closeModal",resizeModal:"resizeModal",maximizeModal:"maximizeModal"},ngContentSelectors:cl,decls:17,vars:9,consts:[["cfBlock","window-overlay"],["cfBlock","window","tabindex","-1","role","dialog","cfResizable","","cfDraggable","",3,"south","east","southEast","dragEventTarget","resizing","mousedown","touchstart"],["modalRoot",""],["cfBlock","window-header",3,"mousedown","touchstart"],["modalHeader",""],["cfElem","title"],["cfElem","controls"],[3,"src","click",4,"ngIf"],["src","assets/icons/mdi/window-close.svg",3,"click"],["closeIcon",""],["cfBlock","window-body"],["modalBody",""],["cfBlock","window-footer"],["modalFooter",""],[3,"src","click"]],template:function(s,m){1&s&&(u.\u0275\u0275projectionDef(ul),u.\u0275\u0275element(0,"div",0),u.\u0275\u0275elementStart(1,"div",1,2),u.\u0275\u0275listener("resizing",function(W){return m.onResize(W)})("mousedown",function(){return m.moveOnTop()})("touchstart",function(){return m.moveOnTop()}),u.\u0275\u0275elementStart(3,"div",3,4),u.\u0275\u0275listener("mousedown",function(W){return m.initDrag(W)})("touchstart",function(W){return m.initDrag(W)}),u.\u0275\u0275elementStart(5,"div",5),u.\u0275\u0275projection(6),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(7,"div",6),u.\u0275\u0275template(8,al,1,1,"cf-svg-icon",7),u.\u0275\u0275elementStart(9,"cf-svg-icon",8,9),u.\u0275\u0275listener("click",function(){return m.hide()}),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(11,"div",10,11),u.\u0275\u0275projection(13,1),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(14,"div",12,13),u.\u0275\u0275projection(16,2),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementEnd()),2&s&&(u.\u0275\u0275styleProp("display",m.visible&&m.backdrop?"block":"none"),u.\u0275\u0275advance(1),u.\u0275\u0275styleProp("display",m.visible?"block":"none"),u.\u0275\u0275property("south",!0)("east",!0)("southEast",!0)("dragEventTarget",m.dragEventTarget),u.\u0275\u0275advance(7),u.\u0275\u0275property("ngIf",m.maximizable))},directives:[ks.G,Ku,eu,Ls.e,Nr.NgIf,Ti.b],encapsulation:2}),E})();const fl=["rootWindow"];function tu(E,a){1&E&&u.\u0275\u0275element(0,"cf-splash-screen")}let Uo=(()=>{class E{constructor(){this.environment=An}ngOnInit(){this.environment.demo&&this.rootWindow.show()}}return E.\u0275fac=function(s){return new(s||E)},E.\u0275cmp=u.\u0275\u0275defineComponent({type:E,selectors:[["cf-portal-root"]],viewQuery:function(s,m){if(1&s&&u.\u0275\u0275viewQuery(fl,7),2&s){let k;u.\u0275\u0275queryRefresh(k=u.\u0275\u0275loadQuery())&&(m.rootWindow=k.first)}},decls:19,vars:2,consts:[["id","bgcanvas"],[4,"ngIf"],[1,"application"],[3,"maximizable"],["rootWindow",""],[1,"window-header__content"],[1,"window-body__content"],["href","https://github.com/central-factory/metaverse","target","_blank"],[1,"window-footer__content"],["cfBlock","button","cfMod","primary",3,"click"]],template:function(s,m){if(1&s){const k=u.\u0275\u0275getCurrentView();u.\u0275\u0275element(0,"canvas",0),u.\u0275\u0275template(1,tu,1,0,"cf-splash-screen",1),u.\u0275\u0275elementStart(2,"div",2),u.\u0275\u0275element(3,"router-outlet"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(4,"cf-window",3,4),u.\u0275\u0275elementContainerStart(6,5),u.\u0275\u0275text(7,"A message from the author"),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(8,6),u.\u0275\u0275elementStart(9,"h3"),u.\u0275\u0275text(10,"Welcome to The Central Factory Metaverse"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(11,"p"),u.\u0275\u0275text(12," This is a demo release of The Central Factory Metaverse project. Not all features are implemented yet, you might find many issues and unexpected behaviours. You can give us your feedback on "),u.\u0275\u0275elementStart(13,"a",7),u.\u0275\u0275text(14,"the project page"),u.\u0275\u0275elementEnd(),u.\u0275\u0275text(15,". Thank you for getting interested on this project. "),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementContainerStart(16,8),u.\u0275\u0275elementStart(17,"button",9),u.\u0275\u0275listener("click",function(){return u.\u0275\u0275restoreView(k),u.\u0275\u0275reference(5).hide()}),u.\u0275\u0275text(18," I'm ready! "),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementContainerEnd(),u.\u0275\u0275elementEnd()}2&s&&(u.\u0275\u0275advance(1),u.\u0275\u0275property("ngIf",m.environment.showSplashScreen),u.\u0275\u0275advance(3),u.\u0275\u0275property("maximizable",!0))},directives:[Nr.NgIf,Sr.RouterOutlet,ll,ks.G,ri.I,Za.wn],styles:["#bgcanvas[_ngcontent-%COMP%]{display:block;margin:0 auto;width:100vw;height:100vh;position:fixed;z-index:-1}"]}),E})();var dl=l(1718);let $o=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({imports:[[Ki.Y,_i.O]]}),E})();var hl=l(5687);let pl=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E}),E.\u0275inj=u.\u0275\u0275defineInjector({imports:[[Nr.CommonModule,Ki.Y,_i.O,Bs._t,Sr.RouterModule,$o,hl.l,Eo.x,dl.y]]}),E})(),ml=(()=>{class E{constructor(s){this.customizationSettingsState=s,this.renderProcessRunning=!1,this.initialize()}initialize(){this.themeChangeSubscription&&this.themeChangeSubscription.unsubscribe(),this.themeChangeSubscription=this.customizationSettingsState.customizationSettings$.pipe((0,Vr.U)(s=>s?.theme.name),(0,ti.x)((s,m)=>s===m),(0,Vn.b)(s=>this.onThemeChange(s))).subscribe()}onThemeChange(s){const m=document.getElementsByClassName("application")[0];if(!m||!s)return void setTimeout(()=>this.initialize(),1e3);if(this.currentTheme===s)return;this.currentTheme=s;const k=new ResizeObserver(W=>{for(const re of W)if(re.contentBoxSize){const ae=document.getElementById("bgcanvas"),ye=Array.isArray(re.contentBoxSize)?re.contentBoxSize[0]:re.contentBoxSize;ae.width=ye.inlineSize,ae.height=window.innerHeight;const Le=this.initializeMatrix();this.renderTick(()=>this.renderMatrix(Le))}});"Matrix"===s?(m.classList.add("application--no-background-color"),k.observe(document.documentElement)):(k.unobserve(document.documentElement),clearTimeout(this.renderTimeout),delete this.renderTimeout,this.renderProcessRunning=!1,m.classList.remove("application--no-background-color"))}initializeMatrix(){const k=document.getElementById("bgcanvas"),W=k.getContext("2d"),re=[],ae=Math.ceil(k.height/20);for(let ye=0;ye<k.width/20;++ye)re.push({x:20*ye,stackHeight:10+Math.random()*ae,stackCounter:0});return{tileSize:20,fadeFactor:.05,canvas:k,ctx:W,maxStackHeight:ae,columns:re}}renderTick(s,m=50){this.renderProcessRunning?console.warn("render process already running"):(this.renderProcessRunning=!0,s(),this.renderTimeout=window.setTimeout(()=>{this.renderProcessRunning=!1,this.renderTick(s,m)},m))}renderMatrix({ctx:s,fadeFactor:m,canvas:k,tileSize:W,maxStackHeight:re,columns:ae}){s.fillStyle="rgba( 0 , 0 , 0 , "+m+" )",s.fillRect(0,0,k.width,k.height),s.font=W-2+"px monospace",s.fillStyle="#22b455";for(let ye=0;ye<ae.length;++ye){const Le=String.fromCharCode(33+Math.floor(94*Math.random()));s.fillText(Le,ae[ye].x,ae[ye].stackCounter*W+W),++ae[ye].stackCounter>=ae[ye].stackHeight&&(ae[ye].stackHeight=10+Math.random()*re,ae[ye].stackCounter=0)}}}return E.\u0275fac=function(s){return new(s||E)(u.\u0275\u0275inject(rn.T))},E.\u0275prov=u.\u0275\u0275defineInjectable({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),Gu=(()=>{class E{}return E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=u.\u0275\u0275defineNgModule({type:E,bootstrap:[Uo]}),E.\u0275inj=u.\u0275\u0275defineInjector({providers:[{provide:u.APP_INITIALIZER,useFactory:()=>()=>null,deps:[rn.T,ml],multi:!0},Ta,Ma,La,_u,jr,ka,jt,Ba],imports:[[g.b2,_o,D.HttpClientModule,Ki.Y.forRoot(),_i.O,pl,Eo.x,Fa,$u,Vi.forRoot({enabled:An.useMocks,autologin:An.autologin})]]}),E})();An.production&&(0,u.enableProdMode)(),g.q6().bootstrapModule(Gu).catch(E=>console.error(E))},4995:(oe,N,l)=>{l.d(N,{B:()=>g,c:()=>u});var g=(()=>{return(D=g||(g={})).Webview="webview",D.WebpackModuleFederation="webpack-module-federation",D.Unknown="unknown",g;var D})(),u=(()=>{return(D=u||(u={})).Primary="primary",D.Secondary="secondary",D.Success="success",D.Warning="warning",D.Danger="danger",D.Info="info",D.Light="light",D.Dark="dark",u;var D})()},3266:(oe,N,l)=>{l.d(N,{o:()=>w,O:()=>S});var g=l(9841),u=l(4004),D=l(9283),p=l(1135),B=l(8505),L=l(4995),F=l(7777);let x=(()=>{class T{constructor(M){this.httpClient=M,this.applications$=new p.X([]),this.storeDataUrl="https://raw.githubusercontent.com/central-factory/web-application-manifests/main/applications.json",this.httpClient.get(this.storeDataUrl).pipe((0,B.b)(R=>{this.applications$.next(R.map(b=>{const c={color:this.getPrimaryColor(b)||"#000000",variation:L.c.Primary};return{...b,createdAt:b.createdAt||(new Date).toISOString(),updatedAt:b.updatedAt||(new Date).toISOString(),additionalProperties:{...b.additionalProperties,author:b.additionalProperties?.author||{id:b.id,name:b.name},renderingType:b.additionalProperties?.renderingType||L.B.Webview,supportsBrowser:b.additionalProperties?.supportsBrowser||!1,internal:!1,permissions:b.additionalProperties?.permissions||[],defaultShortcut:b.additionalProperties?.defaultShortcut||(b.shortcuts?b.shortcuts[0].name:void 0),sidebarShortcuts:b.additionalProperties?.sidebarShortcuts||(b.shortcuts?[b.shortcuts[0].name]:[]),colors:b.additionalProperties?.colors||[c]}}}))})).subscribe()}getPrimaryColor(M){if(M.additionalProperties?.colors&&M.additionalProperties?.colors.length>0){const b=M.additionalProperties?.colors?.find(y=>y.variation===L.c.Primary);if(b)return b?.color}return M.themeColor||M.backgroundColor}}return T.\u0275fac=function(M){return new(M||T)(F.\u0275\u0275inject(D.HttpClient))},T.\u0275prov=F.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();var P=l(3395),w=(()=>{return(T=w||(w={}))[T.User=0]="User",T[T.Store=1]="Store",w;var T})();let S=(()=>{class T{constructor(M,R){this.storeApplicationsState=M,this.userApplicationsState=R,this.applications$=(0,g.a)([this.storeApplicationsState.applications$,this.userApplicationsState.applications$]).pipe((0,u.U)(([b,y])=>[...y.map(c=>({origin:w.User,application:c})),...b.map(c=>({origin:w.Store,application:c}))].filter((c,o,v)=>v.findIndex(h=>c.application.id===h.application.id)===o)))}}return T.\u0275fac=function(M){return new(M||T)(F.\u0275\u0275inject(x),F.\u0275\u0275inject(P.g))},T.\u0275prov=F.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},6961:(oe,N,l)=>{l.d(N,{r:()=>p});var g=l(1135),u=l(7777);let p=(()=>{class B{constructor(){this.applications$=new g.X([]),this.maxApplications=4}addApplication(F){const x=this.applications$.getValue();x.find(w=>w.id===F.id)||(x.length>=this.maxApplications&&x.shift(),x.unshift(F),this.applications$.next(x))}}return B.\u0275fac=function(F){return new(F||B)},B.\u0275prov=u.\u0275\u0275defineInjectable({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},4918:(oe,N,l)=>{l.d(N,{H:()=>F});var g=l(3266),u=l(1135),D=l(4004),p=l(8505),B=l(7777);let F=(()=>{class x{constructor(w){this.availableApplicationsState=w,this.application$=new u.X(void 0),this.sidebarIsOpen$=new u.X(!1)}listenForChanges(w){this.changesSubscription&&this.changesSubscription.unsubscribe(),w?this.changesSubscription=this.availableApplicationsState.applications$.pipe((0,D.U)(S=>S.find(T=>T.application.id===w)),(0,p.b)(S=>this.application$.next(S?.application))).subscribe():this.application$.next(void 0)}selectApplication(w){this.listenForChanges(w.id)}unselectApplication(){this.listenForChanges(void 0)}openSidebar(){this.sidebarIsOpen$.next(!0)}closeSidebar(){this.sidebarIsOpen$.next(!1)}}return x.\u0275fac=function(w){return new(w||x)(B.\u0275\u0275inject(g.O))},x.\u0275prov=B.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},3395:(oe,N,l)=>{l.d(N,{g:()=>x});var g=l(2816),u=l(1135),D=l(3900),p=l(4128),B=l(8505),L=l(7777);let x=(()=>{class P{constructor(S){this.entityManager=S,this.applications$=new u.X([]),this.entityManager.initialize$.pipe((0,D.w)(()=>(0,p.D)([this.entityManager.getRepository("userapplications","com.central-factory.player")])),(0,B.b)(([T])=>{this.userApplicationsRepository=T,this.subscribeToDataChanges()})).subscribe()}addApplication(S){if(!this.userApplicationsRepository)throw new Error("Repositories not initialized");return this.userApplicationsRepository.upsert(S)}subscribeToDataChanges(){if(!this.userApplicationsRepository)throw new Error("Repositories not initialized");this.userApplicationsRepository.observe().pipe((0,B.b)(S=>this.applications$.next(S))).subscribe()}}return P.\u0275fac=function(S){return new(S||P)(L.\u0275\u0275inject(g.v2))},P.\u0275prov=L.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},5088:(oe,N,l)=>{l.d(N,{R:()=>g});var g=(()=>{return(u=g||(g={})).Unknown="unknown",u.Currency="currency",u.Land="land",u.Material="material",u.Building="building",u.Equipment="equipment",u.Furniture="furniture",u.Machine="machine",u.Vehicle="vehicle",u.MediaResource="media-resource",u.Consumable="consumable",u.Other="other",g;var u})()},120:(oe,N,l)=>{l.d(N,{g:()=>g});var g=(()=>{return(u=g||(g={})).Model="Model",u.Image="Image",g;var u})()},7165:(oe,N,l)=>{l.d(N,{Y:()=>S});var g=l(2816),u=l(1135),D=l(3900),p=l(4128),B=l(8505),L=l(2843),F=l(9646),x=l(4004),P=l(7777);let S=(()=>{class T{constructor(M){this.entityManager=M,this.avatar$=new u.X(void 0),this.entityManager.initialize$.pipe((0,D.w)(()=>(0,p.D)([this.entityManager.getRepository("userpreferences","com.central-factory.user-avatars"),this.entityManager.getRepository("useravatars","com.central-factory.user-avatars")])),(0,B.b)(([R,b])=>{this.userPreferencesRepository=R,this.userAvatarsRepository=b,this.subscribeToDataChanges()})).subscribe()}selectAvatar(M){return this.userPreferencesRepository?this.userPreferencesRepository.upsert({id:"userAvatars.selectedAvatar",key:"userAvatars.selectedAvatar",value:M.id}):(0,L._)(()=>new Error("Repositories not initialized"))}selectAppearance(M){if(!this.userAvatarsRepository)return(0,L._)(()=>new Error("Repositories not initialized"));const R=this.avatar$.getValue();if(!R)return(0,L._)(()=>new Error("Avatar not selected"));const b=JSON.parse(JSON.stringify(R));return b.selectedAppearance=M,this.userAvatarsRepository.upsert(b)}subscribeToDataChanges(){if(!this.userAvatarsRepository||!this.userPreferencesRepository)throw new Error("Repositories not initialized");this.userPreferencesRepository.observeOne({selector:{id:"userAvatars.selectedAvatar"}}).subscribe(M=>{this.avatarQuerySubscription&&this.avatarQuerySubscription.unsubscribe(),M&&this.userAvatarsRepository&&(this.avatarQuerySubscription=this.userAvatarsRepository.observeOne({selector:{id:M.value}}).pipe((0,D.w)(R=>R&&R._attachments&&Object.keys(R._attachments).length>0&&R?this.userAvatarsRepository.getAllAttachments(R.id).pipe((0,x.U)(y=>(R.appearances.forEach(c=>{const o=y.find(h=>h.id===c.portrait.id);o&&(c.portrait.src=URL.createObjectURL(o.data));const v=y.find(h=>h.id===c.id);v&&(c.src=URL.createObjectURL(v.data))}),R.selectedAppearance=R.appearances.find(c=>c.id===R.selectedAppearance.id),R))):(0,F.of)(R)),(0,B.b)(R=>this.avatar$.next(R))).subscribe())})}}return T.\u0275fac=function(M){return new(M||T)(P.\u0275\u0275inject(g.v2))},T.\u0275prov=P.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},405:(oe,N,l)=>{l.d(N,{P:()=>S});var g=l(7777),D=l(1481),p=l(1623),B=l(1457),F=l(3454),x=l(9750);function P(T,I){if(1&T&&g.\u0275\u0275element(0,"img",3),2&T){const M=g.\u0275\u0275nextContext();g.\u0275\u0275property("src",M.src,g.\u0275\u0275sanitizeUrl)}}function w(T,I){1&T&&g.\u0275\u0275element(0,"cf-svg-icon",4)}let S=(()=>{class T{constructor(M){this.domSanitizer=M,this.showEmptyIcon=!1}set appearancePortrait(M){this.src=M?.src?this.domSanitizer.bypassSecurityTrustUrl(M.src):void 0}}return T.\u0275fac=function(M){return new(M||T)(g.\u0275\u0275directiveInject(D.H7))},T.\u0275cmp=g.\u0275\u0275defineComponent({type:T,selectors:[["cf-avatar-appearance-portrait"]],inputs:{appearancePortrait:"appearancePortrait",showEmptyIcon:"showEmptyIcon"},decls:3,vars:2,consts:[["cfBlock","avatar-appearance-portrait"],["cfElem","image",3,"src",4,"ngIf"],["src","assets/icons/mdi/head-question.svg",4,"ngIf"],["cfElem","image",3,"src"],["src","assets/icons/mdi/head-question.svg"]],template:function(M,R){1&M&&(g.\u0275\u0275elementStart(0,"div",0),g.\u0275\u0275template(1,P,1,1,"img",1),g.\u0275\u0275template(2,w,1,0,"cf-svg-icon",2),g.\u0275\u0275elementEnd()),2&M&&(g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",R.src),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",!R.src&&R.showEmptyIcon))},directives:[p.G,B.NgIf,F.e,x.b],encapsulation:2}),T})()},1718:(oe,N,l)=>{l.d(N,{y:()=>F});var g=l(1457),D=l(4438),p=l(2051),B=l(7777);let F=(()=>{class x{}return x.\u0275fac=function(w){return new(w||x)},x.\u0275mod=B.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=B.\u0275\u0275defineInjector({imports:[[g.CommonModule,D.O,p.Y]]}),x})()},899:(oe,N,l)=>{l.d(N,{k:()=>g,R:()=>u});var g=(()=>((g||(g={})).Collection="collection",g))(),u=(()=>{return(D=u||(u={})).Read="read",D.Write="write",D.Delete="delete",u;var D})()},2816:(oe,N,l)=>{l.d(N,{RY:()=>Bf,To:()=>Ff,v2:()=>Mv});var g={};l.r(g),l.d(g,{default:()=>_o});var w,S,u=l(7777),D=l(1611),p=l.n(D);function B(e){return"$"+e}function L(e){return e.substring(1)}function F(){this._store={}}function x(e){if(this._store=new F,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}F.prototype.get=function(e){var t=B(e);return this._store[t]},F.prototype.set=function(e,t){var r=B(e);return this._store[r]=t,!0},F.prototype.has=function(e){return B(e)in this._store},F.prototype.delete=function(e){var t=B(e),r=t in this._store;return delete this._store[t],r},F.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var i=t[r];e(this._store[i],i=L(i))}},Object.defineProperty(F.prototype,"size",{get:function(){return Object.keys(this._store).length}}),x.prototype.add=function(e){return this._store.set(e,!0)},x.prototype.has=function(e){return this._store.has(e)},x.prototype.forEach=function(e){this._store.forEach(function(t,r){e(r)})},Object.defineProperty(x.prototype,"size",{get:function(){return this._store.size}}),function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(w=Set,S=Map):(w=x,S=F);var T=l(3894),I=l.n(T),M=l(2302),R=l.n(M);function b(e,t,r){Error.call(this,r),this.status=e,this.name=t,this.message=r,this.error=!0}I()(b,Error),b.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new b(401,"unauthorized","Name or password is incorrect.");var c=new b(400,"bad_request","Missing JSON list of 'docs'"),o=new b(404,"not_found","missing"),v=new b(409,"conflict","Document update conflict"),h=new b(400,"bad_request","_id field must contain a string"),K=new b(412,"missing_id","_id is required for puts"),ue=new b(400,"bad_request","Only reserved document ids may start with underscore."),ge=(new b(412,"precondition_failed","Database not open"),new b(500,"unknown_error","Database encountered an unknown error")),pe=new b(500,"badarg","Some query argument is invalid"),$=(new b(400,"invalid_request","Request was invalid"),new b(400,"query_parse_error","Some query parameter is invalid")),J=new b(500,"doc_validation","Bad special document member"),G=new b(400,"bad_request","Something wrong with the request"),q=new b(400,"bad_request","Document must be a JSON object"),ie=(new b(404,"not_found","Database not found"),new b(500,"indexed_db_went_bad","unknown")),_e=(new b(500,"web_sql_went_bad","unknown"),new b(500,"levelDB_went_went_bad","unknown"),new b(403,"forbidden","Forbidden by design doc validate_doc_update function"),new b(400,"bad_request","Invalid rev format")),fe=(new b(412,"file_exists","The database could not be created, the file already exists."),new b(412,"missing_stub","A pre-existing attachment stub wasn't found"));function je(e,t){function r(n){for(var i=Object.getOwnPropertyNames(e),f=0,d=i.length;f<d;f++)"function"!=typeof e[i[f]]&&(this[i[f]]=e[i[f]]);void 0!==n&&(this.reason=n)}return r.prototype=b.prototype,new r(t)}function Ze(e){if("object"!=typeof e){var t=e;(e=ge).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}new b(413,"invalid_url","Provided URL is invalid");var ut=l(9069),et=l.n(ut);const _r=l(3306).v4;var br=function(e){return atob(e)},ar=function(e){return btoa(e)};function hr(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(f){if("TypeError"!==f.name)throw f;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}function rr(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function qr(e,t){return hr([rr(e)],{type:t})}function Ue(e,t){return qr(br(e),t)}function Lt(e,t){var r=new FileReader,n="function"==typeof r.readAsBinaryString;r.onloadend=function(i){var f=i.target.result||"";if(n)return t(f);t(function(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return t}(f))},n?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}function xt(e,t){Lt(e,function(r){t(r)})}var Lr=l(3625),ui=l.n(Lr),Fn=self.setImmediate||self.setTimeout;function Ws(e,t,r,n,i){(r>0||n<t.size)&&(t=function(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.slice(t,r)}(t,r,n)),function(e,t){var r=new FileReader;r.onloadend=function(n){var i=n.target.result||new ArrayBuffer(0);t(i)},r.readAsArrayBuffer(e)}(t,function(f){e.append(f),i()})}function xi(e,t,r,n,i){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t),i()}function Nn(e,t){var r="string"==typeof e,n=r?e.length:e.size,i=Math.min(32768,n),f=Math.ceil(n/i),d=0,C=r?new(ui()):new(ui().ArrayBuffer),U=r?xi:Ws;function z(){Fn(te)}function X(){var Ee=function(e){return ar(e)}(C.end(!0));t(Ee),C.destroy()}function te(){var ce=d*i;d++,U(C,e,ce,ce+i,d<f?z:X)}te()}function ki(e){return ui().hash(e)}var ve,dn,os=Function.prototype.toString,jn=os.call(Object);function qt(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;r<n;r++)t[r]=qt(e[r]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return function(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&os.call(r)==jn}(e))return e;for(r in t={},e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=qt(e[r]);void 0!==i&&(t[r]=i)}return t}function li(e){var t=!1;return p()(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function Kr(e){return p()(function(t){t=qt(t);var r=this,n="function"==typeof t[t.length-1]&&t.pop(),i=new Promise(function(f,d){var C;try{var U=li(function(z,X){z?d(z):f(X)});t.push(U),(C=e.apply(r,t))&&"function"==typeof C.then&&f(C)}catch(z){d(z)}});return n&&i.then(function(f){n(null,f)},n),i})}function nr(e,t){return Kr(p()(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var n=this;return function(e,t,r){if(e.constructor.listeners("debug").length){for(var n=["api",e.name,t],i=0;i<r.length-1;i++)n.push(r[i]);e.constructor.emit("debug",n);var f=r[r.length-1];r[r.length-1]=function(d,C){var U=["api",e.name,t];U=U.concat(d?["error",d]:["success",C]),e.constructor.emit("debug",U),f(d,C)}}}(n,e,r),this.taskqueue.isReady?t.apply(this,r):new Promise(function(i,f){n.taskqueue.addTask(function(d){d?f(d):i(n[e].apply(n,r))})})}))}function En(e,t){for(var r={},n=0,i=t.length;n<i;n++){var f=t[n];f in e&&(r[f]=e[f])}return r}function di(e){return e}function Gs(e){return[{ok:e}]}function Oe(e,t,r){var n=t.docs,i=new S;n.forEach(function(ee){i.has(ee.id)?i.get(ee.id).push(ee):i.set(ee.id,[ee])});var f=i.size,d=0,C=new Array(f);var te=[];i.forEach(function(ee,le){te.push(le)});var ce=0;!function Ee(){if(!(ce>=te.length)){var ee=Math.min(ce+6,te.length),le=te.slice(ce,ee);(function(ee,le){ee.forEach(function(Se,Ae){var be=le+Ae,xe=i.get(Se),Re=En(xe[0],["atts_since","attachments"]);Re.open_revs=xe.map(function(ze){return ze.rev}),Re.open_revs=Re.open_revs.filter(di);var Ve=di;0===Re.open_revs.length&&(delete Re.open_revs,Ve=Gs),["revs","attachments","binary","ajax","latest"].forEach(function(ze){ze in t&&(Re[ze]=t[ze])}),e.get(Se,Re,function(ze,Ke){var bt;bt=ze?[{error:ze}]:Ve(Ke),function(ee,le,Se){C[ee]={id:le,docs:Se},function(){var ee;++d===f&&(ee=[],C.forEach(function(le){le.docs.forEach(function(Se){ee.push({id:le.id,docs:[Se]})})}),r(null,{results:ee}))}()}(be,Se,bt),Ee()})})})(le,ce),ce+=le.length}}()}try{localStorage.setItem("_pouch_check_localstorage",1),ve=!!localStorage.getItem("_pouch_check_localstorage")}catch{ve=!1}function se(){return ve}function $e(){var e;et().call(this),this._listeners={},e=this,se()&&addEventListener("storage",function(t){e.emit(t.key)})}function it(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}I()($e,et()),$e.prototype.addListener=function(e,t,r,n){if(!this._listeners[t]){var i=this,f=!1;this._listeners[t]=d,this.on(e,d)}function d(){if(i._listeners[t])if(f)f="waiting";else{f=!0;var C=En(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);r.changes(C).on("change",function(z){z.seq>n.since&&!n.cancelled&&(n.since=z.seq,n.onChange(z))}).on("complete",function(){"waiting"===f&&R()(d),f=!1}).on("error",function(){f=!1})}}},$e.prototype.removeListener=function(e,t){t in this._listeners&&(et().prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},$e.prototype.notifyLocalWindows=function(e){se()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},$e.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},dn="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};var Un=dn;function Qs(e){for(var t=[],r=0,n=e.length;r<n;r++)t=t.concat(e[r]);return t}function Ys(e){var t;if(e?"string"!=typeof e?t=je(h):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=je(ue)):t=je(K),t)throw t}function Dr(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(it("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function ls(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function fs(e){var t=ls(e);return t?t.join("/"):null}function to(e,t){var r=[],n=[];for(var i in t)t.hasOwnProperty(i)&&(r.push(i),n.push(t[i]));return r.push(e),Function.apply(null,r).apply(null,n)}function $n(e,t,r){return new Promise(function(n,i){e.get(t,function(f,d){if(f){if(404!==f.status)return i(f);d={}}var C=d._rev,U=r(d);if(!U)return n({updated:!1,rev:C});U._id=t,U._rev=C,n(function(e,t,r){return e.put(t).then(function(n){return{updated:!0,rev:n.rev}},function(n){if(409!==n.status)throw n;return $n(e,t._id,r)})}(e,U,r))})})}function ro(e,t){var r=qt(e);return t?(delete r._rev_tree,ki(JSON.stringify(r))):_r().replace(/-/g,"").toLowerCase()}var hi=_r;function wn(e){for(var t,r,n,f,i=e.rev_tree.slice();f=i.pop();){var d=f.ids,C=d[2],U=f.pos;if(C.length)for(var z=0,X=C.length;z<X;z++)i.push({pos:U+1,ids:C[z]});else{var te=!!d[1].deleted,ce=d[0];(!t||(n!==te?n:r!==U?r<U:t<ce))&&(t=ce,r=U,n=te)}}return r+"-"+t}function sr(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,f=n.ids,d=f[2],C=t(0===d.length,i,f[0],n.ctx,f[1]),U=0,z=d.length;U<z;U++)r.push({pos:i+1,ids:d[U],ctx:C})}function ds(e,t){return e.pos-t.pos}function Sn(e){var t=[];sr(e,function(i,f,d,C,U){i&&t.push({rev:f+"-"+d,pos:f,opts:U})}),t.sort(ds).reverse();for(var r=0,n=t.length;r<n;r++)delete t[r].pos;return t}function pi(e){for(var t=wn(e),r=Sn(e.rev_tree),n=[],i=0,f=r.length;i<f;i++){var d=r[i];d.rev!==t&&!d.opts.deleted&&n.push(d.rev)}return n}function no(e){for(var n,t=[],r=e.slice();n=r.pop();){var i=n.pos,f=n.ids,d=f[0],C=f[1],U=f[2],z=0===U.length,X=n.history?n.history.slice():[];X.push({id:d,opts:C}),z&&t.push({pos:i+1-X.length,ids:X});for(var te=0,ce=U.length;te<ce;te++)r.push({pos:i+1,ids:U[te],history:X})}return t.reverse()}function hs(e,t){return e.pos-t.pos}function ha(e,t,r){var n=function(e,t,r){for(var f,n=0,i=e.length;n<i;)r(e[f=n+i>>>1],t)<0?n=f+1:i=f;return n}(e,t,r);e.splice(n,0,t)}function mi(e,t){for(var r,n,i=t,f=e.length;i<f;i++){var d=e[i],C=[d.id,d.opts,[]];n?(n[2].push(C),n=C):r=n=C}return r}function pa(e,t){return e[0]<t[0]?-1:1}function ps(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var i=r.pop(),f=i.tree1,d=i.tree2;(f[1].status||d[1].status)&&(f[1].status="available"===f[1].status||"available"===d[1].status?"available":"missing");for(var C=0;C<d[2].length;C++)if(f[2][0]){for(var U=!1,z=0;z<f[2].length;z++)f[2][z][0]===d[2][C][0]&&(r.push({tree1:f[2][z],tree2:d[2][C]}),U=!0);U||(n="new_branch",ha(f[2],d[2][C],pa))}else n="new_leaf",f[2][0]=d[2][C]}return{conflicts:n,tree:e}}function ms(e,t,r){var d,n=[],i=!1,f=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var C=0,U=e.length;C<U;C++){var z=e[C];if(z.pos===t.pos&&z.ids[0]===t.ids[0])d=ps(z.ids,t.ids),n.push({pos:z.pos,ids:d.tree}),i=i||d.conflicts,f=!0;else if(!0!==r){var X=z.pos<t.pos?z:t,te=z.pos<t.pos?t:z,Ee=[],he=[];for(he.push({ids:X.ids,diff:te.pos-X.pos,parent:null,parentIdx:null});he.length>0;){var ee=he.pop();if(0!==ee.diff)for(var le=ee.ids[2],Se=0,Ae=le.length;Se<Ae;Se++)he.push({ids:le[Se],diff:ee.diff-1,parent:ee.ids,parentIdx:Se});else ee.ids[0]===te.ids[0]&&Ee.push(ee)}var be=Ee[0];be?(d=ps(be.ids,te.ids),be.parent[2][be.parentIdx]=d.tree,n.push({pos:X.pos,ids:X.ids}),i=i||d.conflicts,f=!0):n.push(z)}else n.push(z)}return f||n.push(t),n.sort(hs),{tree:n,conflicts:i||"internal_node"}}function Ar(e,t,r){var n=ms(e,t),i=function(e,t){for(var n,i,r=no(e),f=0,d=r.length;f<d;f++){var z,C=r[f],U=C.ids;if(U.length>t){n||(n={});var X=U.length-t;z={pos:C.pos+X,ids:mi(U,X)};for(var te=0;te<X;te++)n[C.pos+te+"-"+U[te].id]=!0}else z={pos:C.pos,ids:mi(U,0)};i=i?ms(i,z,!0).tree:[z]}return n&&sr(i,function(Ee,he,ee){delete n[he+"-"+ee]}),{tree:i,revs:n?Object.keys(n):[]}}(n.tree,r);return{tree:i.tree,stemmedRevs:i.revs,conflicts:n.conflicts}}function ma(e){return e.ids}function en(e,t){t||(t=wn(e));for(var i,r=t.substring(t.indexOf("-")+1),n=e.rev_tree.map(ma);i=n.pop();){if(i[0]===r)return!!i[1].deleted;n=n.concat(i[2])}}function hn(e){return/^_local/.test(e)}function vi(e){return e.reduce(function(t,r){return t[r]=!0,t},{})}var so=vi(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),ya=vi(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Li(e){if(!/^\d+-/.test(e))return je(_e);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function oo(e,t,r){r||(r={deterministic_revs:!0});var n,i,f,d={status:"available"};if(e._deleted&&(d.deleted=!0),t)if(e._id||(e._id=hi()),i=ro(e,r.deterministic_revs),e._rev){if((f=Li(e._rev)).error)return f;e._rev_tree=[{pos:f.prefix,ids:[f.id,{status:"missing"},[[i,d,[]]]]}],n=f.prefix+1}else e._rev_tree=[{pos:1,ids:[i,d,[]]}],n=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,i=[n[0],t,[]],f=1,d=n.length;f<d;f++)i=[n[f],{status:"missing"},[i]];return[{pos:r,ids:i}]}(e._revisions,d),n=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if((f=Li(e._rev)).error)return f;e._rev_tree=[{pos:n=f.prefix,ids:[i=f.id,d,[]]}]}Ys(e._id),e._rev=n+"-"+i;var C={metadata:{},data:{}};for(var U in e)if(Object.prototype.hasOwnProperty.call(e,U)){var z="_"===U[0];if(z&&!so[U]){var X=je(J,U);throw X.message=J.message+": "+U,X}z&&!ya[U]?C.metadata[U.slice(1)]=e[U]:C.data[U]=e[U]}return C}function Ea(e,t,r){if(e.stub)return r();"string"==typeof e.data?function(e,t,r){var n=function(e){try{return br(e)}catch{return{error:je(pe,"Attachment is not a valid base64 string")}}}(e.data);if(n.error)return r(n.error);e.length=n.length,e.data="blob"===t?qr(n,e.content_type):"base64"===t?ar(n):n,Nn(n,function(i){e.digest="md5-"+i,r()})}(e,t,r):function(e,t,r){Nn(e.data,function(n){e.digest="md5-"+n,e.length=e.data.size||e.data.length||0,"binary"===t?xt(e.data,function(i){e.data=i,r()}):"base64"===t?function(e,t){xt(e,function(r){t(ar(r))})}(e.data,function(i){e.data=i,r()}):r()})}(e,t,r)}function lo(e,t,r,n,i,f,d,C,U){e=e||1e3;var X=C.new_edits,te=new S,ce=0,Ee=t.length;function he(){++ce===Ee&&U&&U()}t.forEach(function(ee,le){if(ee._id&&hn(ee._id))r[ee._deleted?"_removeLocal":"_putLocal"](ee,{ctx:i},function(be,xe){f[le]=be||xe,he()});else{var Ae=ee.metadata.id;te.has(Ae)?(Ee--,te.get(Ae).push([ee,le])):te.set(Ae,[[ee,le]])}}),te.forEach(function(ee,le){var Se=0;function Ae(){++Se<ee.length?be():he()}function be(){var xe=ee[Se],Re=xe[0],Ve=xe[1];if(n.has(le))!function(e,t,r,n,i,f,d,C){if(function(e,t){for(var d,r=e.slice(),n=t.split("-"),i=parseInt(n[0],10),f=n[1];d=r.pop();){if(d.pos===i&&d.ids[0]===f)return!0;for(var C=d.ids[2],U=0,z=C.length;U<z;U++)r.push({pos:d.pos+1,ids:C[U]})}return!1}(t.rev_tree,r.metadata.rev)&&!C)return n[i]=r,f();var U=t.winningRev||wn(t),z="deleted"in t?t.deleted:en(t,U),X="deleted"in r.metadata?r.metadata.deleted:en(r.metadata),te=/^1-/.test(r.metadata.rev);if(z&&!X&&C&&te){var ce=r.data;ce._rev=U,ce._id=r.metadata.id,r=oo(ce,C)}var Ee=Ar(t.rev_tree,r.metadata.rev_tree[0],e);if(C&&(z&&X&&"new_leaf"!==Ee.conflicts||!z&&"new_leaf"!==Ee.conflicts||z&&!X&&"new_branch"===Ee.conflicts)){var ee=je(v);return n[i]=ee,f()}var le=r.metadata.rev;r.metadata.rev_tree=Ee.tree,r.stemmedRevs=Ee.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var Se=wn(r.metadata),Ae=en(r.metadata,Se),be=z===Ae?0:z<Ae?-1:1;d(r,Se,Ae,le===Se?Ae:en(r.metadata,le),!0,be,i,f)}(e,n.get(le),Re,f,Ve,Ae,d,X);else{var ze=Ar([],Re.metadata.rev_tree[0],e);Re.metadata.rev_tree=ze.tree,Re.stemmedRevs=ze.stemmedRevs||[],function(ee,le,Se){var Ae=wn(ee.metadata),be=en(ee.metadata,Ae);if("was_delete"in C&&be)return f[le]=je(o,"deleted"),Se();var xe=X&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(ee);if(xe){var Re=je(v);return f[le]=Re,Se()}d(ee,Ae,be,be,!1,be?0:1,le,Se)}(Re,Ve,Ae)}}be()})}var Bi=l(2899);function Fi(e){try{return JSON.stringify(e)}catch{return Bi.stringify(e)}}var er="document-store",ur="by-sequence",Tr="attach-store",pn="attach-seq-store",pr="meta-store",Hr="local-store",Ni="detect-blob-support";function Fr(e){return function(t){var r="unknown_error";t.target&&t.target.error&&(r=t.target.error.name||t.target.error.message),e(je(ie,r))}}function gs(e,t,r){return{data:Fi(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function Cn(e){if(!e)return null;var t=function(e){try{return JSON.parse(e)}catch{return Bi.parse(e)}}(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function ji(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function ys(e,t,r,n){r?n(e?"string"!=typeof e?e:Ue(e,t):hr([""],{type:t})):e?"string"!=typeof e?Lt(e,function(i){n(ar(i))}):n(e):n("")}function Ca(e,t,r,n){var i=Object.keys(e._attachments||{});if(!i.length)return n&&n();var f=0;function d(){++f===i.length&&n&&n()}i.forEach(function(U){t.attachments&&t.include_docs?function(U,z){var X=U._attachments[z],te=X.digest;r.objectStore(Tr).get(te).onsuccess=function(Ee){X.body=Ee.target.result.body,d()}}(e,U):(e._attachments[U].stub=!0,d())})}function gi(e,t){return Promise.all(e.map(function(r){if(r.doc&&r.doc._attachments){var n=Object.keys(r.doc._attachments);return Promise.all(n.map(function(i){var f=r.doc._attachments[i];if("body"in f){var d=f.body,C=f.content_type;return new Promise(function(U){ys(d,C,t,function(z){r.doc._attachments[i]=Un(En(f,["digest","content_type"]),{data:z}),U()})})}}))}}))}function ho(e,t,r){var n=[],i=r.objectStore(ur),f=r.objectStore(Tr),d=r.objectStore(pn),C=e.length;function U(){--C||!n.length||n.forEach(function(X){d.index("digestSeq").count(IDBKeyRange.bound(X+"::",X+"::\uffff",!1,!1)).onsuccess=function(ce){ce.target.result||f.delete(X)}})}e.forEach(function(X){i.index("_doc_id_rev").getKey(t+"::"+X).onsuccess=function(Ee){var he=Ee.target.result;if("number"!=typeof he)return U();i.delete(he),d.index("seq").openCursor(IDBKeyRange.only(he)).onsuccess=function(le){var Se=le.target.result;if(Se){var Ae=Se.value.digestSeq.split("::")[0];n.push(Ae),d.delete(Se.primaryKey),Se.continue()}else U()}}})}function Or(e,t,r){try{return{txn:e.transaction(t,r)}}catch(n){return{error:n}}}var Wn=new $e;function Nr(e,t,r,n,i,f){for(var C,U,z,X,te,ce,Ee,he,d=t.docs,ee=0,le=d.length;ee<le;ee++){var Se=d[ee];Se._id&&hn(Se._id)||(Se=d[ee]=oo(Se,r.new_edits,e)).error&&!Ee&&(Ee=Se)}if(Ee)return f(Ee);var Ae=!1,be=0,xe=new Array(d.length),Re=new S,Ve=!1;function bt(){Ae=!0,Pt()}function Pt(){!he||!Ae||(he.docCount+=be,ce.put(he))}function Nt(){Ve||(Wn.notify(n._meta.name),f(null,xe))}function $t(He,qe,st,mt,at,yt,ht,Ye){He.metadata.winningRev=qe,He.metadata.deleted=st;var pt=He.data;if(pt._id=He.metadata.id,pt._rev=He.metadata.rev,mt&&(pt._deleted=!0),pt._attachments&&Object.keys(pt._attachments).length)return function(He,qe,st,mt,at,yt){var Ye=0,pt=Object.keys(He.data._attachments);function At(){Ye===pt.length&&Ie(He,qe,st,mt,at,yt)}function Qt(){Ye++,At()}pt.forEach(function(Kt){var zt=He.data._attachments[Kt];if(zt.stub)Ye++,At();else{var Ht=zt.data;delete zt.data,zt.revpos=parseInt(qe,10),function(He,qe,st){X.count(He).onsuccess=function(at){if(at.target.result)return st();X.put({digest:He,body:qe}).onsuccess=st}}(zt.digest,Ht,Qt)}})}(He,qe,st,at,ht,Ye);be+=yt,Pt(),Ie(He,qe,st,at,ht,Ye)}function Ie(He,qe,st,mt,at,yt){var ht=He.data,Ye=He.metadata;function pt(zt){var Ht=He.stemmedRevs||[];mt&&n.auto_compaction&&(Ht=Ht.concat(function(e){var t=[];return sr(e.rev_tree,function(r,n,i,f,d){"available"===d.status&&!r&&(t.push(n+"-"+i),d.status="missing")}),t}(He.metadata))),Ht&&Ht.length&&ho(Ht,He.metadata.id,C),Ye.seq=zt.target.result;var ir=gs(Ye,qe,st);U.put(ir).onsuccess=Qt}function Qt(){xe[at]={ok:!0,id:Ye.id,rev:Ye.rev},Re.set(He.metadata.id,He.metadata),function(He,qe,st){var mt=0,at=Object.keys(He.data._attachments||{});if(!at.length)return st();function yt(){++mt===at.length&&st()}function ht(pt){var Qt=te.put({seq:qe,digestSeq:He.data._attachments[pt].digest+"::"+qe});Qt.onsuccess=yt,Qt.onerror=function(Kt){Kt.preventDefault(),Kt.stopPropagation(),yt()}}for(var Ye=0;Ye<at.length;Ye++)ht(at[Ye])}(He,Ye.seq,yt)}ht._doc_id_rev=Ye.id+"::"+Ye.rev,delete ht._id,delete ht._rev;var Kt=z.put(ht);Kt.onsuccess=pt,Kt.onerror=function(zt){zt.preventDefault(),zt.stopPropagation(),z.index("_doc_id_rev").getKey(ht._doc_id_rev).onsuccess=function(cn){z.put(ht,cn.target.result).onsuccess=pt}}}!function(e,t,r){if(!e.length)return r();var i,n=0;function f(){n++,e.length===n&&(i?r(i):r())}e.forEach(function(d){var C=d.data&&d.data._attachments?Object.keys(d.data._attachments):[],U=0;if(!C.length)return f();function z(te){i=te,++U===C.length&&f()}for(var X in d.data._attachments)d.data._attachments.hasOwnProperty(X)&&Ea(d.data._attachments[X],t,z)})}(d,n._meta.blobSupport?"blob":"base64",function(He){if(He)return f(He);!function(){var qe=Or(i,[er,ur,Tr,Hr,pn,pr],"readwrite");if(qe.error)return f(qe.error);(C=qe.txn).onabort=Fr(f),C.ontimeout=Fr(f),C.oncomplete=Nt,U=C.objectStore(er),z=C.objectStore(ur),X=C.objectStore(Tr),te=C.objectStore(pn),(ce=C.objectStore(pr)).get(pr).onsuccess=function(st){he=st.target.result,Pt()},function(He){var qe=[];if(d.forEach(function(yt){yt.data&&yt.data._attachments&&Object.keys(yt.data._attachments).forEach(function(ht){var Ye=yt.data._attachments[ht];Ye.stub&&qe.push(Ye.digest)})}),!qe.length)return He();var mt,st=0;qe.forEach(function(yt){!function(He,qe){X.get(He).onsuccess=function(mt){if(mt.target.result)qe();else{var at=je(fe,"unknown stub attachment with digest "+He);at.status=412,qe(at)}}}(yt,function(ht){ht&&!mt&&(mt=ht),++st===qe.length&&He(mt)})})}(function(st){if(st)return Ve=!0,f(st);!function(){if(d.length)for(var He=0,mt=0,at=d.length;mt<at;mt++){var yt=d[mt];yt._id&&hn(yt._id)?qe():U.get(yt.metadata.id).onsuccess=st}function qe(){++He===d.length&&lo(e.revs_limit,d,n,Re,C,xe,$t,r,bt)}function st(Ye){var pt=Cn(Ye.target.result);pt&&Re.set(pt.id,pt),qe()}}()})}()})}function Ui(e,t,r,n,i){var d,C,U;function z(Ee){C=Ee.target.result,d&&i(d,C,U)}function X(Ee){d=Ee.target.result,C&&i(d,C,U)}function ce(Ee){var he=Ee.target.result;if(!he)return i();i([he.key],[he.value],he)}-1===n&&(n=1e3),"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&n>1&&!r?(U={continue:function(){if(!d.length)return i();var he,Ee=d[d.length-1];if(t&&t.upper)try{he=IDBKeyRange.bound(Ee,t.upper,!0,t.upperOpen)}catch(ee){if("DataError"===ee.name&&0===ee.code)return i()}else he=IDBKeyRange.lowerBound(Ee,!0);d=null,C=null,e.getAll(t=he,n).onsuccess=z,e.getAllKeys(t,n).onsuccess=X}},e.getAll(t,n).onsuccess=z,e.getAllKeys(t,n).onsuccess=X):r?e.openCursor(t,"prev").onsuccess=ce:e.openCursor(t).onsuccess=ce}var $i=!1,_s=[];function go(){$i||!_s.length||($i=!0,_s.shift()())}function Ia(e,t,r,n){if((e=qt(e)).continuous){var i=r+":"+hi();return Wn.addListener(r,i,t,e),Wn.notify(r),{cancel:function(){Wn.removeListener(r,i)}}}var f=e.doc_ids&&new w(e.doc_ids);e.since=e.since||0;var d=e.since,C="limit"in e?e.limit:-1;0===C&&(C=1);var ce,Ee,he,ee,U=[],z=0,X=function(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(i){i.doc||(i.doc={});var f=r&&function(e,t,r){try{return!e(t,r)}catch(i){var n="Filter function threw: "+i.toString();return je(G,n)}}(e.filter,i.doc,t);if("object"==typeof f)return f;if(f)return!1;if(e.include_docs){if(!e.attachments)for(var d in i.doc._attachments)i.doc._attachments.hasOwnProperty(d)&&(i.doc._attachments[d].stub=!0)}else delete i.doc;return!0}}(e),te=new S;function Se(Ke,bt,ft,Pt){return ft.seq!==bt?Pt():ft.winningRev===Ke._rev?Pt(ft,Ke):void(ee.get(Ke._id+"::"+ft.winningRev).onsuccess=function(St){Pt(ft,ji(St.target.result))})}function be(){e.complete(null,{results:U,last_seq:d})}var Re=[er,ur];e.attachments&&Re.push(Tr);var Ve=Or(n,Re,"readonly");if(Ve.error)return e.complete(Ve.error);(ce=Ve.txn).onabort=Fr(e.complete),ce.oncomplete=function(){!e.continuous&&e.attachments?gi(U).then(be):be()},Ee=ce.objectStore(ur),he=ce.objectStore(er),ee=Ee.index("_doc_id_rev"),Ui(Ee,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,C,function(Ke,bt,ft){if(ft&&Ke.length){var Pt=new Array(Ke.length),Ut=new Array(Ke.length),kt=0;bt.forEach(function($t,Ie){!function(Ke,bt,ft){if(f&&!f.has(Ke._id))return ft();var Pt=te.get(Ke._id);if(Pt)return Se(Ke,bt,Pt,ft);he.get(Ke._id).onsuccess=function(Ut){Pt=Cn(Ut.target.result),te.set(Ke._id,Pt),Se(Ke,bt,Pt,ft)}}(ji($t),Ke[Ie],function(Je,He){Ut[Ie]=Je,Pt[Ie]=He,++kt===Ke.length&&function(){for(var $t=[],Ie=0,Me=Pt.length;Ie<Me&&z!==C;Ie++){var Ne=Pt[Ie];Ne&&$t.push(Nt(Ut[Ie],Ne))}Promise.all($t).then(function(He){for(var qe=0,st=He.length;qe<st;qe++)He[qe]&&e.onChange(He[qe])}).catch(e.complete),z!==C&&ft.continue()}()})})}function Nt($t,Ie){var Me=e.processChange(Ie,$t,e);d=Me.seq=$t.seq;var Ne=X(Me);return"object"==typeof Ne?Promise.reject(Ne):Ne?(z++,e.return_docs&&U.push(Me),e.attachments&&e.include_docs?new Promise(function(Je){Ca(Ie,e,ce,function(){gi([Me],e.binary).then(function(){Je(Me)})})}):Promise.resolve(Me)):Promise.resolve()}})}var bs,Kn=new S,zi=new S;function Es(e,t){var r=this;!function(e,t,r){_s.push(function(){e(function(f,d){(function(e,t,r,n){try{e(t,r)}catch(i){n.emit("error",i)}})(t,f,d,r),$i=!1,R()(function(){go()})})}),go()}(function(n){!function(e,t,r){var n=t.name,i=null;function d(he,ee){var le=he.objectStore(er);le.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),le.openCursor().onsuccess=function(Se){var Ae=Se.target.result;if(Ae){var be=Ae.value,xe=en(be);be.deletedOrLocal=xe?"1":"0",le.put(be),Ae.continue()}else ee()}}function U(he,ee){var le=he.objectStore(Hr),Se=he.objectStore(er),Ae=he.objectStore(ur);Se.openCursor().onsuccess=function(xe){var Re=xe.target.result;if(Re){var Ve=Re.value,ze=Ve.id,Ke=hn(ze),bt=wn(Ve);if(Ke){var ft=ze+"::"+bt,Pt=ze+"::",Ut=ze+"::~",Nt=Ae.index("_doc_id_rev"),St=IDBKeyRange.bound(Pt,Ut,!1,!1),kt=Nt.openCursor(St);kt.onsuccess=function($t){if(kt=$t.target.result){var Ie=kt.value;Ie._doc_id_rev===ft&&le.put(Ie),Ae.delete(kt.primaryKey),kt.continue()}else Se.delete(Re.primaryKey),Re.continue()}}else Re.continue()}else ee&&ee()}}function X(he,ee){var le=he.objectStore(ur),Se=he.objectStore(Tr),Ae=he.objectStore(pn);Se.count().onsuccess=function(xe){if(!xe.target.result)return ee();le.openCursor().onsuccess=function(Ve){var ze=Ve.target.result;if(!ze)return ee();for(var Ke=ze.value,bt=ze.primaryKey,ft=Object.keys(Ke._attachments||{}),Pt={},Ut=0;Ut<ft.length;Ut++)Pt[Ke._attachments[ft[Ut]].digest]=!0;var St=Object.keys(Pt);for(Ut=0;Ut<St.length;Ut++)Ae.put({seq:bt,digestSeq:St[Ut]+"::"+bt});ze.continue()}}}function te(he){var le=he.objectStore(ur),Se=he.objectStore(er);Se.openCursor().onsuccess=function(be){var Ke,bt,ft,Pt,xe=be.target.result;if(xe){var Re=function(be){return be.data?Cn(be):(be.deleted="1"===be.deletedOrLocal,be)}(xe.value);if(Re.winningRev=Re.winningRev||wn(Re),Re.seq)return ze();Ke=Re.id+"::",bt=Re.id+"::\uffff",ft=le.index("_doc_id_rev").openCursor(IDBKeyRange.bound(Ke,bt)),Pt=0,ft.onsuccess=function(Ut){var Nt=Ut.target.result;if(!Nt)return Re.seq=Pt,ze();var St=Nt.primaryKey;St>Pt&&(Pt=St),Nt.continue()}}function ze(){var Ke=gs(Re,Re.winningRev,Re.deleted);Se.put(Ke).onsuccess=function(){xe.continue()}}}}e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=Kr(function(he){he(null,e._meta.instanceId)}),e._bulkDocs=function(ee,le,Se){Nr(t,ee,le,e,i,Se)},e._get=function(ee,le,Se){var Ae,be,xe,Re=le.ctx;if(!Re){var Ve=Or(i,[er,ur,Tr],"readonly");if(Ve.error)return Se(Ve.error);Re=Ve.txn}function ze(){Se(xe,{doc:Ae,metadata:be,ctx:Re})}Re.objectStore(er).get(ee).onsuccess=function(Ke){if(!(be=Cn(Ke.target.result)))return xe=je(o,"missing"),ze();var bt;if(le.rev)bt=le.latest?function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,f=n.ids,d=f[0],C=f[1],U=f[2],z=0===U.length,X=n.history?n.history.slice():[];if(X.push({id:d,pos:i,opts:C}),z)for(var te=0,ce=X.length;te<ce;te++){var Ee=X[te];if(Ee.pos+"-"+Ee.id===e)return i+"-"+d}for(var ee=0,le=U.length;ee<le;ee++)r.push({pos:i+1,ids:U[ee],history:X})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(le.rev,be):le.rev;else if(bt=be.winningRev,en(be))return xe=je(o,"deleted"),ze();var Pt=Re.objectStore(ur),Ut=be.id+"::"+bt;Pt.index("_doc_id_rev").get(Ut).onsuccess=function(Nt){if((Ae=Nt.target.result)&&(Ae=ji(Ae)),!Ae)return xe=je(o,"missing"),ze();ze()}}},e._getAttachment=function(he,ee,le,Se,Ae){var be;if(Se.ctx)be=Se.ctx;else{var xe=Or(i,[er,ur,Tr],"readonly");if(xe.error)return Ae(xe.error);be=xe.txn}var Re=le.digest,Ve=le.content_type;be.objectStore(Tr).get(Re).onsuccess=function(ze){ys(ze.target.result.body,Ve,Se.binary,function(bt){Ae(null,bt)})}},e._info=function(ee){var le,Se,Ae=Or(i,[pr,ur],"readonly");if(Ae.error)return ee(Ae.error);var be=Ae.txn;be.objectStore(pr).get(pr).onsuccess=function(xe){Se=xe.target.result.docCount},be.objectStore(ur).openCursor(null,"prev").onsuccess=function(xe){var Re=xe.target.result;le=Re?Re.key:0},be.oncomplete=function(){ee(null,{doc_count:Se,update_seq:le,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(ee,le){!function(e,t,r){var X,te,d="keys"in e&&e.keys,C=e.skip||0,U="number"==typeof e.limit?e.limit:-1;if(!d&&(X=function(e,t,r,n,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(f){return{error:f}}return null}("startkey"in e&&e.startkey,"endkey"in e&&e.endkey,!1!==e.inclusive_end,"key"in e&&e.key,e.descending),(te=X&&X.error)&&("DataError"!==te.name||0!==te.code)))return r(je(ie,te.name));var ce=[er,ur,pr];e.attachments&&ce.push(Tr);var Ee=Or(t,ce,"readonly");if(Ee.error)return r(Ee.error);var he=Ee.txn;he.oncomplete=function(){e.attachments?gi(be,e.binary).then(Ut):Ut()},he.onabort=Fr(r);var xe,Re,kt,ee=he.objectStore(er),le=he.objectStore(ur),Se=he.objectStore(pr),Ae=le.index("_doc_id_rev"),be=[];function Ke(St,kt){var $t={id:kt.id,key:kt.id,value:{rev:St}};kt.deleted?d&&(be.push($t),$t.value.deleted=!0,$t.doc=null):C--<=0&&(be.push($t),e.include_docs&&function(St,kt,$t){Ae.get(St.id+"::"+$t).onsuccess=function(Ne){if(kt.doc=ji(Ne.target.result)||{},e.conflicts){var Je=pi(St);Je.length&&(kt.doc._conflicts=Je)}Ca(kt.doc,e,he)}}(kt,$t,St))}function bt(St){for(var kt=0,$t=St.length;kt<$t&&be.length!==U;kt++){var Ie=St[kt];if(Ie.error&&d)be.push(Ie);else{var Me=Cn(Ie);Ke(Me.winningRev,Me)}}}function ft(St,kt,$t){!$t||(bt(kt),be.length<U&&$t.continue())}function Ut(){var St={total_rows:xe,offset:e.skip,rows:be};e.update_seq&&void 0!==Re&&(St.update_seq=Re),r(null,St)}if(Se.get(pr).onsuccess=function(St){xe=St.target.result.docCount},e.update_seq&&(kt=function(St){St.target.result&&St.target.result.length>0&&(Re=St.target.result[0])},le.openCursor(null,"prev").onsuccess=function(Ie){var Me=Ie.target.result,Ne=void 0;return Me&&Me.key&&(Ne=Me.key),kt({target:{result:[Ne]}})}),!te&&0!==U){if(d)return function(e,t,r){var n=new Array(e.length),i=0;e.forEach(function(f,d){t.get(f).onsuccess=function(C){n[d]=C.target.result?C.target.result:{key:f,error:"not_found"},++i===e.length&&r(e,n,{})}})}(e.keys,ee,ft);if(-1===U)return function(e,t,r){if("function"!=typeof e.getAll){var n=[];e.openCursor(t).onsuccess=function(f){var d=f.target.result;d?(n.push(d.value),d.continue()):r({target:{result:n}})}}else e.getAll(t).onsuccess=r}(ee,X,function(St){var kt=St.target.result;e.descending&&(kt=kt.reverse()),bt(kt)});Ui(ee,X,e.descending,U+C,ft)}}(ee,i,le)},e._changes=function(ee){return Ia(ee,e,n,i)},e._close=function(he){i.close(),Kn.delete(n),he()},e._getRevisionTree=function(he,ee){var le=Or(i,[er],"readonly");if(le.error)return ee(le.error);le.txn.objectStore(er).get(he).onsuccess=function(be){var xe=Cn(be.target.result);xe?ee(null,xe.rev_tree):ee(je(o))}},e._doCompaction=function(he,ee,le){var Ae=Or(i,[er,ur,Tr,pn],"readwrite");if(Ae.error)return le(Ae.error);var be=Ae.txn;be.objectStore(er).get(he).onsuccess=function(Re){var Ve=Cn(Re.target.result);sr(Ve.rev_tree,function(bt,ft,Pt,Ut,Nt){-1!==ee.indexOf(ft+"-"+Pt)&&(Nt.status="missing")}),ho(ee,he,be);var ze=Ve.winningRev,Ke=Ve.deleted;be.objectStore(er).put(gs(Ve,ze,Ke))},be.onabort=Fr(le),be.oncomplete=function(){le()}},e._getLocal=function(he,ee){var le=Or(i,[Hr],"readonly");if(le.error)return ee(le.error);var Ae=le.txn.objectStore(Hr).get(he);Ae.onerror=Fr(ee),Ae.onsuccess=function(be){var xe=be.target.result;xe?(delete xe._doc_id_rev,ee(null,xe)):ee(je(o))}},e._putLocal=function(he,ee,le){"function"==typeof ee&&(le=ee,ee={}),delete he._revisions;var Se=he._rev,Ae=he._id;he._rev=Se?"0-"+(parseInt(Se.split("-")[1],10)+1):"0-1";var xe,be=ee.ctx;if(!be){var Re=Or(i,[Hr],"readwrite");if(Re.error)return le(Re.error);(be=Re.txn).onerror=Fr(le),be.oncomplete=function(){xe&&le(null,xe)}}var ze,Ve=be.objectStore(Hr);Se?(ze=Ve.get(Ae)).onsuccess=function(Ke){var bt=Ke.target.result;bt&&bt._rev===Se?Ve.put(he).onsuccess=function(){xe={ok:!0,id:he._id,rev:he._rev},ee.ctx&&le(null,xe)}:le(je(v))}:((ze=Ve.add(he)).onerror=function(Ke){le(je(v)),Ke.preventDefault(),Ke.stopPropagation()},ze.onsuccess=function(){xe={ok:!0,id:he._id,rev:he._rev},ee.ctx&&le(null,xe)})},e._removeLocal=function(he,ee,le){"function"==typeof ee&&(le=ee,ee={});var Se=ee.ctx;if(!Se){var Ae=Or(i,[Hr],"readwrite");if(Ae.error)return le(Ae.error);(Se=Ae.txn).oncomplete=function(){be&&le(null,be)}}var be,xe=he._id,Re=Se.objectStore(Hr),Ve=Re.get(xe);Ve.onerror=Fr(le),Ve.onsuccess=function(ze){var Ke=ze.target.result;Ke&&Ke._rev===he._rev?(Re.delete(xe),be={ok:!0,id:xe,rev:"0-0"},ee.ctx&&le(null,be)):le(je(o))}},e._destroy=function(he,ee){Wn.removeAllListeners(n);var le=zi.get(n);le&&le.result&&(le.result.close(),Kn.delete(n));var Se=indexedDB.deleteDatabase(n);Se.onsuccess=function(){zi.delete(n),se()&&n in localStorage&&delete localStorage[n],ee(null,{ok:!0})},Se.onerror=Fr(ee)};var ce=Kn.get(n);if(ce)return i=ce.idb,e._meta=ce.global,R()(function(){r(null,e)});var Ee=indexedDB.open(n,5);zi.set(n,Ee),Ee.onupgradeneeded=function(he){var ee=he.target.result;if(he.oldVersion<1)return function(he){var ee=he.createObjectStore(er,{keyPath:"id"});he.createObjectStore(ur,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),he.createObjectStore(Tr,{keyPath:"digest"}),he.createObjectStore(pr,{keyPath:"id",autoIncrement:!1}),he.createObjectStore(Ni),ee.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),he.createObjectStore(Hr,{keyPath:"_id"});var le=he.createObjectStore(pn,{autoIncrement:!0});le.createIndex("seq","seq"),le.createIndex("digestSeq","digestSeq",{unique:!0})}(ee);var le=he.currentTarget.transaction;he.oldVersion<3&&function(he){he.createObjectStore(Hr,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(ee),he.oldVersion<4&&function(he){var ee=he.createObjectStore(pn,{autoIncrement:!0});ee.createIndex("seq","seq"),ee.createIndex("digestSeq","digestSeq",{unique:!0})}(ee);var Se=[d,U,X,te],Ae=he.oldVersion;!function be(){var xe=Se[Ae-1];Ae++,xe&&xe(le,be)}()},Ee.onsuccess=function(he){(i=he.target.result).onversionchange=function(){i.close(),Kn.delete(n)},i.onabort=function(ze){it("error","Database has a global failure",ze.target.error),i.close(),Kn.delete(n)};var Se,Ae,be,xe,ee=i.transaction([pr,Ni,er],"readwrite"),le=!1;function Re(){void 0===be||!le||(e._meta={name:n,instanceId:xe,blobSupport:be},Kn.set(n,{idb:i,global:e._meta}),r(null,e))}function Ve(){if(void 0!==Ae&&void 0!==Se){var ze=n+"_id";ze in Se?xe=Se[ze]:Se[ze]=xe=hi(),Se.docCount=Ae,ee.objectStore(pr).put(Se)}}ee.objectStore(pr).get(pr).onsuccess=function(ze){Se=ze.target.result||{id:pr},Ve()},function(e,t){e.objectStore(er).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(n){Ae=n.target.result,Ve()}}(ee),bs||(bs=function(e){return new Promise(function(t){var r=hr([""]),n=e.objectStore(Ni).put(r,"key");n.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),f=navigator.userAgent.match(/Edge\//);t(f||!i||parseInt(i[1],10)>=43)},n.onerror=e.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)}}).catch(function(){return!1})}(ee)),bs.then(function(ze){be=ze,Re()}),ee.oncomplete=function(){le=!0,Re()},ee.onabort=Fr(r)},Ee.onerror=function(he){var ee=he.target.error&&he.target.error.message;ee?-1!==ee.indexOf("stored database is a higher version")&&(ee=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):ee="Failed to open indexedDB, are you in private browsing mode?",it("error",ee),r(je(ie,ee))}}(r,e,n)},t,r.constructor)}Es.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch{return!1}};const _o=function(e){e.adapter("idb",Es,!0)};var nt=l(5861),lr=l(7757),Be=l.n(lr),Vt=l(4004),Ta=l(4966),Ra=l.n(Ta),Ma=l(1452),_t=l.n(Ma),bo=l(9456),xa=l.n(bo);function jt(e){var t=e.split("-"),r="RxDB";return t.forEach(function(n){r+=wo(n)}),r+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+r+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+r+");\n        ")}function Wi(e){return"string"!=typeof e&&(e=JSON.stringify(e)),_t().hash("rxdb-specific-hash-salt"+e)}var Ss=0;function jr(){var e=(new Date).getTime();return e<=Ss&&(e=Ss+1),Ss=e,e}function Dn(){return new Promise(function(e){return setTimeout(e,0)})}function La(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){return setTimeout(t,e)})}Promise.resolve(!0);var tn=Promise.resolve(!1),Ba=Promise.resolve(null),rn=Promise.resolve();function wo(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function bi(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}function Fa(e){if(!e)throw new Error("ensureNotFalsy() is falsy");return e}function An(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;if(!t&&Array.isArray(e))return e.sort(function(n,i){return"string"==typeof n&&"string"==typeof i?n.localeCompare(i):"object"==typeof n?1:-1}).map(function(n){return An(n,t)});if("object"==typeof e&&!Array.isArray(e)){if(e instanceof RegExp)return e;var r={};return Object.keys(e).sort(function(n,i){return n.localeCompare(i)}).forEach(function(n){r[n]=An(e[n],t)}),r}return e}function Cs(e,t){return t instanceof RegExp?t.toString():t}function Hn(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",r="abcdefghijklmnopqrstuvwxyz",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function So(e){var t={db:e};return"string"==typeof e&&(t={adapter:e,db:void 0}),t}var wr=function(e){return e&&Ra()(e,!1)};function Ot(e){return Object.assign({},e)}var Vi=xa()();function Sr(e){var t={};for(var r in e)if(e.hasOwnProperty(r))if("object"==typeof e[r]){var n=Sr(e[r]);for(var i in n)!n.hasOwnProperty(i)||(t[r+"."+i]=n[i])}else t[r]=e[r];return t}function Vr(e){return function(e){var t=e.split("-");return{height:parseInt(t[0],10),hash:t[1]}}(e).height}function Gn(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r}function mn(e){return!(!e.includes("/")&&!e.includes("\\"))}function On(e,t){var r=e.get(t);if(!r)throw new Error("missing value from map "+t);return r}var vr_createBlobBuffer=function(t,r){var n;if(Vi)return Buffer.from(t,{type:r});try{n=new Blob([t],{type:r})}catch{n=Buffer.from(t,{type:r})}return n},vr_toString=function(t){return"undefined"!=typeof Buffer&&t instanceof Buffer?Dn().then(function(){return t.toString()}):new Promise(function(r){var n=new FileReader;n.addEventListener("loadend",function(f){r(f.target.result)}),"[object Uint8Array]"===Object.prototype.toString.call(t)&&(t=new Blob([t])),n.readAsText(t)})};function Co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nn(e,t,r){return t&&Co(e.prototype,t),r&&Co(e,r),e}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,t)}function Qi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ur(e,t)}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function ja(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qn(e,t,r){return(Qn=ja()?Reflect.construct:function(i,f,d){var C=[null];C.push.apply(C,f);var z=new(Function.bind.apply(i,C));return d&&Ur(z,d.prototype),z}).apply(null,arguments)}function Zn(e){var t="function"==typeof Map?new Map:void 0;return Zn=function(n){if(null===n||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return Qn(n,arguments,Pn(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ur(i,n)},Zn(e)}var fr={isDevMode:function(){return!1},deepFreezeWhenDevMode:function(t){return t},validatePassword:function(t){throw jt("encryption")},tunnelErrorMessage:function(t){return"RxDB Error-Code "+t+".\n        - To find out what this means, use the dev-mode-plugin https://pubkey.github.io/rxdb/custom-build.html#dev-mode\n        - Or search for this code https://github.com/pubkey/rxdb/search?q="+t+"\n        "}};function Ds(e,t,r){return"RxError ("+t+"):\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length||(t+="Given parameters: {\n",t+=Object.keys(e).map(function(r){var n="[object Object]";try{n=JSON.stringify(e[r],function(i,f){return void 0===f?null:f},2)}catch{}return r+":"+n}).join("\n"),t+="}"),t}(r)}var Do=function(e){function t(n,i){var f,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},C=Ds(i,n,d);return(f=e.call(this,C)||this).code=n,f.message=C,f.parameters=d,f.rxdb=!0,f}return Qi(t,e),t.prototype.toString=function(){return this.message},nn(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),t}(Zn(Error)),Ao=function(e){function t(n,i){var f,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},C=Ds(i,n,d);return(f=e.call(this,C)||this).code=n,f.message=C,f.parameters=d,f.rxdb=!0,f}return Qi(t,e),t.prototype.toString=function(){return this.message},nn(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),t}(Zn(TypeError));function We(e,t){return new Do(e,fr.tunnelErrorMessage(e),t)}function Wt(e,t){return new Ao(e,fr.tunnelErrorMessage(e),t)}var vn={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],createRxQuery:[],preQueryMatcher:[],preSortComparator:[],prePrepareQuery:[],preWriteToStorageInstance:[],postReadFromInstance:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[]};function tr(e,t){vn[e].forEach(function(r){return r(t)})}function As(e,t){return Promise.all(vn[e].map(function(r){return r(t)}))}var Os="_rxdb_internal";function Yi(e){return gn.apply(this,arguments)}function gn(){return(gn=(0,nt.Z)(Be().mark(function e(t){var r;return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=t.prepareQuery({selector:{}}),d.next=3,t.query(r);case 3:return d.abrupt("return",d.sent.documents);case 6:case"end":return d.stop()}},e)}))).apply(this,arguments)}function wi(e,t){return In.apply(this,arguments)}function In(){return(In=(0,nt.Z)(Be().mark(function e(t,r){var i;return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.findDocumentsById([r],!1);case 2:if(!(i=d.sent.get(r))){d.next=8;break}return d.abrupt("return",i);case 8:return d.abrupt("return",null);case 9:case"end":return d.stop()}},e)}))).apply(this,arguments)}function Ci(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,nt.Z)(Be().mark(function e(t,r){var n,f;return Be().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,t.bulkWrite([r]);case 2:if(!((n=C.sent).error.size>0)){C.next=8;break}throw n.error.values().next().value;case 8:return f=n.success.values().next().value,C.abrupt("return",f);case 10:case"end":return C.stop()}},e)}))).apply(this,arguments)}function Oo(e,t){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,nt.Z)(Be().mark(function e(t,r){var i;return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.findLocalDocumentsById([r]);case 2:if(i=d.sent.get(r)){d.next=8;break}return d.abrupt("return",null);case 8:return d.abrupt("return",i);case 9:case"end":return d.stop()}},e)}))).apply(this,arguments)}function Rn(e,t,r,n){var i,d;if("DELETE"!==t.change.operation)if(n){var f={collection:n,doc:t.change.doc};tr("postReadFromInstance",f),i=n._crypter.decrypt(i=f.doc)}else i=t.change.doc;if("INSERT"!==t.change.operation)if(n){var C={collection:n,doc:t.change.previous};tr("postReadFromInstance",C),d=n._crypter.decrypt(d=C.doc)}else d=t.change.previous;return{eventId:t.eventId,documentId:t.documentId,databaseToken:r.token,collectionName:n?n.name:void 0,startTime:t.startTime,endTime:t.endTime,isLocal:e,operation:t.change.operation,documentData:fr.deepFreezeWhenDevMode(i),previousDocumentData:fr.deepFreezeWhenDevMode(d)}}function Ai(e,t){return Yn.apply(this,arguments)}function Yn(){return Yn=(0,nt.Z)(Be().mark(function e(t,r){var n,i,d,C=arguments;return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:n=C.length>2&&void 0!==C[2]&&C[2],i={previous:r.previous?Gr(t,Ot(r.previous)):void 0,document:Gr(t,Ot(r.document))};case 2:return z.prev=3,z.next=6,t.database.lockedRun(function(){return Ci(t.storageInstance,i)});case 6:return d=Ps(t,z.sent),z.abrupt("return",d);case 11:return z.prev=11,z.t0=z.catch(3),z.delegateYield(Be().mark(function X(){var te,ce,Ee;return Be().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(ce=(te=z.t0).documentId,!n||409!==te.status){ee.next=11;break}return ee.next=5,t.database.lockedRun(function(){return wi(t.storageInstance,ce)});case 5:if(Ee=ee.sent){ee.next=8;break}throw We("SNH",{args:{writeRow:r}});case 8:i.previous=Ee,ee.next=16;break;case 11:if(409!==te.status){ee.next=15;break}throw We("COL19",{collection:t.name,id:ce,pouchDbError:te,data:r});case 15:throw te;case 16:case"end":return ee.stop()}},X)})(),"t1",14);case 14:z.next=2;break;case 16:case"end":return z.stop()}},e,null,[[3,11]])})),Yn.apply(this,arguments)}function Gr(e,t){fr.isDevMode()&&e.schema.fillPrimaryKey(t),t=e._crypter.encrypt(t);var r={collection:e,doc:t};return tr("preWriteToStorageInstance",r),r.doc}function Ps(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={collection:e,doc:t};return tr("postReadFromInstance",n),r?n.doc:e._crypter.decrypt(n.doc)}function Jn(e,t){var r=e.schema.fillObjectWithDefaults(t);return e.schema.fillPrimaryKey(r)}function Is(e){return e+"-local"}function Mn(e,t,r,n){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,nt.Z)(Be().mark(function e(t,r,n,i){var f;return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return n.broadcastChannel=r.broadcastChannel,z.next=3,Promise.all([r.storage.createStorageInstance(n),r.storage.createKeyObjectStorageInstance({databaseName:r.name,collectionName:Is(t),options:i,idleQueue:r.idleQueue,broadcastChannel:r.broadcastChannel})]);case 3:return z.abrupt("return",{storageInstance:(f=z.sent)[0],localDocumentsStore:f[1]});case 7:case"end":return z.stop()}},e)}))).apply(this,arguments)}function qi(e){if(!e.collection.schema.jsonSchema.attachments)throw We("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}var za=function(){function e(r){var i=r.id,f=r.type,d=r.length,C=r.digest;this.doc=r.doc,this.id=i,this.type=f,this.length=d,this.digest=C,function(t){Object.entries(t.doc.collection.attachments).forEach(function(r){var i=r[1];Object.defineProperty(t,r[0],{get:function(){return i.bind(t)}})})}(this)}var t=e.prototype;return t.remove=function(){var r=(0,nt.Z)(Be().mark(function i(){var f=this;return Be().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.doc._atomicQueue=this.doc._atomicQueue.then((0,nt.Z)(Be().mark(function U(){var z,X,te;return Be().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return(z=Ot(f.doc._data))._attachments=Ot(z._attachments),delete z._attachments[f.id],Ee.next=5,Ci(f.doc.collection.storageInstance,{previous:Gr(f.doc.collection,Ot(f.doc._data)),document:Gr(f.doc.collection,z)});case 5:X=Ee.sent,(te=Ot(f.doc._data))._rev=X._rev,te._attachments=X._attachments,f.doc._dataSync$.next(te);case 10:case"end":return Ee.stop()}},U)}))),C.abrupt("return",this.doc._atomicQueue);case 2:case"end":return C.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.getData=function(){var r=(0,nt.Z)(Be().mark(function i(){var f,C;return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.doc.collection.storageInstance.getAttachmentData(this.doc.primary,this.id);case 2:if(f=z.sent,!Ts(this.doc.collection.schema)){z.next=11;break}return z.next=6,vr_toString(f);case 6:return C=vr_createBlobBuffer(this.doc.collection._crypter._decryptString(z.sent),this.type),z.abrupt("return",C);case 11:return z.abrupt("return",f);case 12:case"end":return z.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.getStringData=function(){return this.getData().then(function(n){return vr_toString(n)})},e}();function Oi(e,t,r){return new za({doc:r,id:e,type:t.type,length:t.length,digest:t.digest})}function Ts(e){return!(!e.jsonSchema.attachments||!e.jsonSchema.attachments.encrypted)}function Po(e){return Io.apply(this,arguments)}function Io(){return Io=(0,nt.Z)(Be().mark(function e(t){var n,i,f,d,C,z,r=this,X=arguments;return Be().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(n=t.id,i=t.data,d=void 0===(f=t.type)?"text/plain":f,C=!(X.length>1&&void 0!==X[1])||X[1],qi(this),!Ts(this.collection.schema)){ce.next=9;break}return ce.next=6,vr_toString(i);case 6:z=this.collection._crypter._encryptString(ce.sent),i=vr_createBlobBuffer(z,"text/plain");case 9:return this._atomicQueue=this._atomicQueue.then((0,nt.Z)(Be().mark(function Ee(){var he,ee,le,Se,Ae,xe,Re;return Be().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(!(C&&r._data._attachments&&r._data._attachments[n])){ze.next=7;break}return he=r._data._attachments[n],ze.next=4,r.collection.database.storage.hash(i);case 4:if(ee=ze.sent,he.type!==d||he.digest!==ee){ze.next=7;break}return ze.abrupt("return",r.getAttachment(n));case 7:return(le=Ot(r._data))._attachments=Ot(le._attachments),le._attachments[n]={type:d,data:i},Se={previous:Gr(r.collection,Ot(r._data)),document:Gr(r.collection,Ot(le))},ze.next=13,Ci(r.collection.storageInstance,Se);case 13:return xe=Oi(n,(Ae=ze.sent)._attachments[n],r),(Re=Ot(r._data))._rev=Ae._rev,Re._attachments=Ae._attachments,r._dataSync$.next(Re),ze.abrupt("return",xe);case 21:case"end":return ze.stop()}},Ee)}))),ce.abrupt("return",this._atomicQueue);case 11:case"end":return ce.stop()}},e,this)})),Io.apply(this,arguments)}function To(e){qi(this);var t=this._dataSync$.getValue();return t._attachments&&t._attachments[e]?Oi(e,t._attachments[e],this):null}function Wa(){var e=this;qi(this);var t=this._dataSync$.getValue();return t._attachments?Object.keys(t._attachments).map(function(r){return Oi(r,t._attachments[r],e)}):[]}function Ro(){return Ro=(0,nt.Z)(Be().mark(function e(t){var r,n,i;return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(r=t.docData._attachments)){d.next=7;break}return n=!!Ts(t.oldCollection.schema),i={},d.next=6,Promise.all(Object.keys(r).map(function(){var C=(0,nt.Z)(Be().mark(function U(z){var X,te,ce;return Be().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return X=r[z],te=t.docData[t.oldCollection.schema.primaryPath],he.next=4,t.oldCollection.storageInstance.getAttachmentData(te,z);case 4:if(ce=he.sent,!n){he.next=9;break}return he.next=8,vr_toString(ce).then(function(ee){return vr_createBlobBuffer(t.oldCollection._crypter._decryptString(ee),X.type)});case 8:ce=he.sent;case 9:i[z]={type:X.type,data:ce};case 10:case"end":return he.stop()}},U)}));return function(U){return C.apply(this,arguments)}}()));case 6:t.docData._attachments=i;case 7:case"end":return d.stop()}},e)})),Ro.apply(this,arguments)}function Pi(){return(Pi=(0,nt.Z)(Be().mark(function e(t){return Be().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return");case 1:case"end":return n.stop()}},e)}))).apply(this,arguments)}var V={RxDocument:function(t){t.putAttachment=Po,t.getAttachment=To,t.allAttachments=Wa,Object.defineProperty(t,"allAttachments$",{get:function(){var n=this;return this._dataSync$.pipe((0,Vt.U)(function(i){return i._attachments?i._attachments:{}}),(0,Vt.U)(function(i){return Object.entries(i)}),(0,Vt.U)(function(i){return i.map(function(f){return Oi(f[0],f[1],n)})}))}})}},j={name:"attachments",rxdb:!0,prototypes:V,overwritable:{},hooks:{preMigrateDocument:function(e){return Ro.apply(this,arguments)},postMigrateDocument:function(e){return Pi.apply(this,arguments)}}},Q=l(2559),de=l.n(Q),Pe=l(8624),ke=l.n(Pe),Qe=l(1135),tt=l(1884);function xn(e,t){var r;return{version:e,type:"object",primaryKey:t,properties:(r={},r[t]={type:"string"},r),required:[t]}}function Mr(e,t){var r=t;return r=bi(r="properties."+(r=r.replace(/\./g,".properties."))),ke().get(e,r)}var e,Qr={get _data(){if(this.isInstanceOfRxDocument)return this._dataSync$.getValue()},get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this._isDeleted$.asObservable()},get deleted(){if(this.isInstanceOfRxDocument)return this._isDeleted$.getValue()},get $(){return this._dataSync$.asObservable().pipe((0,Vt.U)(function(t){return fr.deepFreezeWhenDevMode(t)}))},_handleChangeEvent:function(t){if(t.documentId===this.primary){var n=Vr(((e=t).documentData?e.documentData:e.previousDocumentData)._rev);if(!(Vr(this._data._rev)>n))switch(t.operation){case"INSERT":break;case"UPDATE":this._dataSync$.next(t.documentData);break;case"DELETE":this.collection._docCache.delete(this.primary),this._isDeleted$.next(!0)}}var e},$emit:function(t){return this.collection.$emit(t)},get$:function(t){if(t.includes(".item."))throw We("DOC1",{path:t});if(t===this.primaryPath)throw We("DOC2");if(this.collection.schema.finalFields.includes(t))throw We("DOC3",{path:t});if(!Mr(this.collection.schema.jsonSchema,t))throw We("DOC4",{path:t});return this._dataSync$.pipe((0,Vt.U)(function(n){return ke().get(n,t)}),(0,tt.x)())},populate:function(t){var r=Mr(this.collection.schema.jsonSchema,t),n=this.get(t);if(!n)return Ba;if(!r)throw We("DOC5",{path:t});if(!r.ref)throw We("DOC6",{path:t,schemaObj:r});var i=this.collection.database.collections[r.ref];if(!i)throw We("DOC7",{ref:r.ref,path:t,schemaObj:r});return"array"===r.type?i.findByIds(n).then(function(f){var d=f.values();return Array.from(d)}):i.findOne(n).exec()},get:function(t){if(this._data){var r=ke().get(this._data,t);return"object"!=typeof r||Array.isArray(r)?fr.deepFreezeWhenDevMode(r):(r=wr(r),Mo(this.collection.schema,r,t,this),r)}},toJSON:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)return fr.deepFreezeWhenDevMode(this._data);var r=Ot(this._data);return delete r._rev,delete r._attachments,fr.deepFreezeWhenDevMode(r)},set:function(t,r){if(!this._isTemporary)throw Wt("DOC16",{objPath:t,value:r});if("string"!=typeof t)throw Wt("DOC15",{objPath:t,value:r});if(!Object.is(this.get(t),r)){var n=t.split(".");n.pop();var i=n.join(".");if(void 0===ke().get(this._data,i))throw We("DOC10",{childpath:t,rootPath:i});return ke().set(this._data,t,r),this}},update:function(t){throw jt("update")},putAttachment:function(){throw jt("attachments")},getAttachment:function(){throw jt("attachments")},allAttachments:function(){throw jt("attachments")},get allAttachments$(){throw jt("attachments")},atomicUpdate:function(t){var r=this;return new Promise(function(n,i){r._atomicQueue=r._atomicQueue.then((0,nt.Z)(Be().mark(function f(){var d,C,U;return Be().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:d=!1;case 1:if(d){X.next=24;break}return C=r._dataSync$.getValue(),X.prev=3,X.next=6,t(wr(r._dataSync$.getValue()),r);case 6:return U=X.sent,r.collection&&(U=r.collection.schema.fillObjectWithDefaults(U)),X.next=10,r._saveData(U,C);case 10:d=!0,X.next=22;break;case 13:if(X.prev=13,X.t0=X.catch(3),!(e=X.t0).parameters||!e.parameters.pouchDbError||409!==e.parameters.pouchDbError.status){X.next=20;break}return X.next=18,Dn();case 18:X.next=22;break;case 20:return i(X.t0),X.abrupt("return");case 22:X.next=1;break;case 24:n(r);case 25:case"end":return X.stop()}var e},f,null,[[3,13]])})))})},atomicPatch:function(t){return this.atomicUpdate(function(r){return Object.entries(t).forEach(function(n){r[n[0]]=n[1]}),r})},_saveData:(e=(0,nt.Z)(Be().mark(function r(n,i){return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=n,!this._isDeleted$.getValue()){d.next=3;break}throw We("DOC11",{id:this.primary,document:this});case 3:return this.collection.schema.validateChange(i,n),d.next=6,this.collection._runHooks("pre","save",n,this);case 6:return this.collection.schema.validate(n),d.next=9,Ai(this.collection,{previous:i,document:n});case 9:return d.abrupt("return",this.collection._runHooks("post","save",n,this));case 10:case"end":return d.stop()}},r,this)})),function(r,n){return e.apply(this,arguments)}),save:function(){var t=this;if(!this._isTemporary)throw We("DOC17",{id:this.primary,document:this});return this.collection.insert(this).then(function(){return t._isTemporary=!1,t.collection._docCache.set(t.primary,t),t._dataSync$.next(t._data),!0})},remove:function(){var t=this;if(this.deleted)return Promise.reject(We("DOC13",{document:this,id:this.primary}));var r=Ot(this._data);return this.collection._runHooks("pre","remove",r,this).then(function(){return r._deleted=!0,jr(),Ai(t.collection,{previous:t._data,document:r})}).then(function(){return t.collection._runHooks("post","remove",r,t)}).then(function(){return t})},destroy:function(){throw We("DOC14")}};function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr,t=function(n,i){this.collection=n,this._isTemporary=!1,this._dataSync$=new Qe.X(i),this._isDeleted$=new Qe.X(!1),this._atomicQueue=rn,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function Mo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!==t){var i=Mr(e.jsonSchema,r);void 0!==i&&(i.properties&&(i=i.properties),Object.keys(i).forEach(function(f){var d=bi(r+"."+f);t.__defineGetter__(f,function(){var C=n||this;if(C.get&&"function"==typeof C.get)return C.get(d)}),Object.defineProperty(t,f+"$",{get:function(){return(n||this).get$(d)},enumerable:!1,configurable:!1}),Object.defineProperty(t,f+"_",{get:function(){return(n||this).populate(d)},enumerable:!1,configurable:!1}),t.__defineSetter__(f,function(C){return(n||this).set(d,C)})}))}}function Ms(e,t,r){if(r[t.schema.primaryPath]&&r[t.schema.primaryPath].startsWith("_design"))return null;var n=new e(t,r);return tr("createRxDocument",n),n}function xs(e){return void 0!==e&&!!e.isInstanceOfRxDocument}var qn=function(){function e(r){this.jsonSchema=r,this.indexes=function(e){return(e.indexes||[]).map(function(t){return Array.isArray(t)?t:[t]})}(this.jsonSchema),this.primaryPath=ei(this.jsonSchema.primaryKey),this.finalFields=function(e){var t=Object.keys(e.properties).filter(function(n){return e.properties[n].final}),r=ei(e.primaryKey);return t.push(r),"string"!=typeof e.primaryKey&&e.primaryKey.fields.forEach(function(n){return t.push(n)}),t}(this.jsonSchema),this.jsonSchema.required=this.jsonSchema.required.concat(this.finalFields).filter(function(n){return!n.includes(".")}).filter(function(n,i,f){return f.indexOf(n)===i})}var t=e.prototype;return t.validateChange=function(n,i){var f=this;this.finalFields.forEach(function(d){if(!de()(n[d],i[d]))throw We("DOC9",{dataBefore:n,dataAfter:i,fieldName:d,schema:f.jsonSchema})})},t.validate=function(n,i){throw jt("validate")},t.fillObjectWithDefaults=function(n){return n=Ot(n),Object.entries(this.defaultValues).filter(function(i){var f=i[0];return!n.hasOwnProperty(f)||void 0===n[f]}).forEach(function(i){return n[i[0]]=i[1]}),n},t.getDocumentPrototype=function(){var n={};return Mo(this,n,""),Gn(this,"getDocumentPrototype",function(){return n}),n},t.getPrimaryOfDocumentData=function(n){return Du(this.jsonSchema,n)},t.fillPrimaryKey=function(n){var i=Ot(n),f=Du(this.jsonSchema,n),d=n[this.primaryPath];if(d&&d!==f)throw We("DOC19",{args:{documentData:n,existingPrimary:d,newPrimary:f},schema:this.jsonSchema});return i[this.primaryPath]=f,i},nn(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"normalized",get:function(){return Gn(this,"normalized",function(e){var t=An(wr(e));return e.indexes&&(t.indexes=Array.from(e.indexes)),t}(this.jsonSchema))}},{key:"topLevelFields",get:function(){return Object.keys(this.normalized.properties)}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.normalized.properties).filter(function(i){return i[1].hasOwnProperty("default")}).forEach(function(i){return n[i[0]]=i[1].default}),Gn(this,"defaultValues",n)}},{key:"crypt",get:function(){return!!(this.jsonSchema.encrypted&&this.jsonSchema.encrypted.length>0||this.jsonSchema.attachments&&this.jsonSchema.attachments.encrypted)}},{key:"encryptedPaths",get:function(){return this.jsonSchema.encrypted||[]}},{key:"hash",get:function(){return Gn(this,"hash",Wi(this.normalized))}}]),e}();function ei(e){return"string"==typeof e?e:e.key}function Du(e,t){if("string"==typeof e.primaryKey)return t[e.primaryKey];var r=e.primaryKey;return r.fields.map(function(n){var i=ke().get(t,n);if(void 0===i)throw We("DOC18",{args:{field:n,documentData:t}});return i}).join(r.separator)}function Ga(e){return(e=wr(e)).additionalProperties=!1,e.hasOwnProperty("keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes||[],e.required=e.required||[],e.encrypted=e.encrypted||[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.version=e.version||0,e}function Qa(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&tr("preCreateRxSchema",e);var r=new qn(Ga(e));return tr("createRxSchema",r),r}var Au=function(){function e(r,n){this.password=r,this.schema=n}var t=e.prototype;return t._encryptString=function(n){throw jt("encryption")},t._decryptString=function(n){throw jt("encryption")},t.encrypt=function(n){var i=this;if(!this.password)return n;var f=(n=Ot(n))._attachments;delete n._attachments;var d=wr(n);return f&&(d._attachments=f),this.schema.encryptedPaths.forEach(function(C){var U=ke().get(d,C);if(void 0!==U){var z=JSON.stringify(U),X=i._encryptString(z);ke().set(d,C,X)}}),d},t.decrypt=function(n){var i=this;if(!this.password)return n;var f=(n=Ot(n))._attachments;delete n._attachments;var d=wr(n);return f&&(d._attachments=f),this.schema.encryptedPaths.forEach(function(C){var U=ke().get(d,C);if(void 0!==U){var z=i._decryptString(U),X=JSON.parse(z);ke().set(d,C,X)}}),d},e}();function el(e,t){return new Au(e,t)}var tl=l(3905),Ou=l(6451),xo=l(5577),$r=l(9300),ti=l(7579),Pu=l(6063);class Ii extends ti.x{constructor(t=1/0,r=1/0,n=Pu.l){super(),this._bufferSize=t,this._windowTime=r,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,r)}next(t){const{isStopped:r,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:f,_windowTime:d}=this;r||(n.push(t),!i&&n.push(f.now()+d)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:i}=this,f=i.slice();for(let d=0;d<f.length&&!t.closed;d+=n?1:2)t.next(f[d]);return this._checkFinalizedStatuses(t),r}_trimBuffer(){const{_bufferSize:t,_timestampProvider:r,_buffer:n,_infiniteTimeWindow:i}=this,f=(i?1:2)*t;if(t<1/0&&f<n.length&&n.splice(0,n.length-f),!i){const d=r.now();let C=0;for(let U=1;U<n.length&&n[U]<=d;U+=2)C=U;C&&n.splice(0,C+1)}}}var ks=l(3099);function Ls(e,t,r){var n,i;let f,d=!1;return e&&"object"==typeof e?(f=null!==(n=e.bufferSize)&&void 0!==n?n:1/0,t=null!==(i=e.windowTime)&&void 0!==i?i:1/0,d=!!e.refCount,r=e.scheduler):f=e??1/0,(0,ks.B)({connector:()=>new Ii(f,t,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}var ri=l(8505),ko=new WeakMap,Lo=new WeakMap;function Bs(e){if(!Lo.has(e)){var t=Pr(function(e){if(!ko.has(e)){var t=e.schema.getDocumentPrototype(),r=function(e){var t={};return Object.entries(e.methods).forEach(function(r){t[r[0]]=r[1]}),t}(e),i={};[t,r,Qr].forEach(function(f){Object.getOwnPropertyNames(f).forEach(function(C){var U=Object.getOwnPropertyDescriptor(f,C),z=!0;(C.startsWith("_")||C.endsWith("_")||C.startsWith("$")||C.endsWith("$"))&&(z=!1),"function"==typeof U.value?Object.defineProperty(i,C,{get:function(){return U.value.bind(this)},enumerable:z,configurable:!1}):(U.enumerable=z,U.configurable=!1,U.writable&&(U.writable=!1),Object.defineProperty(i,C,U))})}),ko.set(e,i)}return ko.get(e)}(e));Lo.set(e,t)}return Lo.get(e)}function Ti(e,t){var r=t[e.schema.primaryPath],n=e._docCache.get(r);if(n)return n;var i=Ms(Bs(e),e,fr.deepFreezeWhenDevMode(t));return e._docCache.set(r,i),e._runHooksSync("post","create",t,i),tr("postCreateRxDocument",i),i}var Bo=function(e){e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},Fo=function(e){e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},No=function(e){var t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},jo=function(e){var t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},Ja=function(e){e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);for(var t=e.queryParams.primaryKey,r=e.previousResults,n=0;n<r.length;n++)if(r[n][t]===e.changeEvent.id){r.splice(n,1);break}},Xa=function(e){var t=e.changeEvent.id,r=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,r)}else if(e.previousResults.find(function(i){return i[e.queryParams.primaryKey]===t}))return;!function(e,t,r,n){var i=e,f=i.length-1,d=0,C=0;if(0===i.length)return i.push(t),i;for(;d<=f;)r(i[C=d+(f-d>>1)],t)<=0?d=C+1:f=C-1;r(i[C],t)<=0&&C++,i.splice(C,0,t)}(e.previousResults,r,e.queryParams.sortComparator)},rl=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Uu={doNothing:function(e){},insertFirst:Bo,insertLast:Fo,removeFirstItem:No,removeLastItem:jo,removeFirstInsertLast:function(e){No(e),Fo(e)},removeLastInsertFirst:function(e){jo(e),Bo(e)},removeFirstInsertFirst:function(e){No(e),Bo(e)},removeLastInsertLast:function(e){jo(e),Fo(e)},removeExisting:Ja,replaceExisting:function(e){for(var t=e.changeEvent.doc,r=e.queryParams.primaryKey,n=e.previousResults,i=0;i<n.length;i++)if(n[i][r]===e.changeEvent.id){n[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},alwaysWrong:function(e){var t={_id:"wrongHuman"+(new Date).getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},insertAtSortPosition:Xa,removeExistingAndInsertAtSortPosition:function(e){Ja(e),Xa(e)},runFullQueryAgain:function(e){throw new Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:function(e){throw new Error("Action unknownAction should never be called")}};function zu(e){return e?"1":"0"}function tu(e,t){for(var r=[],n=0,i=e.length;n<i;n+=t)r.push(e.substring(n,n+t));return r}function $o(e){return e.charCodeAt(0)-40}!function(e){void 0===e&&(e=6);for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,i=0;i<e;i++)r.charAt(Math.floor(Math.random()*n))}(4);var m="UNKNOWN";function k(e){return e[e.length-1]}var ii,Zt=function(e){return!!e.queryParams.limit},Ln={0:function(e){return"INSERT"===e.changeEvent.operation},1:function(e){return"UPDATE"===e.changeEvent.operation},2:function(e){return"DELETE"===e.changeEvent.operation},3:Zt,4:function(e){return 1===e.queryParams.limit},5:function(e){return!!(e.queryParams.skip&&e.queryParams.skip>0)},6:function(e){return 0===e.previousResults.length},7:function(e){return e.changeEvent.previous===m},8:function(e){return Zt(e)&&e.previousResults.length>=e.queryParams.limit},9:function(e){var t=e.previousResults[0];return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},10:function(e){var t=k(e.previousResults);return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},11:function(e){var t=e.queryParams.sortFields,r=e.changeEvent.previous,n=e.changeEvent.doc;if(!n)return!1;if(!r||r===m)return!0;for(var i=0;i<t.length;i++){var f=t[i];if(ke().get(r,f)!==ke().get(n,f))return!0}return!1},12:function(e){var t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);for(var n=e.queryParams.primaryKey,i=e.previousResults,f=0;f<i.length;f++)if(i[f][n]===t)return!0;return!1},13:function(e){var t=e.changeEvent.previous;if(!t||t===m)return!1;var r=e.previousResults[0];return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)<0)},14:function(e){var t=e.changeEvent.previous;if(!t||t===m)return!1;var r=k(e.previousResults);return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)>0)},15:function(e){var t=e.changeEvent.doc;if(!t)return!1;var r=e.previousResults[0];return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)<0)},16:function(e){var t=e.changeEvent.doc;if(!t)return!1;var r=k(e.previousResults);return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)>0)},17:function(e){var t=e.changeEvent.previous;return!(!t||t===m)&&e.queryParams.queryMatcher(t)},18:function(e){var t=e.changeEvent.doc;return!!t&&e.queryParams.queryMatcher(t)}};var si=function(e){return function(e,t,r){for(var n=e,i=e.l;;){if("number"==typeof(n=n[zu(t[i](r))])||"string"==typeof n)return n;i=n.l}}((ii||(ii=function(e){for(var t=new Map,n=2+2*parseInt(e.charAt(0)+e.charAt(1),10),f=tu(e.substring(2,n),2),d=0;d<f.length;d++){var U=(C=f[d]).charAt(0),z=$o(C.charAt(1));t.set(U,z)}var te=tu(e.substring(n,e.length-3),4);for(d=0;d<te.length;d++){U=(C=te[d]).charAt(0);var C,ce=C.charAt(1),Ee=C.charAt(2),he=$o(C.charAt(3));if(!t.has(ce))throw new Error("missing node with id "+ce);if(!t.has(Ee))throw new Error("missing node with id "+Ee);var ee=t.get(ce),le=t.get(Ee);t.set(U,{l:he,0:ee,1:le})}var Ae=e.slice(-3),be=Ae.charAt(0),xe=Ae.charAt(1);return{l:$o(Ae.charAt(2)),0:t.get(be),1:t.get(xe)}}("14a2b0c/d1e,f+g5h.i4j*k-l)m(n6ohk1pdf1qef1rin-sjn-ton-ugn-vmn-whn-xkn-yln-zdf5{ef5|wx5}df7~dz7\x7fef7\xa1bk7\xa2e{7\xa3g|7\xa4ry7\xa5dp7\xa6gk7\xa7eq7\xa8gt7\xa9ac7\xaamv7\xabgu7\xacnm7\xadiy7\xaenw7\xaf\xa4s8\xb0\xab\xa68\xb1\xack8\xb2\xaam8\xb3\xaev8\xb4\xabn8\xb5\xacn8\xb6vm8\xb7xv8\xb8mn8\xb9\xadj8\xba\xaem8\xbbxm8\xbc\xad\xb93\xbd}~3\xbe\xa9\xb03\xbf\x7f\xa23\xc0\xa1\xa33\xc1m\xb13\xc2\xae\xba3\xc3m\xba3\xc4\xa9\xb43\xc5b\xae3\xc6m\xb53\xc7m\xbb3\xc8x\xbb3\xc9kn3\xcam\xb83\xcb\xbcj6\xcc\xc2m6\xcd\xc6\xc36\xce\xc8m6\xcfnm6\xd0\xca\xc76\xd1\xcc\xce,\xd2\xcd\xd0,\xd3\xc5\xc9,\xd4\xb2\xb6,\xd5\xb3\xb7,\xd6\xaen,\xd7\xba\xbb,\xd8mf9\xd9\xcb\xc19\xdaym9\xdbm\xcf9\xdc\xd1\xd29\xddz{2\xdepq2\xdf\xbd\xbf2\xe0\xbe\xc02\xe1\xa5\xa72\xe2\xb0\xa82\xe3\xc4\xd32\xe4\xb4\xd62\xe5\xddn0\xe6\xden0\xe7\xd8\xdb0\xe8\xd9\xdc0\xe9\xdfn0\xea\xe0\xe30\xeb\xb2\xd40\xec\xaf\xd50\xed\xe1n0\xee\xe2\xe40\xef\xb9\xd70\xf0\xe7v/\xf1\xe5\xe6/\xf2\xe7\xeb/\xf3\xe8\xec/\xf4\xe9\xed/\xf5\xea\xee/\xf6\xday/\xf7\xf2m(\xf8\xf3\xef(\xf9\xf6y(\xfa\xf7\xf8:\xfb\xf4\xf5:\xfcm\xf9:\xfd\xf0\xf14\xfe\xfa\xfb4\xff\xfe\xfd*\u0100\xfcm*\xff\u0100.")),ii),Ln,e)};function $f(e,t){return t.sort&&0!==t.sort.length?t.sort.map(function(r){return Object.keys(r)[0]}):[e]}var Zu=new WeakMap;function Wf(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=function(e){if(Zu.has(e))return Zu.get(e);var t=e.collection,r=e.getPreparedQuery(),n=t.schema.primaryPath,i=t.storageInstance.getSortComparator(r),d=t.storageInstance.getQueryMatcher(r),U={primaryKey:e.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:$f(n,e.mangoQuery),sortComparator:function(X,te){var ce={docA:X,docB:te,rxQuery:e};return tr("preSortComparator",ce),i(ce.docA,ce.docB)},queryMatcher:function(X){var te={doc:X,rxQuery:e};return tr("preQueryMatcher",te),d(te.doc)}};return Zu.set(e,U),U}(e),n=e._resultsData.slice(),i=e._resultsDataMap,f=!1,d=t.find(function(C){var U=function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:fr.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}(C),X=function(e){var t=si(e);return rl[t]}({queryParams:r,changeEvent:U,previousResults:n,keyDocumentMap:i});return"runFullQueryAgain"===X||("doNothing"!==X?(f=!0,function(e,t,r,n,i){(0,Uu[e])({queryParams:t,changeEvent:r,previousResults:n,keyDocumentMap:i})}(X,r,U,n,i),!1):void 0)});return d?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:f,newResults:n}}var Kf=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(n){var i=n.toString();return this._map.has(i)||this._map.set(i,n),this._map.get(i)},e}();function Hf(){return new Kf}function yl(e,t){t.uncached=!0;var r=t.toString();e._map.delete(r)}function Vf(e){return e.refCount$.observers.length}var _l=(100,3e4,function(n,i){if(!(i._map.size<100)){for(var f=jr()-3e4,d=[],U=0,z=Array.from(i._map.values());U<z.length;U++){var X=z[U];if(!(Vf(X)>0)){if(0===X._lastEnsureEqual&&X._creationTime<f){yl(i,X);continue}d.push(X)}}var te=d.length-100;te<=0||d.sort(function(he,ee){return he._lastEnsureEqual-ee._lastEnsureEqual}).slice(0,te).forEach(function(he){return yl(i,he)})}}),Yu=new WeakSet;var Jf=0,nu=function(){function e(r,n,i){this.id=++Jf,this._execOverDatabaseCount=0,this._creationTime=jr(),this._lastEnsureEqual=0,this.other={},this.uncached=!1,this.refCount$=new Qe.X(null),this._latestChangeEvent=-1,this._resultsData=null,this._resultsDataMap=new Map,this._lastExecStart=0,this._lastExecEnd=0,this._resultsDocs$=new Qe.X(null),this._ensureEqualQueue=tn,this.op=r,this.mangoQuery=n,this.collection=i,n||(n={selector:{}})}var t=e.prototype;return t._setResultData=function(n){var i=this,f=function(e,t){return t.map(function(r){return Ti(e,r)})}(this.collection,n),d=this.collection.schema.primaryPath;return this._resultsDataMap=new Map,this._resultsData=f.map(function(C){var U=C._dataSync$.getValue();return i._resultsDataMap.set(U[d],U),U}),this._resultsDocs$.next(f),f},t._execOverDatabase=function(){var i,n=this;switch(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=jr(),this.op){case"find":i=this.collection._queryStorageInstance(this);break;case"findOne":i=this.collection._queryStorageInstance(this,1);break;default:throw We("QU1",{collection:this.collection.name,op:this.op})}return i.then(function(f){return n._lastExecEnd=jr(),f})},t.exec=function(n){var i=this;if(n&&"findOne"!==this.op)throw We("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return qu(this).then(function(){return(0,tl.z)(i.$)}).then(function(f){if(!f&&n)throw We("QU10",{collection:i.collection.name,query:i.mangoQuery,op:i.op});return f})},t.toString=function(){var n=An({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(n,Cs);return this.toString=function(){return i},i},t.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:wr(this.mangoQuery)};tr("prePrepareQuery",n);var i=this.collection.storageInstance.prepareQuery(n.mangoQuery);return this.getPreparedQuery=function(){return i},i},t.doesDocumentDataMatch=function(n){return!n._deleted&&this.queryMatcher(Gr(this.collection,n))},t.remove=function(){var n;return this.exec().then(function(i){return n=i,Array.isArray(i)?Promise.all(i.map(function(f){return f.remove()})):i.remove()}).then(function(){return n})},t.update=function(n){throw jt("update")},t.where=function(n){throw jt("query-builder")},t.sort=function(n){throw jt("query-builder")},t.skip=function(n){throw jt("query-builder")},t.limit=function(n){throw jt("query-builder")},nn(e,[{key:"$",get:function(){var n=this;if(!this._$){var i=this._resultsDocs$.pipe((0,xo.z)(function(d){return qu(n).then(function(C){return!C&&d})}),(0,$r.h)(function(d){return!!d}),(0,Vt.U)(function(d){return d.slice(0)}),(0,Vt.U)(function(d){return"findOne"===n.op?0===d.length?null:d[0]:d}),Ls({bufferSize:1,refCount:!0})).asObservable(),f=this.collection.$.pipe((0,ri.b)(function(){return qu(n)}),(0,$r.h)(function(){return!1}));this._$=(0,Ou.T)(i,f,this.refCount$.pipe((0,$r.h)(function(){return!1})))}return this._$}},{key:"queryMatcher",get:function(){return Gn(this,"queryMatcher",this.collection.storageInstance.getQueryMatcher(this.getPreparedQuery()))}},{key:"asRxQuery",get:function(){return this}}]),e}();function bl(e){return e.collection._queryCache.getByQuery(e)}function Xu(e,t,r){if(t&&"object"!=typeof t)throw Wt("QU7",{queryObj:t});if(Array.isArray(t))throw Wt("QU8",{queryObj:t});tr("preCreateRxQuery",{op:e,queryObj:t,collection:r});var n=new nu(e,t,r);return tr("createRxQuery",n=bl(n)),function(e){Yu.has(e)||(Yu.add(e),Dn().then(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"object"==typeof window&&window.requestIdleCallback?new Promise(function(t){return window.requestIdleCallback(t,{timeout:e})}):La(0)}(200)}).then(function(){e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),Yu.delete(e)}))}(r),n}function El(e){return e._latestChangeEvent>=e.asRxQuery.collection._changeEventBuffer.counter}function qu(e){return e.collection.database.destroyed||El(e)?tn:(e._ensureEqualQueue=e._ensureEqualQueue.then(function(){return function(e){if(e._lastEnsureEqual=jr(),e.collection.database.destroyed||El(e))return tn;var t=!1,r=!1;if(-1===e._latestChangeEvent&&(r=!0),!r){var n=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===n)r=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter,n=n.filter(function(C){return!C.startTime||e._lastExecStart<C.startTime&&(!C.endTime||e._lastExecEnd<C.endTime)});var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n),f=Wf(e,i);f.runFullQueryAgain?r=!0:f.changed&&(t=!0,e._setResultData(f.newResults))}}if(r){var d=e.collection._changeEventBuffer.counter;return e._execOverDatabase().then(function(C){return e._latestChangeEvent=d,de()(C,e._resultsData)||(t=!0,e._setResultData(C)),t})}return t}(e)}),e._ensureEqualQueue)}var ed=l(8675),td=function(){function e(){this._map=new Map,this._map=new Map}var t=e.prototype;return t.get=function(n){return this._map.get(n)},t.set=function(n,i){return this._map.set(n,i)},t.delete=function(n){return this._map.delete(n)},e}();function rd(){return new td}var nd=function(){function e(r){var n=this;this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=r,this.subs.push(this.collection.$.pipe((0,$r.h)(function(i){return!i.isLocal})).subscribe(function(i){return n._handleChangeEvent(i)}))}var t=e.prototype;return t._handleChangeEvent=function(n){for(this.counter++,this.buffer.push(n),this.eventCounterMap.set(n,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(n){var f=this.eventCounterMap.get(this.buffer[0]);return n<f?null:n-f},t.getFrom=function(n){var i=[],f=this.getArrayIndexByPointer(n);if(null===f)return null;for(;;){var d=this.buffer[f];if(f++,!d)return i;i.push(d)}},t.runFrom=function(n,i){var f=this.getFrom(n);if(null===f)throw new Error("out of bounds");f.forEach(function(d){return i(d)})},t.reduceByLastOfDoc=function(n){return n.slice(0)},t.hasChangeWithRevision=function(n){for(var i=this.buffer.length;i>0;){i--;var f=this.buffer[i];if(f.documentData&&f.documentData._rev===n)return!0}return!1},t.destroy=function(){this.subs.forEach(function(n){return n.unsubscribe()})},e}();function id(e){return new nd(e)}var wl=["pre","post"],Sl=["insert","save","remove","create"],Cl=!1,iu=function(){function e(r,n,i,f,d){var C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},z=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},X=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},te=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},ce=arguments.length>10&&void 0!==arguments[10]?arguments[10]:_l,Ee=arguments.length>11&&void 0!==arguments[11]?arguments[11]:{};this._isInMemory=!1,this.destroyed=!1,this._atomicUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._repStates=new Set,this._docCache=rd(),this._queryCache=Hf(),this._crypter={},this._observable$={},this._changeEventBuffer={},this.database=r,this.name=n,this.schema=i,this.storageInstance=f,this.localDocumentsStore=d,this.instanceCreationOptions=C,this.migrationStrategies=U,this.methods=z,this.attachments=X,this.options=te,this.cacheReplacementPolicy=ce,this.statics=Ee,sd(this.asRxCollection)}var t=e.prototype;return t.prepare=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,U,d=this;return Be().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:this._crypter=el(this.database.password,this.schema),this._observable$=this.database.$.pipe((0,$r.h)(function(te){return te.collectionName===d.name})),this._changeEventBuffer=id(this.asRxCollection),C=this.storageInstance.changeStream().pipe((0,Vt.U)(function(te){return Rn(!1,te,d.database,d)})).subscribe(function(te){d.$emit(te)}),this._subs.push(C),U=this.localDocumentsStore.changeStream().pipe((0,Vt.U)(function(te){return Rn(!0,te,d.database,d)})).subscribe(function(te){return d.$emit(te)}),this._subs.push(U),this._subs.push(this._observable$.pipe((0,$r.h)(function(te){return!te.isLocal})).subscribe(function(te){var ce=d._docCache.get(te.documentId);ce&&ce._handleChangeEvent(te)}));case 8:case"end":return X.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.migrationNeeded=function(){throw jt("migration")},t.getDataMigrator=function(){throw jt("migration")},t.migrate=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migrate(n)},t.migratePromise=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migratePromise(n)},t._queryStorageInstance=function(){var r=(0,nt.Z)(Be().mark(function i(f,d){var U,z,te,C=this,ce=arguments;return Be().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return U=ce.length>2&&void 0!==ce[2]&&ce[2],z=f.getPreparedQuery(),d&&(z.limit=d),he.next=5,this.database.lockedRun(function(){return C.storageInstance.query(z)});case 5:return te=he.sent.documents.map(function(ee){return Ps(C,ee,U)}),he.abrupt("return",te);case 8:case"end":return he.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.$emit=function(n){return this.database.$emit(n)},t.insert=function(){var r=(0,nt.Z)(Be().mark(function i(f){var d,C,U,z;return Be().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(d=null,!xs(f)){te.next=6;break}if((d=f)._isTemporary){te.next=5;break}throw We("COL1",{data:f});case 5:f=d.toJSON();case 6:return C=Jn(this,f),U=d,te.next=10,this._runHooks("pre","insert",C);case 10:return this.schema.validate(C),te.next=13,Ai(this,{document:C});case 13:return z=te.sent,d?d._dataSync$.next(z):U=Ti(this,z),te.next=17,this._runHooks("post","insert",C,U);case 17:return te.abrupt("return",U);case 18:case"end":return te.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.bulkInsert=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,U,z,X,te,ce,Ee,d=this;return Be().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(0!==f.length){ee.next=2;break}return ee.abrupt("return",{success:[],error:[]});case 2:return C=f.map(function(le){return Jn(d,le)}),ee.next=5,Promise.all(C.map(function(le){return d._runHooks("pre","insert",le).then(function(){return d.schema.validate(le),le})}));case 5:return z=(U=ee.sent).map(function(le){return{document:Gr(d,le)}}),X=new Map,U.forEach(function(le){X.set(le[d.schema.primaryPath],le)}),ee.next=11,this.database.lockedRun(function(){return d.storageInstance.bulkWrite(z)});case 11:return te=ee.sent,ce=Array.from(te.success.entries()),Ee=ce.map(function(le){var Ae=le[1],be=On(X,le[0]);return be._rev=Ae._rev,Ti(d,be)}),ee.next=16,Promise.all(Ee.map(function(le){return d._runHooks("post","insert",X.get(le.primary),le)}));case 16:return ee.abrupt("return",{success:Ee,error:Array.from(te.error.values())});case 17:case"end":return ee.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.bulkRemove=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,U,z,X,te,ce,Ee,d=this;return Be().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(0!==f.length){ee.next=2;break}return ee.abrupt("return",{success:[],error:[]});case 2:return ee.next=4,this.findByIds(f);case 4:return C=ee.sent,U=[],z=new Map,Array.from(C.values()).forEach(function(le){var Se=wr(le.toJSON(!0));U.push(Se),z.set(le.primary,Se)}),ee.next=10,Promise.all(U.map(function(le){return d._runHooks("pre","remove",le,C.get(le[d.schema.primaryPath]))}));case 10:return X=U.map(function(le){var Se=Ot(le);return Se._deleted=!0,{previous:Gr(d,le),document:Gr(d,Se)}}),ee.next=13,this.database.lockedRun(function(){return d.storageInstance.bulkWrite(X)});case 13:return te=ee.sent,ce=Array.from(te.success.keys()),ee.next=17,Promise.all(ce.map(function(le){return d._runHooks("post","remove",z.get(le),C.get(le))}));case 17:return Ee=ce.map(function(le){return C.get(le)}),ee.abrupt("return",{success:Ee,error:Array.from(te.error.values())});case 19:case"end":return ee.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.upsert=function(n){var i=this,f=Jn(this,n),d=f[this.schema.primaryPath];if(!d)throw We("COL3",{primaryPath:this.schema.primaryPath,data:f,schema:this.schema.jsonSchema});return this.findOne(d).exec().then(function(C){return C&&!C.deleted?(f._rev=C._rev,C.atomicUpdate(function(){return f}).then(function(){return C})):i.insert(n)})},t.atomicUpsert=function(n){var C,i=this,f=Jn(this,n),d=f[this.schema.primaryPath];if(!d)throw We("COL4",{data:n});return C=(C=this._atomicUpsertQueues.has(d)?this._atomicUpsertQueues.get(d):rn).then(function(){return function(e,t,r){var n=e._docCache.get(t);return n?Promise.resolve({doc:n,inserted:!1}):e.findOne(t).exec().then(function(i){return i?{doc:i,inserted:!1}:e.insert(r).then(function(f){return{doc:f,inserted:!0}})})}(i,d,f)}).then(function(U){return U.inserted?U.doc:function(e,t){return e.atomicUpdate(function(r){return t._rev=r._rev,r._data=t,r._data}).then(function(){return e})}(U.doc,f).then(function(){return Dn()}).then(function(){return Dn()}).then(function(){return Dn()}).then(function(){return U.doc})}),this._atomicUpsertQueues.set(d,C),C},t.find=function(n){if("string"==typeof n)throw We("COL5",{queryObj:n});return n||(n={selector:{}}),Xu("find",n,this)},t.findOne=function(n){var i;if("string"==typeof n){var f;i=Xu("findOne",{selector:(f={},f[this.schema.primaryPath]=n,f)},this)}else{if(n||(n={selector:{}}),n.limit)throw We("QU6");i=Xu("findOne",n,this)}if("number"==typeof n||Array.isArray(n))throw Wt("COL6",{queryObj:n});return i},t.findByIds=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,U,d=this;return Be().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(C=new Map,U=[],f.forEach(function(ce){var Ee=d._docCache.get(ce);Ee?C.set(ce,Ee):U.push(ce)}),!(U.length>0)){te.next=8;break}return te.next=6,this.storageInstance.findDocumentsById(U,!1);case 6:Array.from(te.sent.values()).forEach(function(ce){ce=Ps(d,ce);var Ee=Ti(d,ce);C.set(Ee.primary,Ee)});case 8:return te.abrupt("return",C);case 9:case"end":return te.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.findByIds$=function(n){var i=this,f=null,d=-1,C=this.findByIds(n).then(function(U){d=i._changeEventBuffer.counter,f=U});return this.$.pipe((0,ed.O)(null),(0,xo.z)(function(U){return C.then(function(){return U})}),(0,xo.z)(function(){var U=(0,nt.Z)(Be().mark(function z(X){var te,ce;return Be().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(te=Fa(f),null!==(ce=i._changeEventBuffer.getFrom(d+1))){ee.next=10;break}return ee.next=5,i.findByIds(n);case 5:d=i._changeEventBuffer.counter,Array.from(ee.sent.entries()).forEach(function(le){return te.set(le[0],le[1])}),ee.next=11;break;case 10:ce.filter(function(le){return n.includes(le.documentId)}).forEach(function(le){var Se=le.operation;"INSERT"===Se||"UPDATE"===Se?te.set(le.documentId,i._docCache.get(le.documentId)):te.delete(le.documentId)});case 11:return ee.abrupt("return",te);case 12:case"end":return ee.stop()}},z)}));return function(z){return U.apply(this,arguments)}}()),(0,$r.h)(function(U){return!!U}),Ls({bufferSize:1,refCount:!0}))},t.exportJSON=function(){throw jt("json-dump")},t.importJSON=function(n){throw jt("json-dump")},t.syncCouchDB=function(n){throw jt("replication")},t.syncGraphQL=function(n){throw jt("replication-graphql")},t.inMemory=function(){throw jt("in-memory")},t.addHook=function(n,i,f){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"!=typeof f)throw Wt("COL7",{key:i,when:n});if(!wl.includes(n))throw Wt("COL8",{key:i,when:n});if(!Sl.includes(i))throw We("COL9",{key:i});if("post"===n&&"create"===i&&!0===d)throw We("COL10",{when:n,key:i,parallel:d});var C=f.bind(this),U=d?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][n]=this.hooks[i][n]||{series:[],parallel:[]},this.hooks[i][n][U].push(C)},t.getHooks=function(n,i){try{return this.hooks[i][n]}catch{return{series:[],parallel:[]}}},t._runHooks=function(n,i,f,d){var C=this.getHooks(n,i);return C?function(e,t){return e.reduce(function(r,n){return r.then(n)},Promise.resolve(void 0))}(C.series.map(function(z){return function(){return z(f,d)}})).then(function(){return Promise.all(C.parallel.map(function(z){return z(f,d)}))}):rn},t._runHooksSync=function(n,i,f,d){var C=this.getHooks(n,i);!C||C.series.forEach(function(U){return U(f,d)})},t.newDocument=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=this.schema.fillObjectWithDefaults(n);var i=Ms(Bs(this),this,n);return i._isTemporary=!0,this._runHooksSync("post","create",n,i),i},t.destroy=function(){var n=this;return this.destroyed?tn:(this._onDestroyCall&&this._onDestroyCall(),this._subs.forEach(function(i){return i.unsubscribe()}),this._changeEventBuffer&&this._changeEventBuffer.destroy(),Array.from(this._repStates).forEach(function(i){return i.cancel()}),Promise.all([this.storageInstance.close(),this.localDocumentsStore.close()]).then(function(){return delete n.database.collections[n.name],n.destroyed=!0,As("postDestroyRxCollection",n).then(function(){return!0})}))},t.remove=function(){return this.database.removeCollection(this.name)},nn(e,[{key:"$",get:function(){return this._observable$}},{key:"insert$",get:function(){return this.$.pipe((0,$r.h)(function(n){return"INSERT"===n.operation}))}},{key:"update$",get:function(){return this.$.pipe((0,$r.h)(function(n){return"UPDATE"===n.operation}))}},{key:"remove$",get:function(){return this.$.pipe((0,$r.h)(function(n){return"DELETE"===n.operation}))}},{key:"onDestroy",get:function(){var n=this;return this._onDestroy||(this._onDestroy=new Promise(function(i){return n._onDestroyCall=i})),this._onDestroy}},{key:"asRxCollection",get:function(){return this}}]),e}();function sd(e){if(!Cl){Cl=!0;var t=Object.getPrototypeOf(e);Sl.forEach(function(r){wl.map(function(n){var i=n+wo(r);t[i]=function(f,d){return this.addHook(n,r,f,d)}})})}}function ud(e,t){var r=e.database,n=e.name,i=e.schema,f=e.instanceCreationOptions,d=void 0===f?{}:f,C=e.migrationStrategies,U=void 0===C?{}:C,z=e.autoMigrate,X=void 0===z||z,te=e.statics,ce=void 0===te?{}:te,Ee=e.methods,he=void 0===Ee?{}:Ee,ee=e.attachments,le=void 0===ee?{}:ee,Se=e.options,Ae=void 0===Se?{}:Se,be=e.cacheReplacementPolicy,xe=void 0===be?_l:be;fr.isDevMode()&&Object.keys(he).filter(function(Ve){return i.topLevelFields.includes(Ve)}).forEach(function(Ve){throw We("COL18",{funName:Ve})});var Re={databaseName:r.name,collectionName:n,schema:i.jsonSchema,options:d,idleQueue:r.idleQueue};return tr("preCreateRxStorageInstance",Re),Mn(n,r,Re,d).then(function(Ve){var ze=new iu(r,n,i,Ve.storageInstance,Ve.localDocumentsStore,d,U,he,le,Ae,xe,ce);return ze.prepare(t).then(function(){Object.entries(ce).forEach(function(bt){var Pt=bt[1];Object.defineProperty(ze,bt[0],{get:function(){return Pt.bind(ze)}})});var Ke=rn;return X&&0!==ze.schema.version&&(Ke=ze.migratePromise()),Ke}).then(function(){return tr("createRxCollection",ze),ze}).catch(function(Ke){return Promise.all([Ve.storageInstance.close(),Ve.localDocumentsStore.close()]).then(function(){return Promise.reject(Ke)})})})}var ec=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function tc(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var r=e._pHM.get(t);e._hPM.delete(r),e._pHM.delete(t)}e._iC.delete(t)}}function rc(e){e._tryIR||0===e._iC.size||(e._tryIR=!0,setTimeout(function(){e.isIdle()?setTimeout(function(){e.isIdle()?(function(e){0!==e._iC.size&&(e._iC.values().next().value._manRes(),setTimeout(function(){return rc(e)},0))}(e),e._tryIR=!1):e._tryIR=!1},0):e._tryIR=!1},0))}ec.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,rc(this)},wrapCall:function(t){var n,r=this;this.lock();try{n=t()}catch(i){throw this.unlock(),i}return n.then&&"function"==typeof n.then?n.then(function(i){return r.unlock(),i}).catch(function(i){throw r.unlock(),i}):(this.unlock(),n)},requestIdlePromise:function(t){var r=this;t=t||{};var n,i=new Promise(function(C){return n=C});if(i._manRes=function(){tc(r,i),n()},t.timeout){var d=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=d}return this._iC.add(i),rc(this),i},cancelIdlePromise:function(t){tc(this,t)},requestIdleCallback:function(t,r){var n=this._lHN++,i=this.requestIdlePromise(r);return this._hPM.set(n,i),this._pHM.set(i,n),i.then(function(){return t()}),n},cancelIdleCallback:function(t){var r=this._hPM.get(t);this.cancelIdlePromise(r)},clear:function(){var t=this;this._iC.forEach(function(r){return tc(t,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}},Promise.resolve(!1);var es=Promise.resolve();function Dl(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function nc(){return Math.random().toString(36).substring(2)}var Al=0,ic=0;function su(){var e=(new Date).getTime();return e===Al?1e3*e+ ++ic:(Al=e,ic=0,1e3*e)}var ou="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);const bd={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(r){t.messagesCallback&&t.messagesCallback(r.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),es}catch(r){return Promise.reject(r)}},canBeUsed:function(){if(ou&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:su};var sc=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var r=this;this.timeMap.set(t,Ol()),this.set.add(t),setTimeout(function(){!function(e){for(var t=Ol()-e.ttl,r=e.set[Symbol.iterator]();;){var n=r.next().value;if(!n)return;if(!(e.timeMap.get(n)<t))return;e.timeMap.delete(n),e.set.delete(n)}}(r)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function Ol(){return(new Date).getTime()}function oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var yn="messages";function Pl(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function Il(e){e.closed||Tl(e).then(function(){return Dl(e.options.idb.fallbackInterval)}).then(function(){return Il(e)})}function Tl(e){return e.closed||!e.messagesCallback?es:function(e,t){var r=e.transaction(yn).objectStore(yn),n=[];return new Promise(function(f){(function(){try{var f=IDBKeyRange.bound(t+1,1/0);return r.openCursor(f)}catch{return r.openCursor()}}()).onsuccess=function(d){var C=d.target.result;C?C.value.id<t+1?C.continue(t+1):(n.push(C.value),C.continue()):f(n)}})}(e.db,e.lastCursorId).then(function(t){var r=t.filter(function(n){return!!n}).map(function(n){return n.id>e.lastCursorId&&(e.lastCursorId=n.id),n}).filter(function(n){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(n,e)}).sort(function(n,i){return n.time-i.time});return r.forEach(function(n){e.messagesCallback&&(e.eMIs.add(n.id),e.messagesCallback(n.data))}),es})}const Nd={create:function(e,t){return t=oc(t),function(e){var n=Pl().open("pubkey.broadcast-channel-0-"+e,1);return n.onupgradeneeded=function(f){f.target.result.createObjectStore(yn,{keyPath:"id",autoIncrement:!0})},new Promise(function(f,d){n.onerror=function(C){return d(C)},n.onsuccess=function(){f(n.result)}})}(e).then(function(r){var n={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:nc(),eMIs:new sc(2*t.idb.ttl),writeBlockPromise:es,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,t.idb.onclose&&t.idb.onclose()},Il(n),n})},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t,Tl(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return function(e,t,r){var i={uuid:t,time:(new Date).getTime(),data:r},f=e.transaction([yn],"readwrite");return new Promise(function(d,C){f.oncomplete=function(){return d()},f.onerror=function(z){return C(z)},f.objectStore(yn).add(i)})}(e.db,e.uuid,t)}).then(function(){0===Math.floor(11*Math.random()+0)&&function(e,t){(function(e,t){var r=(new Date).getTime()-t,n=e.transaction(yn).objectStore(yn),i=[];return new Promise(function(f){n.openCursor().onsuccess=function(d){var C=d.target.result;if(C){var U=C.value;if(!(U.time<r))return void f(i);i.push(U),C.continue()}else f(i)}})})(e,t).then(function(r){return Promise.all(r.map(function(n){return function(e,t){var r=e.transaction([yn],"readwrite").objectStore(yn).delete(t);return new Promise(function(n){r.onsuccess=function(){return n()}})}(e,n.id)}))})}(e.db,e.options.idb.ttl)}),e.writeBlockPromise},canBeUsed:function(){return!ou&&!!Pl()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:su};function Rl(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Ml(e){return"pubkey.broadcastChannel-"+e}function xl(){if(ou)return!1;var e=Rl();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}const Zd={create:function(e,t){if(t=oc(t),!xl())throw new Error("BroadcastChannel: localstorage cannot be used");var r=nc(),n=new sc(t.localstorage.removeTimeout),i={channelName:e,uuid:r,eMIs:n};return i.listener=function(e,t){var r=Ml(e),n=function(f){f.key===r&&t(JSON.parse(f.newValue))};return window.addEventListener("storage",n),n}(e,function(f){!i.messagesCallback||f.uuid!==r&&(!f.token||n.has(f.token)||f.data.time&&f.data.time<i.messagesCallbackTime||(n.add(f.token),i.messagesCallback(f.data)))}),i},close:function(e){!function(e){window.removeEventListener("storage",e)}(e.listener)},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(r){Dl().then(function(){var n=Ml(e.channelName),i={token:nc(),time:(new Date).getTime(),data:t,uuid:e.uuid},f=JSON.stringify(i);Rl().setItem(n,f);var d=document.createEvent("Event");d.initEvent("storage",!0,!0),d.key=n,d.newValue=f,window.dispatchEvent(d),r()})})},canBeUsed:xl,type:"localstorage",averageResponseTime:function(){var t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?240:120},microSeconds:su};var Yd=su,ac=new Set;const ih={create:function(e){var t={name:e,messagesCallback:null};return ac.add(t),t},close:function(e){ac.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(r){return setTimeout(function(){Array.from(ac).filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),r()},5)})},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:Yd};var kl=[bd,Nd,Zd],uc=function(t,r){this.name=t,this.options=oc(r),this.method=function(e){var t=[].concat(e.methods,kl).filter(Boolean);if(e.type){if("simulate"===e.type)return ih;var r=t.find(function(i){return i.type===e.type});if(r)return r;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!ou&&(t=t.filter(function(i){return"idb"!==i.type}));var n=t.find(function(i){return i.canBeUsed()});if(n)return n;throw new Error("No useable method found in "+JSON.stringify(kl.map(function(i){return i.type})))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);!function(e){return!(!e||"function"!=typeof e.then)}(t)?e._state=t:(e._prepP=t,t.then(function(r){e._state=r}))}(this)};function Ll(e,t,r){var i={time:e.method.microSeconds(),type:t,data:r};return(e._prepP?e._prepP:es).then(function(){var d=e.method.postMessage(e._state,i);return e._uMP.add(d),d.catch().then(function(){return e._uMP.delete(d)}),d})}function Bl(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Fl(e,t,r){e._addEL[t].push(r),function(e){if(!e._iL&&Bl(e)){var t=function(i){e._addEL[i.type].forEach(function(f){i.time>=f.time&&f.fn(i.data)})},r=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,r)}):(e._iL=!0,e.method.onMessage(e._state,t,r))}}(e)}function Nl(e,t,r){e._addEL[t]=e._addEL[t].filter(function(n){return n!==r}),function(e){if(e._iL&&!Bl(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}uc._pubkey=!0,uc.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return Ll(this,"message",t)},postInternal:function(t){return Ll(this,"internal",t)},set onmessage(e){var r={time:this.method.microSeconds(),fn:e};Nl(this,"message",this._onML),e&&"function"==typeof e?(this._onML=r,Fl(this,"message",r)):this._onML=null},addEventListener:function(t,r){Fl(this,t,{time:this.method.microSeconds(),fn:r})},removeEventListener:function(t,r){Nl(this,t,this._addEL[t].find(function(i){return i.fn===r}))},close:function(){var t=this;if(!this.closed){this.closed=!0;var r=this._prepP?this._prepP:es;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(n){return n()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};var lc=new Set,au=function(){function e(r,n,i,f,d){var C=arguments.length>5&&void 0!==arguments[5]&&arguments[5],U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},z=arguments.length>7?arguments[7]:void 0,X=arguments.length>8?arguments[8]:void 0,te=arguments.length>9?arguments[9]:void 0,ce=arguments.length>10?arguments[10]:void 0;this.token=Hn(10),this._subs=[],this.destroyed=!1,this.subject=new ti.x,this.observable$=this.subject.asObservable(),this.broadcastChannel$=new ti.x,this.name=r,this.storage=n,this.instanceCreationOptions=i,this.password=f,this.multiInstance=d,this.eventReduce=C,this.options=U,this.idleQueue=z,this.internalStore=X,this.localDocumentsStore=te,this.broadcastChannel=ce,this.collections={}}var t=e.prototype;return t.dangerousRemoveCollectionInfo=function(){var r=(0,nt.Z)(Be().mark(function i(){var d;return Be().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,Yi(this.internalStore);case 2:return d=U.sent.map(function(z){var X=Ot(z);return X._deleted=!0,{previous:z,document:X}}),U.next=6,this.internalStore.bulkWrite(d);case 6:case"end":return U.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.$emit=function(n){this.subject.next(n),n.databaseToken===this.token&&function(e,t){if(e.destroyed)return tn;e.multiInstance&&!function(e){return!(!e.collectionName||"_"!==e.collectionName.charAt(0))}(t)&&e.broadcastChannel&&e.broadcastChannel.postMessage({cE:t,storageToken:e.storageToken}).then(function(){return!0})}(this,n)},t.removeCollectionDoc=function(){var r=(0,nt.Z)(Be().mark(function i(f,d){var U,z,X,C=this;return Be().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return U=uu(f,d),ce.next=3,wi(this.internalStore,U);case 3:if(z=ce.sent){ce.next=6;break}throw We("SNH",{name:f,schema:d});case 6:return(X=Ot(z))._deleted=!0,ce.next=10,this.lockedRun(function(){return C.internalStore.bulkWrite([{document:X,previous:z}])});case 10:case"end":return ce.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.addCollections=function(){var r=(0,nt.Z)(Be().mark(function i(f){var U,z,te,ce,d=this;return Be().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,this.lockedRun(function(){return d.internalStore.findDocumentsById(Object.keys(f).map(function(ee){return uu(ee,f[ee].schema)}),!1)});case 2:return U={},Array.from(he.sent.entries()).forEach(function(ee){U[ee[0]]=ee[1]}),z={},he.next=8,Promise.all(Object.entries(f).map(function(ee){var le=ee[0],Se=ee[1],Ae=le,be=U[uu(le,f[Ae].schema)],xe=Ot(Se);xe.name=Ae;var Re=Qa(Se.schema);if(z[Ae]=Re.hash,xe.schema=Re,xe.database=d,Re.crypt&&!d.password)throw We("DB7",{name:le});if(d.collections[le])throw We("DB3",{name:le});if(be&&be.schemaHash!==z[Ae])throw We("DB6",{name:le,previousSchemaHash:be.schemaHash,schemaHash:z[Ae]});var Ve=Ot(Se);return Ve.database=d,Ve.name=le,tr("preCreateRxCollection",Ve),ud(xe,!!be)}));case 8:if(te=[],ce={},he.sent.forEach(function(ee){var le=ee.name;ce[le]=ee;var Se=uu(le,f[le].schema);U[Se]||te.push({document:{collectionName:Se,schemaHash:z[le],schema:ee.schema.normalized,version:ee.schema.version,_attachments:{}}}),d.collections[le]=ee,d[le]||Object.defineProperty(d,le,{get:function(){return d.collections[le]}})}),!(te.length>0)){he.next=15;break}return he.next=15,this.lockedRun(function(){return d.internalStore.bulkWrite(te)});case 15:return he.abrupt("return",ce);case 16:case"end":return he.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.removeCollection=function(n){var i=this,f=rn;return this.collections[n]&&(f=this.collections[n].destroy()),f.then(function(){return function(e,t){return hc.apply(this,arguments)}(i,n)}).then(function(d){return Promise.all(d.map(function(C){return Mn(n,i,{databaseName:i.name,collectionName:n,idleQueue:i.idleQueue,schema:xn(C,"collectionName"),options:i.instanceCreationOptions},{})}))}).then(function(d){return Promise.all(d.map(function(C){return i.lockedRun(function(){return Promise.all([C.storageInstance.remove(),C.localDocumentsStore.remove()])})}))}).then(function(){})},t.lockedRun=function(n){return this.idleQueue.wrapCall(n)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(){throw jt("json-dump")},t.importJSON=function(n){throw jt("json-dump")},t.server=function(n){throw jt("server")},t.backup=function(n){throw jt("backup")},t.leaderElector=function(){throw jt("leader-election")},t.isLeader=function(){throw jt("leader-election")},t.waitForLeadership=function(){throw jt("leader-election")},t.migrationStates=function(){throw jt("migration")},t.destroy=function(){var n=this;return this.destroyed||(tr("preDestroyRxDatabase",this),this.destroyed=!0,this._subs.map(function(i){return i.unsubscribe()}),"pseudoInstance"===this.name)?tn:this.requestIdlePromise().then(function(){return Promise.all(Object.keys(n.collections).map(function(i){return n.collections[i]}).map(function(i){return i.destroy()}))}).then(function(){return n.internalStore.close()}).then(function(){return n.localDocumentsStore.close()}).then(function(){return n.broadcastChannel?n.broadcastChannel.close():null}).then(function(){return lc.delete(n.name)}).then(function(){return!0})},t.remove=function(){var n=this;return this.destroy().then(function(){return function(e,t){return vc.apply(this,arguments)}(n.name,n.storage)})},nn(e,[{key:"$",get:function(){return this.observable$}}]),e}();function lh(e){return dc.apply(this,arguments)}function dc(){return dc=(0,nt.Z)(Be().mark(function e(t){var r,n,i;return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r="storageToken",d.next=3,Oo(t.localDocumentsStore,r);case 3:if(n=d.sent){d.next=11;break}return i=Hn(10),d.next=8,t.localDocumentsStore.bulkWrite([{document:{_id:r,value:i,_attachments:{}}}]);case 8:return d.abrupt("return",i);case 11:return d.abrupt("return",n.value);case 12:case"end":return d.stop()}},e)})),dc.apply(this,arguments)}function uu(e,t){return e+"-"+t.version}function hc(){return hc=(0,nt.Z)(Be().mark(function e(t,r){var i;return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.lockedRun(function(){return Yi(t.internalStore)});case 2:return i=d.sent.filter(function(C){return C.collectionName.split("-")[0]===r}),d.abrupt("return",Promise.all(i.map(function(C){var U=Ot(C);return U._deleted=!0,t.lockedRun(function(){return Ci(t.internalStore,{previous:C,document:U})})})).then(function(){return i.map(function(C){return C.version})}));case 5:case"end":return d.stop()}},e)})),hc.apply(this,arguments)}function hh(e){if(!e.broadcastChannel)throw We("SNH",{args:{rxDatabase:e}});e.broadcastChannel.addEventListener("message",function(t){t.storageToken===e.storageToken&&t.cE.databaseToken!==e.token&&e.broadcastChannel$.next(t.cE)}),e._subs.push(e.broadcastChannel$.subscribe(function(t){e.$emit(t)}))}function jl(e,t,r,n,i){return pc.apply(this,arguments)}function pc(){return pc=(0,nt.Z)(Be().mark(function e(t,r,n,i,f){var d;return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,t.createStorageInstance({databaseName:r,collectionName:Os,schema:xn(0,"collectionName"),options:n,idleQueue:i,broadcastChannel:f});case 2:return d=z.sent,z.next=5,t.createKeyObjectStorageInstance({databaseName:r,collectionName:"",options:n,idleQueue:i,broadcastChannel:f});case 5:return z.abrupt("return",{internalStore:d,localDocumentsStore:z.sent});case 7:case"end":return z.stop()}},e)})),pc.apply(this,arguments)}function mc(){return mc=(0,nt.Z)(Be().mark(function e(t){var r;return Be().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.localDocumentsStore.changeStream().subscribe(function(f){t.$emit(Rn(!0,f,t))}),t._subs.push(r),i.next=4,lh(t);case 4:t.storageToken=i.sent,t.multiInstance&&hh(t);case 6:case"end":return i.stop()}},e)})),mc.apply(this,arguments)}function vc(){return vc=(0,nt.Z)(Be().mark(function e(t,r){var n,i,f;return Be().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return n=new ec,C.next=3,jl(r,t,{},n);case 3:return i=C.sent,C.next=6,Yi(i.internalStore);case 6:return f=C.sent,C.next=9,Promise.all(f.map(function(){var U=(0,nt.Z)(Be().mark(function z(X){var ce,Ee,he,ee,le,Se,Ae,be;return Be().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return ce=X.schema,Ee=X.collectionName.split("-"),he=Ee[0],ee=parseInt(Ee[1],10),le=ei(ce.primaryKey),Re.next=8,Promise.all([r.createStorageInstance({databaseName:t,collectionName:he,schema:xn(ee,le),options:{},idleQueue:n}),r.createKeyObjectStorageInstance({databaseName:t,collectionName:Is(he),options:{},idleQueue:n})]);case 8:return Ae=(Se=Re.sent)[0],be=Se[1],Re.next=13,Promise.all([Ae.remove(),be.remove()]);case 13:case"end":return Re.stop()}},z)}));return function(z){return U.apply(this,arguments)}}()));case 9:return C.abrupt("return",Promise.all([i.internalStore.remove(),i.localDocumentsStore.remove()]));case 10:case"end":return C.stop()}},e)})),vc.apply(this,arguments)}var gh={RxSchema:qn.prototype,Crypter:Au.prototype,RxDocument:Qr,RxQuery:nu.prototype,RxCollection:iu.prototype,RxDatabase:au.prototype},gc=new Set;function js(e){if(tr("preAddRxPlugin",{plugin:e,plugins:gc}),!gc.has(e)){if(gc.add(e),!e.rxdb)throw Wt("PL1",{plugin:e});e.prototypes&&Object.entries(e.prototypes).forEach(function(t){return(0,t[1])(gh[t[0]])}),e.overwritable&&Object.assign(fr,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(function(t){return vn[t[0]].push(t[1])})}}var yc,_c,bc,Ul={UT1:"given name is no string or empty",UT2:"collection- and database-names must match the regex to be compatible with couchdb databases.\n    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'",UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",PL1:"Given plugin is not RxDB plugin. Pouchdb plugins must be added via addPouchPlugin()",PL2:"You tried importy a RxDB plugin to pouchdb. Use addRxPlugin() instead.",P1:"PouchDB.getBatch: limit must be > 2",P2:"bulkWrite() cannot be called with an empty array",P3:"bulkAddRevisions cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU7:"query must be an object",QU8:"query cannot be an array",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase.[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://pubkey.github.io/rxdb/questions-answers.html#cant-change-the-schema",DB7:"RxDatabase.addCollections(): schema encrypted but no password given",DB8:"RxDatabase.create(): A RxDatabase with the same name and adapter already exists.\nMake sure to use this combination only once or set ignoreDuplicate to true if you do this intentional",DB9:"RxDatabase.create(): Adapter not added. Use RxDB.plugin(require('pouchdb-adapter-[adaptername]');",DB10:"RxDatabase.create(): To use leveldown-adapters, you have to add the leveldb-plugin. Use RxDB.plugin(require('pouchdb-adapter-leveldb'));",DB11:"RxDatabase.create(): Invalid db-name, folder-paths must not have an ending slash",COL1:"RxDocument.insert() You cannot insert an existing document",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.atomicUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL19:"Document document update conflict, when changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): cant save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",AT1:"to use attachments, please define this in your schema",EN1:"password is no string",EN2:"validatePassword: min-length of password not complied",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ cant use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not useable on local documents",LD7:"Local document already exists",RC1:"Replication: already added",RC2:"RxCollection.syncCouchDB() query must be from the same RxCollection",RC3:"RxCollection.syncCouchDB() Do not use a collection's pouchdb as remote, use the collection instead",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await inital replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await inital replication if multiInstance because the replication might run on another instance",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",DEV1:"dev-mode added multiple times, this is likely because you have mixed up the import from the the plugins/core and the full RxDB",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",IM1:"InMemory: Memory-Adapter must be added. Use addPouchPlugin(require('pouchdb-adapter-memory'));",IM2:"inMemoryCollection.sync(): Do not replicate with the in-memory instance. Replicate with the parent instead",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"cannot find sub schema by key",SNH:"This should never happen"},Eh=new(Pr(Qr));function $l(){if(!bc){var t=Object.getOwnPropertyNames(Eh),r=Object.getOwnPropertyNames(Qr);bc=[].concat(t,r,["deleted","synced"])}return bc}function Sh(e){return function r(n,i){"object"==typeof n&&Object.keys(n).forEach(function(f){n.properties||function(n,i,f){if("string"==typeof n&&"object"==typeof i&&!Array.isArray(i)&&function(e){if(""!==e&&"_deleted"!==e){if(["properties","language"].includes(e))throw We("SC23",{fieldName:e});var t="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(t);if(!e.match(r))throw We("SC1",{regex:t,fieldName:e})}}(n),i.hasOwnProperty("item")&&"array"!==i.type)throw We("SC2",{fieldName:n});if(i.hasOwnProperty("required")&&"boolean"==typeof i.required)throw We("SC24",{fieldName:n});if(i.hasOwnProperty("ref"))if(Array.isArray(i.type)){if(i.type.length>2||!i.type.includes("string")||!i.type.includes("null"))throw We("SC4",{fieldName:n})}else switch(i.type){case"string":break;case"array":if(!i.items||!i.items.type||"string"!==i.items.type)throw We("SC3",{fieldName:n});break;default:throw We("SC4",{fieldName:n})}var d=f.split(".").length>=2;if(d){if(i.primary)throw We("SC6",{path:f,primary:i.primary});if(i.default)throw We("SC7",{path:f})}if(!d&&"_"===n.charAt(0)){if("_deleted"===n)return;throw We("SC8",{fieldName:n})}}(f,n[f],i);var d=i;"properties"!==f&&(d=d+"."+f),r(n[f],d)})}(e,""),!0}function zl(e){for(var t=e.split("."),r="",n=0;n<t.length;n+=1)r=r.concat("[]"!==t[n]?".properties.".concat(t[n]):".items");return bi(r)}function Ec(e){!e||Object.entries(e).forEach(function(t){var r=t[0],n=t[1];if("string"!=typeof r)throw Wt("COL14",{name:r});if(r.startsWith("_"))throw Wt("COL15",{name:r});if("function"!=typeof n)throw Wt("COL16",{name:r,type:typeof r});if(function(){if(!yc){var e=new iu,t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));yc=[].concat(t,r)}return yc}().includes(r)||$l().includes(r))throw We("COL17",{name:r})})}var Wl="^[a-z][_$a-z0-9\\-]*$",Ih=new RegExp(Wl);function Kl(e){if("string"!=typeof e||0===e.length)throw Wt("UT1",{name:e});if(mn(e))return!0;if(!e.match(Ih))throw We("UT2",{regex:Wl,givenName:e});return!0}var Rh=l(4949),Mh=l.n(Rh),Hl="dev-mode",kh={name:Hl,rxdb:!0,overwritable:{isDevMode:function(){return!0},deepFreezeWhenDevMode:function(e){return e&&Mh()(e)},tunnelErrorMessage:function(t){if(!Ul[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return Ul[t]}},hooks:{preAddRxPlugin:function(t){if(t.plugin.name===Hl)throw We("DEV1",{plugins:t.plugins})},preCreateRxSchema:function(e){if(!e.primaryKey)throw We("SC30",{schema:e});if(!e.hasOwnProperty("properties"))throw We("SC29",{schema:e});if(e.properties._rev)throw We("SC10",{schema:e});if(!e.hasOwnProperty("version")||"number"!=typeof e.version||e.version<0)throw We("SC11",{version:e.version});if(Sh(e),function(e){if(!e.primaryKey)throw We("SC30",{schema:e});function t(d){if(!d)throw We("SC33",{schema:e});var C=d.type;if(!C||!["string","number","integer"].includes(C))throw We("SC32",{schema:e,args:{schemaPart:d}})}if("string"==typeof e.primaryKey)t(e.properties[e.primaryKey]);else{var i=e.primaryKey;t(Mr(e,i.key)),i.fields.forEach(function(d){t(Mr(e,d))})}}(e),Object.keys(e.properties).forEach(function(t){var r=e.properties[t];if(t===e.primaryKey){if(e.indexes&&e.indexes.includes(t))throw We("SC13",{value:r,schema:e});if(r.unique)throw We("SC14",{value:r,schema:e});if(e.encrypted&&e.encrypted.includes(t))throw We("SC15",{value:r,schema:e});if("string"!==r.type)throw We("SC16",{value:r,schema:e})}if($l().includes(t))throw We("SC17",{key:t,schema:e})}),e.indexes){if(!Array.isArray(e.indexes))throw We("SC18",{indexes:e.indexes,schema:e});e.indexes.forEach(function(t){if("string"!=typeof t&&!Array.isArray(t))throw We("SC19",{index:t,schema:e});if(Array.isArray(t))for(var r=0;r<t.length;r+=1)if("string"!=typeof t[r])throw We("SC20",{index:t,schema:e})})}if(Object.keys(e).includes("compoundIndexes"))throw We("SC25",{schema:e});Object.keys(Sr(e)).map(function(t){var r=t.split(".");return r.pop(),r.join(".")}).filter(function(t){return""!==t}).filter(function(t,r,n){return n.indexOf(t)===r}).filter(function(t){return!!ke().get(e,t).index}).forEach(function(t){throw We("SC26",{index:bi(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})}),(e.indexes||[]).reduce(function(t,r){return Array.isArray(r)?t.concat(r):t.push(r),t},[]).filter(function(t,r,n){return n.indexOf(t)===r}).map(function(t){var r=zl(t),n=ke().get(e,r);if(!n||"object"!=typeof n)throw We("SC21",{index:t,schema:e});return{indexPath:t,schemaObj:n}}).filter(function(t){return"string"!==t.schemaObj.type&&"integer"!==t.schemaObj.type&&"number"!==t.schemaObj.type}).forEach(function(t){throw We("SC22",{key:t.indexPath,type:t.schemaObj.type,schema:e})}),Object.keys(Sr(e)).map(function(t){var r=t.split(".");return r.pop(),r.join(".")}).filter(function(t){return""!==t&&"attachments"!==t}).filter(function(t,r,n){return n.indexOf(t)===r}).filter(function(t){return!!ke().get(e,t).encrypted}).forEach(function(t){throw We("SC27",{index:bi(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})}),e.encrypted&&e.encrypted.forEach(function(t){var r=zl(t),n=ke().get(e,r);if(!n||"object"!=typeof n)throw We("SC28",{field:t,schema:e})})},preCreateRxDatabase:function(t){!function(e){if(Kl(e.name),mn(e.name)&&(e.name.endsWith("/")||e.name.endsWith("\\")))throw We("DB11",{name:e.name})}(t)},preCreateRxCollection:function(t){if(function(e){if(function(){if(!_c){var e=new au("pseudoInstance","memory"),t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));_c=[].concat(t,r),e.destroy()}return _c}().includes(e.name))throw We("DB5",{name:e.name});Kl(e.name)}(t),"_"===t.name.charAt(0))throw We("DB2",{name:t.name});if(!t.schema)throw We("DB4",{name:t.name,args:t})},preCreateRxQuery:function(t){!function(e){if("[object Object]"!==Object.prototype.toString.call(e.queryObj))throw Wt("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj});var r=["selector","limit","skip","sort"];Object.keys(e.queryObj).forEach(function(n){if(!r.includes(n))throw Wt("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj,key:n})})}(t)},createRxCollection:function(t){Ec(t.statics),Ec(t.methods),Ec(t.attachments),t.schema&&t.migrationStrategies&&function(e,t){if("object"!=typeof t||Array.isArray(t))throw Wt("COL11",{schema:e});var r=function(e){var r=0;return new Array(e.version?e.version:0).fill(0).map(function(){return r++})}(e);if(r.length!==Object.keys(t).length)throw We("COL12",{have:Object.keys(t),should:r});r.map(function(n){return{v:n,s:t[n+1]}}).filter(function(n){return"function"!=typeof n.s}).forEach(function(n){throw Wt("COL13",{version:n.v,type:typeof n,schema:e})})}(t.schema,t.migrationStrategies)}}},Lh=l(7466),Vl=l.n(Lh),Bh=l(4384),jh=function(t){return function(e,t){return Vl().encrypt(e,t).toString()}(t,this.password)},Uh=function(t){var r=function(e,t){return Vl().decrypt(e,t).toString(Bh)}(t,this.password);return r};function wc(){return wc=(0,nt.Z)(Be().mark(function e(t){var r,n,i,f;return Be().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(t.password){C.next=2;break}return C.abrupt("return",tn);case 2:return r=Wi(t.password),n="pwHash",C.next=6,Oo(t.localDocumentsStore,n);case 6:if(i=C.sent){C.next=14;break}return f={_id:n,value:r,_attachments:{}},C.next=11,t.localDocumentsStore.bulkWrite([{document:f}]);case 11:case 20:return C.abrupt("return",!0);case 14:if(r===i.value){C.next=20;break}return C.next=17,t.destroy();case 17:throw We("DB1",{passwordHash:Wi(t.password),existingPasswordHash:i.value});case 21:case"end":return C.stop()}},e)})),wc.apply(this,arguments)}var Wh={Crypter:function(t){t._encryptString=jh,t._decryptString=Uh}},Kh={validatePassword:function(t){if(t&&"string"!=typeof t)throw Wt("EN1",{password:t});if(t&&t.length<8)throw We("EN2",{minPassLength:8,password:t})}},Hh={name:"encryption",rxdb:!0,prototypes:Wh,overwritable:Kh,hooks:{createRxDatabase:function(t){return function(e){return wc.apply(this,arguments)}(t)}}},Vh=("undefined"!=typeof AbortController&&AbortController,fetch),cu=Headers;function Cr(e,t){if(e===t)return 0;e=ts(e),t=ts(t);var r=Dc(e),n=Dc(t);if(r-n!=0)return r-n;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var i=Cr(e[n],t[n]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var r=Object.keys(e),n=Object.keys(t),i=Math.min(r.length,n.length),f=0;f<i;f++){var d=Cr(r[f],n[f]);if(0!==d||0!==(d=Cr(e[r[f]],t[n[f]])))return d}return r.length===n.length?0:r.length>n.length?1:-1}(e,t)}function ts(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var n=0;n<r;n++)e[n]=ts(t[n])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var f=t[i];void 0!==f&&(e[i]=ts(f))}}}return e}function _n(e){return Dc(e=ts(e))+""+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=e<0,i=n?"0":"2",d=function(e,t,r){var n=function(e,t,r){for(var n="",i=3-e.length;n.length<i;)n+="0";return n}(e);return n+e}(((n?-r:r)- -324).toString());i+=""+d;var C=Math.abs(parseFloat(t[0]));n&&(C=10-C);var U=C.toFixed(20);return i+""+U.replace(/\.?0+$/,"")}(e);case"string":return e.replace(/\u0002/g,"\x02\x02").replace(/\u0001/g,"\x01\x02").replace(/\u0000/g,"\x01\x01");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),n=-1,i=r.length,f="";if(t)for(;++n<i;)f+=_n(r[n]);else for(;++n<i;){var d=r[n];f+=_n(d)+_n(e[d])}return f}return""}(e)+"\0"}function Yh(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var f="0"===e[t];t++;var d="",C=e.substring(t,t+3),U=parseInt(C,10)+-324;for(f&&(U=-U),t+=3;;){var z=e[t];if("\0"===z)break;d+=z,t++}n=1===(d=d.split(".")).length?parseInt(d,10):parseFloat(d[0]+"."+d[1]),f&&(n-=10),0!==U&&(n=parseFloat(n+"e"+U))}return{num:n,length:t-r}}function Jh(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var i=n.element,f=n.index;Array.isArray(i)?i.push(r):f===e.length-2?i[e.pop()]=r:e.push(r)}}function Dc(e){var r=["boolean","number","string","object"].indexOf(typeof e);return~r?null===e?1:Array.isArray(e)?5:r<3?r+2:r+3:Array.isArray(e)?5:void 0}function Ac(e,t){for(var r=e,n=0,i=t.length;n<i&&(r=r[t[n]]);n++);return r}function np(e,t,r){for(var n=0,i=t.length;n<i-1;n++){var f=t[n];e=e[f]=e[f]||{}}e[t[i-1]]=r}function Oc(e,t){return e<t?-1:e>t?1:0}function Ho(e){for(var t=[],r="",n=0,i=e.length;n<i;n++){var f=e[n];"."===f?n>0&&"\\"===e[n-1]?r=r.substring(0,r.length-1)+".":(t.push(r),r=""):r+=f}return t.push(r),t}var ip=["$or","$nor","$not"];function Zl(e){return ip.indexOf(e)>-1}function Yr(e){return Object.keys(e)[0]}function Pc(e){return e[Yr(e)]}function Vo(e){var t={};return e.forEach(function(r){Object.keys(r).forEach(function(n){var i=r[n];if("object"!=typeof i&&(i={$eq:i}),Zl(n))t[n]=i instanceof Array?i.map(function(d){return Vo([d])}):Vo([i]);else{var f=t[n]=t[n]||{};Object.keys(i).forEach(function(d){var C=i[d];return"$gt"===d||"$gte"===d?function(e,t,r){void 0===r.$eq&&(void 0!==r.$gte?"$gte"===e?t>r.$gte&&(r.$gte=t):t>=r.$gte&&(delete r.$gte,r.$gt=t):void 0!==r.$gt?"$gte"===e?t>r.$gt&&(delete r.$gt,r.$gte=t):t>r.$gt&&(r.$gt=t):r[e]=t)}(d,C,f):"$lt"===d||"$lte"===d?function(e,t,r){void 0===r.$eq&&(void 0!==r.$lte?"$lte"===e?t<r.$lte&&(r.$lte=t):t<=r.$lte&&(delete r.$lte,r.$lt=t):void 0!==r.$lt?"$lte"===e?t<r.$lt&&(delete r.$lt,r.$lte=t):t<r.$lt&&(r.$lt=t):r[e]=t)}(d,C,f):"$ne"===d?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(C,f):"$eq"===d?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(C,f):void(f[d]=C)})}})}),t}function Yl(e){for(var t in e){if(Array.isArray(e))for(var r in e)e[r].$and&&(e[r]=Vo(e[r].$and));var n=e[t];"object"==typeof n&&Yl(n)}return e}function Jl(e,t){for(var r in e){"$and"===r&&(t=!0);var n=e[r];"object"==typeof n&&(t=Jl(n,t))}return t}function Ic(e){var t=qt(e),r=!1;Jl(t,!1)&&("$and"in(t=Yl(t))&&(t=Vo(t.$and)),r=!0),["$or","$nor"].forEach(function(C){C in t&&t[C].forEach(function(U){for(var z=Object.keys(U),X=0;X<z.length;X++){var te=z[X],ce=U[te];("object"!=typeof ce||null===ce)&&(U[te]={$eq:ce})}})}),"$not"in t&&(t.$not=Vo([t.$not]));for(var n=Object.keys(t),i=0;i<n.length;i++){var f=n[i],d=t[f];"object"!=typeof d||null===d?d={$eq:d}:"$ne"in d&&!r&&(d.$ne=[d.$ne]),t[f]=d}return t}function lu(e,t,r){if(e=e.filter(function(d){return Us(d.doc,t.selector,r)}),t.sort){var n=function(e){function t(r){return e.map(function(n){var f=Ho(Yr(n));return Ac(r,f)})}return function(r,n){var d=Cr(t(r.doc),t(n.doc));return 0!==d?d:Oc(r.doc._id,n.doc._id)}}(t.sort);e=e.sort(n),"string"!=typeof t.sort[0]&&"desc"===Pc(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0;e=e.slice(i,("limit"in t?t.limit:e.length)+i)}return e}function Us(e,t,r){return r.every(function(n){var i=t[n],f=Ho(n),d=Ac(e,f);return Zl(n)?function(e,t,r){return"$or"===e?t.some(function(n){return Us(r,n,Object.keys(n))}):"$not"===e?!Us(r,t,Object.keys(t)):!t.find(function(n){return Us(r,n,Object.keys(n))})}(n,i,e):Tc(i,e,f,d)})}function Tc(e,t,r,n){return!e||("object"==typeof e?Object.keys(e).every(function(i){return function(e,t,r,n,i){if(!ql[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return ql[e](t,r,n,i)}(i,t,e[i],r,n)}):e===n)}function Go(e){return null!=e}function rs(e){return void 0!==e}function Xl(e,t){return t.some(function(r){return e instanceof Array?e.indexOf(r)>-1:e===r})}var ql={$elemMatch:function(e,t,r,n){return!(!Array.isArray(n)||0===n.length)&&n.some("object"==typeof n[0]?function(i){return Us(i,t,Object.keys(t))}:function(i){return Tc(t,e,r,i)})},$allMatch:function(e,t,r,n){return!(!Array.isArray(n)||0===n.length)&&n.every("object"==typeof n[0]?function(i){return Us(i,t,Object.keys(t))}:function(i){return Tc(t,e,r,i)})},$eq:function(e,t,r,n){return rs(n)&&0===Cr(n,t)},$gte:function(e,t,r,n){return rs(n)&&Cr(n,t)>=0},$gt:function(e,t,r,n){return rs(n)&&Cr(n,t)>0},$lte:function(e,t,r,n){return rs(n)&&Cr(n,t)<=0},$lt:function(e,t,r,n){return rs(n)&&Cr(n,t)<0},$exists:function(e,t,r,n){return t?rs(n):!rs(n)},$mod:function(e,t,r,n){return Go(n)&&function(e,t){var r=t[0],n=t[1];if(0===r)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(r,10)!==r)throw new Error("Divisor is not an integer");if(parseInt(n,10)!==n)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%r===n}(n,t)},$ne:function(e,t,r,n){return t.every(function(i){return 0!==Cr(n,i)})},$in:function(e,t,r,n){return Go(n)&&Xl(n,t)},$nin:function(e,t,r,n){return Go(n)&&!Xl(n,t)},$size:function(e,t,r,n){return Go(n)&&function(e,t){return e.length===t}(n,t)},$all:function(e,t,r,n){return Array.isArray(n)&&function(e,t){return t.every(function(r){return e.indexOf(r)>-1})}(n,t)},$regex:function(e,t,r,n){return Go(n)&&function(e,t){return new RegExp(t).test(e)}(n,t)},$type:function(e,t,r,n){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(n,t)}};function bp(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter)return t(new Error('selector invalid for filter "'+("string"==typeof e.filter?e.filter:"function")+'"'));t()}function Ep(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=fs(e.view):e.filter=fs(e.filter))}function wp(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!Dr(e.db)}function Sp(e,t){var r=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var n=je(G,"`view` filter parameter not found or invalid.");return r(n)}var i=ls(t.view);e.db.get("_design/"+i[0],function(d,C){if(e.isCancelled)return r(null,{status:"cancelled"});if(d)return r(Ze(d));var U=C&&C.views&&C.views[i[1]]&&C.views[i[1]].map;if(!U)return r(je(o,C.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=function(e){return to(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}(U),e.doChanges(t)})}else if(t.selector)t.filter=function(d){return function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=lu([{doc:e}],{selector:t=Ic(t)},Object.keys(t));return n&&1===n.length}(d,t.selector)},e.doChanges(t);else{var f=ls(t.filter);e.db.get("_design/"+f[0],function(d,C){if(e.isCancelled)return r(null,{status:"cancelled"});if(d)return r(Ze(d));var U=C&&C.filters&&C.filters[f[1]];if(!U)return r(je(o,C&&C.filters?"missing json key: "+f[1]:"missing json key: filters"));t.filter=function(e){return to('"use strict";\nreturn '+e+";",{})}(U),e.doChanges(t)})}}function Qo(e,t,r){et().call(this);var n=this;this.db=e;var i=(t=t?qt(t):{}).complete=li(function(C,U){C?function(e,t){return"listenerCount"in e?e.listenerCount(t):et().listenerCount(e,t)}(n,"error")>0&&n.emit("error",C):n.emit("complete",U),n.removeAllListeners(),e.removeListener("destroyed",f)});function f(){n.cancel()}r&&(n.on("complete",function(C){r(null,C)}),n.on("error",r)),e.once("destroyed",f),t.onChange=function(C,U,z){n.isCancelled||function(e,t,r,n){try{e.emit("change",t,r,n)}catch(i){it("error",'Error in .on("change", function):',i)}}(n,C,U,z)};var d=new Promise(function(C,U){t.complete=function(z,X){z?U(z):C(X)}});n.once("cancel",function(){e.removeListener("destroyed",f),t.complete(null,{status:"cancelled"})}),this.then=d.then.bind(d),this.catch=d.catch.bind(d),this.then(function(C){i(null,C)},i),e.taskqueue.isReady?n.validateChanges(t):e.taskqueue.addTask(function(C){C?t.complete(C):n.isCancelled?n.emit("cancel"):n.validateChanges(t)})}function Op(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=Sn(t.rev_tree).map(function(f){return{rev:f.rev}}));var i={id:t.id,changes:n,doc:e};return en(t,e._rev)&&(i.deleted=!0),r.conflicts&&(i.doc._conflicts=pi(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function ef(e,t){return e<t?-1:e>t?1:0}function Rc(e,t){return function(r,n){r||n[0]&&n[0].error?((r=r||n[0]).docId=t,e(r)):e(null,n.length?n[0]:n)}}function Ip(e,t){var r=ef(e._id,t._id);return 0!==r?r:ef(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function tf(e){var t=e._compactionQueue[0],r=t.opts,n=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(r.last_seq=i.last_seq),e._compact(r,function(f,d){f?n(f):n(null,d),R()(function(){e._compactionQueue.shift(),e._compactionQueue.length&&tf(e)})})})}function Jt(){for(var e in et().call(this),Jt.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function Zo(){this.isReady=!1,this.failed=!1,this.queue=[]}function Dt(e,t){if(!(this instanceof Dt))return new Dt(e,t);var r=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=qt(t),r.auto_compaction=t.auto_compaction,r.prefix=Dt.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var i=function(e,t){var r=e.match(/([a-z-]*):\/\/(.*)/);if(r)return{name:/https?/.test(r[1])?r[1]+"://"+r[2]:r[2],adapter:r[1]};var n=Dt.adapters,i=Dt.preferredAdapters,f=Dt.prefix,d=t.adapter;if(!d)for(var C=0;C<i.length&&"idb"===(d=i[C])&&"websql"in n&&se()&&localStorage["_pouch__websqldb_"+f+e];++C)it("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var U=n[d];return{name:U&&"use_prefix"in U&&!U.use_prefix?e:f+e,adapter:d}}((t.prefix||"")+e,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,r.name=e,r._adapter=t.adapter,Dt.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Dt.adapters[t.adapter]||!Dt.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);Jt.call(r),r.taskqueue=new Zo,r.adapter=t.adapter,Dt.adapters[t.adapter].call(r,t,function(f){if(f)return r.taskqueue.fail(f);(function(e){function t(n){e.removeListener("closed",r),n||e.constructor.emit("destroyed",e.name)}function r(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",r),e.constructor.emit("ref",e)})(r),r.emit("created",r),Dt.emit("created",r.name),r.taskqueue.ready(r)})}I()(Qo,et()),Qo.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Qo.prototype.validateChanges=function(e){var t=e.complete,r=this;Dt._changesFilterPlugin?Dt._changesFilterPlugin.validate(e,function(n){if(n)return t(n);r.doChanges(e)}):r.doChanges(e)},Qo.prototype.doChanges=function(e){var t=this,r=e.complete;if("live"in(e=qt(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Op,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(Dt._changesFilterPlugin){if(Dt._changesFilterPlugin.normalize(e),Dt._changesFilterPlugin.shouldFilter(this,e))return Dt._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(f){f in e&&it("warn",'The "'+f+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var i=t.cancel;t.cancel=p()(function(f){n.cancel(),i.apply(this,f)})}}else this.db.info().then(function(f){t.isCancelled?r(null,{status:"cancelled"}):(e.since=f.update_seq,t.doChanges(e))},r)},I()(Jt,et()),Jt.prototype.post=nr("post",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(je(q));this.bulkDocs({docs:[e]},t,Rc(r,e._id))}),Jt.prototype.put=nr("put",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(je(q));if(Ys(e._id),hn(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,r):this._putLocal(e,r);var d,C,z,X,n=this;function f(d){"function"==typeof n._put&&!1!==t.new_edits?n._put(e,t,d):n.bulkDocs({docs:[e]},t,Rc(d,e._id))}t.force&&e._rev?(C=(d=e._rev.split("-"))[1],z=parseInt(d[0],10)+1,X=ro(),e._revisions={start:z,ids:[X,C]},e._rev=z+"-"+X,t.new_edits=!1,f(function(d){r(d,d?null:{ok:!0,id:e._id,rev:e._rev})})):f(r)}),Jt.prototype.putAttachment=nr("putAttachment",function(e,t,r,n,i){var f=this;function d(C){var U="_rev"in C?parseInt(C._rev,10):0;return C._attachments=C._attachments||{},C._attachments[t]={content_type:i,data:n,revpos:++U},f.put(C)}return"function"==typeof i&&(i=n,n=r,r=null),void 0===i&&(i=n,n=r,r=null),i||it("warn","Attachment",t,"on document",e,"is missing content_type"),f.get(e).then(function(C){if(C._rev!==r)throw je(v);return d(C)},function(C){if(C.reason===o.message)return d({_id:e});throw C})}),Jt.prototype.removeAttachment=nr("removeAttachment",function(e,t,r,n){var i=this;i.get(e,function(f,d){if(f)n(f);else{if(d._rev===r)return d._attachments?(delete d._attachments[t],0===Object.keys(d._attachments).length&&delete d._attachments,void i.put(d,n)):n();n(je(v))}})}),Jt.prototype.remove=nr("remove",function(e,t,r,n){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(i=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),(r=r||{}).was_delete=!0;var f={_id:i._id,_rev:i._rev||r.rev,_deleted:!0};if(hn(f._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,n);this.bulkDocs({docs:[f]},r,Rc(n,f._id))}),Jt.prototype.revsDiff=nr("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={});var n=Object.keys(e);if(!n.length)return r(null,{});var i=0,f=new S;function d(U,z){f.has(U)||f.set(U,{missing:[]}),f.get(U).missing.push(z)}n.map(function(U){this._getRevisionTree(U,function(z,X){if(z&&404===z.status&&"missing"===z.message)f.set(U,{missing:e[U]});else{if(z)return r(z);!function(U,z){var X=e[U].slice(0);sr(z,function(te,ce,Ee,he,ee){var le=ce+"-"+Ee,Se=X.indexOf(le);-1!==Se&&(X.splice(Se,1),"available"!==ee.status&&d(U,le))}),X.forEach(function(te){d(U,te)})}(U,X)}if(++i===n.length){var te={};return f.forEach(function(ce,Ee){te[Ee]=ce}),r(null,te)}})},this)}),Jt.prototype.bulkGet=nr("bulkGet",function(e,t){Oe(this,e,t)}),Jt.prototype.compactDocument=nr("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(i,f){if(i)return r(i);var d=function(e){var t={},r=[];return sr(e,function(n,i,f,d){var C=i+"-"+f;return n&&(t[C]=0),void 0!==d&&r.push({from:d,to:C}),C}),r.reverse(),r.forEach(function(n){t[n.from]=void 0===t[n.from]?1+t[n.to]:Math.min(t[n.from],1+t[n.to])}),t}(f),C=[],U=[];Object.keys(d).forEach(function(z){d[z]>t&&C.push(z)}),sr(f,function(z,X,te,ce,Ee){var he=X+"-"+te;"available"===Ee.status&&-1!==C.indexOf(he)&&U.push(he)}),n._doCompaction(e,U,r)})}),Jt.prototype.compact=nr("compact",function(e,t){"function"==typeof e&&(t=e,e={});var r=this;e=e||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:e,callback:t}),1===r._compactionQueue.length&&tf(r)}),Jt.prototype._compact=function(e,t){var r=this,i=[];r.changes({return_docs:!1,last_seq:e.last_seq||0}).on("change",function(C){i.push(r.compactDocument(C.id,0))}).on("complete",function(C){var U=C.last_seq;Promise.all(i).then(function(){return $n(r,"_local/compaction",function(X){return(!X.last_seq||X.last_seq<U)&&(X.last_seq=U,X)})}).then(function(){t(null,{ok:!0})}).catch(t)}).on("error",t)},Jt.prototype.get=nr("get",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(je(h));if(hn(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var n=[],i=this;function f(){var U=[],z=n.length;if(!z)return r(null,U);n.forEach(function(X){i.get(e,{rev:X,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(te,ce){if(te)U.push({missing:X});else{for(var Ee,he=0,ee=U.length;he<ee;he++)if(U[he].ok&&U[he].ok._rev===ce._rev){Ee=!0;break}Ee||U.push({ok:ce})}--z||r(null,U)})})}if(!t.open_revs)return this._get(e,t,function(U,z){if(U)return U.docId=e,r(U);var X=z.doc,te=z.metadata,ce=z.ctx;if(t.conflicts){var Ee=pi(te);Ee.length&&(X._conflicts=Ee)}if(en(te,X._rev)&&(X._deleted=!0),t.revs||t.revs_info){for(var he=X._rev.split("-"),ee=parseInt(he[0],10),le=he[1],Se=no(te.rev_tree),Ae=null,be=0;be<Se.length;be++){var xe=Se[be],Re=xe.ids.map(function(Nt){return Nt.id}).indexOf(le);(Re===ee-1||!Ae&&-1!==Re)&&(Ae=xe)}if(!Ae)return(U=new Error("invalid rev tree")).docId=e,r(U);var ze=Ae.ids.map(function(Nt){return Nt.id}).indexOf(X._rev.split("-")[1])+1;if(Ae.ids.splice(ze,Ae.ids.length-ze),Ae.ids.reverse(),t.revs&&(X._revisions={start:Ae.pos+Ae.ids.length-1,ids:Ae.ids.map(function(Nt){return Nt.id})}),t.revs_info){var bt=Ae.pos+Ae.ids.length;X._revs_info=Ae.ids.map(function(Nt){return{rev:--bt+"-"+Nt.id,status:Nt.opts.status}})}}if(t.attachments&&X._attachments){var ft=X._attachments,Pt=Object.keys(ft).length;if(0===Pt)return r(null,X);Object.keys(ft).forEach(function(Nt){this._getAttachment(X._id,Nt,ft[Nt],{rev:X._rev,binary:t.binary,ctx:ce},function(St,kt){var $t=X._attachments[Nt];$t.data=kt,delete $t.stub,delete $t.length,--Pt||r(null,X)})},i)}else{if(X._attachments)for(var Ut in X._attachments)X._attachments.hasOwnProperty(Ut)&&(X._attachments[Ut].stub=!0);r(null,X)}});if("all"===t.open_revs)this._getRevisionTree(e,function(U,z){if(U)return r(U);n=Sn(z).map(function(X){return X.rev}),f()});else{if(!Array.isArray(t.open_revs))return r(je(ge,"function_clause"));n=t.open_revs;for(var d=0;d<n.length;d++){var C=n[d];if("string"!=typeof C||!/^\d+-/.test(C))return r(je(_e))}f()}}),Jt.prototype.getAttachment=nr("getAttachment",function(e,t,r,n){var i=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(f,d){return f?n(f):d.doc._attachments&&d.doc._attachments[t]?(r.ctx=d.ctx,r.binary=!0,void i._getAttachment(e,t,d.doc._attachments[t],r,n)):n(je(o))})}),Jt.prototype.allDocs=nr("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(n){return n in e})[0];if(r)return void t(je($,"Query parameter `"+r+"` is not compatible with multi-get"));if(!Dr(this)&&(function(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)}),Jt.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new Qo(this,e,t)},Jt.prototype.close=nr("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),Jt.prototype.info=nr("info",function(e){var t=this;this._info(function(r,n){if(r)return e(r);n.db_name=n.db_name||t.name,n.auto_compaction=!(!t.auto_compaction||Dr(t)),n.adapter=t.adapter,e(null,n)})}),Jt.prototype.id=nr("id",function(e){return this._id(e)}),Jt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Jt.prototype.bulkDocs=nr("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(je(c));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(je(q));var i;if(e.docs.forEach(function(C){C._attachments&&Object.keys(C._attachments).forEach(function(U){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(U),C._attachments[U].content_type||it("warn","Attachment",U,"on document",C._id,"is missing content_type")})}),i)return r(je(G,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var f=this;!t.new_edits&&!Dr(f)&&e.docs.sort(Ip),function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),i=0;i<n.length;i++){var f=n[i];r._attachments[f]=En(r._attachments[f],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var d=e.docs.map(function(C){return C._id});return this._bulkDocs(e,t,function(C,U){if(C)return r(C);if(t.new_edits||(U=U.filter(function(te){return te.error})),!Dr(f))for(var z=0,X=U.length;z<X;z++)U[z].id=U[z].id||d[z];r(null,U)})}),Jt.prototype.registerDependentDatabase=nr("registerDependentDatabase",function(e,t){var r=new this.constructor(e,this.__opts);$n(this,"_local/_pouch_dependentDbs",function(i){return i.dependentDbs=i.dependentDbs||{},!i.dependentDbs[e]&&(i.dependentDbs[e]=!0,i)}).then(function(){t(null,{db:r})}).catch(t)}),Jt.prototype.destroy=nr("destroy",function(e,t){"function"==typeof e&&(t=e,e={});var r=this,n=!("use_prefix"in r)||r.use_prefix;function i(){r._destroy(e,function(f,d){if(f)return t(f);r._destroyed=!0,r.emit("destroyed"),t(null,d||{ok:!0})})}if(Dr(r))return i();r.get("_local/_pouch_dependentDbs",function(f,d){if(f)return 404!==f.status?t(f):i();var U=r.constructor,z=Object.keys(d.dependentDbs).map(function(X){var te=n?X.replace(new RegExp("^"+U.prefix),""):X;return new U(te,r.__opts).destroy()});Promise.all(z).then(i,t)})}),Zo.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Zo.prototype.fail=function(e){this.failed=e,this.execute()},Zo.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Zo.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},I()(Dt,Jt),Dt.adapters={},Dt.preferredAdapters=[],Dt.prefix="_pouch_";var rf=new(et());(function(e){Object.keys(et().prototype).forEach(function(r){"function"==typeof et().prototype[r]&&(e[r]=rf[r].bind(rf))});var t=e._destructionListeners=new S;e.on("ref",function(n){t.has(n.name)||t.set(n.name,[]),t.get(n.name).push(n)}),e.on("unref",function(n){if(t.has(n.name)){var i=t.get(n.name),f=i.indexOf(n);f<0||(i.splice(f,1),i.length>1?t.set(n.name,i):t.delete(n.name))}}),e.on("destroyed",function(n){if(t.has(n)){var i=t.get(n);t.delete(n),i.forEach(function(f){f.emit("destroyed",!0)})}})})(Dt),Dt.adapter=function(e,t,r){t.valid()&&(Dt.adapters[e]=t,r&&Dt.preferredAdapters.push(e))},Dt.plugin=function(e){if("function"==typeof e)e(Dt);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){Dt.prototype[t]=e[t]})}return this.__defaults&&(Dt.__defaults=Un({},this.__defaults)),Dt},Dt.defaults=function(e){function t(r,n){if(!(this instanceof t))return new t(r,n);n=n||{},r&&"object"==typeof r&&(r=(n=r).name,delete n.name),n=Un({},t.__defaults,n),Dt.call(this,r,n)}return I()(t,Dt),t.preferredAdapters=Dt.preferredAdapters.slice(),Object.keys(Dt).forEach(function(r){r in t||(t[r]=Dt[r])}),t.__defaults=Un({},this.__defaults,e),t},Dt.fetch=function(e,t){return Vh(e,t)},Dt.plugin(function(e){e._changesFilterPlugin={validate:bp,normalize:Ep,shouldFilter:wp,filter:Sp}}),Dt.version="7.2.2";const fu=Dt;function ns(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,ns)}catch{}}function Mc(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Mc)}catch{}}function xc(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,xc)}catch{}}function nf(e,t){return t&&e.then(function(r){R()(function(){t(null,r)})},function(r){R()(function(){t(r)})}),e}function kc(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}}function sf(e){var t=new w(e),r=new Array(t.size),n=-1;return t.forEach(function(i){r[++n]=i}),r}function Lc(e){var t=new Array(e.size),r=-1;return e.forEach(function(n,i){t[++r]=i}),t}function Yo(){this.promise=new Promise(function(e){e()})}function af(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function uf(e,t,r,n,i,f){var C,d=function(e,t){return af(e)+af(t)+"undefined"}(r,n);if(!i&&(C=e._cachedViews=e._cachedViews||{})[d])return C[d];var U=e.info().then(function(z){var X=z.db_name+"-mrview-"+(i?"temp":ki(d));return $n(e,"_local/"+f,function(ce){ce.views=ce.views||{};var Ee=t;-1===Ee.indexOf("/")&&(Ee=t+"/"+t);var he=ce.views[Ee]=ce.views[Ee]||{};if(!he[X])return he[X]=!0,ce}).then(function(){return e.registerDependentDatabase(X).then(function(ce){var Ee=ce.db;Ee.auto_compaction=!0;var he={name:X,db:Ee,sourceDB:e,adapter:e.adapter,mapFun:r,reduceFun:n};return he.db.get("_local/lastSeq").catch(function(ee){if(404!==ee.status)throw ee}).then(function(ee){return he.seq=ee?ee.seq:0,C&&he.db.once("destroyed",function(){delete C[d]}),he})})})});return C&&(C[d]=U),U}I()(ns,Error),I()(Mc,Error),I()(xc,Error),Yo.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},Yo.prototype.finish=function(){return this.promise};var cf={},lf=new Yo;function Bc(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function df(e,t){try{e.emit("error",t)}catch{it("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),it("error",t)}}function hf(e){return(e=qt(e)).index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function Jo(e,t,r,n){var i,f;r.headers=new cu({"Content-type":"application/json"}),e.fetch(t,r).then(function(d){return i=d.status,f=d.ok,d.json()}).then(function(d){if(f)n(null,d);else{d.status=i;var C=Ze(d);n(C)}}).catch(n)}function Wp(e,t,r){t=hf(t),Jo(e,"_index",{method:"POST",body:JSON.stringify(t)},r)}function Kp(e,t,r){Jo(e,"_find",{method:"POST",body:JSON.stringify(t)},r)}function Hp(e,t,r){Jo(e,"_explain",{method:"POST",body:JSON.stringify(t)},r)}function Vp(e,t){Jo(e,"_index",{method:"GET"},t)}function Gp(e,t,r){var n=t.ddoc,f=t.name;return n?f?void Jo(e,"_index/"+[n,t.type||"json",f].map(encodeURIComponent).join("/"),{method:"DELETE"},r):r(new Error("you must provide an index's name")):r(new Error("you must provide an index's ddoc"))}function pf(e){return function(){for(var t=arguments.length,r=new Array(t),n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}}function Xo(e){return pf(function(t){var r=t.pop(),n=e.apply(this,t);return function(e,t){e.then(function(r){R()(function(){t(null,r)})},function(r){R()(function(){t(r)})})}(n,r),n})}var Fc=pf(function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?t=t.concat(Fc.apply(null,i)):t.push(i)}return t});function Nc(e){for(var t={},r=0,n=e.length;r<n;r++)t=Un(t,e[r]);return t}function mf(e,t){for(var r=0,n=Math.min(e.length,t.length);r<n;r++)if(e[r]!==t[r])return!1;return!0}function vf(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var lm=function(e,t,r,n){function i(Ie,Me,Ne){try{Me(Ne)}catch(Je){df(Ie,Je)}}function f(Ie,Me,Ne,Je,He){try{return{output:Me(Ne,Je,He)}}catch(qe){return df(Ie,qe),{error:qe}}}function d(Ie,Me){var Ne=Cr(Ie.key,Me.key);return 0!==Ne?Ne:Cr(Ie.value,Me.value)}function C(Ie,Me,Ne){return Ne=Ne||0,"number"==typeof Me?Ie.slice(Ne,Me+Ne):Ne>0?Ie.slice(Ne):Ie}function U(Ie){var Me=Ie.value;return Me&&"object"==typeof Me&&Me._id||Ie.id}function X(Ie){return function(Me){return Ie.include_docs&&Ie.attachments&&Ie.binary&&function(Ie){Ie.rows.forEach(function(Me){var Ne=Me.doc&&Me.doc._attachments;!Ne||Object.keys(Ne).forEach(function(Je){var He=Ne[Je];Ne[Je].data=Ue(He.data,He.content_type)})})}(Me),Me}}function te(Ie,Me,Ne,Je){var He=Me[Ie];void 0!==He&&(Je&&(He=encodeURIComponent(JSON.stringify(He))),Ne.push(Ie+"="+He))}function ce(Ie){if(void 0!==Ie){var Me=Number(Ie);return isNaN(Me)||Me!==parseInt(Ie,10)?Ie:Me}}function ee(Ie,Me){var Ne=Ie.descending?"endkey":"startkey",Je=Ie.descending?"startkey":"endkey";if(void 0!==Ie[Ne]&&void 0!==Ie[Je]&&Cr(Ie[Ne],Ie[Je])>0)throw new ns("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(Me.reduce&&!1!==Ie.reduce){if(Ie.include_docs)throw new ns("{include_docs:true} is invalid for reduce");if(Ie.keys&&Ie.keys.length>1&&!Ie.group&&!Ie.group_level)throw new ns("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(He){var qe=function(Ie){if(Ie){if("number"!=typeof Ie)return new ns('Invalid value for integer: "'+Ie+'"');if(Ie<0)return new ns('Invalid value for positive integer: "'+Ie+'"')}}(Ie[He]);if(qe)throw qe})}function be(Ie){return function(Me){if(404===Me.status)return Ie;throw Me}}function Ve(Ie){var Me="string"==typeof Ie?Ie:Ie.name,Ne=cf[Me];return Ne||(Ne=cf[Me]=new Yo),Ne}function ze(Ie){return kc(Ve(Ie),function(){return function(Ie){var Me,Ne;var He=t(Ie.mapFun,function(pt,At){var Qt={id:Ne._id,key:ts(pt)};null!=At&&(Qt.value=ts(At)),Me.push(Qt)}),qe=Ie.seq||0;function st(pt,At){return function(){return function(Ie,Me,Ne){var Je="_local/lastSeq";return Ie.db.get(Je).catch(be({_id:Je,seq:0})).then(function(He){var qe=Lc(Me);return Promise.all(qe.map(function(st){return function(Ie,Me,Ne){var Je="_local/doc_"+Ie,He={_id:Je,keys:[]},qe=Ne.get(Ie),st=qe[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(qe[1])?Promise.resolve(He):Me.db.get(Je).catch(be(He))).then(function(Ye){return function(Ye){return Ye.keys.length?Me.db.allDocs({keys:Ye.keys,include_docs:!0}):Promise.resolve({rows:[]})}(Ye).then(function(pt){return function(Ye,pt){for(var At=[],Qt=new w,Kt=0,zt=pt.rows.length;Kt<zt;Kt++){var ir=pt.rows[Kt].doc;if(ir&&(At.push(ir),Qt.add(ir._id),ir._deleted=!st.has(ir._id),!ir._deleted)){var cn=st.get(ir._id);"value"in cn&&(ir.value=cn.value)}}var Xr=Lc(st);return Xr.forEach(function(ia){if(!Qt.has(ia)){var sa={_id:ia},Nf=st.get(ia);"value"in Nf&&(sa.value=Nf.value),At.push(sa)}}),Ye.keys=sf(Xr.concat(Ye.keys)),At.push(Ye),At}(Ye,pt)})})}(st,Ie,Me)})).then(function(st){var mt=Qs(st);return He.seq=Ne,mt.push(He),Ie.db.bulkDocs({docs:mt})})})}(Ie,pt,At)}}var mt=new Yo;function at(){return Ie.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:qe,limit:50}).then(yt)}function yt(pt){var At=pt.results;if(At.length){var Qt=function(pt){for(var At=new S,Qt=0,Kt=pt.length;Qt<Kt;Qt++){var zt=pt[Qt];if("_"!==zt.doc._id[0]){Me=[],(Ne=zt.doc)._deleted||i(Ie.sourceDB,He,Ne),Me.sort(d);var Ht=Ye(Me);At.set(zt.doc._id,[Ht,zt.changes])}qe=zt.seq}return At}(At);if(mt.add(st(Qt,qe)),!(At.length<50))return at()}}function Ye(pt){for(var Qt,At=new S,Kt=0,zt=pt.length;Kt<zt;Kt++){var Ht=pt[Kt],ir=[Ht.key,Ht.id];Kt>0&&0===Cr(Ht.key,Qt)&&ir.push(Kt),At.set(_n(ir),Ht),Qt=Ht.key}return At}return at().then(function(){return mt.finish()}).then(function(){Ie.seq=qe})}(Ie)})()}function ft(Ie,Me){return kc(Ve(Ie),function(){return function(Ie,Me){var Ne,Je=Ie.reduceFun&&!1!==Me.reduce,He=Me.skip||0;function qe(Kt){return Kt.include_docs=!0,Ie.db.allDocs(Kt).then(function(zt){return Ne=zt.total_rows,zt.rows.map(function(Ht){if("value"in Ht.doc&&"object"==typeof Ht.doc.value&&null!==Ht.doc.value){var ir=Object.keys(Ht.doc.value).sort(),cn=["id","key","value"];if(!(ir<cn||ir>cn))return Ht.doc.value}var Xr=function(e){for(var t=[],r=[],n=0;;){var i=e[n++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var f=Yh(e,n);t.push(f.num),n+=f.length;break;case"4":for(var d="";;){var C=e[n];if("\0"===C)break;d+=C,n++}d=d.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"\x01").replace(/\u0002\u0002/g,"\x02"),t.push(d);break;case"5":var U={element:[],index:t.length};t.push(U.element),r.push(U);break;case"6":var z={element:{},index:t.length};t.push(z.element),r.push(z);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();Jh(t,r)}}}(Ht.doc._id);return{key:Xr[0],id:Xr[1],value:"value"in Ht.doc?Ht.doc.value:null}})})}function st(Kt){var zt;if(zt=Je?function(Ie,Me,Ne){0===Ne.group_level&&delete Ne.group_level;var Je=Ne.group||Ne.group_level,He=r(Ie.reduceFun),qe=[],st=isNaN(Ne.group_level)?Number.POSITIVE_INFINITY:Ne.group_level;Me.forEach(function(Ye){var pt=qe[qe.length-1],At=Je?Ye.key:null;if(Je&&Array.isArray(At)&&(At=At.slice(0,st)),pt&&0===Cr(pt.groupKey,At))return pt.keys.push([Ye.key,Ye.id]),void pt.values.push(Ye.value);qe.push({keys:[[Ye.key,Ye.id]],values:[Ye.value],groupKey:At})}),Me=[];for(var mt=0,at=qe.length;mt<at;mt++){var yt=qe[mt],ht=f(Ie.sourceDB,He,yt.keys,yt.values,!1);if(ht.error&&ht.error instanceof xc)throw ht.error;Me.push({value:ht.error?null:ht.output,key:yt.groupKey})}return{rows:C(Me,Ne.limit,Ne.skip)}}(Ie,Kt,Me):{total_rows:Ne,offset:He,rows:Kt},Me.update_seq&&(zt.update_seq=Ie.seq),Me.include_docs){var Ht=sf(Kt.map(U));return Ie.sourceDB.allDocs({keys:Ht,include_docs:!0,conflicts:Me.conflicts,attachments:Me.attachments,binary:Me.binary}).then(function(ir){var cn=new S;return ir.rows.forEach(function(Xr){cn.set(Xr.id,Xr.doc)}),Kt.forEach(function(Xr){var ia=U(Xr),sa=cn.get(ia);sa&&(Xr.doc=sa)}),zt})}return zt}if(void 0!==Me.keys&&!Me.keys.length&&(Me.limit=0,delete Me.keys),void 0!==Me.keys){var at=Me.keys.map(function(Kt){var zt={startkey:_n([Kt]),endkey:_n([Kt,{}])};return Me.update_seq&&(zt.update_seq=!0),qe(zt)});return Promise.all(at).then(Qs).then(st)}var ht,Ye,yt={descending:Me.descending};if(Me.update_seq&&(yt.update_seq=!0),"start_key"in Me&&(ht=Me.start_key),"startkey"in Me&&(ht=Me.startkey),"end_key"in Me&&(Ye=Me.end_key),"endkey"in Me&&(Ye=Me.endkey),void 0!==ht&&(yt.startkey=_n(Me.descending?[ht,{}]:[ht])),void 0!==Ye){var pt=!1!==Me.inclusive_end;Me.descending&&(pt=!pt),yt.endkey=_n(pt?[Ye,{}]:[Ye])}if(void 0!==Me.key){var At=_n([Me.key]),Qt=_n([Me.key,{}]);yt.descending?(yt.endkey=At,yt.startkey=Qt):(yt.startkey=At,yt.endkey=Qt)}return Je||("number"==typeof Me.limit&&(yt.limit=Me.limit),yt.skip=He),qe(yt).then(st)}(Ie,Me)})()}var $t=function(e){return p()(function(t){var r=t.pop(),n=e.apply(this,t);return"function"==typeof r&&nf(n,r),n})}(function(){var Ie=this;return"function"==typeof Ie._viewCleanup?function(Ie){return new Promise(function(Me,Ne){Ie._viewCleanup(function(Je,He){if(Je)return Ne(Je);Me(He)})})}(Ie):Dr(Ie)?function(Ie){return Ie.fetch("_view_cleanup",{headers:new cu({"Content-Type":"application/json"}),method:"POST"}).then(function(Me){return Me.json()})}(Ie):function(Ie){return Ie.get("_local/"+e).then(function(Me){var Ne=new S;Object.keys(Me.views).forEach(function(He){var qe=Bc(He),st="_design/"+qe[0],mt=qe[1],at=Ne.get(st);at||(at=new w,Ne.set(st,at)),at.add(mt)});var Je={keys:Lc(Ne),include_docs:!0};return Ie.allDocs(Je).then(function(He){var qe={};He.rows.forEach(function(at){var yt=at.key.substring(8);Ne.get(at.key).forEach(function(ht){var Ye=yt+"/"+ht;Me.views[Ye]||(Ye=ht);var pt=Object.keys(Me.views[Ye]),At=at.doc&&at.doc.views&&at.doc.views[ht];pt.forEach(function(Qt){qe[Qt]=qe[Qt]||At})})});var mt=Object.keys(qe).filter(function(at){return!qe[at]}).map(function(at){return kc(Ve(at),function(){return new Ie.constructor(at,Ie.__opts).destroy()})()});return Promise.all(mt).then(function(){return{ok:!0}})})},be({ok:!0}))}(Ie)});return{query:function(Ie,Me,Ne){var Je=this;"function"==typeof Me&&(Ne=Me,Me={}),Me=Me?function(Ie){return Ie.group_level=ce(Ie.group_level),Ie.limit=ce(Ie.limit),Ie.skip=ce(Ie.skip),Ie}(Me):{},"function"==typeof Ie&&(Ie={map:Ie});var He=Promise.resolve().then(function(){return function(Ie,Me,Ne){if("function"==typeof Ie._query)return function(Ie,Me,Ne){return new Promise(function(Je,He){Ie._query(Me,Ne,function(qe,st){if(qe)return He(qe);Je(st)})})}(Ie,Me,Ne);if(Dr(Ie))return function(Ie,Me,Ne){var He,st,mt,Je=[],qe="GET";if(te("reduce",Ne,Je),te("include_docs",Ne,Je),te("attachments",Ne,Je),te("limit",Ne,Je),te("descending",Ne,Je),te("group",Ne,Je),te("group_level",Ne,Je),te("skip",Ne,Je),te("stale",Ne,Je),te("conflicts",Ne,Je),te("startkey",Ne,Je,!0),te("start_key",Ne,Je,!0),te("endkey",Ne,Je,!0),te("end_key",Ne,Je,!0),te("inclusive_end",Ne,Je),te("key",Ne,Je,!0),te("update_seq",Ne,Je),Je=""===(Je=Je.join("&"))?"":"?"+Je,void 0!==Ne.keys){var yt="keys="+encodeURIComponent(JSON.stringify(Ne.keys));yt.length+Je.length+1<=2e3?Je+=("?"===Je[0]?"&":"?")+yt:(qe="POST","string"==typeof Me?He={keys:Ne.keys}:Me.keys=Ne.keys)}if("string"==typeof Me){var ht=Bc(Me);return Ie.fetch("_design/"+ht[0]+"/_view/"+ht[1]+Je,{headers:new cu({"Content-Type":"application/json"}),method:qe,body:JSON.stringify(He)}).then(function(Ye){return st=Ye.ok,mt=Ye.status,Ye.json()}).then(function(Ye){if(!st)throw Ye.status=mt,Ze(Ye);return Ye.rows.forEach(function(pt){if(pt.value&&pt.value.error&&"builtin_reduce_error"===pt.value.error)throw new Error(pt.reason)}),Ye}).then(X(Ne))}return He=He||{},Object.keys(Me).forEach(function(Ye){He[Ye]=Array.isArray(Me[Ye])?Me[Ye]:Me[Ye].toString()}),Ie.fetch("_temp_view"+Je,{headers:new cu({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(He)}).then(function(Ye){return st=Ye.ok,mt=Ye.status,Ye.json()}).then(function(Ye){if(!st)throw Ye.status=mt,Ze(Ye);return Ye}).then(X(Ne))}(Ie,Me,Ne);if("string"!=typeof Me)return ee(Ne,Me),lf.add(function(){return uf(Ie,"temp_view/temp_view",Me.map,Me.reduce,!0,e).then(function(at){return function(e,t){return e.then(function(r){return t().then(function(){return r})},function(r){return t().then(function(){throw r})})}(ze(at).then(function(){return ft(at,Ne)}),function(){return at.db.destroy()})})}),lf.finish();var Je=Me,He=Bc(Je),st=He[1];return Ie.get("_design/"+He[0]).then(function(mt){var at=mt.views&&mt.views[st];if(!at)throw new Mc("ddoc "+mt._id+" has no view named "+st);return n(mt,st),ee(Ne,at),uf(Ie,Je,at.map,at.reduce,!1,e).then(function(ht){return"ok"===Ne.stale||"update_after"===Ne.stale?("update_after"===Ne.stale&&R()(function(){ze(ht)}),ft(ht,Ne)):ze(ht).then(function(){return ft(ht,Ne)})})})}(Je,Ie,Me)});return nf(He,Ne),He},viewCleanup:$t}}("indexes",function(e,t){return function(e,t){var r=function(e){for(var t=0,r=e.length;t<r;t++)if(-1!==e[t].indexOf("."))return!1;return!0}(e),n=1===e.length;return r?n?function(e,t){return function(r){t(r[e])}}(e[0],t):function(e,t){return function(r){for(var n=[],i=0,f=e.length;i<f;i++)n.push(r[e[i]]);t(n)}}(e,t):n?function(e,t){var r=Ho(e);return function(n){for(var i=n,f=0,d=r.length;f<d;f++)if(void 0===(i=i[r[f]]))return;t(i)}}(e[0],t):function(e,t){return function(r){for(var n=[],i=0,f=e.length;i<f;i++){for(var d=Ho(e[i]),C=r,U=0,z=d.length;U<z;U++)if(void 0===(C=C[d[U]]))return;n.push(C)}t(n)}}(e,t)}(Object.keys(e.fields),t)},function(){throw new Error("reduce not supported")},function(e,t){var r=e.views[t];if(!r.map||!r.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")});function jc(e){return e._customFindAbstractMapper||lm}function gf(e){return e.fields=e.fields.map(function(t){if("string"==typeof t){var r={};return r[t]="asc",r}return t}),e}function hm(e,t){for(var r=[],n=0;n<t.def.fields.length;n++){var i=Yr(t.def.fields[n]);r.push(e[i])}return r}function yf(e){return e.allDocs({startkey:"_design/",endkey:"_design/\uffff",include_docs:!0}).then(function(t){var r={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return r.indexes=Fc(r.indexes,t.rows.filter(function(n){return"query"===n.doc.language}).map(function(n){return(void 0!==n.doc.views?Object.keys(n.doc.views):[]).map(function(f){return{ddoc:n.id,name:f,type:"json",def:gf(n.doc.views[f].options.def)}})})),r.indexes.sort(function(n,i){return Oc(n.name,i.name)}),r.total_rows=r.indexes.length,r})}var Uc={"\uffff":{}};const Em={queryOpts:{limit:0,startkey:Uc,endkey:null},inMemoryFields:[]};function wm(e,t){for(var r=e.def.fields.map(Yr),n=0,i=r.length;n<i;n++)if(t===r[n])return!0;return!1}function Sm(e,t){return"$eq"!==Yr(e[t])}function _f(e,t){var r=t.def.fields.map(Yr);return e.slice().sort(function(n,i){var f=r.indexOf(n),d=r.indexOf(i);return-1===f&&(f=Number.MAX_VALUE),-1===d&&(d=Number.MAX_VALUE),Oc(f,d)})}function Am(e,t,r,n){var i=Fc(e,function(e,t,r){for(var n=!1,i=0,f=(r=_f(r,e)).length;i<f;i++){var d=r[i];if(n||!wm(e,d))return r.slice(i);i<f-1&&Sm(t,d)&&(n=!0)}return[]}(t,r,n),function(e){var t=[];return Object.keys(e).forEach(function(r){Object.keys(e[r]).forEach(function(i){"$ne"===i&&t.push(r)})}),t}(r));return _f(function(e){for(var t={},r=0;r<e.length;r++)t["$"+e[r]]=!0;return Object.keys(t).map(function(n){return n.substring(1)})}(i),t)}var Pm=["$eq","$gt","$gte","$lt","$lte"];function bf(e){return-1===Pm.indexOf(e)}function Tm(e,t,r,n){var i=e.def.fields.map(Yr);return!!function(e,t,r){if(t){var n=function(e,t){return!(e.length>t.length)&&mf(e,t)}(t,e),i=mf(r,e);return n&&i}return function(e,t){e=e.slice();for(var r=0,n=t.length;r<n;r++){var i=t[r];if(!e.length)break;var f=e.indexOf(i);if(-1===f)return!1;e.splice(f,1)}return!0}(r,e)}(i,t,r)&&function(e,t){var n=t[e[0]];return void 0===n||!(1===Object.keys(n).length&&"$ne"===Yr(n))}(i,n)}function Lm(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function Um(e,t){var r=e.selector,n=e.sort;if(function(e){return Object.keys(e).map(function(r){return e[r]}).some(function(r){return"object"==typeof r&&0===Object.keys(r).length})}(r))return Un({},Em,{index:t[0]});var i=function(e,t){var i,r=Object.keys(e),n=t?t.map(Yr):[];return i=r.length>=n.length?r:n,0===n.length?{fields:i}:{fields:i=i.sort(function(f,d){var C=n.indexOf(f);-1===C&&(C=Number.MAX_VALUE);var U=n.indexOf(d);return-1===U&&(U=Number.MAX_VALUE),C<U?-1:C>U?1:0}),sortOrder:t.map(Yr)}}(r,n),f=i.fields,C=function(e,t,r,n,i){var f=function(e,t,r,n){return n.filter(function(i){return Tm(i,r,t,e)})}(e,t,r,n);if(0===f.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var d=n[0];return d.defaultUsed=!0,d}if(1===f.length&&!i)return f[0];var C=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e[r]]=!0;return t}(t);if(i){var z="_design/"+i[0],X=2===i.length&&i[1],te=f.find(function(ce){return!!(X&&ce.ddoc===z&&X===ce.name||ce.ddoc===z)});if(!te)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return te}return function(e,t){for(var r=null,n=-1,i=0,f=e.length;i<f;i++){var d=e[i],C=t(d);C>n&&(n=C,r=d)}return r}(f,function(ce){for(var Ee=ce.def.fields.map(Yr),he=0,ee=0,le=Ee.length;ee<le;ee++)C[Ee[ee]]&&he++;return he})}(r,f,i.sortOrder,t,e.use_index),U=function(e,t){return t.defaultUsed?function(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}(e):1===t.def.fields.length?function(e,t){var d,r=Yr(t.def.fields[0]),n=e[r]||{},i=[];return Object.keys(n).forEach(function(C){bf(C)&&i.push(r);var z=function(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:null}}(C,n[C]);d=d?Nc([d,z]):z}),{queryOpts:d,inMemoryFields:i}}(e,t):function(e,t){var d,C,r=t.def.fields.map(Yr),n=[],i=[],f=[];function U(bt){!1!==d&&i.push(null),!1!==C&&f.push(Uc),n=r.slice(bt)}for(var z=0,X=r.length;z<X;z++){var ce=e[r[z]];if(!ce||!Object.keys(ce).length){U(z);break}if(Object.keys(ce).some(bf)){U(z);break}if(z>0){var Ee="$gt"in ce||"$gte"in ce||"$lt"in ce||"$lte"in ce,he=Object.keys(e[r[z-1]]),ee=vf(he,["$eq"]),le=vf(he,Object.keys(ce));if(Ee&&!ee&&!le){U(z);break}}for(var Ae=Object.keys(ce),be=null,xe=0;xe<Ae.length;xe++){var Re=Ae[xe],ze=Lm(Re,ce[Re]);be=be?Nc([be,ze]):ze}i.push("startkey"in be?be.startkey:null),f.push("endkey"in be?be.endkey:Uc),"inclusive_start"in be&&(d=be.inclusive_start),"inclusive_end"in be&&(C=be.inclusive_end)}var Ke={startkey:i,endkey:f};return void 0!==d&&(Ke.inclusive_start=d),void 0!==C&&(Ke.inclusive_end=C),{queryOpts:Ke,inMemoryFields:n}}(e,t)}(r,C);return{queryOpts:U.queryOpts,index:C,inMemoryFields:Am(U.inMemoryFields,C,r,f)}}function Ef(e,t,r){return t.selector&&(t.selector=Ic(t.selector)),t.sort&&(t.sort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if("string"==typeof t){var r={};return r[t]="asc",r}return t})}(t.sort)),t.use_index&&(t.use_index=function(e){var t=[];return"string"==typeof e?t.push(e):t=e,t.map(function(r){return r.replace("_design/","")})}(t.use_index)),function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}(t),yf(e).then(function(n){e.constructor.emit("debug",["find","planning query",t]);var i=Um(t,n.indexes);e.constructor.emit("debug",["find","query plan",i]);var f=i.index;!function(e,t){if(t.defaultUsed&&e.sort){var r=e.sort.filter(function(n){return"_id"!==Object.keys(n)[0]}).map(function(n){return Object.keys(n)[0]});if(r.length>0)throw new Error('Cannot sort on field(s) "'+r.join(",")+'" when using the default index')}}(t,f);var d=Un({include_docs:!0,reduce:!1,indexes_count:n.total_rows},i.queryOpts);return"startkey"in d&&"endkey"in d&&Cr(d.startkey,d.endkey)>0?{docs:[]}:(t.sort&&"string"!=typeof t.sort[0]&&"desc"===Pc(t.sort[0])&&(d.descending=!0,d=function(e){var t=qt(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}(d)),i.inMemoryFields.length||("limit"in t&&(d.limit=t.limit),"skip"in t&&(d.skip=t.skip)),r?Promise.resolve(i,d):Promise.resolve().then(function(){if("_all_docs"===f.name)return function(e,t){var r=qt(t);return r.descending?("endkey"in r&&"string"!=typeof r.endkey&&(r.endkey=""),"startkey"in r&&"string"!=typeof r.startkey&&(r.limit=0)):("startkey"in r&&"string"!=typeof r.startkey&&(r.startkey=""),"endkey"in r&&"string"!=typeof r.endkey&&(r.limit=0)),"key"in r&&"string"!=typeof r.key&&(r.limit=0),r.limit>0&&r.indexes_count&&(r.original_limit=r.limit,r.limit+=r.indexes_count),e.allDocs(r).then(function(n){return n.rows=n.rows.filter(function(i){return!/^_design\//.test(i.id)}),r.original_limit&&(r.limit=r.original_limit),n.rows=n.rows.slice(0,r.limit),n})}(e,d);var U=function(e){return e.ddoc.substring(8)+"/"+e.name}(f);return jc(e).query.call(e,U,d)}).then(function(U){!1===d.inclusive_start&&(U.rows=function(e,t,r){for(var n=r.def.fields,i=0,f=e.length;i<f;i++){var C=hm(e[i].doc,r);if(1===n.length)C=C[0];else for(;C.length>t.length;)C.pop();if(Math.abs(Cr(C,t))>0)break}return i>0?e.slice(i):e}(U.rows,d.startkey,f)),i.inMemoryFields.length&&(U.rows=lu(U.rows,t,i.inMemoryFields));var z={docs:U.rows.map(function(X){var te=X.doc;return t.fields?function(e,t){for(var r={},n=0,i=t.length;n<i;n++){var f=Ho(t[n]),d=Ac(e,f);void 0!==d&&np(r,f,d)}return r}(te,t.fields):te})};return f.defaultUsed&&(z.warning="No matching index found, create an index to optimize query time."),z}))})}var Hm=Xo(function(e,t){var n,r=qt((t=hf(t)).index);function i(){return n||(n=ki(JSON.stringify(t)))}t.index=gf(t.index),function(e){var t=e.fields.filter(function(r){return"asc"===Pc(r)});if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}(t.index);var f=t.name||"idx-"+i(),d=t.ddoc||"idx-"+i(),C="_design/"+d,U=!1,z=!1;return e.constructor.emit("debug",["find","creating index",C]),$n(e,C,function(te){return te._rev&&"query"!==te.language&&(U=!0),te.language="query",te.views=te.views||{},!(z=!!te.views[f])&&(te.views[f]={map:{fields:Nc(t.index.fields)},reduce:"_count",options:{def:r}},te)}).then(function(){if(U)throw new Error('invalid language for ddoc with id "'+C+'" (should be "query")')}).then(function(){var te=d+"/"+f;return jc(e).query.call(e,te,{limit:0,reduce:!1}).then(function(){return{id:C,name:f,result:z?"exists":"created"}})})}),Vm=Xo(Ef),Gm=Xo(function(e,t){return Ef(e,t,!0).then(function(r){return{dbname:e.name,index:r.index,selector:t.selector,range:{start_key:r.queryOpts.startkey,end_key:r.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}})}),Qm=Xo(yf),Zm=Xo(function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var r=t.ddoc,n=t.name;return $n(e,r,function(f){return 1===Object.keys(f.views).length&&f.views[n]?{_id:r,_deleted:!0}:(delete f.views[n],f)}).then(function(){return jc(e).viewCleanup.apply(e)}).then(function(){return{ok:!0}})}),$s={};$s.createIndex=Kr(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));(Dr(this)?Wp:Hm)(this,e,t)}),$s.find=Kr(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));(Dr(this)?Kp:Vm)(this,e,t)}),$s.explain=Kr(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to explain()"));(Dr(this)?Hp:Gm)(this,e,t)}),$s.getIndexes=Kr(function(e){(Dr(this)?Vp:Qm)(this,e)}),$s.deleteIndex=Kr(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));(Dr(this)?Gp:Zm)(this,e,t)});const Ym=$s;var wf=!1,Sf=new Map;function Cf(e){var t=[e.name,e.adapter].join("|"),r=Sf.get(t);return r||(r={subject:new ti.x,obliviousSet:new sc(6e4)},Sf.set(t,r)),r}var Jm=0;function Df(e){if(e.rxdb)throw Wt("PL2",{plugin:e});"object"==typeof e&&e.default&&(e=e.default),fu.plugin(e)}Df(Ym),function(){if(!wf){wf=!0;var e=fu.prototype.bulkDocs,t=function(){var r=(0,nt.Z)(Be().mark(function n(i,f,d){var U,z,X,te,ce,Ee,ee,C=this;return Be().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(U=jr(),z=Jm++,"function"==typeof f&&(d=f,f={}),f||(f={}),Array.isArray(i)?X=i:void 0===i?X=[]:(X=i.docs,i.hasOwnProperty("new_edits")&&(f.new_edits=i.new_edits)),0!==X.length){Se.next=7;break}throw We("SNH",{args:{body:i,options:f}});case 7:if(te=new Map,!f.hasOwnProperty("new_edits")||!1!==f.new_edits){Se.next=18;break}return ce=X.map(function(Ae){return Ae._id}),Se.next=12,this.changes({live:!1,since:0,doc_ids:ce,style:"all_docs"});case 12:return Ee=Se.sent,Se.next=15,Promise.all(Ee.results.map(function(){var Ae=(0,nt.Z)(Be().mark(function be(xe){return Be().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,C.get(xe.id,{rev:xe.changes[0].rev,deleted:"ok",revs:!!f.set_new_edit_as_latest_revision,style:"all_docs"});case 2:return ze.abrupt("return",ze.sent);case 4:case"end":return ze.stop()}},be)}));return function(be){return Ae.apply(this,arguments)}}()));case 15:Se.sent.forEach(function(Ae){return te.set(Ae._id,Ae)}),f.set_new_edit_as_latest_revision&&X.forEach(function(Ae){var xe=te.get(Ae._id);if(xe){var Re=Ae._rev.split("-"),Ve=parseInt(Re[0],10),ze=Re[1];Ae._revisions={start:Ve,ids:xe._revisions.ids},Ae._revisions.ids.unshift(ze),delete xe._revisions}});case 18:return(ee=Ot(f)).isDeeper=!0,Se.abrupt("return",e.call(this,X,ee,function(Ae,be){if(Ae){if(!d)throw Ae;d(Ae)}else{if(!f.isDeeper){var xe=jr(),Re={emitId:z,writeDocs:X,writeOptions:f,writeResult:be,previousDocs:te,startTime:U,endTime:xe};Cf(C).subject.next(Re)}if(!d)return be;d(null,be)}}));case 21:case"end":return Se.stop()}},n,this)}));return function(i,f,d){return r.apply(this,arguments)}}();fu.plugin({bulkDocs:t})}}();var qo=fu,zs=new Set,hu="_local/",Af="_design/";function Of(e){return new Promise(function(t){Nn(e,function(r){t("md5-"+r)})})}function Pf(e,t){return"_id"===e||t[e]||((t=Ot(t))[e]=t._id,delete t._id),t}function bn(e,t){var r=Pf(e,t);return delete(r=Ot(r))._revisions,r._attachments={},t._attachments&&Object.entries(t._attachments).forEach(function(n){var f=n[1];r._attachments[n[0]]=f.data?{data:f.data,type:f.type?f.type:f.content_type}:{digest:f.digest,type:f.type?f.type:f.content_type,length:f.length}}),r}function If(e,t){var r=$c(e,t);return(r=Ot(r))._attachments={},t._attachments&&Object.entries(t._attachments).forEach(function(n){var f=n[1];r._attachments[n[0]]=f.data?{data:f.data,content_type:f.type}:{digest:f.digest,content_type:f.type,length:f.length,stub:!0}}),r}function $c(e,t){if("_id"===e)return t;var r=t[e],n=Ot(t);return delete n[e],n._id=r,n}function ev(e){return e.substring(hu.length)}function Tf(e,t,r){if(!t)throw new Error("primary missing !!");return(e?"local":"non-local")+"|"+t+"|"+r}function tv(e,t){if(!t)throw We("SNH",{args:{pouchDoc:t}});var r=t._id,n=bn(e,t),i=Vr(n._rev);return t._deleted?{operation:"DELETE",id:r,doc:null,previous:n}:1===i?{operation:"INSERT",id:r,doc:n,previous:null}:{operation:"UPDATE",id:r,doc:n,previous:"UNKNOWN"}}function zc(e,t){if("_id"===t)return e;if(Array.isArray(e))return e.map(function(n){return zc(n,t)});if("object"==typeof e){var r={};return Object.entries(e).forEach(function(n){var i=n[0],f=n[1];i===t?r._id=f:r[i]=i.startsWith("$")?zc(f,t):f}),r}return e}function ea(e){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,nt.Z)(Be().mark(function e(t){var r;return Be().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return",{});case 2:return r={},i.next=5,Promise.all(Object.entries(t).map(function(){var f=(0,nt.Z)(Be().mark(function d(C){var U,z,X,te;return Be().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(U=C[0],(z=C[1]).type){ee.next=3;break}throw We("SNH",{args:{obj:z}});case 3:if(!z.data){ee.next=15;break}return X=z,ee.next=7,Of(X.data);case 7:return te=ee.sent,ee.next=10,vr_toString(X.data);case 10:r[U]={digest:te,length:ee.sent.length,type:X.type},ee.next=16;break;case 15:r[U]=z;case 16:case"end":return ee.stop()}},d)}));return function(d){return f.apply(this,arguments)}}()));case 5:return i.abrupt("return",r);case 6:case"end":return i.stop()}},e)})),Wc.apply(this,arguments)}var rv=function(){function e(r,n,i,f,d){var C=this;this.changes$=new ti.x,this.subs=[],this.databaseName=r,this.collectionName=n,this.schema=i,this.internals=f,this.options=d,zs.add(this),this.primaryPath=ei(this.schema.primaryKey);var U=Cf(this.internals.pouch);this.emittedEventIds=U.obliviousSet;var z=U.subject.subscribe(function(){var X=(0,nt.Z)(Be().mark(function te(ce){var Ee,he;return Be().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!ce.writeOptions.hasOwnProperty("new_edits")||ce.writeOptions.new_edits){le.next=4;break}return le.next=3,Promise.all(ce.writeDocs.map(function(){var Se=(0,nt.Z)(Be().mark(function Ae(be){var xe,Re,Ve;return Be().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return xe=be._id,be=bn(C.primaryPath,be),Ke.next=4,ea(be._attachments);case 4:if(be._attachments=Ke.sent,(Re=ce.previousDocs.get(xe))&&(Re=bn(C.primaryPath,Re)),!(Re&&Vr(Re._rev)>Vr(be._rev))){Ke.next=9;break}return Ke.abrupt("return");case 9:if(Re||!be._deleted){Ke.next=11;break}return Ke.abrupt("return");case 11:if(!(Re&&Re._deleted&&be._deleted)){Ke.next=13;break}return Ke.abrupt("return");case 13:if(Re&&!Re._deleted||be._deleted){Ke.next=17;break}Ve={operation:"INSERT",doc:be,id:xe,previous:null},Ke.next=27;break;case 17:if(!be._deleted||!Re||Re._deleted){Ke.next=22;break}Re._rev=be._rev,Ve={operation:"DELETE",doc:null,id:xe,previous:Re},Ke.next=27;break;case 22:if(!Re){Ke.next=26;break}Ve={operation:"UPDATE",doc:be,id:xe,previous:Re},Ke.next=27;break;case 26:throw We("SNH",{args:{writeDoc:be}});case 27:C.addEventToChangeStream(Ve,ce.startTime,ce.endTime);case 28:case"end":return Ke.stop()}},Ae)}));return function(Ae){return Se.apply(this,arguments)}}()));case 3:case 9:return le.abrupt("return");case 4:if(ce.writeOptions.custom){le.next=10;break}return Ee=new Map,ce.writeDocs.forEach(function(Se){return Ee.set(Se._id,Se)}),le.next=9,Promise.all(ce.writeResult.map(function(){var Se=(0,nt.Z)(Be().mark(function Ae(be){var xe,Re,Ve;return Be().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!(xe=be.id).startsWith(Af)&&!xe.startsWith(hu)){Ke.next=3;break}return Ke.abrupt("return");case 3:return Re=On(Ee,be.id),Ke.next=6,ea(Re._attachments);case 6:Re._attachments=Ke.sent,(Re=Ot(Re))._rev=be.rev,Ve=tv(C.primaryPath,Re),C.addEventToChangeStream(Ve);case 11:case"end":return Ke.stop()}},Ae)}));return function(Ae){return Se.apply(this,arguments)}}()));case 10:return he=ce.writeOptions.custom.writeRowById,le.next=13,Promise.all(ce.writeResult.map(function(){var Se=(0,nt.Z)(Be().mark(function Ae(be){var xe,Re,Ve,ze,Ke;return Be().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:if(!be.error){ft.next=2;break}return ft.abrupt("return");case 2:return Re=On(he,xe=be.id),Ve=bn(C.primaryPath,Re.document),ft.next=7,ea(Ve._attachments);case 7:if(Ve._attachments=ft.sent,Ve._rev=be.rev,Re.previous&&!Re.previous._deleted){ft.next=13;break}ze={operation:"INSERT",doc:Ve,id:xe,previous:null},ft.next=23;break;case 13:if(!Re.document._deleted){ft.next=22;break}return Ke=bn(C.primaryPath,Re.previous),ft.next=17,ea(Ke._attachments);case 17:Ke._attachments=ft.sent,Ke._rev=be.rev,ze={operation:"DELETE",doc:null,id:be.id,previous:Ke},ft.next=23;break;case 22:ze={operation:"UPDATE",doc:Ve,id:be.id,previous:Re.previous};case 23:Re.document._deleted&&(!Re.previous||Re.previous._deleted)||C.addEventToChangeStream(ze,ce.startTime,ce.endTime);case 24:case"end":return ft.stop()}},Ae)}));return function(Ae){return Se.apply(this,arguments)}}()));case 13:case"end":return le.stop()}},te)}));return function(te){return X.apply(this,arguments)}}());this.subs.push(z)}var t=e.prototype;return t.addEventToChangeStream=function(n,i,f){var d="DELETE"===n.operation?n.previous:n.doc,U=d[ei(this.schema.primaryKey)],z=Tf(!1,U,d._rev);this.emittedEventIds.has(z)||(this.emittedEventIds.add(z),this.changes$.next({eventId:z,documentId:U,change:n,startTime:i,endTime:f}))},t.close=function(){return this.subs.forEach(function(n){return n.unsubscribe()}),zs.delete(this),rn},t.remove=function(){var r=(0,nt.Z)(Be().mark(function i(){return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.subs.forEach(function(C){return C.unsubscribe()}),zs.delete(this),d.next=4,this.internals.pouch.destroy();case 4:case"end":return d.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.getSortComparator=function(n){var i,f=this,d=ei(this.schema.primaryKey),C=n.sort?n.sort:[(i={},i[d]="asc",i)],U=Object.keys(n.selector).filter(function(X){return!X.startsWith("$")});return function(te,ce){if(te[d]===ce[d])throw We("SNH",{args:{a:te,b:ce},primaryPath:d});var Ee=[te,ce].map(function(ee){return{doc:$c(f.primaryPath,ee)}}),he=lu(Ee,{selector:{},sort:C},U);if(2!==he.length)throw We("SNH",{query:n,primaryPath:f.primaryPath,args:{rows:Ee,sortedRows:he}});return he[0].doc._id===Ee[0].doc._id?-1:1}},t.getQueryMatcher=function(n){var i=this,f=Ic(n.selector);return function(U){var te=lu([{doc:$c(i.primaryPath,U)}],{selector:f},Object.keys(n.selector));return te&&1===te.length}},t.prepareQuery=function(n){var i=this,f=ei(this.schema.primaryKey),d=n;if(d.sort&&d.sort.forEach(function(U){var z=Object.keys(U)[0],X=["$gt","$gte","$lt","$lte"];if(!d.selector[z]||!Object.keys(d.selector[z]).some(function(Ee){return X.includes(Ee)})){var ce=Mr(i.schema,z);if(!ce)throw We("QU5",{query:d,key:z});switch(d.selector[z]||(d.selector[z]={}),ce.type){case"number":case"integer":d.selector[z].$gt=-1e28;break;case"string":"string"!=typeof d.selector[z]&&(d.selector[z].$gt="");break;default:d.selector[z].$gt=null}}}),d.selector[f]&&d.selector[f].$regex)throw We("QU4",{path:f,query:n});if(d.sort){var C=d.sort.map(function(U){var z,X=Object.keys(U)[0],te=Object.values(U)[0];return(z={})[X===f?"_id":X]=te,z});d.sort=C}return Object.entries(d.selector).forEach(function(U){var z=U[0],X=U[1];"object"==typeof X&&null!==X&&!Array.isArray(X)&&0===Object.keys(X).length&&delete d.selector[z]}),d.selector=zc(d.selector,this.primaryPath),d},t.bulkAddRevisions=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,d=this;return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(0!==f.length){z.next=2;break}throw We("P3",{args:{documents:f}});case 2:return C=f.map(function(X){return If(d.primaryPath,X)}),z.next=5,this.internals.pouch.bulkDocs(C,{new_edits:!1,set_new_edit_as_latest_revision:!0});case 5:case"end":return z.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.bulkWrite=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,U,z,X,d=this;return Be().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(0!==f.length){ce.next=2;break}throw We("P2",{args:{documentWrites:f}});case 2:return C=new Map,U=f.map(function(Ee){C.set(Ee.document[d.primaryPath],Ee);var ee=If(d.primaryPath,Ee.document);return Ee.previous&&(ee._rev=Ee.previous._rev),ee}),ce.next=6,this.internals.pouch.bulkDocs(U,{custom:{writeRowById:C}});case 6:return z=ce.sent,X={success:new Map,error:new Map},ce.next=10,Promise.all(z.map(function(){var Ee=(0,nt.Z)(Be().mark(function he(ee){var le,Ae;return Be().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(le=On(C,ee.id),!ee.error){xe.next=6;break}X.error.set(ee.id,{isError:!0,status:409,documentId:ee.id,writeRow:le}),xe.next=18;break;case 6:if(Ae=Ot(le.document),(Ae=Pf(d.primaryPath,Ae))._rev=ee.rev,Ae._attachments={},le.document._attachments){xe.next=14;break}le.document._attachments={},xe.next=17;break;case 14:return xe.next=16,ea(le.document._attachments);case 16:Ae._attachments=xe.sent;case 17:X.success.set(ee.id,Ae);case 18:case"end":return xe.stop()}},he)}));return function(he){return Ee.apply(this,arguments)}}()));case 10:return ce.abrupt("return",X);case 11:case"end":return ce.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.query=function(){var r=(0,nt.Z)(Be().mark(function i(f){var U,d=this;return Be().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.internals.pouch.find(f);case 2:return U={documents:X.sent.docs.map(function(te){return bn(d.primaryPath,te)})},X.abrupt("return",U);case 5:case"end":return X.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.getAttachmentData=function(){var r=(0,nt.Z)(Be().mark(function i(f,d){return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.internals.pouch.getAttachment(f,d);case 2:return z.abrupt("return",z.sent);case 4:case"end":return z.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.findDocumentsById=function(){var r=(0,nt.Z)(Be().mark(function i(f,d){var U,z,X,te,C=this;return Be().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!d){Ee.next=8;break}return Ee.next=3,this.internals.pouch.changes({live:!1,since:0,doc_ids:f,style:"all_docs"});case 3:return U=Ee.sent,z=new Map,Ee.next=7,Promise.all(U.results.map(function(){var he=(0,nt.Z)(Be().mark(function ee(le){var Ae;return Be().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,C.internals.pouch.get(le.id,{rev:le.changes[0].rev,deleted:"ok",style:"all_docs"});case 2:Ae=bn(C.primaryPath,xe.sent),z.set(le.id,Ae);case 5:case"end":return xe.stop()}},ee)}));return function(ee){return he.apply(this,arguments)}}()));case 7:return Ee.abrupt("return",z);case 8:return Ee.next=10,this.internals.pouch.allDocs({include_docs:!0,keys:f});case 10:return X=Ee.sent,te=new Map,X.rows.filter(function(he){return!!he.doc}).forEach(function(he){var ee=he.doc;ee=bn(C.primaryPath,ee),te.set(he.id,ee)}),Ee.abrupt("return",te);case 14:case"end":return Ee.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.changeStream=function(){return this.changes$.asObservable()},t.getChangedDocuments=function(){var r=(0,nt.Z)(Be().mark(function i(f){var d,C,U;return Be().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return d={live:!1,limit:f.limit,include_docs:!1,since:f.sinceSequence,descending:"before"===f.direction},te.next=3,this.internals.pouch.changes(d);case 3:return U=(C=te.sent).results.filter(function(ce){return!ce.id.startsWith(Af)}).map(function(ce){return{id:ce.id,sequence:ce.seq}}),te.abrupt("return",{changedDocuments:U,lastSequence:C.last_seq});case 7:case"end":return te.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),e}(),nv=function(){function e(r,n,i,f){this.changes$=new ti.x,this.databaseName=r,this.collectionName=n,this.internals=i,this.options=f,zs.add(this)}var t=e.prototype;return t.close=function(){return zs.delete(this),rn},t.remove=function(){var r=(0,nt.Z)(Be().mark(function i(){return Be().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return zs.delete(this),d.next=3,this.internals.pouch.destroy();case 3:case"end":return d.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.bulkWrite=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,U,z,X,te,ce,d=this;return Be().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(0!==f.length){he.next=2;break}throw We("P2",{args:{documentWrites:f}});case 2:return C=new Map,U=f.map(function(ee){C.set(ee.document._id,ee);var le=Ot(ee.document);return le._id=hu+le._id,ee.previous&&(le._rev=ee.previous._rev),le}),z=jr(),he.next=7,this.internals.pouch.bulkDocs(U);case 7:return X=he.sent,te=jr(),ce={success:new Map,error:new Map},X.forEach(function(ee){ee.id=ev(ee.id);var le=On(C,ee.id);if(ee.error)ce.error.set(ee.id,{isError:!0,status:409,documentId:ee.id,writeRow:le});else{var be,Ae=Ot(le.document);if(Ae._rev=ee.rev,Ae._attachments={},ce.success.set(ee.id,Ae),le.previous)if(le.document._deleted){var xe=Ot(le.previous);xe._rev=ee.rev,be={operation:"DELETE",doc:null,id:ee.id,previous:xe}}else be={operation:"UPDATE",doc:Ae,id:ee.id,previous:le.previous};else be={operation:"INSERT",doc:Ae,id:ee.id,previous:null};if(!le.document._deleted||le.previous&&!le.previous._deleted){var Re="DELETE"===be.operation?be.previous:be.doc,Ve=Tf(!0,Re._id,Re._rev?Re._rev:"");d.changes$.next({eventId:Ve,documentId:ee.id,change:be,startTime:z,endTime:te})}}}),he.abrupt("return",ce);case 12:case"end":return he.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.findLocalDocumentsById=function(){var r=(0,nt.Z)(Be().mark(function i(f){var C,d=this;return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return C=new Map,z.next=3,Promise.all(f.map(function(){var X=(0,nt.Z)(Be().mark(function te(ce){var Ee,he;return Be().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return Ee=hu+ce,le.prev=1,le.next=4,d.internals.pouch.get(Ee);case 4:(he=le.sent)._id=ce,C.set(ce,he),le.next=11;break;case 9:le.prev=9,le.t0=le.catch(1);case 11:case"end":return le.stop()}},te,null,[[1,9]])}));return function(te){return X.apply(this,arguments)}}()));case 3:return z.abrupt("return",C);case 4:case"end":return z.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),t.changeStream=function(){return this.changes$.asObservable()},e}(),iv=function(){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.name="pouchdb",this.adapter=r,this.pouchSettings=n,sv(r)}var t=e.prototype;return t.hash=function(n){return Of(n)},t.createPouch=function(){var r=(0,nt.Z)(Be().mark(function i(f,d){var C,U,z;return Be().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return C={location:f,adapter:So(this.adapter),settings:d},U=Object.assign({},C.adapter,this.pouchSettings,C.settings),z=new qo(C.location,U),te.abrupt("return",z);case 4:case"end":return te.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.createStorageInstance=function(){var r=(0,nt.Z)(Be().mark(function i(f){var d,C;return Be().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return d=Rf(f.databaseName,f.collectionName,f.schema.version),z.next=3,this.createPouch(d,f.options);case 3:return C=z.sent,z.next=6,ov(C,f.schema);case 6:return z.abrupt("return",new rv(f.databaseName,f.collectionName,f.schema,{pouch:C},f.options));case 7:case"end":return z.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.createKeyObjectStorageInstance=function(){var r=(0,nt.Z)(Be().mark(function i(f){var d,C;return Be().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return(d=Ot(f.options)).auto_compaction=!1,d.revs_limit=1,C=Rf(f.databaseName,f.collectionName,0),X.next=6,this.createPouch(C,f.options);case 6:return X.abrupt("return",new nv(f.databaseName,f.collectionName,{pouch:X.sent},f.options));case 8:case"end":return X.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),e}();function sv(e){if("string"==typeof e){if(!qo.adapters||!qo.adapters[e])throw We("DB9",{adapter:e})}else if(function(e){if(!e||"function"!=typeof e.super_)throw We("UT4",{adapter:e})}(e),!qo.adapters||!qo.adapters.leveldb)throw We("DB10",{adapter:e})}function ov(e,t){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,nt.Z)(Be().mark(function e(t,r){var n,f;return Be().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(r.indexes){C.next=2;break}return C.abrupt("return");case 2:return n=ei(r.primaryKey),C.next=5,t.getIndexes();case 5:return f=new Set(C.sent.indexes.map(function(U){return U.name})),C.next=9,Promise.all(r.indexes.map(function(){var U=(0,nt.Z)(Be().mark(function z(X){var te,ce;return Be().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(te=(te=Array.isArray(X)?X:[X]).map(function(ee){return ee===n?"_id":ee}),ce="idx-rxdb-index-"+te.join(","),!f.has(ce)){he.next=5;break}return he.abrupt("return");case 5:return he.abrupt("return",t.createIndex({name:ce,ddoc:ce,index:{fields:te}}));case 6:case"end":return he.stop()}},z)}));return function(z){return U.apply(this,arguments)}}()));case 9:case"end":return C.stop()}},e)})),Kc.apply(this,arguments)}function Rf(e,t,r){var n=e+"-rxdb-"+r+"-";if(t.includes("/")){var i=t.split("/"),f=i.pop();return i.join("/")+"/"+n+f}return n+t}function av(e,t){if(!e)throw new Error("adapter missing");return new iv(e,t)}var uv=["__proto__","constructor","prototype"];function ta(e,t){Object.keys(t).forEach(function(r){uv.includes(r)||(void 0===e[r]?e[r]=t[r]:ra(t[r])?ta(e[r],t[r]):e[r]=t[r])})}function ra(e){return"[object Object]"===e.toString()}var pu=function(){function e(r){if(this.options={},this._conditions={},this._fields={},r){var n=this;r.selector&&n.find(r.selector),r.limit&&n.limit(r.limit),r.skip&&n.skip(r.skip),r.sort&&r.sort.forEach(function(i){return n.sort(i)})}}var t=e.prototype;return t.where=function(n,i){if(!arguments.length)return this;var f=typeof arguments[0];if("string"===f)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"===f&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw Wt("MQ1",{path:arguments[0]})},t.equals=function(n){return this._ensurePath("equals"),this._conditions[this._path]=n,this},t.eq=function(n){return this._ensurePath("eq"),this._conditions[this._path]=n,this},t.or=function(n){var i=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(n)||(n=[n]),i.push.apply(i,n),this},t.nor=function(n){var i=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(n)||(n=[n]),i.push.apply(i,n),this},t.and=function(n){var i=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(n)||(n=[n]),i.push.apply(i,n),this},t.mod=function(n,i){var f,d;1===arguments.length?(this._ensurePath("mod"),f=arguments[0],d=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(f=arguments.slice(1),d=arguments[0]):(f=arguments[1],d=arguments[0]):(this._ensurePath("mod"),f=arguments.slice(),d=this._path);var C=this._conditions[d]||(this._conditions[d]={});return C.$mod=f,this},t.exists=function(n,i){var f,d;0===arguments.length?(this._ensurePath("exists"),f=this._path,d=!0):1===arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),f=this._path,d=arguments[0]):(f=arguments[0],d=!0):2===arguments.length&&(f=arguments[0],d=arguments[1]);var C=this._conditions[f]||(this._conditions[f]={});return C.$exists=d,this},t.elemMatch=function(n,i){if(null===arguments[0])throw Wt("MQ2");var f,d,C;if("function"==typeof arguments[0])this._ensurePath("elemMatch"),d=this._path,f=arguments[0];else if(ra(arguments[0]))this._ensurePath("elemMatch"),d=this._path,C=arguments[0];else if("function"==typeof arguments[1])d=arguments[0],f=arguments[1];else{if(!arguments[1]||!ra(arguments[1]))throw Wt("MQ2");d=arguments[0],C=arguments[1]}f&&(f(C=new e),C=C._conditions);var U=this._conditions[d]||(this._conditions[d]={});return U.$elemMatch=C,this},t.sort=function(n){var i=this;if(!n)return this;var f,d=typeof n;if(Array.isArray(n)){f=n.length;for(var C=0;C<n.length;++C)lv(this.options,n[C][0],n[C][1]);return this}if(1===arguments.length&&"string"===d){f=(n=n.split(/\s+/)).length;for(var U=0;U<f;++U){var z=n[U];if(z){var X="-"===z[0]?-1:1;-1===X&&(z=z.substring(1)),kf(this.options,z,X)}}return this}if(ra(n)){var te=Object.keys(n);return te.forEach(function(ce){return kf(i.options,ce,n[ce])}),this}throw Wt("MQ3",{args:arguments})},t.merge=function(n){if(!n)return this;if(!Lf(n))throw Wt("MQ4",{source:n});return n instanceof e?(n._conditions&&ta(this._conditions,n._conditions),n._fields&&(this._fields||(this._fields={}),ta(this._fields,n._fields)),n.options&&(this.options||(this.options={}),ta(this.options,n.options)),n._distinct&&(this._distinct=n._distinct),this):(ta(this._conditions,n),this)},t.find=function(n){return Lf(n)&&this.merge(n),this},t._ensurePath=function(n){if(!this._path)throw We("MQ5",{method:n})},t.toJSON=function(){var n={selector:this._conditions};return this.options.skip&&(n.skip=this.options.skip),this.options.limit&&(n.limit=this.options.limit),this.options.sort&&(n.sort=function(e){return Object.entries(e).map(function(t){var r;return(r={})[t[0]]=1===t[1]?"asc":"desc",r})}(this.options.sort)),{query:n,path:this._path}},e}(),Mf=["limit","skip","maxScan","batchSize","comment"];Mf.forEach(function(e){pu.prototype[e]=function(t){return this.options[e]=t,this}});var xf=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];function kf(e,t,r){if(Array.isArray(e.sort))throw Wt("MQ6",{opts:e,field:t,value:r});if(r&&r.$meta)(e.sort||(e.sort={}))[t]={$meta:r.$meta};else{var i=String(r||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(i))throw Array.isArray(r)&&(r="["+r+"]"),Wt("MQ7",{field:t,value:r});var f=e.sort||(e.sort={}),d=r.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");f[t]=parseInt(d,10)}}function lv(e,t,r){if(e.sort=e.sort||[],!Array.isArray(e.sort))throw Wt("MQ8",{opts:e,field:t,value:r});e.sort.push([t,r])}function Lf(e){return e instanceof pu||ra(e)}xf.forEach(function(e){pu.prototype[e]=function(){var t,r;1===arguments.length?(this._ensurePath(e),r=arguments[0],t=this._path):(r=arguments[1],t=arguments[0]);var n=null===this._conditions[t]||"object"==typeof this._conditions[t]?this._conditions[t]:this._conditions[t]={};return n["$"+e]=r,this}});var Hc="queryBuilderPath";function Vc(e,t){e[t]=function(r){return function(e,t,r){var n=function(e){return new pu(e)}(wr(e.mangoQuery));e.other[Hc]&&(n._path=e.other[Hc]),n[t](r);var i=n.toJSON(),f=new nu(e.op,i.query,e.collection);return i.path&&(f.other[Hc]=i.path),bl(f)}(this,t,r)}}var hv={name:"query-builder",rxdb:!0,prototypes:{RxQuery:function(t){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach(function(r){Vc(t,r)}),Mf.forEach(function(r){Vc(t,r)}),xf.forEach(function(r){Vc(t,r)})}}},pv=l(9790),mv=l.n(pv);function vv(e){var t=this._data,r=mv()(t,e);return this._saveData(r,t)}function gv(e){return this.exec().then(function(t){return t?Array.isArray(t)?Promise.all(t.map(function(r){return r.update(e)})).then(function(){return t}):t.update(e).then(function(){return t}):null})}var _v={RxDocument:function(t){t.update=vv},RxQuery:function(t){t.update=gv}},bv={name:"update",rxdb:!0,prototypes:_v},Ev=l(8167),wv=l.n(Ev),Gc=new Map;function Qc(e){var t=e.hash;if(!Gc.has(t)){var r=wv()(e.jsonSchema);Gc.set(t,r)}return Gc.get(t)}var Sv=function(t){var r=Qc(this);if(r(t))return t;throw We("VD2",{errors:r.errors,obj:t,schema:this.jsonSchema})},Av={RxSchema:function(t){t._getValidator=Qc,t.validate=Sv}},Ov={createRxSchema:function(t){"object"==typeof window&&window.requestIdleCallback&&window.requestIdleCallback(function(){Qc(t)})}},Pv={name:"validate",rxdb:!0,prototypes:Av,hooks:Ov},Xt=l(3900),un=l(2843),oi=l(9646),mu=l(9770),ai=l(2076),na=l(4128),Iv=l(1042);let Tv=(()=>{class e{constructor(){this.isInitialized=!1}initialize(r){this.isInitialized?console.warn("PermissionsService already initialized"):(this.collection=r,this.isInitialized=!0)}requestPermissions(r){return(0,mu.P)(()=>this.isInitialized&&this.collection?(0,ai.D)(this.collection.bulkInsert(r)).pipe((0,Vt.U)(({success:n})=>!!n)):(0,un._)(()=>new Error("PermissionsService not initialized")))}hasPermission(r){return(0,mu.P)(()=>{if(!this.isInitialized||!this.collection)return(0,un._)(()=>new Error("PermissionsService not initialized"));const n=this.collection.findOne({selector:{id:`${r.appId}:${r.kind}:${r.mode}:${r.target}`}});return(0,ai.D)(n.exec()).pipe((0,Vt.U)(i=>!!i))})}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Jr=l(899);class Rv{constructor(t,r,n){this.appId=t,this.collection=r,this.acl=n}insert(t){return this.requestPermission(Jr.R.Write).pipe((0,Xt.w)(()=>this.collection.insert(t)),(0,Vt.U)(r=>this.docToJSON(r)))}upsert(t){return this.requestPermission(Jr.R.Write).pipe((0,Xt.w)(()=>this.collection.upsert(t)),(0,Vt.U)(r=>this.docToJSON(r)))}findOne(t){return this.requestPermission(Jr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne(t).exec()),(0,Vt.U)(r=>r?this.docToJSON(r):null))}find(t){return this.requestPermission(Jr.R.Read).pipe((0,Xt.w)(()=>this.collection.find(t).exec()),(0,Vt.U)(r=>r.map(n=>this.docToJSON(n))))}observe(t){return this.requestPermission(Jr.R.Read).pipe((0,Xt.w)(()=>this.collection.find(t).$),(0,Vt.U)(r=>r.map(n=>this.docToJSON(n))))}observeOne(t){return this.observe(t).pipe((0,Vt.U)(r=>r.length>0?r[0]:null))}update(t,r){return this.requestPermission(Jr.R.Write).pipe((0,Xt.w)(()=>this.collection.find(t).update(r)),(0,Vt.U)(n=>n.map(i=>this.docToJSON(i))))}remove(t){return this.requestPermission(Jr.R.Write).pipe((0,Xt.w)(()=>this.collection.find(t).remove()),(0,Vt.U)(r=>r.map(n=>this.docToJSON(n))))}putAttachment(t,r,n=!1){return this.requestPermission(Jr.R.Write).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(i=>i?i.putAttachment(r,n):(0,un._)(()=>new Error("No document found for id "+t))),(0,Vt.U)(i=>i.id))}getAttachment(t,r){return this.requestPermission(Jr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(n=>n?(0,oi.of)(n.getAttachment(r)):(0,un._)(()=>new Error("No document found for id "+t))),(0,Xt.w)(n=>n?(0,ai.D)(n.getData()).pipe((0,Vt.U)(i=>({id:n.id,data:i,type:n.type}))):(0,un._)(()=>new Error("No attachment found for id "+r))))}getAllAttachments(t){return this.requestPermission(Jr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(r=>r?(0,oi.of)(r.allAttachments()):(0,un._)(()=>new Error("No document found for id "+t))),(0,Xt.w)(r=>r.length<=0?(0,oi.of)([]):(0,na.D)(r.map(n=>(0,ai.D)(n.getData()).pipe((0,Vt.U)(i=>({id:n.id,data:i,type:n.type})))))))}removeAttachment(t,r){return this.requestPermission(Jr.R.Write).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(n=>{if(!n)return(0,un._)(()=>new Error("No document found for id "+t));const i=n.getAttachment(r);return i?i.remove():(0,un._)(()=>new Error("No attachment found for id "+r))}))}observeAttachments(t){return this.requestPermission(Jr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(r=>r?r.allAttachments$:(0,un._)(()=>new Error("No document found for id "+t))),(0,Xt.w)(r=>(0,na.D)(r.map(n=>(0,ai.D)(n.getData()).pipe((0,Vt.U)(i=>({id:n.id,data:i,type:n.type})))))))}requestPermission(t){return this.acl.hasPermission({appId:this.appId,kind:Jr.k.Collection,mode:t,target:this.collection.name}).pipe((0,Xt.w)(r=>r?(0,oi.of)(r):(0,un._)(()=>new Error(`No permission to perform action ${t} on ${this.collection.name} with appId ${this.appId}`))))}docToJSON(t){const r=JSON.parse(JSON.stringify(t));return r._attachments=t._attachments,r}}Df(g),js(kh),js(Pv),js(Hh),js(hv),js(bv),js(j);const Bf=new u.InjectionToken("ENTITY_MANAGER_BASE_COLLECTIONS_TOKEN"),Ff=new u.InjectionToken("ENTITY_MANAGER_INITIAL_DATA_TOKEN");let Mv=(()=>{class e{constructor(r,n,i){this.acl=r,this.baseCollections=n,this.initialData=i,this.initialize$=new Ii(0)}setupDatabase(r,n){return this.createDatabase(r,n).pipe((0,Xt.w)(i=>this.addBaseCollections(i)),(0,ri.b)(i=>this.acl.initialize(i.applicationpermissions)),(0,Xt.w)(i=>this.addInitialData(i)),(0,ri.b)(()=>this.initialize$.next()),(0,Vt.U)(()=>{}))}isDatabaseCreated(){return void 0!==this._dbInstance}getRepository(r,n){if(!this._dbInstance)return(0,un._)(()=>new Error("Database not initialized"));const i=this._dbInstance.collections[r];if(!i)return(0,un._)(()=>new Error("Collection not initialized"));const f=new Rv(n,i,this.acl);return(0,oi.of)(f)}createDatabase(r,n){return(0,mu.P)(()=>(0,ai.D)(function(e){var Ee,t=e.storage,r=e.instanceCreationOptions,n=e.name,i=e.password,f=e.multiInstance,d=void 0===f||f,C=e.eventReduce,U=void 0!==C&&C,z=e.ignoreDuplicate,X=void 0!==z&&z,te=e.options,ce=void 0===te?{}:te;tr("preCreateRxDatabase",{storage:t,instanceCreationOptions:r,name:n,password:i,multiInstance:d,eventReduce:U,ignoreDuplicate:X,options:ce}),i&&fr.validatePassword(i),X||function(e){if(lc.has(e))throw We("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}(n),lc.add(n),d&&(Ee=new uc("RxDB:"+n+":socket"));var he=new ec;return jl(t,n,r,he,Ee).then(function(ee){var le=new au(n,t,r,i,d,U,ce,he,ee.internalStore,ee.localDocumentsStore,Ee);return function(e){return mc.apply(this,arguments)}(le).then(function(){return As("createRxDatabase",le)}).then(function(){return le})})}({name:r,password:n,storage:av("idb")})).pipe((0,ri.b)(i=>this._dbInstance=i)))}addBaseCollections(r){const n=this.baseCollections.reduce((i,f)=>Object.assign(i,{[f.name]:f.creator}),{});return(0,mu.P)(()=>(0,ai.D)(r.addCollections(n)).pipe((0,ri.b)(i=>{Object.values(i).forEach(f=>{f.preInsert(d=>{const C=(new Date).toISOString();d.id=d.id||(0,Iv.Z)(),d.createdAt=d.createdAt||C,d.updatedAt=d.updatedAt||C},!1),f.preSave((d,C)=>{const U=(new Date).toISOString();d.createdAt=C.createdAt||U,d.updatedAt=U},!1)})})))}addInitialData(r){return(0,na.D)(this.initialData.map(n=>{const i=r[n.name],f=!("upsert"in n)||n.upsert;return(0,na.D)(n.data.map(d=>(f?(0,oi.of)(!0):(0,ai.D)(i.findOne({selector:{id:d.id}}).exec()).pipe((0,Vt.U)(U=>!U))).pipe((0,Xt.w)(U=>U?(0,ai.D)(i.upsert(d)).pipe((0,Xt.w)(()=>{if("userapplications"!==n.name)return(0,oi.of)(void 0);const z=(d.additionalProperties?.permissions||[]).map(X=>({...X,appId:d.id,id:`${d.id}:${X.kind}:${X.mode}:${X.target}`}));return z.length?(0,na.D)(z.map(X=>r.applicationpermissions.upsert(X))):(0,oi.of)(void 0)})):(0,oi.of)(void 0)))))}))}}return e.\u0275fac=function(r){return new(r||e)(u.\u0275\u0275inject(Tv),u.\u0275\u0275inject(Bf),u.\u0275\u0275inject(Ff))},e.\u0275prov=u.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},43:(oe,N,l)=>{l.d(N,{T:()=>T});var g=l(1457),D=l(2816),p=l(1135),B=l(3900),L=l(4128),F=l(8505),x=l(2843),P=l(9841),w=l(7777);let T=(()=>{class I{constructor(R,b){this.document=R,this.entityManager=b,this.customizationSettings$=new p.X(void 0),this.entityManager.initialize$.pipe((0,B.w)(()=>(0,L.D)([this.entityManager.getRepository("userpreferences","com.central-factory.settings")])),(0,F.b)(([y])=>{this.userPreferencesRepository=y,this.subscribeToDataChanges()})).subscribe()}setCustomizationSettings(R,b){return this.userPreferencesRepository?this.userPreferencesRepository.upsert({id:"settings.customization"+(b?`.${b}`:""),key:"settings.customization",value:R,avatar:b}):(0,x._)(()=>new Error("Repositories not initialized"))}subscribeToDataChanges(){if(!this.userPreferencesRepository)throw new Error("Repositories not initialized");this.customizationSettings$.pipe((0,F.b)(R=>{!R||R.theme&&this.loadThemeFromUrl(R.theme.path)})).subscribe(),(0,P.a)([this.userPreferencesRepository.observeOne({selector:{key:"userAvatars.selectedAvatar"}}),this.userPreferencesRepository.observe({selector:{key:"settings.customization"}})]).pipe((0,F.b)(([R,b])=>{if(b.length<=0)return;const y=b.find(c=>c.avatar===R?.value)||b[0];this.customizationSettings$.next(y.value)})).subscribe()}loadThemeFromUrl(R){if(this.activeThemeLinkElem&&this.activeThemeLinkElem?.href.endsWith(R))return;const y=this.document.getElementsByTagName("head")[0],c=this.document.createElement("link");c.rel="stylesheet",c.href=R,y.appendChild(c),this.activeThemeLinkElem&&y.removeChild(this.activeThemeLinkElem),this.activeThemeLinkElem=c}}return I.\u0275fac=function(R){return new(R||I)(w.\u0275\u0275inject(g.DOCUMENT),w.\u0275\u0275inject(D.v2))},I.\u0275prov=w.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},4438:(oe,N,l)=>{l.d(N,{O:()=>D});var g=l(7777);let D=(()=>{class p{}return p.\u0275fac=function(L){return new(L||p)},p.\u0275mod=g.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=g.\u0275\u0275defineInjector({}),p})()},1894:(oe,N,l)=>{l.d(N,{t:()=>D});var g=l(7777);let D=(()=>{class p{constructor(){this.separators={el:"__",mod:"--",val:"-"},this.ignoreValues=!1,this.modCase="kebab"}setMods(L,F,x,P,w,S){Object.keys(x).forEach(T=>{if(P[T]){if(x[T]===P[T])return;S.removeClass(w.nativeElement,this.generateClass(L,F,T,P[T]))}x[T]&&S.addClass(w.nativeElement,this.generateClass(L,F,T,x[T]))}),Object.keys(P).forEach(T=>{!(T in x)&&P[T]&&S.removeClass(w.nativeElement,this.generateClass(L,F,T,P[T]))})}generateClass(L,F,x,P){this.ignoreValues&&(P=!!P),"string"!=typeof P&&"boolean"!=typeof P&&(P=!!P);let w=L;return F&&(w+=this.separators.el+F),x&&(x=this.modNameHandler(x),w+=this.separators.mod+x,"boolean"!=typeof P&&null!=P&&(w+=this.separators.val+P)),w}parseMods(L){if("string"==typeof L&&(L=L.split(/\s+/)),Array.isArray(L)){const F=L;L={},F.forEach(x=>{L[x]=!0})}else if("object"!=typeof L)return{};return L}modNameHandler(L){switch(this.modCase){case"kebab":return L?L.replace(/[A-Z]/g,function(F){return"-"+F.toLowerCase()}).replace(/$\-/,""):"";case"snake":return L?L.replace(/[A-Z]/g,function(F){return"_"+F.toLowerCase()}).replace(/$\-/,""):"";default:return L}}}return p.\u0275fac=function(L){return new(L||p)},p.\u0275prov=g.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},1623:(oe,N,l)=>{l.d(N,{G:()=>p});var g=l(7777),D=l(1894);let p=(()=>{class B{constructor(F,x,P,w){this.bemService=w,this.name=P,this.element=F,this.renderer=x,x.addClass(F.nativeElement,this.bemService.generateClass(P))}ngOnChanges(){if(JSON.stringify(this.cfMod)!==this._modSerialized){this._modSerialized=JSON.stringify(this.cfMod);let F=this.cfMod;const{renderer:x,element:P,name:w}=this;F=this.bemService.parseMods(F),this.bemService.setMods(w,"",F,this._mods||{},P,x),this._mods=this._mods===F?Object.assign({},F):F}}}return B.\u0275fac=function(F){return new(F||B)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.Renderer2),g.\u0275\u0275injectAttribute("cfBlock"),g.\u0275\u0275directiveInject(D.t))},B.\u0275dir=g.\u0275\u0275defineDirective({type:B,selectors:[["","cfBlock",""]],inputs:{cfMod:"cfMod"},features:[g.\u0275\u0275NgOnChangesFeature]}),B})()},3454:(oe,N,l)=>{l.d(N,{e:()=>B});var g=l(7777),D=l(1894),p=l(1623);let B=(()=>{class L{constructor(x,P,w,S,T){this.bemService=T,this.blockName=S.name,this.name=w,this.element=x,this.renderer=P,P.addClass(x.nativeElement,this.bemService.generateClass(S.name,w))}ngOnChanges(){if(JSON.stringify(this.cfMod)!==this._modSerialized){this._modSerialized=JSON.stringify(this.cfMod);let x=this.cfMod;const{renderer:P,element:w,blockName:S,name:T}=this;x=this.bemService.parseMods(x),this.bemService.setMods(S,T,x,this._mods||{},w,P),this._mods=this._mods===x?Object.assign({},x):x}}}return L.\u0275fac=function(x){return new(x||L)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.Renderer2),g.\u0275\u0275injectAttribute("cfElem"),g.\u0275\u0275directiveInject(p.G),g.\u0275\u0275directiveInject(D.t))},L.\u0275dir=g.\u0275\u0275defineDirective({type:L,selectors:[["","cfElem",""]],inputs:{cfMod:"cfMod"},features:[g.\u0275\u0275NgOnChangesFeature]}),L})()},7967:(oe,N,l)=>{l.d(N,{I:()=>D});var g=l(7777);let D=(()=>{class p{}return p.\u0275fac=function(L){return new(L||p)},p.\u0275dir=g.\u0275\u0275defineDirective({type:p,selectors:[["","cfMod",""]]}),p})()},5183:(oe,N,l)=>{l.d(N,{L:()=>x});var g=l(1457),D=l(7777);function B(P,w){if(1&P){const S=D.\u0275\u0275getCurrentView();D.\u0275\u0275elementStart(0,"div",2),D.\u0275\u0275listener("click",function(){return D.\u0275\u0275restoreView(S),D.\u0275\u0275nextContext()._onBackdropClicked()}),D.\u0275\u0275elementEnd()}if(2&P){const S=D.\u0275\u0275nextContext();D.\u0275\u0275property("ngClass",S.backdropClass)}}const L=[[["cf-sidebar"],["","cf-sidebar",""]],[["","cf-sidebar-content",""]]],F=["cf-sidebar,[cf-sidebar]","[cf-sidebar-content]"];let x=(()=>{class P{constructor(S,T){this._ref=S,this.animate=!0,this.allowSidebarBackdropControl=!0,this.showBackdrop=!1,this.showBackdropChange=new D.EventEmitter,this.backdropClick=new D.EventEmitter,this._sidebars=[],this._isBrowser=(0,g.isPlatformBrowser)(T)}ngAfterContentInit(){!this._isBrowser||this._onToggle()}ngOnChanges(S){!this._isBrowser||S.showBackdrop&&this.showBackdropChange.emit(S.showBackdrop.currentValue)}ngOnDestroy(){!this._isBrowser||this._unsubscribe()}_addSidebar(S){this._sidebars.push(S),this._subscribe(S)}_removeSidebar(S){const T=this._sidebars.indexOf(S);-1!==T&&this._sidebars.splice(T,1)}_getContentStyle(){let S=0,T=0,I=0,M=0,R="",b="",y="";for(const c of this._sidebars)if(c._isModeSlide&&c.opened&&(R=`translate${c._isLeftOrRight?"X":"Y"}(${c._isLeftOrTop?"":"-"}${c._isLeftOrRight?c._width:c._height}px)`),c._isModePush&&c.opened||c.dock){let o=0;switch(c._isModeSlide&&c.opened?c._isLeftOrRight?y="100%":b="100%":o=c._isDocked||c._isModeOver&&c.dock?c._dockedSize:c._isLeftOrRight?c._width:c._height,c.position){case"left":S=Math.max(S,o);break;case"right":T=Math.max(T,o);break;case"top":I=Math.max(I,o);break;case"bottom":M=Math.max(M,o)}}return{padding:`${I}px ${T}px ${M}px ${S}px`,webkitTransform:R,transform:R,height:b,width:y}}_onBackdropClicked(){let S=!1;for(const T of this._sidebars)T.opened&&T.showBackdrop&&T.closeOnClickBackdrop&&(T.close(),S=!0);S&&this.backdropClick.emit()}_subscribe(S){S.openStart.subscribe(()=>this._onToggle()),S.sidebarOpen.subscribe(()=>this._markForCheck()),S.closeStart.subscribe(()=>this._onToggle()),S.sidebarClose.subscribe(()=>this._markForCheck()),S.modeChange.subscribe(()=>this._markForCheck()),S.positionChange.subscribe(()=>this._markForCheck()),S._onRerender.subscribe(()=>this._markForCheck())}_unsubscribe(){for(const S of this._sidebars)S.openStart.unsubscribe(),S.sidebarOpen.unsubscribe(),S.closeStart.unsubscribe(),S.sidebarClose.unsubscribe(),S.modeChange.unsubscribe(),S.positionChange.unsubscribe(),S._onRerender.unsubscribe()}_onToggle(){if(this._sidebars.length>0&&this.allowSidebarBackdropControl){const S=this._sidebars.some(T=>T.opened&&T.showBackdrop);this.showBackdrop=S,this.showBackdropChange.emit(S)}setTimeout(()=>{this._markForCheck()})}_markForCheck(){this._ref.markForCheck()}}return P.\u0275fac=function(S){return new(S||P)(D.\u0275\u0275directiveInject(D.ChangeDetectorRef),D.\u0275\u0275directiveInject(D.PLATFORM_ID))},P.\u0275cmp=D.\u0275\u0275defineComponent({type:P,selectors:[["cf-sidebar-container"]],inputs:{animate:"animate",allowSidebarBackdropControl:"allowSidebarBackdropControl",showBackdrop:"showBackdrop",contentClass:"contentClass",backdropClass:"backdropClass"},outputs:{showBackdropChange:"showBackdropChange",backdropClick:"backdropClick"},features:[D.\u0275\u0275NgOnChangesFeature],ngContentSelectors:F,decls:4,vars:5,consts:[["aria-hidden","true","class","cf-sidebar__backdrop",3,"ngClass","click",4,"ngIf"],[1,"cf-sidebar__content",3,"ngClass","ngStyle"],["aria-hidden","true",1,"cf-sidebar__backdrop",3,"ngClass","click"]],template:function(S,T){1&S&&(D.\u0275\u0275projectionDef(L),D.\u0275\u0275template(0,B,1,1,"div",0),D.\u0275\u0275projection(1),D.\u0275\u0275elementStart(2,"div",1),D.\u0275\u0275projection(3,1),D.\u0275\u0275elementEnd()),2&S&&(D.\u0275\u0275property("ngIf",T.showBackdrop),D.\u0275\u0275advance(2),D.\u0275\u0275classProp("cf-sidebar__content--animate",T.animate),D.\u0275\u0275property("ngClass",T.contentClass)("ngStyle",T._getContentStyle()))},directives:[g.NgIf,g.NgClass,g.NgStyle],encapsulation:2,changeDetection:0}),P})()},6111:(oe,N,l)=>{l.d(N,{k:()=>x});var g=l(1457),u=l(7777),B=l(5183);const L=["sidebar"],F=["*"];let x=(()=>{class P{constructor(S,T,I){if(this._container=S,this._ref=T,this.opened=!1,this.openedChange=new u.EventEmitter,this.mode="over",this.dock=!1,this.dockedSize="0px",this.position="start",this.animate=!0,this.autoCollapseOnInit=!0,this.trapFocus=!1,this.autoFocus=!0,this.showBackdrop=!1,this.closeOnClickBackdrop=!1,this.closeOnClickOutside=!1,this.keyClose=!1,this.keyCode=27,this.contentInit=new u.EventEmitter,this.openStart=new u.EventEmitter,this.sidebarOpen=new u.EventEmitter,this.closeStart=new u.EventEmitter,this.sidebarClose=new u.EventEmitter,this.transitionEnd=new u.EventEmitter,this.modeChange=new u.EventEmitter,this.positionChange=new u.EventEmitter,this._onRerender=new u.EventEmitter,this._focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]),textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], [contenteditable]",this._tabIndexAttr="__tabindex__",this._tabIndexIndicatorAttr="__ngsidebar-tabindex__",this._clickEvent="click",this._onClickOutsideAttached=!1,this._onKeyDownAttached=!1,this._onResizeAttached=!1,!this._container)throw new Error("<cf-sidebar> must be inside a <cf-sidebar-container>. See https://github.com/arkon/ng-sidebar#usage for more info.");this._isBrowser=(0,g.isPlatformBrowser)(I),this._isBrowser&&"undefined"!=typeof window&&"undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!("onclick"in window)&&(this._clickEvent="touchstart"),this._normalizePosition(),this.open=this.open.bind(this),this._onTransitionEnd=this._onTransitionEnd.bind(this),this._onFocusTrap=this._onFocusTrap.bind(this),this._onClickOutside=this._onClickOutside.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._collapse=this._collapse.bind(this)}ngOnInit(){!this._isBrowser||(this.animate&&(this._shouldAnimate=!0,this.animate=!1),this._container._addSidebar(this),this.autoCollapseOnInit&&this._collapse())}ngAfterContentInit(){this.contentInit.emit()}ngOnChanges(S){!this._isBrowser||(S.animate&&this._shouldAnimate&&(this._shouldAnimate=S.animate.currentValue),S.closeOnClickOutside&&(S.closeOnClickOutside.currentValue?this._initCloseClickListener():this._destroyCloseClickListener()),S.keyClose&&(S.keyClose.currentValue?this._initCloseKeyDownListener():this._destroyCloseKeyDownListener()),S.position&&(this._normalizePosition(),setTimeout(()=>{this.positionChange.emit(S.position.currentValue)})),S.mode&&setTimeout(()=>{this.modeChange.emit(S.mode.currentValue)}),S.dock&&this.triggerRerender(),S.opened&&(this._shouldAnimate&&(this.animate=!0,this._shouldAnimate=!1),S.opened.currentValue?this.open():this.close()),(S.autoCollapseHeight||S.autoCollapseWidth)&&this._initCollapseListeners())}ngOnDestroy(){!this._isBrowser||(this._destroyCloseListeners(),this._destroyCollapseListeners(),this._container._removeSidebar(this))}open(){!this._isBrowser||(this.opened=!0,this.openedChange.emit(!0),this.openStart.emit(),this._ref.detectChanges(),setTimeout(()=>{this.animate&&!this._isModeSlide?this._elSidebar.nativeElement.addEventListener("transitionend",this._onTransitionEnd):(this._setFocused(),this._initCloseListeners(),this.opened&&this.sidebarOpen.emit())}))}close(){!this._isBrowser||(this.opened=!1,this.openedChange.emit(!1),this.closeStart.emit(),this._ref.detectChanges(),setTimeout(()=>{this.animate&&!this._isModeSlide?this._elSidebar.nativeElement.addEventListener("transitionend",this._onTransitionEnd):(this._setFocused(),this._destroyCloseListeners(),this.opened||this.sidebarClose.emit())}))}triggerRerender(){!this._isBrowser||setTimeout(()=>{this._onRerender.emit()})}_getStyle(){let S="";if(!this.opened){const T="translate"+(this._isLeftOrRight?"X":"Y");S=`${T}(${(this._isLeftOrTop?"-":"")+"100%"})`,this.dock&&this._dockedSize>0&&(!this._isModeSlide||!this.opened)&&(S+=` ${T}(${this._isLeftOrTop?"+":"-"}${this.dockedSize})`)}return{webkitTransform:S,transform:S}}_onTransitionEnd(S){S.target===this._elSidebar.nativeElement&&S.propertyName.endsWith("transform")&&(this._setFocused(),this.opened?(this._initCloseListeners(),this.sidebarOpen.emit()):(this._destroyCloseListeners(),this.sidebarClose.emit()),this.transitionEnd.emit(),this._elSidebar.nativeElement.removeEventListener("transitionend",this._onTransitionEnd))}get _shouldTrapFocus(){return this.opened&&this.trapFocus}_focusFirstItem(){this._focusableElements&&this._focusableElements.length>0&&this._focusableElements[0].focus()}_onFocusTrap(S){this._shouldTrapFocus&&!this._elSidebar.nativeElement.contains(S.target)&&this._focusFirstItem()}_setFocused(){if(this._focusableElements=Array.from(this._elSidebar.nativeElement.querySelectorAll(this._focusableElementsString)),this.opened){this._focusedBeforeOpen=document.activeElement;for(const S of this._focusableElements){const T=S.getAttribute(this._tabIndexAttr),I=null!==S.getAttribute(this._tabIndexIndicatorAttr);null!==T?(S.setAttribute("tabindex",T),S.removeAttribute(this._tabIndexAttr)):I&&(S.removeAttribute("tabindex"),S.removeAttribute(this._tabIndexIndicatorAttr))}this.autoFocus&&this._focusFirstItem(),document.addEventListener("focus",this._onFocusTrap,!0)}else{for(const S of this._focusableElements){const T=S.getAttribute("tabindex");S.setAttribute("tabindex","-1"),S.setAttribute(this._tabIndexIndicatorAttr,""),null!==T&&S.setAttribute(this._tabIndexAttr,T)}document.removeEventListener("focus",this._onFocusTrap,!0),this._focusedBeforeOpen&&this.autoFocus&&this._isModeOver&&(this._focusedBeforeOpen.focus(),this._focusedBeforeOpen=null)}}_initCloseListeners(){this._initCloseClickListener(),this._initCloseKeyDownListener()}_initCloseClickListener(){setTimeout(()=>{this.opened&&this.closeOnClickOutside&&!this._onClickOutsideAttached&&(document.addEventListener(this._clickEvent,this._onClickOutside),this._onClickOutsideAttached=!0)})}_initCloseKeyDownListener(){setTimeout(()=>{this.opened&&this.keyClose&&!this._onKeyDownAttached&&(document.addEventListener("keydown",this._onKeyDown),this._onKeyDownAttached=!0)})}_destroyCloseListeners(){this._destroyCloseClickListener(),this._destroyCloseKeyDownListener()}_destroyCloseClickListener(){this._onClickOutsideAttached&&(document.removeEventListener(this._clickEvent,this._onClickOutside),this._onClickOutsideAttached=!1)}_destroyCloseKeyDownListener(){this._onKeyDownAttached&&(document.removeEventListener("keydown",this._onKeyDown),this._onKeyDownAttached=!1)}_onClickOutside(S){this._onClickOutsideAttached&&this._elSidebar&&!this._elSidebar.nativeElement.contains(S.target)&&this.close()}_onKeyDown(S){(S=S||window.event).keyCode===this.keyCode&&this.close()}_initCollapseListeners(){(this.autoCollapseHeight||this.autoCollapseWidth)&&setTimeout(()=>{this._onResizeAttached||(window.addEventListener("resize",this._collapse),this._onResizeAttached=!0)})}_destroyCollapseListeners(){this._onResizeAttached&&(window.removeEventListener("resize",this._collapse),this._onResizeAttached=!1)}_collapse(){const S=window.innerHeight,T=window.innerWidth;this.autoCollapseHeight&&(S<=this.autoCollapseHeight&&this.opened?(this._wasCollapsed=!0,this.close()):S>this.autoCollapseHeight&&this._wasCollapsed&&(this.open(),this._wasCollapsed=!1)),this.autoCollapseWidth&&(T<=this.autoCollapseWidth&&this.opened?(this._wasCollapsed=!0,this.close()):T>this.autoCollapseWidth&&this._wasCollapsed&&(this.open(),this._wasCollapsed=!1))}get _height(){return this._elSidebar.nativeElement?this._isDocked?this._dockedSize:this._elSidebar.nativeElement.offsetHeight:0}get _width(){return this._elSidebar.nativeElement?this._isDocked?this._dockedSize:this._elSidebar.nativeElement.offsetWidth:0}get _dockedSize(){return parseFloat(this.dockedSize)}get _isModeOver(){return"over"===this.mode}get _isModePush(){return"push"===this.mode}get _isModeSlide(){return"slide"===this.mode}get _isDocked(){return!(!this.dock||!this.dockedSize||this.opened)}get _isLeftOrTop(){return"left"===this.position||"top"===this.position}get _isLeftOrRight(){return"left"===this.position||"right"===this.position}get _isInert(){return!this.opened&&!this.dock}_normalizePosition(){const S=(()=>{let P="ltr";return"undefined"!=typeof window&&(P=window.getComputedStyle?window.getComputedStyle(document.body,null).getPropertyValue("direction"):document.body.currentStyle.direction),"ltr"===P})();"start"===this.position?this.position=S?"left":"right":"end"===this.position&&(this.position=S?"right":"left")}}return P.\u0275fac=function(S){return new(S||P)(u.\u0275\u0275directiveInject(B.L,8),u.\u0275\u0275directiveInject(u.ChangeDetectorRef),u.\u0275\u0275directiveInject(u.PLATFORM_ID))},P.\u0275cmp=u.\u0275\u0275defineComponent({type:P,selectors:[["cf-sidebar"]],viewQuery:function(S,T){if(1&S&&u.\u0275\u0275viewQuery(L,5),2&S){let I;u.\u0275\u0275queryRefresh(I=u.\u0275\u0275loadQuery())&&(T._elSidebar=I.first)}},inputs:{opened:"opened",mode:"mode",dock:"dock",dockedSize:"dockedSize",position:"position",animate:"animate",autoCollapseHeight:"autoCollapseHeight",autoCollapseWidth:"autoCollapseWidth",autoCollapseOnInit:"autoCollapseOnInit",sidebarClass:"sidebarClass",ariaLabel:"ariaLabel",trapFocus:"trapFocus",autoFocus:"autoFocus",showBackdrop:"showBackdrop",closeOnClickBackdrop:"closeOnClickBackdrop",closeOnClickOutside:"closeOnClickOutside",keyClose:"keyClose",keyCode:"keyCode"},outputs:{openedChange:"openedChange",contentInit:"contentInit",openStart:"openStart",sidebarOpen:"sidebarOpen",closeStart:"closeStart",sidebarClose:"sidebarClose",transitionEnd:"transitionEnd",modeChange:"modeChange",positionChange:"positionChange",_onRerender:"_onRerender"},features:[u.\u0275\u0275NgOnChangesFeature],ngContentSelectors:F,decls:3,vars:15,consts:[["role","complementary",3,"ngClass","ngStyle"],["sidebar",""]],template:function(S,T){1&S&&(u.\u0275\u0275projectionDef(),u.\u0275\u0275elementStart(0,"aside",0,1),u.\u0275\u0275projection(2),u.\u0275\u0275elementEnd()),2&S&&(u.\u0275\u0275classMapInterpolate3("cf-sidebar cf-sidebar--",T.opened?"opened":"closed"," cf-sidebar--",T.position," cf-sidebar--",T.mode,""),u.\u0275\u0275classProp("cf-sidebar--docked",T._isDocked)("cf-sidebar--inert",T._isInert)("cf-sidebar--animate",T.animate),u.\u0275\u0275property("ngClass",T.sidebarClass)("ngStyle",T._getStyle()),u.\u0275\u0275attribute("aria-hidden",!T.opened)("aria-label",T.ariaLabel))},directives:[g.NgClass,g.NgStyle],encapsulation:2,changeDetection:0}),P})()},5687:(oe,N,l)=>{l.d(N,{l:()=>B});var g=l(1457),D=l(7777);let B=(()=>{class L{}return L.\u0275fac=function(x){return new(x||L)},L.\u0275mod=D.\u0275\u0275defineNgModule({type:L}),L.\u0275inj=D.\u0275\u0275defineInjector({imports:[[g.CommonModule]]}),L})()},5605:(oe,N,l)=>{l.d(N,{wn:()=>R});var g=l(5861),u=l(7340),D=l(7777),p=l(1623),B=l(7967),L=l(1457),F=l(3454),x=l(9750);let P=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=D.\u0275\u0275defineComponent({type:b,selectors:[["cf-spinner"]],decls:2,vars:0,consts:[["cfBlock","spinner","cfMod","3x"]],template:function(c,o){1&c&&(D.\u0275\u0275elementStart(0,"div",0),D.\u0275\u0275element(1,"div"),D.\u0275\u0275elementEnd())},directives:[p.G,B.I],styles:["[_nghost-%COMP%]{display:contents}"]}),b})();function w(b,y){1&b&&(D.\u0275\u0275elementStart(0,"div",8),D.\u0275\u0275element(1,"cf-spinner"),D.\u0275\u0275elementEnd())}function S(b,y){if(1&b&&(D.\u0275\u0275elementStart(0,"p",9),D.\u0275\u0275text(1),D.\u0275\u0275elementEnd()),2&b){const c=D.\u0275\u0275nextContext();D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate1(" ",c.loadingText," ")}}const T=function(b){return{"background-color":b}};var I=(()=>{return(b=I||(I={})).Visible="visible",b.Hidden="hidden",I;var b})(),M=(()=>{return(b=M||(M={})).Visible="visible",b.Hidden="hidden",M;var b})();let R=(()=>{class b{constructor(){this.title="Portal",this.logo="assets/logo.svg",this.loadingTexts=["Setting up the rockets...","Calling the crew..","Jumping to the cyber space..."],this.welcomeMessage="Welcome to the Metaverse",this.displayLoadingTime=5e3,this.displayWelcomeTime=3e3,this.mods="",this.splashScreenHide=new D.EventEmitter,this.state=I.Visible,this.logoState=M.Hidden,this.selectedLoadingTextIndex=void 0}ngOnInit(){this.displaySplashScreen()}displaySplashScreen(){var c=this;return(0,g.Z)(function*(){c.displayLoadingText(),yield c.wait(c.displayLoadingTime),c.logoState=M.Visible,c.selectedLoadingTextIndex=void 0,c.loadingText=c.welcomeMessage,yield c.wait(c.displayWelcomeTime),c.state=I.Hidden,c.splashScreenHide.emit()})()}displayLoadingText(){var c=this;return(0,g.Z)(function*(){if(c.logoState===M.Visible)return c.selectedLoadingTextIndex=void 0,void(c.loadingText=c.welcomeMessage);const v=(void 0===c.selectedLoadingTextIndex?-1:c.selectedLoadingTextIndex)+1;if(v>=c.loadingTexts.length)return c.selectedLoadingTextIndex=void 0,yield c.wait(1e3),void c.displayLoadingText();c.selectedLoadingTextIndex=v,c.loadingText=c.loadingTexts[v],yield c.wait(1e3),c.displayLoadingText()})()}wait(c){return new Promise(o=>setTimeout(o,c))}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=D.\u0275\u0275defineComponent({type:b,selectors:[["cf-splash-screen"]],inputs:{title:"title",logo:"logo",backgroundColor:"backgroundColor",loadingTexts:"loadingTexts",welcomeMessage:"welcomeMessage",displayLoadingTime:"displayLoadingTime",displayWelcomeTime:"displayWelcomeTime",mods:"mods"},outputs:{splashScreenHide:"splashScreenHide"},decls:9,vars:10,consts:[["cfBlock","splash-screen",3,"cfMod","ngStyle"],["cfElem","content"],["cfElem","title"],["cfElem","spinner"],["cfElem","logo"],["cfElem","logo-image",3,"src"],["cfElem","spinner-content",4,"ngIf"],["cfElem","loading-text",4,"ngIf"],["cfElem","spinner-content"],["cfElem","loading-text"]],template:function(c,o){1&c&&(D.\u0275\u0275elementStart(0,"div",0),D.\u0275\u0275elementStart(1,"div",1),D.\u0275\u0275elementStart(2,"h1",2),D.\u0275\u0275text(3),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(4,"div",3),D.\u0275\u0275elementStart(5,"div",4),D.\u0275\u0275element(6,"cf-svg-icon",5),D.\u0275\u0275elementEnd(),D.\u0275\u0275template(7,w,2,0,"div",6),D.\u0275\u0275elementEnd(),D.\u0275\u0275template(8,S,2,1,"p",7),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()),2&c&&(D.\u0275\u0275property("@splashState",o.state)("cfMod",o.mods)("ngStyle",D.\u0275\u0275pureFunction1(8,T,o.backgroundColor)),D.\u0275\u0275advance(3),D.\u0275\u0275textInterpolate(o.title),D.\u0275\u0275advance(2),D.\u0275\u0275property("@logoState",o.logoState),D.\u0275\u0275advance(1),D.\u0275\u0275property("src",o.logo),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngIf","visible"!==o.logoState),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngIf",o.loadingText))},directives:[p.G,B.I,L.NgStyle,F.e,x.b,L.NgIf,P],encapsulation:2,data:{animation:[(0,u.X$)("splashState",[(0,u.SB)(I.Visible,(0,u.oB)({opacity:1,display:"block"})),(0,u.SB)(I.Hidden,(0,u.oB)({opacity:0,display:"none"})),(0,u.eR)(`${I.Hidden} => ${I.Visible}`,[(0,u.oB)({opacity:0}),(0,u.jt)("1s",(0,u.oB)({opacity:1}))]),(0,u.eR)(`${I.Visible} => ${I.Hidden}`,[(0,u.jt)("1s",(0,u.oB)({opacity:0}))])]),(0,u.X$)("logoState",[(0,u.SB)(M.Visible,(0,u.oB)({opacity:1,display:"flex"})),(0,u.SB)(M.Hidden,(0,u.oB)({opacity:0,display:"none"})),(0,u.eR)(`${M.Hidden} => ${M.Visible}`,[(0,u.oB)({display:"flex",opacity:0}),(0,u.jt)("1s",(0,u.oB)({opacity:1}))]),(0,u.eR)(`${M.Visible} => ${M.Hidden}`,[(0,u.jt)("1s",(0,u.oB)({opacity:0}))])])]}}),b})()},2085:(oe,N,l)=>{l.d(N,{x:()=>L});var g=l(1457),u=l(4438),D=l(7777);let p=(()=>{class F{}return F.\u0275fac=function(P){return new(P||F)},F.\u0275mod=D.\u0275\u0275defineNgModule({type:F}),F.\u0275inj=D.\u0275\u0275defineInjector({imports:[[u.O]]}),F})();var B=l(2051);let L=(()=>{class F{}return F.\u0275fac=function(P){return new(P||F)},F.\u0275mod=D.\u0275\u0275defineNgModule({type:F}),F.\u0275inj=D.\u0275\u0275defineInjector({imports:[[g.CommonModule,u.O,p,B.Y]]}),F})()},5028:(oe,N,l)=>{l.d(N,{M6:()=>M,Kb:()=>b});var g=l(1457),D=l(7777),B=l(9646),L=l(2843),F=l(4004),x=l(8505),P=l(262),w=l(8746),S=l(3099),T=l(7191);const I=new D.InjectionToken("SERVER_URL");let M=(()=>{class y{constructor(o,v,h,K){this.loader=o,this.platformId=v,this.serverUrl=h,this._document=K,this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map,this.document=this._document}addSvg(o,v){if(!this.iconsByUrl.has(o)){const h=this.document.createElement("DIV");h.innerHTML=v;const K=h.querySelector("svg");this.iconsByUrl.set(o,K)}}loadSvg(o,v=o){if(this.serverUrl&&null===o.match(/^(http(s)?):/)&&(v=o=this.serverUrl+o),this.iconsByUrl.has(v))return(0,B.of)(this.iconsByUrl.get(v));if(this.iconsLoadingByUrl.has(v))return this.iconsLoadingByUrl.get(v);const h=this.loader.getSvg(o).pipe((0,F.U)(K=>{const ue=this.document.createElement("DIV");return ue.innerHTML=K,ue.querySelector("svg")}),(0,x.b)(K=>this.iconsByUrl.set(v,K)),(0,P.K)(K=>(console.error(K),(0,L._)(K))),(0,w.x)(()=>this.iconsLoadingByUrl.delete(v)),(0,S.B)());return this.iconsLoadingByUrl.set(v,h),h}getSvgByName(o){return this.iconsByUrl.has(o)?(0,B.of)(this.iconsByUrl.get(o)):this.iconsLoadingByUrl.has(o)?this.iconsLoadingByUrl.get(o):(0,L._)(`No svg with name '${o}' has been loaded`)}unloadSvg(o){this.iconsByUrl.has(o)&&this.iconsByUrl.delete(o)}}return y.\u0275fac=function(o){return new(o||y)(D.\u0275\u0275inject(T.S),D.\u0275\u0275inject(D.PLATFORM_ID),D.\u0275\u0275inject(I,8),D.\u0275\u0275inject(g.DOCUMENT,8))},y.\u0275prov=D.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y})();const b={provide:M,deps:[[new D.Optional,new D.SkipSelf,M],T.S,[D.PLATFORM_ID],[new D.Optional,I],[new D.Optional,g.DOCUMENT]],useFactory:function(y,c,o,v,h){return y||new M(c,o,v,h)}}},9750:(oe,N,l)=>{l.d(N,{b:()=>L});var g=l(7777),D=l(5028);const p=["*"];class B{constructor(){this.loaded=!1}}let L=(()=>{class F{constructor(P,w,S,T,I){this.element=P,this.differs=w,this.renderer=S,this.iconReg=T,this.cdr=I,this.stretch=!1,this.applyClass=!1,this.svgClass="icon__svg",this.helper=new B,this._svgStyle=null}set svgStyle(P){this._svgStyle=P,!this.helper.differ&&P&&(this.helper.differ=this.differs.find(P).create())}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}ngOnChanges(P){const w=this.element.nativeElement.firstChild;(P.src||P.name)&&(this.helper.loaded&&this.destroy(),this.init()),P.stretch&&this.stylize(),P.applyClass&&(this.applyClass?this.setClass(w,null,this.klass):this.setClass(w,this.klass,null)),P.svgClass&&this.setClass(w,P.svgClass.previousValue,P.svgClass.currentValue),P.klass&&(this.setClass(this.element.nativeElement,P.klass.previousValue,P.klass.currentValue),this.setClass(w,P.klass.previousValue,this.applyClass?P.klass.currentValue:null)),P.viewBox&&(this.helper.loaded&&this.destroy(),this.init()),P.svgAriaLabel&&this.doAria(P.svgAriaLabel.currentValue)}ngDoCheck(){if(this.helper.svg&&this.helper.differ){const P=this.helper.differ.diff(this._svgStyle);P&&this.applyChanges(P)}}init(){if(this.name){const P=this.iconReg.getSvgByName(this.name);P&&(this.helper.icnSub=P.subscribe(w=>this.initSvg(w)))}else if(this.src){const P=this.iconReg.loadSvg(this.src);P&&(this.helper.icnSub=P.subscribe(w=>this.initSvg(w)))}else this.element.nativeElement.innerHTML="",this.cdr.markForCheck()}initSvg(P){!this.helper.loaded&&P&&(this.setSvg(P),this.resetDiffer())}destroy(){this.helper.icnSub&&this.helper.icnSub.unsubscribe(),this.helper=new B}resetDiffer(){this._svgStyle&&!this.helper.differ&&(this.helper.differ=this.differs.find(this._svgStyle).create())}setSvg(P){if(!this.helper.loaded&&P){this.helper.svg=P;const w=P.cloneNode(!0),S=this.element.nativeElement;if(S.innerHTML="",this.renderer.appendChild(S,w),this.helper.loaded=!0,this.copyNgContentAttribute(S,w),this.klass&&this.applyClass&&this.setClass(S.firstChild,null,this.klass),this.svgClass&&this.setClass(S.firstChild,null,this.svgClass),this.viewBox)if("auto"===this.viewBox){const T=w.getAttribute("width"),I=w.getAttribute("height");I&&T&&(this.renderer.setAttribute(w,"viewBox",`0 0 ${T} ${I}`),this.renderer.removeAttribute(w,"width"),this.renderer.removeAttribute(w,"height"))}else""!==this.viewBox&&(this.renderer.setAttribute(w,"viewBox",this.viewBox),this.renderer.removeAttribute(w,"width"),this.renderer.removeAttribute(w,"height"));this.stylize(),void 0===this.svgAriaLabel&&S.firstChild.hasAttribute("aria-label")||this.doAria(this.svgAriaLabel||""),this.cdr.markForCheck()}}copyNgContentAttribute(P,w){const S=P.attributes,T=S.length;for(let I=0;I<T;I+=1){const M=S.item(I);if(M&&M.name.startsWith("_ngcontent")){this.setNgContentAttribute(w,M.name);break}}}setNgContentAttribute(P,w){this.renderer.setAttribute(P,w,"");const S=P.childNodes.length;for(let T=0;T<S;T+=1){const I=P.childNodes[T];I instanceof Element&&this.setNgContentAttribute(I,w)}}stylize(){if(this.helper.svg){const P=this.element.nativeElement.firstChild;!0===this.stretch?this.renderer.setAttribute(P,"preserveAspectRatio","none"):!1===this.stretch&&this.renderer.removeAttribute(P,"preserveAspectRatio")}}applyChanges(P){P.forEachRemovedItem(w=>this.setStyle(w.key,null)),P.forEachAddedItem(w=>this.setStyle(w.key,w.currentValue)),P.forEachChangedItem(w=>this.setStyle(w.key,w.currentValue))}setStyle(P,w){const[S,T]=P.split("."),I=this.element.nativeElement.firstChild;null!==(w=null!==w&&T?`${w}${T}`:w)?this.renderer.setStyle(I,S,w):this.renderer.removeStyle(I,S)}setClass(P,w,S){if(P){if(w){const T=(Array.isArray(w)?w:w.split(" ")).filter(I=>I);for(const I of T)this.renderer.removeClass(P,I)}if(S){const T=(Array.isArray(S)?S:S.split(" ")).filter(I=>I);for(const I of T)this.renderer.addClass(P,I)}}}doAria(P){const w=this.element.nativeElement.firstChild;w&&(""===P?(this.renderer.setAttribute(w,"aria-hidden","true"),this.renderer.removeAttribute(w,"aria-label")):(this.renderer.removeAttribute(w,"aria-hidden"),this.renderer.setAttribute(w,"aria-label",P)))}}return F.\u0275fac=function(P){return new(P||F)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.KeyValueDiffers),g.\u0275\u0275directiveInject(g.Renderer2),g.\u0275\u0275directiveInject(D.M6),g.\u0275\u0275directiveInject(g.ChangeDetectorRef))},F.\u0275cmp=g.\u0275\u0275defineComponent({type:F,selectors:[["cf-svg-icon"]],inputs:{src:"src",name:"name",stretch:"stretch",applyClass:"applyClass",svgClass:"svgClass",klass:["class","klass"],viewBox:"viewBox",svgAriaLabel:"svgAriaLabel",svgStyle:"svgStyle"},features:[g.\u0275\u0275NgOnChangesFeature],ngContentSelectors:p,decls:1,vars:0,template:function(P,w){1&P&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275projection(0))},encapsulation:2}),F})()},2051:(oe,N,l)=>{l.d(N,{Y:()=>F});var g=l(1457),D=l(7777),B=l(5028),L=l(7191);let F=(()=>{class x{static forRoot(w={}){return{ngModule:x,providers:[B.Kb,w.loader||{provide:L.S,useClass:L.o}]}}}return x.\u0275fac=function(w){return new(w||x)},x.\u0275mod=D.\u0275\u0275defineNgModule({type:x}),x.\u0275inj=D.\u0275\u0275defineInjector({imports:[[g.CommonModule]]}),x})()},7191:(oe,N,l)=>{l.d(N,{S:()=>B,o:()=>L});var g=l(9283),D=l(7777);class B{}let L=(()=>{class F extends B{constructor(P){super(),this.http=P}getSvg(P){return this.http.get(P,{responseType:"text"})}}return F.\u0275fac=function(P){return new(P||F)(D.\u0275\u0275inject(g.HttpClient))},F.\u0275prov=D.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac}),F})()},1611:oe=>{oe.exports=function(l){return function(){var g=arguments.length;if(g){for(var u=[],D=-1;++D<g;)u[D]=arguments[D];return l.call(this,u)}return l.call(this,[])}}},5834:(oe,N,l)=>{var g=l(5203),u=l(5685),D=u(g("String.prototype.indexOf"));oe.exports=function(B,L){var F=g(B,!!L);return"function"==typeof F&&D(B,".prototype.")>-1?u(F):F}},5685:(oe,N,l)=>{var g=l(4444),u=l(5203),D=u("%Function.prototype.apply%"),p=u("%Function.prototype.call%"),B=u("%Reflect.apply%",!0)||g.call(p,D),L=u("%Object.getOwnPropertyDescriptor%",!0),F=u("%Object.defineProperty%",!0),x=u("%Math.max%");if(F)try{F({},"a",{value:1})}catch{F=null}oe.exports=function(S){var T=B(g,p,arguments);if(L&&F){var I=L(T,"length");I.configurable&&F(T,"length",{value:1+x(0,S.length-(arguments.length-1))})}return T};var P=function(){return B(g,D,arguments)};F?F(oe.exports,"apply",{value:P}):oe.exports.apply=P},7466:function(oe,N,l){var g;oe.exports=(g=l(7585),l(8319),l(9493),l(7865),l(3057),function(){var u=g,p=u.lib.BlockCipher,B=u.algo,L=[],F=[],x=[],P=[],w=[],S=[],T=[],I=[],M=[],R=[];!function(){for(var c=[],o=0;o<256;o++)c[o]=o<128?o<<1:o<<1^283;var v=0,h=0;for(o=0;o<256;o++){var K=h^h<<1^h<<2^h<<3^h<<4;L[v]=K=K>>>8^255&K^99,F[K]=v;var pe,ue=c[v],we=c[ue],ge=c[we];x[v]=(pe=257*c[K]^16843008*K)<<24|pe>>>8,P[v]=pe<<16|pe>>>16,w[v]=pe<<8|pe>>>24,S[v]=pe,T[K]=(pe=16843009*ge^65537*we^257*ue^16843008*v)<<24|pe>>>8,I[K]=pe<<16|pe>>>16,M[K]=pe<<8|pe>>>24,R[K]=pe,v?(v=ue^c[c[c[ge^ue]]],h^=c[c[h]]):v=h=1}}();var b=[0,1,2,4,8,16,32,64,128,27,54],y=B.AES=p.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var o=this._keyPriorReset=this._key,v=o.words,h=o.sigBytes/4,ue=4*((this._nRounds=h+6)+1),we=this._keySchedule=[],ge=0;ge<ue;ge++)ge<h?we[ge]=v[ge]:(c=we[ge-1],ge%h?h>6&&ge%h==4&&(c=L[c>>>24]<<24|L[c>>>16&255]<<16|L[c>>>8&255]<<8|L[255&c]):(c=L[(c=c<<8|c>>>24)>>>24]<<24|L[c>>>16&255]<<16|L[c>>>8&255]<<8|L[255&c],c^=b[ge/h|0]<<24),we[ge]=we[ge-h]^c);for(var pe=this._invKeySchedule=[],Y=0;Y<ue;Y++){if(ge=ue-Y,Y%4)var c=we[ge];else c=we[ge-4];pe[Y]=Y<4||ge<=4?c:T[L[c>>>24]]^I[L[c>>>16&255]]^M[L[c>>>8&255]]^R[L[255&c]]}}},encryptBlock:function(c,o){this._doCryptBlock(c,o,this._keySchedule,x,P,w,S,L)},decryptBlock:function(c,o){var v=c[o+1];c[o+1]=c[o+3],c[o+3]=v,this._doCryptBlock(c,o,this._invKeySchedule,T,I,M,R,F),v=c[o+1],c[o+1]=c[o+3],c[o+3]=v},_doCryptBlock:function(c,o,v,h,K,ue,we,ge){for(var pe=this._nRounds,Y=c[o]^v[0],$=c[o+1]^v[1],J=c[o+2]^v[2],G=c[o+3]^v[3],q=4,H=1;H<pe;H++){var ie=h[Y>>>24]^K[$>>>16&255]^ue[J>>>8&255]^we[255&G]^v[q++],Ce=h[$>>>24]^K[J>>>16&255]^ue[G>>>8&255]^we[255&Y]^v[q++],Fe=h[J>>>24]^K[G>>>16&255]^ue[Y>>>8&255]^we[255&$]^v[q++],me=h[G>>>24]^K[Y>>>16&255]^ue[$>>>8&255]^we[255&J]^v[q++];Y=ie,$=Ce,J=Fe,G=me}ie=(ge[Y>>>24]<<24|ge[$>>>16&255]<<16|ge[J>>>8&255]<<8|ge[255&G])^v[q++],Ce=(ge[$>>>24]<<24|ge[J>>>16&255]<<16|ge[G>>>8&255]<<8|ge[255&Y])^v[q++],Fe=(ge[J>>>24]<<24|ge[G>>>16&255]<<16|ge[Y>>>8&255]<<8|ge[255&$])^v[q++],me=(ge[G>>>24]<<24|ge[Y>>>16&255]<<16|ge[$>>>8&255]<<8|ge[255&J])^v[q++],c[o]=ie,c[o+1]=Ce,c[o+2]=Fe,c[o+3]=me},keySize:8});u.AES=p._createHelper(y)}(),g.AES)},3057:function(oe,N,l){var D,p,B,L,F,x,w,T,I,R,b,y,o,h,ue,we,pe,Y,g;oe.exports=(g=l(7585),l(7865),void(g.lib.Cipher||(D=g,p=D.lib,B=p.Base,L=p.WordArray,F=p.BufferedBlockAlgorithm,x=D.enc,w=x.Base64,T=D.algo.EvpKDF,I=p.Cipher=F.extend({cfg:B.extend(),createEncryptor:function($,J){return this.create(this._ENC_XFORM_MODE,$,J)},createDecryptor:function($,J){return this.create(this._DEC_XFORM_MODE,$,J)},init:function($,J,G){this.cfg=this.cfg.extend(G),this._xformMode=$,this._key=J,this.reset()},reset:function(){F.reset.call(this),this._doReset()},process:function($){return this._append($),this._process()},finalize:function($){return $&&this._append($),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function $(J){return"string"==typeof J?Y:we}return function(J){return{encrypt:function(G,q,H){return $(q).encrypt(J,G,q,H)},decrypt:function(G,q,H){return $(q).decrypt(J,G,q,H)}}}}()}),p.StreamCipher=I.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),R=D.mode={},b=p.BlockCipherMode=B.extend({createEncryptor:function($,J){return this.Encryptor.create($,J)},createDecryptor:function($,J){return this.Decryptor.create($,J)},init:function($,J){this._cipher=$,this._iv=J}}),y=R.CBC=function(){var $=b.extend();function J(G,q,H){var ie,Ce=this._iv;Ce?(ie=Ce,this._iv=undefined):ie=this._prevBlock;for(var Fe=0;Fe<H;Fe++)G[q+Fe]^=ie[Fe]}return $.Encryptor=$.extend({processBlock:function(G,q){var H=this._cipher,ie=H.blockSize;J.call(this,G,q,ie),H.encryptBlock(G,q),this._prevBlock=G.slice(q,q+ie)}}),$.Decryptor=$.extend({processBlock:function(G,q){var H=this._cipher,ie=H.blockSize,Ce=G.slice(q,q+ie);H.decryptBlock(G,q),J.call(this,G,q,ie),this._prevBlock=Ce}}),$}(),o=(D.pad={}).Pkcs7={pad:function($,J){for(var G=4*J,q=G-$.sigBytes%G,H=q<<24|q<<16|q<<8|q,ie=[],Ce=0;Ce<q;Ce+=4)ie.push(H);var Fe=L.create(ie,q);$.concat(Fe)},unpad:function($){$.sigBytes-=255&$.words[$.sigBytes-1>>>2]}},p.BlockCipher=I.extend({cfg:I.cfg.extend({mode:y,padding:o}),reset:function(){var $;I.reset.call(this);var J=this.cfg,G=J.iv,q=J.mode;this._xformMode==this._ENC_XFORM_MODE?$=q.createEncryptor:($=q.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==$?this._mode.init(this,G&&G.words):(this._mode=$.call(q,this,G&&G.words),this._mode.__creator=$)},_doProcessBlock:function($,J){this._mode.processBlock($,J)},_doFinalize:function(){var $,J=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(J.pad(this._data,this.blockSize),$=this._process(!0)):($=this._process(!0),J.unpad($)),$},blockSize:4}),h=p.CipherParams=B.extend({init:function($){this.mixIn($)},toString:function($){return($||this.formatter).stringify(this)}}),ue=(D.format={}).OpenSSL={stringify:function($){var G=$.ciphertext,q=$.salt;return(q?L.create([1398893684,1701076831]).concat(q).concat(G):G).toString(w)},parse:function($){var J,G=w.parse($),q=G.words;return 1398893684==q[0]&&1701076831==q[1]&&(J=L.create(q.slice(2,4)),q.splice(0,4),G.sigBytes-=16),h.create({ciphertext:G,salt:J})}},we=p.SerializableCipher=B.extend({cfg:B.extend({format:ue}),encrypt:function($,J,G,q){q=this.cfg.extend(q);var H=$.createEncryptor(G,q),ie=H.finalize(J),Ce=H.cfg;return h.create({ciphertext:ie,key:G,iv:Ce.iv,algorithm:$,mode:Ce.mode,padding:Ce.padding,blockSize:$.blockSize,formatter:q.format})},decrypt:function($,J,G,q){return q=this.cfg.extend(q),J=this._parse(J,q.format),$.createDecryptor(G,q).finalize(J.ciphertext)},_parse:function($,J){return"string"==typeof $?J.parse($,this):$}}),pe=(D.kdf={}).OpenSSL={execute:function($,J,G,q){q||(q=L.random(8));var H=T.create({keySize:J+G}).compute($,q),ie=L.create(H.words.slice(J),4*G);return H.sigBytes=4*J,h.create({key:H,iv:ie,salt:q})}},Y=p.PasswordBasedCipher=we.extend({cfg:we.cfg.extend({kdf:pe}),encrypt:function($,J,G,q){var H=(q=this.cfg.extend(q)).kdf.execute(G,$.keySize,$.ivSize);q.iv=H.iv;var ie=we.encrypt.call(this,$,J,H.key,q);return ie.mixIn(H),ie},decrypt:function($,J,G,q){q=this.cfg.extend(q),J=this._parse(J,q.format);var H=q.kdf.execute(G,$.keySize,$.ivSize,J.salt);return q.iv=H.iv,we.decrypt.call(this,$,J,H.key,q)}}))))},7585:function(oe,N,l){var g;oe.exports=(g=g||function(u,D){var p;if("undefined"!=typeof window&&window.crypto&&(p=window.crypto),"undefined"!=typeof self&&self.crypto&&(p=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(p=globalThis.crypto),!p&&"undefined"!=typeof window&&window.msCrypto&&(p=window.msCrypto),!p&&"undefined"!=typeof global&&global.crypto&&(p=global.crypto),!p)try{p=l(2480)}catch{}var B=function(){if(p){if("function"==typeof p.getRandomValues)try{return p.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof p.randomBytes)try{return p.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},L=Object.create||function(){function c(){}return function(o){var v;return c.prototype=o,v=new c,c.prototype=null,v}}(),F={},x=F.lib={},P=x.Base={extend:function(c){var o=L(this);return c&&o.mixIn(c),(!o.hasOwnProperty("init")||this.init===o.init)&&(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var o in c)c.hasOwnProperty(o)&&(this[o]=c[o]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}},w=x.WordArray=P.extend({init:function(c,o){c=this.words=c||[],this.sigBytes=null!=o?o:4*c.length},toString:function(c){return(c||T).stringify(this)},concat:function(c){var o=this.words,v=c.words,h=this.sigBytes,K=c.sigBytes;if(this.clamp(),h%4)for(var ue=0;ue<K;ue++)o[h+ue>>>2]|=(v[ue>>>2]>>>24-ue%4*8&255)<<24-(h+ue)%4*8;else for(var ge=0;ge<K;ge+=4)o[h+ge>>>2]=v[ge>>>2];return this.sigBytes+=K,this},clamp:function(){var c=this.words,o=this.sigBytes;c[o>>>2]&=4294967295<<32-o%4*8,c.length=u.ceil(o/4)},clone:function(){var c=P.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var o=[],v=0;v<c;v+=4)o.push(B());return new w.init(o,c)}}),S=F.enc={},T=S.Hex={stringify:function(c){for(var o=c.words,v=c.sigBytes,h=[],K=0;K<v;K++){var ue=o[K>>>2]>>>24-K%4*8&255;h.push((ue>>>4).toString(16)),h.push((15&ue).toString(16))}return h.join("")},parse:function(c){for(var o=c.length,v=[],h=0;h<o;h+=2)v[h>>>3]|=parseInt(c.substr(h,2),16)<<24-h%8*4;return new w.init(v,o/2)}},I=S.Latin1={stringify:function(c){for(var o=c.words,v=c.sigBytes,h=[],K=0;K<v;K++)h.push(String.fromCharCode(o[K>>>2]>>>24-K%4*8&255));return h.join("")},parse:function(c){for(var o=c.length,v=[],h=0;h<o;h++)v[h>>>2]|=(255&c.charCodeAt(h))<<24-h%4*8;return new w.init(v,o)}},M=S.Utf8={stringify:function(c){try{return decodeURIComponent(escape(I.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return I.parse(unescape(encodeURIComponent(c)))}},R=x.BufferedBlockAlgorithm=P.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(c){"string"==typeof c&&(c=M.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var o,v=this._data,h=v.words,K=v.sigBytes,ue=this.blockSize,ge=K/(4*ue),pe=(ge=c?u.ceil(ge):u.max((0|ge)-this._minBufferSize,0))*ue,Y=u.min(4*pe,K);if(pe){for(var $=0;$<pe;$+=ue)this._doProcessBlock(h,$);o=h.splice(0,pe),v.sigBytes-=Y}return new w.init(o,Y)},clone:function(){var c=P.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0}),y=(x.Hasher=R.extend({cfg:P.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){R.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(o,v){return new c.init(v).finalize(o)}},_createHmacHelper:function(c){return function(o,v){return new y.HMAC.init(c,v).finalize(o)}}}),F.algo={});return F}(Math),g)},8319:function(oe,N,l){var g,p;oe.exports=(g=l(7585),p=g.lib.WordArray,g.enc.Base64={stringify:function(x){var P=x.words,w=x.sigBytes,S=this._map;x.clamp();for(var T=[],I=0;I<w;I+=3)for(var y=(P[I>>>2]>>>24-I%4*8&255)<<16|(P[I+1>>>2]>>>24-(I+1)%4*8&255)<<8|P[I+2>>>2]>>>24-(I+2)%4*8&255,c=0;c<4&&I+.75*c<w;c++)T.push(S.charAt(y>>>6*(3-c)&63));var o=S.charAt(64);if(o)for(;T.length%4;)T.push(o);return T.join("")},parse:function(x){var P=x.length,w=this._map,S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var T=0;T<w.length;T++)S[w.charCodeAt(T)]=T}var I=w.charAt(64);if(I){var M=x.indexOf(I);-1!==M&&(P=M)}return function(x,P,w){for(var S=[],T=0,I=0;I<P;I++)if(I%4){var M=w[x.charCodeAt(I-1)]<<I%4*2,R=w[x.charCodeAt(I)]>>>6-I%4*2;S[T>>>2]|=(M|R)<<24-T%4*8,T++}return p.create(S,T)}(x,P,S)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},g.enc.Base64)},4384:function(oe,N,l){oe.exports=l(7585).enc.Utf8},7865:function(oe,N,l){var u,D,p,B,L,x,g;oe.exports=(g=l(7585),l(5162),l(3764),B=(D=(u=g).lib).WordArray,x=(L=u.algo).EvpKDF=(p=D.Base).extend({cfg:p.extend({keySize:4,hasher:L.MD5,iterations:1}),init:function(P){this.cfg=this.cfg.extend(P)},compute:function(P,w){for(var S,T=this.cfg,I=T.hasher.create(),M=B.create(),R=M.words,b=T.keySize,y=T.iterations;R.length<b;){S&&I.update(S),S=I.update(P).finalize(w),I.reset();for(var c=1;c<y;c++)S=I.finalize(S),I.reset();M.concat(S)}return M.sigBytes=4*b,M}}),u.EvpKDF=function(P,w,S){return x.create(S).compute(P,w)},g.EvpKDF)},3764:function(oe,N,l){var g,L;oe.exports=(g=l(7585),L=g.enc.Utf8,void(g.algo.HMAC=g.lib.Base.extend({init:function(P,w){P=this._hasher=new P.init,"string"==typeof w&&(w=L.parse(w));var S=P.blockSize,T=4*S;w.sigBytes>T&&(w=P.finalize(w)),w.clamp();for(var I=this._oKey=w.clone(),M=this._iKey=w.clone(),R=I.words,b=M.words,y=0;y<S;y++)R[y]^=1549556828,b[y]^=909522486;I.sigBytes=M.sigBytes=T,this.reset()},reset:function(){var P=this._hasher;P.reset(),P.update(this._iKey)},update:function(P){return this._hasher.update(P),this},finalize:function(P){var w=this._hasher,S=w.finalize(P);return w.reset(),w.finalize(this._oKey.clone().concat(S))}})))},9493:function(oe,N,l){var g;oe.exports=(g=l(7585),function(u){var D=g,p=D.lib,B=p.WordArray,L=p.Hasher,F=D.algo,x=[];!function(){for(var M=0;M<64;M++)x[M]=4294967296*u.abs(u.sin(M+1))|0}();var P=F.MD5=L.extend({_doReset:function(){this._hash=new B.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(M,R){for(var b=0;b<16;b++){var y=R+b,c=M[y];M[y]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var o=this._hash.words,v=M[R+0],h=M[R+1],K=M[R+2],ue=M[R+3],we=M[R+4],ge=M[R+5],pe=M[R+6],Y=M[R+7],$=M[R+8],J=M[R+9],G=M[R+10],q=M[R+11],H=M[R+12],ie=M[R+13],Ce=M[R+14],Fe=M[R+15],me=o[0],_e=o[1],ne=o[2],fe=o[3];me=w(me,_e,ne,fe,v,7,x[0]),fe=w(fe,me,_e,ne,h,12,x[1]),ne=w(ne,fe,me,_e,K,17,x[2]),_e=w(_e,ne,fe,me,ue,22,x[3]),me=w(me,_e,ne,fe,we,7,x[4]),fe=w(fe,me,_e,ne,ge,12,x[5]),ne=w(ne,fe,me,_e,pe,17,x[6]),_e=w(_e,ne,fe,me,Y,22,x[7]),me=w(me,_e,ne,fe,$,7,x[8]),fe=w(fe,me,_e,ne,J,12,x[9]),ne=w(ne,fe,me,_e,G,17,x[10]),_e=w(_e,ne,fe,me,q,22,x[11]),me=w(me,_e,ne,fe,H,7,x[12]),fe=w(fe,me,_e,ne,ie,12,x[13]),ne=w(ne,fe,me,_e,Ce,17,x[14]),me=S(me,_e=w(_e,ne,fe,me,Fe,22,x[15]),ne,fe,h,5,x[16]),fe=S(fe,me,_e,ne,pe,9,x[17]),ne=S(ne,fe,me,_e,q,14,x[18]),_e=S(_e,ne,fe,me,v,20,x[19]),me=S(me,_e,ne,fe,ge,5,x[20]),fe=S(fe,me,_e,ne,G,9,x[21]),ne=S(ne,fe,me,_e,Fe,14,x[22]),_e=S(_e,ne,fe,me,we,20,x[23]),me=S(me,_e,ne,fe,J,5,x[24]),fe=S(fe,me,_e,ne,Ce,9,x[25]),ne=S(ne,fe,me,_e,ue,14,x[26]),_e=S(_e,ne,fe,me,$,20,x[27]),me=S(me,_e,ne,fe,ie,5,x[28]),fe=S(fe,me,_e,ne,K,9,x[29]),ne=S(ne,fe,me,_e,Y,14,x[30]),me=T(me,_e=S(_e,ne,fe,me,H,20,x[31]),ne,fe,ge,4,x[32]),fe=T(fe,me,_e,ne,$,11,x[33]),ne=T(ne,fe,me,_e,q,16,x[34]),_e=T(_e,ne,fe,me,Ce,23,x[35]),me=T(me,_e,ne,fe,h,4,x[36]),fe=T(fe,me,_e,ne,we,11,x[37]),ne=T(ne,fe,me,_e,Y,16,x[38]),_e=T(_e,ne,fe,me,G,23,x[39]),me=T(me,_e,ne,fe,ie,4,x[40]),fe=T(fe,me,_e,ne,v,11,x[41]),ne=T(ne,fe,me,_e,ue,16,x[42]),_e=T(_e,ne,fe,me,pe,23,x[43]),me=T(me,_e,ne,fe,J,4,x[44]),fe=T(fe,me,_e,ne,H,11,x[45]),ne=T(ne,fe,me,_e,Fe,16,x[46]),me=I(me,_e=T(_e,ne,fe,me,K,23,x[47]),ne,fe,v,6,x[48]),fe=I(fe,me,_e,ne,Y,10,x[49]),ne=I(ne,fe,me,_e,Ce,15,x[50]),_e=I(_e,ne,fe,me,ge,21,x[51]),me=I(me,_e,ne,fe,H,6,x[52]),fe=I(fe,me,_e,ne,ue,10,x[53]),ne=I(ne,fe,me,_e,G,15,x[54]),_e=I(_e,ne,fe,me,h,21,x[55]),me=I(me,_e,ne,fe,$,6,x[56]),fe=I(fe,me,_e,ne,Fe,10,x[57]),ne=I(ne,fe,me,_e,pe,15,x[58]),_e=I(_e,ne,fe,me,ie,21,x[59]),me=I(me,_e,ne,fe,we,6,x[60]),fe=I(fe,me,_e,ne,q,10,x[61]),ne=I(ne,fe,me,_e,K,15,x[62]),_e=I(_e,ne,fe,me,J,21,x[63]),o[0]=o[0]+me|0,o[1]=o[1]+_e|0,o[2]=o[2]+ne|0,o[3]=o[3]+fe|0},_doFinalize:function(){var M=this._data,R=M.words,b=8*this._nDataBytes,y=8*M.sigBytes;R[y>>>5]|=128<<24-y%32;var c=u.floor(b/4294967296),o=b;R[15+(y+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),R[14+(y+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),M.sigBytes=4*(R.length+1),this._process();for(var v=this._hash,h=v.words,K=0;K<4;K++){var ue=h[K];h[K]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8)}return v},clone:function(){var M=L.clone.call(this);return M._hash=this._hash.clone(),M}});function w(M,R,b,y,c,o,v){var h=M+(R&b|~R&y)+c+v;return(h<<o|h>>>32-o)+R}function S(M,R,b,y,c,o,v){var h=M+(R&y|b&~y)+c+v;return(h<<o|h>>>32-o)+R}function T(M,R,b,y,c,o,v){var h=M+(R^b^y)+c+v;return(h<<o|h>>>32-o)+R}function I(M,R,b,y,c,o,v){var h=M+(b^(R|~y))+c+v;return(h<<o|h>>>32-o)+R}D.MD5=L._createHelper(P),D.HmacMD5=L._createHmacHelper(P)}(Math),g.MD5)},5162:function(oe,N,l){var u,D,p,B,F,x,g;oe.exports=(g=l(7585),p=(D=(u=g).lib).WordArray,F=[],x=u.algo.SHA1=(B=D.Hasher).extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(P,w){for(var S=this._hash.words,T=S[0],I=S[1],M=S[2],R=S[3],b=S[4],y=0;y<80;y++){if(y<16)F[y]=0|P[w+y];else{var c=F[y-3]^F[y-8]^F[y-14]^F[y-16];F[y]=c<<1|c>>>31}var o=(T<<5|T>>>27)+b+F[y];o+=y<20?1518500249+(I&M|~I&R):y<40?1859775393+(I^M^R):y<60?(I&M|I&R|M&R)-1894007588:(I^M^R)-899497514,b=R,R=M,M=I<<30|I>>>2,I=T,T=o}S[0]=S[0]+T|0,S[1]=S[1]+I|0,S[2]=S[2]+M|0,S[3]=S[3]+R|0,S[4]=S[4]+b|0},_doFinalize:function(){var P=this._data,w=P.words,S=8*this._nDataBytes,T=8*P.sigBytes;return w[T>>>5]|=128<<24-T%32,w[14+(T+64>>>9<<4)]=Math.floor(S/4294967296),w[15+(T+64>>>9<<4)]=S,P.sigBytes=4*w.length,this._process(),this._hash},clone:function(){var P=B.clone.call(this);return P._hash=this._hash.clone(),P}}),u.SHA1=B._createHelper(x),u.HmacSHA1=B._createHmacHelper(x),g.SHA1)},6952:(oe,N,l)=>{var g=l(1356),u=l(3407),D=l(2e3),p=l(2342),B=l(9235),L=l(2374),F=Date.prototype.getTime;function P(T){return null==T}function w(T){return!(!T||"object"!=typeof T||"number"!=typeof T.length||"function"!=typeof T.copy||"function"!=typeof T.slice||T.length>0&&"number"!=typeof T[0])}oe.exports=function x(T,I,M){var R=M||{};return!!(R.strict?D(T,I):T===I)||(!T||!I||"object"!=typeof T&&"object"!=typeof I?R.strict?D(T,I):T==I:function(T,I,M){var R,b;if(typeof T!=typeof I||P(T)||P(I)||T.prototype!==I.prototype||u(T)!==u(I))return!1;var y=p(T),c=p(I);if(y!==c)return!1;if(y||c)return T.source===I.source&&B(T)===B(I);if(L(T)&&L(I))return F.call(T)===F.call(I);var o=w(T),v=w(I);if(o!==v)return!1;if(o||v){if(T.length!==I.length)return!1;for(R=0;R<T.length;R++)if(T[R]!==I[R])return!1;return!0}if(typeof T!=typeof I)return!1;try{var h=g(T),K=g(I)}catch{return!1}if(h.length!==K.length)return!1;for(h.sort(),K.sort(),R=h.length-1;R>=0;R--)if(h[R]!=K[R])return!1;for(R=h.length-1;R>=0;R--)if(!x(T[b=h[R]],I[b],M))return!1;return!0}(T,I,R))}},4949:oe=>{oe.exports=function N(l){return Object.freeze(l),Object.getOwnPropertyNames(l).forEach(function(g){l.hasOwnProperty(g)&&null!==l[g]&&("object"==typeof l[g]||"function"==typeof l[g])&&!Object.isFrozen(l[g])&&N(l[g])}),l}},2358:(oe,N,l)=>{var g=l(1356),u="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),D=Object.prototype.toString,p=Array.prototype.concat,B=Object.defineProperty,x=B&&function(){var S={};try{for(var T in B(S,"x",{enumerable:!1,value:S}),S)return!1;return S.x===S}catch{return!1}}(),P=function(S,T,I,M){T in S&&(!function(S){return"function"==typeof S&&"[object Function]"===D.call(S)}(M)||!M())||(x?B(S,T,{configurable:!0,enumerable:!1,value:I,writable:!0}):S[T]=I)},w=function(S,T){var I=arguments.length>2?arguments[2]:{},M=g(T);u&&(M=p.call(M,Object.getOwnPropertySymbols(T)));for(var R=0;R<M.length;R+=1)P(S,M[R],T[M[R]],I[M[R]])};w.supportsDescriptors=!!x,oe.exports=w},9069:oe=>{var g,N="object"==typeof Reflect?Reflect:null,l=N&&"function"==typeof N.apply?N.apply:function(v,h,K){return Function.prototype.apply.call(v,h,K)};g=N&&"function"==typeof N.ownKeys?N.ownKeys:Object.getOwnPropertySymbols?function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:function(v){return Object.getOwnPropertyNames(v)};var D=Number.isNaN||function(v){return v!=v};function p(){p.init.call(this)}oe.exports=p,oe.exports.once=function(o,v){return new Promise(function(h,K){function ue(ge){o.removeListener(v,we),K(ge)}function we(){"function"==typeof o.removeListener&&o.removeListener("error",ue),h([].slice.call(arguments))}c(o,v,we,{once:!0}),"error"!==v&&function(o,v,h){"function"==typeof o.on&&c(o,"error",v,{once:!0})}(o,ue)})},p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var B=10;function L(o){if("function"!=typeof o)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}function F(o){return void 0===o._maxListeners?p.defaultMaxListeners:o._maxListeners}function x(o,v,h,K){var ue,we,ge;if(L(h),void 0===(we=o._events)?(we=o._events=Object.create(null),o._eventsCount=0):(void 0!==we.newListener&&(o.emit("newListener",v,h.listener?h.listener:h),we=o._events),ge=we[v]),void 0===ge)ge=we[v]=h,++o._eventsCount;else if("function"==typeof ge?ge=we[v]=K?[h,ge]:[ge,h]:K?ge.unshift(h):ge.push(h),(ue=F(o))>0&&ge.length>ue&&!ge.warned){ge.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+ge.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=o,pe.type=v,pe.count=ge.length,function(o){console&&console.warn&&console.warn(o)}(pe)}return o}function P(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(o,v,h){var K={fired:!1,wrapFn:void 0,target:o,type:v,listener:h},ue=P.bind(K);return ue.listener=h,K.wrapFn=ue,ue}function S(o,v,h){var K=o._events;if(void 0===K)return[];var ue=K[v];return void 0===ue?[]:"function"==typeof ue?h?[ue.listener||ue]:[ue]:h?function(o){for(var v=new Array(o.length),h=0;h<v.length;++h)v[h]=o[h].listener||o[h];return v}(ue):I(ue,ue.length)}function T(o){var v=this._events;if(void 0!==v){var h=v[o];if("function"==typeof h)return 1;if(void 0!==h)return h.length}return 0}function I(o,v){for(var h=new Array(v),K=0;K<v;++K)h[K]=o[K];return h}function c(o,v,h,K){if("function"==typeof o.on)K.once?o.once(v,h):o.on(v,h);else{if("function"!=typeof o.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o);o.addEventListener(v,function ue(we){K.once&&o.removeEventListener(v,ue),h(we)})}}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(o){if("number"!=typeof o||o<0||D(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");B=o}}),p.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(v){if("number"!=typeof v||v<0||D(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this},p.prototype.getMaxListeners=function(){return F(this)},p.prototype.emit=function(v){for(var h=[],K=1;K<arguments.length;K++)h.push(arguments[K]);var ue="error"===v,we=this._events;if(void 0!==we)ue=ue&&void 0===we.error;else if(!ue)return!1;if(ue){var ge;if(h.length>0&&(ge=h[0]),ge instanceof Error)throw ge;var pe=new Error("Unhandled error."+(ge?" ("+ge.message+")":""));throw pe.context=ge,pe}var Y=we[v];if(void 0===Y)return!1;if("function"==typeof Y)l(Y,this,h);else{var $=Y.length,J=I(Y,$);for(K=0;K<$;++K)l(J[K],this,h)}return!0},p.prototype.on=p.prototype.addListener=function(v,h){return x(this,v,h,!1)},p.prototype.prependListener=function(v,h){return x(this,v,h,!0)},p.prototype.once=function(v,h){return L(h),this.on(v,w(this,v,h)),this},p.prototype.prependOnceListener=function(v,h){return L(h),this.prependListener(v,w(this,v,h)),this},p.prototype.off=p.prototype.removeListener=function(v,h){var K,ue,we,ge,pe;if(L(h),void 0===(ue=this._events))return this;if(void 0===(K=ue[v]))return this;if(K===h||K.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete ue[v],ue.removeListener&&this.emit("removeListener",v,K.listener||h));else if("function"!=typeof K){for(we=-1,ge=K.length-1;ge>=0;ge--)if(K[ge]===h||K[ge].listener===h){pe=K[ge].listener,we=ge;break}if(we<0)return this;0===we?K.shift():function(o,v){for(;v+1<o.length;v++)o[v]=o[v+1];o.pop()}(K,we),1===K.length&&(ue[v]=K[0]),void 0!==ue.removeListener&&this.emit("removeListener",v,pe||h)}return this},p.prototype.removeAllListeners=function(v){var h,K,ue;if(void 0===(K=this._events))return this;if(void 0===K.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==K[v]&&(0==--this._eventsCount?this._events=Object.create(null):delete K[v]),this;if(0===arguments.length){var ge,we=Object.keys(K);for(ue=0;ue<we.length;++ue)"removeListener"!==(ge=we[ue])&&this.removeAllListeners(ge);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=K[v]))this.removeListener(v,h);else if(void 0!==h)for(ue=h.length-1;ue>=0;ue--)this.removeListener(v,h[ue]);return this},p.prototype.listeners=function(v){return S(this,v,!0)},p.prototype.rawListeners=function(v){return S(this,v,!1)},p.listenerCount=function(o,v){return"function"==typeof o.listenerCount?o.listenerCount(v):T.call(o,v)},p.prototype.listenerCount=T,p.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},2559:oe=>{oe.exports=function N(l,g){if(l===g)return!0;if(l&&g&&"object"==typeof l&&"object"==typeof g){if(l.constructor!==g.constructor)return!1;var u,D,p;if(Array.isArray(l)){if((u=l.length)!=g.length)return!1;for(D=u;0!=D--;)if(!N(l[D],g[D]))return!1;return!0}if(l.constructor===RegExp)return l.source===g.source&&l.flags===g.flags;if(l.valueOf!==Object.prototype.valueOf)return l.valueOf()===g.valueOf();if(l.toString!==Object.prototype.toString)return l.toString()===g.toString();if((u=(p=Object.keys(l)).length)!==Object.keys(g).length)return!1;for(D=u;0!=D--;)if(!Object.prototype.hasOwnProperty.call(g,p[D]))return!1;for(D=u;0!=D--;){var B=p[D];if(!N(l[B],g[B]))return!1}return!0}return l!=l&&g!=g}},9076:oe=>{var N=Object.prototype.hasOwnProperty,l=Object.prototype.toString;oe.exports=function(u,D,p){if("[object Function]"!==l.call(D))throw new TypeError("iterator must be a function");var B=u.length;if(B===+B)for(var L=0;L<B;L++)D.call(p,u[L],L,u);else for(var F in u)N.call(u,F)&&D.call(p,u[F],F,u)}},3457:oe=>{var N="Function.prototype.bind called on incompatible ",l=Array.prototype.slice,g=Object.prototype.toString,u="[object Function]";oe.exports=function(p){var B=this;if("function"!=typeof B||g.call(B)!==u)throw new TypeError(N+B);for(var F,L=l.call(arguments,1),x=function(){if(this instanceof F){var I=B.apply(this,L.concat(l.call(arguments)));return Object(I)===I?I:this}return B.apply(p,L.concat(l.call(arguments)))},P=Math.max(0,B.length-L.length),w=[],S=0;S<P;S++)w.push("$"+S);if(F=Function("binder","return function ("+w.join(",")+"){ return binder.apply(this,arguments); }")(x),B.prototype){var T=function(){};T.prototype=B.prototype,F.prototype=new T,T.prototype=null}return F}},4444:(oe,N,l)=>{var g=l(3457);oe.exports=Function.prototype.bind||g},1227:(oe,N,l)=>{for(var g=l(6788),u=l(7549),D=/[\{\[]/,p=/[\}\]]/,B=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],L={},F=0;F<B.length;F++)L[B[F]]=!0;var x=function(S){return u(S)&&!L.hasOwnProperty(S)},P={s:function(S){return""+S},d:function(S){return""+Number(S)},o:function(S){return JSON.stringify(S)}},w=function(){var S=[],T=0,I={},M=function(y){for(var c="";c.length<2*T;)c+="  ";S.push(c+y)},R=function(y){return p.test(y.trim()[0])&&D.test(y[y.length-1])?(T--,M(y),void T++):D.test(y[y.length-1])?(M(y),void T++):p.test(y.trim()[0])?(T--,void M(y)):void M(y)},b=function(y){if(!y)return b;if(1===arguments.length&&y.indexOf("\n")>-1)for(var c=y.trim().split("\n"),o=0;o<c.length;o++)R(c[o].trim());else R(g.format.apply(g,arguments));return b};return b.scope={},b.formats=P,b.sym=function(y){return(!y||!x(y))&&(y="tmp"),I[y]||(I[y]=0),y+(I[y]++||"")},b.property=function(y,c){return 1===arguments.length&&(c=y,y=""),u(c+="")?y?y+"."+c:c:y?y+"["+JSON.stringify(c)+"]":JSON.stringify(c)},b.toString=function(){return S.join("\n")},b.toFunction=function(y){y||(y={});var c="return ("+b.toString()+")";Object.keys(b.scope).forEach(function(h){y[h]||(y[h]=b.scope[h])});var o=Object.keys(y).map(function(h){return h}),v=o.map(function(h){return y[h]});return Function.apply(null,o.concat(c)).apply(null,v)},arguments.length&&b.apply(null,arguments),b};w.formats=P,oe.exports=w},2562:(oe,N,l)=>{var g=l(7549),u=function(D,p){return g(p)?D+"."+p:D+"["+JSON.stringify(p)+"]"};u.valid=g,u.property=function(D){return g(D)?D:JSON.stringify(D)},oe.exports=u},5203:(oe,N,l)=>{var g,u=SyntaxError,D=Function,p=TypeError,B=function(pe){try{return D('"use strict"; return ('+pe+").constructor;")()}catch{}},L=Object.getOwnPropertyDescriptor;if(L)try{L({},"")}catch{L=null}var F=function(){throw new p},x=L?function(){try{return F}catch{try{return L(arguments,"callee").get}catch{return F}}}():F,P=l(2969)(),w=Object.getPrototypeOf||function(pe){return pe.__proto__},S={},T="undefined"==typeof Uint8Array?g:w(Uint8Array),I={"%AggregateError%":"undefined"==typeof AggregateError?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?g:ArrayBuffer,"%ArrayIteratorPrototype%":P?w([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":S,"%AsyncGenerator%":S,"%AsyncGeneratorFunction%":S,"%AsyncIteratorPrototype%":S,"%Atomics%":"undefined"==typeof Atomics?g:Atomics,"%BigInt%":"undefined"==typeof BigInt?g:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?g:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?g:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?g:FinalizationRegistry,"%Function%":D,"%GeneratorFunction%":S,"%Int8Array%":"undefined"==typeof Int8Array?g:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?g:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":P?w(w([][Symbol.iterator]())):g,"%JSON%":"object"==typeof JSON?JSON:g,"%Map%":"undefined"==typeof Map?g:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&P?w((new Map)[Symbol.iterator]()):g,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?g:Promise,"%Proxy%":"undefined"==typeof Proxy?g:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?g:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?g:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&P?w((new Set)[Symbol.iterator]()):g,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":P?w(""[Symbol.iterator]()):g,"%Symbol%":P?Symbol:g,"%SyntaxError%":u,"%ThrowTypeError%":x,"%TypedArray%":T,"%TypeError%":p,"%Uint8Array%":"undefined"==typeof Uint8Array?g:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?g:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?g:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?g:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?g:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?g:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?g:WeakSet},M=function pe(Y){var $;if("%AsyncFunction%"===Y)$=B("async function () {}");else if("%GeneratorFunction%"===Y)$=B("function* () {}");else if("%AsyncGeneratorFunction%"===Y)$=B("async function* () {}");else if("%AsyncGenerator%"===Y){var J=pe("%AsyncGeneratorFunction%");J&&($=J.prototype)}else if("%AsyncIteratorPrototype%"===Y){var G=pe("%AsyncGenerator%");G&&($=w(G.prototype))}return I[Y]=$,$},R={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=l(4444),y=l(3164),c=b.call(Function.call,Array.prototype.concat),o=b.call(Function.apply,Array.prototype.splice),v=b.call(Function.call,String.prototype.replace),h=b.call(Function.call,String.prototype.slice),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ue=/\\(\\)?/g,we=function(Y){var $=h(Y,0,1),J=h(Y,-1);if("%"===$&&"%"!==J)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===J&&"%"!==$)throw new u("invalid intrinsic syntax, expected opening `%`");var G=[];return v(Y,K,function(q,H,ie,Ce){G[G.length]=ie?v(Ce,ue,"$1"):H||q}),G},ge=function(Y,$){var G,J=Y;if(y(R,J)&&(J="%"+(G=R[J])[0]+"%"),y(I,J)){var q=I[J];if(q===S&&(q=M(J)),void 0===q&&!$)throw new p("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:G,name:J,value:q}}throw new u("intrinsic "+Y+" does not exist!")};oe.exports=function(Y,$){if("string"!=typeof Y||0===Y.length)throw new p("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof $)throw new p('"allowMissing" argument must be a boolean');var J=we(Y),G=J.length>0?J[0]:"",q=ge("%"+G+"%",$),H=q.name,ie=q.value,Ce=!1,Fe=q.alias;Fe&&(G=Fe[0],o(J,c([0,1],Fe)));for(var me=1,_e=!0;me<J.length;me+=1){var ne=J[me],fe=h(ne,0,1),Te=h(ne,-1);if(('"'===fe||"'"===fe||"`"===fe||'"'===Te||"'"===Te||"`"===Te)&&fe!==Te)throw new u("property names with quotes must have matching quotes");if(("constructor"===ne||!_e)&&(Ce=!0),y(I,H="%"+(G+="."+ne)+"%"))ie=I[H];else if(null!=ie){if(!(ne in ie)){if(!$)throw new p("base intrinsic for "+Y+" exists, but the property is not available.");return}if(L&&me+1>=J.length){var je=L(ie,ne);ie=(_e=!!je)&&"get"in je&&!("originalValue"in je.get)?je.get:ie[ne]}else _e=y(ie,ne),ie=ie[ne];_e&&!Ce&&(I[H]=ie)}}return ie}},2969:(oe,N,l)=>{var g="undefined"!=typeof Symbol&&Symbol,u=l(1983);oe.exports=function(){return"function"==typeof g&&"function"==typeof Symbol&&"symbol"==typeof g("foo")&&"symbol"==typeof Symbol("bar")&&u()}},1983:oe=>{oe.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var l={},g=Symbol("test"),u=Object(g);if("string"==typeof g||"[object Symbol]"!==Object.prototype.toString.call(g)||"[object Symbol]"!==Object.prototype.toString.call(u))return!1;for(g in l[g]=42,l)return!1;if("function"==typeof Object.keys&&0!==Object.keys(l).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(l).length)return!1;var p=Object.getOwnPropertySymbols(l);if(1!==p.length||p[0]!==g||!Object.prototype.propertyIsEnumerable.call(l,g))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var B=Object.getOwnPropertyDescriptor(l,g);if(42!==B.value||!0!==B.enumerable)return!1}return!0}},6259:(oe,N,l)=>{var g=l(1983);oe.exports=function(){return g()&&!!Symbol.toStringTag}},3164:(oe,N,l)=>{var g=l(4444);oe.exports=g.call(Function.call,Object.prototype.hasOwnProperty)},3894:oe=>{oe.exports="function"==typeof Object.create?function(l,g){g&&(l.super_=g,l.prototype=Object.create(g.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:function(l,g){if(g){l.super_=g;var u=function(){};u.prototype=g.prototype,l.prototype=new u,l.prototype.constructor=l}}},3407:(oe,N,l)=>{var g=l(6259)(),D=l(5834)("Object.prototype.toString"),p=function(x){return!(g&&x&&"object"==typeof x&&Symbol.toStringTag in x)&&"[object Arguments]"===D(x)},B=function(x){return!!p(x)||null!==x&&"object"==typeof x&&"number"==typeof x.length&&x.length>=0&&"[object Array]"!==D(x)&&"[object Function]"===D(x.callee)},L=function(){return p(arguments)}();p.isLegacyArguments=B,oe.exports=L?p:B},2374:(oe,N,l)=>{var g=Date.prototype.getDay,D=Object.prototype.toString,B=l(6259)();oe.exports=function(F){return"object"==typeof F&&null!==F&&(B?function(F){try{return g.call(F),!0}catch{return!1}}(F):"[object Date]"===D.call(F))}},9456:oe=>{oe.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&!!process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},110:(oe,N,l)=>{var F,g=Object.prototype.toString,u=Function.prototype.toString,D=/^\s*(?:function)?\*/,p=l(6259)(),B=Object.getPrototypeOf;oe.exports=function(P){if("function"!=typeof P)return!1;if(D.test(u.call(P)))return!0;if(!p)return"[object GeneratorFunction]"===g.call(P);if(!B)return!1;if(void 0===F){var S=function(){if(!p)return!1;try{return Function("return function*() {}")()}catch{}}();F=!!S&&B(S)}return B(P)===F}},1570:oe=>{var N=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l=/\/\d{1,3}(?=%|$)/,g=/\//,u=/%.*$/,D=/([^0-9a-f:/%])/i,p=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/i;function B(x){if(!N.test(x))return!1;var P=x.split(".");if(4!==P.length||"0"===P[0][0]&&P[0].length>1||"0"===P[1][0]&&P[1].length>1||"0"===P[2][0]&&P[2].length>1||"0"===P[3][0]&&P[3].length>1)return!1;var w=Number(P[0]),S=Number(P[1]),T=Number(P[2]),I=Number(P[3]);return w>=0&&w<256&&S>=0&&S<256&&T>=0&&T<256&&I>=0&&I<256}function L(x){var P=x.replace(l,""),w=x.length!==P.length;if(w||!w&&g.test(x))return!1;var S=P.replace(u,""),T=S.lastIndexOf(":");if(-1===T)return!1;var R=B(S.substring(T+1))?S.substring(0,T+1)+"1234:5678":S;if(D.test(R)||p.test(R))return!1;var b=R.split("::");if(b.length>2)return!1;if(2===b.length){var y=""===b[0]?[]:b[0].split(":"),c=""===b[1]?[]:b[1].split(":");if(8-(y.length+c.length)<=0)return!1}else if(8!==R.split(":").length)return!1;return!0}function F(x){return B(x)||L(x)}oe.exports=function(P){if(P||(P={}),4===P.version)return B;if(6===P.version)return L;if(null==P.version)return F;throw new Error("Unknown version: "+P.version)},oe.exports.__all_regexes__=[N,l,g,u,D,p]},1367:(oe,N,l)=>{var g=l(1570),u=/\s/,D=/^[a-zA-Z0-9.-]+$/,p=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/,B=/^\+[0-9][0-9 ]{5,27}[0-9]$/,L=/ {2}/,F=/ /g;N["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(?:\.\d+|)([zZ]|[+-]\d{2}:\d{2})$/,N.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,N.time=/^\d{2}:\d{2}:\d{2}$/,N.email=function(x){return-1!==x.indexOf("@")&&!u.test(x)},N["ip-address"]=N.ipv4=g({version:4}),N.ipv6=g({version:6}),N.uri=/^[a-zA-Z][a-zA-Z0-9+\-.]*:[^\s]*$/,N.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,N.hostname=function(x){if(!D.test(x))return!1;for(var P=x.split("."),w=0;w<P.length;w++)if(!p.test(P[w]))return!1;return!0},N.alpha=/^[a-zA-Z]+$/,N.alphanumeric=/^[a-zA-Z0-9]+$/,N.style=/.:\s*[^;]/g,N.phone=function(x){if(!B.test(x)||L.test(x))return!1;var P=x.substring(1).replace(F,"").length;return P>=7&&P<=15},N["utc-millisec"]=/^[0-9]{1,15}\.?[0-9]{0,15}$/},8167:(oe,N,l)=>{var g=l(2562),u=l(1227),D=l(6936),p=l(1995),B=l(1367),F={any:function(){return"true"},null:function(T){return T+" === null"},boolean:function(T){return"typeof "+T+' === "boolean"'},array:function(T){return"Array.isArray("+T+")"},object:function(T){return"typeof "+T+' === "object" && '+T+" && !Array.isArray("+T+")"},number:function(T){return"typeof "+T+' === "number" && isFinite('+T+")"},integer:function(T){return"typeof "+T+' === "number" && (Math.floor('+T+") === "+T+" || "+T+" > 9007199254740992 || "+T+" < -9007199254740992)"},string:function(T){return"typeof "+T+' === "string"'}},x=function(T,I){I=Math.min(-1===I?T.length:I,T.length);for(var M=[],R=0;R<I;R++)M.push("object"==typeof T[R]?JSON.stringify(T[R]):T[R]);for(R=1;R<M.length;R++)if(M.indexOf(M[R])!==R)return!1;return!0},P=function(T,I){var R=(0|I)!==I?Math.pow(10,I.toString().split(".").pop().length):1;return!(R>1?((0|T)!==T?Math.pow(10,T.toString().split(".").pop().length):1)>R||Math.round(R*T)%(R*I):T%I)},w=function(T,I,M){return M>-1&&I.length>M||T.test(I)},S=function(T,I,M,R,b){var y=b?p(B,b.formats):B,c={unique:x,formats:y,isMultipleOf:P,testLimitedRegex:w},o=!!b&&!!b.verbose,v=!(!b||void 0===b.greedy)&&b.greedy,h={},K=[],ue=function(q){var H=q+(h[q]=(h[q]||0)+1);return K.push(H),H},we=function(q){var H=JSON.stringify(q);try{for(var ie=/\[([^\[\]"]+)\]/;ie.test(H);)H=H.replace(ie,Ce);return H}catch{return JSON.stringify(q)}function Ce(Fe,me){if(-1===K.indexOf(me))throw new Error("Unreplaceable");return'." + '+me+' + "'}},ge={},pe=function(q){if(ge[q])return ge[q];var H=ue("pattern");return c[H]=new RegExp(q),ge[q]=H,H},Y=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],$=function(){var q=Y.shift();return Y.push(q+q[0]),K.push(q),q},J=function(q,H,ie,Ce,Fe){var me=H.properties,_e=H.type,ne=!1;Array.isArray(H.items)&&(me={},H.items.forEach(function(Mt,Lt){me[Lt]=Mt}),_e="array",ne=!0);var fe=0,Te=function(Mt,Lt,xt){G("errors++"),!0===ie&&(G("if (validate.errors === null) validate.errors = []"),o?G("validate.errors.push({field:%s,message:%s,value:%s,type:%s,schemaPath:%s})",we(Lt||q),JSON.stringify(Mt),xt||q,JSON.stringify(_e),JSON.stringify(Fe)):G("validate.errors.push({field:%s,message:%s})",we(Lt||q),JSON.stringify(Mt)))};!0===H.required?(fe++,G("if (%s === undefined) {",q),Te("is required"),G("} else {")):(fe++,G("if (%s !== undefined) {",q));var je=[].concat(_e).map(function(Mt){if(Mt&&!F.hasOwnProperty(Mt))throw new Error("Unknown type: "+Mt);return F[Mt||"any"](q)}).join(" || ")||"true";if("true"!==je&&(fe++,G("if (!(%s)) {",je),Te("is the wrong type"),G("} else {")),ne)if(!1===H.additionalItems)G("if (%s.length > %d) {",q,H.items.length),Te("has additional items"),G("}");else if(H.additionalItems){var Ze=$();G("for (var %s = %d; %s < %s.length; %s++) {",Ze,H.items.length,Ze,q,Ze),J(q+"["+Ze+"]",H.additionalItems,ie,Ce,Fe.concat("additionalItems")),G("}")}if(H.format&&y[H.format]){"string"!==_e&&B[H.format]&&G("if (%s) {",F.string(q));var ut=ue("format");c[ut]=y[H.format],"function"==typeof c[ut]?G("if (!%s(%s)) {",ut,q):G("if (!testLimitedRegex(%s, %s, %d)) {",ut,q,void 0===H.maxLength?-1:H.maxLength),Te("must be "+H.format+" format"),G("}"),"string"!==_e&&B[H.format]&&G("}")}if(Array.isArray(H.required)&&(ut=ue("missing"),G("var %s = 0",ut),G("if ((%s)) {","object"!==_e?F.object(q):"true"),H.required.map(function(Lt){var xt=g(q,Lt);G("if (%s === undefined) {",xt),Te("is required",xt),G("%s++",ut),G("}")}),G("}"),v||(G("if (%s === 0) {",ut),fe++)),H.uniqueItems&&("array"!==_e&&G("if (%s) {",F.array(q)),G("if (!(unique(%s, %d))) {",q,H.maxItems||-1),Te("must be unique"),G("}"),"array"!==_e&&G("}")),H.enum){var lt=H.enum.some(function(Mt){return"object"==typeof Mt});G("if (%s) {",H.enum.map(lt?function(Mt){return"JSON.stringify("+q+") !== JSON.stringify("+JSON.stringify(Mt)+")"}:function(Mt){return q+" !== "+JSON.stringify(Mt)}).join(" && ")||"false"),Te("must be an enum value"),G("}")}if(H.dependencies&&("object"!==_e&&G("if (%s) {",F.object(q)),Object.keys(H.dependencies).forEach(function(Mt){var Lt=H.dependencies[Mt];"string"==typeof Lt&&(Lt=[Lt]),Array.isArray(Lt)&&(G("if (%s !== undefined && !(%s)) {",g(q,Mt),Lt.map(function(ln){return g(q,ln)+" !== undefined"}).join(" && ")||"true"),Te("dependencies not set"),G("}")),"object"==typeof Lt&&(G("if (%s !== undefined) {",g(q,Mt)),J(q,Lt,ie,Ce,Fe.concat(["dependencies",Mt])),G("}"))}),"object"!==_e&&G("}")),H.additionalProperties||!1===H.additionalProperties){"object"!==_e&&G("if (%s) {",F.object(q)),Ze=$();var It=ue("keys"),br=Object.keys(me||{}).map(function(Lt){return It+"["+Ze+"] !== "+JSON.stringify(Lt)}).concat(Object.keys(H.patternProperties||{}).map(function(Lt){return"!"+pe(Lt)+".test("+It+"["+Ze+"])"})).join(" && ")||"true";G("var %s = Object.keys(%s)",It,q)("for (var %s = 0; %s < %s.length; %s++) {",Ze,Ze,It,Ze)("if (%s) {",br),!1===H.additionalProperties?(Ce&&G("delete %s",q+"["+It+"["+Ze+"]]"),Te("has additional properties",null,JSON.stringify(q+".")+" + "+It+"["+Ze+"]")):J(q+"["+It+"["+Ze+"]]",H.additionalProperties,ie,Ce,Fe.concat(["additionalProperties"])),G("}")("}"),"object"!==_e&&G("}")}if(H.$ref){var ar=function(T,I,M){var R=function(h){return h&&h.id===M?h:"object"==typeof h&&h?Object.keys(h).reduce(function(K,ue){return K||R(h[ue])},null):null},b=R(T);if(b)return b;M=(M=M.replace(/^#/,"")).replace(/\/$/,"");try{return D.get(T,decodeURI(M))}catch{var c,y=M.indexOf("#");if(0!==y)if(-1===y)c=I[M];else{c=I[M.slice(0,y)];var v=M.slice(y).replace(/^#/,"");try{return D.get(c,v)}catch{}}else c=I[M];return c||null}}(M,b&&b.schemas||{},H.$ref);if(ar){var hr=I[H.$ref];hr||(I[H.$ref]=function(xt){return hr(xt)},hr=S(ar,I,M,!1,b)),ut=ue("ref"),c[ut]=hr,G("if (!(%s(%s))) {",ut,q),Te("referenced schema does not match"),G("}")}}if(H.not){var rr=ue("prev");G("var %s = errors",rr),J(q,H.not,!1,Ce,Fe.concat("not")),G("if (%s === errors) {",rr),Te("negative schema matches"),G("} else {")("errors = %s",rr)("}")}if(H.items&&!ne&&("array"!==_e&&G("if (%s) {",F.array(q)),Ze=$(),G("for (var %s = 0; %s < %s.length; %s++) {",Ze,Ze,q,Ze),J(q+"["+Ze+"]",H.items,ie,Ce,Fe.concat("items")),G("}"),"array"!==_e&&G("}")),H.patternProperties&&("object"!==_e&&G("if (%s) {",F.object(q)),It=ue("keys"),Ze=$(),G("var %s = Object.keys(%s)",It,q)("for (var %s = 0; %s < %s.length; %s++) {",Ze,Ze,It,Ze),Object.keys(H.patternProperties).forEach(function(xt){var ln=pe(xt);G("if (%s.test(%s)) {",ln,It+"["+Ze+"]"),J(q+"["+It+"["+Ze+"]]",H.patternProperties[xt],ie,Ce,Fe.concat(["patternProperties",xt])),G("}")}),G("}"),"object"!==_e&&G("}")),H.pattern){var qr=pe(H.pattern);"string"!==_e&&G("if (%s) {",F.string(q)),G("if (!(testLimitedRegex(%s, %s, %d))) {",qr,q,void 0===H.maxLength?-1:H.maxLength),Te("pattern mismatch"),G("}"),"string"!==_e&&G("}")}if(H.allOf&&H.allOf.forEach(function(Mt,Lt){J(q,Mt,ie,Ce,Fe.concat(["allOf",Lt]))}),H.anyOf&&H.anyOf.length&&(rr=ue("prev"),H.anyOf.forEach(function(Lt,xt){0===xt?G("var %s = errors",rr):G("if (errors !== %s) {",rr)("errors = %s",rr),J(q,Lt,!1,!1,Fe)}),H.anyOf.forEach(function(Lt,xt){xt&&G("}")}),G("if (%s !== errors) {",rr),Te("no schemas match"),G("}")),H.oneOf&&H.oneOf.length){rr=ue("prev");var Ue=ue("passes");G("var %s = errors",rr)("var %s = 0",Ue),H.oneOf.forEach(function(Lt,xt){J(q,Lt,!1,!1,Fe),G("if (%s === errors) {",rr)("%s++",Ue)("} else {")("errors = %s",rr)("}")}),G("if (%s !== 1) {",Ue),Te("no (or more than one) schemas match"),G("}")}for(void 0!==H.multipleOf&&("number"!==_e&&"integer"!==_e&&G("if (%s) {",F.number(q)),G("if (!isMultipleOf(%s, %d)) {",q,H.multipleOf),Te("has a remainder"),G("}"),"number"!==_e&&"integer"!==_e&&G("}")),void 0!==H.maxProperties&&("object"!==_e&&G("if (%s) {",F.object(q)),G("if (Object.keys(%s).length > %d) {",q,H.maxProperties),Te("has more properties than allowed"),G("}"),"object"!==_e&&G("}")),void 0!==H.minProperties&&("object"!==_e&&G("if (%s) {",F.object(q)),G("if (Object.keys(%s).length < %d) {",q,H.minProperties),Te("has less properties than allowed"),G("}"),"object"!==_e&&G("}")),void 0!==H.maxItems&&("array"!==_e&&G("if (%s) {",F.array(q)),G("if (%s.length > %d) {",q,H.maxItems),Te("has more items than allowed"),G("}"),"array"!==_e&&G("}")),void 0!==H.minItems&&("array"!==_e&&G("if (%s) {",F.array(q)),G("if (%s.length < %d) {",q,H.minItems),Te("has less items than allowed"),G("}"),"array"!==_e&&G("}")),void 0!==H.maxLength&&("string"!==_e&&G("if (%s) {",F.string(q)),G("if (%s.length > %d) {",q,H.maxLength),Te("has longer length than allowed"),G("}"),"string"!==_e&&G("}")),void 0!==H.minLength&&("string"!==_e&&G("if (%s) {",F.string(q)),G("if (%s.length < %d) {",q,H.minLength),Te("has less length than allowed"),G("}"),"string"!==_e&&G("}")),void 0!==H.minimum&&("number"!==_e&&"integer"!==_e&&G("if (%s) {",F.number(q)),G("if (%s %s %d) {",q,H.exclusiveMinimum?"<=":"<",H.minimum),Te("is less than minimum"),G("}"),"number"!==_e&&"integer"!==_e&&G("}")),void 0!==H.maximum&&("number"!==_e&&"integer"!==_e&&G("if (%s) {",F.number(q)),G("if (%s %s %d) {",q,H.exclusiveMaximum?">=":">",H.maximum),Te("is more than maximum"),G("}"),"number"!==_e&&"integer"!==_e&&G("}")),me&&Object.keys(me).forEach(function(Mt){Array.isArray(_e)&&-1!==_e.indexOf("null")&&G("if (%s !== null) {",q),J(g(q,Mt),me[Mt],ie,Ce,Fe.concat(ne?Mt:["properties",Mt])),Array.isArray(_e)&&-1!==_e.indexOf("null")&&G("}")});fe--;)G("}")},G=u("function validate(data) {")("if (data === undefined) data = null")("validate.errors = null")("var errors = 0");return J("data",T,R,b&&b.filter,[]),G("return errors === 0")("}"),(G=G.toFunction(c)).errors=null,Object.defineProperty&&Object.defineProperty(G,"error",{get:function(){return G.errors?G.errors.map(function(q){return q.field+" "+q.message}).join("\n"):""}}),G.toJSON=function(){return T},G};oe.exports=function(T,I){return"string"==typeof T&&(T=JSON.parse(T)),S(T,{},T,!0,I)},oe.exports.filter=function(T,I){var M=oe.exports(T,p(I,{filter:!0}));return function(R){return M(R),R}}},7549:oe=>{oe.exports=function(l){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(l)}},2342:(oe,N,l)=>{var D,p,B,L,g=l(5834),u=l(6259)();if(u){D=g("Object.prototype.hasOwnProperty"),p=g("RegExp.prototype.exec"),B={};var F=function(){throw B};L={toString:F,valueOf:F},"symbol"==typeof Symbol.toPrimitive&&(L[Symbol.toPrimitive]=F)}var x=g("Object.prototype.toString"),P=Object.getOwnPropertyDescriptor;oe.exports=u?function(T){if(!T||"object"!=typeof T)return!1;var I=P(T,"lastIndex");if(!I||!D(I,"value"))return!1;try{p(T,L)}catch(R){return R===B}}:function(T){return!(!T||"object"!=typeof T&&"function"!=typeof T)&&"[object RegExp]"===x(T)}},597:(oe,N,l)=>{var g=l(9076),u=l(7029),D=l(5834),p=D("Object.prototype.toString"),B=l(6259)(),L="undefined"==typeof globalThis?global:globalThis,F=u(),x=D("Array.prototype.indexOf",!0)||function(R,b){for(var y=0;y<R.length;y+=1)if(R[y]===b)return y;return-1},P=D("String.prototype.slice"),w={},S=l(8555),T=Object.getPrototypeOf;B&&S&&T&&g(F,function(M){var R=new L[M];if(Symbol.toStringTag in R){var b=T(R),y=S(b,Symbol.toStringTag);if(!y){var c=T(b);y=S(c,Symbol.toStringTag)}w[M]=y.get}}),oe.exports=function(R){if(!R||"object"!=typeof R)return!1;if(!B||!(Symbol.toStringTag in R)){var b=P(p(R),8,-1);return x(F,b)>-1}return!!S&&function(R){var b=!1;return g(w,function(y,c){if(!b)try{b=y.call(R)===c}catch{}}),b}(R)}},6936:(oe,N)=>{var l=/~/,g=/~[01]/g;function u(P){switch(P){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+P)}function D(P){return l.test(P)?P.replace(g,u):P}function B(P){if("string"==typeof P){if(""===(P=P.split("/"))[0])return P;throw new Error("Invalid JSON pointer.")}if(Array.isArray(P)){for(const w of P)if("string"!=typeof w&&"number"!=typeof w)throw new Error("Invalid JSON pointer. Must be of type string or number.");return P}throw new Error("Invalid JSON pointer.")}function L(P,w){if("object"!=typeof P)throw new Error("Invalid input object.");var S=(w=B(w)).length;if(1===S)return P;for(var T=1;T<S;){if(P=P[D(w[T++])],S===T)return P;if("object"!=typeof P)return}}function F(P,w,S){if("object"!=typeof P)throw new Error("Invalid input object.");if(0===(w=B(w)).length)throw new Error("Invalid JSON pointer for set.");return function(P,w,S){for(var T,I,M=1,R=w.length;M<R;){if("constructor"===w[M]||"prototype"===w[M]||"__proto__"===w[M])return P;if(T=D(w[M++]),I=R>M,void 0===P[T]&&(Array.isArray(P)&&"-"===T&&(T=P.length),I&&(P[T]=""!==w[M]&&w[M]<1/0||"-"===w[M]?[]:{})),!I)break;P=P[T]}var b=P[T];return void 0===S?delete P[T]:P[T]=S,b}(P,w,S)}N.get=L,N.set=F,N.compile=function(P){var w=B(P);return{get:function(S){return L(S,w)},set:function(S,T){return F(S,w,T)}}}},9790:(oe,N,l)=>{function g(pe){return pe&&"object"==typeof pe&&"default"in pe?pe.default:pe}var u=g(l(8309)),D=g(l(6952)),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},B=Object.assign||function(pe){for(var Y=1;Y<arguments.length;Y++){var $=arguments[Y];for(var J in $)Object.prototype.hasOwnProperty.call($,J)&&(pe[J]=$[J])}return pe},w=function(pe,Y){Object.keys(pe).forEach(function($){Y(pe[$],$)})},T=function(pe){return!!("undefined"!=typeof Uint8Array&&pe instanceof Uint8Array||pe&&pe.$Uint8ArrayPolyfill)},I_each=w,M=function(Y){return Array.isArray(Y)&&!T(Y)},R=function(Y){return M(Y)||c(Y)},y=function(Y){return/^[0-9]+$/.test(Y)},c=function(pe){return!(!pe||"number"==typeof pe||"string"==typeof pe||"boolean"==typeof pe||M(pe)||null===pe||pe instanceof RegExp||"function"==typeof pe||pe instanceof Date||T(pe))},o=function(pe){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof pe&&Y.field&&(pe+=" for field '"+Y.field+"'");var $=new Error(pe);return $.name="ModifyJsError",$},v_each=w,K=function(Y,$,J){if(J=J||{},!c($))throw o("Modifier must be an object");var q,G=function(Y,$){if(!c(Y))return!1;var J=void 0;return I_each(Y,function(G,q){var H="$"===q.substr(0,1);if(void 0===J)J=H;else if(J!==H)throw new Error("Inconsistent operator: "+JSON.stringify(Y))}),!!J}($=u($));if(G?(q=u(Y),v_each($,function(H,ie){var Ce=ge[ie];if(!Ce)throw o("Invalid modifier specified "+ie);v_each(H,function(Fe,me){if(""===me)throw o("An empty update path is not valid.");var _e=me.split(".");if(!function(pe,Y){return pe.every(function($){return Y&&Y($)||$})}(_e))throw o("The update path '"+me+"' contains an empty field name, which is not allowed.");var ne=ue(q,_e,{noCreate:we[ie],forbidArray:"$rename"===ie,arrayIndices:J.arrayIndices}),fe=_e.pop();Ce(ne,fe,Fe,me,q)})})):q=$,J.returnInsteadOfReplacing)return q;v_each(Object.keys(Y),function(H){"_id"!==H&&delete Y[H]}),v_each(q,function(H,ie){Y[ie]=H})},ue=function(Y,$,J){J=J||{};for(var G=!1,q=0;q<$.length;q++){var H=q===$.length-1,ie=$[q];if(!R(Y)){if(J.noCreate)return;var Fe=o("cannot use the part '"+ie+"' to traverse "+Y);throw Fe.setPropertyError=!0,Fe}if(Y instanceof Array){if(J.forbidArray)return null;if("$"===ie){if(G)throw o("Too many positional (i.e. '$') elements");if(!J.arrayIndices||!J.arrayIndices.length)throw o("The positional operator did not find the match needed from the query");ie=J.arrayIndices[0],G=!0}else{if(!y(ie)){if(J.noCreate)return;throw o("can't append to array using string field name ["+ie+"]")}ie=parseInt(ie)}if(H&&($[q]=ie),J.noCreate&&ie>=Y.length)return;for(;Y.length<ie;)Y.push(null);if(!H)if(Y.length===ie)Y.push({});else if("object"!==p(Y[ie]))throw o("can't modify field '"+$[q+1]+"' of list value "+JSON.stringify(Y[ie]))}else if(!(ie in Y)){if(J.noCreate)return;H||(Y[ie]={})}if(H)return Y;Y=Y[ie]}},we={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},ge={$currentDate:function(Y,$,J){if("object"===(void 0===J?"undefined":p(J))&&J.hasOwnProperty("$type")){if("date"!==J.$type)throw o("Minimongo does currently only support the date type in $currentDate modifiers",{field:$})}else if(!0!==J)throw o("Invalid $currentDate modifier",{field:$});Y[$]=new Date},$min:function(Y,$,J){if("number"!=typeof J)throw o("Modifier $min allowed for numbers only",{field:$});if($ in Y){if("number"!=typeof Y[$])throw o("Cannot apply $min modifier to non-number",{field:$});Y[$]>J&&(Y[$]=J)}else Y[$]=J},$max:function(Y,$,J){if("number"!=typeof J)throw o("Modifier $max allowed for numbers only",{field:$});if($ in Y){if("number"!=typeof Y[$])throw o("Cannot apply $max modifier to non-number",{field:$});Y[$]<J&&(Y[$]=J)}else Y[$]=J},$inc:function(Y,$,J){if("number"!=typeof J)throw o("Modifier $inc allowed for numbers only",{field:$});if($ in Y){if("number"!=typeof Y[$])throw o("Cannot apply $inc modifier to non-number",{field:$});Y[$]+=J}else Y[$]=J},$set:function(Y,$,J){var G,pe;if("object"!==(void 0===(pe=Y)?"undefined":p(pe))||null===pe)throw(G=o("Cannot set property on non-object field",{field:$})).setPropertyError=!0,G;if(null===Y)throw(G=o("Cannot set property on null",{field:$})).setPropertyError=!0,G;Y[$]=J},$setOnInsert:function(Y,$,J){},$unset:function(Y,$,J){void 0!==Y&&(Y instanceof Array?$ in Y&&(Y[$]=null):delete Y[$])},$push:function(Y,$,J){if(void 0===Y[$]&&(Y[$]=[]),!(Y[$]instanceof Array))throw o("Cannot apply $push modifier to non-array",{field:$});if(J&&J.$each){var G=J.$each;if(!(G instanceof Array))throw o("$each must be an array",{field:$});var q=void 0;if("$position"in J){if("number"!=typeof J.$position)throw o("$position must be a numeric value",{field:$});if(J.$position<0)throw o("$position in $push must be zero or positive",{field:$});q=J.$position}var H=void 0;if("$slice"in J){if("number"!=typeof J.$slice)throw o("$slice must be a numeric value",{field:$});if(J.$slice>0)throw o("$slice in $push must be zero or negative",{field:$});H=J.$slice}if(J.$sort)throw o("$sort in $push not implemented yet");if(void 0===q)for(var Ce=0;Ce<G.length;Ce++)Y[$].push(G[Ce]);else{var Fe=[q,0];for(Ce=0;Ce<G.length;Ce++)Fe.push(G[Ce]);Array.prototype.splice.apply(Y[$],Fe)}void 0!==H&&(Y[$]=0===H?[]:Y[$].slice(H))}else Y[$].push(J)},$pushAll:function(Y,$,J){if(!("object"===(void 0===J?"undefined":p(J))&&J instanceof Array))throw o("Modifier $pushAll/pullAll allowed for arrays only");var G=Y[$];if(void 0===G)Y[$]=J;else{if(!(G instanceof Array))throw o("Cannot apply $pushAll modifier to non-array",{field:$});for(var q=0;q<J.length;q++)G.push(J[q])}},$addToSet:function(Y,$,J){var G=!1;"object"===(void 0===J?"undefined":p(J))&&"$each"===Object.keys(J)[0]&&(G=!0);var H=G?J.$each:[J],ie=Y[$];if(void 0===ie)Y[$]=H;else{if(!(ie instanceof Array))throw o("Cannot apply $addToSet modifier to non-array",{field:$});v_each(H,function(Ce){for(var Fe=0;Fe<ie.length;Fe++)if(D(Ce,ie[Fe]))return;ie.push(Ce)})}},$pop:function(Y,$,J){if(void 0!==Y){var G=Y[$];if(void 0!==G){if(!(G instanceof Array))throw o("Cannot apply $pop modifier to non-array",{field:$});"number"==typeof J&&J<0?G.splice(0,1):G.pop()}}},$pull:function(Y,$,J){if(void 0!==Y){var G=Y[$];if(void 0!==G)throw G instanceof Array?o("$pull not implemented yet"):o("Cannot apply $pull/pullAll modifier to non-array",{field:$})}},$pullAll:function(Y,$,J){if(!("object"===(void 0===J?"undefined":p(J))&&J instanceof Array))throw o("Modifier $pushAll/pullAll allowed for arrays only",{field:$});if(void 0!==Y){var G=Y[$];if(void 0!==G){if(!(G instanceof Array))throw o("Cannot apply $pull/pullAll modifier to non-array",{field:$});for(var q=[],H=0;H<G.length;H++){for(var ie=!1,Ce=0;Ce<J.length;Ce++)if(D(G[H],J[Ce])){ie=!0;break}ie||q.push(G[H])}Y[$]=q}}},$rename:function(Y,$,J,G,q){if(G===J)throw o("$rename source must differ from target",{field:$});if(null===Y)throw o("$rename source field invalid",{field:$});if("string"!=typeof J)throw o("$rename target must be a string",{field:$});if(J.indexOf("\0")>-1)throw o("The 'to' field for $rename cannot contain an embedded null byte",{field:$});if(void 0!==Y){var H=Y[$];delete Y[$];var ie=J.split("."),Ce=ue(q,ie,{forbidArray:!0});if(null===Ce)throw o("$rename target field invalid",{field:$});Ce[ie.pop()]=H}},$bit:function(Y,$,J){throw o("$bit is not supported",{field:$})}};oe.exports=function(pe,Y,$){if(!$||!$.each)return K(pe,Y,B({},$,{returnInsteadOfReplacing:!0}))}},8309:oe=>{var N=function(){"use strict";function l(w,S){return null!=S&&w instanceof S}var g,u,D;try{g=Map}catch{g=function(){}}try{u=Set}catch{u=function(){}}try{D=Promise}catch{D=function(){}}function p(w,S,T,I,M){"object"==typeof S&&(T=S.depth,I=S.prototype,M=S.includeNonEnumerable,S=S.circular);var R=[],b=[],y="undefined"!=typeof Buffer;return void 0===S&&(S=!0),void 0===T&&(T=1/0),function c(o,v){if(null===o)return null;if(0===v)return o;var h,K;if("object"!=typeof o)return o;if(l(o,g))h=new g;else if(l(o,u))h=new u;else if(l(o,D))h=new D(function(q,H){o.then(function(ie){q(c(ie,v-1))},function(ie){H(c(ie,v-1))})});else if(p.__isArray(o))h=[];else if(p.__isRegExp(o))h=new RegExp(o.source,P(o)),o.lastIndex&&(h.lastIndex=o.lastIndex);else if(p.__isDate(o))h=new Date(o.getTime());else{if(y&&Buffer.isBuffer(o))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(h),h;l(o,Error)?h=Object.create(o):void 0===I?(K=Object.getPrototypeOf(o),h=Object.create(K)):(h=Object.create(I),K=I)}if(S){var ue=R.indexOf(o);if(-1!=ue)return b[ue];R.push(o),b.push(h)}for(var we in l(o,g)&&o.forEach(function(q,H){var ie=c(H,v-1),Ce=c(q,v-1);h.set(ie,Ce)}),l(o,u)&&o.forEach(function(q){var H=c(q,v-1);h.add(H)}),o){var ge;K&&(ge=Object.getOwnPropertyDescriptor(K,we)),(!ge||null!=ge.set)&&(h[we]=c(o[we],v-1))}if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(o);for(we=0;we<pe.length;we++){var Y=pe[we];($=Object.getOwnPropertyDescriptor(o,Y))&&!$.enumerable&&!M||(h[Y]=c(o[Y],v-1),$.enumerable||Object.defineProperty(h,Y,{enumerable:!1}))}}if(M){var J=Object.getOwnPropertyNames(o);for(we=0;we<J.length;we++){var $,G=J[we];($=Object.getOwnPropertyDescriptor(o,G))&&$.enumerable||(h[G]=c(o[G],v-1),Object.defineProperty(h,G,{enumerable:!1}))}}return h}(w,T)}function B(w){return Object.prototype.toString.call(w)}function P(w){var S="";return w.global&&(S+="g"),w.ignoreCase&&(S+="i"),w.multiline&&(S+="m"),S}return p.clonePrototype=function(S){if(null===S)return null;var T=function(){};return T.prototype=S,new T},p.__objToStr=B,p.__isDate=function(w){return"object"==typeof w&&"[object Date]"===B(w)},p.__isArray=function(w){return"object"==typeof w&&"[object Array]"===B(w)},p.__isRegExp=function(w){return"object"==typeof w&&"[object RegExp]"===B(w)},p.__getRegExpFlags=P,p}();oe.exports&&(oe.exports=N)},1175:oe=>{var N=function(l){return l!=l};oe.exports=function(g,u){return 0===g&&0===u?1/g==1/u:!!(g===u||N(g)&&N(u))}},2e3:(oe,N,l)=>{var g=l(2358),u=l(5685),D=l(1175),p=l(6305),B=l(3859),L=u(p(),Object);g(L,{getPolyfill:p,implementation:D,shim:B}),oe.exports=L},6305:(oe,N,l)=>{var g=l(1175);oe.exports=function(){return"function"==typeof Object.is?Object.is:g}},3859:(oe,N,l)=>{var g=l(6305),u=l(2358);oe.exports=function(){var p=g();return u(Object,{is:p},{is:function(){return Object.is!==p}}),p}},2450:(oe,N,l)=>{var g;if(!Object.keys){var u=Object.prototype.hasOwnProperty,D=Object.prototype.toString,p=l(9978),B=Object.prototype.propertyIsEnumerable,L=!B.call({toString:null},"toString"),F=B.call(function(){},"prototype"),x=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],P=function(I){var M=I.constructor;return M&&M.prototype===I},w={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},S=function(){if("undefined"==typeof window)return!1;for(var I in window)try{if(!w["$"+I]&&u.call(window,I)&&null!==window[I]&&"object"==typeof window[I])try{P(window[I])}catch{return!0}}catch{return!0}return!1}();g=function(M){var R=null!==M&&"object"==typeof M,b="[object Function]"===D.call(M),y=p(M),c=R&&"[object String]"===D.call(M),o=[];if(!R&&!b&&!y)throw new TypeError("Object.keys called on a non-object");var v=F&&b;if(c&&M.length>0&&!u.call(M,0))for(var h=0;h<M.length;++h)o.push(String(h));if(y&&M.length>0)for(var K=0;K<M.length;++K)o.push(String(K));else for(var ue in M)(!v||"prototype"!==ue)&&u.call(M,ue)&&o.push(String(ue));if(L)for(var we=function(I){if("undefined"==typeof window||!S)return P(I);try{return P(I)}catch{return!1}}(M),ge=0;ge<x.length;++ge)(!we||"constructor"!==x[ge])&&u.call(M,x[ge])&&o.push(x[ge]);return o}}oe.exports=g},1356:(oe,N,l)=>{var g=Array.prototype.slice,u=l(9978),D=Object.keys,p=D?function(F){return D(F)}:l(2450),B=Object.keys;p.shim=function(){if(Object.keys){var F=function(){var x=Object.keys(arguments);return x&&x.length===arguments.length}(1,2);F||(Object.keys=function(P){return u(P)?B(g.call(P)):B(P)})}else Object.keys=p;return Object.keys||p},oe.exports=p},9978:oe=>{var N=Object.prototype.toString;oe.exports=function(g){var u=N.call(g),D="[object Arguments]"===u;return D||(D="[object Array]"!==u&&null!==g&&"object"==typeof g&&"number"==typeof g.length&&g.length>=0&&"[object Function]"===N.call(g.callee)),D}},8624:function(oe,N){var l,g,u;!function(D,p){"use strict";"object"==typeof oe.exports?oe.exports=p():(g=[],void 0!==(u="function"==typeof(l=p)?l.apply(N,g):l)&&(oe.exports=u))}(0,function(){"use strict";var D=Object.prototype.toString;function p(I,M){return null!=I&&Object.prototype.hasOwnProperty.call(I,M)}function B(I){if(!I||x(I)&&0===I.length)return!0;if("string"!=typeof I){for(var M in I)if(p(I,M))return!1;return!0}return!1}function L(I){return D.call(I)}var x=Array.isArray||function(I){return"[object Array]"===D.call(I)};function w(I){var M=parseInt(I);return M.toString()===I?M:I}function S(I){var R,y,M=function(o){return Object.keys(M).reduce(function(v,h){return"create"===h||"function"==typeof M[h]&&(v[h]=M[h].bind(M,o)),v},{})};function b(o,v){if(R(o,v))return o[v]}function c(o,v,h,K){if("number"==typeof v&&(v=[v]),!v||0===v.length)return o;if("string"==typeof v)return c(o,v.split(".").map(w),h,K);var ue=v[0],we=y(o,ue);return 1===v.length?((void 0===we||!K)&&(o[ue]=h),we):(void 0===we&&(o[ue]="number"==typeof v[1]?[]:{}),c(o[ue],v.slice(1),h,K))}return R=(I=I||{}).includeInheritedProps?function(){return!0}:function(o,v){return"number"==typeof v&&Array.isArray(o)||p(o,v)},y=I.includeInheritedProps?function(o,v){"string"!=typeof v&&"number"!=typeof v&&(v=String(v));var h=b(o,v);if("__proto__"===v||"prototype"===v||"constructor"===v&&"function"==typeof h)throw new Error("For security reasons, object's magic properties cannot be set");return h}:function(o,v){return b(o,v)},M.has=function(o,v){if("number"==typeof v?v=[v]:"string"==typeof v&&(v=v.split(".")),!v||0===v.length)return!!o;for(var h=0;h<v.length;h++){var K=w(v[h]);if(!("number"==typeof K&&x(o)&&K<o.length||(I.includeInheritedProps?K in Object(o):p(o,K))))return!1;o=o[K]}return!0},M.ensureExists=function(o,v,h){return c(o,v,h,!0)},M.set=function(o,v,h,K){return c(o,v,h,K)},M.insert=function(o,v,h,K){var ue=M.get(o,v);K=~~K,x(ue)||M.set(o,v,ue=[]),ue.splice(K,0,h)},M.empty=function(o,v){var h,K;if(!B(v)&&null!=o&&(h=M.get(o,v))){if("string"==typeof h)return M.set(o,v,"");if(function(I){return"boolean"==typeof I||"[object Boolean]"===L(I)}(h))return M.set(o,v,!1);if("number"==typeof h)return M.set(o,v,0);if(x(h))h.length=0;else{if(!function(I){return"object"==typeof I&&"[object Object]"===L(I)}(h))return M.set(o,v,null);for(K in h)R(h,K)&&delete h[K]}}},M.push=function(o,v){var h=M.get(o,v);x(h)||M.set(o,v,h=[]),h.push.apply(h,Array.prototype.slice.call(arguments,2))},M.coalesce=function(o,v,h){for(var K,ue=0,we=v.length;ue<we;ue++)if(void 0!==(K=M.get(o,v[ue])))return K;return h},M.get=function(o,v,h){if("number"==typeof v&&(v=[v]),!v||0===v.length)return o;if(null==o)return h;if("string"==typeof v)return M.get(o,v.split("."),h);var K=w(v[0]),ue=y(o,K);return void 0===ue?h:1===v.length?ue:M.get(o[K],v.slice(1),h)},M.del=function(v,h){if("number"==typeof h&&(h=[h]),null==v||B(h))return v;if("string"==typeof h)return M.del(v,h.split("."));var K=w(h[0]);return y(v,K),R(v,K)?1!==h.length?M.del(v[K],h.slice(1)):(x(v)?v.splice(K,1):delete v[K],v):v},M}var T=S();return T.create=S,T.withInheritedProps=S({includeInheritedProps:!0}),T})},3625:oe=>{oe.exports=function(N){"use strict";var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function D(b,y){var c=b[0],o=b[1],v=b[2],h=b[3];o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[0]-680876936|0)<<7|c>>>25)+o|0)&o|~c&v)+y[1]-389564586|0)<<12|h>>>20)+c|0)&c|~h&o)+y[2]+606105819|0)<<17|v>>>15)+h|0)&h|~v&c)+y[3]-1044525330|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[4]-176418897|0)<<7|c>>>25)+o|0)&o|~c&v)+y[5]+1200080426|0)<<12|h>>>20)+c|0)&c|~h&o)+y[6]-1473231341|0)<<17|v>>>15)+h|0)&h|~v&c)+y[7]-45705983|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[8]+1770035416|0)<<7|c>>>25)+o|0)&o|~c&v)+y[9]-1958414417|0)<<12|h>>>20)+c|0)&c|~h&o)+y[10]-42063|0)<<17|v>>>15)+h|0)&h|~v&c)+y[11]-1990404162|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[12]+1804603682|0)<<7|c>>>25)+o|0)&o|~c&v)+y[13]-40341101|0)<<12|h>>>20)+c|0)&c|~h&o)+y[14]-1502002290|0)<<17|v>>>15)+h|0)&h|~v&c)+y[15]+1236535329|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[1]-165796510|0)<<5|c>>>27)+o|0)&v|o&~v)+y[6]-1069501632|0)<<9|h>>>23)+c|0)&o|c&~o)+y[11]+643717713|0)<<14|v>>>18)+h|0)&c|h&~c)+y[0]-373897302|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[5]-701558691|0)<<5|c>>>27)+o|0)&v|o&~v)+y[10]+38016083|0)<<9|h>>>23)+c|0)&o|c&~o)+y[15]-660478335|0)<<14|v>>>18)+h|0)&c|h&~c)+y[4]-405537848|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[9]+568446438|0)<<5|c>>>27)+o|0)&v|o&~v)+y[14]-1019803690|0)<<9|h>>>23)+c|0)&o|c&~o)+y[3]-187363961|0)<<14|v>>>18)+h|0)&c|h&~c)+y[8]+1163531501|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[13]-1444681467|0)<<5|c>>>27)+o|0)&v|o&~v)+y[2]-51403784|0)<<9|h>>>23)+c|0)&o|c&~o)+y[7]+1735328473|0)<<14|v>>>18)+h|0)&c|h&~c)+y[12]-1926607734|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[5]-378558|0)<<4|c>>>28)+o|0)^o^v)+y[8]-2022574463|0)<<11|h>>>21)+c|0)^c^o)+y[11]+1839030562|0)<<16|v>>>16)+h|0)^h^c)+y[14]-35309556|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[1]-1530992060|0)<<4|c>>>28)+o|0)^o^v)+y[4]+1272893353|0)<<11|h>>>21)+c|0)^c^o)+y[7]-155497632|0)<<16|v>>>16)+h|0)^h^c)+y[10]-1094730640|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[13]+681279174|0)<<4|c>>>28)+o|0)^o^v)+y[0]-358537222|0)<<11|h>>>21)+c|0)^c^o)+y[3]-722521979|0)<<16|v>>>16)+h|0)^h^c)+y[6]+76029189|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[9]-640364487|0)<<4|c>>>28)+o|0)^o^v)+y[12]-421815835|0)<<11|h>>>21)+c|0)^c^o)+y[15]+530742520|0)<<16|v>>>16)+h|0)^h^c)+y[2]-995338651|0)<<23|o>>>9)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[0]-198630844|0)<<6|c>>>26)+o|0)|~v))+y[7]+1126891415|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[14]-1416354905|0)<<15|v>>>17)+h|0)|~c))+y[5]-57434055|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[12]+1700485571|0)<<6|c>>>26)+o|0)|~v))+y[3]-1894986606|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[10]-1051523|0)<<15|v>>>17)+h|0)|~c))+y[1]-2054922799|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[8]+1873313359|0)<<6|c>>>26)+o|0)|~v))+y[15]-30611744|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[6]-1560198380|0)<<15|v>>>17)+h|0)|~c))+y[13]+1309151649|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[4]-145523070|0)<<6|c>>>26)+o|0)|~v))+y[11]-1120210379|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[2]+718787259|0)<<15|v>>>17)+h|0)|~c))+y[9]-343485551|0)<<21|o>>>11)+v|0,b[0]=c+b[0]|0,b[1]=o+b[1]|0,b[2]=v+b[2]|0,b[3]=h+b[3]|0}function p(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b.charCodeAt(c)+(b.charCodeAt(c+1)<<8)+(b.charCodeAt(c+2)<<16)+(b.charCodeAt(c+3)<<24);return y}function B(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b[c]+(b[c+1]<<8)+(b[c+2]<<16)+(b[c+3]<<24);return y}function L(b){var o,v,h,K,ue,we,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,p(b.substring(o-64,o)));for(v=(b=b.substring(o-64)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=b.charCodeAt(o)<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),we=parseInt(K[1],16)||0,h[14]=ue,h[15]=we,D(c,h),c}function x(b){var c,y="";for(c=0;c<4;c+=1)y+=g[b>>8*c+4&15]+g[b>>8*c&15];return y}function P(b){var y;for(y=0;y<b.length;y+=1)b[y]=x(b[y]);return b.join("")}function w(b){return/[\u0080-\uFFFF]/.test(b)&&(b=unescape(encodeURIComponent(b))),b}function M(b){var o,y=[],c=b.length;for(o=0;o<c-1;o+=2)y.push(parseInt(b.substr(o,2),16));return String.fromCharCode.apply(String,y)}function R(){this.reset()}return P(L("hello")),"undefined"!=typeof ArrayBuffer&&!ArrayBuffer.prototype.slice&&function(){function b(y,c){return(y=0|y||0)<0?Math.max(y+c,0):Math.min(y,c)}ArrayBuffer.prototype.slice=function(y,c){var K,ue,we,ge,o=this.byteLength,v=b(y,o),h=o;return undefined!==c&&(h=b(c,o)),v>h?new ArrayBuffer(0):(K=h-v,ue=new ArrayBuffer(K),we=new Uint8Array(ue),ge=new Uint8Array(this,v,K),we.set(ge),ue)}}(),R.prototype.append=function(b){return this.appendBinary(w(b)),this},R.prototype.appendBinary=function(b){this._buff+=b,this._length+=b.length;var c,y=this._buff.length;for(c=64;c<=y;c+=64)D(this._hash,p(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},R.prototype.end=function(b){var o,h,y=this._buff,c=y.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<c;o+=1)v[o>>2]|=y.charCodeAt(o)<<(o%4<<3);return this._finish(v,c),h=P(this._hash),b&&(h=M(h)),this.reset(),h},R.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},R.prototype.setState=function(b){return this._buff=b.buff,this._length=b.length,this._hash=b.hash,this},R.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},R.prototype._finish=function(b,y){var o,v,h,c=y;if(b[c>>2]|=128<<(c%4<<3),c>55)for(D(this._hash,b),c=0;c<16;c+=1)b[c]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(o[2],16),h=parseInt(o[1],16)||0,b[14]=v,b[15]=h,D(this._hash,b)},R.hash=function(b,y){return R.hashBinary(w(b),y)},R.hashBinary=function(b,y){var o=P(L(b));return y?M(o):o},(R.ArrayBuffer=function(){this.reset()}).prototype.append=function(b){var o,y=function(b,y,c){var o=new Uint8Array(b.byteLength+y.byteLength);return o.set(new Uint8Array(b)),o.set(new Uint8Array(y),b.byteLength),c?o:o.buffer}(this._buff.buffer,b,!0),c=y.length;for(this._length+=b.byteLength,o=64;o<=c;o+=64)D(this._hash,B(y.subarray(o-64,o)));return this._buff=o-64<c?new Uint8Array(y.buffer.slice(o-64)):new Uint8Array(0),this},R.ArrayBuffer.prototype.end=function(b){var v,h,y=this._buff,c=y.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(v=0;v<c;v+=1)o[v>>2]|=y[v]<<(v%4<<3);return this._finish(o,c),h=P(this._hash),b&&(h=M(h)),this.reset(),h},R.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.ArrayBuffer.prototype.getState=function(){var b=R.prototype.getState.call(this);return b.buff=function(b){return String.fromCharCode.apply(null,new Uint8Array(b))}(b.buff),b},R.ArrayBuffer.prototype.setState=function(b){return b.buff=function(b,y){var h,c=b.length,o=new ArrayBuffer(c),v=new Uint8Array(o);for(h=0;h<c;h+=1)v[h]=b.charCodeAt(h);return y?v:o}(b.buff,!0),R.prototype.setState.call(this,b)},R.ArrayBuffer.prototype.destroy=R.prototype.destroy,R.ArrayBuffer.prototype._finish=R.prototype._finish,R.ArrayBuffer.hash=function(b,y){var o=P(function(b){var o,v,h,K,ue,we,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,B(b.subarray(o-64,o)));for(v=(b=o-64<y?b.subarray(o-64):new Uint8Array(0)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=b[o]<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),we=parseInt(K[1],16)||0,h[14]=ue,h[15]=we,D(c,h),c}(new Uint8Array(b)));return y?M(o):o},R}()},2302:(oe,N,l)=>{var u,D,g=[l(4703),l(3328),l(6139),l(5675),l(1767),l(3259)],p=-1,B=[],L=!1;function F(){!u||!D||(u=!1,D.length?B=D.concat(B):p=-1,B.length&&x())}function x(){if(!u){L=!1,u=!0;for(var M=B.length,R=setTimeout(F);M;){for(D=B,B=[];D&&++p<M;)D[p].run();p=-1,M=B.length}D=null,p=-1,u=!1,clearTimeout(R)}}for(var P,w=-1,S=g.length;++w<S;)if(g[w]&&g[w].test&&g[w].test()){P=g[w].install(x);break}function T(M,R){this.fun=M,this.array=R}T.prototype.run=function(){var M=this.fun,R=this.array;switch(R.length){case 0:return M();case 1:return M(R[0]);case 2:return M(R[0],R[1]);case 3:return M(R[0],R[1],R[2]);default:return M.apply(null,R)}},oe.exports=function(M){var R=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)R[b-1]=arguments[b];B.push(new T(M,R)),!L&&!u&&(L=!0,P())}},5675:(oe,N)=>{N.test=function(){return!global.setImmediate&&void 0!==global.MessageChannel},N.install=function(l){var g=new global.MessageChannel;return g.port1.onmessage=l,function(){g.port2.postMessage(0)}}},6139:(oe,N)=>{var l=global.MutationObserver||global.WebKitMutationObserver;N.test=function(){return l},N.install=function(g){var u=0,D=new l(g),p=global.document.createTextNode("");return D.observe(p,{characterData:!0}),function(){p.data=u=++u%2}}},3328:(oe,N)=>{N.test=function(){return"function"==typeof global.queueMicrotask},N.install=function(l){return function(){global.queueMicrotask(l)}}},1767:(oe,N)=>{N.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")},N.install=function(l){return function(){var g=global.document.createElement("script");return g.onreadystatechange=function(){l(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},global.document.documentElement.appendChild(g),l}}},3259:(oe,N)=>{N.test=function(){return!0},N.install=function(l){return function(){setTimeout(l,0)}}},2448:(oe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const l=[];for(let D=0;D<256;++D)l.push((D+256).toString(16).substr(1));N.default=function(D,p){const B=p||0;return(l[D[B+0]]+l[D[B+1]]+l[D[B+2]]+l[D[B+3]]+"-"+l[D[B+4]]+l[D[B+5]]+"-"+l[D[B+6]]+l[D[B+7]]+"-"+l[D[B+8]]+l[D[B+9]]+"-"+l[D[B+10]]+l[D[B+11]]+l[D[B+12]]+l[D[B+13]]+l[D[B+14]]+l[D[B+15]]).toLowerCase()}},3306:(oe,N,l)=>{Object.defineProperty(N,"v1",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(N,"v3",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(N,"v4",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(N,"v5",{enumerable:!0,get:function(){return B.default}});var u=L(l(9110)),D=L(l(8693)),p=L(l(491)),B=L(l(8518));function L(F){return F&&F.__esModule?F:{default:F}}},872:(oe,N)=>{function u(I){return 14+(I+64>>>9<<4)+1}function B(I,M){const R=(65535&I)+(65535&M);return(I>>16)+(M>>16)+(R>>16)<<16|65535&R}function F(I,M,R,b,y,c){return B(function(I,M){return I<<M|I>>>32-M}(B(B(M,I),B(b,c)),y),R)}function x(I,M,R,b,y,c,o){return F(M&R|~M&b,I,M,y,c,o)}function P(I,M,R,b,y,c,o){return F(M&b|R&~b,I,M,y,c,o)}function w(I,M,R,b,y,c,o){return F(M^R^b,I,M,y,c,o)}function S(I,M,R,b,y,c,o){return F(R^(M|~b),I,M,y,c,o)}Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.default=function(I){if("string"==typeof I){const M=unescape(encodeURIComponent(I));I=new Uint8Array(M.length);for(let R=0;R<M.length;++R)I[R]=M.charCodeAt(R)}return function(I){const M=[],R=32*I.length,b="0123456789abcdef";for(let y=0;y<R;y+=8){const c=I[y>>5]>>>y%32&255,o=parseInt(b.charAt(c>>>4&15)+b.charAt(15&c),16);M.push(o)}return M}(function(I,M){I[M>>5]|=128<<M%32,I[u(M)-1]=M;let R=1732584193,b=-271733879,y=-1732584194,c=271733878;for(let o=0;o<I.length;o+=16){const v=R,h=b,K=y,ue=c;R=x(R,b,y,c,I[o],7,-680876936),c=x(c,R,b,y,I[o+1],12,-389564586),y=x(y,c,R,b,I[o+2],17,606105819),b=x(b,y,c,R,I[o+3],22,-1044525330),R=x(R,b,y,c,I[o+4],7,-176418897),c=x(c,R,b,y,I[o+5],12,1200080426),y=x(y,c,R,b,I[o+6],17,-1473231341),b=x(b,y,c,R,I[o+7],22,-45705983),R=x(R,b,y,c,I[o+8],7,1770035416),c=x(c,R,b,y,I[o+9],12,-1958414417),y=x(y,c,R,b,I[o+10],17,-42063),b=x(b,y,c,R,I[o+11],22,-1990404162),R=x(R,b,y,c,I[o+12],7,1804603682),c=x(c,R,b,y,I[o+13],12,-40341101),y=x(y,c,R,b,I[o+14],17,-1502002290),b=x(b,y,c,R,I[o+15],22,1236535329),R=P(R,b,y,c,I[o+1],5,-165796510),c=P(c,R,b,y,I[o+6],9,-1069501632),y=P(y,c,R,b,I[o+11],14,643717713),b=P(b,y,c,R,I[o],20,-373897302),R=P(R,b,y,c,I[o+5],5,-701558691),c=P(c,R,b,y,I[o+10],9,38016083),y=P(y,c,R,b,I[o+15],14,-660478335),b=P(b,y,c,R,I[o+4],20,-405537848),R=P(R,b,y,c,I[o+9],5,568446438),c=P(c,R,b,y,I[o+14],9,-1019803690),y=P(y,c,R,b,I[o+3],14,-187363961),b=P(b,y,c,R,I[o+8],20,1163531501),R=P(R,b,y,c,I[o+13],5,-1444681467),c=P(c,R,b,y,I[o+2],9,-51403784),y=P(y,c,R,b,I[o+7],14,1735328473),b=P(b,y,c,R,I[o+12],20,-1926607734),R=w(R,b,y,c,I[o+5],4,-378558),c=w(c,R,b,y,I[o+8],11,-2022574463),y=w(y,c,R,b,I[o+11],16,1839030562),b=w(b,y,c,R,I[o+14],23,-35309556),R=w(R,b,y,c,I[o+1],4,-1530992060),c=w(c,R,b,y,I[o+4],11,1272893353),y=w(y,c,R,b,I[o+7],16,-155497632),b=w(b,y,c,R,I[o+10],23,-1094730640),R=w(R,b,y,c,I[o+13],4,681279174),c=w(c,R,b,y,I[o],11,-358537222),y=w(y,c,R,b,I[o+3],16,-722521979),b=w(b,y,c,R,I[o+6],23,76029189),R=w(R,b,y,c,I[o+9],4,-640364487),c=w(c,R,b,y,I[o+12],11,-421815835),y=w(y,c,R,b,I[o+15],16,530742520),b=w(b,y,c,R,I[o+2],23,-995338651),R=S(R,b,y,c,I[o],6,-198630844),c=S(c,R,b,y,I[o+7],10,1126891415),y=S(y,c,R,b,I[o+14],15,-1416354905),b=S(b,y,c,R,I[o+5],21,-57434055),R=S(R,b,y,c,I[o+12],6,1700485571),c=S(c,R,b,y,I[o+3],10,-1894986606),y=S(y,c,R,b,I[o+10],15,-1051523),b=S(b,y,c,R,I[o+1],21,-2054922799),R=S(R,b,y,c,I[o+8],6,1873313359),c=S(c,R,b,y,I[o+15],10,-30611744),y=S(y,c,R,b,I[o+6],15,-1560198380),b=S(b,y,c,R,I[o+13],21,1309151649),R=S(R,b,y,c,I[o+4],6,-145523070),c=S(c,R,b,y,I[o+11],10,-1120210379),y=S(y,c,R,b,I[o+2],15,718787259),b=S(b,y,c,R,I[o+9],21,-343485551),R=B(R,v),b=B(b,h),y=B(y,K),c=B(c,ue)}return[R,b,y,c]}(function(I){if(0===I.length)return[];const M=8*I.length,R=new Uint32Array(u(M));for(let b=0;b<M;b+=8)R[b>>5]|=(255&I[b/8])<<b%32;return R}(I),8*I.length))}},5468:(oe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(){if(!l)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(g)};const l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),g=new Uint8Array(16)},209:(oe,N)=>{function l(p,B,L,F){switch(p){case 0:return B&L^~B&F;case 1:case 3:return B^L^F;case 2:return B&L^B&F^L&F}}function g(p,B){return p<<B|p>>>32-B}Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.default=function(p){const B=[1518500249,1859775393,2400959708,3395469782],L=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof p){const w=unescape(encodeURIComponent(p));p=[];for(let S=0;S<w.length;++S)p.push(w.charCodeAt(S))}p.push(128);const x=Math.ceil((p.length/4+2)/16),P=new Array(x);for(let w=0;w<x;++w){const S=new Uint32Array(16);for(let T=0;T<16;++T)S[T]=p[64*w+4*T]<<24|p[64*w+4*T+1]<<16|p[64*w+4*T+2]<<8|p[64*w+4*T+3];P[w]=S}P[x-1][14]=8*(p.length-1)/Math.pow(2,32),P[x-1][14]=Math.floor(P[x-1][14]),P[x-1][15]=8*(p.length-1)&4294967295;for(let w=0;w<x;++w){const S=new Uint32Array(80);for(let y=0;y<16;++y)S[y]=P[w][y];for(let y=16;y<80;++y)S[y]=g(S[y-3]^S[y-8]^S[y-14]^S[y-16],1);let T=L[0],I=L[1],M=L[2],R=L[3],b=L[4];for(let y=0;y<80;++y){const c=Math.floor(y/20),o=g(T,5)+l(c,I,M,R)+b+B[c]+S[y]>>>0;b=R,R=M,M=g(I,30)>>>0,I=T,T=o}L[0]=L[0]+T>>>0,L[1]=L[1]+I>>>0,L[2]=L[2]+M>>>0,L[3]=L[3]+R>>>0,L[4]=L[4]+b>>>0}return[L[0]>>24&255,L[0]>>16&255,L[0]>>8&255,255&L[0],L[1]>>24&255,L[1]>>16&255,L[1]>>8&255,255&L[1],L[2]>>24&255,L[2]>>16&255,L[2]>>8&255,255&L[2],L[3]>>24&255,L[3]>>16&255,L[3]>>8&255,255&L[3],L[4]>>24&255,L[4]>>16&255,L[4]>>8&255,255&L[4]]}},9110:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(5468)),u=D(l(2448));function D(w){return w&&w.__esModule?w:{default:w}}let p,B,L=0,F=0;N.default=function(w,S,T){let I=S&&T||0;const M=S||[];let R=(w=w||{}).node||p,b=void 0!==w.clockseq?w.clockseq:B;if(null==R||null==b){const K=w.random||(w.rng||g.default)();null==R&&(R=p=[1|K[0],K[1],K[2],K[3],K[4],K[5]]),null==b&&(b=B=16383&(K[6]<<8|K[7]))}let y=void 0!==w.msecs?w.msecs:Date.now(),c=void 0!==w.nsecs?w.nsecs:F+1;const o=y-L+(c-F)/1e4;if(o<0&&void 0===w.clockseq&&(b=b+1&16383),(o<0||y>L)&&void 0===w.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");L=y,F=c,B=b,y+=122192928e5;const v=(1e4*(268435455&y)+c)%4294967296;M[I++]=v>>>24&255,M[I++]=v>>>16&255,M[I++]=v>>>8&255,M[I++]=255&v;const h=y/4294967296*1e4&268435455;M[I++]=h>>>8&255,M[I++]=255&h,M[I++]=h>>>24&15|16,M[I++]=h>>>16&255,M[I++]=b>>>8|128,M[I++]=255&b;for(let K=0;K<6;++K)M[I+K]=R[K];return S||(0,u.default)(M)}},8693:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(1657)),u=D(l(872));function D(L){return L&&L.__esModule?L:{default:L}}var B=(0,g.default)("v3",48,u.default);N.default=B},1657:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(x,P,w){function S(T,I,M,R){const b=M&&R||0;if("string"==typeof T&&(T=function(x){x=unescape(encodeURIComponent(x));const P=[];for(let w=0;w<x.length;++w)P.push(x.charCodeAt(w));return P}(T)),"string"==typeof I&&(I=function(x){const P=[];return x.replace(/[a-fA-F0-9]{2}/g,function(w){P.push(parseInt(w,16))}),P}(I)),!Array.isArray(T))throw TypeError("value must be an array of bytes");if(!Array.isArray(I)||16!==I.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const y=w(I.concat(T));if(y[6]=15&y[6]|P,y[8]=63&y[8]|128,M)for(let c=0;c<16;++c)M[b+c]=y[c];return M||(0,g.default)(y)}try{S.name=x}catch{}return S.DNS=B,S.URL=L,S},N.URL=N.DNS=void 0;var x,g=(x=l(2448))&&x.__esModule?x:{default:x};const B="6ba7b810-9dad-11d1-80b4-00c04fd430c8";N.DNS=B;const L="6ba7b811-9dad-11d1-80b4-00c04fd430c8";N.URL=L},491:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(5468)),u=D(l(2448));function D(L){return L&&L.__esModule?L:{default:L}}N.default=function(L,F,x){"string"==typeof L&&(F="binary"===L?new Uint8Array(16):null,L=null);const P=(L=L||{}).random||(L.rng||g.default)();if(P[6]=15&P[6]|64,P[8]=63&P[8]|128,F){const w=x||0;for(let S=0;S<16;++S)F[w+S]=P[S];return F}return(0,u.default)(P)}},8518:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(1657)),u=D(l(209));function D(L){return L&&L.__esModule?L:{default:L}}var B=(0,g.default)("v5",80,u.default);N.default=B},7854:oe=>{var N=function(l){"use strict";var D,g=Object.prototype,u=g.hasOwnProperty,p="function"==typeof Symbol?Symbol:{},B=p.iterator||"@@iterator",L=p.asyncIterator||"@@asyncIterator",F=p.toStringTag||"@@toStringTag";function x(H,ie,Ce){return Object.defineProperty(H,ie,{value:Ce,enumerable:!0,configurable:!0,writable:!0}),H[ie]}try{x({},"")}catch{x=function(ie,Ce,Fe){return ie[Ce]=Fe}}function P(H,ie,Ce,Fe){var _e=Object.create((ie&&ie.prototype instanceof b?ie:b).prototype),ne=new J(Fe||[]);return _e._invoke=function(H,ie,Ce){var Fe=S;return function(_e,ne){if(Fe===I)throw new Error("Generator is already running");if(Fe===M){if("throw"===_e)throw ne;return q()}for(Ce.method=_e,Ce.arg=ne;;){var fe=Ce.delegate;if(fe){var Te=pe(fe,Ce);if(Te){if(Te===R)continue;return Te}}if("next"===Ce.method)Ce.sent=Ce._sent=Ce.arg;else if("throw"===Ce.method){if(Fe===S)throw Fe=M,Ce.arg;Ce.dispatchException(Ce.arg)}else"return"===Ce.method&&Ce.abrupt("return",Ce.arg);Fe=I;var je=w(H,ie,Ce);if("normal"===je.type){if(Fe=Ce.done?M:T,je.arg===R)continue;return{value:je.arg,done:Ce.done}}"throw"===je.type&&(Fe=M,Ce.method="throw",Ce.arg=je.arg)}}}(H,Ce,ne),_e}function w(H,ie,Ce){try{return{type:"normal",arg:H.call(ie,Ce)}}catch(Fe){return{type:"throw",arg:Fe}}}l.wrap=P;var S="suspendedStart",T="suspendedYield",I="executing",M="completed",R={};function b(){}function y(){}function c(){}var o={};x(o,B,function(){return this});var v=Object.getPrototypeOf,h=v&&v(v(G([])));h&&h!==g&&u.call(h,B)&&(o=h);var K=c.prototype=b.prototype=Object.create(o);function ue(H){["next","throw","return"].forEach(function(ie){x(H,ie,function(Ce){return this._invoke(ie,Ce)})})}function we(H,ie){function Ce(_e,ne,fe,Te){var je=w(H[_e],H,ne);if("throw"!==je.type){var Ze=je.arg,ut=Ze.value;return ut&&"object"==typeof ut&&u.call(ut,"__await")?ie.resolve(ut.__await).then(function(et){Ce("next",et,fe,Te)},function(et){Ce("throw",et,fe,Te)}):ie.resolve(ut).then(function(et){Ze.value=et,fe(Ze)},function(et){return Ce("throw",et,fe,Te)})}Te(je.arg)}var Fe;this._invoke=function(_e,ne){function fe(){return new ie(function(Te,je){Ce(_e,ne,Te,je)})}return Fe=Fe?Fe.then(fe,fe):fe()}}function pe(H,ie){var Ce=H.iterator[ie.method];if(Ce===D){if(ie.delegate=null,"throw"===ie.method){if(H.iterator.return&&(ie.method="return",ie.arg=D,pe(H,ie),"throw"===ie.method))return R;ie.method="throw",ie.arg=new TypeError("The iterator does not provide a 'throw' method")}return R}var Fe=w(Ce,H.iterator,ie.arg);if("throw"===Fe.type)return ie.method="throw",ie.arg=Fe.arg,ie.delegate=null,R;var me=Fe.arg;return me?me.done?(ie[H.resultName]=me.value,ie.next=H.nextLoc,"return"!==ie.method&&(ie.method="next",ie.arg=D),ie.delegate=null,R):me:(ie.method="throw",ie.arg=new TypeError("iterator result is not an object"),ie.delegate=null,R)}function Y(H){var ie={tryLoc:H[0]};1 in H&&(ie.catchLoc=H[1]),2 in H&&(ie.finallyLoc=H[2],ie.afterLoc=H[3]),this.tryEntries.push(ie)}function $(H){var ie=H.completion||{};ie.type="normal",delete ie.arg,H.completion=ie}function J(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}function G(H){if(H){var ie=H[B];if(ie)return ie.call(H);if("function"==typeof H.next)return H;if(!isNaN(H.length)){var Ce=-1,Fe=function me(){for(;++Ce<H.length;)if(u.call(H,Ce))return me.value=H[Ce],me.done=!1,me;return me.value=D,me.done=!0,me};return Fe.next=Fe}}return{next:q}}function q(){return{value:D,done:!0}}return y.prototype=c,x(K,"constructor",c),x(c,"constructor",y),y.displayName=x(c,F,"GeneratorFunction"),l.isGeneratorFunction=function(H){var ie="function"==typeof H&&H.constructor;return!!ie&&(ie===y||"GeneratorFunction"===(ie.displayName||ie.name))},l.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,c):(H.__proto__=c,x(H,F,"GeneratorFunction")),H.prototype=Object.create(K),H},l.awrap=function(H){return{__await:H}},ue(we.prototype),x(we.prototype,L,function(){return this}),l.AsyncIterator=we,l.async=function(H,ie,Ce,Fe,me){void 0===me&&(me=Promise);var _e=new we(P(H,ie,Ce,Fe),me);return l.isGeneratorFunction(ie)?_e:_e.next().then(function(ne){return ne.done?ne.value:_e.next()})},ue(K),x(K,F,"Generator"),x(K,B,function(){return this}),x(K,"toString",function(){return"[object Generator]"}),l.keys=function(H){var ie=[];for(var Ce in H)ie.push(Ce);return ie.reverse(),function Fe(){for(;ie.length;){var me=ie.pop();if(me in H)return Fe.value=me,Fe.done=!1,Fe}return Fe.done=!0,Fe}},l.values=G,J.prototype={constructor:J,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=D,this.done=!1,this.delegate=null,this.method="next",this.arg=D,this.tryEntries.forEach($),!H)for(var ie in this)"t"===ie.charAt(0)&&u.call(this,ie)&&!isNaN(+ie.slice(1))&&(this[ie]=D)},stop:function(){this.done=!0;var ie=this.tryEntries[0].completion;if("throw"===ie.type)throw ie.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var ie=this;function Ce(Te,je){return _e.type="throw",_e.arg=H,ie.next=Te,je&&(ie.method="next",ie.arg=D),!!je}for(var Fe=this.tryEntries.length-1;Fe>=0;--Fe){var me=this.tryEntries[Fe],_e=me.completion;if("root"===me.tryLoc)return Ce("end");if(me.tryLoc<=this.prev){var ne=u.call(me,"catchLoc"),fe=u.call(me,"finallyLoc");if(ne&&fe){if(this.prev<me.catchLoc)return Ce(me.catchLoc,!0);if(this.prev<me.finallyLoc)return Ce(me.finallyLoc)}else if(ne){if(this.prev<me.catchLoc)return Ce(me.catchLoc,!0)}else{if(!fe)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return Ce(me.finallyLoc)}}}},abrupt:function(H,ie){for(var Ce=this.tryEntries.length-1;Ce>=0;--Ce){var Fe=this.tryEntries[Ce];if(Fe.tryLoc<=this.prev&&u.call(Fe,"finallyLoc")&&this.prev<Fe.finallyLoc){var me=Fe;break}}me&&("break"===H||"continue"===H)&&me.tryLoc<=ie&&ie<=me.finallyLoc&&(me=null);var _e=me?me.completion:{};return _e.type=H,_e.arg=ie,me?(this.method="next",this.next=me.finallyLoc,R):this.complete(_e)},complete:function(H,ie){if("throw"===H.type)throw H.arg;return"break"===H.type||"continue"===H.type?this.next=H.arg:"return"===H.type?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):"normal"===H.type&&ie&&(this.next=ie),R},finish:function(H){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var Ce=this.tryEntries[ie];if(Ce.finallyLoc===H)return this.complete(Ce.completion,Ce.afterLoc),$(Ce),R}},catch:function(H){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var Ce=this.tryEntries[ie];if(Ce.tryLoc===H){var Fe=Ce.completion;if("throw"===Fe.type){var me=Fe.arg;$(Ce)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(H,ie,Ce){return this.delegate={iterator:G(H),resultName:ie,nextLoc:Ce},"next"===this.method&&(this.arg=D),R}},l}(oe.exports);try{regeneratorRuntime=N}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=N:Function("r","regeneratorRuntime = r")(N)}},4468:oe=>{var N=Object,l=TypeError;oe.exports=function(){if(null!=this&&this!==N(this))throw new l("RegExp.prototype.flags getter called on non-object");var u="";return this.global&&(u+="g"),this.ignoreCase&&(u+="i"),this.multiline&&(u+="m"),this.dotAll&&(u+="s"),this.unicode&&(u+="u"),this.sticky&&(u+="y"),u}},9235:(oe,N,l)=>{var g=l(2358),u=l(5685),D=l(4468),p=l(6343),B=l(1956),L=u(D);g(L,{getPolyfill:p,implementation:D,shim:B}),oe.exports=L},6343:(oe,N,l)=>{var g=l(4468),u=l(2358).supportsDescriptors,D=Object.getOwnPropertyDescriptor,p=TypeError;oe.exports=function(){if(!u)throw new p("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var L=D(RegExp.prototype,"flags");if(L&&"function"==typeof L.get&&"boolean"==typeof/a/.dotAll)return L.get}return g}},1956:(oe,N,l)=>{var g=l(2358).supportsDescriptors,u=l(6343),D=Object.getOwnPropertyDescriptor,p=Object.defineProperty,B=TypeError,L=Object.getPrototypeOf,F=/a/;oe.exports=function(){if(!g||!L)throw new B("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var P=u(),w=L(F),S=D(w,"flags");return(!S||S.get!==P)&&p(w,"flags",{configurable:!0,enumerable:!1,get:P}),P}},4966:oe=>{var N=function(){"use strict";function l(w,S){return null!=S&&w instanceof S}var g,u,D;try{g=Map}catch{g=function(){}}try{u=Set}catch{u=function(){}}try{D=Promise}catch{D=function(){}}function p(w,S,T,I,M){"object"==typeof S&&(T=S.depth,I=S.prototype,M=S.includeNonEnumerable,S=S.circular);var R=[],b=[],y="undefined"!=typeof Buffer;return void 0===S&&(S=!0),void 0===T&&(T=1/0),function c(o,v){if(null===o)return null;if(0===v)return o;var h,K;if("object"!=typeof o)return o;if(l(o,g))h=new g;else if(l(o,u))h=new u;else if(l(o,D))h=new D(function(q,H){o.then(function(ie){q(c(ie,v-1))},function(ie){H(c(ie,v-1))})});else if(p.__isArray(o))h=[];else if(p.__isRegExp(o))h=new RegExp(o.source,P(o)),o.lastIndex&&(h.lastIndex=o.lastIndex);else if(p.__isDate(o))h=new Date(o.getTime());else{if(y&&Buffer.isBuffer(o))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(h),h;l(o,Error)?h=Object.create(o):void 0===I?(K=Object.getPrototypeOf(o),h=Object.create(K)):(h=Object.create(I),K=I)}if(S){var ue=R.indexOf(o);if(-1!=ue)return b[ue];R.push(o),b.push(h)}for(var we in l(o,g)&&o.forEach(function(q,H){var ie=c(H,v-1),Ce=c(q,v-1);h.set(ie,Ce)}),l(o,u)&&o.forEach(function(q){var H=c(q,v-1);h.add(H)}),o){var ge;K&&(ge=Object.getOwnPropertyDescriptor(K,we)),(!ge||null!=ge.set)&&(h[we]=c(o[we],v-1))}if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(o);for(we=0;we<pe.length;we++){var Y=pe[we];($=Object.getOwnPropertyDescriptor(o,Y))&&!$.enumerable&&!M||(h[Y]=c(o[Y],v-1),$.enumerable||Object.defineProperty(h,Y,{enumerable:!1}))}}if(M){var J=Object.getOwnPropertyNames(o);for(we=0;we<J.length;we++){var $,G=J[we];($=Object.getOwnPropertyDescriptor(o,G))&&$.enumerable||(h[G]=c(o[G],v-1),Object.defineProperty(h,G,{enumerable:!1}))}}return h}(w,T)}function B(w){return Object.prototype.toString.call(w)}function P(w){var S="";return w.global&&(S+="g"),w.ignoreCase&&(S+="i"),w.multiline&&(S+="m"),S}return p.clonePrototype=function(S){if(null===S)return null;var T=function(){};return T.prototype=S,new T},p.__objToStr=B,p.__isDate=function(w){return"object"==typeof w&&"[object Date]"===B(w)},p.__isArray=function(w){return"object"==typeof w&&"[object Array]"===B(w)},p.__isRegExp=function(w){return"object"==typeof w&&"[object RegExp]"===B(w)},p.__getRegExpFlags=P,p}();oe.exports&&(oe.exports=N)},1135:(oe,N,l)=>{l.d(N,{X:()=>u});var g=l(7579);class u extends g.x{constructor(p){super(),this._value=p}get value(){return this.getValue()}_subscribe(p){const B=super._subscribe(p);return!B.closed&&p.next(this._value),B}getValue(){const{hasError:p,thrownError:B,_value:L}=this;if(p)throw B;return this._throwIfClosed(),L}next(p){super.next(this._value=p)}}},8306:(oe,N,l)=>{l.d(N,{y:()=>w});var g=l(930),u=l(727),D=l(8822),p=l(4671);var F=l(2416),x=l(576),P=l(2806);let w=(()=>{class M{constructor(b){b&&(this._subscribe=b)}lift(b){const y=new M;return y.source=this,y.operator=b,y}subscribe(b,y,c){const o=function(M){return M&&M instanceof g.Lv||function(M){return M&&(0,x.m)(M.next)&&(0,x.m)(M.error)&&(0,x.m)(M.complete)}(M)&&(0,u.Nn)(M)}(b)?b:new g.Hp(b,y,c);return(0,P.x)(()=>{const{operator:v,source:h}=this;o.add(v?v.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(b){try{return this._subscribe(b)}catch(y){b.error(y)}}forEach(b,y){return new(y=S(y))((c,o)=>{const v=new g.Hp({next:h=>{try{b(h)}catch(K){o(K),v.unsubscribe()}},error:o,complete:c});this.subscribe(v)})}_subscribe(b){var y;return null===(y=this.source)||void 0===y?void 0:y.subscribe(b)}[D.L](){return this}pipe(...b){return function(M){return 0===M.length?p.y:1===M.length?M[0]:function(b){return M.reduce((y,c)=>c(y),b)}}(b)(this)}toPromise(b){return new(b=S(b))((y,c)=>{let o;this.subscribe(v=>o=v,v=>c(v),()=>y(o))})}}return M.create=R=>new M(R),M})();function S(M){var R;return null!==(R=M??F.v.Promise)&&void 0!==R?R:Promise}},7579:(oe,N,l)=>{l.d(N,{x:()=>F});var g=l(8306),u=l(727);const p=(0,l(3888).d)(P=>function(){P(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var B=l(8737),L=l(2806);let F=(()=>{class P extends g.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(S){const T=new x(this,this);return T.operator=S,T}_throwIfClosed(){if(this.closed)throw new p}next(S){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const T=this.observers.slice();for(const I of T)I.next(S)}})}error(S){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=S;const{observers:T}=this;for(;T.length;)T.shift().error(S)}})}complete(){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:S}=this;for(;S.length;)S.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var S;return(null===(S=this.observers)||void 0===S?void 0:S.length)>0}_trySubscribe(S){return this._throwIfClosed(),super._trySubscribe(S)}_subscribe(S){return this._throwIfClosed(),this._checkFinalizedStatuses(S),this._innerSubscribe(S)}_innerSubscribe(S){const{hasError:T,isStopped:I,observers:M}=this;return T||I?u.Lc:(M.push(S),new u.w0(()=>(0,B.P)(M,S)))}_checkFinalizedStatuses(S){const{hasError:T,thrownError:I,isStopped:M}=this;T?S.error(I):M&&S.complete()}asObservable(){const S=new g.y;return S.source=this,S}}return P.create=(w,S)=>new x(w,S),P})();class x extends F{constructor(w,S){super(),this.destination=w,this.source=S}next(w){var S,T;null===(T=null===(S=this.destination)||void 0===S?void 0:S.next)||void 0===T||T.call(S,w)}error(w){var S,T;null===(T=null===(S=this.destination)||void 0===S?void 0:S.error)||void 0===T||T.call(S,w)}complete(){var w,S;null===(S=null===(w=this.destination)||void 0===w?void 0:w.complete)||void 0===S||S.call(w)}_subscribe(w){var S,T;return null!==(T=null===(S=this.source)||void 0===S?void 0:S.subscribe(w))&&void 0!==T?T:u.Lc}}},930:(oe,N,l)=>{l.d(N,{Hp:()=>I,Lv:()=>T});var g=l(576),u=l(727),D=l(2416),p=l(7849),B=l(5032);const L=P("C",void 0,void 0);function P(c,o,v){return{kind:c,value:o,error:v}}var w=l(3410),S=l(2806);class T extends u.w0{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,(0,u.Nn)(o)&&o.add(this)):this.destination=y}static create(o,v,h){return new I(o,v,h)}next(o){this.isStopped?b(P("N",o,void 0),this):this._next(o)}error(o){this.isStopped?b(P("E",void 0,o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?b(L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class I extends T{constructor(o,v,h){let K;if(super(),(0,g.m)(o))K=o;else if(o){let ue;({next:K,error:v,complete:h}=o),this&&D.v.useDeprecatedNextContext?(ue=Object.create(o),ue.unsubscribe=()=>this.unsubscribe()):ue=o,K=null==K?void 0:K.bind(ue),v=null==v?void 0:v.bind(ue),h=null==h?void 0:h.bind(ue)}this.destination={next:K?M(K):B.Z,error:M(v??R),complete:h?M(h):B.Z}}}function M(c,o){return(...v)=>{try{c(...v)}catch(h){D.v.useDeprecatedSynchronousErrorHandling?(0,S.O)(h):(0,p.h)(h)}}}function R(c){throw c}function b(c,o){const{onStoppedNotification:v}=D.v;v&&w.z.setTimeout(()=>v(c,o))}const y={closed:!0,next:B.Z,error:R,complete:B.Z}},727:(oe,N,l)=>{l.d(N,{Lc:()=>L,w0:()=>B,Nn:()=>F});var g=l(576);const D=(0,l(3888).d)(P=>function(S){P(this),this.message=S?`${S.length} errors occurred during unsubscription:\n${S.map((T,I)=>`${I+1}) ${T.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=S});var p=l(8737);class B{constructor(w){this.initialTeardown=w,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let w;if(!this.closed){this.closed=!0;const{_parentage:S}=this;if(S)if(this._parentage=null,Array.isArray(S))for(const M of S)M.remove(this);else S.remove(this);const{initialTeardown:T}=this;if((0,g.m)(T))try{T()}catch(M){w=M instanceof D?M.errors:[M]}const{_teardowns:I}=this;if(I){this._teardowns=null;for(const M of I)try{x(M)}catch(R){w=w??[],R instanceof D?w=[...w,...R.errors]:w.push(R)}}if(w)throw new D(w)}}add(w){var S;if(w&&w!==this)if(this.closed)x(w);else{if(w instanceof B){if(w.closed||w._hasParent(this))return;w._addParent(this)}(this._teardowns=null!==(S=this._teardowns)&&void 0!==S?S:[]).push(w)}}_hasParent(w){const{_parentage:S}=this;return S===w||Array.isArray(S)&&S.includes(w)}_addParent(w){const{_parentage:S}=this;this._parentage=Array.isArray(S)?(S.push(w),S):S?[S,w]:w}_removeParent(w){const{_parentage:S}=this;S===w?this._parentage=null:Array.isArray(S)&&(0,p.P)(S,w)}remove(w){const{_teardowns:S}=this;S&&(0,p.P)(S,w),w instanceof B&&w._removeParent(this)}}B.EMPTY=(()=>{const P=new B;return P.closed=!0,P})();const L=B.EMPTY;function F(P){return P instanceof B||P&&"closed"in P&&(0,g.m)(P.remove)&&(0,g.m)(P.add)&&(0,g.m)(P.unsubscribe)}function x(P){(0,g.m)(P)?P():P.unsubscribe()}},2416:(oe,N,l)=>{l.d(N,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3905:(oe,N,l)=>{l.d(N,{z:()=>D});var g=l(6805),u=l(930);function D(p,B){const L="object"==typeof B;return new Promise((F,x)=>{const P=new u.Hp({next:w=>{F(w),P.unsubscribe()},error:x,complete:()=>{L?F(B.defaultValue):x(new g.K)}});p.subscribe(P)})}},9841:(oe,N,l)=>{l.d(N,{a:()=>w});var g=l(8306),u=l(4742),D=l(2076),p=l(4671),B=l(3268),L=l(3269),F=l(1810),x=l(5403),P=l(9672);function w(...I){const M=(0,L.yG)(I),R=(0,L.jO)(I),{args:b,keys:y}=(0,u.D)(I);if(0===b.length)return(0,D.D)([],M);const c=new g.y(function(I,M,R=p.y){return b=>{T(M,()=>{const{length:y}=I,c=new Array(y);let o=y,v=y;for(let h=0;h<y;h++)T(M,()=>{const K=(0,D.D)(I[h],M);let ue=!1;K.subscribe(new x.Q(b,we=>{c[h]=we,ue||(ue=!0,v--),v||b.next(R(c.slice()))},()=>{--o||b.complete()}))},b)},b)}}(b,M,y?o=>(0,F.n)(y,o):p.y));return R?c.pipe((0,B.Z)(R)):c}function T(I,M,R){I?(0,P.f)(R,I,M):M()}},7272:(oe,N,l)=>{l.d(N,{z:()=>B});var g=l(8189),D=l(3269),p=l(2076);function B(...L){return(0,g.J)(1)((0,p.D)(L,(0,D.yG)(L)))}},9770:(oe,N,l)=>{l.d(N,{P:()=>D});var g=l(8306),u=l(8421);function D(p){return new g.y(B=>{(0,u.Xf)(p()).subscribe(B)})}},515:(oe,N,l)=>{l.d(N,{E:()=>u});const u=new(l(8306).y)(B=>B.complete())},4128:(oe,N,l)=>{l.d(N,{D:()=>x});var g=l(8306),u=l(4742),D=l(8421),p=l(3269),B=l(5403),L=l(3268),F=l(1810);function x(...P){const w=(0,p.jO)(P),{args:S,keys:T}=(0,u.D)(P),I=new g.y(M=>{const{length:R}=S;if(!R)return void M.complete();const b=new Array(R);let y=R,c=R;for(let o=0;o<R;o++){let v=!1;(0,D.Xf)(S[o]).subscribe(new B.Q(M,h=>{v||(v=!0,c--),b[o]=h},()=>y--,void 0,()=>{(!y||!v)&&(c||M.next(T?(0,F.n)(T,b):b),M.complete())}))}});return w?I.pipe((0,L.Z)(w)):I}},2076:(oe,N,l)=>{l.d(N,{D:()=>we});var g=l(8421),u=l(9672),D=l(4482),p=l(5403);function B(ge,pe=0){return(0,D.e)((Y,$)=>{Y.subscribe(new p.Q($,J=>(0,u.f)($,ge,()=>$.next(J),pe),()=>(0,u.f)($,ge,()=>$.complete(),pe),J=>(0,u.f)($,ge,()=>$.error(J),pe)))})}function L(ge,pe=0){return(0,D.e)((Y,$)=>{$.add(ge.schedule(()=>Y.subscribe($),pe))})}var P=l(8306),S=l(2202),T=l(576);function M(ge,pe){if(!ge)throw new Error("Iterable cannot be null");return new P.y(Y=>{(0,u.f)(Y,pe,()=>{const $=ge[Symbol.asyncIterator]();(0,u.f)(Y,pe,()=>{$.next().then(J=>{J.done?Y.complete():Y.next(J.value)})},0,!0)})})}var R=l(3670),b=l(8239),y=l(1144),c=l(6495),o=l(2206),v=l(4532),h=l(3260);function we(ge,pe){return pe?function(ge,pe){if(null!=ge){if((0,R.c)(ge))return function(ge,pe){return(0,g.Xf)(ge).pipe(L(pe),B(pe))}(ge,pe);if((0,y.z)(ge))return function(ge,pe){return new P.y(Y=>{let $=0;return pe.schedule(function(){$===ge.length?Y.complete():(Y.next(ge[$++]),Y.closed||this.schedule())})})}(ge,pe);if((0,b.t)(ge))return function(ge,pe){return(0,g.Xf)(ge).pipe(L(pe),B(pe))}(ge,pe);if((0,o.D)(ge))return M(ge,pe);if((0,c.T)(ge))return function(ge,pe){return new P.y(Y=>{let $;return(0,u.f)(Y,pe,()=>{$=ge[S.h](),(0,u.f)(Y,pe,()=>{let J,G;try{({value:J,done:G}=$.next())}catch(q){return void Y.error(q)}G?Y.complete():Y.next(J)},0,!0)}),()=>(0,T.m)(null==$?void 0:$.return)&&$.return()})}(ge,pe);if((0,h.L)(ge))return function(ge,pe){return M((0,h.Q)(ge),pe)}(ge,pe)}throw(0,v.z)(ge)}(ge,pe):(0,g.Xf)(ge)}},4968:(oe,N,l)=>{l.d(N,{R:()=>w});var g=l(8421),u=l(8306),D=l(5577),p=l(1144),B=l(576),L=l(3268);const F=["addListener","removeListener"],x=["addEventListener","removeEventListener"],P=["on","off"];function w(R,b,y,c){if((0,B.m)(y)&&(c=y,y=void 0),c)return w(R,b,y).pipe((0,L.Z)(c));const[o,v]=function(R){return(0,B.m)(R.addEventListener)&&(0,B.m)(R.removeEventListener)}(R)?x.map(h=>K=>R[h](b,K,y)):function(R){return(0,B.m)(R.addListener)&&(0,B.m)(R.removeListener)}(R)?F.map(S(R,b)):function(R){return(0,B.m)(R.on)&&(0,B.m)(R.off)}(R)?P.map(S(R,b)):[];if(!o&&(0,p.z)(R))return(0,D.z)(h=>w(h,b,y))((0,g.Xf)(R));if(!o)throw new TypeError("Invalid event target");return new u.y(h=>{const K=(...ue)=>h.next(1<ue.length?ue:ue[0]);return o(K),()=>v(K)})}function S(R,b){return y=>c=>R[y](b,c)}},8421:(oe,N,l)=>{l.d(N,{Xf:()=>I});var g=l(655),u=l(1144),D=l(8239),p=l(8306),B=l(3670),L=l(2206),F=l(4532),x=l(6495),P=l(3260),w=l(576),S=l(7849),T=l(8822);function I(h){if(h instanceof p.y)return h;if(null!=h){if((0,B.c)(h))return function(h){return new p.y(K=>{const ue=h[T.L]();if((0,w.m)(ue.subscribe))return ue.subscribe(K);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(h);if((0,u.z)(h))return function(h){return new p.y(K=>{for(let ue=0;ue<h.length&&!K.closed;ue++)K.next(h[ue]);K.complete()})}(h);if((0,D.t)(h))return function(h){return new p.y(K=>{h.then(ue=>{K.closed||(K.next(ue),K.complete())},ue=>K.error(ue)).then(null,S.h)})}(h);if((0,L.D)(h))return c(h);if((0,x.T)(h))return function(h){return new p.y(K=>{for(const ue of h)if(K.next(ue),K.closed)return;K.complete()})}(h);if((0,P.L)(h))return function(h){return c((0,P.Q)(h))}(h)}throw(0,F.z)(h)}function c(h){return new p.y(K=>{(function(h,K){var ue,we,ge,pe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ue=(0,g.KL)(h);!(we=yield ue.next()).done;)if(K.next(we.value),K.closed)return}catch(Y){ge={error:Y}}finally{try{we&&!we.done&&(pe=ue.return)&&(yield pe.call(ue))}finally{if(ge)throw ge.error}}K.complete()})})(h,K).catch(ue=>K.error(ue))})}},6451:(oe,N,l)=>{l.d(N,{T:()=>L});var g=l(8189),u=l(8421),D=l(515),p=l(3269),B=l(2076);function L(...F){const x=(0,p.yG)(F),P=(0,p._6)(F,1/0),w=F;return w.length?1===w.length?(0,u.Xf)(w[0]):(0,g.J)(P)((0,B.D)(w,x)):D.E}},9646:(oe,N,l)=>{l.d(N,{of:()=>D});var g=l(3269),u=l(2076);function D(...p){const B=(0,g.yG)(p);return(0,u.D)(p,B)}},2843:(oe,N,l)=>{l.d(N,{_:()=>D});var g=l(8306),u=l(576);function D(p,B){const L=(0,u.m)(p)?p:()=>p,F=x=>x.error(L());return new g.y(B?x=>B.schedule(F,0,x):F)}},5963:(oe,N,l)=>{l.d(N,{H:()=>B});var g=l(8306),u=l(4986),D=l(3532);function B(L=0,F,x=u.P){let P=-1;return null!=F&&((0,D.K)(F)?x=F:P=F),new g.y(w=>{let S=function(L){return L instanceof Date&&!isNaN(L)}(L)?+L-x.now():L;S<0&&(S=0);let T=0;return x.schedule(function(){w.closed||(w.next(T++),0<=P?this.schedule(void 0,P):w.complete())},S)})}},5403:(oe,N,l)=>{l.d(N,{Q:()=>u});var g=l(930);class u extends g.Lv{constructor(p,B,L,F,x){super(p),this.onFinalize=x,this._next=B?function(P){try{B(P)}catch(w){p.error(w)}}:super._next,this._error=F?function(P){try{F(P)}catch(w){p.error(w)}finally{this.unsubscribe()}}:super._error,this._complete=L?function(){try{L()}catch(P){p.error(P)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var p;const{closed:B}=this;super.unsubscribe(),!B&&(null===(p=this.onFinalize)||void 0===p||p.call(this))}}},3601:(oe,N,l)=>{l.d(N,{e:()=>F});var g=l(4986),u=l(4482),D=l(8421),p=l(5403),L=l(5963);function F(x,P=g.P){return function(x){return(0,u.e)((P,w)=>{let S=!1,T=null,I=null,M=!1;const R=()=>{if(null==I||I.unsubscribe(),I=null,S){S=!1;const y=T;T=null,w.next(y)}M&&w.complete()},b=()=>{I=null,M&&w.complete()};P.subscribe(new p.Q(w,y=>{S=!0,T=y,I||(0,D.Xf)(x()).subscribe(I=new p.Q(w,R,b))},()=>{M=!0,(!S||!I||I.closed)&&w.complete()}))})}(()=>(0,L.H)(x,P))}},262:(oe,N,l)=>{l.d(N,{K:()=>p});var g=l(8421),u=l(5403),D=l(4482);function p(B){return(0,D.e)((L,F)=>{let w,x=null,P=!1;x=L.subscribe(new u.Q(F,void 0,void 0,S=>{w=(0,g.Xf)(B(S,p(B)(L))),x?(x.unsubscribe(),x=null,w.subscribe(F)):P=!0})),P&&(x.unsubscribe(),x=null,w.subscribe(F))})}},1884:(oe,N,l)=>{l.d(N,{x:()=>p});var g=l(4671),u=l(4482),D=l(5403);function p(L,F=g.y){return L=L??B,(0,u.e)((x,P)=>{let w,S=!0;x.subscribe(new D.Q(P,T=>{const I=F(T);(S||!L(w,I))&&(S=!1,w=I,P.next(T))}))})}function B(L,F){return L===F}},9300:(oe,N,l)=>{l.d(N,{h:()=>D});var g=l(4482),u=l(5403);function D(p,B){return(0,g.e)((L,F)=>{let x=0;L.subscribe(new u.Q(F,P=>p.call(B,P,x++)&&F.next(P)))})}},8746:(oe,N,l)=>{l.d(N,{x:()=>u});var g=l(4482);function u(D){return(0,g.e)((p,B)=>{try{p.subscribe(B)}finally{B.add(D)}})}},4004:(oe,N,l)=>{l.d(N,{U:()=>D});var g=l(4482),u=l(5403);function D(p,B){return(0,g.e)((L,F)=>{let x=0;L.subscribe(new u.Q(F,P=>{F.next(p.call(B,P,x++))}))})}},8189:(oe,N,l)=>{l.d(N,{J:()=>D});var g=l(5577),u=l(4671);function D(p=1/0){return(0,g.z)(u.y,p)}},5577:(oe,N,l)=>{l.d(N,{z:()=>x});var g=l(4004),u=l(8421),D=l(4482),B=(l(9672),l(5403)),F=l(576);function x(P,w,S=1/0){return(0,F.m)(w)?x((T,I)=>(0,g.U)((M,R)=>w(T,M,I,R))((0,u.Xf)(P(T,I))),S):("number"==typeof w&&(S=w),(0,D.e)((T,I)=>function(P,w,S,T,I,M,R,b){const y=[];let c=0,o=0,v=!1;const h=()=>{v&&!y.length&&!c&&w.complete()},K=we=>c<T?ue(we):y.push(we),ue=we=>{c++;let ge=!1;(0,u.Xf)(S(we,o++)).subscribe(new B.Q(w,pe=>{w.next(pe)},()=>{ge=!0},void 0,()=>{if(ge)try{for(c--;y.length&&c<T;){const pe=y.shift();ue(pe)}h()}catch(pe){w.error(pe)}}))};return P.subscribe(new B.Q(w,K,()=>{v=!0,h()})),()=>{}}(T,I,P,S)))}},3099:(oe,N,l)=>{l.d(N,{B:()=>L});var g=l(2076),u=l(5698),D=l(7579),p=l(930),B=l(4482);function L(x={}){const{connector:P=(()=>new D.x),resetOnError:w=!0,resetOnComplete:S=!0,resetOnRefCountZero:T=!0}=x;return I=>{let M=null,R=null,b=null,y=0,c=!1,o=!1;const v=()=>{null==R||R.unsubscribe(),R=null},h=()=>{v(),M=b=null,c=o=!1},K=()=>{const ue=M;h(),null==ue||ue.unsubscribe()};return(0,B.e)((ue,we)=>{y++,!o&&!c&&v();const ge=b=b??P();we.add(()=>{y--,0===y&&!o&&!c&&(R=F(K,T))}),ge.subscribe(we),M||(M=new p.Hp({next:pe=>ge.next(pe),error:pe=>{o=!0,v(),R=F(h,w,pe),ge.error(pe)},complete:()=>{c=!0,v(),R=F(h,S),ge.complete()}}),(0,g.D)(ue).subscribe(M))})(I)}}function F(x,P,...w){return!0===P?(x(),null):!1===P?null:P(...w).pipe((0,u.q)(1)).subscribe(()=>x())}},8675:(oe,N,l)=>{l.d(N,{O:()=>p});var g=l(7272),u=l(3269),D=l(4482);function p(...B){const L=(0,u.yG)(B);return(0,D.e)((F,x)=>{(L?(0,g.z)(B,F,L):(0,g.z)(B,F)).subscribe(x)})}},3900:(oe,N,l)=>{l.d(N,{w:()=>p});var g=l(8421),u=l(4482),D=l(5403);function p(B,L){return(0,u.e)((F,x)=>{let P=null,w=0,S=!1;const T=()=>S&&!P&&x.complete();F.subscribe(new D.Q(x,I=>{null==P||P.unsubscribe();let M=0;const R=w++;(0,g.Xf)(B(I,R)).subscribe(P=new D.Q(x,b=>x.next(L?L(I,b,R,M++):b),()=>{P=null,T()}))},()=>{S=!0,T()}))})}},5698:(oe,N,l)=>{l.d(N,{q:()=>p});var g=l(515),u=l(4482),D=l(5403);function p(B){return B<=0?()=>g.E:(0,u.e)((L,F)=>{let x=0;L.subscribe(new D.Q(F,P=>{++x<=B&&(F.next(P),B<=x&&F.complete())}))})}},2722:(oe,N,l)=>{l.d(N,{R:()=>B});var g=l(4482),u=l(5403),D=l(8421),p=l(5032);function B(L){return(0,g.e)((F,x)=>{(0,D.Xf)(L).subscribe(new u.Q(x,()=>x.complete(),p.Z)),!x.closed&&F.subscribe(x)})}},8505:(oe,N,l)=>{l.d(N,{b:()=>B});var g=l(576),u=l(4482),D=l(5403),p=l(4671);function B(L,F,x){const P=(0,g.m)(L)||F||x?{next:L,error:F,complete:x}:L;return P?(0,u.e)((w,S)=>{var T;null===(T=P.subscribe)||void 0===T||T.call(P);let I=!0;w.subscribe(new D.Q(S,M=>{var R;null===(R=P.next)||void 0===R||R.call(P,M),S.next(M)},()=>{var M;I=!1,null===(M=P.complete)||void 0===M||M.call(P),S.complete()},M=>{var R;I=!1,null===(R=P.error)||void 0===R||R.call(P,M),S.error(M)},()=>{var M,R;I&&(null===(M=P.unsubscribe)||void 0===M||M.call(P)),null===(R=P.finalize)||void 0===R||R.call(P)}))}):p.y}},4408:(oe,N,l)=>{l.d(N,{o:()=>B});var g=l(727);class u extends g.w0{constructor(F,x){super()}schedule(F,x=0){return this}}const D={setInterval(...L){const{delegate:F}=D;return((null==F?void 0:F.setInterval)||setInterval)(...L)},clearInterval(L){const{delegate:F}=D;return((null==F?void 0:F.clearInterval)||clearInterval)(L)},delegate:void 0};var p=l(8737);class B extends u{constructor(F,x){super(F,x),this.scheduler=F,this.work=x,this.pending=!1}schedule(F,x=0){if(this.closed)return this;this.state=F;const P=this.id,w=this.scheduler;return null!=P&&(this.id=this.recycleAsyncId(w,P,x)),this.pending=!0,this.delay=x,this.id=this.id||this.requestAsyncId(w,this.id,x),this}requestAsyncId(F,x,P=0){return D.setInterval(F.flush.bind(F,this),P)}recycleAsyncId(F,x,P=0){if(null!=P&&this.delay===P&&!1===this.pending)return x;D.clearInterval(x)}execute(F,x){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const P=this._execute(F,x);if(P)return P;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(F,x){let w,P=!1;try{this.work(F)}catch(S){P=!0,w=S||new Error("Scheduled action threw falsy error")}if(P)return this.unsubscribe(),w}unsubscribe(){if(!this.closed){const{id:F,scheduler:x}=this,{actions:P}=x;this.work=this.state=this.scheduler=null,this.pending=!1,(0,p.P)(P,this),null!=F&&(this.id=this.recycleAsyncId(x,F,null)),this.delay=null,super.unsubscribe()}}}},7565:(oe,N,l)=>{l.d(N,{v:()=>D});var g=l(6063);class u{constructor(B,L=u.now){this.schedulerActionCtor=B,this.now=L}schedule(B,L=0,F){return new this.schedulerActionCtor(this,B).schedule(F,L)}}u.now=g.l.now;class D extends u{constructor(B,L=u.now){super(B,L),this.actions=[],this._active=!1,this._scheduled=void 0}flush(B){const{actions:L}=this;if(this._active)return void L.push(B);let F;this._active=!0;do{if(F=B.execute(B.state,B.delay))break}while(B=L.shift());if(this._active=!1,F){for(;B=L.shift();)B.unsubscribe();throw F}}}},6406:(oe,N,l)=>{l.d(N,{Z:()=>F});var g=l(4408),u=l(727);const D={schedule(P){let w=requestAnimationFrame,S=cancelAnimationFrame;const{delegate:T}=D;T&&(w=T.requestAnimationFrame,S=T.cancelAnimationFrame);const I=w(M=>{S=void 0,P(M)});return new u.w0(()=>null==S?void 0:S(I))},requestAnimationFrame(...P){const{delegate:w}=D;return((null==w?void 0:w.requestAnimationFrame)||requestAnimationFrame)(...P)},cancelAnimationFrame(...P){const{delegate:w}=D;return((null==w?void 0:w.cancelAnimationFrame)||cancelAnimationFrame)(...P)},delegate:void 0};var B=l(7565);const F=new class extends B.v{flush(w){this._active=!0;const S=this._scheduled;this._scheduled=void 0;const{actions:T}=this;let I;w=w||T.shift();do{if(I=w.execute(w.state,w.delay))break}while((w=T[0])&&w.id===S&&T.shift());if(this._active=!1,I){for(;(w=T[0])&&w.id===S&&T.shift();)w.unsubscribe();throw I}}}(class extends g.o{constructor(w,S){super(w,S),this.scheduler=w,this.work=S}requestAsyncId(w,S,T=0){return null!==T&&T>0?super.requestAsyncId(w,S,T):(w.actions.push(this),w._scheduled||(w._scheduled=D.requestAnimationFrame(()=>w.flush(void 0))))}recycleAsyncId(w,S,T=0){if(null!=T&&T>0||null==T&&this.delay>0)return super.recycleAsyncId(w,S,T);w.actions.some(I=>I.id===S)||(D.cancelAnimationFrame(S),w._scheduled=void 0)}})},3101:(oe,N,l)=>{l.d(N,{E:()=>M});var g=l(4408);let D,u=1;const p={};function B(b){return b in p&&(delete p[b],!0)}const L={setImmediate(b){const y=u++;return p[y]=!0,D||(D=Promise.resolve()),D.then(()=>B(y)&&b()),y},clearImmediate(b){B(b)}},{setImmediate:x,clearImmediate:P}=L,w={setImmediate(...b){const{delegate:y}=w;return((null==y?void 0:y.setImmediate)||x)(...b)},clearImmediate(b){const{delegate:y}=w;return((null==y?void 0:y.clearImmediate)||P)(b)},delegate:void 0};var T=l(7565);const M=new class extends T.v{flush(y){this._active=!0;const c=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let v;y=y||o.shift();do{if(v=y.execute(y.state,y.delay))break}while((y=o[0])&&y.id===c&&o.shift());if(this._active=!1,v){for(;(y=o[0])&&y.id===c&&o.shift();)y.unsubscribe();throw v}}}(class extends g.o{constructor(y,c){super(y,c),this.scheduler=y,this.work=c}requestAsyncId(y,c,o=0){return null!==o&&o>0?super.requestAsyncId(y,c,o):(y.actions.push(this),y._scheduled||(y._scheduled=w.setImmediate(y.flush.bind(y,void 0))))}recycleAsyncId(y,c,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(y,c,o);y.actions.some(v=>v.id===c)||(w.clearImmediate(c),y._scheduled=void 0)}})},4986:(oe,N,l)=>{l.d(N,{z:()=>D,P:()=>p});var g=l(4408);const D=new(l(7565).v)(g.o),p=D},6063:(oe,N,l)=>{l.d(N,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(oe,N,l)=>{l.d(N,{z:()=>g});const g={setTimeout(...u){const{delegate:D}=g;return((null==D?void 0:D.setTimeout)||setTimeout)(...u)},clearTimeout(u){const{delegate:D}=g;return((null==D?void 0:D.clearTimeout)||clearTimeout)(u)},delegate:void 0}},2202:(oe,N,l)=>{l.d(N,{h:()=>u});const u="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},8822:(oe,N,l)=>{l.d(N,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(oe,N,l)=>{l.d(N,{K:()=>u});const u=(0,l(3888).d)(D=>function(){D(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(oe,N,l)=>{l.d(N,{jO:()=>p,yG:()=>B,_6:()=>L});var g=l(576),u=l(3532);function D(F){return F[F.length-1]}function p(F){return(0,g.m)(D(F))?F.pop():void 0}function B(F){return(0,u.K)(D(F))?F.pop():void 0}function L(F,x){return"number"==typeof D(F)?F.pop():x}},4742:(oe,N,l)=>{l.d(N,{D:()=>B});const{isArray:g}=Array,{getPrototypeOf:u,prototype:D,keys:p}=Object;function B(F){if(1===F.length){const x=F[0];if(g(x))return{args:x,keys:null};if(function(F){return F&&"object"==typeof F&&u(F)===D}(x)){const P=p(x);return{args:P.map(w=>x[w]),keys:P}}}return{args:F,keys:null}}},8737:(oe,N,l)=>{function g(u,D){if(u){const p=u.indexOf(D);0<=p&&u.splice(p,1)}}l.d(N,{P:()=>g})},3888:(oe,N,l)=>{function g(u){const p=u(B=>{Error.call(B),B.stack=(new Error).stack});return p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p}l.d(N,{d:()=>g})},1810:(oe,N,l)=>{function g(u,D){return u.reduce((p,B,L)=>(p[B]=D[L],p),{})}l.d(N,{n:()=>g})},2806:(oe,N,l)=>{l.d(N,{x:()=>D,O:()=>p});var g=l(2416);let u=null;function D(B){if(g.v.useDeprecatedSynchronousErrorHandling){const L=!u;if(L&&(u={errorThrown:!1,error:null}),B(),L){const{errorThrown:F,error:x}=u;if(u=null,F)throw x}}else B()}function p(B){g.v.useDeprecatedSynchronousErrorHandling&&u&&(u.errorThrown=!0,u.error=B)}},9672:(oe,N,l)=>{function g(u,D,p,B=0,L=!1){const F=D.schedule(function(){p(),L?u.add(this.schedule(null,B)):this.unsubscribe()},B);if(u.add(F),!L)return F}l.d(N,{f:()=>g})},4671:(oe,N,l)=>{function g(u){return u}l.d(N,{y:()=>g})},1144:(oe,N,l)=>{l.d(N,{z:()=>g});const g=u=>u&&"number"==typeof u.length&&"function"!=typeof u},2206:(oe,N,l)=>{l.d(N,{D:()=>u});var g=l(576);function u(D){return Symbol.asyncIterator&&(0,g.m)(null==D?void 0:D[Symbol.asyncIterator])}},576:(oe,N,l)=>{function g(u){return"function"==typeof u}l.d(N,{m:()=>g})},3670:(oe,N,l)=>{l.d(N,{c:()=>D});var g=l(8822),u=l(576);function D(p){return(0,u.m)(p[g.L])}},6495:(oe,N,l)=>{l.d(N,{T:()=>D});var g=l(2202),u=l(576);function D(p){return(0,u.m)(null==p?void 0:p[g.h])}},8239:(oe,N,l)=>{l.d(N,{t:()=>u});var g=l(576);function u(D){return(0,g.m)(null==D?void 0:D.then)}},3260:(oe,N,l)=>{l.d(N,{Q:()=>D,L:()=>p});var g=l(655),u=l(576);function D(B){return(0,g.FC)(this,arguments,function*(){const F=B.getReader();try{for(;;){const{value:x,done:P}=yield(0,g.qq)(F.read());if(P)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(x)}}finally{F.releaseLock()}})}function p(B){return(0,u.m)(null==B?void 0:B.getReader)}},3532:(oe,N,l)=>{l.d(N,{K:()=>u});var g=l(576);function u(D){return D&&(0,g.m)(D.schedule)}},4482:(oe,N,l)=>{l.d(N,{A:()=>u,e:()=>D});var g=l(576);function u(p){return(0,g.m)(null==p?void 0:p.lift)}function D(p){return B=>{if(u(B))return B.lift(function(L){try{return p(L,this)}catch(F){this.error(F)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(oe,N,l)=>{l.d(N,{Z:()=>p});var g=l(4004);const{isArray:u}=Array;function p(B){return(0,g.U)(L=>function(B,L){return u(L)?B(...L):B(L)}(B,L))}},5032:(oe,N,l)=>{function g(){}l.d(N,{Z:()=>g})},7849:(oe,N,l)=>{l.d(N,{h:()=>D});var g=l(2416),u=l(3410);function D(p){u.z.setTimeout(()=>{const{onUnhandledError:B}=g.v;if(!B)throw p;B(p)})}},4532:(oe,N,l)=>{function g(u){return new TypeError(`You provided ${null!==u&&"object"==typeof u?"an invalid object":`'${u}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}l.d(N,{z:()=>g})},1452:oe=>{oe.exports=function(N){"use strict";var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function D(b,y){var c=b[0],o=b[1],v=b[2],h=b[3];o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[0]-680876936|0)<<7|c>>>25)+o|0)&o|~c&v)+y[1]-389564586|0)<<12|h>>>20)+c|0)&c|~h&o)+y[2]+606105819|0)<<17|v>>>15)+h|0)&h|~v&c)+y[3]-1044525330|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[4]-176418897|0)<<7|c>>>25)+o|0)&o|~c&v)+y[5]+1200080426|0)<<12|h>>>20)+c|0)&c|~h&o)+y[6]-1473231341|0)<<17|v>>>15)+h|0)&h|~v&c)+y[7]-45705983|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[8]+1770035416|0)<<7|c>>>25)+o|0)&o|~c&v)+y[9]-1958414417|0)<<12|h>>>20)+c|0)&c|~h&o)+y[10]-42063|0)<<17|v>>>15)+h|0)&h|~v&c)+y[11]-1990404162|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[12]+1804603682|0)<<7|c>>>25)+o|0)&o|~c&v)+y[13]-40341101|0)<<12|h>>>20)+c|0)&c|~h&o)+y[14]-1502002290|0)<<17|v>>>15)+h|0)&h|~v&c)+y[15]+1236535329|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[1]-165796510|0)<<5|c>>>27)+o|0)&v|o&~v)+y[6]-1069501632|0)<<9|h>>>23)+c|0)&o|c&~o)+y[11]+643717713|0)<<14|v>>>18)+h|0)&c|h&~c)+y[0]-373897302|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[5]-701558691|0)<<5|c>>>27)+o|0)&v|o&~v)+y[10]+38016083|0)<<9|h>>>23)+c|0)&o|c&~o)+y[15]-660478335|0)<<14|v>>>18)+h|0)&c|h&~c)+y[4]-405537848|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[9]+568446438|0)<<5|c>>>27)+o|0)&v|o&~v)+y[14]-1019803690|0)<<9|h>>>23)+c|0)&o|c&~o)+y[3]-187363961|0)<<14|v>>>18)+h|0)&c|h&~c)+y[8]+1163531501|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[13]-1444681467|0)<<5|c>>>27)+o|0)&v|o&~v)+y[2]-51403784|0)<<9|h>>>23)+c|0)&o|c&~o)+y[7]+1735328473|0)<<14|v>>>18)+h|0)&c|h&~c)+y[12]-1926607734|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[5]-378558|0)<<4|c>>>28)+o|0)^o^v)+y[8]-2022574463|0)<<11|h>>>21)+c|0)^c^o)+y[11]+1839030562|0)<<16|v>>>16)+h|0)^h^c)+y[14]-35309556|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[1]-1530992060|0)<<4|c>>>28)+o|0)^o^v)+y[4]+1272893353|0)<<11|h>>>21)+c|0)^c^o)+y[7]-155497632|0)<<16|v>>>16)+h|0)^h^c)+y[10]-1094730640|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[13]+681279174|0)<<4|c>>>28)+o|0)^o^v)+y[0]-358537222|0)<<11|h>>>21)+c|0)^c^o)+y[3]-722521979|0)<<16|v>>>16)+h|0)^h^c)+y[6]+76029189|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[9]-640364487|0)<<4|c>>>28)+o|0)^o^v)+y[12]-421815835|0)<<11|h>>>21)+c|0)^c^o)+y[15]+530742520|0)<<16|v>>>16)+h|0)^h^c)+y[2]-995338651|0)<<23|o>>>9)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[0]-198630844|0)<<6|c>>>26)+o|0)|~v))+y[7]+1126891415|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[14]-1416354905|0)<<15|v>>>17)+h|0)|~c))+y[5]-57434055|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[12]+1700485571|0)<<6|c>>>26)+o|0)|~v))+y[3]-1894986606|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[10]-1051523|0)<<15|v>>>17)+h|0)|~c))+y[1]-2054922799|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[8]+1873313359|0)<<6|c>>>26)+o|0)|~v))+y[15]-30611744|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[6]-1560198380|0)<<15|v>>>17)+h|0)|~c))+y[13]+1309151649|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[4]-145523070|0)<<6|c>>>26)+o|0)|~v))+y[11]-1120210379|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[2]+718787259|0)<<15|v>>>17)+h|0)|~c))+y[9]-343485551|0)<<21|o>>>11)+v|0,b[0]=c+b[0]|0,b[1]=o+b[1]|0,b[2]=v+b[2]|0,b[3]=h+b[3]|0}function p(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b.charCodeAt(c)+(b.charCodeAt(c+1)<<8)+(b.charCodeAt(c+2)<<16)+(b.charCodeAt(c+3)<<24);return y}function B(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b[c]+(b[c+1]<<8)+(b[c+2]<<16)+(b[c+3]<<24);return y}function L(b){var o,v,h,K,ue,we,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,p(b.substring(o-64,o)));for(v=(b=b.substring(o-64)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=b.charCodeAt(o)<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),we=parseInt(K[1],16)||0,h[14]=ue,h[15]=we,D(c,h),c}function x(b){var c,y="";for(c=0;c<4;c+=1)y+=g[b>>8*c+4&15]+g[b>>8*c&15];return y}function P(b){var y;for(y=0;y<b.length;y+=1)b[y]=x(b[y]);return b.join("")}function w(b){return/[\u0080-\uFFFF]/.test(b)&&(b=unescape(encodeURIComponent(b))),b}function M(b){var o,y=[],c=b.length;for(o=0;o<c-1;o+=2)y.push(parseInt(b.substr(o,2),16));return String.fromCharCode.apply(String,y)}function R(){this.reset()}return P(L("hello")),"undefined"!=typeof ArrayBuffer&&!ArrayBuffer.prototype.slice&&function(){function b(y,c){return(y=0|y||0)<0?Math.max(y+c,0):Math.min(y,c)}ArrayBuffer.prototype.slice=function(y,c){var K,ue,we,ge,o=this.byteLength,v=b(y,o),h=o;return undefined!==c&&(h=b(c,o)),v>h?new ArrayBuffer(0):(K=h-v,ue=new ArrayBuffer(K),we=new Uint8Array(ue),ge=new Uint8Array(this,v,K),we.set(ge),ue)}}(),R.prototype.append=function(b){return this.appendBinary(w(b)),this},R.prototype.appendBinary=function(b){this._buff+=b,this._length+=b.length;var c,y=this._buff.length;for(c=64;c<=y;c+=64)D(this._hash,p(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},R.prototype.end=function(b){var o,h,y=this._buff,c=y.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<c;o+=1)v[o>>2]|=y.charCodeAt(o)<<(o%4<<3);return this._finish(v,c),h=P(this._hash),b&&(h=M(h)),this.reset(),h},R.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},R.prototype.setState=function(b){return this._buff=b.buff,this._length=b.length,this._hash=b.hash,this},R.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},R.prototype._finish=function(b,y){var o,v,h,c=y;if(b[c>>2]|=128<<(c%4<<3),c>55)for(D(this._hash,b),c=0;c<16;c+=1)b[c]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(o[2],16),h=parseInt(o[1],16)||0,b[14]=v,b[15]=h,D(this._hash,b)},R.hash=function(b,y){return R.hashBinary(w(b),y)},R.hashBinary=function(b,y){var o=P(L(b));return y?M(o):o},(R.ArrayBuffer=function(){this.reset()}).prototype.append=function(b){var o,y=function(b,y,c){var o=new Uint8Array(b.byteLength+y.byteLength);return o.set(new Uint8Array(b)),o.set(new Uint8Array(y),b.byteLength),c?o:o.buffer}(this._buff.buffer,b,!0),c=y.length;for(this._length+=b.byteLength,o=64;o<=c;o+=64)D(this._hash,B(y.subarray(o-64,o)));return this._buff=o-64<c?new Uint8Array(y.buffer.slice(o-64)):new Uint8Array(0),this},R.ArrayBuffer.prototype.end=function(b){var v,h,y=this._buff,c=y.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(v=0;v<c;v+=1)o[v>>2]|=y[v]<<(v%4<<3);return this._finish(o,c),h=P(this._hash),b&&(h=M(h)),this.reset(),h},R.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.ArrayBuffer.prototype.getState=function(){var b=R.prototype.getState.call(this);return b.buff=function(b){return String.fromCharCode.apply(null,new Uint8Array(b))}(b.buff),b},R.ArrayBuffer.prototype.setState=function(b){return b.buff=function(b,y){var h,c=b.length,o=new ArrayBuffer(c),v=new Uint8Array(o);for(h=0;h<c;h+=1)v[h]=b.charCodeAt(h);return y?v:o}(b.buff,!0),R.prototype.setState.call(this,b)},R.ArrayBuffer.prototype.destroy=R.prototype.destroy,R.ArrayBuffer.prototype._finish=R.prototype._finish,R.ArrayBuffer.hash=function(b,y){var o=P(function(b){var o,v,h,K,ue,we,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,B(b.subarray(o-64,o)));for(v=(b=o-64<y?b.subarray(o-64):new Uint8Array(0)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=b[o]<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),we=parseInt(K[1],16)||0,h[14]=ue,h[15]=we,D(c,h),c}(new Uint8Array(b)));return y?M(o):o},R}()},1451:oe=>{oe.exports=function(l){return l&&"object"==typeof l&&"function"==typeof l.copy&&"function"==typeof l.fill&&"function"==typeof l.readUInt8}},8791:(oe,N,l)=>{var g=l(3407),u=l(110),D=l(2031),p=l(597);function B(Ue){return Ue.call.bind(Ue)}var L="undefined"!=typeof BigInt,F="undefined"!=typeof Symbol,x=B(Object.prototype.toString),P=B(Number.prototype.valueOf),w=B(String.prototype.valueOf),S=B(Boolean.prototype.valueOf);if(L)var T=B(BigInt.prototype.valueOf);if(F)var I=B(Symbol.prototype.valueOf);function M(Ue,Mt){if("object"!=typeof Ue)return!1;try{return Mt(Ue),!0}catch{return!1}}function $(Ue){return"[object Map]"===x(Ue)}function G(Ue){return"[object Set]"===x(Ue)}function H(Ue){return"[object WeakMap]"===x(Ue)}function Ce(Ue){return"[object WeakSet]"===x(Ue)}function me(Ue){return"[object ArrayBuffer]"===x(Ue)}function _e(Ue){return"undefined"!=typeof ArrayBuffer&&(me.working?me(Ue):Ue instanceof ArrayBuffer)}function ne(Ue){return"[object DataView]"===x(Ue)}function fe(Ue){return"undefined"!=typeof DataView&&(ne.working?ne(Ue):Ue instanceof DataView)}N.isArgumentsObject=g,N.isGeneratorFunction=u,N.isTypedArray=p,N.isPromise=function(Ue){return"undefined"!=typeof Promise&&Ue instanceof Promise||null!==Ue&&"object"==typeof Ue&&"function"==typeof Ue.then&&"function"==typeof Ue.catch},N.isArrayBufferView=function(Ue){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(Ue):p(Ue)||fe(Ue)},N.isUint8Array=function(Ue){return"Uint8Array"===D(Ue)},N.isUint8ClampedArray=function(Ue){return"Uint8ClampedArray"===D(Ue)},N.isUint16Array=function(Ue){return"Uint16Array"===D(Ue)},N.isUint32Array=function(Ue){return"Uint32Array"===D(Ue)},N.isInt8Array=function(Ue){return"Int8Array"===D(Ue)},N.isInt16Array=function(Ue){return"Int16Array"===D(Ue)},N.isInt32Array=function(Ue){return"Int32Array"===D(Ue)},N.isFloat32Array=function(Ue){return"Float32Array"===D(Ue)},N.isFloat64Array=function(Ue){return"Float64Array"===D(Ue)},N.isBigInt64Array=function(Ue){return"BigInt64Array"===D(Ue)},N.isBigUint64Array=function(Ue){return"BigUint64Array"===D(Ue)},$.working="undefined"!=typeof Map&&$(new Map),N.isMap=function(Ue){return"undefined"!=typeof Map&&($.working?$(Ue):Ue instanceof Map)},G.working="undefined"!=typeof Set&&G(new Set),N.isSet=function(Ue){return"undefined"!=typeof Set&&(G.working?G(Ue):Ue instanceof Set)},H.working="undefined"!=typeof WeakMap&&H(new WeakMap),N.isWeakMap=function(Ue){return"undefined"!=typeof WeakMap&&(H.working?H(Ue):Ue instanceof WeakMap)},Ce.working="undefined"!=typeof WeakSet&&Ce(new WeakSet),N.isWeakSet=function(Ue){return Ce(Ue)},me.working="undefined"!=typeof ArrayBuffer&&me(new ArrayBuffer),N.isArrayBuffer=_e,ne.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&ne(new DataView(new ArrayBuffer(1),0,1)),N.isDataView=fe;var Te="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function je(Ue){return"[object SharedArrayBuffer]"===x(Ue)}function Ze(Ue){return void 0!==Te&&(void 0===je.working&&(je.working=je(new Te)),je.working?je(Ue):Ue instanceof Te)}function _r(Ue){return M(Ue,P)}function kr(Ue){return M(Ue,w)}function br(Ue){return M(Ue,S)}function ar(Ue){return L&&M(Ue,T)}function hr(Ue){return F&&M(Ue,I)}N.isSharedArrayBuffer=Ze,N.isAsyncFunction=function(Ue){return"[object AsyncFunction]"===x(Ue)},N.isMapIterator=function(Ue){return"[object Map Iterator]"===x(Ue)},N.isSetIterator=function(Ue){return"[object Set Iterator]"===x(Ue)},N.isGeneratorObject=function(Ue){return"[object Generator]"===x(Ue)},N.isWebAssemblyCompiledModule=function(Ue){return"[object WebAssembly.Module]"===x(Ue)},N.isNumberObject=_r,N.isStringObject=kr,N.isBooleanObject=br,N.isBigIntObject=ar,N.isSymbolObject=hr,N.isBoxedPrimitive=function(Ue){return _r(Ue)||kr(Ue)||br(Ue)||ar(Ue)||hr(Ue)},N.isAnyArrayBuffer=function(Ue){return"undefined"!=typeof Uint8Array&&(_e(Ue)||Ze(Ue))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Ue){Object.defineProperty(N,Ue,{enumerable:!1,value:function(){throw new Error(Ue+" is not supported in userland")}})})},6788:(oe,N,l)=>{var g=Object.getOwnPropertyDescriptors||function(fe){for(var Te=Object.keys(fe),je={},Ze=0;Ze<Te.length;Ze++)je[Te[Ze]]=Object.getOwnPropertyDescriptor(fe,Te[Ze]);return je},u=/%[sdj%]/g;N.format=function(ne){if(!h(ne)){for(var fe=[],Te=0;Te<arguments.length;Te++)fe.push(L(arguments[Te]));return fe.join(" ")}Te=1;for(var je=arguments,Ze=je.length,ut=String(ne).replace(u,function(lt){if("%%"===lt)return"%";if(Te>=Ze)return lt;switch(lt){case"%s":return String(je[Te++]);case"%d":return Number(je[Te++]);case"%j":try{return JSON.stringify(je[Te++])}catch{return"[Circular]"}default:return lt}}),et=je[Te];Te<Ze;et=je[++Te])c(et)||!ge(et)?ut+=" "+et:ut+=" "+L(et);return ut},N.deprecate=function(ne,fe){if("undefined"!=typeof process&&!0===process.noDeprecation)return ne;if("undefined"==typeof process)return function(){return N.deprecate(ne,fe).apply(this,arguments)};var Te=!1;return function(){if(!Te){if(process.throwDeprecation)throw new Error(fe);process.traceDeprecation?console.trace(fe):console.error(fe),Te=!0}return ne.apply(this,arguments)}};var D={},p=/^$/;if(process.env.NODE_DEBUG){var B=process.env.NODE_DEBUG;B=B.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),p=new RegExp("^"+B+"$","i")}function L(ne,fe){var Te={seen:[],stylize:x};return arguments.length>=3&&(Te.depth=arguments[2]),arguments.length>=4&&(Te.colors=arguments[3]),y(fe)?Te.showHidden=fe:fe&&N._extend(Te,fe),ue(Te.showHidden)&&(Te.showHidden=!1),ue(Te.depth)&&(Te.depth=2),ue(Te.colors)&&(Te.colors=!1),ue(Te.customInspect)&&(Te.customInspect=!0),Te.colors&&(Te.stylize=F),w(Te,ne,Te.depth)}function F(ne,fe){var Te=L.styles[fe];return Te?"\x1b["+L.colors[Te][0]+"m"+ne+"\x1b["+L.colors[Te][1]+"m":ne}function x(ne,fe){return ne}function w(ne,fe,Te){if(ne.customInspect&&fe&&$(fe.inspect)&&fe.inspect!==N.inspect&&(!fe.constructor||fe.constructor.prototype!==fe)){var je=fe.inspect(Te,ne);return h(je)||(je=w(ne,je,Te)),je}var Ze=function(ne,fe){if(ue(fe))return ne.stylize("undefined","undefined");if(h(fe)){var Te="'"+JSON.stringify(fe).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ne.stylize(Te,"string")}return v(fe)?ne.stylize(""+fe,"number"):y(fe)?ne.stylize(""+fe,"boolean"):c(fe)?ne.stylize("null","null"):void 0}(ne,fe);if(Ze)return Ze;var ut=Object.keys(fe),et=function(ne){var fe={};return ne.forEach(function(Te,je){fe[Te]=!0}),fe}(ut);if(ne.showHidden&&(ut=Object.getOwnPropertyNames(fe)),Y(fe)&&(ut.indexOf("message")>=0||ut.indexOf("description")>=0))return T(fe);if(0===ut.length){if($(fe))return ne.stylize("[Function"+(fe.name?": "+fe.name:"")+"]","special");if(we(fe))return ne.stylize(RegExp.prototype.toString.call(fe),"regexp");if(pe(fe))return ne.stylize(Date.prototype.toString.call(fe),"date");if(Y(fe))return T(fe)}var br,wt="",It=!1,_r=["{","}"];return b(fe)&&(It=!0,_r=["[","]"]),$(fe)&&(wt=" [Function"+(fe.name?": "+fe.name:"")+"]"),we(fe)&&(wt=" "+RegExp.prototype.toString.call(fe)),pe(fe)&&(wt=" "+Date.prototype.toUTCString.call(fe)),Y(fe)&&(wt=" "+T(fe)),0!==ut.length||It&&0!=fe.length?Te<0?we(fe)?ne.stylize(RegExp.prototype.toString.call(fe),"regexp"):ne.stylize("[Object]","special"):(ne.seen.push(fe),br=It?function(ne,fe,Te,je,Ze){for(var ut=[],et=0,lt=fe.length;et<lt;++et)Ce(fe,String(et))?ut.push(M(ne,fe,Te,je,String(et),!0)):ut.push("");return Ze.forEach(function(wt){wt.match(/^\d+$/)||ut.push(M(ne,fe,Te,je,wt,!0))}),ut}(ne,fe,Te,et,ut):ut.map(function(ar){return M(ne,fe,Te,et,ar,It)}),ne.seen.pop(),function(ne,fe,Te){var Ze=ne.reduce(function(ut,et){return et.indexOf("\n"),ut+et.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ze>60?Te[0]+(""===fe?"":fe+"\n ")+" "+ne.join(",\n  ")+" "+Te[1]:Te[0]+fe+" "+ne.join(", ")+" "+Te[1]}(br,wt,_r)):_r[0]+wt+_r[1]}function T(ne){return"["+Error.prototype.toString.call(ne)+"]"}function M(ne,fe,Te,je,Ze,ut){var et,lt,wt;if((wt=Object.getOwnPropertyDescriptor(fe,Ze)||{value:fe[Ze]}).get?lt=ne.stylize(wt.set?"[Getter/Setter]":"[Getter]","special"):wt.set&&(lt=ne.stylize("[Setter]","special")),Ce(je,Ze)||(et="["+Ze+"]"),lt||(ne.seen.indexOf(wt.value)<0?(lt=c(Te)?w(ne,wt.value,null):w(ne,wt.value,Te-1)).indexOf("\n")>-1&&(lt=ut?lt.split("\n").map(function(It){return"  "+It}).join("\n").substr(2):"\n"+lt.split("\n").map(function(It){return"   "+It}).join("\n")):lt=ne.stylize("[Circular]","special")),ue(et)){if(ut&&Ze.match(/^\d+$/))return lt;(et=JSON.stringify(""+Ze)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(et=et.substr(1,et.length-2),et=ne.stylize(et,"name")):(et=et.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),et=ne.stylize(et,"string"))}return et+": "+lt}function b(ne){return Array.isArray(ne)}function y(ne){return"boolean"==typeof ne}function c(ne){return null===ne}function v(ne){return"number"==typeof ne}function h(ne){return"string"==typeof ne}function ue(ne){return void 0===ne}function we(ne){return ge(ne)&&"[object RegExp]"===G(ne)}function ge(ne){return"object"==typeof ne&&null!==ne}function pe(ne){return ge(ne)&&"[object Date]"===G(ne)}function Y(ne){return ge(ne)&&("[object Error]"===G(ne)||ne instanceof Error)}function $(ne){return"function"==typeof ne}function G(ne){return Object.prototype.toString.call(ne)}function q(ne){return ne<10?"0"+ne.toString(10):ne.toString(10)}N.debuglog=function(ne){if(ne=ne.toUpperCase(),!D[ne])if(p.test(ne)){var fe=process.pid;D[ne]=function(){var Te=N.format.apply(N,arguments);console.error("%s %d: %s",ne,fe,Te)}}else D[ne]=function(){};return D[ne]},N.inspect=L,L.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},L.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},N.types=l(8791),N.isArray=b,N.isBoolean=y,N.isNull=c,N.isNullOrUndefined=function(ne){return null==ne},N.isNumber=v,N.isString=h,N.isSymbol=function(ne){return"symbol"==typeof ne},N.isUndefined=ue,N.isRegExp=we,N.types.isRegExp=we,N.isObject=ge,N.isDate=pe,N.types.isDate=pe,N.isError=Y,N.types.isNativeError=Y,N.isFunction=$,N.isPrimitive=function(ne){return null===ne||"boolean"==typeof ne||"number"==typeof ne||"string"==typeof ne||"symbol"==typeof ne||void 0===ne},N.isBuffer=l(1451);var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ie(){var ne=new Date,fe=[q(ne.getHours()),q(ne.getMinutes()),q(ne.getSeconds())].join(":");return[ne.getDate(),H[ne.getMonth()],fe].join(" ")}function Ce(ne,fe){return Object.prototype.hasOwnProperty.call(ne,fe)}N.log=function(){console.log("%s - %s",ie(),N.format.apply(N,arguments))},N.inherits=l(3894),N._extend=function(ne,fe){if(!fe||!ge(fe))return ne;for(var Te=Object.keys(fe),je=Te.length;je--;)ne[Te[je]]=fe[Te[je]];return ne};var Fe="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function me(ne,fe){if(!ne){var Te=new Error("Promise was rejected with a falsy value");Te.reason=ne,ne=Te}return fe(ne)}N.promisify=function(fe){if("function"!=typeof fe)throw new TypeError('The "original" argument must be of type Function');if(Fe&&fe[Fe]){var Te;if("function"!=typeof(Te=fe[Fe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Te,Fe,{value:Te,enumerable:!1,writable:!1,configurable:!0}),Te}function Te(){for(var je,Ze,ut=new Promise(function(wt,It){je=wt,Ze=It}),et=[],lt=0;lt<arguments.length;lt++)et.push(arguments[lt]);et.push(function(wt,It){wt?Ze(wt):je(It)});try{fe.apply(this,et)}catch(wt){Ze(wt)}return ut}return Object.setPrototypeOf(Te,Object.getPrototypeOf(fe)),Fe&&Object.defineProperty(Te,Fe,{value:Te,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Te,g(fe))},N.promisify.custom=Fe,N.callbackify=function(ne){if("function"!=typeof ne)throw new TypeError('The "original" argument must be of type Function');function fe(){for(var Te=[],je=0;je<arguments.length;je++)Te.push(arguments[je]);var Ze=Te.pop();if("function"!=typeof Ze)throw new TypeError("The last argument must be of type Function");var ut=this,et=function(){return Ze.apply(ut,arguments)};ne.apply(this,Te).then(function(lt){process.nextTick(et.bind(null,null,lt))},function(lt){process.nextTick(me.bind(null,lt,et))})}return Object.setPrototypeOf(fe,Object.getPrototypeOf(ne)),Object.defineProperties(fe,g(ne)),fe}},1042:(oe,N,l)=>{l.d(N,{Z:()=>T});var g,u=new Uint8Array(16);function D(){if(!g&&!(g="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(u)}const p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,L=function(I){return"string"==typeof I&&p.test(I)};for(var F=[],x=0;x<256;++x)F.push((x+256).toString(16).substr(1));const T=function(I,M,R){var b=(I=I||{}).random||(I.rng||D)();if(b[6]=15&b[6]|64,b[8]=63&b[8]|128,M){R=R||0;for(var y=0;y<16;++y)M[R+y]=b[y];return M}return function(I){var M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=(F[I[M+0]]+F[I[M+1]]+F[I[M+2]]+F[I[M+3]]+"-"+F[I[M+4]]+F[I[M+5]]+"-"+F[I[M+6]]+F[I[M+7]]+"-"+F[I[M+8]]+F[I[M+9]]+"-"+F[I[M+10]]+F[I[M+11]]+F[I[M+12]]+F[I[M+13]]+F[I[M+14]]+F[I[M+15]]).toLowerCase();if(!L(R))throw TypeError("Stringified UUID is invalid");return R}(b)}},2899:(oe,N)=>{function l(g,u,D){var p=D[D.length-1];g===p.element&&(D.pop(),p=D[D.length-1]);var B=p.element,L=p.index;Array.isArray(B)?B.push(g):L===u.length-2?B[u.pop()]=g:u.push(g)}N.stringify=function(u){var D=[];D.push({obj:u});for(var B,L,x,P,S,T,I,M,R,p="";B=D.pop();)if(L=B.obj,p+=B.prefix||"",x=B.val||"")p+=x;else if("object"!=typeof L)p+=void 0===L?null:JSON.stringify(L);else if(null===L)p+="null";else if(Array.isArray(L)){for(D.push({val:"]"}),P=L.length-1;P>=0;P--)D.push({obj:L[P],prefix:0===P?"":","});D.push({val:"["})}else{for(T in S=[],L)L.hasOwnProperty(T)&&S.push(T);for(D.push({val:"}"}),P=S.length-1;P>=0;P--)M=L[I=S[P]],R=P>0?",":"",R+=JSON.stringify(I)+":",D.push({obj:M,prefix:R});D.push({val:"{"})}return p},N.parse=function(g){for(var B,L,F,x,P,w,S,T,I,u=[],D=[],p=0;;)if("}"!==(B=g[p++])&&"]"!==B&&void 0!==B)switch(B){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,l(null,u,D);break;case"t":p+=3,l(!0,u,D);break;case"f":p+=4,l(!1,u,D);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(L="",p--;;){if(F=g[p++],!/[\d\.\-e\+]/.test(F)){p--;break}L+=F}l(parseFloat(L),u,D);break;case'"':for(x="",P=void 0,w=0;'"'!==(S=g[p++])||"\\"===P&&w%2==1;)x+=S,"\\"===(P=S)?w++:w=0;l(JSON.parse('"'+x+'"'),u,D);break;case"[":u.push((T={element:[],index:u.length}).element),D.push(T);break;case"{":u.push((I={element:{},index:u.length}).element),D.push(I);break;default:throw new Error("unexpectedly reached end of input: "+B)}else{if(1===u.length)return u.pop();l(u.pop(),u,D)}}},2031:(oe,N,l)=>{var g=l(9076),u=l(7029),D=l(5834),p=D("Object.prototype.toString"),B=l(6259)(),L="undefined"==typeof globalThis?global:globalThis,F=u(),x=D("String.prototype.slice"),P={},w=l(8555),S=Object.getPrototypeOf;B&&w&&S&&g(F,function(M){if("function"==typeof L[M]){var R=new L[M];if(Symbol.toStringTag in R){var b=S(R),y=w(b,Symbol.toStringTag);if(!y){var c=S(b);y=w(c,Symbol.toStringTag)}P[M]=y.get}}});var I=l(597);oe.exports=function(R){return!!I(R)&&(B&&Symbol.toStringTag in R?function(R){var b=!1;return g(P,function(y,c){if(!b)try{var o=y.call(R);o===c&&(b=o)}catch{}}),b}(R):x(p(R),8,-1))}},1995:oe=>{oe.exports=function(){for(var g={},u=0;u<arguments.length;u++){var D=arguments[u];for(var p in D)N.call(D,p)&&(g[p]=D[p])}return g};var N=Object.prototype.hasOwnProperty},7757:(oe,N,l)=>{oe.exports=l(7854)},655:(oe,N,l)=>{function x(Y,$,J,G){return new(J||(J=Promise))(function(H,ie){function Ce(_e){try{me(G.next(_e))}catch(ne){ie(ne)}}function Fe(_e){try{me(G.throw(_e))}catch(ne){ie(ne)}}function me(_e){_e.done?H(_e.value):function(H){return H instanceof J?H:new J(function(ie){ie(H)})}(_e.value).then(Ce,Fe)}me((G=G.apply(Y,$||[])).next())})}function y(Y){return this instanceof y?(this.v=Y,this):new y(Y)}function c(Y,$,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q,G=J.apply(Y,$||[]),H=[];return q={},ie("next"),ie("throw"),ie("return"),q[Symbol.asyncIterator]=function(){return this},q;function ie(fe){G[fe]&&(q[fe]=function(Te){return new Promise(function(je,Ze){H.push([fe,Te,je,Ze])>1||Ce(fe,Te)})})}function Ce(fe,Te){try{!function(fe){fe.value instanceof y?Promise.resolve(fe.value.v).then(me,_e):ne(H[0][2],fe)}(G[fe](Te))}catch(je){ne(H[0][3],je)}}function me(fe){Ce("next",fe)}function _e(fe){Ce("throw",fe)}function ne(fe,Te){fe(Te),H.shift(),H.length&&Ce(H[0][0],H[0][1])}}function v(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,$=Y[Symbol.asyncIterator];return $?$.call(Y):(Y=function(Y){var $="function"==typeof Symbol&&Symbol.iterator,J=$&&Y[$],G=0;if(J)return J.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&G>=Y.length&&(Y=void 0),{value:Y&&Y[G++],done:!Y}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),J={},G("next"),G("throw"),G("return"),J[Symbol.asyncIterator]=function(){return this},J);function G(H){J[H]=Y[H]&&function(ie){return new Promise(function(Ce,Fe){!function(H,ie,Ce,Fe){Promise.resolve(Fe).then(function(me){H({value:me,done:Ce})},ie)}(Ce,Fe,(ie=Y[H](ie)).done,ie.value)})}}}l.d(N,{mG:()=>x,qq:()=>y,FC:()=>c,KL:()=>v})},2480:()=>{},4703:()=>{},7029:oe=>{var N=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],l="undefined"==typeof globalThis?global:globalThis;oe.exports=function(){for(var u=[],D=0;D<N.length;D++)"function"==typeof l[N[D]]&&(u[u.length]=N[D]);return u}},8555:(oe,N,l)=>{var u=l(5203)("%Object.getOwnPropertyDescriptor%",!0);if(u)try{u([],"length")}catch{u=null}oe.exports=u},7340:(oe,N,l)=>{l.d(N,{l3:()=>D,_j:()=>g,LC:()=>u,ZN:()=>c,jt:()=>B,oQ:()=>T,F4:()=>w,vP:()=>F,SB:()=>P,oB:()=>x,eR:()=>S,X$:()=>p,_7:()=>M,ZE:()=>o,k1:()=>v});class g{}class u{}const D="*";function p(h,K){return{type:7,name:h,definitions:K,options:{}}}function B(h,K=null){return{type:4,styles:K,timings:h}}function F(h,K=null){return{type:2,steps:h,options:K}}function x(h){return{type:6,styles:h,offset:null}}function P(h,K,ue){return{type:0,name:h,styles:K,options:ue}}function w(h){return{type:5,steps:h}}function S(h,K,ue=null){return{type:1,expr:h,animation:K,options:ue}}function T(h,K=null){return{type:8,animation:h,options:K}}function M(h,K=null){return{type:10,animation:h,options:K}}function y(h){Promise.resolve(null).then(h)}class c{constructor(K=0,ue=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=K+ue}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}onStart(K){this._onStartFns.push(K)}onDone(K){this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){y(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(K=>K()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(K){this._position=this.totalTime?K*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(K){const ue="start"==K?this._onStartFns:this._onDoneFns;ue.forEach(we=>we()),ue.length=0}}class o{constructor(K){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=K;let ue=0,we=0,ge=0;const pe=this.players.length;0==pe?y(()=>this._onFinish()):this.players.forEach(Y=>{Y.onDone(()=>{++ue==pe&&this._onFinish()}),Y.onDestroy(()=>{++we==pe&&this._onDestroy()}),Y.onStart(()=>{++ge==pe&&this._onStart()})}),this.totalTime=this.players.reduce((Y,$)=>Math.max(Y,$.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}init(){this.players.forEach(K=>K.init())}onStart(K){this._onStartFns.push(K)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(K=>K()),this._onStartFns=[])}onDone(K){this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(K=>K.play())}pause(){this.players.forEach(K=>K.pause())}restart(){this.players.forEach(K=>K.restart())}finish(){this._onFinish(),this.players.forEach(K=>K.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(K=>K.destroy()),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this.players.forEach(K=>K.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(K){const ue=K*this.totalTime;this.players.forEach(we=>{const ge=we.totalTime?Math.min(1,ue/we.totalTime):1;we.setPosition(ge)})}getPosition(){const K=this.players.reduce((ue,we)=>null===ue||we.totalTime>ue.totalTime?we:ue,null);return null!=K?K.getPosition():0}beforeDestroy(){this.players.forEach(K=>{K.beforeDestroy&&K.beforeDestroy()})}triggerCallback(K){const ue="start"==K?this._onStartFns:this._onDoneFns;ue.forEach(we=>we()),ue.length=0}}const v="!"},8753:(oe,N,l)=>{l.d(N,{Zt:()=>Pi,Hk:()=>Wa,Wj:()=>Ts,_t:()=>Ha});var g=l(7777),u=l(1457);function D(V){return null!=V&&"false"!=`${V}`}function p(V,O=0){return function(V){return!isNaN(parseFloat(V))&&!isNaN(Number(V))}(V)?Number(V):O}function x(V){return V instanceof g.ElementRef?V.nativeElement:V}var w=l(7579),S=l(9646),T=l(8306),I=l(4968),M=l(6406),b=(l(3101),l(3601)),y=l(9300);let c;try{c="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch{c=!1}let we,q,o=(()=>{class V{constructor(_){this._platformId=_,this.isBrowser=this._platformId?(0,u.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!c)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(g.PLATFORM_ID))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function pe(V){return function(){if(null==we&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>we=!0}))}finally{we=we||!1}return we}()?V:!!V.capture}function ie(V){if(function(){if(null==q){const V="undefined"!=typeof document?document.head:null;q=!(!V||!V.createShadowRoot&&!V.attachShadow)}return q}()){const O=V.getRootNode?V.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&O instanceof ShadowRoot)return O}return null}function Fe(V){return V.composedPath?V.composedPath()[0]:V.target}let et=(()=>{class V{constructor(_,j,Q){this._ngZone=_,this._platform=j,this._scrolled=new w.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Q}register(_){this.scrollContainers.has(_)||this.scrollContainers.set(_,_.elementScrolled().subscribe(()=>this._scrolled.next(_)))}deregister(_){const j=this.scrollContainers.get(_);j&&(j.unsubscribe(),this.scrollContainers.delete(_))}scrolled(_=20){return this._platform.isBrowser?new T.y(j=>{this._globalSubscription||this._addGlobalListener();const Q=_>0?this._scrolled.pipe((0,b.e)(_)).subscribe(j):this._scrolled.subscribe(j);return this._scrolledCount++,()=>{Q.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,S.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((_,j)=>this.deregister(j)),this._scrolled.complete()}ancestorScrolled(_,j){const Q=this.getAncestorScrollContainers(_);return this.scrolled(j).pipe((0,y.h)(de=>!de||Q.indexOf(de)>-1))}getAncestorScrollContainers(_){const j=[];return this.scrollContainers.forEach((Q,de)=>{this._scrollableContainsElement(de,_)&&j.push(de)}),j}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(_,j){let Q=x(j),de=_.getElementRef().nativeElement;do{if(Q==de)return!0}while(Q=Q.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const _=this._getWindow();return(0,I.R)(_.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(o),g.\u0275\u0275inject(u.DOCUMENT,8))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),It=(()=>{class V{constructor(_,j,Q){this._platform=_,this._change=new w.x,this._changeListener=de=>{this._change.next(de)},this._document=Q,j.runOutsideAngular(()=>{if(_.isBrowser){const de=this._getWindow();de.addEventListener("resize",this._changeListener),de.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const _=this._getWindow();_.removeEventListener("resize",this._changeListener),_.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const _={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),_}getViewportRect(){const _=this.getViewportScrollPosition(),{width:j,height:Q}=this.getViewportSize();return{top:_.top,left:_.left,bottom:_.top+Q,right:_.left+j,height:Q,width:j}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const _=this._document,j=this._getWindow(),Q=_.documentElement,de=Q.getBoundingClientRect();return{top:-de.top||_.body.scrollTop||j.scrollY||Q.scrollTop||0,left:-de.left||_.body.scrollLeft||j.scrollX||Q.scrollLeft||0}}change(_=20){return _>0?this._change.pipe((0,b.e)(_)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const _=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:_.innerWidth,height:_.innerHeight}:{width:0,height:0}}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(o),g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(u.DOCUMENT,8))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),rr=(()=>{class V{}return V.\u0275fac=function(_){return new(_||V)},V.\u0275mod=g.\u0275\u0275defineNgModule({type:V}),V.\u0275inj=g.\u0275\u0275defineInjector({}),V})();var Na=l(4986),So=l(5963),wr=l(727),Ot=l(6451),Hi=l(2722),Vi=l(8675),Sr=l(4004),Gi=l(5698),Vr=l(8505),Vn=l(3900);const Gn=new g.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,g.inject)(u.DOCUMENT)}});let On=(()=>{class V{constructor(_){if(this.value="ltr",this.change=new g.EventEmitter,_){const Q=_.documentElement?_.documentElement.dir:null,de=(_.body?_.body.dir:null)||Q;this.value="ltr"===de||"rtl"===de?de:"ltr"}}ngOnDestroy(){this.change.complete()}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(Gn,8))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function nn(V,O,_){for(let j in O)if(O.hasOwnProperty(j)){const Q=O[j];Q?V.setProperty(j,Q,_?.has(j)?"important":""):V.removeProperty(j)}return V}function Ur(V,O){const _=O?"":"none";nn(V.style,{"touch-action":O?"":"none","-webkit-user-drag":O?"":"none","-webkit-tap-highlight-color":O?"":"transparent","user-select":_,"-ms-user-select":_,"-webkit-user-select":_,"-moz-user-select":_})}function Qi(V,O,_){nn(V.style,{position:O?"":"fixed",top:O?"":"0",opacity:O?"":"0",left:O?"":"-999em"},_)}function Pn(V,O){return O&&"none"!=O?V+" "+O:V}function Et(V){const O=V.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(V)*O}function Qn(V,O){return V.getPropertyValue(O).split(",").map(j=>j.trim())}function Zn(V){const O=V.getBoundingClientRect();return{top:O.top,right:O.right,bottom:O.bottom,left:O.left,width:O.width,height:O.height,x:O.x,y:O.y}}function fr(V,O,_){const{top:j,bottom:Q,left:de,right:Pe}=V;return _>=j&&_<=Q&&O>=de&&O<=Pe}function Ei(V,O,_){V.top+=O,V.bottom=V.top+V.height,V.left+=_,V.right=V.left+V.width}function Ds(V,O,_,j){const{top:Q,right:de,bottom:Pe,left:ke,width:Qe,height:tt}=V,Ct=Qe*O,dr=tt*O;return j>Q-dr&&j<Pe+dr&&_>ke-Ct&&_<de+Ct}class Do{constructor(O,_){this._document=O,this._viewportRuler=_,this.positions=new Map}clear(){this.positions.clear()}cache(O){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),O.forEach(_=>{this.positions.set(_,{scrollPosition:{top:_.scrollTop,left:_.scrollLeft},clientRect:Zn(_)})})}handleScroll(O){const _=Fe(O),j=this.positions.get(_);if(!j)return null;const Q=j.scrollPosition;let de,Pe;if(_===this._document){const tt=this._viewportRuler.getViewportScrollPosition();de=tt.top,Pe=tt.left}else de=_.scrollTop,Pe=_.scrollLeft;const ke=Q.top-de,Qe=Q.left-Pe;return this.positions.forEach((tt,Ct)=>{tt.clientRect&&_!==Ct&&_.contains(Ct)&&Ei(tt.clientRect,ke,Qe)}),Q.top=de,Q.left=Pe,{top:ke,left:Qe}}}function Ao(V){const O=V.cloneNode(!0),_=O.querySelectorAll("[id]"),j=V.nodeName.toLowerCase();O.removeAttribute("id");for(let Q=0;Q<_.length;Q++)_[Q].removeAttribute("id");return"canvas"===j?vn(V,O):("input"===j||"select"===j||"textarea"===j)&&Zi(V,O),We("canvas",V,O,vn),We("input, textarea, select",V,O,Zi),O}function We(V,O,_,j){const Q=O.querySelectorAll(V);if(Q.length){const de=_.querySelectorAll(V);for(let Pe=0;Pe<Q.length;Pe++)j(Q[Pe],de[Pe])}}let Wt=0;function Zi(V,O){"file"!==O.type&&(O.value=V.value),"radio"===O.type&&O.name&&(O.name=`mat-clone-${O.name}-${Wt++}`)}function vn(V,O){const _=O.getContext("2d");if(_)try{_.drawImage(V,0,0)}catch{}}const tr=pe({passive:!0}),As=pe({passive:!1}),Os=new Set(["position"]);class Yi{constructor(O,_,j,Q,de,Pe){this._config=_,this._document=j,this._ngZone=Q,this._viewportRuler=de,this._dragDropRegistry=Pe,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new w.x,this._pointerMoveSubscription=wr.w0.EMPTY,this._pointerUpSubscription=wr.w0.EMPTY,this._scrollSubscription=wr.w0.EMPTY,this._resizeSubscription=wr.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new w.x,this.started=new w.x,this.released=new w.x,this.ended=new w.x,this.entered=new w.x,this.exited=new w.x,this.dropped=new w.x,this.moved=this._moveEvents,this._pointerDown=ke=>{if(this.beforeStarted.next(),this._handles.length){const Qe=this._handles.find(tt=>ke.target&&(ke.target===tt||tt.contains(ke.target)));Qe&&!this._disabledHandles.has(Qe)&&!this.disabled&&this._initializeDragSequence(Qe,ke)}else this.disabled||this._initializeDragSequence(this._rootElement,ke)},this._pointerMove=ke=>{const Qe=this._getPointerPositionOnPage(ke);if(!this._hasStartedDragging){if(Math.abs(Qe.x-this._pickupPositionOnPage.x)+Math.abs(Qe.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const xn=Date.now()>=this._dragStartTime+this._getDragStartDelay(ke),Mr=this._dropContainer;if(!xn)return void this._endDragSequence(ke);(!Mr||!Mr.isDragging()&&!Mr.isReceiving())&&(ke.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(ke)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),ke.preventDefault();const tt=this._getConstrainedPointerPosition(Qe);if(this._hasMoved=!0,this._lastKnownPointerPosition=Qe,this._updatePointerDirectionDelta(tt),this._dropContainer)this._updateActiveDropContainer(tt,Qe);else{const Ct=this._activeTransform;Ct.x=tt.x-this._pickupPositionOnPage.x+this._passiveTransform.x,Ct.y=tt.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(Ct.x,Ct.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:tt,event:ke,distance:this._getDragDistance(tt),delta:this._pointerDirectionDelta})})},this._pointerUp=ke=>{this._endDragSequence(ke)},this.withRootElement(O).withParent(_.parentDragRef||null),this._parentPositions=new Do(j,de),Pe.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(O){const _=D(O);_!==this._disabled&&(this._disabled=_,this._toggleNativeDragInteractions(),this._handles.forEach(j=>Ur(j,_)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(O){this._handles=O.map(j=>x(j)),this._handles.forEach(j=>Ur(j,this.disabled)),this._toggleNativeDragInteractions();const _=new Set;return this._disabledHandles.forEach(j=>{this._handles.indexOf(j)>-1&&_.add(j)}),this._disabledHandles=_,this}withPreviewTemplate(O){return this._previewTemplate=O,this}withPlaceholderTemplate(O){return this._placeholderTemplate=O,this}withRootElement(O){const _=x(O);return _!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{_.addEventListener("mousedown",this._pointerDown,As),_.addEventListener("touchstart",this._pointerDown,tr)}),this._initialTransform=void 0,this._rootElement=_),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(O){return this._boundaryElement=O?x(O):null,this._resizeSubscription.unsubscribe(),O&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(O){return this._parentDragRef=O,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(O){!this._disabledHandles.has(O)&&this._handles.indexOf(O)>-1&&(this._disabledHandles.add(O),Ur(O,!0))}enableHandle(O){this._disabledHandles.has(O)&&(this._disabledHandles.delete(O),Ur(O,this.disabled))}withDirection(O){return this._direction=O,this}_withDropContainer(O){this._dropContainer=O}getFreeDragPosition(){const O=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:O.x,y:O.y}}setFreeDragPosition(O){return this._activeTransform={x:0,y:0},this._passiveTransform.x=O.x,this._passiveTransform.y=O.y,this._dropContainer||this._applyRootElementTransform(O.x,O.y),this}withPreviewContainer(O){return this._previewContainer=O,this}_sortFromLastPointerPosition(){const O=this._lastKnownPointerPosition;O&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(O),O)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(O){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(O),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const _=this._getPointerPositionOnPage(O);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(_),dropPoint:_})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(O){In(O)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const _=this._dropContainer;if(_){const j=this._rootElement,Q=j.parentNode,de=this._placeholder=this._createPlaceholderElement(),Pe=this._anchor=this._anchor||this._document.createComment(""),ke=this._getShadowRoot();Q.insertBefore(Pe,j),this._initialTransform=j.style.transform||"",this._preview=this._createPreviewElement(),Qi(j,!1,Os),this._document.body.appendChild(Q.replaceChild(de,j)),this._getPreviewInsertionPoint(Q,ke).appendChild(this._preview),this.started.next({source:this}),_.start(),this._initialContainer=_,this._initialIndex=_.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(_?_.getScrollableParents():[])}_initializeDragSequence(O,_){this._parentDragRef&&_.stopPropagation();const j=this.isDragging(),Q=In(_),de=!Q&&0!==_.button,Pe=this._rootElement,ke=Fe(_),Qe=!Q&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),tt=Q?function(V){const O=V.touches&&V.touches[0]||V.changedTouches&&V.changedTouches[0];return!(!O||-1!==O.identifier||null!=O.radiusX&&1!==O.radiusX||null!=O.radiusY&&1!==O.radiusY)}(_):0===(V=_).offsetX&&0===V.offsetY;var V;if(ke&&ke.draggable&&"mousedown"===_.type&&_.preventDefault(),j||de||Qe||tt)return;if(this._handles.length){const Rr=Pe.style;this._rootElementTapHighlight=Rr.webkitTapHighlightColor||"",Rr.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Rr=>this._updateOnScroll(Rr)),this._boundaryElement&&(this._boundaryRect=Zn(this._boundaryElement));const Ct=this._previewTemplate;this._pickupPositionInElement=Ct&&Ct.template&&!Ct.matchSize?{x:0,y:0}:this._getPointerPositionInElement(O,_);const dr=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(_);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:dr.x,y:dr.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,_)}_cleanupDragArtifacts(O){Qi(this._rootElement,!0,Os),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const _=this._dropContainer,j=_.getItemIndex(this),Q=this._getPointerPositionOnPage(O),de=this._getDragDistance(Q),Pe=_._isOverContainer(Q.x,Q.y);this.ended.next({source:this,distance:de,dropPoint:Q}),this.dropped.next({item:this,currentIndex:j,previousIndex:this._initialIndex,container:_,previousContainer:this._initialContainer,isPointerOverContainer:Pe,distance:de,dropPoint:Q}),_.drop(this,j,this._initialIndex,this._initialContainer,Pe,de,Q),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:O,y:_},{x:j,y:Q}){let de=this._initialContainer._getSiblingContainerFromPosition(this,O,_);!de&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(O,_)&&(de=this._initialContainer),de&&de!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=de,this._dropContainer.enter(this,O,_,de===this._initialContainer&&de.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:de,currentIndex:de.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(j,Q),this._dropContainer._sortItem(this,O,_,this._pointerDirectionDelta),this._applyPreviewTransform(O-this._pickupPositionInElement.x,_-this._pickupPositionInElement.y))}_createPreviewElement(){const O=this._previewTemplate,_=this.previewClass,j=O?O.template:null;let Q;if(j&&O){const de=O.matchSize?this._rootElement.getBoundingClientRect():null,Pe=O.viewContainer.createEmbeddedView(j,O.context);Pe.detectChanges(),Q=Ua(Pe,this._document),this._previewRef=Pe,O.matchSize?Ji(Q,de):Q.style.transform=gn(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const de=this._rootElement;Q=Ao(de),Ji(Q,de.getBoundingClientRect()),this._initialTransform&&(Q.style.transform=this._initialTransform)}return nn(Q.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Os),Ur(Q,!1),Q.classList.add("cdk-drag-preview"),Q.setAttribute("dir",this._direction),_&&(Array.isArray(_)?_.forEach(de=>Q.classList.add(de)):Q.classList.add(_)),Q}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const O=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(O.left,O.top);const _=function(V){const O=getComputedStyle(V),_=Qn(O,"transition-property"),j=_.find(ke=>"transform"===ke||"all"===ke);if(!j)return 0;const Q=_.indexOf(j),de=Qn(O,"transition-duration"),Pe=Qn(O,"transition-delay");return Et(de[Q])+Et(Pe[Q])}(this._preview);return 0===_?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(j=>{const Q=Pe=>{(!Pe||Fe(Pe)===this._preview&&"transform"===Pe.propertyName)&&(this._preview?.removeEventListener("transitionend",Q),j(),clearTimeout(de))},de=setTimeout(Q,1.5*_);this._preview.addEventListener("transitionend",Q)}))}_createPlaceholderElement(){const O=this._placeholderTemplate,_=O?O.template:null;let j;return _?(this._placeholderRef=O.viewContainer.createEmbeddedView(_,O.context),this._placeholderRef.detectChanges(),j=Ua(this._placeholderRef,this._document)):j=Ao(this._rootElement),j.classList.add("cdk-drag-placeholder"),j}_getPointerPositionInElement(O,_){const j=this._rootElement.getBoundingClientRect(),Q=O===this._rootElement?null:O,de=Q?Q.getBoundingClientRect():j,Pe=In(_)?_.targetTouches[0]:_,ke=this._getViewportScrollPosition();return{x:de.left-j.left+(Pe.pageX-de.left-ke.left),y:de.top-j.top+(Pe.pageY-de.top-ke.top)}}_getPointerPositionOnPage(O){const _=this._getViewportScrollPosition(),j=In(O)?O.touches[0]||O.changedTouches[0]||{pageX:0,pageY:0}:O,Q=j.pageX-_.left,de=j.pageY-_.top;if(this._ownerSVGElement){const Pe=this._ownerSVGElement.getScreenCTM();if(Pe){const ke=this._ownerSVGElement.createSVGPoint();return ke.x=Q,ke.y=de,ke.matrixTransform(Pe.inverse())}}return{x:Q,y:de}}_getConstrainedPointerPosition(O){const _=this._dropContainer?this._dropContainer.lockAxis:null;let{x:j,y:Q}=this.constrainPosition?this.constrainPosition(O,this):O;if("x"===this.lockAxis||"x"===_?Q=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===_)&&(j=this._pickupPositionOnPage.x),this._boundaryRect){const{x:de,y:Pe}=this._pickupPositionInElement,ke=this._boundaryRect,Qe=this._previewRect,tt=ke.top+Pe,Ct=ke.bottom-(Qe.height-Pe);j=wi(j,ke.left+de,ke.right-(Qe.width-de)),Q=wi(Q,tt,Ct)}return{x:j,y:Q}}_updatePointerDirectionDelta(O){const{x:_,y:j}=O,Q=this._pointerDirectionDelta,de=this._pointerPositionAtLastDirectionChange,Pe=Math.abs(_-de.x),ke=Math.abs(j-de.y);return Pe>this._config.pointerDirectionChangeThreshold&&(Q.x=_>de.x?1:-1,de.x=_),ke>this._config.pointerDirectionChangeThreshold&&(Q.y=j>de.y?1:-1,de.y=j),Q}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const O=this._handles.length>0||!this.isDragging();O!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=O,Ur(this._rootElement,O))}_removeRootElementListeners(O){O.removeEventListener("mousedown",this._pointerDown,As),O.removeEventListener("touchstart",this._pointerDown,tr)}_applyRootElementTransform(O,_){const j=gn(O,_),Q=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=Q.transform&&"none"!=Q.transform?Q.transform:""),Q.transform=Pn(j,this._initialTransform)}_applyPreviewTransform(O,_){const j=this._previewTemplate?.template?void 0:this._initialTransform,Q=gn(O,_);this._preview.style.transform=Pn(Q,j)}_getDragDistance(O){const _=this._pickupPositionOnPage;return _?{x:O.x-_.x,y:O.y-_.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:O,y:_}=this._passiveTransform;if(0===O&&0===_||this.isDragging()||!this._boundaryElement)return;const j=this._boundaryElement.getBoundingClientRect(),Q=this._rootElement.getBoundingClientRect();if(0===j.width&&0===j.height||0===Q.width&&0===Q.height)return;const de=j.left-Q.left,Pe=Q.right-j.right,ke=j.top-Q.top,Qe=Q.bottom-j.bottom;j.width>Q.width?(de>0&&(O+=de),Pe>0&&(O-=Pe)):O=0,j.height>Q.height?(ke>0&&(_+=ke),Qe>0&&(_-=Qe)):_=0,(O!==this._passiveTransform.x||_!==this._passiveTransform.y)&&this.setFreeDragPosition({y:_,x:O})}_getDragStartDelay(O){const _=this.dragStartDelay;return"number"==typeof _?_:In(O)?_.touch:_?_.mouse:0}_updateOnScroll(O){const _=this._parentPositions.handleScroll(O);if(_){const j=Fe(O);this._boundaryRect&&j!==this._boundaryElement&&j.contains(this._boundaryElement)&&Ei(this._boundaryRect,_.top,_.left),this._pickupPositionOnPage.x+=_.left,this._pickupPositionOnPage.y+=_.top,this._dropContainer||(this._activeTransform.x-=_.left,this._activeTransform.y-=_.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const O=this._parentPositions.positions.get(this._document);return O?O.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=ie(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(O,_){const j=this._previewContainer||"global";if("parent"===j)return O;if("global"===j){const Q=this._document;return _||Q.fullscreenElement||Q.webkitFullscreenElement||Q.mozFullScreenElement||Q.msFullscreenElement||Q.body}return x(j)}}function gn(V,O){return`translate3d(${Math.round(V)}px, ${Math.round(O)}px, 0)`}function wi(V,O,_){return Math.max(O,Math.min(_,V))}function In(V){return"t"===V.type[0]}function Ua(V,O){const _=V.rootNodes;if(1===_.length&&_[0].nodeType===O.ELEMENT_NODE)return _[0];const j=O.createElement("div");return _.forEach(Q=>j.appendChild(Q)),j}function Ji(V,O){V.style.width=`${O.width}px`,V.style.height=`${O.height}px`,V.style.transform=gn(O.left,O.top)}function Tn(V,O){return Math.max(0,Math.min(O,V))}class Oo{constructor(O,_,j,Q,de){this._dragDropRegistry=_,this._ngZone=Q,this._viewportRuler=de,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new w.x,this.entered=new w.x,this.exited=new w.x,this.dropped=new w.x,this.sorted=new w.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=wr.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new w.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(V=0,O=Na.z){return V<0&&(V=0),(0,So.H)(V,V,O)}(0,M.Z).pipe((0,Hi.R)(this._stopScrollTimers)).subscribe(()=>{const Pe=this._scrollNode,ke=this.autoScrollStep;1===this._verticalScrollDirection?Pe.scrollBy(0,-ke):2===this._verticalScrollDirection&&Pe.scrollBy(0,ke),1===this._horizontalScrollDirection?Pe.scrollBy(-ke,0):2===this._horizontalScrollDirection&&Pe.scrollBy(ke,0)})},this.element=x(O),this._document=j,this.withScrollableParents([this.element]),_.registerDropContainer(this),this._parentPositions=new Do(j,de)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(O,_,j,Q){let de;this._draggingStarted(),null==Q?(de=this.sortingDisabled?this._draggables.indexOf(O):-1,-1===de&&(de=this._getItemIndexFromPointerPosition(O,_,j))):de=Q;const Pe=this._activeDraggables,ke=Pe.indexOf(O),Qe=O.getPlaceholderElement();let tt=Pe[de];if(tt===O&&(tt=Pe[de+1]),ke>-1&&Pe.splice(ke,1),tt&&!this._dragDropRegistry.isDragging(tt)){const Ct=tt.getRootElement();Ct.parentElement.insertBefore(Qe,Ct),Pe.splice(de,0,O)}else if(this._shouldEnterAsFirstChild(_,j)){const Ct=Pe[0].getRootElement();Ct.parentNode.insertBefore(Qe,Ct),Pe.unshift(O)}else x(this.element).appendChild(Qe),Pe.push(O);Qe.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:O,container:this,currentIndex:this.getItemIndex(O)})}exit(O){this._reset(),this.exited.next({item:O,container:this})}drop(O,_,j,Q,de,Pe,ke){this._reset(),this.dropped.next({item:O,currentIndex:_,previousIndex:j,container:this,previousContainer:Q,isPointerOverContainer:de,distance:Pe,dropPoint:ke})}withItems(O){const _=this._draggables;return this._draggables=O,O.forEach(j=>j._withDropContainer(this)),this.isDragging()&&(_.filter(Q=>Q.isDragging()).every(Q=>-1===O.indexOf(Q))?this._reset():this._cacheItems()),this}withDirection(O){return this._direction=O,this}connectedTo(O){return this._siblings=O.slice(),this}withOrientation(O){return this._orientation=O,this}withScrollableParents(O){const _=x(this.element);return this._scrollableElements=-1===O.indexOf(_)?[_,...O]:O.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(O){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(j=>j.drag===O):this._draggables.indexOf(O)}isReceiving(){return this._activeSiblings.size>0}_sortItem(O,_,j,Q){if(this.sortingDisabled||!this._clientRect||!Ds(this._clientRect,.05,_,j))return;const de=this._itemPositions,Pe=this._getItemIndexFromPointerPosition(O,_,j,Q);if(-1===Pe&&de.length>0)return;const ke="horizontal"===this._orientation,Qe=de.findIndex(Pr=>Pr.drag===O),tt=de[Pe],dr=tt.clientRect,Rr=Qe>Pe?1:-1,xn=this._getItemOffsetPx(de[Qe].clientRect,dr,Rr),Mr=this._getSiblingOffsetPx(Qe,de,Rr),Qr=de.slice();(function(V,O,_){const j=Tn(O,V.length-1),Q=Tn(_,V.length-1);if(j===Q)return;const de=V[j],Pe=Q<j?-1:1;for(let ke=j;ke!==Q;ke+=Pe)V[ke]=V[ke+Pe];V[Q]=de})(de,Qe,Pe),this.sorted.next({previousIndex:Qe,currentIndex:Pe,container:this,item:O}),de.forEach((Pr,Mo)=>{if(Qr[Mo]===Pr)return;const Ms=Pr.drag===O,xs=Ms?xn:Mr,qn=Ms?O.getPlaceholderElement():Pr.drag.getRootElement();Pr.offset+=xs,ke?(qn.style.transform=Pn(`translate3d(${Math.round(Pr.offset)}px, 0, 0)`,Pr.initialTransform),Ei(Pr.clientRect,0,xs)):(qn.style.transform=Pn(`translate3d(0, ${Math.round(Pr.offset)}px, 0)`,Pr.initialTransform),Ei(Pr.clientRect,xs,0))}),this._previousSwap.overlaps=fr(dr,_,j),this._previousSwap.drag=tt.drag,this._previousSwap.delta=ke?Q.x:Q.y}_startScrollingIfNecessary(O,_){if(this.autoScrollDisabled)return;let j,Q=0,de=0;if(this._parentPositions.positions.forEach((Pe,ke)=>{ke===this._document||!Pe.clientRect||j||Ds(Pe.clientRect,.05,O,_)&&([Q,de]=function(V,O,_,j){const Q=Xi(O,j),de=Rn(O,_);let Pe=0,ke=0;if(Q){const Qe=V.scrollTop;1===Q?Qe>0&&(Pe=1):V.scrollHeight-Qe>V.clientHeight&&(Pe=2)}if(de){const Qe=V.scrollLeft;1===de?Qe>0&&(ke=1):V.scrollWidth-Qe>V.clientWidth&&(ke=2)}return[Pe,ke]}(ke,Pe.clientRect,O,_),(Q||de)&&(j=ke))}),!Q&&!de){const{width:Pe,height:ke}=this._viewportRuler.getViewportSize(),Qe={width:Pe,height:ke,top:0,right:Pe,bottom:ke,left:0};Q=Xi(Qe,_),de=Rn(Qe,O),j=window}j&&(Q!==this._verticalScrollDirection||de!==this._horizontalScrollDirection||j!==this._scrollNode)&&(this._verticalScrollDirection=Q,this._horizontalScrollDirection=de,this._scrollNode=j,(Q||de)&&j?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const O=x(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=O.msScrollSnapType||O.scrollSnapType||"",O.scrollSnapType=O.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const O=x(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(O).clientRect}_cacheItemPositions(){const O="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(_=>{const j=_.getVisibleElement();return{drag:_,offset:0,initialTransform:j.style.transform||"",clientRect:Zn(j)}}).sort((_,j)=>O?_.clientRect.left-j.clientRect.left:_.clientRect.top-j.clientRect.top)}_reset(){this._isDragging=!1;const O=x(this.element).style;O.scrollSnapType=O.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(_=>{const j=_.getRootElement();if(j){const Q=this._itemPositions.find(de=>de.drag===_)?.initialTransform;j.style.transform=Q||""}}),this._siblings.forEach(_=>_._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(O,_,j){const Q="horizontal"===this._orientation,de=_[O].clientRect,Pe=_[O+-1*j];let ke=de[Q?"width":"height"]*j;if(Pe){const Qe=Q?"left":"top",tt=Q?"right":"bottom";-1===j?ke-=Pe.clientRect[Qe]-de[tt]:ke+=de[Qe]-Pe.clientRect[tt]}return ke}_getItemOffsetPx(O,_,j){const Q="horizontal"===this._orientation;let de=Q?_.left-O.left:_.top-O.top;return-1===j&&(de+=Q?_.width-O.width:_.height-O.height),de}_shouldEnterAsFirstChild(O,_){if(!this._activeDraggables.length)return!1;const j=this._itemPositions,Q="horizontal"===this._orientation;if(j[0].drag!==this._activeDraggables[0]){const Pe=j[j.length-1].clientRect;return Q?O>=Pe.right:_>=Pe.bottom}{const Pe=j[0].clientRect;return Q?O<=Pe.left:_<=Pe.top}}_getItemIndexFromPointerPosition(O,_,j,Q){const de="horizontal"===this._orientation,Pe=this._itemPositions.findIndex(({drag:ke,clientRect:Qe})=>{if(ke===O)return!1;if(Q){const tt=de?Q.x:Q.y;if(ke===this._previousSwap.drag&&this._previousSwap.overlaps&&tt===this._previousSwap.delta)return!1}return de?_>=Math.floor(Qe.left)&&_<Math.floor(Qe.right):j>=Math.floor(Qe.top)&&j<Math.floor(Qe.bottom)});return-1!==Pe&&this.sortPredicate(Pe,O,this)?Pe:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(O,_){return null!=this._clientRect&&fr(this._clientRect,O,_)}_getSiblingContainerFromPosition(O,_,j){return this._siblings.find(Q=>Q._canReceive(O,_,j))}_canReceive(O,_,j){if(!this._clientRect||!fr(this._clientRect,_,j)||!this.enterPredicate(O,this))return!1;const Q=this._getShadowRoot().elementFromPoint(_,j);if(!Q)return!1;const de=x(this.element);return Q===de||de.contains(Q)}_startReceiving(O,_){const j=this._activeSiblings;!j.has(O)&&_.every(Q=>this.enterPredicate(Q,this)||this._draggables.indexOf(Q)>-1)&&(j.add(O),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(O){this._activeSiblings.delete(O),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(O=>{if(this.isDragging()){const _=this._parentPositions.handleScroll(O);_&&(this._itemPositions.forEach(({clientRect:j})=>{Ei(j,_.top,_.left)}),this._itemPositions.forEach(({drag:j})=>{this._dragDropRegistry.isDragging(j)&&j._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const O=ie(x(this.element));this._cachedShadowRoot=O||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const O=this._activeDraggables.filter(_=>_.isDragging());this._siblings.forEach(_=>_._startReceiving(this,O))}}function Xi(V,O){const{top:_,bottom:j,height:Q}=V,de=.05*Q;return O>=_-de&&O<=_+de?1:O>=j-de&&O<=j+de?2:0}function Rn(V,O){const{left:_,right:j,width:Q}=V,de=.05*Q;return O>=_-de&&O<=_+de?1:O>=j-de&&O<=j+de?2:0}const Yn=pe({passive:!1,capture:!0});let Gr=(()=>{class V{constructor(_,j){this._ngZone=_,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=Q=>Q.isDragging(),this.pointerMove=new w.x,this.pointerUp=new w.x,this.scroll=new w.x,this._preventDefaultWhileDragging=Q=>{this._activeDragInstances.length>0&&Q.preventDefault()},this._persistentTouchmoveListener=Q=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&Q.preventDefault(),this.pointerMove.next(Q))},this._document=j}registerDropContainer(_){this._dropInstances.has(_)||this._dropInstances.add(_)}registerDragItem(_){this._dragInstances.add(_),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Yn)})}removeDropContainer(_){this._dropInstances.delete(_)}removeDragItem(_){this._dragInstances.delete(_),this.stopDragging(_),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Yn)}startDragging(_,j){if(!(this._activeDragInstances.indexOf(_)>-1)&&(this._activeDragInstances.push(_),1===this._activeDragInstances.length)){const Q=j.type.startsWith("touch");this._globalListeners.set(Q?"touchend":"mouseup",{handler:de=>this.pointerUp.next(de),options:!0}).set("scroll",{handler:de=>this.scroll.next(de),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Yn}),Q||this._globalListeners.set("mousemove",{handler:de=>this.pointerMove.next(de),options:Yn}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((de,Pe)=>{this._document.addEventListener(Pe,de.handler,de.options)})})}}stopDragging(_){const j=this._activeDragInstances.indexOf(_);j>-1&&(this._activeDragInstances.splice(j,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(_){return this._activeDragInstances.indexOf(_)>-1}scrolled(_){const j=[this.scroll];return _&&_!==this._document&&j.push(new T.y(Q=>this._ngZone.runOutsideAngular(()=>{const Pe=ke=>{this._activeDragInstances.length&&Q.next(ke)};return _.addEventListener("scroll",Pe,!0),()=>{_.removeEventListener("scroll",Pe,!0)}}))),(0,Ot.T)(...j)}ngOnDestroy(){this._dragInstances.forEach(_=>this.removeDragItem(_)),this._dropInstances.forEach(_=>this.removeDropContainer(_)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((_,j)=>{this._document.removeEventListener(j,_.handler,_.options)}),this._globalListeners.clear()}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(u.DOCUMENT))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();const Ps={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Jn=(()=>{class V{constructor(_,j,Q,de){this._document=_,this._ngZone=j,this._viewportRuler=Q,this._dragDropRegistry=de}createDrag(_,j=Ps){return new Yi(_,j,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(_){return new Oo(_,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(u.DOCUMENT),g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(It),g.\u0275\u0275inject(Gr))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();const Is=new g.InjectionToken("CDK_DRAG_PARENT"),Mn=new g.InjectionToken("CdkDropListGroup"),qi=new g.InjectionToken("CDK_DRAG_CONFIG");let za=0;const Oi=new g.InjectionToken("CdkDropList");let Ts=(()=>{class V{constructor(_,j,Q,de,Pe,ke,Qe){this.element=_,this._changeDetectorRef=Q,this._scrollDispatcher=de,this._dir=Pe,this._group=ke,this._destroyed=new w.x,this.connectedTo=[],this.id="cdk-drop-list-"+za++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new g.EventEmitter,this.entered=new g.EventEmitter,this.exited=new g.EventEmitter,this.sorted=new g.EventEmitter,this._unsortedItems=new Set,this._dropListRef=j.createDropList(_),this._dropListRef.data=this,Qe&&this._assignDefaults(Qe),this._dropListRef.enterPredicate=(tt,Ct)=>this.enterPredicate(tt.data,Ct.data),this._dropListRef.sortPredicate=(tt,Ct,dr)=>this.sortPredicate(tt,Ct.data,dr.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),V._dropLists.push(this),ke&&ke._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(_){this._dropListRef.disabled=this._disabled=D(_)}addItem(_){this._unsortedItems.add(_),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(_){this._unsortedItems.delete(_),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((_,j)=>_._dragRef.getVisibleElement().compareDocumentPosition(j._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const _=V._dropLists.indexOf(this);_>-1&&V._dropLists.splice(_,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(_){this._dir&&this._dir.change.pipe((0,Vi.O)(this._dir.value),(0,Hi.R)(this._destroyed)).subscribe(j=>_.withDirection(j)),_.beforeStarted.subscribe(()=>{const j=function(V){return Array.isArray(V)?V:[V]}(this.connectedTo).map(Q=>"string"==typeof Q?V._dropLists.find(Pe=>Pe.id===Q):Q);if(this._group&&this._group._items.forEach(Q=>{-1===j.indexOf(Q)&&j.push(Q)}),!this._scrollableParentsResolved){const Q=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(de=>de.getElementRef().nativeElement);this._dropListRef.withScrollableParents(Q),this._scrollableParentsResolved=!0}_.disabled=this.disabled,_.lockAxis=this.lockAxis,_.sortingDisabled=D(this.sortingDisabled),_.autoScrollDisabled=D(this.autoScrollDisabled),_.autoScrollStep=p(this.autoScrollStep,2),_.connectedTo(j.filter(Q=>Q&&Q!==this).map(Q=>Q._dropListRef)).withOrientation(this.orientation)})}_handleEvents(_){_.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),_.entered.subscribe(j=>{this.entered.emit({container:this,item:j.item.data,currentIndex:j.currentIndex})}),_.exited.subscribe(j=>{this.exited.emit({container:this,item:j.item.data}),this._changeDetectorRef.markForCheck()}),_.sorted.subscribe(j=>{this.sorted.emit({previousIndex:j.previousIndex,currentIndex:j.currentIndex,container:this,item:j.item.data})}),_.dropped.subscribe(j=>{this.dropped.emit({previousIndex:j.previousIndex,currentIndex:j.currentIndex,previousContainer:j.previousContainer.data,container:j.container.data,item:j.item.data,isPointerOverContainer:j.isPointerOverContainer,distance:j.distance,dropPoint:j.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(_){const{lockAxis:j,draggingDisabled:Q,sortingDisabled:de,listAutoScrollDisabled:Pe,listOrientation:ke}=_;this.disabled=Q??!1,this.sortingDisabled=de??!1,this.autoScrollDisabled=Pe??!1,this.orientation=ke||"vertical",j&&(this.lockAxis=j)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(_=>_._dragRef))}}return V._dropLists=[],V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(Jn),g.\u0275\u0275directiveInject(g.ChangeDetectorRef),g.\u0275\u0275directiveInject(et),g.\u0275\u0275directiveInject(On,8),g.\u0275\u0275directiveInject(Mn,12),g.\u0275\u0275directiveInject(qi,8))},V.\u0275dir=g.\u0275\u0275defineDirective({type:V,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(_,j){2&_&&(g.\u0275\u0275attribute("id",j.id),g.\u0275\u0275classProp("cdk-drop-list-disabled",j.disabled)("cdk-drop-list-dragging",j._dropListRef.isDragging())("cdk-drop-list-receiving",j._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[g.\u0275\u0275ProvidersFeature([{provide:Mn,useValue:void 0},{provide:Oi,useExisting:V}])]}),V})();const Po=new g.InjectionToken("CdkDragHandle"),To=new g.InjectionToken("CdkDragPlaceholder");let Wa=(()=>{class V{constructor(_){this.templateRef=_}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275directiveInject(g.TemplateRef))},V.\u0275dir=g.\u0275\u0275defineDirective({type:V,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[g.\u0275\u0275ProvidersFeature([{provide:To,useExisting:V}])]}),V})();const Rs=new g.InjectionToken("CdkDragPreview");let Pi=(()=>{class V{constructor(_,j,Q,de,Pe,ke,Qe,tt,Ct,dr,Rr){this.element=_,this.dropContainer=j,this._ngZone=de,this._viewContainerRef=Pe,this._dir=Qe,this._changeDetectorRef=Ct,this._selfHandle=dr,this._parentDrag=Rr,this._destroyed=new w.x,this.started=new g.EventEmitter,this.released=new g.EventEmitter,this.ended=new g.EventEmitter,this.entered=new g.EventEmitter,this.exited=new g.EventEmitter,this.dropped=new g.EventEmitter,this.moved=new T.y(xn=>{const Mr=this._dragRef.moved.pipe((0,Sr.U)(Qr=>({source:this,pointerPosition:Qr.pointerPosition,event:Qr.event,delta:Qr.delta,distance:Qr.distance}))).subscribe(xn);return()=>{Mr.unsubscribe()}}),this._dragRef=tt.createDrag(_,{dragStartThreshold:ke&&null!=ke.dragStartThreshold?ke.dragStartThreshold:5,pointerDirectionChangeThreshold:ke&&null!=ke.pointerDirectionChangeThreshold?ke.pointerDirectionChangeThreshold:5,zIndex:ke?.zIndex}),this._dragRef.data=this,V._dragInstances.push(this),ke&&this._assignDefaults(ke),j&&(this._dragRef._withDropContainer(j._dropListRef),j.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(_){this._disabled=D(_),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Gi.q)(1),(0,Hi.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(_){const j=_.rootElementSelector,Q=_.freeDragPosition;j&&!j.firstChange&&this._updateRootElement(),Q&&!Q.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const _=V._dragInstances.indexOf(this);_>-1&&V._dragInstances.splice(_,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const _=this.element.nativeElement;let j=_;this.rootElementSelector&&(j=void 0!==_.closest?_.closest(this.rootElementSelector):_.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(j||_)}_getBoundaryElement(){const _=this.boundaryElement;return _?"string"==typeof _?this.element.nativeElement.closest(_):x(_):null}_syncInputs(_){_.beforeStarted.subscribe(()=>{if(!_.isDragging()){const j=this._dir,Q=this.dragStartDelay,de=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,Pe=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;_.disabled=this.disabled,_.lockAxis=this.lockAxis,_.dragStartDelay="object"==typeof Q&&Q?Q:p(Q),_.constrainPosition=this.constrainPosition,_.previewClass=this.previewClass,_.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(de).withPreviewTemplate(Pe).withPreviewContainer(this.previewContainer||"global"),j&&_.withDirection(j.value)}}),_.beforeStarted.pipe((0,Gi.q)(1)).subscribe(()=>{if(this._parentDrag)return void _.withParent(this._parentDrag._dragRef);let j=this.element.nativeElement.parentElement;for(;j;){if(j.classList.contains("cdk-drag")){_.withParent(V._dragInstances.find(Q=>Q.element.nativeElement===j)?._dragRef||null);break}j=j.parentElement}})}_handleEvents(_){_.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),_.released.subscribe(()=>{this.released.emit({source:this})}),_.ended.subscribe(j=>{this.ended.emit({source:this,distance:j.distance,dropPoint:j.dropPoint}),this._changeDetectorRef.markForCheck()}),_.entered.subscribe(j=>{this.entered.emit({container:j.container.data,item:this,currentIndex:j.currentIndex})}),_.exited.subscribe(j=>{this.exited.emit({container:j.container.data,item:this})}),_.dropped.subscribe(j=>{this.dropped.emit({previousIndex:j.previousIndex,currentIndex:j.currentIndex,previousContainer:j.previousContainer.data,container:j.container.data,isPointerOverContainer:j.isPointerOverContainer,item:this,distance:j.distance,dropPoint:j.dropPoint})})}_assignDefaults(_){const{lockAxis:j,dragStartDelay:Q,constrainPosition:de,previewClass:Pe,boundaryElement:ke,draggingDisabled:Qe,rootElementSelector:tt,previewContainer:Ct}=_;this.disabled=Qe??!1,this.dragStartDelay=Q||0,j&&(this.lockAxis=j),de&&(this.constrainPosition=de),Pe&&(this.previewClass=Pe),ke&&(this.boundaryElement=ke),tt&&(this.rootElementSelector=tt),Ct&&(this.previewContainer=Ct)}_setupHandlesListener(){this._handles.changes.pipe((0,Vi.O)(this._handles),(0,Vr.b)(_=>{const j=_.filter(Q=>Q._parentDrag===this).map(Q=>Q.element);this._selfHandle&&this.rootElementSelector&&j.push(this.element),this._dragRef.withHandles(j)}),(0,Vn.w)(_=>(0,Ot.T)(..._.map(j=>j._stateChanges.pipe((0,Vi.O)(j))))),(0,Hi.R)(this._destroyed)).subscribe(_=>{const j=this._dragRef,Q=_.element.nativeElement;_.disabled?j.disableHandle(Q):j.enableHandle(Q)})}}return V._dragInstances=[],V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(Oi,12),g.\u0275\u0275directiveInject(u.DOCUMENT),g.\u0275\u0275directiveInject(g.NgZone),g.\u0275\u0275directiveInject(g.ViewContainerRef),g.\u0275\u0275directiveInject(qi,8),g.\u0275\u0275directiveInject(On,8),g.\u0275\u0275directiveInject(Jn),g.\u0275\u0275directiveInject(g.ChangeDetectorRef),g.\u0275\u0275directiveInject(Po,10),g.\u0275\u0275directiveInject(Is,12))},V.\u0275dir=g.\u0275\u0275defineDirective({type:V,selectors:[["","cdkDrag",""]],contentQueries:function(_,j,Q){if(1&_&&(g.\u0275\u0275contentQuery(Q,Rs,5),g.\u0275\u0275contentQuery(Q,To,5),g.\u0275\u0275contentQuery(Q,Po,5)),2&_){let de;g.\u0275\u0275queryRefresh(de=g.\u0275\u0275loadQuery())&&(j._previewTemplate=de.first),g.\u0275\u0275queryRefresh(de=g.\u0275\u0275loadQuery())&&(j._placeholderTemplate=de.first),g.\u0275\u0275queryRefresh(de=g.\u0275\u0275loadQuery())&&(j._handles=de)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(_,j){2&_&&g.\u0275\u0275classProp("cdk-drag-disabled",j.disabled)("cdk-drag-dragging",j._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[g.\u0275\u0275ProvidersFeature([{provide:Is,useExisting:V}]),g.\u0275\u0275NgOnChangesFeature]}),V})(),Ha=(()=>{class V{}return V.\u0275fac=function(_){return new(_||V)},V.\u0275mod=g.\u0275\u0275defineNgModule({type:V}),V.\u0275inj=g.\u0275\u0275defineInjector({providers:[Jn],imports:[rr]}),V})()},1481:(oe,N,l)=>{l.d(N,{b2:()=>ar,H7:()=>En,q6:()=>kr,se:()=>q});var g=l(1457),u=l(7777);class D extends g.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class p extends D{static makeCurrent(){(0,g.\u0275setRootDomAdapter)(new p)}onAndCancel(ve,se,De){return ve.addEventListener(se,De,!1),()=>{ve.removeEventListener(se,De,!1)}}dispatchEvent(ve,se){ve.dispatchEvent(se)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,se){return(se=se||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,se){return"window"===se?window:"document"===se?ve:"body"===se?ve.body:null}getBaseHref(ve){const se=(B=B||document.querySelector("base"),B?B.getAttribute("href"):null);return null==se?null:function(Oe){F=F||document.createElement("a"),F.setAttribute("href",Oe);const ve=F.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(se)}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,g.\u0275parseCookieValue)(document.cookie,ve)}}let F,B=null;const P=new u.InjectionToken("TRANSITION_ID"),S=[{provide:u.APP_INITIALIZER,useFactory:function(Oe,ve,se){return()=>{se.get(u.ApplicationInitStatus).donePromise.then(()=>{const De=(0,g.\u0275getDOM)(),$e=ve.querySelectorAll(`style[ng-transition="${Oe}"]`);for(let it=0;it<$e.length;it++)De.remove($e[it])})}},deps:[P,g.DOCUMENT,u.Injector],multi:!0}];class T{static init(){(0,u.setTestabilityGetter)(new T)}addToWindow(ve){u.\u0275global.getAngularTestability=(De,$e=!0)=>{const it=ve.findTestabilityInTree(De,$e);if(null==it)throw new Error("Could not find testability for element.");return it},u.\u0275global.getAllAngularTestabilities=()=>ve.getAllTestabilities(),u.\u0275global.getAllAngularRootElements=()=>ve.getAllRootElements(),u.\u0275global.frameworkStabilizers||(u.\u0275global.frameworkStabilizers=[]),u.\u0275global.frameworkStabilizers.push(De=>{const $e=u.\u0275global.getAllAngularTestabilities();let it=$e.length,Bt=!1;const Er=function(Br){Bt=Bt||Br,it--,0==it&&De(Bt)};$e.forEach(function(Br){Br.whenStable(Er)})})}findTestabilityInTree(ve,se,De){return null==se?null:ve.getTestability(se)??(De?(0,g.\u0275getDOM)().isShadowRoot(se)?this.findTestabilityInTree(ve,se.host,!0):this.findTestabilityInTree(ve,se.parentElement,!0):null)}}let I=(()=>{class Oe{build(){return new XMLHttpRequest}}return Oe.\u0275fac=function(se){return new(se||Oe)},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})();const M=new u.InjectionToken("EventManagerPlugins");let R=(()=>{class Oe{constructor(se,De){this._zone=De,this._eventNameToPlugin=new Map,se.forEach($e=>$e.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,De,$e){return this._findPluginFor(De).addEventListener(se,De,$e)}addGlobalEventListener(se,De,$e){return this._findPluginFor(De).addGlobalEventListener(se,De,$e)}getZone(){return this._zone}_findPluginFor(se){const De=this._eventNameToPlugin.get(se);if(De)return De;const $e=this._plugins;for(let it=0;it<$e.length;it++){const Bt=$e[it];if(Bt.supports(se))return this._eventNameToPlugin.set(se,Bt),Bt}throw new Error(`No event manager plugin found for event ${se}`)}}return Oe.\u0275fac=function(se){return new(se||Oe)(u.\u0275\u0275inject(M),u.\u0275\u0275inject(u.NgZone))},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})();class b{constructor(ve){this._doc=ve}addGlobalEventListener(ve,se,De){const $e=(0,g.\u0275getDOM)().getGlobalEventTarget(this._doc,ve);if(!$e)throw new Error(`Unsupported event target ${$e} for event ${se}`);return this.addEventListener($e,se,De)}}let y=(()=>{class Oe{constructor(){this._stylesSet=new Set}addStyles(se){const De=new Set;se.forEach($e=>{this._stylesSet.has($e)||(this._stylesSet.add($e),De.add($e))}),this.onStylesAdded(De)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return Oe.\u0275fac=function(se){return new(se||Oe)},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})(),c=(()=>{class Oe extends y{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,De,$e){se.forEach(it=>{const Bt=this._doc.createElement("style");Bt.textContent=it,$e.push(De.appendChild(Bt))})}addHost(se){const De=[];this._addStylesToHost(this._stylesSet,se,De),this._hostNodes.set(se,De)}removeHost(se){const De=this._hostNodes.get(se);De&&De.forEach(o),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((De,$e)=>{this._addStylesToHost(se,$e,De)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(o))}}return Oe.\u0275fac=function(se){return new(se||Oe)(u.\u0275\u0275inject(g.DOCUMENT))},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})();function o(Oe){(0,g.\u0275getDOM)().remove(Oe)}const v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},h=/%COMP%/g;function $(Oe,ve,se){for(let De=0;De<ve.length;De++){let $e=ve[De];Array.isArray($e)?$(Oe,$e,se):($e=$e.replace(h,Oe),se.push($e))}return se}function J(Oe){return ve=>{if("__ngUnwrap__"===ve)return Oe;!1===Oe(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let q=(()=>{class Oe{constructor(se,De,$e){this.eventManager=se,this.sharedStylesHost=De,this.appId=$e,this.rendererByCompId=new Map,this.defaultRenderer=new H(se)}createRenderer(se,De){if(!se||!De)return this.defaultRenderer;switch(De.encapsulation){case u.ViewEncapsulation.Emulated:{let $e=this.rendererByCompId.get(De.id);return $e||($e=new Fe(this.eventManager,this.sharedStylesHost,De,this.appId),this.rendererByCompId.set(De.id,$e)),$e.applyToHost(se),$e}case 1:case u.ViewEncapsulation.ShadowDom:return new me(this.eventManager,this.sharedStylesHost,se,De);default:if(!this.rendererByCompId.has(De.id)){const $e=$(De.id,De.styles,[]);this.sharedStylesHost.addStyles($e),this.rendererByCompId.set(De.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Oe.\u0275fac=function(se){return new(se||Oe)(u.\u0275\u0275inject(R),u.\u0275\u0275inject(c),u.\u0275\u0275inject(u.APP_ID))},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})();class H{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,se){return se?document.createElementNS(v[se]||se,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,se){ve.appendChild(se)}insertBefore(ve,se,De){ve&&ve.insertBefore(se,De)}removeChild(ve,se){ve&&ve.removeChild(se)}selectRootElement(ve,se){let De="string"==typeof ve?document.querySelector(ve):ve;if(!De)throw new Error(`The selector "${ve}" did not match any elements`);return se||(De.textContent=""),De}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,se,De,$e){if($e){se=$e+":"+se;const it=v[$e];it?ve.setAttributeNS(it,se,De):ve.setAttribute(se,De)}else ve.setAttribute(se,De)}removeAttribute(ve,se,De){if(De){const $e=v[De];$e?ve.removeAttributeNS($e,se):ve.removeAttribute(`${De}:${se}`)}else ve.removeAttribute(se)}addClass(ve,se){ve.classList.add(se)}removeClass(ve,se){ve.classList.remove(se)}setStyle(ve,se,De,$e){$e&(u.RendererStyleFlags2.DashCase|u.RendererStyleFlags2.Important)?ve.style.setProperty(se,De,$e&u.RendererStyleFlags2.Important?"important":""):ve.style[se]=De}removeStyle(ve,se,De){De&u.RendererStyleFlags2.DashCase?ve.style.removeProperty(se):ve.style[se]=""}setProperty(ve,se,De){ve[se]=De}setValue(ve,se){ve.nodeValue=se}listen(ve,se,De){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,se,J(De)):this.eventManager.addEventListener(ve,se,J(De))}}class Fe extends H{constructor(ve,se,De,$e){super(ve),this.component=De;const it=$($e+"-"+De.id,De.styles,[]);se.addStyles(it),this.contentAttr="_ngcontent-%COMP%".replace(h,$e+"-"+De.id),this.hostAttr="_nghost-%COMP%".replace(h,$e+"-"+De.id)}applyToHost(ve){super.setAttribute(ve,this.hostAttr,"")}createElement(ve,se){const De=super.createElement(ve,se);return super.setAttribute(De,this.contentAttr,""),De}}class me extends H{constructor(ve,se,De,$e){super(ve),this.sharedStylesHost=se,this.hostEl=De,this.shadowRoot=De.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const it=$($e.id,$e.styles,[]);for(let Bt=0;Bt<it.length;Bt++){const Er=document.createElement("style");Er.textContent=it[Bt],this.shadowRoot.appendChild(Er)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ve,se){return super.appendChild(this.nodeOrShadowRoot(ve),se)}insertBefore(ve,se,De){return super.insertBefore(this.nodeOrShadowRoot(ve),se,De)}removeChild(ve,se){return super.removeChild(this.nodeOrShadowRoot(ve),se)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}}let _e=(()=>{class Oe extends b{constructor(se){super(se)}supports(se){return!0}addEventListener(se,De,$e){return se.addEventListener(De,$e,!1),()=>this.removeEventListener(se,De,$e)}removeEventListener(se,De,$e){return se.removeEventListener(De,$e)}}return Oe.\u0275fac=function(se){return new(se||Oe)(u.\u0275\u0275inject(g.DOCUMENT))},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})();const ne=["alt","control","meta","shift"],Te={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},je={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ze={alt:Oe=>Oe.altKey,control:Oe=>Oe.ctrlKey,meta:Oe=>Oe.metaKey,shift:Oe=>Oe.shiftKey};let ut=(()=>{class Oe extends b{constructor(se){super(se)}supports(se){return null!=Oe.parseEventName(se)}addEventListener(se,De,$e){const it=Oe.parseEventName(De),Bt=Oe.eventCallback(it.fullKey,$e,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.\u0275getDOM)().onAndCancel(se,it.domEventName,Bt))}static parseEventName(se){const De=se.toLowerCase().split("."),$e=De.shift();if(0===De.length||"keydown"!==$e&&"keyup"!==$e)return null;const it=Oe._normalizeKey(De.pop());let Bt="";if(ne.forEach(Br=>{const dn=De.indexOf(Br);dn>-1&&(De.splice(dn,1),Bt+=Br+".")}),Bt+=it,0!=De.length||0===it.length)return null;const Er={};return Er.domEventName=$e,Er.fullKey=Bt,Er}static getEventFullKey(se){let De="",$e=function(Oe){let ve=Oe.key;if(null==ve){if(ve=Oe.keyIdentifier,null==ve)return"Unidentified";ve.startsWith("U+")&&(ve=String.fromCharCode(parseInt(ve.substring(2),16)),3===Oe.location&&je.hasOwnProperty(ve)&&(ve=je[ve]))}return Te[ve]||ve}(se);return $e=$e.toLowerCase()," "===$e?$e="space":"."===$e&&($e="dot"),ne.forEach(it=>{it!=$e&&Ze[it](se)&&(De+=it+".")}),De+=$e,De}static eventCallback(se,De,$e){return it=>{Oe.getEventFullKey(it)===se&&$e.runGuarded(()=>De(it))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return Oe.\u0275fac=function(se){return new(se||Oe)(u.\u0275\u0275inject(g.DOCUMENT))},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:Oe.\u0275fac}),Oe})();const kr=(0,u.createPlatformFactory)(u.platformCore,"browser",[{provide:u.PLATFORM_ID,useValue:g.\u0275PLATFORM_BROWSER_ID},{provide:u.PLATFORM_INITIALIZER,useValue:function(){p.makeCurrent(),T.init()},multi:!0},{provide:g.DOCUMENT,useFactory:function(){return(0,u.\u0275setDocument)(document),document},deps:[]}]),br=[{provide:u.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:u.ErrorHandler,useFactory:function(){return new u.ErrorHandler},deps:[]},{provide:M,useClass:_e,multi:!0,deps:[g.DOCUMENT,u.NgZone,u.PLATFORM_ID]},{provide:M,useClass:ut,multi:!0,deps:[g.DOCUMENT]},{provide:q,useClass:q,deps:[R,c,u.APP_ID]},{provide:u.RendererFactory2,useExisting:q},{provide:y,useExisting:c},{provide:c,useClass:c,deps:[g.DOCUMENT]},{provide:u.Testability,useClass:u.Testability,deps:[u.NgZone]},{provide:R,useClass:R,deps:[M,u.NgZone]},{provide:g.XhrFactory,useClass:I,deps:[]}];let ar=(()=>{class Oe{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:Oe,providers:[{provide:u.APP_ID,useValue:se.appId},{provide:P,useExisting:u.APP_ID},S]}}}return Oe.\u0275fac=function(se){return new(se||Oe)(u.\u0275\u0275inject(Oe,12))},Oe.\u0275mod=u.\u0275\u0275defineNgModule({type:Oe}),Oe.\u0275inj=u.\u0275\u0275defineInjector({providers:br,imports:[g.CommonModule,u.ApplicationModule]}),Oe})();"undefined"!=typeof window&&window;let En=(()=>{class Oe{}return Oe.\u0275fac=function(se){return new(se||Oe)},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:function(se){let De=null;return De=se?new(se||Oe):u.\u0275\u0275inject(di),De},providedIn:"root"}),Oe})(),di=(()=>{class Oe extends En{constructor(se){super(),this._doc=se}sanitize(se,De){if(null==De)return null;switch(se){case u.SecurityContext.NONE:return De;case u.SecurityContext.HTML:return(0,u.\u0275allowSanitizationBypassAndThrow)(De,"HTML")?(0,u.\u0275unwrapSafeValue)(De):(0,u.\u0275_sanitizeHtml)(this._doc,String(De)).toString();case u.SecurityContext.STYLE:return(0,u.\u0275allowSanitizationBypassAndThrow)(De,"Style")?(0,u.\u0275unwrapSafeValue)(De):De;case u.SecurityContext.SCRIPT:if((0,u.\u0275allowSanitizationBypassAndThrow)(De,"Script"))return(0,u.\u0275unwrapSafeValue)(De);throw new Error("unsafe value used in a script context");case u.SecurityContext.URL:return(0,u.\u0275getSanitizationBypassType)(De),(0,u.\u0275allowSanitizationBypassAndThrow)(De,"URL")?(0,u.\u0275unwrapSafeValue)(De):(0,u.\u0275_sanitizeUrl)(String(De));case u.SecurityContext.RESOURCE_URL:if((0,u.\u0275allowSanitizationBypassAndThrow)(De,"ResourceURL"))return(0,u.\u0275unwrapSafeValue)(De);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,u.\u0275bypassSanitizationTrustHtml)(se)}bypassSecurityTrustStyle(se){return(0,u.\u0275bypassSanitizationTrustStyle)(se)}bypassSecurityTrustScript(se){return(0,u.\u0275bypassSanitizationTrustScript)(se)}bypassSecurityTrustUrl(se){return(0,u.\u0275bypassSanitizationTrustUrl)(se)}bypassSecurityTrustResourceUrl(se){return(0,u.\u0275bypassSanitizationTrustResourceUrl)(se)}}return Oe.\u0275fac=function(se){return new(se||Oe)(u.\u0275\u0275inject(g.DOCUMENT))},Oe.\u0275prov=u.\u0275\u0275defineInjectable({token:Oe,factory:function(se){let De=null;return De=se?new se:function(Oe){return new di(Oe.get(g.DOCUMENT))}(u.\u0275\u0275inject(u.Injector)),De},providedIn:"root"}),Oe})()},5861:(oe,N,l)=>{function g(D,p,B,L,F,x,P){try{var w=D[x](P),S=w.value}catch(T){return void B(T)}w.done?p(S):Promise.resolve(S).then(L,F)}function u(D){return function(){var p=this,B=arguments;return new Promise(function(L,F){var x=D.apply(p,B);function P(S){g(x,L,F,P,w,"next",S)}function w(S){g(x,L,F,P,w,"throw",S)}P(void 0)})}}l.d(N,{Z:()=>u})}}]);