(self.webpackChunk_central_factory_portal=self.webpackChunk_central_factory_portal||[]).push([[700],{8700:(V,v,r)=>{r.r(v),r.d(v,{SelectAvatarModule:()=>B});var c=r(1457),u=r(4438),f=r(1718),t=r(7777);let C=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[c.CommonModule,u.O,f.y]]}),e})();var i=r(428),A=r(442),S=r(1135),g=r(3900),h=r(4128),s=r(8505);let y=(()=>{class e{constructor(a){this.entityManager=a,this.avatars$=new S.X([]),this.entityManager.initialize$.pipe((0,g.w)(()=>(0,h.D)([this.entityManager.getRepository("useravatars","com.central-factory.user-avatars")])),(0,s.b)(([o])=>{this.userAvatarsRepository=o,this.subscribeToDataChanges()})).subscribe()}subscribeToDataChanges(){if(!this.userAvatarsRepository)throw new Error("Repositories not initialized");this.userAvatarsRepository.observe().pipe((0,s.b)(a=>this.avatars$.next(a))).subscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.\u0275\u0275inject(A.v2))},e.\u0275prov=t.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=r(7165),d=r(1623),m=r(3454),x=r(7967),E=r(405);function I(e,n){if(1&e){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",2),t.\u0275\u0275listener("click",function(){const p=t.\u0275\u0275restoreView(a).$implicit;return t.\u0275\u0275nextContext().avatarClick.emit(p)}),t.\u0275\u0275element(2,"cf-avatar-appearance-portrait",3),t.\u0275\u0275element(3,"br"),t.\u0275\u0275elementStart(4,"h4",4),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&e){const a=n.$implicit;t.\u0275\u0275advance(2),t.\u0275\u0275property("appearancePortrait",null==a.selectedAppearance?null:a.selectedAppearance.portrait),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(a.name)}}let j=(()=>{class e{constructor(){this.avatars=[],this.avatarClick=new t.EventEmitter}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["cf-avatars-carousel"]],inputs:{avatars:"avatars"},outputs:{avatarClick:"avatarClick"},decls:2,vars:1,consts:[["cfBlock","avatars-carousel"],[4,"ngFor","ngForOf"],["cfBlock","avatars-carousel-item",3,"click"],[3,"appearancePortrait"],["cfElem","name"]],template:function(a,o){1&a&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275template(1,I,6,2,"ng-container",1),t.\u0275\u0275elementEnd()),2&a&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",o.avatars))},directives:[d.G,c.NgForOf,E.P,m.e],encapsulation:2}),e})();function _(e,n){1&e&&(t.\u0275\u0275elementStart(0,"h2",7),t.\u0275\u0275text(1," Select an Avatar "),t.\u0275\u0275elementEnd())}function b(e,n){if(1&e){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",8),t.\u0275\u0275elementStart(1,"cf-avatars-carousel",9),t.\u0275\u0275listener("avatarClick",function(l){return t.\u0275\u0275restoreView(a),t.\u0275\u0275nextContext(2).onAvatarClick(l)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&e){const a=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("avatars",a.avatars)}}const k=function(){return["primary"]};function F(e,n){if(1&e){const a=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",1),t.\u0275\u0275elementStart(2,"div",2),t.\u0275\u0275template(3,_,2,0,"h2",3),t.\u0275\u0275template(4,b,2,1,"div",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275elementStart(6,"button",6),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(a),t.\u0275\u0275nextContext().onCreateAvatarClick()}),t.\u0275\u0275text(7," Create a new Avatar "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd()}if(2&e){const a=n.ngIf;t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf",a.avatars&&a.avatars.length>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.avatars&&a.avatars.length>0),t.\u0275\u0275advance(2),t.\u0275\u0275property("cfMod",t.\u0275\u0275pureFunction0(3,k))}}const R=function(e){return{avatars:e}},T=[{path:"",component:(()=>{class e{constructor(a,o,l){this.router=a,this.selectedAvatarState=o,this.availableAvatarsState=l,this.avatars$=this.availableAvatarsState.avatars$}onAvatarClick(a){this.selectedAvatarState.selectAvatar(a).pipe((0,s.b)(()=>this.router.navigate(["/play"]))).subscribe()}onCreateAvatarClick(){this.router.navigate(["/create-avatar"])}}return e.\u0275fac=function(a){return new(a||e)(t.\u0275\u0275directiveInject(i.Router),t.\u0275\u0275directiveInject(M.Y),t.\u0275\u0275directiveInject(y))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["cf-select-avatar"]],decls:2,vars:5,consts:[[4,"ngIf"],["cfBlock","scene-content"],["cfBlock","select-avatar"],["cfElem","title",4,"ngIf"],["cfElem","avatars-carousel",4,"ngIf"],["cfElem","create-avatar"],["cfBlock","button",3,"cfMod","click"],["cfElem","title"],["cfElem","avatars-carousel"],[3,"avatars","avatarClick"]],template:function(a,o){1&a&&(t.\u0275\u0275template(0,F,8,4,"ng-container",0),t.\u0275\u0275pipe(1,"async")),2&a&&t.\u0275\u0275property("ngIf",t.\u0275\u0275pureFunction1(3,R,t.\u0275\u0275pipeBind1(1,1,o.avatars$)))},directives:[c.NgIf,d.G,m.e,x.I,j],pipes:[c.AsyncPipe],encapsulation:2}),e})()}];let $=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[i.RouterModule.forChild(T)],i.RouterModule]}),e})(),B=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[c.CommonModule,u.O,C,$]]}),e})()}}]);