(self.webpackChunk_central_factory_portal=self.webpackChunk_central_factory_portal||[]).push([[740],{2740:(z,m,a)=>{a.r(m),a.d(m,{InventoryModule:()=>$});var o=a(1457),p=a(4006),i=a(4438),C=a(2051),e=a(7777);let E=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[o.CommonModule,i.O,C.Y]]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[o.CommonModule,i.O]]}),t})();var u=a(428),S=a(6435),I=a(1135),A=a(3900),_=a(4128),f=a(8505);let h=(()=>{class t{constructor(n){this.entityManager=n,this.assets$=new I.X([]),this.entityManager.initialize$.pipe((0,A.w)(()=>(0,_.D)([this.entityManager.getRepository("userassets","com.central-factory.inventory")])),(0,f.b)(([r])=>{this.userAssetsRepository=r,this.subscribeToDataChanges()})).subscribe()}subscribeToDataChanges(){if(!this.userAssetsRepository)throw new Error("Repositories not initialized");this.userAssetsRepository.observe().pipe((0,f.b)(n=>this.assets$.next(n))).subscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275inject(S.v2))},t.\u0275prov=e.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var c=a(1623),v=a(7967),d=a(3454);function M(t,s){if(1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"img",5),e.\u0275\u0275elementStart(2,"div",6),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&t){const n=s.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("src",n.previewUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.name)}}function T(t,s){1&t&&e.\u0275\u0275element(0,"div",7)}const F=function(t){return{"assets-grid-item--active":t}},D=function(t){return{"is-filled":t}};function j(t,s){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275listener("click",function(){const g=e.\u0275\u0275restoreView(n).index,y=e.\u0275\u0275nextContext();return y.assetClick.emit(y.assets[g])}),e.\u0275\u0275template(1,M,5,2,"ng-container",3),e.\u0275\u0275template(2,T,1,0,"ng-template",null,4,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()}if(2&t){const n=s.index,r=e.\u0275\u0275reference(3),l=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(4,F,l.assets[n]&&(null==l.assets[n]?null:l.assets[n].id)===(null==l.activeAsset?null:l.activeAsset.id)))("cfMod",e.\u0275\u0275pureFunction1(6,D,!!l.assets[n])),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.assets[n])("ngIfElse",r)}}let G=(()=>{class t{constructor(){this.slotsAmount=t.DEFAULT_SLOTS_AMOUNT,this.assetClick=new e.EventEmitter,this.slots=new Array(this.slotsAmount).fill(null)}}return t.DEFAULT_SLOTS_AMOUNT=16,t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["cf-assets-grid"]],inputs:{assets:"assets",activeAsset:"activeAsset",slotsAmount:"slotsAmount"},outputs:{assetClick:"assetClick"},decls:2,vars:1,consts:[["cfBlock","assets-grid"],["cfBlock","assets-grid-item",3,"ngClass","cfMod","click",4,"ngFor","ngForOf"],["cfBlock","assets-grid-item",3,"ngClass","cfMod","click"],[4,"ngIf","ngIfElse"],["empty",""],["cfElem","image",3,"src"],["cfElem","name"],["cfElem","empty"]],template:function(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,j,4,8,"div",1),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",r.slots))},directives:[c.G,o.NgForOf,o.NgClass,v.I,o.NgIf,d.e],encapsulation:2}),t})();var k=a(9750);const R=function(t,s){return{"asset-stats__value--negative":t,"asset-stats__value--positive":s}};function U(t,s){if(1&t&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementStart(1,"h3",2),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"img",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"p"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"table",5),e.\u0275\u0275elementStart(8,"tbody"),e.\u0275\u0275elementStart(9,"tr",6),e.\u0275\u0275elementStart(10,"td",7),e.\u0275\u0275text(11,"Model"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td",8),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"tr",6),e.\u0275\u0275elementStart(15,"td",7),e.\u0275\u0275text(16,"Producer"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td",8),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"tr",6),e.\u0275\u0275elementStart(20,"td",7),e.\u0275\u0275text(21,"Current Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td",9),e.\u0275\u0275text(23),e.\u0275\u0275pipe(24,"currency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"tr",6),e.\u0275\u0275elementStart(26,"td",7),e.\u0275\u0275text(27,"Purchase Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"td",8),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"currency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"tr",6),e.\u0275\u0275elementStart(32,"td",7),e.\u0275\u0275text(33,"Purchase Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"td",8),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"tr",6),e.\u0275\u0275elementStart(38,"td",7),e.\u0275\u0275text(39,"URL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"td",8),e.\u0275\u0275elementStart(41,"a",10),e.\u0275\u0275element(42,"cf-svg-icon",11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.asset.name),e.\u0275\u0275advance(1),e.\u0275\u0275property("src",n.asset.previewUrl,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.asset.description),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(n.asset.model),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.asset.producer),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(17,R,n.asset.currentValue.eth<n.asset.purchaseValue.eth,n.asset.currentValue.eth>n.asset.purchaseValue.eth)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(24,11,n.asset.currentValue.usd)," "),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(30,13,n.asset.purchaseValue.usd)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(36,15,n.asset.purchaseDate)),e.\u0275\u0275advance(6),e.\u0275\u0275property("href",n.asset.url,e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(1),e.\u0275\u0275property("svgClass","icon__svg")}}let B=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["cf-asset-detail"]],inputs:{asset:"asset"},decls:1,vars:1,consts:[["cfBlock","asset-detail",4,"ngIf"],["cfBlock","asset-detail"],["cfElem","name"],["cfElem","image","alt","",3,"src"],["cfElem","info"],["cfBlock","asset-stats"],["cfElem","row"],["cfElem","label"],["cfElem","value"],["cfElem","value",3,"ngClass"],["target","_blank",3,"href"],["src","assets/icons/mdi/link.svg","cfElem","icon",3,"svgClass"]],template:function(n,r){1&n&&e.\u0275\u0275template(0,U,43,20,"div",0),2&n&&e.\u0275\u0275property("ngIf",r.asset)},directives:[o.NgIf,c.G,d.e,o.NgClass,k.b],pipes:[o.CurrencyPipe,o.DatePipe],encapsulation:2}),t})();function O(t,s){if(1&t&&e.\u0275\u0275element(0,"cf-asset-detail",7),2&t){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("asset",n.selectedAsset)}}function N(t,s){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2),e.\u0275\u0275elementStart(1,"div",3),e.\u0275\u0275elementStart(2,"cf-assets-grid",4),e.\u0275\u0275listener("assetClick",function(l){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext(2).onGridAssetClick(l)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",5),e.\u0275\u0275template(4,O,1,1,"cf-asset-detail",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&t){const n=e.\u0275\u0275nextContext().ngIf,r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("assets",n.assets)("activeAsset",r.selectedAsset),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.selectedAsset)}}function V(t,s){if(1&t&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,N,5,3,"div",1),e.\u0275\u0275elementContainerEnd()),2&t){const n=s.ngIf;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.assets)}}const w=function(t){return{assets:t}},P=[{path:"",component:(()=>{class t{constructor(n){this.userAssetsRepository=n,this.assets$=this.userAssetsRepository.assets$}onGridAssetClick(n){this.selectedAsset=n}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(h))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["cf-inventory"]],decls:2,vars:5,consts:[[4,"ngIf"],["cfBlock","scene-content","cfMod","inventory",4,"ngIf"],["cfBlock","scene-content","cfMod","inventory"],["cfElem","assets-grid"],[3,"assets","activeAsset","assetClick"],["cfElem","asset-detail"],[3,"asset",4,"ngIf"],[3,"asset"]],template:function(n,r){1&n&&(e.\u0275\u0275template(0,V,2,1,"ng-container",0),e.\u0275\u0275pipe(1,"async")),2&n&&e.\u0275\u0275property("ngIf",e.\u0275\u0275pureFunction1(3,w,e.\u0275\u0275pipeBind1(1,1,r.assets$)))},directives:[o.NgIf,c.G,v.I,d.e,G,B],pipes:[o.AsyncPipe],styles:[".scene-content--inventory[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.5fr 1fr;grid-template-rows:1fr;grid-gap:2rem;gap:2rem}.scene-content--inventory[_ngcontent-%COMP%]   .scene-content__assets-grid[_ngcontent-%COMP%]{overflow:auto}"]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[u.RouterModule.forChild(P)],u.RouterModule]}),t})(),$=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({imports:[[o.CommonModule,p.u5,p.UX,i.O,b,E,x]]}),t})()}}]);