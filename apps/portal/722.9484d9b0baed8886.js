(self.webpackChunk_central_factory_portal=self.webpackChunk_central_factory_portal||[]).push([[722],{2722:(oe,N,l)=>{l.r(N);var g=l(1481),a=l(7777),D=l(9283),p=l(7340);function B(){return"undefined"!=typeof window&&void 0!==window.document}function L(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function F(b){switch(b.length){case 0:return new p.ZN;case 1:return b[0];default:return new p.ZE(b)}}function M(b,u,s,m,k={},z={}){const te=[],ae=[];let ye=-1,ke=null;if(m.forEach(Ve=>{const Je=Ve.offset,lt=Je==ye,Dt=lt&&ke||{};Object.keys(Ve).forEach(ot=>{let ht=ot,At=Ve[ot];if("offset"!==ot)switch(ht=u.normalizePropertyName(ht,te),At){case p.k1:At=k[ot];break;case p.l3:At=z[ot];break;default:At=u.normalizeStyleValue(ot,ht,At,te)}Dt[ht]=At}),lt||ae.push(Dt),ke=Dt,ye=Je}),te.length){const Ve="\n - ";throw new Error(`Unable to animate due to the following errors:${Ve}${te.join(Ve)}`)}return ae}function I(b,u,s,m){switch(u){case"start":b.onStart(()=>m(s&&S(s,"start",b)));break;case"done":b.onDone(()=>m(s&&S(s,"done",b)));break;case"destroy":b.onDestroy(()=>m(s&&S(s,"destroy",b)))}}function S(b,u,s){const z=w(b.element,b.triggerName,b.fromState,b.toState,u||b.phaseName,s.totalTime??b.totalTime,!!s.disabled),te=b._data;return null!=te&&(z._data=te),z}function w(b,u,s,m,k="",z=0,te){return{element:b,triggerName:u,fromState:s,toState:m,phaseName:k,totalTime:z,disabled:!!te}}function T(b,u,s){let m;return b instanceof Map?(m=b.get(u),m||b.set(u,m=s)):(m=b[u],m||(m=b[u]=s)),m}function P(b){const u=b.indexOf(":");return[b.substring(1,u),b.substr(u+1)]}let x=(b,u)=>!1,R=(b,u,s)=>[];(L()||"undefined"!=typeof Element)&&(x=B()?(b,u)=>{for(;u&&u!==document.documentElement;){if(u===b)return!0;u=u.parentNode||u.host}return!1}:(b,u)=>b.contains(u),R=(b,u,s)=>{let m=[];if(s){const k=b.querySelectorAll(u);for(let z=0;z<k.length;z++)m.push(k[z])}else{const k=b.querySelector(u);k&&m.push(k)}return m});let c=null,o=!1;function v(b){c||(c=("undefined"!=typeof document?document.body:null)||{},o=!!c.style&&"WebkitAppearance"in c.style);let u=!0;return c.style&&!function(b){return"ebkit"==b.substring(1,6)}(b)&&(u=b in c.style,!u&&o&&(u="Webkit"+b.charAt(0).toUpperCase()+b.substr(1)in c.style)),u}const K=x,ue=R;function Ee(b){const u={};return Object.keys(b).forEach(s=>{const m=s.replace(/([a-z])([A-Z])/g,"$1-$2");u[m]=b[s]}),u}let ge=(()=>{class b{validateStyleProperty(s){return v(s)}matchesElement(s,m){return!1}containsElement(s,m){return K(s,m)}query(s,m,k){return ue(s,m,k)}computeStyle(s,m,k){return k||""}animate(s,m,k,z,te,ae=[],ye){return new p.ZN(k,z)}}return b.\u0275fac=function(s){return new(s||b)},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b})(),pe=(()=>{class b{}return b.NOOP=new ge,b})();const G="ng-enter",X="ng-leave",H="ng-trigger",ie=".ng-trigger",we="ng-animating",Be=".ng-animating";function me(b){if("number"==typeof b)return b;const u=b.match(/^(-?[\.\d]+)(m?s)/);return!u||u.length<2?0:_e(parseFloat(u[1]),u[2])}function _e(b,u){return"s"===u?1e3*b:b}function re(b,u,s){return b.hasOwnProperty("duration")?b:function(b,u,s){let k,z=0,te="";if("string"==typeof b){const ae=b.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ae)return u.push(`The provided timing value "${b}" is invalid.`),{duration:0,delay:0,easing:""};k=_e(parseFloat(ae[1]),ae[2]);const ye=ae[3];null!=ye&&(z=_e(parseFloat(ye),ae[4]));const ke=ae[5];ke&&(te=ke)}else k=b;if(!s){let ae=!1,ye=u.length;k<0&&(u.push("Duration values below 0 are not allowed for this animation step."),ae=!0),z<0&&(u.push("Delay values below 0 are not allowed for this animation step."),ae=!0),ae&&u.splice(ye,0,`The provided timing value "${b}" is invalid.`)}return{duration:k,delay:z,easing:te}}(b,u,s)}function Te(b,u={}){return Object.keys(b).forEach(s=>{u[s]=b[s]}),u}function Qe(b,u,s={}){if(u)for(let m in b)s[m]=b[m];else Te(b,s);return s}function ut(b,u,s){return s?u+":"+s+";":""}function et(b){let u="";for(let s=0;s<b.style.length;s++){const m=b.style.item(s);u+=ut(0,m,b.style.getPropertyValue(m))}for(const s in b.style)b.style.hasOwnProperty(s)&&!s.startsWith("_")&&(u+=ut(0,je(s),b.style[s]));b.setAttribute("style",u)}function ct(b,u,s){b.style&&(Object.keys(u).forEach(m=>{const k=Vr(m);s&&!s.hasOwnProperty(m)&&(s[m]=b.style[k]),b.style[k]=u[m]}),L()&&et(b))}function wt(b,u){b.style&&(Object.keys(u).forEach(s=>{const m=Vr(s);b.style[m]=""}),L()&&et(b))}function Tt(b){return Array.isArray(b)?1==b.length?b[0]:(0,p.vP)(b):b}const Rr=new RegExp("{{\\s*(.+?)\\s*}}","g");function _r(b){let u=[];if("string"==typeof b){let s;for(;s=Rr.exec(b);)u.push(s[1]);Rr.lastIndex=0}return u}function cr(b,u,s){const m=b.toString(),k=m.replace(Rr,(z,te)=>{let ae=u[te];return u.hasOwnProperty(te)||(s.push(`Please provide a value for the animation param ${te}`),ae=""),ae.toString()});return k==m?b:k}function pr(b){const u=[];let s=b.next();for(;!s.done;)u.push(s.value),s=b.next();return u}const ir=/-+([a-z0-9])/g;function Vr(b){return b.replace(ir,(...u)=>u[1].toUpperCase())}function je(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Rt(b,u){return 0===b||0===u}function kt(b,u,s){const m=Object.keys(s);if(m.length&&u.length){let z=u[0],te=[];if(m.forEach(ae=>{z.hasOwnProperty(ae)||te.push(ae),z[ae]=s[ae]}),te.length)for(var k=1;k<u.length;k++){let ae=u[k];te.forEach(function(ye){ae[ye]=en(b,ye)})}}return u}function Mt(b,u,s){switch(u.type){case 7:return b.visitTrigger(u,s);case 0:return b.visitState(u,s);case 1:return b.visitTransition(u,s);case 2:return b.visitSequence(u,s);case 3:return b.visitGroup(u,s);case 4:return b.visitAnimate(u,s);case 5:return b.visitKeyframes(u,s);case 6:return b.visitStyle(u,s);case 8:return b.visitReference(u,s);case 9:return b.visitAnimateChild(u,s);case 10:return b.visitAnimateRef(u,s);case 11:return b.visitQuery(u,s);case 12:return b.visitStagger(u,s);default:throw new Error(`Unable to resolve animation metadata node #${u.type}`)}}function en(b,u){return window.getComputedStyle(b)[u]}function Ci(b,u){const s=[];return"string"==typeof b?b.split(/\s*,\s*/).forEach(m=>function(b,u,s){if(":"==b[0]){const ye=function(b,u){switch(b){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(s,m)=>parseFloat(m)>parseFloat(s);case":decrement":return(s,m)=>parseFloat(m)<parseFloat(s);default:return u.push(`The transition alias value "${b}" is not supported`),"* => *"}}(b,s);if("function"==typeof ye)return void u.push(ye);b=ye}const m=b.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==m||m.length<4)return s.push(`The provided transition expression "${b}" is not supported`),u;const k=m[1],z=m[2],te=m[3];u.push(ti(k,te));"<"==z[0]&&!("*"==k&&"*"==te)&&u.push(ti(te,k))}(m,s,u)):s.push(b),s}const Rn=new Set(["true","1"]),tn=new Set(["false","0"]);function ti(b,u){const s=Rn.has(b)||tn.has(b),m=Rn.has(u)||tn.has(u);return(k,z)=>{let te="*"==b||b==k,ae="*"==u||u==z;return!te&&s&&"boolean"==typeof k&&(te=k?Rn.has(b):tn.has(b)),!ae&&m&&"boolean"==typeof z&&(ae=z?Rn.has(u):tn.has(u)),te&&ae}}const Ks=new RegExp("s*:selfs*,?","g");function Di(b,u,s){return new Ai(b).build(u,s)}class Ai{constructor(u){this._driver=u}build(u,s){const m=new Vs(s);return this._resetContextStyleTimingState(m),Mt(this,Tt(u),m)}_resetContextStyleTimingState(u){u.currentQuerySelector="",u.collectedStyles={},u.collectedStyles[""]={},u.currentTime=0}visitTrigger(u,s){let m=s.queryCount=0,k=s.depCount=0;const z=[],te=[];return"@"==u.name.charAt(0)&&s.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),u.definitions.forEach(ae=>{if(this._resetContextStyleTimingState(s),0==ae.type){const ye=ae,ke=ye.name;ke.toString().split(/\s*,\s*/).forEach(Ve=>{ye.name=Ve,z.push(this.visitState(ye,s))}),ye.name=ke}else if(1==ae.type){const ye=this.visitTransition(ae,s);m+=ye.queryCount,k+=ye.depCount,te.push(ye)}else s.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:u.name,states:z,transitions:te,queryCount:m,depCount:k,options:null}}visitState(u,s){const m=this.visitStyle(u.styles,s),k=u.options&&u.options.params||null;if(m.containsDynamicStyles){const z=new Set,te=k||{};if(m.styles.forEach(ae=>{if(xn(ae)){const ye=ae;Object.keys(ye).forEach(ke=>{_r(ye[ke]).forEach(Ve=>{te.hasOwnProperty(Ve)||z.add(Ve)})})}}),z.size){const ae=pr(z.values());s.errors.push(`state("${u.name}", ...) must define default values for all the following style substitutions: ${ae.join(", ")}`)}}return{type:0,name:u.name,style:m,options:k?{params:k}:null}}visitTransition(u,s){s.queryCount=0,s.depCount=0;const m=Mt(this,Tt(u.animation),s);return{type:1,matchers:Ci(u.expr,s.errors),animation:m,queryCount:s.queryCount,depCount:s.depCount,options:er(u.options)}}visitSequence(u,s){return{type:2,steps:u.steps.map(m=>Mt(this,m,s)),options:er(u.options)}}visitGroup(u,s){const m=s.currentTime;let k=0;const z=u.steps.map(te=>{s.currentTime=m;const ae=Mt(this,te,s);return k=Math.max(k,s.currentTime),ae});return s.currentTime=k,{type:3,steps:z,options:er(u.options)}}visitAnimate(u,s){const m=function(b,u){let s=null;if(b.hasOwnProperty("duration"))s=b;else if("number"==typeof b)return ri(re(b,u).duration,0,"");const m=b;if(m.split(/\s+/).some(z=>"{"==z.charAt(0)&&"{"==z.charAt(1))){const z=ri(0,0,"");return z.dynamic=!0,z.strValue=m,z}return s=s||re(m,u),ri(s.duration,s.delay,s.easing)}(u.timings,s.errors);s.currentAnimateTimings=m;let k,z=u.styles?u.styles:(0,p.oB)({});if(5==z.type)k=this.visitKeyframes(z,s);else{let te=u.styles,ae=!1;if(!te){ae=!0;const ke={};m.easing&&(ke.easing=m.easing),te=(0,p.oB)(ke)}s.currentTime+=m.duration+m.delay;const ye=this.visitStyle(te,s);ye.isEmptyStep=ae,k=ye}return s.currentAnimateTimings=null,{type:4,timings:m,style:k,options:null}}visitStyle(u,s){const m=this._makeStyleAst(u,s);return this._validateStyleAst(m,s),m}_makeStyleAst(u,s){const m=[];Array.isArray(u.styles)?u.styles.forEach(te=>{"string"==typeof te?te==p.l3?m.push(te):s.errors.push(`The provided style string value ${te} is not allowed.`):m.push(te)}):m.push(u.styles);let k=!1,z=null;return m.forEach(te=>{if(xn(te)){const ae=te,ye=ae.easing;if(ye&&(z=ye,delete ae.easing),!k)for(let ke in ae)if(ae[ke].toString().indexOf("{{")>=0){k=!0;break}}}),{type:6,styles:m,easing:z,offset:u.offset,containsDynamicStyles:k,options:null}}_validateStyleAst(u,s){const m=s.currentAnimateTimings;let k=s.currentTime,z=s.currentTime;m&&z>0&&(z-=m.duration+m.delay),u.styles.forEach(te=>{"string"!=typeof te&&Object.keys(te).forEach(ae=>{if(!this._driver.validateStyleProperty(ae))return void s.errors.push(`The provided animation property "${ae}" is not a supported CSS property for animations`);const ye=s.collectedStyles[s.currentQuerySelector],ke=ye[ae];let Ve=!0;ke&&(z!=k&&z>=ke.startTime&&k<=ke.endTime&&(s.errors.push(`The CSS property "${ae}" that exists between the times of "${ke.startTime}ms" and "${ke.endTime}ms" is also being animated in a parallel animation between the times of "${z}ms" and "${k}ms"`),Ve=!1),z=ke.startTime),Ve&&(ye[ae]={startTime:z,endTime:k}),s.options&&function(b,u,s){const m=u.params||{},k=_r(b);k.length&&k.forEach(z=>{m.hasOwnProperty(z)||s.push(`Unable to resolve the local animation param ${z} in the given list of values`)})}(te[ae],s.options,s.errors)})})}visitKeyframes(u,s){const m={type:5,styles:[],options:null};if(!s.currentAnimateTimings)return s.errors.push("keyframes() must be placed inside of a call to animate()"),m;let z=0;const te=[];let ae=!1,ye=!1,ke=0;const Ve=u.steps.map(Gt=>{const qt=this._makeStyleAst(Gt,s);let gr=null!=qt.offset?qt.offset:function(b){if("string"==typeof b)return null;let u=null;if(Array.isArray(b))b.forEach(s=>{if(xn(s)&&s.hasOwnProperty("offset")){const m=s;u=parseFloat(m.offset),delete m.offset}});else if(xn(b)&&b.hasOwnProperty("offset")){const s=b;u=parseFloat(s.offset),delete s.offset}return u}(qt.styles),fr=0;return null!=gr&&(z++,fr=qt.offset=gr),ye=ye||fr<0||fr>1,ae=ae||fr<ke,ke=fr,te.push(fr),qt});ye&&s.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),ae&&s.errors.push("Please ensure that all keyframe offsets are in order");const Je=u.steps.length;let lt=0;z>0&&z<Je?s.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==z&&(lt=1/(Je-1));const Dt=Je-1,ot=s.currentTime,ht=s.currentAnimateTimings,At=ht.duration;return Ve.forEach((Gt,qt)=>{const gr=lt>0?qt==Dt?1:lt*qt:te[qt],fr=gr*At;s.currentTime=ot+ht.delay+fr,ht.duration=fr,this._validateStyleAst(Gt,s),Gt.offset=gr,m.styles.push(Gt)}),m}visitReference(u,s){return{type:8,animation:Mt(this,Tt(u.animation),s),options:er(u.options)}}visitAnimateChild(u,s){return s.depCount++,{type:9,options:er(u.options)}}visitAnimateRef(u,s){return{type:10,animation:this.visitReference(u.animation,s),options:er(u.options)}}visitQuery(u,s){const m=s.currentQuerySelector,k=u.options||{};s.queryCount++,s.currentQuery=u;const[z,te]=function(b){const u=!!b.split(/\s*,\s*/).find(s=>":self"==s);return u&&(b=b.replace(Ks,"")),b=b.replace(/@\*/g,ie).replace(/@\w+/g,s=>ie+"-"+s.substr(1)).replace(/:animating/g,Be),[b,u]}(u.selector);s.currentQuerySelector=m.length?m+" "+z:z,T(s.collectedStyles,s.currentQuerySelector,{});const ae=Mt(this,Tt(u.animation),s);return s.currentQuery=null,s.currentQuerySelector=m,{type:11,selector:z,limit:k.limit||0,optional:!!k.optional,includeSelf:te,animation:ae,originalSelector:u.selector,options:er(u.options)}}visitStagger(u,s){s.currentQuery||s.errors.push("stagger() can only be used inside of query()");const m="full"===u.timings?{duration:0,delay:0,easing:"full"}:re(u.timings,s.errors,!0);return{type:12,animation:Mt(this,Tt(u.animation),s),timings:m,options:null}}}class Vs{constructor(u){this.errors=u,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function xn(b){return!Array.isArray(b)&&"object"==typeof b}function er(b){return b?(b=Te(b)).params&&(b.params=function(b){return b?Te(b):null}(b.params)):b={},b}function ri(b,u,s){return{duration:b,delay:u,easing:s}}function jr(b,u,s,m,k,z,te=null,ae=!1){return{type:1,element:b,keyframes:u,preStyleProps:s,postStyleProps:m,duration:k,delay:z,totalTime:k+z,easing:te,subTimeline:ae}}class ni{constructor(){this._map=new Map}get(u){return this._map.get(u)||[]}append(u,s){let m=this._map.get(u);m||this._map.set(u,m=[]),m.push(...s)}has(u){return this._map.has(u)}clear(){this._map.clear()}}const es=new RegExp(":enter","g"),Qs=new RegExp(":leave","g");function Ae(b,u,s,m,k,z={},te={},ae,ye,ke=[]){return(new ve).buildKeyframes(b,u,s,m,k,z,te,ae,ye,ke)}class ve{buildKeyframes(u,s,m,k,z,te,ae,ye,ke,Ve=[]){ke=ke||new ni;const Je=new Ce(u,s,ke,k,z,Ve,[]);Je.options=ye,Je.currentTimeline.setStyles([te],null,Je.errors,ye),Mt(this,m,Je);const lt=Je.timelines.filter(Dt=>Dt.containsAnimation());if(lt.length&&Object.keys(ae).length){const Dt=lt[lt.length-1];Dt.allowOnlyTimelineStyles()||Dt.setStyles([ae],null,Je.errors,ye)}return lt.length?lt.map(Dt=>Dt.buildKeyframes()):[jr(s,[],[],[],0,0,"",!1)]}visitTrigger(u,s){}visitState(u,s){}visitTransition(u,s){}visitAnimateChild(u,s){const m=s.subInstructions.get(s.element);if(m){const k=s.createSubContext(u.options),z=s.currentTimeline.currentTime,te=this._visitSubInstructions(m,k,k.options);z!=te&&s.transformIntoNewTimeline(te)}s.previousNode=u}visitAnimateRef(u,s){const m=s.createSubContext(u.options);m.transformIntoNewTimeline(),this.visitReference(u.animation,m),s.transformIntoNewTimeline(m.currentTimeline.currentTime),s.previousNode=u}_visitSubInstructions(u,s,m){let z=s.currentTimeline.currentTime;const te=null!=m.duration?me(m.duration):null,ae=null!=m.delay?me(m.delay):null;return 0!==te&&u.forEach(ye=>{const ke=s.appendInstructionToTimeline(ye,te,ae);z=Math.max(z,ke.duration+ke.delay)}),z}visitReference(u,s){s.updateOptions(u.options,!0),Mt(this,u.animation,s),s.previousNode=u}visitSequence(u,s){const m=s.subContextCount;let k=s;const z=u.options;if(z&&(z.params||z.delay)&&(k=s.createSubContext(z),k.transformIntoNewTimeline(),null!=z.delay)){6==k.previousNode.type&&(k.currentTimeline.snapshotCurrentStyles(),k.previousNode=se);const te=me(z.delay);k.delayNextStep(te)}u.steps.length&&(u.steps.forEach(te=>Mt(this,te,k)),k.currentTimeline.applyStylesToKeyframe(),k.subContextCount>m&&k.transformIntoNewTimeline()),s.previousNode=u}visitGroup(u,s){const m=[];let k=s.currentTimeline.currentTime;const z=u.options&&u.options.delay?me(u.options.delay):0;u.steps.forEach(te=>{const ae=s.createSubContext(u.options);z&&ae.delayNextStep(z),Mt(this,te,ae),k=Math.max(k,ae.currentTimeline.currentTime),m.push(ae.currentTimeline)}),m.forEach(te=>s.currentTimeline.mergeTimelineCollectedStyles(te)),s.transformIntoNewTimeline(k),s.previousNode=u}_visitTiming(u,s){if(u.dynamic){const m=u.strValue;return re(s.params?cr(m,s.params,s.errors):m,s.errors)}return{duration:u.duration,delay:u.delay,easing:u.easing}}visitAnimate(u,s){const m=s.currentAnimateTimings=this._visitTiming(u.timings,s),k=s.currentTimeline;m.delay&&(s.incrementTime(m.delay),k.snapshotCurrentStyles());const z=u.style;5==z.type?this.visitKeyframes(z,s):(s.incrementTime(m.duration),this.visitStyle(z,s),k.applyStylesToKeyframe()),s.currentAnimateTimings=null,s.previousNode=u}visitStyle(u,s){const m=s.currentTimeline,k=s.currentAnimateTimings;!k&&m.getCurrentStyleProperties().length&&m.forwardFrame();const z=k&&k.easing||u.easing;u.isEmptyStep?m.applyEmptyStep(z):m.setStyles(u.styles,z,s.errors,s.options),s.previousNode=u}visitKeyframes(u,s){const m=s.currentAnimateTimings,k=s.currentTimeline.duration,z=m.duration,ae=s.createSubContext().currentTimeline;ae.easing=m.easing,u.styles.forEach(ye=>{ae.forwardTime((ye.offset||0)*z),ae.setStyles(ye.styles,ye.easing,s.errors,s.options),ae.applyStylesToKeyframe()}),s.currentTimeline.mergeTimelineCollectedStyles(ae),s.transformIntoNewTimeline(k+z),s.previousNode=u}visitQuery(u,s){const m=s.currentTimeline.currentTime,k=u.options||{},z=k.delay?me(k.delay):0;z&&(6===s.previousNode.type||0==m&&s.currentTimeline.getCurrentStyleProperties().length)&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=se);let te=m;const ae=s.invokeQuery(u.selector,u.originalSelector,u.limit,u.includeSelf,!!k.optional,s.errors);s.currentQueryTotal=ae.length;let ye=null;ae.forEach((ke,Ve)=>{s.currentQueryIndex=Ve;const Je=s.createSubContext(u.options,ke);z&&Je.delayNextStep(z),ke===s.element&&(ye=Je.currentTimeline),Mt(this,u.animation,Je),Je.currentTimeline.applyStylesToKeyframe(),te=Math.max(te,Je.currentTimeline.currentTime)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(te),ye&&(s.currentTimeline.mergeTimelineCollectedStyles(ye),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=u}visitStagger(u,s){const m=s.parentContext,k=s.currentTimeline,z=u.timings,te=Math.abs(z.duration),ae=te*(s.currentQueryTotal-1);let ye=te*s.currentQueryIndex;switch(z.duration<0?"reverse":z.easing){case"reverse":ye=ae-ye;break;case"full":ye=m.currentStaggerTime}const Ve=s.currentTimeline;ye&&Ve.delayNextStep(ye);const Je=Ve.currentTime;Mt(this,u.animation,s),s.previousNode=u,m.currentStaggerTime=k.currentTime-Je+(k.startTime-m.currentTimeline.startTime)}}const se={};class Ce{constructor(u,s,m,k,z,te,ae,ye){this._driver=u,this.element=s,this.subInstructions=m,this._enterClassName=k,this._leaveClassName=z,this.errors=te,this.timelines=ae,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=se,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ye||new Ue(this._driver,s,0),ae.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(u,s){if(!u)return;const m=u;let k=this.options;null!=m.duration&&(k.duration=me(m.duration)),null!=m.delay&&(k.delay=me(m.delay));const z=m.params;if(z){let te=k.params;te||(te=this.options.params={}),Object.keys(z).forEach(ae=>{(!s||!te.hasOwnProperty(ae))&&(te[ae]=cr(z[ae],te,this.errors))})}}_copyOptions(){const u={};if(this.options){const s=this.options.params;if(s){const m=u.params={};Object.keys(s).forEach(k=>{m[k]=s[k]})}}return u}createSubContext(u=null,s,m){const k=s||this.element,z=new Ce(this._driver,k,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(k,m||0));return z.previousNode=this.previousNode,z.currentAnimateTimings=this.currentAnimateTimings,z.options=this._copyOptions(),z.updateOptions(u),z.currentQueryIndex=this.currentQueryIndex,z.currentQueryTotal=this.currentQueryTotal,z.parentContext=this,this.subContextCount++,z}transformIntoNewTimeline(u){return this.previousNode=se,this.currentTimeline=this.currentTimeline.fork(this.element,u),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(u,s,m){const k={duration:s??u.duration,delay:this.currentTimeline.currentTime+(m??0)+u.delay,easing:""},z=new nt(this._driver,u.element,u.keyframes,u.preStyleProps,u.postStyleProps,k,u.stretchStartingKeyframe);return this.timelines.push(z),k}incrementTime(u){this.currentTimeline.forwardTime(this.currentTimeline.duration+u)}delayNextStep(u){u>0&&this.currentTimeline.delayNextStep(u)}invokeQuery(u,s,m,k,z,te){let ae=[];if(k&&ae.push(this.element),u.length>0){u=(u=u.replace(es,"."+this._enterClassName)).replace(Qs,"."+this._leaveClassName);let ke=this._driver.query(this.element,u,1!=m);0!==m&&(ke=m<0?ke.slice(ke.length+m,ke.length):ke.slice(0,m)),ae.push(...ke)}return!z&&0==ae.length&&te.push(`\`query("${s}")\` returned zero elements. (Use \`query("${s}", { optional: true })\` if you wish to allow this.)`),ae}}class Ue{constructor(u,s,m,k){this._driver=u,this.element=s,this.startTime=m,this._elementTimelineStylesLookup=k,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(s),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(s,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(u){const s=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||s?(this.forwardTime(this.currentTime+u),s&&this.snapshotCurrentStyles()):this.startTime+=u}fork(u,s){return this.applyStylesToKeyframe(),new Ue(this._driver,u,s||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(u){this.applyStylesToKeyframe(),this.duration=u,this._loadKeyframe()}_updateStyle(u,s){this._localTimelineStyles[u]=s,this._globalTimelineStyles[u]=s,this._styleSummary[u]={time:this.currentTime,value:s}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(u){u&&(this._previousKeyframe.easing=u),Object.keys(this._globalTimelineStyles).forEach(s=>{this._backFill[s]=this._globalTimelineStyles[s]||p.l3,this._currentKeyframe[s]=p.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(u,s,m,k){s&&(this._previousKeyframe.easing=s);const z=k&&k.params||{},te=function(b,u){const s={};let m;return b.forEach(k=>{"*"===k?(m=m||Object.keys(u),m.forEach(z=>{s[z]=p.l3})):Qe(k,!1,s)}),s}(u,this._globalTimelineStyles);Object.keys(te).forEach(ae=>{const ye=cr(te[ae],z,m);this._pendingStyles[ae]=ye,this._localTimelineStyles.hasOwnProperty(ae)||(this._backFill[ae]=this._globalTimelineStyles.hasOwnProperty(ae)?this._globalTimelineStyles[ae]:p.l3),this._updateStyle(ae,ye)})}applyStylesToKeyframe(){const u=this._pendingStyles,s=Object.keys(u);0!=s.length&&(this._pendingStyles={},s.forEach(m=>{this._currentKeyframe[m]=u[m]}),Object.keys(this._localTimelineStyles).forEach(m=>{this._currentKeyframe.hasOwnProperty(m)||(this._currentKeyframe[m]=this._localTimelineStyles[m])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(u=>{const s=this._localTimelineStyles[u];this._pendingStyles[u]=s,this._updateStyle(u,s)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const u=[];for(let s in this._currentKeyframe)u.push(s);return u}mergeTimelineCollectedStyles(u){Object.keys(u._styleSummary).forEach(s=>{const m=this._styleSummary[s],k=u._styleSummary[s];(!m||k.time>m.time)&&this._updateStyle(s,k.value)})}buildKeyframes(){this.applyStylesToKeyframe();const u=new Set,s=new Set,m=1===this._keyframes.size&&0===this.duration;let k=[];this._keyframes.forEach((ae,ye)=>{const ke=Qe(ae,!0);Object.keys(ke).forEach(Ve=>{const Je=ke[Ve];Je==p.k1?u.add(Ve):Je==p.l3&&s.add(Ve)}),m||(ke.offset=ye/this.duration),k.push(ke)});const z=u.size?pr(u.values()):[],te=s.size?pr(s.values()):[];if(m){const ae=k[0],ye=Te(ae);ae.offset=0,ye.offset=1,k=[ae,ye]}return jr(this.element,k,z,te,this.duration,this.startTime,this.easing,!1)}}class nt extends Ue{constructor(u,s,m,k,z,te,ae=!1){super(u,s,te.delay),this.keyframes=m,this.preStyleProps=k,this.postStyleProps=z,this._stretchStartingKeyframe=ae,this.timings={duration:te.duration,delay:te.delay,easing:te.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let u=this.keyframes,{delay:s,duration:m,easing:k}=this.timings;if(this._stretchStartingKeyframe&&s){const z=[],te=m+s,ae=s/te,ye=Qe(u[0],!1);ye.offset=0,z.push(ye);const ke=Qe(u[0],!1);ke.offset=Lt(ae),z.push(ke);const Ve=u.length-1;for(let Je=1;Je<=Ve;Je++){let lt=Qe(u[Je],!1);lt.offset=Lt((s+lt.offset*m)/te),z.push(lt)}m=te,s=0,k="",u=z}return jr(this.element,u,this.preStyleProps,this.postStyleProps,m,s,k,!0)}}function Lt(b,u=3){const s=Math.pow(10,u-1);return Math.round(b*s)/s}class rn{}class oa extends rn{normalizePropertyName(u,s){return Vr(u)}normalizeStyleValue(u,s,m,k){let z="";const te=m.toString().trim();if(aa[s]&&0!==m&&"0"!==m)if("number"==typeof m)z="px";else{const ae=m.match(/^[+-]?[\d\.]+([a-z]*)$/);ae&&0==ae[1].length&&k.push(`Please provide a CSS unit value for ${u}:${m}`)}return te+z}}const aa=(()=>function(b){const u={};return b.forEach(s=>u[s]=!0),u}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ys(b,u,s,m,k,z,te,ae,ye,ke,Ve,Je,lt){return{type:0,element:b,triggerName:u,isRemovalTransition:k,fromState:s,fromStyles:z,toState:m,toStyles:te,timelines:ae,queriedElements:ye,preStyleProps:ke,postStyleProps:Ve,totalTime:Je,errors:lt}}const ts={};class rs{constructor(u,s,m){this._triggerName=u,this.ast=s,this._stateStyles=m}match(u,s,m,k){return function(b,u,s,m,k){return b.some(z=>z(u,s,m,k))}(this.ast.matchers,u,s,m,k)}buildStyles(u,s,m){const k=this._stateStyles["*"],z=this._stateStyles[u],te=k?k.buildStyles(s,m):{};return z?z.buildStyles(s,m):te}build(u,s,m,k,z,te,ae,ye,ke,Ve){const Je=[],lt=this.ast.options&&this.ast.options.params||ts,ot=this.buildStyles(m,ae&&ae.params||ts,Je),ht=ye&&ye.params||ts,At=this.buildStyles(k,ht,Je),Gt=new Set,qt=new Map,gr=new Map,fr="void"===k,Dn={params:{...lt,...ht}},Yr=Ve?[]:Ae(u,s,this.ast.animation,z,te,ot,At,Dn,ke,Je);let wr=0;if(Yr.forEach(An=>{wr=Math.max(An.duration+An.delay,wr)}),Je.length)return Ys(s,this._triggerName,m,k,fr,ot,At,[],[],qt,gr,wr,Je);Yr.forEach(An=>{const On=An.element,tu=T(qt,On,{});An.preStyleProps.forEach(Xn=>tu[Xn]=!0);const Jn=T(gr,On,{});An.postStyleProps.forEach(Xn=>Jn[Xn]=!0),On!==s&&Gt.add(On)});const dn=pr(Gt.values());return Ys(s,this._triggerName,m,k,fr,ot,At,Yr,dn,qt,gr,wr)}}class Js{constructor(u,s,m){this.styles=u,this.defaultParams=s,this.normalizer=m}buildStyles(u,s){const m={},k=Te(this.defaultParams);return Object.keys(u).forEach(z=>{const te=u[z];null!=te&&(k[z]=te)}),this.styles.styles.forEach(z=>{if("string"!=typeof z){const te=z;Object.keys(te).forEach(ae=>{let ye=te[ae];ye.length>1&&(ye=cr(ye,k,s));const ke=this.normalizer.normalizePropertyName(ae,s);ye=this.normalizer.normalizeStyleValue(ae,ke,ye,s),m[ke]=ye})}}),m}}class ua{constructor(u,s,m){this.name=u,this.ast=s,this._normalizer=m,this.transitionFactories=[],this.states={},s.states.forEach(k=>{this.states[k.name]=new Js(k.style,k.options&&k.options.params||{},m)}),is(this.states,"true","1"),is(this.states,"false","0"),s.transitions.forEach(k=>{this.transitionFactories.push(new rs(u,k,this.states))}),this.fallbackTransition=function(b,u,s){return new rs(b,{type:1,animation:{type:2,steps:[],options:null},matchers:[(te,ae)=>!0],options:null,queryCount:0,depCount:0},u)}(u,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(u,s,m,k){return this.transitionFactories.find(te=>te.match(u,s,m,k))||null}matchStyles(u,s,m){return this.fallbackTransition.buildStyles(u,s,m)}}function is(b,u,s){b.hasOwnProperty(u)?b.hasOwnProperty(s)||(b[s]=b[u]):b.hasOwnProperty(s)&&(b[u]=b[s])}const Xs=new ni;class qs{constructor(u,s,m){this.bodyNode=u,this._driver=s,this._normalizer=m,this._animations={},this._playersById={},this.players=[]}register(u,s){const m=[],k=Di(this._driver,s,m);if(m.length)throw new Error(`Unable to build the animation due to the following errors: ${m.join("\n")}`);this._animations[u]=k}_buildPlayer(u,s,m){const k=u.element,z=M(0,this._normalizer,0,u.keyframes,s,m);return this._driver.animate(k,z,u.duration,u.delay,u.easing,[],!0)}create(u,s,m={}){const k=[],z=this._animations[u];let te;const ae=new Map;if(z?(te=Ae(this._driver,s,z,G,X,{},{},m,Xs,k),te.forEach(Ve=>{const Je=T(ae,Ve.element,{});Ve.postStyleProps.forEach(lt=>Je[lt]=null)})):(k.push("The requested animation doesn't exist or has already been destroyed"),te=[]),k.length)throw new Error(`Unable to create the animation due to the following errors: ${k.join("\n")}`);ae.forEach((Ve,Je)=>{Object.keys(Ve).forEach(lt=>{Ve[lt]=this._driver.computeStyle(Je,lt,p.l3)})});const ke=F(te.map(Ve=>{const Je=ae.get(Ve.element);return this._buildPlayer(Ve,{},Je)}));return this._playersById[u]=ke,ke.onDestroy(()=>this.destroy(u)),this.players.push(ke),ke}destroy(u){const s=this._getPlayer(u);s.destroy(),delete this._playersById[u];const m=this.players.indexOf(s);m>=0&&this.players.splice(m,1)}_getPlayer(u){const s=this._playersById[u];if(!s)throw new Error(`Unable to find the timeline player referenced by ${u}`);return s}listen(u,s,m,k){const z=w(s,"","","");return I(this._getPlayer(u),m,z,k),()=>{}}command(u,s,m,k){if("register"==m)return void this.register(u,k[0]);if("create"==m)return void this.create(u,s,k[0]||{});const z=this._getPlayer(u);switch(m){case"play":z.play();break;case"pause":z.pause();break;case"reset":z.reset();break;case"restart":z.restart();break;case"finish":z.finish();break;case"init":z.init();break;case"setPosition":z.setPosition(parseFloat(k[0]));break;case"destroy":this.destroy(u)}}}const eo="ng-animate-queued",to="ng-animate-disabled",no=[],si={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},gn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ur="__ng_removed";class ss{constructor(u,s=""){this.namespaceId=s;const m=u&&u.hasOwnProperty("value");if(this.value=(m?u.value:u)??null,m){const z=Te(u);delete z.value,this.options=z}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(u){const s=u.params;if(s){const m=this.options.params;Object.keys(s).forEach(k=>{null==m[k]&&(m[k]=s[k])})}}}const yn="void",oi=new ss(yn);class fa{constructor(u,s,m){this.id=u,this.hostElement=s,this._engine=m,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+u,Dr(s,this._hostClassName)}listen(u,s,m,k){if(!this._triggers.hasOwnProperty(s))throw new Error(`Unable to listen on the animation trigger event "${m}" because the animation trigger "${s}" doesn't exist!`);if(null==m||0==m.length)throw new Error(`Unable to listen on the animation trigger "${s}" because the provided event is undefined!`);if("start"!=(b=m)&&"done"!=b)throw new Error(`The provided animation trigger event "${m}" for the animation trigger "${s}" is not supported!`);var b;const z=T(this._elementListeners,u,[]),te={name:s,phase:m,callback:k};z.push(te);const ae=T(this._engine.statesByElement,u,{});return ae.hasOwnProperty(s)||(Dr(u,H),Dr(u,H+"-"+s),ae[s]=oi),()=>{this._engine.afterFlush(()=>{const ye=z.indexOf(te);ye>=0&&z.splice(ye,1),this._triggers[s]||delete ae[s]})}}register(u,s){return!this._triggers[u]&&(this._triggers[u]=s,!0)}_getTrigger(u){const s=this._triggers[u];if(!s)throw new Error(`The provided animation trigger "${u}" has not been registered!`);return s}trigger(u,s,m,k=!0){const z=this._getTrigger(s),te=new os(this.id,s,u);let ae=this._engine.statesByElement.get(u);ae||(Dr(u,H),Dr(u,H+"-"+s),this._engine.statesByElement.set(u,ae={}));let ye=ae[s];const ke=new ss(m,this.id);if(!(m&&m.hasOwnProperty("value"))&&ye&&ke.absorbOptions(ye.options),ae[s]=ke,ye||(ye=oi),ke.value!==yn&&ye.value===ke.value){if(!function(b,u){const s=Object.keys(b),m=Object.keys(u);if(s.length!=m.length)return!1;for(let k=0;k<s.length;k++){const z=s[k];if(!u.hasOwnProperty(z)||b[z]!==u[z])return!1}return!0}(ye.params,ke.params)){const ht=[],At=z.matchStyles(ye.value,ye.params,ht),Gt=z.matchStyles(ke.value,ke.params,ht);ht.length?this._engine.reportError(ht):this._engine.afterFlush(()=>{wt(u,At),ct(u,Gt)})}return}const lt=T(this._engine.playersByElement,u,[]);lt.forEach(ht=>{ht.namespaceId==this.id&&ht.triggerName==s&&ht.queued&&ht.destroy()});let Dt=z.matchTransition(ye.value,ke.value,u,ke.params),ot=!1;if(!Dt){if(!k)return;Dt=z.fallbackTransition,ot=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:u,triggerName:s,transition:Dt,fromState:ye,toState:ke,player:te,isFallbackTransition:ot}),ot||(Dr(u,eo),te.onStart(()=>{Bn(u,eo)})),te.onDone(()=>{let ht=this.players.indexOf(te);ht>=0&&this.players.splice(ht,1);const At=this._engine.playersByElement.get(u);if(At){let Gt=At.indexOf(te);Gt>=0&&At.splice(Gt,1)}}),this.players.push(te),lt.push(te),te}deregister(u){delete this._triggers[u],this._engine.statesByElement.forEach((s,m)=>{delete s[u]}),this._elementListeners.forEach((s,m)=>{this._elementListeners.set(m,s.filter(k=>k.name!=u))})}clearElementCache(u){this._engine.statesByElement.delete(u),this._elementListeners.delete(u);const s=this._engine.playersByElement.get(u);s&&(s.forEach(m=>m.destroy()),this._engine.playersByElement.delete(u))}_signalRemovalForInnerTriggers(u,s){const m=this._engine.driver.query(u,ie,!0);m.forEach(k=>{if(k[ur])return;const z=this._engine.fetchNamespacesByElement(k);z.size?z.forEach(te=>te.triggerLeaveAnimation(k,s,!1,!0)):this.clearElementCache(k)}),this._engine.afterFlushAnimationsDone(()=>m.forEach(k=>this.clearElementCache(k)))}triggerLeaveAnimation(u,s,m,k){const z=this._engine.statesByElement.get(u);if(z){const te=[];if(Object.keys(z).forEach(ae=>{if(this._triggers[ae]){const ye=this.trigger(u,ae,yn,k);ye&&te.push(ye)}}),te.length)return this._engine.markElementAsRemoved(this.id,u,!0,s),m&&F(te).onDone(()=>this._engine.processLeaveNode(u)),!0}return!1}prepareLeaveAnimationListeners(u){const s=this._elementListeners.get(u),m=this._engine.statesByElement.get(u);if(s&&m){const k=new Set;s.forEach(z=>{const te=z.name;if(k.has(te))return;k.add(te);const ye=this._triggers[te].fallbackTransition,ke=m[te]||oi,Ve=new ss(yn),Je=new os(this.id,te,u);this._engine.totalQueuedPlayers++,this._queue.push({element:u,triggerName:te,transition:ye,fromState:ke,toState:Ve,player:Je,isFallbackTransition:!0})})}}removeNode(u,s){const m=this._engine;if(u.childElementCount&&this._signalRemovalForInnerTriggers(u,s),this.triggerLeaveAnimation(u,s,!0))return;let k=!1;if(m.totalAnimations){const z=m.players.length?m.playersByQueriedElement.get(u):[];if(z&&z.length)k=!0;else{let te=u;for(;te=te.parentNode;)if(m.statesByElement.get(te)){k=!0;break}}}if(this.prepareLeaveAnimationListeners(u),k)m.markElementAsRemoved(this.id,u,!1,s);else{const z=u[ur];(!z||z===si)&&(m.afterFlush(()=>this.clearElementCache(u)),m.destroyInnerAnimations(u),m._onRemovalComplete(u,s))}}insertNode(u,s){Dr(u,this._hostClassName)}drainQueuedTransitions(u){const s=[];return this._queue.forEach(m=>{const k=m.player;if(k.destroyed)return;const z=m.element,te=this._elementListeners.get(z);te&&te.forEach(ae=>{if(ae.name==m.triggerName){const ye=w(z,m.triggerName,m.fromState.value,m.toState.value);ye._data=u,I(m.player,ae.phase,ye,ae.callback)}}),k.markedForDestroy?this._engine.afterFlush(()=>{k.destroy()}):s.push(m)}),this._queue=[],s.sort((m,k)=>{const z=m.transition.ast.depCount,te=k.transition.ast.depCount;return 0==z||0==te?z-te:this._engine.driver.containsElement(m.element,k.element)?1:-1})}destroy(u){this.players.forEach(s=>s.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,u)}elementContainsData(u){let s=!1;return this._elementListeners.has(u)&&(s=!0),s=!!this._queue.find(m=>m.element===u)||s,s}}class io{constructor(u,s,m){this.bodyNode=u,this.driver=s,this._normalizer=m,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(k,z)=>{}}_onRemovalComplete(u,s){this.onRemovalComplete(u,s)}get queuedPlayers(){const u=[];return this._namespaceList.forEach(s=>{s.players.forEach(m=>{m.queued&&u.push(m)})}),u}createNamespace(u,s){const m=new fa(u,s,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,s)?this._balanceNamespaceList(m,s):(this.newHostElements.set(s,m),this.collectEnterElement(s)),this._namespaceLookup[u]=m}_balanceNamespaceList(u,s){const m=this._namespaceList.length-1;if(m>=0){let k=!1;for(let z=m;z>=0;z--)if(this.driver.containsElement(this._namespaceList[z].hostElement,s)){this._namespaceList.splice(z+1,0,u),k=!0;break}k||this._namespaceList.splice(0,0,u)}else this._namespaceList.push(u);return this.namespacesByHostElement.set(s,u),u}register(u,s){let m=this._namespaceLookup[u];return m||(m=this.createNamespace(u,s)),m}registerTrigger(u,s,m){let k=this._namespaceLookup[u];k&&k.register(s,m)&&this.totalAnimations++}destroy(u,s){if(!u)return;const m=this._fetchNamespace(u);this.afterFlush(()=>{this.namespacesByHostElement.delete(m.hostElement),delete this._namespaceLookup[u];const k=this._namespaceList.indexOf(m);k>=0&&this._namespaceList.splice(k,1)}),this.afterFlushAnimationsDone(()=>m.destroy(s))}_fetchNamespace(u){return this._namespaceLookup[u]}fetchNamespacesByElement(u){const s=new Set,m=this.statesByElement.get(u);if(m){const k=Object.keys(m);for(let z=0;z<k.length;z++){const te=m[k[z]].namespaceId;if(te){const ae=this._fetchNamespace(te);ae&&s.add(ae)}}}return s}trigger(u,s,m,k){if(ai(s)){const z=this._fetchNamespace(u);if(z)return z.trigger(s,m,k),!0}return!1}insertNode(u,s,m,k){if(!ai(s))return;const z=s[ur];if(z&&z.setForRemoval){z.setForRemoval=!1,z.setForMove=!0;const te=this.collectedLeaveElements.indexOf(s);te>=0&&this.collectedLeaveElements.splice(te,1)}if(u){const te=this._fetchNamespace(u);te&&te.insertNode(s,m)}k&&this.collectEnterElement(s)}collectEnterElement(u){this.collectedEnterElements.push(u)}markElementAsDisabled(u,s){s?this.disabledNodes.has(u)||(this.disabledNodes.add(u),Dr(u,to)):this.disabledNodes.has(u)&&(this.disabledNodes.delete(u),Bn(u,to))}removeNode(u,s,m,k){if(ai(s)){const z=u?this._fetchNamespace(u):null;if(z?z.removeNode(s,k):this.markElementAsRemoved(u,s,!1,k),m){const te=this.namespacesByHostElement.get(s);te&&te.id!==u&&te.removeNode(s,k)}}else this._onRemovalComplete(s,k)}markElementAsRemoved(u,s,m,k){this.collectedLeaveElements.push(s),s[ur]={namespaceId:u,setForRemoval:k,hasAnimation:m,removedBeforeQueried:!1}}listen(u,s,m,k,z){return ai(s)?this._fetchNamespace(u).listen(s,m,k,z):()=>{}}_buildInstruction(u,s,m,k,z){return u.transition.build(this.driver,u.element,u.fromState.value,u.toState.value,m,k,u.fromState.options,u.toState.options,s,z)}destroyInnerAnimations(u){let s=this.driver.query(u,ie,!0);s.forEach(m=>this.destroyActiveAnimationsForElement(m)),0!=this.playersByQueriedElement.size&&(s=this.driver.query(u,Be,!0),s.forEach(m=>this.finishActiveQueriedAnimationOnElement(m)))}destroyActiveAnimationsForElement(u){const s=this.playersByElement.get(u);s&&s.forEach(m=>{m.queued?m.markedForDestroy=!0:m.destroy()})}finishActiveQueriedAnimationOnElement(u){const s=this.playersByQueriedElement.get(u);s&&s.forEach(m=>m.finish())}whenRenderingDone(){return new Promise(u=>{if(this.players.length)return F(this.players).onDone(()=>u());u()})}processLeaveNode(u){const s=u[ur];if(s&&s.setForRemoval){if(u[ur]=si,s.namespaceId){this.destroyInnerAnimations(u);const m=this._fetchNamespace(s.namespaceId);m&&m.clearElementCache(u)}this._onRemovalComplete(u,s.setForRemoval)}u.classList?.contains(to)&&this.markElementAsDisabled(u,!1),this.driver.query(u,".ng-animate-disabled",!0).forEach(m=>{this.markElementAsDisabled(m,!1)})}flush(u=-1){let s=[];if(this.newHostElements.size&&(this.newHostElements.forEach((m,k)=>this._balanceNamespaceList(m,k)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let m=0;m<this.collectedEnterElements.length;m++)Dr(this.collectedEnterElements[m],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const m=[];try{s=this._flushAnimations(m,u)}finally{for(let k=0;k<m.length;k++)m[k]()}}else for(let m=0;m<this.collectedLeaveElements.length;m++)this.processLeaveNode(this.collectedLeaveElements[m]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(m=>m()),this._flushFns=[],this._whenQuietFns.length){const m=this._whenQuietFns;this._whenQuietFns=[],s.length?F(s).onDone(()=>{m.forEach(k=>k())}):m.forEach(k=>k())}}reportError(u){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${u.join("\n")}`)}_flushAnimations(u,s){const m=new ni,k=[],z=new Map,te=[],ae=new Map,ye=new Map,ke=new Map,Ve=new Set;this.disabledNodes.forEach(tt=>{Ve.add(tt);const ft=this.driver.query(tt,".ng-animate-queued",!0);for(let _t=0;_t<ft.length;_t++)Ve.add(ft[_t])});const Je=this.bodyNode,lt=Array.from(this.statesByElement.keys()),Dt=so(lt,this.collectedEnterElements),ot=new Map;let ht=0;Dt.forEach((tt,ft)=>{const _t=G+ht++;ot.set(ft,_t),tt.forEach(Bt=>Dr(Bt,_t))});const At=[],Gt=new Set,qt=new Set;for(let tt=0;tt<this.collectedLeaveElements.length;tt++){const ft=this.collectedLeaveElements[tt],_t=ft[ur];_t&&_t.setForRemoval&&(At.push(ft),Gt.add(ft),_t.hasAnimation?this.driver.query(ft,".ng-star-inserted",!0).forEach(Bt=>Gt.add(Bt)):qt.add(ft))}const gr=new Map,fr=so(lt,Array.from(Gt));fr.forEach((tt,ft)=>{const _t=X+ht++;gr.set(ft,_t),tt.forEach(Bt=>Dr(Bt,_t))}),u.push(()=>{Dt.forEach((tt,ft)=>{const _t=ot.get(ft);tt.forEach(Bt=>Bn(Bt,_t))}),fr.forEach((tt,ft)=>{const _t=gr.get(ft);tt.forEach(Bt=>Bn(Bt,_t))}),At.forEach(tt=>{this.processLeaveNode(tt)})});const Dn=[],Yr=[];for(let tt=this._namespaceList.length-1;tt>=0;tt--)this._namespaceList[tt].drainQueuedTransitions(s).forEach(_t=>{const Bt=_t.player,or=_t.element;if(Dn.push(Bt),this.collectedEnterElements.length){const Nr=or[ur];if(Nr&&Nr.setForMove)return void Bt.destroy()}const Jr=!Je||!this.driver.containsElement(Je,or),Tr=gr.get(or),Pn=ot.get(or),Yt=this._buildInstruction(_t,m,Pn,Tr,Jr);if(Yt.errors&&Yt.errors.length)return void Yr.push(Yt);if(Jr)return Bt.onStart(()=>wt(or,Yt.fromStyles)),Bt.onDestroy(()=>ct(or,Yt.toStyles)),void k.push(Bt);if(_t.isFallbackTransition)return Bt.onStart(()=>wt(or,Yt.fromStyles)),Bt.onDestroy(()=>ct(or,Yt.toStyles)),void k.push(Bt);const Wo=[];Yt.timelines.forEach(Nr=>{Nr.stretchStartingKeyframe=!0,this.disabledNodes.has(Nr.element)||Wo.push(Nr)}),Yt.timelines=Wo,m.append(or,Yt.timelines),te.push({instruction:Yt,player:Bt,element:or}),Yt.queriedElements.forEach(Nr=>T(ae,Nr,[]).push(Bt)),Yt.preStyleProps.forEach((Nr,Hi)=>{const Us=Object.keys(Nr);if(Us.length){let In=ye.get(Hi);In||ye.set(Hi,In=new Set),Us.forEach(Vi=>In.add(Vi))}}),Yt.postStyleProps.forEach((Nr,Hi)=>{const Us=Object.keys(Nr);let In=ke.get(Hi);In||ke.set(Hi,In=new Set),Us.forEach(Vi=>In.add(Vi))})});if(Yr.length){const tt=[];Yr.forEach(ft=>{tt.push(`@${ft.triggerName} has failed due to:\n`),ft.errors.forEach(_t=>tt.push(`- ${_t}\n`))}),Dn.forEach(ft=>ft.destroy()),this.reportError(tt)}const wr=new Map,dn=new Map;te.forEach(tt=>{const ft=tt.element;m.has(ft)&&(dn.set(ft,ft),this._beforeAnimationBuild(tt.player.namespaceId,tt.instruction,wr))}),k.forEach(tt=>{const ft=tt.element;this._getPreviousPlayers(ft,!1,tt.namespaceId,tt.triggerName,null).forEach(Bt=>{T(wr,ft,[]).push(Bt),Bt.destroy()})});const An=At.filter(tt=>ga(tt,ye,ke)),On=new Map;us(On,this.driver,qt,ke,p.l3).forEach(tt=>{ga(tt,ye,ke)&&An.push(tt)});const Jn=new Map;Dt.forEach((tt,ft)=>{us(Jn,this.driver,new Set(tt),ye,p.k1)}),An.forEach(tt=>{const ft=On.get(tt),_t=Jn.get(tt);On.set(tt,{...ft,..._t})});const Xn=[],ru=[],Uu={};te.forEach(tt=>{const{element:ft,player:_t,instruction:Bt}=tt;if(m.has(ft)){if(Ve.has(ft))return _t.onDestroy(()=>ct(ft,Bt.toStyles)),_t.disabled=!0,_t.overrideTotalTime(Bt.totalTime),void k.push(_t);let or=Uu;if(dn.size>1){let Tr=ft;const Pn=[];for(;Tr=Tr.parentNode;){const Yt=dn.get(Tr);if(Yt){or=Yt;break}Pn.push(Tr)}Pn.forEach(Yt=>dn.set(Yt,or))}const Jr=this._buildAnimation(_t.namespaceId,Bt,wr,z,Jn,On);if(_t.setRealPlayer(Jr),or===Uu)Xn.push(_t);else{const Tr=this.playersByElement.get(or);Tr&&Tr.length&&(_t.parentPlayer=F(Tr)),k.push(_t)}}else wt(ft,Bt.fromStyles),_t.onDestroy(()=>ct(ft,Bt.toStyles)),ru.push(_t),Ve.has(ft)&&k.push(_t)}),ru.forEach(tt=>{const ft=z.get(tt.element);if(ft&&ft.length){const _t=F(ft);tt.setRealPlayer(_t)}}),k.forEach(tt=>{tt.parentPlayer?tt.syncPlayerEvents(tt.parentPlayer):tt.destroy()});for(let tt=0;tt<At.length;tt++){const ft=At[tt],_t=ft[ur];if(Bn(ft,X),_t&&_t.hasAnimation)continue;let Bt=[];if(ae.size){let Jr=ae.get(ft);Jr&&Jr.length&&Bt.push(...Jr);let Tr=this.driver.query(ft,Be,!0);for(let Pn=0;Pn<Tr.length;Pn++){let Yt=ae.get(Tr[Pn]);Yt&&Yt.length&&Bt.push(...Yt)}}const or=Bt.filter(Jr=>!Jr.destroyed);or.length?ma(this,ft,or):this.processLeaveNode(ft)}return At.length=0,Xn.forEach(tt=>{this.players.push(tt),tt.onDone(()=>{tt.destroy();const ft=this.players.indexOf(tt);this.players.splice(ft,1)}),tt.play()}),Xn}elementContainsData(u,s){let m=!1;const k=s[ur];return k&&k.setForRemoval&&(m=!0),this.playersByElement.has(s)&&(m=!0),this.playersByQueriedElement.has(s)&&(m=!0),this.statesByElement.has(s)&&(m=!0),this._fetchNamespace(u).elementContainsData(s)||m}afterFlush(u){this._flushFns.push(u)}afterFlushAnimationsDone(u){this._whenQuietFns.push(u)}_getPreviousPlayers(u,s,m,k,z){let te=[];if(s){const ae=this.playersByQueriedElement.get(u);ae&&(te=ae)}else{const ae=this.playersByElement.get(u);if(ae){const ye=!z||z==yn;ae.forEach(ke=>{ke.queued||!ye&&ke.triggerName!=k||te.push(ke)})}}return(m||k)&&(te=te.filter(ae=>!(m&&m!=ae.namespaceId||k&&k!=ae.triggerName))),te}_beforeAnimationBuild(u,s,m){const z=s.element,te=s.isRemovalTransition?void 0:u,ae=s.isRemovalTransition?void 0:s.triggerName;for(const ye of s.timelines){const ke=ye.element,Ve=ke!==z,Je=T(m,ke,[]);this._getPreviousPlayers(ke,Ve,te,ae,s.toState).forEach(Dt=>{const ot=Dt.getRealPlayer();ot.beforeDestroy&&ot.beforeDestroy(),Dt.destroy(),Je.push(Dt)})}wt(z,s.fromStyles)}_buildAnimation(u,s,m,k,z,te){const ae=s.triggerName,ye=s.element,ke=[],Ve=new Set,Je=new Set,lt=s.timelines.map(ot=>{const ht=ot.element;Ve.add(ht);const At=ht[ur];if(At&&At.removedBeforeQueried)return new p.ZN(ot.duration,ot.delay);const Gt=ht!==ye,qt=function(b){const u=[];return nn(b,u),u}((m.get(ht)||no).map(wr=>wr.getRealPlayer())).filter(wr=>!!wr.element&&wr.element===ht),gr=z.get(ht),fr=te.get(ht),Dn=M(0,this._normalizer,0,ot.keyframes,gr,fr),Yr=this._buildPlayer(ot,Dn,qt);if(ot.subTimeline&&k&&Je.add(ht),Gt){const wr=new os(u,ae,ht);wr.setRealPlayer(Yr),ke.push(wr)}return Yr});ke.forEach(ot=>{T(this.playersByQueriedElement,ot.element,[]).push(ot),ot.onDone(()=>function(b,u,s){let m;if(b instanceof Map){if(m=b.get(u),m){if(m.length){const k=m.indexOf(s);m.splice(k,1)}0==m.length&&b.delete(u)}}else if(m=b[u],m){if(m.length){const k=m.indexOf(s);m.splice(k,1)}0==m.length&&delete b[u]}return m}(this.playersByQueriedElement,ot.element,ot))}),Ve.forEach(ot=>Dr(ot,we));const Dt=F(lt);return Dt.onDestroy(()=>{Ve.forEach(ot=>Bn(ot,we)),ct(ye,s.toStyles)}),Je.forEach(ot=>{T(k,ot,[]).push(Dt)}),Dt}_buildPlayer(u,s,m){return s.length>0?this.driver.animate(u.element,s,u.duration,u.delay,u.easing,m):new p.ZN(u.duration,u.delay)}}class os{constructor(u,s,m){this.namespaceId=u,this.triggerName=s,this.element=m,this._player=new p.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(u){this._containsRealPlayer||(this._player=u,Object.keys(this._queuedCallbacks).forEach(s=>{this._queuedCallbacks[s].forEach(m=>I(u,s,void 0,m))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(u.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(u){this.totalTime=u}syncPlayerEvents(u){const s=this._player;s.triggerCallback&&u.onStart(()=>s.triggerCallback("start")),u.onDone(()=>this.finish()),u.onDestroy(()=>this.destroy())}_queueEvent(u,s){T(this._queuedCallbacks,u,[]).push(s)}onDone(u){this.queued&&this._queueEvent("done",u),this._player.onDone(u)}onStart(u){this.queued&&this._queueEvent("start",u),this._player.onStart(u)}onDestroy(u){this.queued&&this._queueEvent("destroy",u),this._player.onDestroy(u)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(u){this.queued||this._player.setPosition(u)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(u){const s=this._player;s.triggerCallback&&s.triggerCallback(u)}}function ai(b){return b&&1===b.nodeType}function as(b,u){const s=b.style.display;return b.style.display=u??"none",s}function us(b,u,s,m,k){const z=[];s.forEach(ye=>z.push(as(ye)));const te=[];m.forEach((ye,ke)=>{const Ve={};ye.forEach(Je=>{const lt=Ve[Je]=u.computeStyle(ke,Je,k);(!lt||0==lt.length)&&(ke[ur]=gn,te.push(ke))}),b.set(ke,Ve)});let ae=0;return s.forEach(ye=>as(ye,z[ae++])),te}function so(b,u){const s=new Map;if(b.forEach(ae=>s.set(ae,[])),0==u.length)return s;const k=new Set(u),z=new Map;function te(ae){if(!ae)return 1;let ye=z.get(ae);if(ye)return ye;const ke=ae.parentNode;return ye=s.has(ke)?ke:k.has(ke)?1:te(ke),z.set(ae,ye),ye}return u.forEach(ae=>{const ye=te(ae);1!==ye&&s.get(ye).push(ae)}),s}function Dr(b,u){b.classList?.add(u)}function Bn(b,u){b.classList?.remove(u)}function ma(b,u,s){F(s).onDone(()=>b.processLeaveNode(u))}function nn(b,u){for(let s=0;s<b.length;s++){const m=b[s];m instanceof p.ZE?nn(m.players,u):u.push(m)}}function ga(b,u,s){const m=s.get(b);if(!m)return!1;let k=u.get(b);return k?m.forEach(z=>k.add(z)):u.set(b,m),s.delete(b),!0}class ui{constructor(u,s,m){this.bodyNode=u,this._driver=s,this._normalizer=m,this._triggerCache={},this.onRemovalComplete=(k,z)=>{},this._transitionEngine=new io(u,s,m),this._timelineEngine=new qs(u,s,m),this._transitionEngine.onRemovalComplete=(k,z)=>this.onRemovalComplete(k,z)}registerTrigger(u,s,m,k,z){const te=u+"-"+k;let ae=this._triggerCache[te];if(!ae){const ye=[],ke=Di(this._driver,z,ye);if(ye.length)throw new Error(`The animation trigger "${k}" has failed to build due to the following errors:\n - ${ye.join("\n - ")}`);ae=function(b,u,s){return new ua(b,u,s)}(k,ke,this._normalizer),this._triggerCache[te]=ae}this._transitionEngine.registerTrigger(s,k,ae)}register(u,s){this._transitionEngine.register(u,s)}destroy(u,s){this._transitionEngine.destroy(u,s)}onInsert(u,s,m,k){this._transitionEngine.insertNode(u,s,m,k)}onRemove(u,s,m,k){this._transitionEngine.removeNode(u,s,k||!1,m)}disableAnimations(u,s){this._transitionEngine.markElementAsDisabled(u,s)}process(u,s,m,k){if("@"==m.charAt(0)){const[z,te]=P(m);this._timelineEngine.command(z,s,te,k)}else this._transitionEngine.trigger(u,s,m,k)}listen(u,s,m,k,z){if("@"==m.charAt(0)){const[te,ae]=P(m);return this._timelineEngine.listen(te,s,ae,z)}return this._transitionEngine.listen(u,s,m,k,z)}flush(u=-1){this._transitionEngine.flush(u)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function oo(b,u){let s=null,m=null;return Array.isArray(u)&&u.length?(s=Oi(u[0]),u.length>1&&(m=Oi(u[u.length-1]))):u&&(s=Oi(u)),s||m?new ya(b,s,m):null}let ya=(()=>{class b{constructor(s,m,k){this._element=s,this._startStyles=m,this._endStyles=k,this._state=0;let z=b.initialStylesByElement.get(s);z||b.initialStylesByElement.set(s,z={}),this._initialStyles=z}start(){this._state<1&&(this._startStyles&&ct(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ct(this._element,this._initialStyles),this._endStyles&&(ct(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(b.initialStylesByElement.delete(this._element),this._startStyles&&(wt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wt(this._element,this._endStyles),this._endStyles=null),ct(this._element,this._initialStyles),this._state=3)}}return b.initialStylesByElement=new WeakMap,b})();function Oi(b){let u=null;const s=Object.keys(b);for(let m=0;m<s.length;m++){const k=s[m];_a(k)&&(u=u||{},u[k]=b[k])}return u}function _a(b){return"display"===b||"position"===b}const uo="animation",co="animationend";class Ea{constructor(u,s,m,k,z,te,ae){this._element=u,this._name=s,this._duration=m,this._delay=k,this._easing=z,this._fillMode=te,this._onDoneFn=ae,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=ye=>this._handleCallback(ye)}apply(){(function(b,u){const s=cs(b,"").trim();let m=0;s.length&&(function(b,u){let s=0;for(let m=0;m<b.length;m++)","===b.charAt(m)&&s++;return s}(s)+1,u=`${s}, ${u}`),Ii(b,"",u)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ho(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){lo(this._element,this._name,"paused")}resume(){lo(this._element,this._name,"running")}setPosition(u){const s=fo(this._element,this._name);this._position=u*this._duration,Ii(this._element,"Delay",`-${this._position}ms`,s)}getPosition(){return this._position}_handleCallback(u){const s=u._ngTestManualTimestamp||Date.now(),m=1e3*parseFloat(u.elapsedTime.toFixed(3));u.animationName==this._name&&Math.max(s-this._startTime,0)>=this._delay&&m>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ho(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(b,u){const m=cs(b,"").split(","),k=Pi(m,u);k>=0&&(m.splice(k,1),Ii(b,"",m.join(",")))}(this._element,this._name))}}function lo(b,u,s){Ii(b,"PlayState",s,fo(b,u))}function fo(b,u){const s=cs(b,"");return s.indexOf(",")>0?Pi(s.split(","),u):Pi([s],u)}function Pi(b,u){for(let s=0;s<b.length;s++)if(b[s].indexOf(u)>=0)return s;return-1}function ho(b,u,s){s?b.removeEventListener(co,u):b.addEventListener(co,u)}function Ii(b,u,s,m){const k=uo+u;if(null!=m){const z=b.style[k];if(z.length){const te=z.split(",");te[m]=s,s=te.join(",")}}b.style[k]=s}function cs(b,u){return b.style[uo+u]||""}class sn{constructor(u,s,m,k,z,te,ae,ye){this.element=u,this.keyframes=s,this.animationName=m,this._duration=k,this._delay=z,this._finalStyles=ae,this._specialStyles=ye,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=te||"linear",this.totalTime=k+z,this._buildStyler()}onStart(u){this._onStartFns.push(u)}onDone(u){this._onDoneFns.push(u)}onDestroy(u){this._onDestroyFns.push(u)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(u=>u()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(u=>u()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(u=>u()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(u){this._styler.setPosition(u)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ea(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(u){const s="start"==u?this._onStartFns:this._onDoneFns;s.forEach(m=>m()),s.length=0}beforeDestroy(){this.init();const u={};if(this.hasStarted()){const s=this._state>=3;Object.keys(this._finalStyles).forEach(m=>{"offset"!=m&&(u[m]=s?this._finalStyles[m]:en(this.element,m))})}this.currentSnapshot=u}}class mr extends p.ZN{constructor(u,s){super(),this.element=u,this._startingStyles={},this.__initialized=!1,this._styles=Ee(s)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(u=>{this._startingStyles[u]=this.element.style[u]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(u=>this.element.style.setProperty(u,this._styles[u])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(u=>{const s=this._startingStyles[u];s?this.element.style.setProperty(u,s):this.element.style.removeProperty(u)}),this._startingStyles=null,super.destroy())}}class kr{constructor(){this._count=0}validateStyleProperty(u){return v(u)}matchesElement(u,s){return!1}containsElement(u,s){return K(u,s)}query(u,s,m){return ue(u,s,m)}computeStyle(u,s,m){return window.getComputedStyle(u)[s]}buildKeyframeElement(u,s,m){m=m.map(ae=>Ee(ae));let k=`@keyframes ${s} {\n`,z="";m.forEach(ae=>{z=" ";const ye=parseFloat(ae.offset);k+=`${z}${100*ye}% {\n`,z+=" ",Object.keys(ae).forEach(ke=>{const Ve=ae[ke];switch(ke){case"offset":return;case"easing":return void(Ve&&(k+=`${z}animation-timing-function: ${Ve};\n`));default:return void(k+=`${z}${ke}: ${Ve};\n`)}}),k+=`${z}}\n`}),k+="}\n";const te=document.createElement("style");return te.textContent=k,te}animate(u,s,m,k,z,te=[],ae){const ye=te.filter(At=>At instanceof sn),ke={};Rt(m,k)&&ye.forEach(At=>{let Gt=At.currentSnapshot;Object.keys(Gt).forEach(qt=>ke[qt]=Gt[qt])});const Ve=function(b){let u={};return b&&(Array.isArray(b)?b:[b]).forEach(m=>{Object.keys(m).forEach(k=>{"offset"==k||"easing"==k||(u[k]=m[k])})}),u}(s=kt(u,s,ke));if(0==m)return new mr(u,Ve);const Je="gen_css_kf_"+this._count++,lt=this.buildKeyframeElement(u,Je,s);(function(b){const u=b.getRootNode?.();return"undefined"!=typeof ShadowRoot&&u instanceof ShadowRoot?u:document.head})(u).appendChild(lt);const ot=oo(u,s),ht=new sn(u,s,Je,m,k,z,Ve,ot);return ht.onDestroy(()=>{var b;(b=lt).parentNode.removeChild(b)}),ht}}class ci{constructor(u,s,m,k){this.element=u,this.keyframes=s,this.options=m,this._specialStyles=k,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=m.duration,this._delay=m.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(u=>u()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const u=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,u,this.options),this._finalKeyframe=u.length?u[u.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(u,s,m){return u.animate(s,m)}onStart(u){this._onStartFns.push(u)}onDone(u){this._onDoneFns.push(u)}onDestroy(u){this._onDestroyFns.push(u)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(u=>u()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(u=>u()),this._onDestroyFns=[])}setPosition(u){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=u*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const u={};if(this.hasStarted()){const s=this._finalKeyframe;Object.keys(s).forEach(m=>{"offset"!=m&&(u[m]=this._finished?s[m]:en(this.element,m))})}this.currentSnapshot=u}triggerCallback(u){const s="start"==u?this._onStartFns:this._onDoneFns;s.forEach(m=>m()),s.length=0}}class po{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Fn().toString()),this._cssKeyframesDriver=new kr}validateStyleProperty(u){return v(u)}matchesElement(u,s){return!1}containsElement(u,s){return K(u,s)}query(u,s,m){return ue(u,s,m)}computeStyle(u,s,m){return window.getComputedStyle(u)[s]}overrideWebAnimationsSupport(u){this._isNativeImpl=u}animate(u,s,m,k,z,te=[],ae){if(!ae&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(u,s,m,k,z,te);const Ve={duration:m,delay:k,fill:0==k?"both":"forwards"};z&&(Ve.easing=z);const Je={},lt=te.filter(ot=>ot instanceof ci);Rt(m,k)&&lt.forEach(ot=>{let ht=ot.currentSnapshot;Object.keys(ht).forEach(At=>Je[At]=ht[At])});const Dt=oo(u,s=kt(u,s=s.map(ot=>Qe(ot,!1)),Je));return new ci(u,s,Ve,Dt)}}function Fn(){return B()&&Element.prototype.animate||{}}var Lr=l(1457);let Mi=(()=>{class b extends p._j{constructor(s,m){super(),this._nextAnimationId=0,this._renderer=s.createRenderer(m.body,{id:"0",encapsulation:a.ViewEncapsulation.None,styles:[],data:{animation:[]}})}build(s){const m=this._nextAnimationId.toString();this._nextAnimationId++;const k=Array.isArray(s)?(0,p.vP)(s):s;return vo(this._renderer,null,m,"register",[k]),new Da(m,this._renderer)}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275inject(a.RendererFactory2),a.\u0275\u0275inject(Lr.DOCUMENT))},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b})();class Da extends p.LC{constructor(u,s){super(),this._id=u,this._renderer=s}create(u,s){return new mo(this._id,u,s||{},this._renderer)}}class mo{constructor(u,s,m,k){this.id=u,this.element=s,this._renderer=k,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",m)}_listen(u,s){return this._renderer.listen(this.element,`@@${this.id}:${u}`,s)}_command(u,...s){return vo(this._renderer,this.element,this.id,u,s)}onDone(u){this._listen("done",u)}onStart(u){this._listen("start",u)}onDestroy(u){this._listen("destroy",u)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(u){this._command("setPosition",u)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function vo(b,u,s,m,k){return b.setProperty(u,`@@${s}:${m}`,k)}const go="@.disabled";let Aa=(()=>{class b{constructor(s,m,k){this.delegate=s,this.engine=m,this._zone=k,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),m.onRemovalComplete=(z,te)=>{const ae=te?.parentNode(z);ae&&te.removeChild(ae,z)}}createRenderer(s,m){const z=this.delegate.createRenderer(s,m);if(!(s&&m&&m.data&&m.data.animation)){let Ve=this._rendererCache.get(z);return Ve||(Ve=new xi("",z,this.engine),this._rendererCache.set(z,Ve)),Ve}const te=m.id,ae=m.id+"-"+this._currentId;this._currentId++,this.engine.register(ae,s);const ye=Ve=>{Array.isArray(Ve)?Ve.forEach(ye):this.engine.registerTrigger(te,ae,s,Ve.name,Ve)};return m.data.animation.forEach(ye),new ds(this,ae,z,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(s,m,k){s>=0&&s<this._microtaskId?this._zone.run(()=>m(k)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(z=>{const[te,ae]=z;te(ae)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([m,k]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275inject(a.RendererFactory2),a.\u0275\u0275inject(ui),a.\u0275\u0275inject(a.NgZone))},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b})();class xi{constructor(u,s,m){this.namespaceId=u,this.delegate=s,this.engine=m,this.destroyNode=this.delegate.destroyNode?k=>s.destroyNode(k):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(u,s){return this.delegate.createElement(u,s)}createComment(u){return this.delegate.createComment(u)}createText(u){return this.delegate.createText(u)}appendChild(u,s){this.delegate.appendChild(u,s),this.engine.onInsert(this.namespaceId,s,u,!1)}insertBefore(u,s,m,k=!0){this.delegate.insertBefore(u,s,m),this.engine.onInsert(this.namespaceId,s,u,k)}removeChild(u,s,m){this.engine.onRemove(this.namespaceId,s,this.delegate,m)}selectRootElement(u,s){return this.delegate.selectRootElement(u,s)}parentNode(u){return this.delegate.parentNode(u)}nextSibling(u){return this.delegate.nextSibling(u)}setAttribute(u,s,m,k){this.delegate.setAttribute(u,s,m,k)}removeAttribute(u,s,m){this.delegate.removeAttribute(u,s,m)}addClass(u,s){this.delegate.addClass(u,s)}removeClass(u,s){this.delegate.removeClass(u,s)}setStyle(u,s,m,k){this.delegate.setStyle(u,s,m,k)}removeStyle(u,s,m){this.delegate.removeStyle(u,s,m)}setProperty(u,s,m){"@"==s.charAt(0)&&s==go?this.disableAnimations(u,!!m):this.delegate.setProperty(u,s,m)}setValue(u,s){this.delegate.setValue(u,s)}listen(u,s,m){return this.delegate.listen(u,s,m)}disableAnimations(u,s){this.engine.disableAnimations(u,s)}}class ds extends xi{constructor(u,s,m,k){super(s,m,k),this.factory=u,this.namespaceId=s}setProperty(u,s,m){"@"==s.charAt(0)?"."==s.charAt(1)&&s==go?this.disableAnimations(u,m=void 0===m||!!m):this.engine.process(this.namespaceId,u,s.substr(1),m):this.delegate.setProperty(u,s,m)}listen(u,s,m){if("@"==s.charAt(0)){const k=function(b){switch(b){case"body":return document.body;case"document":return document;case"window":return window;default:return b}}(u);let z=s.substr(1),te="";return"@"!=z.charAt(0)&&([z,te]=function(b){const u=b.indexOf(".");return[b.substring(0,u),b.substr(u+1)]}(z)),this.engine.listen(this.namespaceId,k,z,te,ae=>{this.factory.scheduleListenerCallback(ae._data||-1,m,ae)})}return this.delegate.listen(u,s,m)}}let Pa=(()=>{class b extends ui{constructor(s,m,k){super(s.body,m,k)}ngOnDestroy(){this.flush()}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275inject(Lr.DOCUMENT),a.\u0275\u0275inject(pe),a.\u0275\u0275inject(rn))},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b})();const ki=new a.InjectionToken("AnimationModuleType"),ps=[{provide:p._j,useClass:Mi},{provide:rn,useFactory:function(){return new oa}},{provide:ui,useClass:Pa},{provide:a.RendererFactory2,useFactory:function(b,u,s){return new Aa(b,u,s)},deps:[g.se,ui,a.NgZone]}],ms=[{provide:pe,useFactory:function(){return"function"==typeof Fn()?new po:new kr}},{provide:ki,useValue:"BrowserAnimations"},...ps],_o=[{provide:pe,useClass:ge},{provide:ki,useValue:"NoopAnimations"},...ps];let bo=(()=>{class b{static withConfig(s){return{ngModule:b,providers:s.disableAnimations?_o:ms}}}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({providers:ms,imports:[g.b2]}),b})();var rr=l(442);const Li={properties:{id:{type:"string",description:"Id"},name:{type:"string",description:"Name"},shortName:{type:"string",description:"Short name"},description:{type:"string",description:"Description"},startUrl:{type:"string",description:"Start url"},icons:{type:"array",description:"Icons",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"}},required:["src","sizes","type"]}},themeColor:{type:"string",description:"Theme color"},backgroundColor:{type:"string",description:"Background color"},screenshots:{type:"array",description:"Screenshots",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"},platform:{type:"string",description:"Platform"},label:{type:"string",description:"Label"}},required:["src","sizes","type","platform","label"]}},iarcRatingId:{type:"string",description:"IARC rating id"},categories:{type:"array",description:"Categories",items:{type:"string",description:"Category"}},additionalProperties:{type:"object",description:"Additional properties",properties:{permissions:{type:"array",description:"Permissions",items:{type:"object",properties:{kind:{type:"string",description:"Kind",enum:["collection"]},mode:{type:"string",description:"Mode",enum:["read","write","delete"]},target:{type:"string",description:"Target"}},required:["kind","mode","target"]}},internal:{type:"boolean",description:"Internal"},starred:{type:"boolean",description:"Internal"},defaultShortcut:{type:"string",description:"Default shortcut"},sidebarShortcuts:{type:"array",description:"Sidebar shortcuts",items:{type:"string",description:"Sidebar shortcut"}}}},shortcuts:{type:"array",description:"Shortcuts",items:{type:"object",properties:{name:{type:"string",description:"Name"},url:{type:"string",description:"Url"},icons:{type:"array",description:"Icons",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"}},required:["src","sizes","type"]}},shortName:{type:"string",description:"Short name"},description:{type:"string",description:"Description"}},required:["name","url"]}},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","name","startUrl","createdAt","updatedAt"]},Ta={provide:rr.RY,useValue:{name:"storeapplications",creator:{schema:{title:"Store Store",description:"User Applications",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:Li.properties,required:["id","name","startUrl","createdAt","updatedAt"]}}},multi:!0},Ra={provide:rr.RY,useValue:{name:"userapplications",creator:{schema:{title:"User Applications",description:"User Applications",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:Li.properties,required:["id","name","startUrl","createdAt","updatedAt"]}}},multi:!0};var yt=l(899),So=l(4995);const xa={provide:rr.To,useValue:{name:"userapplications",upsert:!0,data:[{id:"com.central-factory.portal",name:"Central Factory Portal",description:"Central Factory Portal",startUrl:"/",icons:[{src:"assets/icons/mdi/open-in-app.svg",sizes:"512x512",type:"image/svg+xml"}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:yt.k.Collection,mode:yt.R.Read,target:"userpreferences"},{kind:yt.k.Collection,mode:yt.R.Read,target:"useravatars"},{kind:yt.k.Collection,mode:yt.R.Read,target:"userapplications"}]}},{id:"com.central-factory.player",name:"Application Player",description:"Access to many local and hosted web applications. Applications can be loaded through a webview or through a webpack module federation.",startUrl:"play",icons:[{src:"assets/icons/mdi/view-grid.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Application Player",url:"/play",icons:[{src:"assets/icons/mdi/view-grid.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:yt.k.Collection,mode:yt.R.Read,target:"userapplications"},{kind:yt.k.Collection,mode:yt.R.Write,target:"userapplications"},{kind:yt.k.Collection,mode:yt.R.Delete,target:"userapplications"},{kind:yt.k.Collection,mode:yt.R.Read,target:"storeapplications"},{kind:yt.k.Collection,mode:yt.R.Write,target:"storeapplications"},{kind:yt.k.Collection,mode:yt.R.Delete,target:"storeapplications"}],sidebarShortcuts:["Application Player"]}},{id:"com.central-factory.user-avatars",name:"User Avatars",description:"Avatars management module. Customize your user avatars.",startUrl:"user-avatars",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Selected Avatar",url:"/selected-avatar",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}]},{name:"Select Avatar",url:"/select-avatar",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:yt.k.Collection,mode:yt.R.Read,target:"useravatars"},{kind:yt.k.Collection,mode:yt.R.Write,target:"useravatars"},{kind:yt.k.Collection,mode:yt.R.Delete,target:"useravatars"},{kind:yt.k.Collection,mode:yt.R.Read,target:"userpreferences"},{kind:yt.k.Collection,mode:yt.R.Write,target:"userpreferences"}],sidebarShortcuts:["Selected Avatar"]}},{id:"com.central-factory.inventory",name:"Inventory",description:"Assets management module. Manage and preview your assets.",startUrl:"inventory",icons:[{src:"assets/icons/mdi/bag-personal.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Inventory",url:"/inventory",icons:[{src:"assets/icons/mdi/bag-personal.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:yt.k.Collection,mode:yt.R.Read,target:"userassets"},{kind:yt.k.Collection,mode:yt.R.Write,target:"userassets"},{kind:yt.k.Collection,mode:yt.R.Delete,target:"userassets"}],sidebarShortcuts:["Inventory"]}},{id:"com.central-factory.marketplace",name:"Marketplace",description:"Portal Marketplace. Sell your assets and acquire new ones.",startUrl:"marketplace",icons:[{src:"assets/icons/mdi/store.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Marketplace",url:"/marketplace",icons:[{src:"assets/icons/mdi/store.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:yt.k.Collection,mode:yt.R.Read,target:"userassets"},{kind:yt.k.Collection,mode:yt.R.Write,target:"userassets"},{kind:yt.k.Collection,mode:yt.R.Delete,target:"userassets"}],sidebarShortcuts:["Marketplace"]}},{id:"com.central-factory.settings",name:"Settings",description:"Customize your portal experience. Manage your preferences.",startUrl:"settings",icons:[{src:"assets/icons/mdi/cog.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Settings",url:"/settings",icons:[{src:"assets/icons/mdi/cog.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{internal:!0,author:{id:"com.central-factory",name:"Central Factory"},permissions:[{kind:yt.k.Collection,mode:yt.R.Read,target:"userpreferences"},{kind:yt.k.Collection,mode:yt.R.Write,target:"userpreferences"}],sidebarShortcuts:["Settings"]}},{id:"com.central-factory.codex",name:"Codex",description:"Official documentation for the Central Factory Metaverse",startUrl:"codex",categories:["productivity"],icons:[{src:"assets/icons/mdi/book-open-page-variant.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Codex",url:"https://www.aitorllamas.com/metaverse/apps/codex",icons:[{src:"assets/icons/mdi/book-open-page-variant.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},renderingType:So.B.Webview,supportsBrowser:!0,internal:!1,permissions:[],defaultShortcut:"Codex",sidebarShortcuts:[],colors:[{variation:So.c.Primary,color:"#706fd3"}]}}]},multi:!0},Nt={provide:rr.RY,useValue:{name:"userassets",creator:{schema:{title:"User Assets",description:"User assets",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},name:{type:"string",description:"Name"},model:{type:"string",description:"Model"},description:{type:"string",description:"Description"},digital:{type:"boolean",description:"Digital"},private:{type:"boolean",description:"Private"},kind:{type:"string",description:"Kind",enum:["unknown","currency","land","material","building","equipment","furniture","machine","vehicle","media-resource","other"]},url:{type:"string",description:"Url"},previewUrl:{type:"string",description:"Preview url"},currentValue:{type:"object",description:"Current value",properties:{usd:{type:"string",description:"Usd"},eth:{type:"string",description:"Eth"}}},purchaseValue:{type:"object",description:"Purchase value",properties:{usd:{type:"string",description:"Usd"},eth:{type:"string",description:"Eth"}}},purchaseDate:{format:"date-time",type:"string"},data:{type:"object",description:"Data"},owner:{type:"string",description:"Owner"},producer:{type:"string",description:"Producer"},permissions:{type:"array",description:"Permissions",items:{type:"object",description:"Permission"}},createdAt:{format:"date-time",type:"string",description:"Created at"},updatedAt:{format:"date-time",type:"string",description:"Updated at"}}}}},multi:!0},La={type:"object",description:"Appearance",properties:{format:{type:"string"},src:{type:"string"},smallPreviewUrl:{type:"string"},previewCamera:{type:"object",properties:{position:{type:"string"},rotation:{type:"string"},scale:{type:"string"}}}}},Bi={provide:rr.RY,useValue:{name:"useravatars",creator:{schema:{title:"User Avatars",description:"User Avatars",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},welcomeMessage:{type:"string",description:"Welcome message"},name:{type:"string",description:"Name"},title:{type:"string",description:"Title"},selectedAppearance:La,appearances:{type:"array",description:"Appearances",items:La},scopes:{type:"array",description:"Scopes",items:{type:"object",properties:{integration:{type:"string",description:"Integration"},domain:{type:"string",description:"Domain"},scope:{type:"string",description:"Scope"}}}},skills:{type:"array",description:"Skills",items:{type:"object",properties:{domain:{type:"string",description:"Domain"},scope:{type:"string",description:"Scope"},skill:{type:"string",description:"Skill"}}}},createdAt:{format:"date-time",type:"string",description:"Created at"},updatedAt:{format:"date-time",type:"string",description:"Updated at"}}}}},multi:!0},$r={provide:rr.RY,useValue:{name:"applicationpermissions",creator:{schema:{title:"Application Permissions",description:"Application Permissions",version:0,keyCompression:!0,primaryKey:{key:"id",fields:["appId","kind","mode","target"],separator:":"},type:"object",properties:{id:{type:"string",description:"Id"},appId:{type:"string",description:"AppId"},kind:{type:"string",description:"Kind",enum:["collection"]},mode:{type:"string",description:"Mode",enum:["read","write","delete"]},target:{type:"string",description:"Target"},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","appId","kind","mode","target"],encrypted:["kind","mode","target"]}}},multi:!0},Fa={provide:rr.RY,useValue:{name:"userpreferences",creator:{schema:{title:"User Preferences",description:"User preferences",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},key:{type:"string",description:"Key"},value:{description:"Value"},avatar:{type:"string"},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","value"]}}},multi:!0},yu={provide:rr.To,useValue:{name:"userpreferences",upsert:!1,data:[{id:"settings.customization",key:"settings.customization",value:{theme:{name:"Default",path:"assets/themes/default/variables.css"}}}]},multi:!0};var Br=l(43),fi=l(4438),on=l(2085),Ni=l(2051);let Na=(()=>{class b{}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({}),b})(),ja=(()=>{class b{}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({}),b})(),Co=(()=>{class b{}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({imports:[[Lr.CommonModule,fi.O,Ni.Y,Na,ja]]}),b})();const an={production:!1,demo:!0,useMocks:!0,autologin:!0,showSplashScreen:!1,webUrl:"http://localhost:3000",documentationUrl:"http://localhost:3000/docs",blogUrl:"http://localhost:3000/blog",developersUrl:"http://localhost:3000/developers"};var vs=l(5088),un=(()=>{return(b=un||(un={})).Body="body",b.Head="head",b.Ears="ears",b.Face="face",b.Eyes="eyes",b.Nose="nose",b.Mouth="mouth",b.Neck="neck",b.Chest="chest",b.Waist="waist",b.Back="back",b.Arms="arms",b.RightArm="right-arm",b.LeftArm="left-arm",b.Wrist="wrist",b.Hands="hands",b.RightHand="right-hand",b.LeftHand="left-hand",b.Legs="legs",b.RightLeg="right-leg",b.LeftLeg="left-leg",b.Feet="feet",b.RightFoot="right-foot",b.LeftFoot="left-foot",b.Finger="finger",un;var b})();const Ua={id:"1",name:"Raven's Cloak",model:"Raven's Cloak",producer:"Shop5363155 Store",owner:"Metam",description:"Microfiber hooded cloak with fleece lining",kind:vs.R.Equipment,previewUrl:"https://i.imgur.com/ukcsu1q.png",url:"https://es.aliexpress.com/item/1005001952208453.html",currentValue:{usd:"23.62",eth:"0.0070218623"},purchaseValue:{usd:"23.62",eth:"0.0070218623"},purchaseDate:(new Date).toISOString(),digital:!1,private:!0,data:{allowedSlots:[un.Back],colors:["#ff0000","#00ff00","#0000ff"],isEquipped:!1}},Do={id:"2",name:"Foundation's Coat",model:"Foundation's Coat",producer:"Shop1948549 Store",owner:"Metam",description:"Hooded coat with thick fleece lining",kind:vs.R.Equipment,previewUrl:"https://i.imgur.com/w1XmjIj.png",url:"https://es.aliexpress.com/item/1005003209038453.html",currentValue:{usd:"43.9",eth:"0.01305079404"},purchaseValue:{usd:"43.9",eth:"0.01305079404"},purchaseDate:(new Date).toISOString(),digital:!1,private:!0,data:{allowedSlots:[un.Chest],colors:["#ff0000","#00ff00","#0000ff"],isEquipped:!1}},za=((new Date).toISOString(),{provide:rr.To,useValue:{name:"userassets",upsert:!0,data:[Ua,Do]},multi:!0});var Wa=l(6293),Un=l(3905);let gs=(()=>{class b{static forRoot({enabled:s=!1,autologin:m=!1}){const k=[];return s&&(k.push(Wa.Z),k.push(za)),m&&k.push({provide:a.APP_INITIALIZER,useFactory:z=>()=>(0,Un.z)(z.setupDatabase("test","test1234")),deps:[rr.v2],multi:!0}),{ngModule:b,providers:k}}}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({}),b})();var Zt=l(428),jt=l(3900),di=l(4004),cn=l(8505);const ji=new a.InjectionToken("ON_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/select-avatar"});let bn=(()=>{class b{constructor(s,m,k){this.entityManager=s,this.router=m,this.failureRedirectTo=k}canActivate(){return this.entityManager.getRepository("userpreferences","com.central-factory.user-avatars").pipe((0,jt.w)(s=>s.findOne({selector:{id:"userAvatars.selectedAvatar"}})),(0,di.U)(s=>!(!s||!s.value)),(0,cn.b)(s=>{s||this.router.navigate([this.failureRedirectTo])}))}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275inject(rr.v2),a.\u0275\u0275inject(Zt.Router),a.\u0275\u0275inject(ji))},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const $n=new a.InjectionToken("ON_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/login"});let ln=(()=>{class b{constructor(s,m,k){this.entityManager=s,this.router=m,this.failureRedirectTo=k}canActivate(){const s=this.entityManager.isDatabaseCreated();return s||this.router.navigate([this.failureRedirectTo]),s}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275inject(rr.v2),a.\u0275\u0275inject(Zt.Router),a.\u0275\u0275inject($n))},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const En=new a.InjectionToken("ON_NOT_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/"});let Ao=(()=>{class b{constructor(s,m,k){this.entityManager=s,this.router=m,this.failureRedirectTo=k}canActivate(){const s=this.entityManager.isDatabaseCreated();return s&&this.router.navigate([this.failureRedirectTo]),!s}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275inject(rr.v2),a.\u0275\u0275inject(Zt.Router),a.\u0275\u0275inject(En))},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();var hi=l(6961),Ui=l(4918),Fr=l(7165);(0,p.oQ)([(0,p.oB)({transform:"translate3d(0, 0, 0)"}),(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:.2}),(0,p.oB)({transform:"translate3d(0, -30px, 0)",offset:.4}),(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:.53}),(0,p.oB)({transform:"translate3d(0, -15px, 0)",offset:.7}),(0,p.oB)({transform:"translate3d(0, -4px, 0)",offset:.9}),(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1}),(0,p.oB)({opacity:0}),(0,p.oB)({opacity:1}),(0,p.oB)({opacity:0}),(0,p.oB)({opacity:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(1, 1, 1)"}),(0,p.oB)({transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})"}),(0,p.oB)({transform:"scale3d(1, 1, 1)"})])),{params:{scale:1.25,timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:0}),(0,p.oB)({transform:"scale3d(1.25, 0.75, 1)",offset:.3}),(0,p.oB)({transform:"scale3d(0.75, 1.25, 1)",offset:.4}),(0,p.oB)({transform:"scale3d(1.15, 0.85, 1)",offset:.5}),(0,p.oB)({transform:"scale3d(.95, 1.05, 1)",offset:.65}),(0,p.oB)({transform:"scale3d(1.05, .95, 1)",offset:.75}),(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:0}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.1}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.2}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.3}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.4}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.5}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.6}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.7}),(0,p.oB)({transform:"translate3d(10px, 0, 0)",offset:.8}),(0,p.oB)({transform:"translate3d(-10px, 0, 0)",offset:.9}),(0,p.oB)({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"rotate3d(0, 0, 1, 15deg)",offset:.2}),(0,p.oB)({transform:"rotate3d(0, 0, 1, -10deg)",offset:.4}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 5deg)",offset:.6}),(0,p.oB)({transform:"rotate3d(0, 0, 1, -5deg)",offset:.8}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 0deg)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:0}),(0,p.oB)({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.1}),(0,p.oB)({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.2}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.3}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.4}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.5}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.6}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.7}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.8}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.9}),(0,p.oB)({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"none",offset:0}),(0,p.oB)({transform:"translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg)",offset:.15}),(0,p.oB)({transform:"translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg)",offset:.3}),(0,p.oB)({transform:"translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg)",offset:.45}),(0,p.oB)({transform:"translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg)",offset:.6}),(0,p.oB)({transform:"translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg)",offset:.75}),(0,p.oB)({transform:"none",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"none",offset:0}),(0,p.oB)({transform:"none",offset:.11}),(0,p.oB)({transform:"skewX(-12.5deg) skewY(-12.5deg)",offset:.22}),(0,p.oB)({transform:"skewX(6.25deg) skewY(6.25deg)",offset:.33}),(0,p.oB)({transform:"skewX(-3.125deg) skewY(-3.125deg)",offset:.44}),(0,p.oB)({transform:"skewX(1.5625deg) skewY(1.5625deg)",offset:.55}),(0,p.oB)({transform:"skewX(-0.78125deg) skewY(-0.78125deg)",offset:.66}),(0,p.oB)({transform:"skewX(0.390625deg) skewY(0.390625deg)",offset:.77}),(0,p.oB)({transform:"skewX(-0.1953125deg) skewY(-0.1953125deg)",offset:.88}),(0,p.oB)({transform:"none",offset:1})])),{params:{timing:1,delay:0}});const _s=(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),(0,p.oB)({transform:"scale3d(1.1, 1.1, 1.1)",offset:.2}),(0,p.oB)({transform:"scale3d(.9, .9, .9)",offset:.4}),(0,p.oB)({opacity:1,transform:"scale3d(1.03, 1.03, 1.03)",offset:.6}),(0,p.oB)({transform:"scale3d(.97, .97, .97)",offset:.8}),(0,p.oB)({opacity:1,transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}});function ze(b,u,s,m){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.6}),(0,p.oB)({transform:"translate3d(0, {{ c }}, 0)",offset:.75}),(0,p.oB)({transform:"translate3d(0, {{ d }}, 0)",offset:.9}),(0,p.oB)({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:b,b:u,c:s,d:m}})}function Wt(b,u,s,m){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:.6}),(0,p.oB)({transform:"translate3d({{ c }}, 0, 0)",offset:.75}),(0,p.oB)({transform:"translate3d({{ d }}, 0, 0)",offset:.9}),(0,p.oB)({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:b,b:u,c:s,d:m}})}function it(b,u,s,m){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, {{ a }}, 0)",offset:.2}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.4}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ c }}, 0)",offset:.45}),(0,p.oB)({opacity:0,transform:"translate3d(0, {{ d }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u,c:s,d:m}})}function Es(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,transform:"translate3d({{ a }}, 0, 0)",offset:.2}),(0,p.oB)({opacity:0,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}function vi(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}function ws(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}ze("-3000px","25px","-10px","5px"),ze("3000px","-25px","10px","-5px"),Wt("-3000px","25px","-10px","5px"),Wt("3000px","-25px","10px","-5px"),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"scale3d(.9, .9, .9)",offset:.2}),(0,p.oB)({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.5}),(0,p.oB)({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.55}),(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:1})])),{params:{timing:1,delay:0,scale:1.1}}),it("10px","-20px","-20px","2000px"),it("-10px","20px","20px","-2000px"),Es("20px","-2000px"),Es("-20px","2000px"),vi(0,0),ws("-100%",0);const Qr=ws("100%",0);function Vn(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:0,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}function Cs(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:0,transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}function Qn(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}function fn(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}function yi(b,u){return(0,p.oQ)([(0,p.oB)({"backface-visibility":"visible"}),(0,p.jt)("{{ timing }}s {{ delay }}s ease-in",(0,p.F4)([(0,p.oB)({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),(0,p.oB)({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),(0,p.oB)({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),(0,p.oB)({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),(0,p.oB)({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0,rotateX:b,rotateY:u}})}function Sn(b,u){return(0,p.oQ)([(0,p.oB)({"backface-visibility":"visible"}),(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({transform:"perspective(400px)",offset:0}),(0,p.oB)({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.3}),(0,p.oB)({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:1})]))],{params:{timing:1,delay:0,rotateX:b,rotateY:u}})}function C(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({"transform-origin":"{{ origin }}",opacity:0,transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:0}),(0,p.oB)({"transform-origin":"{{ origin }}",opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,origin:b,degrees:u}})}function Le(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({"transform-origin":"{{ origin }}",opacity:1,transform:"none",offset:0}),(0,p.oB)({"transform-origin":"{{ origin }}",opacity:0,transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:1})])),{params:{timing:1,delay:0,origin:b,degrees:u}})}function Zr(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ a }}, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ b }}, 0)",offset:.6})])),{params:{timing:1,delay:0,a:b,b:u}})}function Ei(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ a }}, 0, 0)",offset:0}),(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ b }}, 0, 0)",offset:.6})])),{params:{timing:1,delay:0,a:b,b:u}})}function xs(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ a }}, 0)",offset:.4}),(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}function Ga(b,u){return(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,p.F4)([(0,p.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ a }}, 0, 0)",offset:.4}),(0,p.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:b,b:u}})}vi("-100%",0),vi("100%",0),Vn(0,0),Cs("-100%",0),Cs("100%",0),Vn("-100%",0),Vn("100%",0),fn("-100%",0),fn("100%",0),Qn("-100%",0),Qn("100%",0),fn(0,"-100%"),fn(0,"100%"),Qn(0,"-100%"),Qn(0,"100%"),(0,p.oQ)([(0,p.oB)({"backface-visibility":"visible"}),(0,p.jt)("{{ timing }}s {{ delay }}s ease-out",(0,p.F4)([(0,p.oB)({transform:"perspective(400px) rotate3d(0, 1, 0, -360deg)",offset:0}),(0,p.oB)({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -190deg)",offset:.4}),(0,p.oB)({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -170deg)",offset:.5}),(0,p.oB)({transform:"perspective(400px) scale3d(.95, .95, .95)",offset:.8}),(0,p.oB)({transform:"perspective(400px)",offset:1})]))],{params:{timing:1,delay:0}}),yi(1,0),yi(0,1),Sn(1,0),Sn(0,1),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(100%, 0, 0) skewX(-30deg)",offset:0}),(0,p.oB)({opacity:1,transform:"translate3d(0, 0, 0) skewX(0)",offset:1})])),{params:{timing:1,delay:0}}),(0,p.oQ)((0,p.jt)("{{ timing }}s {{ delay }}s ease-out",(0,p.F4)([(0,p.oB)({opacity:1,offset:0}),(0,p.oB)({opacity:0,transform:"translate3d(100%, 0, 0) skewX(30deg)",offset:1})])),{params:{timing:1,delay:0}}),C("center","-200deg"),C("left bottom","-45deg"),C("right bottom","45deg"),C("left bottom","45deg"),C("right bottom","-90deg"),Le("center","200deg"),Le("left bottom","45deg"),Le("right bottom","-45deg"),Le("left bottom","-45deg"),Le("right bottom","90deg"),(0,p.oQ)([(0,p.oB)({"transform-origin":"top left"}),(0,p.jt)("{{ timing }}s {{ delay }}s ease-in-out",(0,p.F4)([(0,p.oB)({transform:"rotate3d(0, 0, 1, 80deg)",offset:.2}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 60deg)",offset:.4}),(0,p.oB)({transform:"rotate3d(0, 0, 1, 80deg)",offset:.6}),(0,p.oB)({opacity:1,transform:"rotate3d(0, 0, 1, 60deg)",offset:.8}),(0,p.oB)({opacity:0,transform:"translate3d(0, 700px, 0)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale(0.1) rotate(30deg)","transform-origin":"center bottom",offset:0}),(0,p.oB)({opacity:.5,transform:"rotate(-10deg)",offset:.5}),(0,p.oB)({opacity:.7,transform:"rotate(3deg)",offset:.7}),(0,p.oB)({opacity:1,transform:"scale(1)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg)",offset:0}),(0,p.oB)({opacity:1,transform:"none",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,offset:0}),(0,p.oB)({opacity:0,transform:"translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg)",offset:1})]))],{params:{timing:1,delay:0}}),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),(0,p.oB)({opacity:1,transform:"scale3d(1, 1, 1)",offset:.5})]))],{params:{timing:1,delay:0}}),Zr("-1000px","10px"),Zr("1000px","-10px"),Ei("-1000px","10px"),Ei("1000px","-10px"),(0,p.oQ)([(0,p.jt)("{{ timing }}s {{ delay }}s",(0,p.F4)([(0,p.oB)({opacity:1,offset:0}),(0,p.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:.5}),(0,p.oB)({opacity:0,offset:1})]))],{params:{timing:1,delay:0}}),xs("-60px","2000px"),xs("60px","-2000px"),Ga("42px","-2000px"),Ga("-42px","2000px");var Du=l(7579),Au=l(4128),Ki=l(9300),ks=l(1884),Yn=l(3085),Ls=l(1623),No=l(3454),jo=l(7967),Ou=l(5183),Qa=l(6111),Pu=l(405),Uo=l(8753),Bs=l(9750),Za=l(5605);let Iu=(()=>{class b{constructor(){this.title="CF Portal",this.titleClick=new a.EventEmitter}onTitleClick(){this.titleClick.emit()}}return b.\u0275fac=function(s){return new(s||b)},b.\u0275cmp=a.\u0275\u0275defineComponent({type:b,selectors:[["cf-navbar"]],inputs:{environment:"environment",title:"title"},outputs:{titleClick:"titleClick"},decls:24,vars:10,consts:[["cfBlock","navbar"],["cfBlock","navbar-section","cfMod","left"],["cfElem","title",3,"click"],["cfElem","icon","src","assets/logo.svg",3,"svgClass"],["cfElem","text"],["cfBlock","navbar-section","cfMod","right"],["cfBlock","list","cfMod","horizontal"],["cfElem","item"],["src","assets/icons/mdi/web.svg","cfElem","icon",3,"svgClass"],["cfElem","link",3,"href"],["src","assets/icons/mdi/text-box-search-outline.svg","cfElem","icon",3,"svgClass"],["src","assets/icons/mdi/post-outline.svg","cfElem","icon",3,"svgClass"],["src","assets/icons/mdi/code-tags.svg","cfElem","icon",3,"svgClass"]],template:function(s,m){1&s&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"h1",2),a.\u0275\u0275listener("click",function(){return m.onTitleClick()}),a.\u0275\u0275element(3,"cf-svg-icon",3),a.\u0275\u0275elementStart(4,"span",4),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",5),a.\u0275\u0275elementStart(7,"ul",6),a.\u0275\u0275elementStart(8,"li",7),a.\u0275\u0275element(9,"cf-svg-icon",8),a.\u0275\u0275elementStart(10,"a",9),a.\u0275\u0275text(11,"Website"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"li",7),a.\u0275\u0275element(13,"cf-svg-icon",10),a.\u0275\u0275elementStart(14,"a",9),a.\u0275\u0275text(15,"Documentation"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"li",7),a.\u0275\u0275element(17,"cf-svg-icon",11),a.\u0275\u0275elementStart(18,"a",9),a.\u0275\u0275text(19,"Blog"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"li",7),a.\u0275\u0275element(21,"cf-svg-icon",12),a.\u0275\u0275elementStart(22,"a",9),a.\u0275\u0275text(23," Developers "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&s&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(m.title),a.\u0275\u0275advance(4),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==m.environment?null:m.environment.webUrl,a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==m.environment?null:m.environment.documentationUrl,a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==m.environment?null:m.environment.blogUrl,a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==m.environment?null:m.environment.developersUrl,a.\u0275\u0275sanitizeUrl))},directives:[Ls.G,jo.I,No.e,Bs.b],encapsulation:2}),b})();const Ya=function(b){return{"button--active":b}};function Tu(b,u){if(1&b){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"a",19),a.\u0275\u0275listener("click",function(){const z=a.\u0275\u0275restoreView(s).$implicit;return a.\u0275\u0275nextContext(3).onSidebarItemClick(z)}),a.\u0275\u0275elementStart(2,"div",9),a.\u0275\u0275elementStart(3,"span",10),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"button",20),a.\u0275\u0275element(6,"cf-svg-icon",21),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&b){const s=u.$implicit;a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(s.name),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,Ya,s.active)),a.\u0275\u0275advance(1),a.\u0275\u0275property("src",s.icon)("svgClass","icon__svg")}}const Ru=function(b){return{"background-color":b,"margin-top":"15px"}};function Mu(b,u){if(1&b){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",22),a.\u0275\u0275elementStart(1,"div",22),a.\u0275\u0275elementStart(2,"div",9),a.\u0275\u0275elementStart(3,"span",10),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"button",23),a.\u0275\u0275listener("click",function(){const z=a.\u0275\u0275restoreView(s).$implicit;return a.\u0275\u0275nextContext(3).onRecentlyOpenedItemClick(z)}),a.\u0275\u0275element(6,"cf-svg-icon",21),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&b){const s=u.$implicit;a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(s.name),a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkDragData",s.application)("ngClass",a.\u0275\u0275pureFunction1(6,Ya,s.active))("ngStyle",a.\u0275\u0275pureFunction1(8,Ru,s.color)),a.\u0275\u0275advance(1),a.\u0275\u0275property("src",s.icon)("svgClass","icon__svg")}}const Hc=function(){return[]};function xu(b,u){if(1&b){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",24),a.\u0275\u0275elementStart(1,"cf-splash-screen",25),a.\u0275\u0275listener("splashScreenHide",function(){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext(3).showSplashScreen=!1}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&b){const s=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate1("welcomeMessage","Welcome to ",null==s.openedSidebarItem?null:s.openedSidebarItem.name,""),a.\u0275\u0275property("mods","in-scene")("displayLoadingTime",2e3)("displayWelcomeTime",1e3)("title",(null==s.openedSidebarItem?null:s.openedSidebarItem.name)||"")("logo",(null==s.openedSidebarItem?null:s.openedSidebarItem.icon)||"")("backgroundColor",(null==s.openedSidebarItem?null:s.openedSidebarItem.color)||"")("loadingTexts",(null==s.openedSidebarItem||null==s.openedSidebarItem.application||null==s.openedSidebarItem.application.description?null:s.openedSidebarItem.application.description.split("."))||a.\u0275\u0275pureFunction0(8,Hc))}}const Vc=function(){return["/select-avatar"]},Gc=function(){return["applications-carousel"]},ku=function(b){return{"scene__content--splash-screen":b}};function Lu(b,u){if(1&b){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cf-sidebar-container"),a.\u0275\u0275elementStart(1,"cf-sidebar",6),a.\u0275\u0275listener("openedChange",function(k){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext(2).sidebarIsOpen=k}),a.\u0275\u0275elementStart(2,"div",7),a.\u0275\u0275elementStart(3,"a",8),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext(2).onSidebarItemClick({name:"Select Avatar",routerLink:["/select-avatar"],icon:"assets/icons/mdi/account-switch.svg",application:{id:"com.central-factory.user-avatars",name:"User Avatars",description:"Select an avatar",startUrl:"/select-avatar"},active:!1})}),a.\u0275\u0275elementStart(4,"div",9),a.\u0275\u0275elementStart(5,"span",10),a.\u0275\u0275text(6,"Account"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"cf-avatar-appearance-portrait",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(8,Tu,7,6,"ng-container",12),a.\u0275\u0275elementStart(9,"div",13),a.\u0275\u0275template(10,Mu,7,10,"div",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(11,"router-outlet",15),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"div",16),a.\u0275\u0275elementStart(13,"div",17),a.\u0275\u0275template(14,xu,2,9,"div",18),a.\u0275\u0275element(15,"router-outlet"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&b){const s=a.\u0275\u0275nextContext().ngIf,m=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("opened",m.sidebarIsOpen)("dock",!0)("dockedSize","100px")("showBackdrop",!0)("closeOnClickBackdrop",!0)("closeOnClickOutside",!0),a.\u0275\u0275advance(2),a.\u0275\u0275property("routerLink",a.\u0275\u0275pureFunction0(15,Vc)),a.\u0275\u0275advance(4),a.\u0275\u0275property("appearancePortrait",null==s.selectedAvatar.selectedAppearance?null:s.selectedAvatar.selectedAppearance.portrait),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",m.sidebarItems),a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkDropListData",m.recentlyOpenedSidebarItems)("cdkDropListConnectedTo",a.\u0275\u0275pureFunction0(16,Gc)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",m.recentlyOpenedSidebarItems),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(17,ku,m.showSplashScreen))("@sceneContentAnimationState",m.sceneContentAnimationState),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",m.showSplashScreen)}}function Ja(b,u){1&b&&(a.\u0275\u0275elementStart(0,"div",26),a.\u0275\u0275elementStart(1,"div",27),a.\u0275\u0275element(2,"router-outlet"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd())}function Qc(b,u){if(1&b){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cf-navbar",28),a.\u0275\u0275listener("titleClick",function(){a.\u0275\u0275restoreView(s);const k=a.\u0275\u0275nextContext(2);return k.sidebarIsOpen=!k.sidebarIsOpen}),a.\u0275\u0275elementEnd()}if(2&b){const s=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("title",s.title)}}const Bu=function(b){return{"no-navbar":b}};function Zc(b,u){if(1&b&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275template(3,Lu,16,19,"cf-sidebar-container",3),a.\u0275\u0275template(4,Ja,3,0,"ng-template",null,4,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,Qc,1,1,"cf-navbar",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&b){const s=u.ngIf,m=a.\u0275\u0275reference(5),k=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("cfMod",a.\u0275\u0275pureFunction1(4,Bu,!k.showNavbar)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",s.selectedAvatar)("ngIfElse",m),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",k.showNavbar)}}const Fu=function(b){return{selectedAvatar:b}};var Ir=(()=>{return(b=Ir||(Ir={})).Idle="Idle",b.Opened="Opened",b.Animated="Animated",Ir;var b})();const Jc=[{path:"",component:(()=>{class b{constructor(s,m,k,z,te,ae){this.router=s,this.entityManager=m,this.selectedAvatarState=k,this.selectedApplicationState=z,this.recentlyOpenedApplicationsState=te,this.customizationSettingsState=ae,this.title="Metaverse Portal",this.sidebarIsOpen=!1,this.sidebarItems=[],this.recentlyOpenedSidebarItems=[],this.showSplashScreen=!1,this.showNavbar=!1,this.sceneContentAnimationState=Ir.Idle,this.selectedAvatar$=this.selectedAvatarState.avatar$,this.recentlyOpenedApplications$=this.recentlyOpenedApplicationsState.applications$.pipe((0,di.U)(ye=>ye.reverse()),(0,di.U)(ye=>this.generateSidebarItems(ye))),this.destroy$=new Du.x}ngOnInit(){this.customizationSettingsState.customizationSettings$.pipe((0,di.U)(s=>s?.theme),(0,Ki.h)(s=>void 0!==s),(0,ks.x)((s,m)=>s?.path===m?.path),(0,Ki.h)((u,s)=>1<=s),(0,cn.b)(s=>{this.sceneContentAnimationState=Ir.Idle,setTimeout(()=>this.sceneContentAnimationState=Ir.Animated,100)}),(0,Yn.R)(this.destroy$)).subscribe(),this.recentlyOpenedApplications$.pipe((0,Yn.R)(this.destroy$),(0,cn.b)(s=>this.recentlyOpenedSidebarItems=s)).subscribe(),this.router.events.pipe((0,Ki.h)(s=>s instanceof Zt.NavigationEnd),(0,Yn.R)(this.destroy$)).subscribe(()=>{this.setSidebarItemsActive(this.sidebarItems)}),this.entityManager.initialize$.pipe((0,jt.w)(()=>(0,Au.D)([this.entityManager.getRepository("userapplications","com.central-factory.portal")])),(0,cn.b)(([s])=>this.subscribeToDataChanges(s))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onRecentlyOpenedItemClick(s){this.sceneContentAnimationState=Ir.Idle,setTimeout(()=>{this.sceneContentAnimationState=Ir.Opened,s.application&&(this.selectedApplicationState.selectApplication(s.application),this.selectedApplicationState.openSidebar())},100)}onSidebarItemClick(s){this.sceneContentAnimationState=Ir.Idle,setTimeout(()=>{this.sceneContentAnimationState=Ir.Opened,this.showSplashScreen=!0,this.openedSidebarItem=s,s.routerLink&&this.router.navigate(s.routerLink)},100)}subscribeToDataChanges(s){s.find({selector:{"additionalProperties.sidebarShortcuts":{$exists:!0}}}).pipe((0,cn.b)(m=>{this.sidebarItems=this.generateSidebarItems(m)}),(0,Yn.R)(this.destroy$)).subscribe()}generateSidebarItems(s){const m=s.sort((k,z)=>k.createdAt.localeCompare(z.createdAt)).reduce((k,z)=>{const ye=z.shortcuts||[],Ve=(z.additionalProperties?.sidebarShortcuts||[]).map(Je=>ye.find(lt=>lt.name===Je)).filter(Je=>!!Je).map(Je=>({name:Je.name,routerLink:[Je.url],icon:Je.icons&&Je.icons.length>0?Je.icons[0].src:"",color:z.additionalProperties?.colors?.find(lt=>"primary"===lt.variation)?.color||(!0===z.additionalProperties?.internal?"var(--color-base-primary-medium)":void 0),active:!1,application:z}));return k.concat(Ve)},[]);return this.setSidebarItemsActive(m),m}setSidebarItemsActive(s){s.forEach(m=>{m.active=this.router.url.startsWith(m.routerLink.join("/"))})}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275directiveInject(Zt.Router),a.\u0275\u0275directiveInject(rr.v2),a.\u0275\u0275directiveInject(Fr.Y),a.\u0275\u0275directiveInject(Ui.H),a.\u0275\u0275directiveInject(hi.r),a.\u0275\u0275directiveInject(Br.T))},b.\u0275cmp=a.\u0275\u0275defineComponent({type:b,selectors:[["cf-portal-layout"]],decls:2,vars:5,consts:[[4,"ngIf"],["cfBlock","scene"],["cfElem","body",3,"cfMod"],[4,"ngIf","ngIfElse"],["notSelectedAvatarLayout",""],["cfElem","navbar",3,"title","titleClick",4,"ngIf"],[3,"opened","dock","dockedSize","showBackdrop","closeOnClickBackdrop","closeOnClickOutside","openedChange"],[2,"margin-top","20px"],["cfBlock","sidebar-item",1,"d-block",3,"routerLink","click"],["cfElem","text"],["cfElem","text-content"],[3,"appearancePortrait"],[4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo"],["class","d-block","cfBlock","sidebar-item",4,"ngFor","ngForOf"],["name","sidebar"],["cf-sidebar-content",""],[1,"scene__content",3,"ngClass"],["cfBlock","scene-content","cfMod","splash-screen",4,"ngIf"],["cfBlock","sidebar-item",1,"d-block",3,"click"],["cfBlock","button","cfMod","fab",2,"margin-top","15px",3,"ngClass"],["cfElem","icon",3,"src","svgClass"],["cfBlock","sidebar-item",1,"d-block"],["cdkDrag","","cfBlock","button","cfMod","fab",3,"cdkDragData","ngClass","ngStyle","click"],["cfBlock","scene-content","cfMod","splash-screen"],[3,"mods","displayLoadingTime","displayWelcomeTime","title","logo","backgroundColor","welcomeMessage","loadingTexts","splashScreenHide"],[1,"scene__container"],[1,"scene__content"],["cfElem","navbar",3,"title","titleClick"]],template:function(s,m){1&s&&(a.\u0275\u0275template(0,Zc,7,6,"ng-container",0),a.\u0275\u0275pipe(1,"async")),2&s&&a.\u0275\u0275property("ngIf",a.\u0275\u0275pureFunction1(3,Fu,a.\u0275\u0275pipeBind1(1,1,m.selectedAvatar$)))},directives:[Lr.NgIf,Ls.G,No.e,jo.I,Ou.L,Qa.k,Zt.RouterLinkWithHref,Pu.P,Lr.NgForOf,Uo.Wj,Zt.RouterOutlet,Lr.NgClass,Bs.b,Uo.Zt,Lr.NgStyle,Za.wn,Iu],pipes:[Lr.AsyncPipe],encapsulation:2,data:{animation:[(0,p.X$)("sceneContentAnimationState",[(0,p.eR)(`${Ir.Idle} => ${Ir.Animated}`,(0,p._7)(_s)),(0,p.eR)(`${Ir.Idle} => ${Ir.Opened}`,(0,p._7)(Qr,{params:{timing:.5}}))])]}}),b})(),children:[{path:"login",loadChildren:()=>l.e(12).then(l.bind(l,12)).then(b=>b.LoginModule),canActivate:[Ao]},{path:"select-avatar",loadChildren:()=>l.e(700).then(l.bind(l,8700)).then(b=>b.SelectAvatarModule),canActivate:[ln]},{path:"create-avatar",loadChildren:()=>l.e(273).then(l.bind(l,4273)).then(b=>b.CreateAvatarModule),canActivate:[ln]},{path:"selected-avatar",loadChildren:()=>l.e(959).then(l.bind(l,1959)).then(b=>b.SelectedAvatarModule),canActivate:[ln,bn]},{path:"play",loadChildren:()=>l.e(491).then(l.bind(l,6491)).then(b=>b.PlayModule),canActivate:[ln,bn]},{path:"manage-applications",loadChildren:()=>l.e(835).then(l.bind(l,9835)).then(b=>b.ManageApplicationsModule),canActivate:[ln,bn]},{path:"inventory",loadChildren:()=>l.e(740).then(l.bind(l,2740)).then(b=>b.InventoryModule),canActivate:[ln,bn]},{path:"marketplace",loadChildren:()=>l.e(483).then(l.bind(l,6483)).then(b=>b.MarketplaceModule),canActivate:[ln,bn]},{path:"settings",loadChildren:()=>l.e(672).then(l.bind(l,6672)).then(b=>b.SettingsModule),canActivate:[ln,bn]},{path:"",redirectTo:"play",pathMatch:"full"}]}];let Xc=(()=>{class b{}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({imports:[[Zt.RouterModule.forRoot(Jc)],Zt.RouterModule]}),b})();var Fs=l(4968);const Ns=b=>"touchend"===b.type||"touchcancel"===b.type?b.changedTouches[0]:b.type.startsWith("touch")?b.targetTouches[0]:b,js=b=>"touchstart"===b.type||"mousedown"===b.type&&0===b.button;let el=(()=>{class b{constructor(s){this.resizeBegin=new a.EventEmitter,this.resizing=new a.EventEmitter,this.resizeEnd=new a.EventEmitter,this.element=s.nativeElement}ngAfterViewInit(){this.south&&this.createHandle("resize-handle-s"),this.east&&this.createHandle("resize-handle-e"),this.southEast&&this.createHandle("resize-handle-se");const s=window.getComputedStyle(this.element);this.minWidth=parseFloat(s.minWidth),this.maxWidth=parseFloat(s.maxWidth),this.minHeight=parseFloat(s.minHeight),this.maxHeight=parseFloat(s.maxHeight)}ngOnDestroy(){this.destroySubscription()}onMousedown(s){if(!js(s))return;const m=s.target.classList,k=m.contains("resize-handle-s"),z=m.contains("resize-handle-e"),te=m.contains("resize-handle-se"),ae=Ns(s),ye=this.element.clientWidth,ke=this.element.clientHeight,Ve=ae.screenX,Je=ae.screenY,lt=s.type.startsWith("touch"),Dt=lt?"touchmove":"mousemove",ot=lt?"touchend":"mouseup";if(k||z||te){this.initResize(s,k,z,te);const ht=(0,Fs.R)(document,ot);this.subscription=ht.subscribe(Gt=>this.onMouseup(Gt));const At=(0,Fs.R)(document,Dt).pipe((0,Yn.R)(ht)).subscribe(Gt=>this.move(Gt,ye,ke,Ve,Je));this.subscription.add(At)}}move(s,m,k,z,te){const ae=Ns(s),ke=ae.screenY-te;this.newWidth=m+(ae.screenX-z),this.newHeight=k+ke,this.resizeWidth(ae),this.resizeHeight(ae)}onMouseup(s){this.endResize(s),this.destroySubscription()}destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}createHandle(s){const m=document.createElement("span");m.className=s,this.element.appendChild(m)}initResize(s,m,k,z){m&&(this.resizingS=!0),k&&(this.resizingE=!0),z&&(this.resizingSE=!0),this.element.classList.add("resizing"),this.newWidth=this.element.clientWidth,this.newHeight=this.element.clientHeight,s.stopPropagation(),this.resizeBegin.emit()}endResize(s){this.resizingS=!1,this.resizingE=!1,this.resizingSE=!1,this.element.classList.remove("resizing"),this.resizeEnd.emit({event:Ns(s),width:this.newWidth,height:this.newHeight})}resizeWidth(s){(this.resizingSE||this.resizingE)&&(!this.minWidth||this.newWidth>=this.minWidth)&&(!this.maxWidth||this.newWidth<=this.maxWidth)&&(this.ghost||(this.element.style.width=`${this.newWidth}px`),this.resizing.emit({event:s,width:this.newWidth,height:this.newHeight,direction:"horizontal"}))}resizeHeight(s){(this.resizingSE||this.resizingS)&&(!this.minHeight||this.newHeight>=this.minHeight)&&(!this.maxHeight||this.newHeight<=this.maxHeight)&&(this.ghost||(this.element.style.height=`${this.newHeight}px`),this.resizing.emit({event:s,width:this.newWidth,height:this.newHeight,direction:"vertical"}))}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275directiveInject(a.ElementRef))},b.\u0275dir=a.\u0275\u0275defineDirective({type:b,selectors:[["","cfResizable",""]],hostBindings:function(s,m){1&s&&a.\u0275\u0275listener("mousedown",function(z){return m.onMousedown(z)})("touchstart",function(z){return m.onMousedown(z)})},inputs:{south:"south",east:"east",southEast:"southEast",ghost:"ghost"},outputs:{resizeBegin:"resizeBegin",resizing:"resizing",resizeEnd:"resizeEnd"}}),b})(),tl=(()=>{class b{constructor(s,m){this.element=s,this.ngZone=m,this.dragX=!0,this.dragY=!0,this.dragStart=new a.EventEmitter,this.dragMove=new a.EventEmitter,this.dragEnd=new a.EventEmitter,this.isDragging=!1,this.globalListeners=new Map}ngOnChanges(s){s.dragEventTarget&&s.dragEventTarget.currentValue&&this.onMousedown(this.dragEventTarget)}ngOnDestroy(){this.removeEventListener()}onMousedown(s){if(js(s)&&(this.dragX||this.dragY)){const m=Ns(s);this.initDrag(m.pageX,m.pageY),this.addEventListeners(s),this.dragStart.emit(s)}}onMousemove(s){const m=Ns(s);this.onDrag(m.pageX,m.pageY),this.dragMove.emit(s)}onMouseup(s){this.endDrag(),this.removeEventListener(),this.dragEnd.emit(s)}addEventListeners(s){const m=s.type.startsWith("touch"),z=m?"touchend":"mouseup";this.globalListeners.set(m?"touchmove":"mousemove",{handler:te=>this.onMousemove(te),options:!1}).set(z,{handler:te=>this.onMouseup(te),options:!1}),this.ngZone.runOutsideAngular(()=>{this.globalListeners.forEach((te,ae)=>{window.document.addEventListener(ae,te.handler,te.options)})})}removeEventListener(){this.globalListeners.forEach((s,m)=>{window.document.removeEventListener(m,s.handler,s.options)})}initDrag(s,m){this.isDragging=!0,this.lastPageX=s,this.lastPageY=m,this.element.nativeElement.classList.add("dragging")}onDrag(s,m){if(this.isDragging){const k=s-this.lastPageX,z=m-this.lastPageY,te=this.element.nativeElement.getBoundingClientRect();this.element.nativeElement.style.left=te.left+k+"px",this.element.nativeElement.style.top=te.top+z+"px",this.lastPageX=s,this.lastPageY=m}}endDrag(){this.isDragging=!1,this.element.nativeElement.classList.remove("dragging")}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.NgZone))},b.\u0275dir=a.\u0275\u0275defineDirective({type:b,selectors:[["","cfDraggable",""]],inputs:{dragEventTarget:"dragEventTarget",dragX:"dragX",dragY:"dragY"},outputs:{dragStart:"dragStart",dragMove:"dragMove",dragEnd:"dragEnd"},features:[a.\u0275\u0275NgOnChangesFeature]}),b})();const rl=["modalRoot"],Nu=["modalBody"],ju=["modalHeader"],$o=["modalFooter"],qa=["closeIcon"];function wi(b,u){if(1&b){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cf-svg-icon",14),a.\u0275\u0275listener("click",function(k){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext().toggleMaximize(k)}),a.\u0275\u0275elementEnd()}if(2&b){const s=a.\u0275\u0275nextContext();a.\u0275\u0275property("src",s.maximized?"assets/icons/mdi/window-restore.svg":"assets/icons/mdi/window-maximize.svg")}}const zo=[[["",8,"window-header__content"]],[["",8,"window-body__content"]],[["",8,"window-footer__content"]]],nl=[".window-header__content",".window-body__content",".window-footer__content"];let il=(()=>{class b{constructor(s){this.element=s,this.scrollTopEnable=!0,this.maximizable=!1,this.backdrop=!0,this.openModal=new a.EventEmitter,this.closeModal=new a.EventEmitter,this.resizeModal=new a.EventEmitter,this.maximizeModal=new a.EventEmitter}ngAfterViewChecked(){this.executePostDisplayActions&&(this.center(),this.executePostDisplayActions=!1)}onKeyDown(s){s.preventDefault(),s.stopPropagation(),this.hide()}onWindowResize(){this.executePostDisplayActions=!0,this.center()}show(){this.executePostDisplayActions=!0,this.visible=!0,setTimeout(()=>{this.modalRoot.nativeElement.focus(),this.scrollTopEnable&&(this.modalBody.nativeElement.scrollTop=0),this.openModal.emit(!0)},1)}hide(){this.visible=!1,this.closeModal.emit(!0),this.focusLastModal()}center(){let s=this.modalRoot.nativeElement.offsetWidth,m=this.modalRoot.nativeElement.offsetHeight;0===s&&0===m&&(this.modalRoot.nativeElement.style.visibility="hidden",this.modalRoot.nativeElement.style.display="block",s=this.modalRoot.nativeElement.offsetWidth,m=this.modalRoot.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.display="none",this.modalRoot.nativeElement.style.visibility="visible");const k=Math.max((window.innerWidth-s)/2,0),z=Math.max((window.innerHeight-m)/2,0);this.modalRoot.nativeElement.style.left=k+"px",this.modalRoot.nativeElement.style.top=z+"px"}initDrag(s){s.target!==this.closeIcon.nativeElement&&(this.maximized||(this.dragEventTarget=s))}onResize(s){"vertical"===s.direction&&this.calcBodyHeight(),this.resizeModal.emit(s)}calcBodyHeight(){this.modalBody.nativeElement.style.height=this.modalRoot.nativeElement.offsetHeight-(this.modalHeader.nativeElement.offsetHeight+this.modalFooter.nativeElement.offsetHeight)+"px",this.modalBody.nativeElement.style.maxHeight="none"}getMaxModalIndex(){return((b="body *")=>Array.from(document.querySelectorAll(b)).map(u=>parseFloat(window.getComputedStyle(u).zIndex)).filter(u=>!isNaN(u)).sort((u,s)=>u-s).pop()||0)(".ui-modal")}focusLastModal(){const s=((b,u)=>{if("function"==typeof b.closest)return b.closest(u)||null;for(;b;){if(b.matches(u))return b;b=b.parentElement}return null})(this.element.nativeElement.parentElement,".window-modal");s&&s.focus()}toggleMaximize(s){this.maximized?this.revertMaximize():this.maximize(),this.maximizeModal.emit(this.maximized),s.preventDefault()}maximize(){this.preMaximizePageX=parseFloat(this.modalRoot.nativeElement.style.top),this.preMaximizePageY=parseFloat(this.modalRoot.nativeElement.style.left),this.preMaximizeRootWidth=this.modalRoot.nativeElement.offsetWidth,this.preMaximizeRootHeight=this.modalRoot.nativeElement.offsetHeight,this.preMaximizeBodyHeight=this.modalBody.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.top="0px",this.modalRoot.nativeElement.style.left="0px",this.modalRoot.nativeElement.style.width="100vw",this.modalRoot.nativeElement.style.height="100vh",this.modalBody.nativeElement.style.height="calc(100vh - "+(this.modalHeader.nativeElement.offsetHeight+this.modalFooter.nativeElement.offsetHeight)+"px)",this.modalBody.nativeElement.style.maxHeight="none",this.maximized=!0}revertMaximize(){this.modalRoot.nativeElement.style.top=this.preMaximizePageX+"px",this.modalRoot.nativeElement.style.left=this.preMaximizePageY+"px",this.modalRoot.nativeElement.style.width=this.preMaximizeRootWidth+"px",this.modalRoot.nativeElement.style.height=this.preMaximizeRootHeight+"px",this.modalBody.nativeElement.style.height=this.preMaximizeBodyHeight+"px",this.maximized=!1}moveOnTop(){if(!this.backdrop){const s=this.getMaxModalIndex();let m=parseFloat(window.getComputedStyle(this.modalRoot.nativeElement).zIndex)||0;m<=s&&(m=s+1,this.modalRoot.nativeElement.style.zIndex=m.toString())}}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275directiveInject(a.ElementRef))},b.\u0275cmp=a.\u0275\u0275defineComponent({type:b,selectors:[["cf-window"]],viewQuery:function(s,m){if(1&s&&(a.\u0275\u0275viewQuery(rl,5),a.\u0275\u0275viewQuery(Nu,5),a.\u0275\u0275viewQuery(ju,5),a.\u0275\u0275viewQuery($o,5),a.\u0275\u0275viewQuery(qa,5)),2&s){let k;a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(m.modalRoot=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(m.modalBody=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(m.modalHeader=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(m.modalFooter=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(m.closeIcon=k.first)}},hostBindings:function(s,m){1&s&&a.\u0275\u0275listener("keydown.esc",function(z){return m.onKeyDown(z)})("resize",function(){return m.onWindowResize()},!1,a.\u0275\u0275resolveWindow)},inputs:{scrollTopEnable:"scrollTopEnable",maximizable:"maximizable",backdrop:"backdrop"},outputs:{openModal:"openModal",closeModal:"closeModal",resizeModal:"resizeModal",maximizeModal:"maximizeModal"},ngContentSelectors:nl,decls:17,vars:9,consts:[["cfBlock","window-overlay"],["cfBlock","window","tabindex","-1","role","dialog","cfResizable","","cfDraggable","",3,"south","east","southEast","dragEventTarget","resizing","mousedown","touchstart"],["modalRoot",""],["cfBlock","window-header",3,"mousedown","touchstart"],["modalHeader",""],["cfElem","title"],["cfElem","controls"],[3,"src","click",4,"ngIf"],["src","assets/icons/mdi/window-close.svg",3,"click"],["closeIcon",""],["cfBlock","window-body"],["modalBody",""],["cfBlock","window-footer"],["modalFooter",""],[3,"src","click"]],template:function(s,m){1&s&&(a.\u0275\u0275projectionDef(zo),a.\u0275\u0275element(0,"div",0),a.\u0275\u0275elementStart(1,"div",1,2),a.\u0275\u0275listener("resizing",function(z){return m.onResize(z)})("mousedown",function(){return m.moveOnTop()})("touchstart",function(){return m.moveOnTop()}),a.\u0275\u0275elementStart(3,"div",3,4),a.\u0275\u0275listener("mousedown",function(z){return m.initDrag(z)})("touchstart",function(z){return m.initDrag(z)}),a.\u0275\u0275elementStart(5,"div",5),a.\u0275\u0275projection(6),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(7,"div",6),a.\u0275\u0275template(8,wi,1,1,"cf-svg-icon",7),a.\u0275\u0275elementStart(9,"cf-svg-icon",8,9),a.\u0275\u0275listener("click",function(){return m.hide()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",10,11),a.\u0275\u0275projection(13,1),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"div",12,13),a.\u0275\u0275projection(16,2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&s&&(a.\u0275\u0275styleProp("display",m.visible&&m.backdrop?"block":"none"),a.\u0275\u0275advance(1),a.\u0275\u0275styleProp("display",m.visible?"block":"none"),a.\u0275\u0275property("south",!0)("east",!0)("southEast",!0)("dragEventTarget",m.dragEventTarget),a.\u0275\u0275advance(7),a.\u0275\u0275property("ngIf",m.maximizable))},directives:[Ls.G,el,tl,No.e,Lr.NgIf,Bs.b],encapsulation:2}),b})();const sl=["rootWindow"];function eu(b,u){1&b&&a.\u0275\u0275element(0,"cf-splash-screen")}let ol=(()=>{class b{constructor(){this.environment=an}ngOnInit(){this.environment.demo&&this.rootWindow.show()}}return b.\u0275fac=function(s){return new(s||b)},b.\u0275cmp=a.\u0275\u0275defineComponent({type:b,selectors:[["cf-portal-root"]],viewQuery:function(s,m){if(1&s&&a.\u0275\u0275viewQuery(sl,7),2&s){let k;a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(m.rootWindow=k.first)}},decls:19,vars:2,consts:[["id","bgcanvas"],[4,"ngIf"],[1,"application"],[3,"maximizable"],["rootWindow",""],[1,"window-header__content"],[1,"window-body__content"],["href","https://github.com/central-factory/metaverse","target","_blank"],[1,"window-footer__content"],["cfBlock","button","cfMod","primary",3,"click"]],template:function(s,m){if(1&s){const k=a.\u0275\u0275getCurrentView();a.\u0275\u0275element(0,"canvas",0),a.\u0275\u0275template(1,eu,1,0,"cf-splash-screen",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275element(3,"router-outlet"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"cf-window",3,4),a.\u0275\u0275elementContainerStart(6,5),a.\u0275\u0275text(7,"A message from the author"),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(8,6),a.\u0275\u0275elementStart(9,"h3"),a.\u0275\u0275text(10,"Welcome to The Central Factory Metaverse"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"p"),a.\u0275\u0275text(12," This is a demo release of The Central Factory Metaverse project. Not all features are implemented yet, you might find many issues and unexpected behaviours. You can give us your feedback on "),a.\u0275\u0275elementStart(13,"a",7),a.\u0275\u0275text(14,"the project page"),a.\u0275\u0275elementEnd(),a.\u0275\u0275text(15,". Thank you for getting interested on this project. "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(16,8),a.\u0275\u0275elementStart(17,"button",9),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(k),a.\u0275\u0275reference(5).hide()}),a.\u0275\u0275text(18," I'm ready! "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd()}2&s&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",m.environment.showSplashScreen),a.\u0275\u0275advance(3),a.\u0275\u0275property("maximizable",!0))},directives:[Lr.NgIf,Zt.RouterOutlet,il,Ls.G,jo.I,Za.wn],styles:["#bgcanvas[_ngcontent-%COMP%]{display:block;margin:0 auto;width:100vw;height:100vh;position:fixed;z-index:-1}"]}),b})();var al=l(1718);let ul=(()=>{class b{}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({imports:[[Ni.Y,fi.O]]}),b})();var cl=l(5687);let ll=(()=>{class b{}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b}),b.\u0275inj=a.\u0275\u0275defineInjector({imports:[[Lr.CommonModule,Ni.Y,fi.O,Uo._t,Zt.RouterModule,ul,cl.l,on.x,al.y]]}),b})(),fl=(()=>{class b{constructor(s){this.customizationSettingsState=s,this.renderProcessRunning=!1,this.initialize()}initialize(){this.themeChangeSubscription&&this.themeChangeSubscription.unsubscribe(),this.themeChangeSubscription=this.customizationSettingsState.customizationSettings$.pipe((0,di.U)(s=>s?.theme.name),(0,ks.x)((s,m)=>s===m),(0,cn.b)(s=>this.onThemeChange(s))).subscribe()}onThemeChange(s){const m=document.getElementsByClassName("application")[0];if(!m||!s)return void setTimeout(()=>this.initialize(),1e3);if(this.currentTheme===s)return;this.currentTheme=s;const k=new ResizeObserver(z=>{for(const te of z)if(te.contentBoxSize){const ae=document.getElementById("bgcanvas"),ye=Array.isArray(te.contentBoxSize)?te.contentBoxSize[0]:te.contentBoxSize;ae.width=ye.inlineSize,ae.height=window.innerHeight;const ke=this.initializeMatrix();this.renderTick(()=>this.renderMatrix(ke))}});"Matrix"===s?(m.classList.add("application--no-background-color"),k.observe(document.documentElement)):(k.unobserve(document.documentElement),clearTimeout(this.renderTimeout),delete this.renderTimeout,this.renderProcessRunning=!1,m.classList.remove("application--no-background-color"))}initializeMatrix(){const k=document.getElementById("bgcanvas"),z=k.getContext("2d"),te=[],ae=Math.ceil(k.height/20);for(let ye=0;ye<k.width/20;++ye)te.push({x:20*ye,stackHeight:10+Math.random()*ae,stackCounter:0});return{tileSize:20,fadeFactor:.05,canvas:k,ctx:z,maxStackHeight:ae,columns:te}}renderTick(s,m=50){this.renderProcessRunning?console.warn("render process already running"):(this.renderProcessRunning=!0,s(),this.renderTimeout=window.setTimeout(()=>{this.renderProcessRunning=!1,this.renderTick(s,m)},m))}renderMatrix({ctx:s,fadeFactor:m,canvas:k,tileSize:z,maxStackHeight:te,columns:ae}){s.fillStyle="rgba( 0 , 0 , 0 , "+m+" )",s.fillRect(0,0,k.width,k.height),s.font=z-2+"px monospace",s.fillStyle="#22b455";for(let ye=0;ye<ae.length;++ye){const ke=String.fromCharCode(33+Math.floor(94*Math.random()));s.fillText(ke,ae[ye].x,ae[ye].stackCounter*z+z),++ae[ye].stackCounter>=ae[ye].stackHeight&&(ae[ye].stackHeight=10+Math.random()*te,ae[ye].stackCounter=0)}}}return b.\u0275fac=function(s){return new(s||b)(a.\u0275\u0275inject(Br.T))},b.\u0275prov=a.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),dl=(()=>{class b{}return b.\u0275fac=function(s){return new(s||b)},b.\u0275mod=a.\u0275\u0275defineNgModule({type:b,bootstrap:[ol]}),b.\u0275inj=a.\u0275\u0275defineInjector({providers:[{provide:a.APP_INITIALIZER,useFactory:()=>()=>null,deps:[Br.T,fl],multi:!0},Ta,Ra,$r,Fa,Bi,Nt,xa,yu],imports:[[g.b2,bo,D.HttpClientModule,Ni.Y.forRoot(),fi.O,ll,on.x,Co,Xc,gs.forRoot({enabled:an.useMocks,autologin:an.autologin})]]}),b})();an.production&&(0,a.enableProdMode)(),g.q6().bootstrapModule(dl).catch(b=>console.error(b))},4995:(oe,N,l)=>{l.d(N,{B:()=>g,c:()=>a});var g=(()=>{return(D=g||(g={})).Webview="webview",D.WebpackModuleFederation="webpack-module-federation",D.Unknown="unknown",g;var D})(),a=(()=>{return(D=a||(a={})).Primary="primary",D.Secondary="secondary",D.Success="success",D.Warning="warning",D.Danger="danger",D.Info="info",D.Light="light",D.Dark="dark",a;var D})()},3266:(oe,N,l)=>{l.d(N,{o:()=>S,O:()=>w});var g=l(9841),a=l(4004),D=l(9283),p=l(1135),B=l(8505),L=l(4995),F=l(7777);let M=(()=>{class T{constructor(x){this.httpClient=x,this.applications$=new p.X([]),this.storeDataUrl="https://raw.githubusercontent.com/central-factory/web-application-manifests/main/applications.json",this.httpClient.get(this.storeDataUrl).pipe((0,B.b)(R=>{this.applications$.next(R.map(E=>{const c={color:this.getPrimaryColor(E)||"#000000",variation:L.c.Primary};return{...E,createdAt:E.createdAt||(new Date).toISOString(),updatedAt:E.updatedAt||(new Date).toISOString(),additionalProperties:{...E.additionalProperties,author:E.additionalProperties?.author||{id:E.id,name:E.name},renderingType:E.additionalProperties?.renderingType||L.B.Webview,supportsBrowser:E.additionalProperties?.supportsBrowser||!1,internal:!1,permissions:E.additionalProperties?.permissions||[],defaultShortcut:E.additionalProperties?.defaultShortcut||(E.shortcuts?E.shortcuts[0].name:void 0),sidebarShortcuts:E.additionalProperties?.sidebarShortcuts||(E.shortcuts?[E.shortcuts[0].name]:[]),colors:E.additionalProperties?.colors||[c]}}}))})).subscribe()}getPrimaryColor(x){if(x.additionalProperties?.colors&&x.additionalProperties?.colors.length>0){const E=x.additionalProperties?.colors?.find(y=>y.variation===L.c.Primary);if(E)return E?.color}return x.themeColor||x.backgroundColor}}return T.\u0275fac=function(x){return new(x||T)(F.\u0275\u0275inject(D.HttpClient))},T.\u0275prov=F.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();var I=l(3395),S=(()=>{return(T=S||(S={}))[T.User=0]="User",T[T.Store=1]="Store",S;var T})();let w=(()=>{class T{constructor(x,R){this.storeApplicationsState=x,this.userApplicationsState=R,this.applications$=(0,g.a)([this.storeApplicationsState.applications$,this.userApplicationsState.applications$]).pipe((0,a.U)(([E,y])=>[...y.map(c=>({origin:S.User,application:c})),...E.map(c=>({origin:S.Store,application:c}))].filter((c,o,v)=>v.findIndex(h=>c.application.id===h.application.id)===o)))}}return T.\u0275fac=function(x){return new(x||T)(F.\u0275\u0275inject(M),F.\u0275\u0275inject(I.g))},T.\u0275prov=F.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},6961:(oe,N,l)=>{l.d(N,{r:()=>p});var g=l(1135),a=l(7777);let p=(()=>{class B{constructor(){this.applications$=new g.X([]),this.maxApplications=4}addApplication(F){const M=this.applications$.getValue();M.find(S=>S.id===F.id)||(M.length>=this.maxApplications&&M.shift(),M.unshift(F),this.applications$.next(M))}}return B.\u0275fac=function(F){return new(F||B)},B.\u0275prov=a.\u0275\u0275defineInjectable({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},4918:(oe,N,l)=>{l.d(N,{H:()=>F});var g=l(3266),a=l(1135),D=l(4004),p=l(8505),B=l(7777);let F=(()=>{class M{constructor(S){this.availableApplicationsState=S,this.application$=new a.X(void 0),this.sidebarIsOpen$=new a.X(!1)}listenForChanges(S){this.changesSubscription&&this.changesSubscription.unsubscribe(),S?this.changesSubscription=this.availableApplicationsState.applications$.pipe((0,D.U)(w=>w.find(T=>T.application.id===S)),(0,p.b)(w=>this.application$.next(w?.application))).subscribe():this.application$.next(void 0)}selectApplication(S){this.listenForChanges(S.id)}unselectApplication(){this.listenForChanges(void 0)}openSidebar(){this.sidebarIsOpen$.next(!0)}closeSidebar(){this.sidebarIsOpen$.next(!1)}}return M.\u0275fac=function(S){return new(S||M)(B.\u0275\u0275inject(g.O))},M.\u0275prov=B.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},3395:(oe,N,l)=>{l.d(N,{g:()=>M});var g=l(442),a=l(1135),D=l(3900),p=l(4128),B=l(8505),L=l(7777);let M=(()=>{class I{constructor(w){this.entityManager=w,this.applications$=new a.X([]),this.entityManager.initialize$.pipe((0,D.w)(()=>(0,p.D)([this.entityManager.getRepository("userapplications","com.central-factory.player")])),(0,B.b)(([T])=>{this.userApplicationsRepository=T,this.subscribeToDataChanges()})).subscribe()}addApplication(w){if(!this.userApplicationsRepository)throw new Error("Repositories not initialized");return this.userApplicationsRepository.upsert(w)}subscribeToDataChanges(){if(!this.userApplicationsRepository)throw new Error("Repositories not initialized");this.userApplicationsRepository.observe().pipe((0,B.b)(w=>this.applications$.next(w))).subscribe()}}return I.\u0275fac=function(w){return new(w||I)(L.\u0275\u0275inject(g.v2))},I.\u0275prov=L.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},5088:(oe,N,l)=>{l.d(N,{R:()=>g});var g=(()=>{return(a=g||(g={})).Unknown="unknown",a.Currency="currency",a.Land="land",a.Material="material",a.Building="building",a.Equipment="equipment",a.Furniture="furniture",a.Machine="machine",a.Vehicle="vehicle",a.MediaResource="media-resource",a.Consumable="consumable",a.Other="other",g;var a})()},6293:(oe,N,l)=>{l.d(N,{r:()=>D,Z:()=>p});var g=l(442),a=l(120);const D=[{id:"1",welcomeMessage:"Hello!",name:"Thomas Anderson",title:"Software Engineer",selectedAppearance:{id:"2",format:a.g.Model,src:"assets/avatars/samples/thomas-anderson/default/appearance.glb",portrait:{format:a.g.Image,src:"assets/avatars/samples/thomas-anderson/default/portrait.png"}},appearances:[{id:"1",format:a.g.Model,src:"assets/avatars/samples/thomas-anderson/neo/appearance.glb",portrait:{format:a.g.Image,src:"assets/avatars/samples/thomas-anderson/neo/portrait.png"},previewCamera:{position:"0 1.5 0.7",rotation:"-5 0 0",scale:"0.4 0.4 0.4"}},{id:"2",format:a.g.Model,src:"assets/avatars/samples/thomas-anderson/default/appearance.glb",portrait:{format:a.g.Image,src:"assets/avatars/samples/thomas-anderson/default/portrait.png"},previewCamera:{position:"0 1.5 0.7",rotation:"-5 0 0",scale:"1 1 1"}}],scopes:[{integration:"CF",domain:"Calendars",scope:"manage"},{integration:"Google",domain:"Calendars",scope:"manage"},{integration:"NFT",domain:"Tokens",scope:"manage"}],skills:[{domain:"calendar",scope:"manage",skill:"create"},{domain:"event",scope:"manage",skill:"create"},{domain:"assets",scope:"manage",skill:"trade"}]},{id:"2",welcomeMessage:"Hello!",name:"Elliot Alderson",title:"Software Engineer",selectedAppearance:{id:"1",format:a.g.Model,src:"assets/avatars/samples/elliot-alderson/default/appearance.glb",portrait:{format:a.g.Image,src:"assets/avatars/samples/elliot-alderson/default/portrait.png"}},appearances:[{id:"1",format:a.g.Model,src:"assets/avatars/samples/elliot-alderson/default/appearance.glb",portrait:{format:a.g.Image,src:"assets/avatars/samples/elliot-alderson/default/portrait.png"}}],scopes:[],skills:[]},{id:"3",welcomeMessage:"Hello!",name:"Alan Turing",title:"Software Engineer",selectedAppearance:{id:"3",format:a.g.Model,src:"assets/avatars/samples/alan-turing/default/appearance.glb",portrait:{format:a.g.Image,src:"assets/avatars/samples/alan-turing/default/portrait.png"}},appearances:[{id:"3",format:a.g.Model,src:"assets/avatars/samples/alan-turing/default/appearance.glb",portrait:{format:a.g.Image,src:"assets/avatars/samples/alan-turing/default/portrait.png"}}],scopes:[],skills:[]}],p={provide:g.To,useValue:{name:"useravatars",upsert:!0,data:D},multi:!0}},120:(oe,N,l)=>{l.d(N,{g:()=>g});var g=(()=>{return(a=g||(g={})).Model="Model",a.Image="Image",g;var a})()},7165:(oe,N,l)=>{l.d(N,{Y:()=>S});var g=l(442),a=l(1135),D=l(3900),p=l(4128),B=l(8505),L=l(2843),F=l(9646),M=l(7777);let S=(()=>{class w{constructor(P){this.entityManager=P,this.avatar$=new a.X(void 0),this.entityManager.initialize$.pipe((0,D.w)(()=>(0,p.D)([this.entityManager.getRepository("userpreferences","com.central-factory.user-avatars"),this.entityManager.getRepository("useravatars","com.central-factory.user-avatars")])),(0,B.b)(([x,R])=>{this.userPreferencesRepository=x,this.userAvatarsRepository=R,this.subscribeToDataChanges()})).subscribe()}selectAvatar(P){return this.userPreferencesRepository?this.userPreferencesRepository.upsert({id:"userAvatars.selectedAvatar",key:"userAvatars.selectedAvatar",value:P.id}):(0,L._)(()=>new Error("Repositories not initialized"))}selectAppearance(P){if(!this.userAvatarsRepository)return(0,L._)(()=>new Error("Repositories not initialized"));const x=this.avatar$.getValue();if(!x)return(0,L._)(()=>new Error("Avatar not selected"));const R=JSON.parse(JSON.stringify(x));return R.selectedAppearance=P,this.userAvatarsRepository.upsert(R).pipe((0,B.b)(()=>this.avatar$.next(R)))}subscribeToDataChanges(){if(!this.userAvatarsRepository||!this.userPreferencesRepository)throw new Error("Repositories not initialized");this.userPreferencesRepository.observeOne({selector:{id:"userAvatars.selectedAvatar"}}).pipe((0,D.w)(P=>P&&this.userAvatarsRepository?this.userAvatarsRepository.findOne({selector:{id:P.value}}):(0,F.of)(void 0)),(0,B.b)(P=>this.avatar$.next(P))).subscribe()}}return w.\u0275fac=function(P){return new(P||w)(M.\u0275\u0275inject(g.v2))},w.\u0275prov=M.\u0275\u0275defineInjectable({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},405:(oe,N,l)=>{l.d(N,{P:()=>S});var g=l(7777),D=l(1623),p=l(1457),L=l(3454),F=l(9750);function M(w,T){if(1&w&&g.\u0275\u0275element(0,"img",3),2&w){const P=g.\u0275\u0275nextContext();g.\u0275\u0275property("src",P.appearancePortrait.src,g.\u0275\u0275sanitizeUrl)}}function I(w,T){1&w&&g.\u0275\u0275element(0,"cf-svg-icon",4)}let S=(()=>{class w{constructor(){this.showEmptyIcon=!1}}return w.\u0275fac=function(P){return new(P||w)},w.\u0275cmp=g.\u0275\u0275defineComponent({type:w,selectors:[["cf-avatar-appearance-portrait"]],inputs:{appearancePortrait:"appearancePortrait",showEmptyIcon:"showEmptyIcon"},decls:3,vars:2,consts:[["cfBlock","avatar-appearance-portrait"],["cfElem","image",3,"src",4,"ngIf"],["src","assets/icons/mdi/head-question.svg",4,"ngIf"],["cfElem","image",3,"src"],["src","assets/icons/mdi/head-question.svg"]],template:function(P,x){1&P&&(g.\u0275\u0275elementStart(0,"div",0),g.\u0275\u0275template(1,M,1,1,"img",1),g.\u0275\u0275template(2,I,1,0,"cf-svg-icon",2),g.\u0275\u0275elementEnd()),2&P&&(g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",x.appearancePortrait),g.\u0275\u0275advance(1),g.\u0275\u0275property("ngIf",!x.appearancePortrait&&x.showEmptyIcon))},directives:[D.G,p.NgIf,L.e,F.b],encapsulation:2}),w})()},1718:(oe,N,l)=>{l.d(N,{y:()=>F});var g=l(1457),D=l(4438),p=l(2051),B=l(7777);let F=(()=>{class M{}return M.\u0275fac=function(S){return new(S||M)},M.\u0275mod=B.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=B.\u0275\u0275defineInjector({imports:[[g.CommonModule,D.O,p.Y]]}),M})()},899:(oe,N,l)=>{l.d(N,{k:()=>g,R:()=>a});var g=(()=>((g||(g={})).Collection="collection",g))(),a=(()=>{return(D=a||(a={})).Read="read",D.Write="write",D.Delete="delete",a;var D})()},442:(oe,N,l)=>{l.d(N,{RY:()=>If,To:()=>Tf,v2:()=>mv});var g={};l.r(g),l.d(g,{default:()=>bo});var S,w,a=l(7777),D=l(1611),p=l.n(D);function B(e){return"$"+e}function L(e){return e.substring(1)}function F(){this._store={}}function M(e){if(this._store=new F,e&&Array.isArray(e))for(var t=0,r=e.length;t<r;t++)this.add(e[t])}F.prototype.get=function(e){var t=B(e);return this._store[t]},F.prototype.set=function(e,t){var r=B(e);return this._store[r]=t,!0},F.prototype.has=function(e){return B(e)in this._store},F.prototype.delete=function(e){var t=B(e),r=t in this._store;return delete this._store[t],r},F.prototype.forEach=function(e){for(var t=Object.keys(this._store),r=0,n=t.length;r<n;r++){var i=t[r];e(this._store[i],i=L(i))}},Object.defineProperty(F.prototype,"size",{get:function(){return Object.keys(this._store).length}}),M.prototype.add=function(e){return this._store.set(e,!0)},M.prototype.has=function(e){return this._store.has(e)},M.prototype.forEach=function(e){this._store.forEach(function(t,r){e(r)})},Object.defineProperty(M.prototype,"size",{get:function(){return this._store.size}}),function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(S=Set,w=Map):(S=M,w=F);var T=l(3894),P=l.n(T),x=l(2302),R=l.n(x);function E(e,t,r){Error.call(this,r),this.status=e,this.name=t,this.message=r,this.error=!0}P()(E,Error),E.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new E(401,"unauthorized","Name or password is incorrect.");var c=new E(400,"bad_request","Missing JSON list of 'docs'"),o=new E(404,"not_found","missing"),v=new E(409,"conflict","Document update conflict"),h=new E(400,"bad_request","_id field must contain a string"),K=new E(412,"missing_id","_id is required for puts"),ue=new E(400,"bad_request","Only reserved document ids may start with underscore."),ge=(new E(412,"precondition_failed","Database not open"),new E(500,"unknown_error","Database encountered an unknown error")),pe=new E(500,"badarg","Some query argument is invalid"),$=(new E(400,"invalid_request","Request was invalid"),new E(400,"query_parse_error","Some query parameter is invalid")),J=new E(500,"doc_validation","Bad special document member"),G=new E(400,"bad_request","Something wrong with the request"),X=new E(400,"bad_request","Document must be a JSON object"),ie=(new E(404,"not_found","Database not found"),new E(500,"indexed_db_went_bad","unknown")),_e=(new E(500,"web_sql_went_bad","unknown"),new E(500,"levelDB_went_went_bad","unknown"),new E(403,"forbidden","Forbidden by design doc validate_doc_update function"),new E(400,"bad_request","Invalid rev format")),ce=(new E(412,"file_exists","The database could not be created, the file already exists."),new E(412,"missing_stub","A pre-existing attachment stub wasn't found"));function Ne(e,t){function r(n){for(var i=Object.getOwnPropertyNames(e),f=0,d=i.length;f<d;f++)"function"!=typeof e[i[f]]&&(this[i[f]]=e[i[f]]);void 0!==n&&(this.reason=n)}return r.prototype=E.prototype,new r(t)}function Qe(e){if("object"!=typeof e){var t=e;(e=ge).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}new E(413,"invalid_url","Provided URL is invalid");var ut=l(9069),et=l.n(ut);const yr=l(3306).v4;var _r=function(e){return atob(e)},cr=function(e){return btoa(e)};function pr(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(f){if("TypeError"!==f.name)throw f;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)n.append(e[i]);return n.getBlob(t.type)}}function ir(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}function Vr(e,t){return pr([ir(e)],{type:t})}function je(e,t){return Vr(_r(e),t)}function kt(e,t){var r=new FileReader,n="function"==typeof r.readAsBinaryString;r.onloadend=function(i){var f=i.target.result||"";if(n)return t(f);t(function(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return t}(f))},n?r.readAsBinaryString(e):r.readAsArrayBuffer(e)}function Mt(e,t){kt(e,function(r){t(r)})}var Mr=l(3625),ei=l.n(Mr),Rn=self.setImmediate||self.setTimeout;function Ks(e,t,r,n,i){(r>0||n<t.size)&&(t=function(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.slice(t,r)}(t,r,n)),function(e,t){var r=new FileReader;r.onloadend=function(n){var i=n.target.result||new ArrayBuffer(0);t(i)},r.readAsArrayBuffer(e)}(t,function(f){e.append(f),i()})}function Di(e,t,r,n,i){(r>0||n<t.length)&&(t=t.substring(r,n)),e.appendBinary(t),i()}function Mn(e,t){var r="string"==typeof e,n=r?e.length:e.size,i=Math.min(32768,n),f=Math.ceil(n/i),d=0,O=r?new(ei()):new(ei().ArrayBuffer),U=r?Di:Ks;function W(){Rn(ne)}function q(){var De=function(e){return cr(e)}(O.end(!0));t(De),O.destroy()}function ne(){var de=d*i;d++,U(O,e,de,de+i,d<f?W:q)}ne()}function Ai(e){return ei().hash(e)}var ve,rn,qi=Function.prototype.toString,xn=qi.call(Object);function er(e){var t,r,n;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],r=0,n=e.length;r<n;r++)t[r]=er(e[r]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return function(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e);return r.set(n),t}(e);var t=e.size,r=e.type;return"function"==typeof e.slice?e.slice(0,t,r):e.webkitSlice(0,t,r)}(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&qi.call(r)==xn}(e))return e;for(r in t={},e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=er(e[r]);void 0!==i&&(t[r]=i)}return t}function ri(e){var t=!1;return p()(function(r){if(t)throw new Error("once called more than once");t=!0,e.apply(this,r)})}function jr(e){return p()(function(t){t=er(t);var r=this,n="function"==typeof t[t.length-1]&&t.pop(),i=new Promise(function(f,d){var O;try{var U=ri(function(W,q){W?d(W):f(q)});t.push(U),(O=e.apply(r,t))&&"function"==typeof O.then&&f(O)}catch(W){d(W)}});return n&&i.then(function(f){n(null,f)},n),i})}function sr(e,t){return jr(p()(function(r){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var n=this;return function(e,t,r){if(e.constructor.listeners("debug").length){for(var n=["api",e.name,t],i=0;i<r.length-1;i++)n.push(r[i]);e.constructor.emit("debug",n);var f=r[r.length-1];r[r.length-1]=function(d,O){var U=["api",e.name,t];U=U.concat(d?["error",d]:["success",O]),e.constructor.emit("debug",U),f(d,O)}}}(n,e,r),this.taskqueue.isReady?t.apply(this,r):new Promise(function(i,f){n.taskqueue.addTask(function(d){d?f(d):i(n[e].apply(n,r))})})}))}function vn(e,t){for(var r={},n=0,i=t.length;n<i;n++){var f=t[n];f in e&&(r[f]=e[f])}return r}function ii(e){return e}function Qs(e){return[{ok:e}]}function Ae(e,t,r){var n=t.docs,i=new w;n.forEach(function(ee){i.has(ee.id)?i.get(ee.id).push(ee):i.set(ee.id,[ee])});var f=i.size,d=0,O=new Array(f);var ne=[];i.forEach(function(ee,fe){ne.push(fe)});var de=0;!function De(){if(!(de>=ne.length)){var ee=Math.min(de+6,ne.length),fe=ne.slice(de,ee);(function(ee,fe){ee.forEach(function(Se,Oe){var be=fe+Oe,xe=i.get(Se),Re=vn(xe[0],["atts_since","attachments"]);Re.open_revs=xe.map(function(We){return We.rev}),Re.open_revs=Re.open_revs.filter(ii);var Ge=ii;0===Re.open_revs.length&&(delete Re.open_revs,Ge=Qs),["revs","attachments","binary","ajax","latest"].forEach(function(We){We in t&&(Re[We]=t[We])}),e.get(Se,Re,function(We,Ke){var bt;bt=We?[{error:We}]:Ge(Ke),function(ee,fe,Se){O[ee]={id:fe,docs:Se},function(){var ee;++d===f&&(ee=[],O.forEach(function(fe){fe.docs.forEach(function(Se){ee.push({id:fe.id,docs:[Se]})})}),r(null,{results:ee}))}()}(be,Se,bt),De()})})})(fe,de),de+=fe.length}}()}try{localStorage.setItem("_pouch_check_localstorage",1),ve=!!localStorage.getItem("_pouch_check_localstorage")}catch{ve=!1}function se(){return ve}function Ue(){var e;et().call(this),this._listeners={},e=this,se()&&addEventListener("storage",function(t){e.emit(t.key)})}function nt(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}P()(Ue,et()),Ue.prototype.addListener=function(e,t,r,n){if(!this._listeners[t]){var i=this,f=!1;this._listeners[t]=d,this.on(e,d)}function d(){if(i._listeners[t])if(f)f="waiting";else{f=!0;var O=vn(n,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);r.changes(O).on("change",function(W){W.seq>n.since&&!n.cancelled&&(n.since=W.seq,n.onChange(W))}).on("complete",function(){"waiting"===f&&R()(d),f=!1}).on("error",function(){f=!1})}}},Ue.prototype.removeListener=function(e,t){t in this._listeners&&(et().prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},Ue.prototype.notifyLocalWindows=function(e){se()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},Ue.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},rn="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};var kn=rn;function Zs(e){for(var t=[],r=0,n=e.length;r<n;r++)t=t.concat(e[r]);return t}function Js(e){var t;if(e?"string"!=typeof e?t=Ne(h):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=Ne(ue)):t=Ne(K),t)throw t}function Cr(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(nt("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function ns(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function is(e){var t=ns(e);return t?t.join("/"):null}function ro(e,t){var r=[],n=[];for(var i in t)t.hasOwnProperty(i)&&(r.push(i),n.push(t[i]));return r.push(e),Function.apply(null,r).apply(null,n)}function Ln(e,t,r){return new Promise(function(n,i){e.get(t,function(f,d){if(f){if(404!==f.status)return i(f);d={}}var O=d._rev,U=r(d);if(!U)return n({updated:!1,rev:O});U._id=t,U._rev=O,n(function(e,t,r){return e.put(t).then(function(n){return{updated:!0,rev:n.rev}},function(n){if(409!==n.status)throw n;return Ln(e,t._id,r)})}(e,U,r))})})}function no(e,t){var r=er(e);return t?(delete r._rev_tree,Ai(JSON.stringify(r))):yr().replace(/-/g,"").toLowerCase()}var si=yr;function gn(e){for(var t,r,n,f,i=e.rev_tree.slice();f=i.pop();){var d=f.ids,O=d[2],U=f.pos;if(O.length)for(var W=0,q=O.length;W<q;W++)i.push({pos:U+1,ids:O[W]});else{var ne=!!d[1].deleted,de=d[0];(!t||(n!==ne?n:r!==U?r<U:t<de))&&(t=de,r=U,n=ne)}}return r+"-"+t}function ur(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,f=n.ids,d=f[2],O=t(0===d.length,i,f[0],n.ctx,f[1]),U=0,W=d.length;U<W;U++)r.push({pos:i+1,ids:d[U],ctx:O})}function ss(e,t){return e.pos-t.pos}function yn(e){var t=[];ur(e,function(i,f,d,O,U){i&&t.push({rev:f+"-"+d,pos:f,opts:U})}),t.sort(ss).reverse();for(var r=0,n=t.length;r<n;r++)delete t[r].pos;return t}function oi(e){for(var t=gn(e),r=yn(e.rev_tree),n=[],i=0,f=r.length;i<f;i++){var d=r[i];d.rev!==t&&!d.opts.deleted&&n.push(d.rev)}return n}function io(e){for(var n,t=[],r=e.slice();n=r.pop();){var i=n.pos,f=n.ids,d=f[0],O=f[1],U=f[2],W=0===U.length,q=n.history?n.history.slice():[];q.push({id:d,opts:O}),W&&t.push({pos:i+1-q.length,ids:q});for(var ne=0,de=U.length;ne<de;ne++)r.push({pos:i+1,ids:U[ne],history:q})}return t.reverse()}function os(e,t){return e.pos-t.pos}function ha(e,t,r){var n=function(e,t,r){for(var f,n=0,i=e.length;n<i;)r(e[f=n+i>>>1],t)<0?n=f+1:i=f;return n}(e,t,r);e.splice(n,0,t)}function ai(e,t){for(var r,n,i=t,f=e.length;i<f;i++){var d=e[i],O=[d.id,d.opts,[]];n?(n[2].push(O),n=O):r=n=O}return r}function pa(e,t){return e[0]<t[0]?-1:1}function as(e,t){for(var r=[{tree1:e,tree2:t}],n=!1;r.length>0;){var i=r.pop(),f=i.tree1,d=i.tree2;(f[1].status||d[1].status)&&(f[1].status="available"===f[1].status||"available"===d[1].status?"available":"missing");for(var O=0;O<d[2].length;O++)if(f[2][0]){for(var U=!1,W=0;W<f[2].length;W++)f[2][W][0]===d[2][O][0]&&(r.push({tree1:f[2][W],tree2:d[2][O]}),U=!0);U||(n="new_branch",ha(f[2],d[2][O],pa))}else n="new_leaf",f[2][0]=d[2][O]}return{conflicts:n,tree:e}}function us(e,t,r){var d,n=[],i=!1,f=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var O=0,U=e.length;O<U;O++){var W=e[O];if(W.pos===t.pos&&W.ids[0]===t.ids[0])d=as(W.ids,t.ids),n.push({pos:W.pos,ids:d.tree}),i=i||d.conflicts,f=!0;else if(!0!==r){var q=W.pos<t.pos?W:t,ne=W.pos<t.pos?t:W,De=[],he=[];for(he.push({ids:q.ids,diff:ne.pos-q.pos,parent:null,parentIdx:null});he.length>0;){var ee=he.pop();if(0!==ee.diff)for(var fe=ee.ids[2],Se=0,Oe=fe.length;Se<Oe;Se++)he.push({ids:fe[Se],diff:ee.diff-1,parent:ee.ids,parentIdx:Se});else ee.ids[0]===ne.ids[0]&&De.push(ee)}var be=De[0];be?(d=as(be.ids,ne.ids),be.parent[2][be.parentIdx]=d.tree,n.push({pos:q.pos,ids:q.ids}),i=i||d.conflicts,f=!0):n.push(W)}else n.push(W)}return f||n.push(t),n.sort(os),{tree:n,conflicts:i||"internal_node"}}function Dr(e,t,r){var n=us(e,t),i=function(e,t){for(var n,i,r=io(e),f=0,d=r.length;f<d;f++){var W,O=r[f],U=O.ids;if(U.length>t){n||(n={});var q=U.length-t;W={pos:O.pos+q,ids:ai(U,q)};for(var ne=0;ne<q;ne++)n[O.pos+ne+"-"+U[ne].id]=!0}else W={pos:O.pos,ids:ai(U,0)};i=i?us(i,W,!0).tree:[W]}return n&&ur(i,function(De,he,ee){delete n[he+"-"+ee]}),{tree:i,revs:n?Object.keys(n):[]}}(n.tree,r);return{tree:i.tree,stemmedRevs:i.revs,conflicts:n.conflicts}}function ma(e){return e.ids}function Gr(e,t){t||(t=gn(e));for(var i,r=t.substring(t.indexOf("-")+1),n=e.rev_tree.map(ma);i=n.pop();){if(i[0]===r)return!!i[1].deleted;n=n.concat(i[2])}}function nn(e){return/^_local/.test(e)}function ui(e){return e.reduce(function(t,r){return t[r]=!0,t},{})}var oo=ui(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),ya=ui(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Oi(e){if(!/^\d+-/.test(e))return Ne(_e);var t=e.indexOf("-"),r=e.substring(0,t),n=e.substring(t+1);return{prefix:parseInt(r,10),id:n}}function ao(e,t,r){r||(r={deterministic_revs:!0});var n,i,f,d={status:"available"};if(e._deleted&&(d.deleted=!0),t)if(e._id||(e._id=si()),i=no(e,r.deterministic_revs),e._rev){if((f=Oi(e._rev)).error)return f;e._rev_tree=[{pos:f.prefix,ids:[f.id,{status:"missing"},[[i,d,[]]]]}],n=f.prefix+1}else e._rev_tree=[{pos:1,ids:[i,d,[]]}],n=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var r=e.start-e.ids.length+1,n=e.ids,i=[n[0],t,[]],f=1,d=n.length;f<d;f++)i=[n[f],{status:"missing"},[i]];return[{pos:r,ids:i}]}(e._revisions,d),n=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if((f=Oi(e._rev)).error)return f;e._rev_tree=[{pos:n=f.prefix,ids:[i=f.id,d,[]]}]}Js(e._id),e._rev=n+"-"+i;var O={metadata:{},data:{}};for(var U in e)if(Object.prototype.hasOwnProperty.call(e,U)){var W="_"===U[0];if(W&&!oo[U]){var q=Ne(J,U);throw q.message=J.message+": "+U,q}W&&!ya[U]?O.metadata[U.slice(1)]=e[U]:O.data[U]=e[U]}return O}function Ea(e,t,r){if(e.stub)return r();"string"==typeof e.data?function(e,t,r){var n=function(e){try{return _r(e)}catch{return{error:Ne(pe,"Attachment is not a valid base64 string")}}}(e.data);if(n.error)return r(n.error);e.length=n.length,e.data="blob"===t?Vr(n,e.content_type):"base64"===t?cr(n):n,Mn(n,function(i){e.digest="md5-"+i,r()})}(e,t,r):function(e,t,r){Mn(e.data,function(n){e.digest="md5-"+n,e.length=e.data.size||e.data.length||0,"binary"===t?Mt(e.data,function(i){e.data=i,r()}):"base64"===t?function(e,t){Mt(e,function(r){t(cr(r))})}(e.data,function(i){e.data=i,r()}):r()})}(e,t,r)}function fo(e,t,r,n,i,f,d,O,U){e=e||1e3;var q=O.new_edits,ne=new w,de=0,De=t.length;function he(){++de===De&&U&&U()}t.forEach(function(ee,fe){if(ee._id&&nn(ee._id))r[ee._deleted?"_removeLocal":"_putLocal"](ee,{ctx:i},function(be,xe){f[fe]=be||xe,he()});else{var Oe=ee.metadata.id;ne.has(Oe)?(De--,ne.get(Oe).push([ee,fe])):ne.set(Oe,[[ee,fe]])}}),ne.forEach(function(ee,fe){var Se=0;function Oe(){++Se<ee.length?be():he()}function be(){var xe=ee[Se],Re=xe[0],Ge=xe[1];if(n.has(fe))!function(e,t,r,n,i,f,d,O){if(function(e,t){for(var d,r=e.slice(),n=t.split("-"),i=parseInt(n[0],10),f=n[1];d=r.pop();){if(d.pos===i&&d.ids[0]===f)return!0;for(var O=d.ids[2],U=0,W=O.length;U<W;U++)r.push({pos:d.pos+1,ids:O[U]})}return!1}(t.rev_tree,r.metadata.rev)&&!O)return n[i]=r,f();var U=t.winningRev||gn(t),W="deleted"in t?t.deleted:Gr(t,U),q="deleted"in r.metadata?r.metadata.deleted:Gr(r.metadata),ne=/^1-/.test(r.metadata.rev);if(W&&!q&&O&&ne){var de=r.data;de._rev=U,de._id=r.metadata.id,r=ao(de,O)}var De=Dr(t.rev_tree,r.metadata.rev_tree[0],e);if(O&&(W&&q&&"new_leaf"!==De.conflicts||!W&&"new_leaf"!==De.conflicts||W&&!q&&"new_branch"===De.conflicts)){var ee=Ne(v);return n[i]=ee,f()}var fe=r.metadata.rev;r.metadata.rev_tree=De.tree,r.stemmedRevs=De.stemmedRevs||[],t.rev_map&&(r.metadata.rev_map=t.rev_map);var Se=gn(r.metadata),Oe=Gr(r.metadata,Se),be=W===Oe?0:W<Oe?-1:1;d(r,Se,Oe,fe===Se?Oe:Gr(r.metadata,fe),!0,be,i,f)}(e,n.get(fe),Re,f,Ge,Oe,d,q);else{var We=Dr([],Re.metadata.rev_tree[0],e);Re.metadata.rev_tree=We.tree,Re.stemmedRevs=We.stemmedRevs||[],function(ee,fe,Se){var Oe=gn(ee.metadata),be=Gr(ee.metadata,Oe);if("was_delete"in O&&be)return f[fe]=Ne(o,"deleted"),Se();var xe=q&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(ee);if(xe){var Re=Ne(v);return f[fe]=Re,Se()}d(ee,Oe,be,be,!1,be?0:1,fe,Se)}(Re,Ge,Oe)}}be()})}var Pi=l(2899);function Ii(e){try{return JSON.stringify(e)}catch{return Pi.stringify(e)}}var tr="document-store",lr="by-sequence",Pr="attach-store",sn="attach-seq-store",mr="meta-store",Ur="local-store",Ti="detect-blob-support";function kr(e){return function(t){var r="unknown_error";t.target&&t.target.error&&(r=t.target.error.name||t.target.error.message),e(Ne(ie,r))}}function ls(e,t,r){return{data:Ii(e),winningRev:t,deletedOrLocal:r?"1":"0",seq:e.seq,id:e.id}}function _n(e){if(!e)return null;var t=function(e){try{return JSON.parse(e)}catch{return Pi.parse(e)}}(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function Ri(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function fs(e,t,r,n){r?n(e?"string"!=typeof e?e:je(e,t):pr([""],{type:t})):e?"string"!=typeof e?kt(e,function(i){n(cr(i))}):n(e):n("")}function Ca(e,t,r,n){var i=Object.keys(e._attachments||{});if(!i.length)return n&&n();var f=0;function d(){++f===i.length&&n&&n()}i.forEach(function(U){t.attachments&&t.include_docs?function(U,W){var q=U._attachments[W],ne=q.digest;r.objectStore(Pr).get(ne).onsuccess=function(De){q.body=De.target.result.body,d()}}(e,U):(e._attachments[U].stub=!0,d())})}function ci(e,t){return Promise.all(e.map(function(r){if(r.doc&&r.doc._attachments){var n=Object.keys(r.doc._attachments);return Promise.all(n.map(function(i){var f=r.doc._attachments[i];if("body"in f){var d=f.body,O=f.content_type;return new Promise(function(U){fs(d,O,t,function(W){r.doc._attachments[i]=kn(vn(f,["digest","content_type"]),{data:W}),U()})})}}))}}))}function po(e,t,r){var n=[],i=r.objectStore(lr),f=r.objectStore(Pr),d=r.objectStore(sn),O=e.length;function U(){--O||!n.length||n.forEach(function(q){d.index("digestSeq").count(IDBKeyRange.bound(q+"::",q+"::\uffff",!1,!1)).onsuccess=function(de){de.target.result||f.delete(q)}})}e.forEach(function(q){i.index("_doc_id_rev").getKey(t+"::"+q).onsuccess=function(De){var he=De.target.result;if("number"!=typeof he)return U();i.delete(he),d.index("seq").openCursor(IDBKeyRange.only(he)).onsuccess=function(fe){var Se=fe.target.result;if(Se){var Oe=Se.value.digestSeq.split("::")[0];n.push(Oe),d.delete(Se.primaryKey),Se.continue()}else U()}}})}function Ar(e,t,r){try{return{txn:e.transaction(t,r)}}catch(n){return{error:n}}}var Fn=new Ue;function Lr(e,t,r,n,i,f){for(var O,U,W,q,ne,de,De,he,d=t.docs,ee=0,fe=d.length;ee<fe;ee++){var Se=d[ee];Se._id&&nn(Se._id)||(Se=d[ee]=ao(Se,r.new_edits,e)).error&&!De&&(De=Se)}if(De)return f(De);var Oe=!1,be=0,xe=new Array(d.length),Re=new w,Ge=!1;function bt(){Oe=!0,It()}function It(){!he||!Oe||(he.docCount+=be,de.put(he))}function Ft(){Ge||(Fn.notify(n._meta.name),f(null,xe))}function $t(He,qe,st,vt,at,gt,pt,Ye){He.metadata.winningRev=qe,He.metadata.deleted=st;var mt=He.data;if(mt._id=He.metadata.id,mt._rev=He.metadata.rev,vt&&(mt._deleted=!0),mt._attachments&&Object.keys(mt._attachments).length)return function(He,qe,st,vt,at,gt){var Ye=0,mt=Object.keys(He.data._attachments);function Pt(){Ye===mt.length&&Ie(He,qe,st,vt,at,gt)}function Qt(){Ye++,Pt()}mt.forEach(function(Kt){var zt=He.data._attachments[Kt];if(zt.stub)Ye++,Pt();else{var Ht=zt.data;delete zt.data,zt.revpos=parseInt(qe,10),function(He,qe,st){q.count(He).onsuccess=function(at){if(at.target.result)return st();q.put({digest:He,body:qe}).onsuccess=st}}(zt.digest,Ht,Qt)}})}(He,qe,st,at,pt,Ye);be+=gt,It(),Ie(He,qe,st,at,pt,Ye)}function Ie(He,qe,st,vt,at,gt){var pt=He.data,Ye=He.metadata;function mt(zt){var Ht=He.stemmedRevs||[];vt&&n.auto_compaction&&(Ht=Ht.concat(function(e){var t=[];return ur(e.rev_tree,function(r,n,i,f,d){"available"===d.status&&!r&&(t.push(n+"-"+i),d.status="missing")}),t}(He.metadata))),Ht&&Ht.length&&po(Ht,He.metadata.id,O),Ye.seq=zt.target.result;var ar=ls(Ye,qe,st);U.put(ar).onsuccess=Qt}function Qt(){xe[at]={ok:!0,id:Ye.id,rev:Ye.rev},Re.set(He.metadata.id,He.metadata),function(He,qe,st){var vt=0,at=Object.keys(He.data._attachments||{});if(!at.length)return st();function gt(){++vt===at.length&&st()}function pt(mt){var Qt=ne.put({seq:qe,digestSeq:He.data._attachments[mt].digest+"::"+qe});Qt.onsuccess=gt,Qt.onerror=function(Kt){Kt.preventDefault(),Kt.stopPropagation(),gt()}}for(var Ye=0;Ye<at.length;Ye++)pt(at[Ye])}(He,Ye.seq,gt)}pt._doc_id_rev=Ye.id+"::"+Ye.rev,delete pt._id,delete pt._rev;var Kt=W.put(pt);Kt.onsuccess=mt,Kt.onerror=function(zt){zt.preventDefault(),zt.stopPropagation(),W.index("_doc_id_rev").getKey(pt._doc_id_rev).onsuccess=function(qr){W.put(pt,qr.target.result).onsuccess=mt}}}!function(e,t,r){if(!e.length)return r();var i,n=0;function f(){n++,e.length===n&&(i?r(i):r())}e.forEach(function(d){var O=d.data&&d.data._attachments?Object.keys(d.data._attachments):[],U=0;if(!O.length)return f();function W(ne){i=ne,++U===O.length&&f()}for(var q in d.data._attachments)d.data._attachments.hasOwnProperty(q)&&Ea(d.data._attachments[q],t,W)})}(d,n._meta.blobSupport?"blob":"base64",function(He){if(He)return f(He);!function(){var qe=Ar(i,[tr,lr,Pr,Ur,sn,mr],"readwrite");if(qe.error)return f(qe.error);(O=qe.txn).onabort=kr(f),O.ontimeout=kr(f),O.oncomplete=Ft,U=O.objectStore(tr),W=O.objectStore(lr),q=O.objectStore(Pr),ne=O.objectStore(sn),(de=O.objectStore(mr)).get(mr).onsuccess=function(st){he=st.target.result,It()},function(He){var qe=[];if(d.forEach(function(gt){gt.data&&gt.data._attachments&&Object.keys(gt.data._attachments).forEach(function(pt){var Ye=gt.data._attachments[pt];Ye.stub&&qe.push(Ye.digest)})}),!qe.length)return He();var vt,st=0;qe.forEach(function(gt){!function(He,qe){q.get(He).onsuccess=function(vt){if(vt.target.result)qe();else{var at=Ne(ce,"unknown stub attachment with digest "+He);at.status=412,qe(at)}}}(gt,function(pt){pt&&!vt&&(vt=pt),++st===qe.length&&He(vt)})})}(function(st){if(st)return Ge=!0,f(st);!function(){if(d.length)for(var He=0,vt=0,at=d.length;vt<at;vt++){var gt=d[vt];gt._id&&nn(gt._id)?qe():U.get(gt.metadata.id).onsuccess=st}function qe(){++He===d.length&&fo(e.revs_limit,d,n,Re,O,xe,$t,r,bt)}function st(Ye){var mt=_n(Ye.target.result);mt&&Re.set(mt.id,mt),qe()}}()})}()})}function Mi(e,t,r,n,i){var d,O,U;function W(De){O=De.target.result,d&&i(d,O,U)}function q(De){d=De.target.result,O&&i(d,O,U)}function de(De){var he=De.target.result;if(!he)return i();i([he.key],[he.value],he)}-1===n&&(n=1e3),"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&n>1&&!r?(U={continue:function(){if(!d.length)return i();var he,De=d[d.length-1];if(t&&t.upper)try{he=IDBKeyRange.bound(De,t.upper,!0,t.upperOpen)}catch(ee){if("DataError"===ee.name&&0===ee.code)return i()}else he=IDBKeyRange.lowerBound(De,!0);d=null,O=null,e.getAll(t=he,n).onsuccess=W,e.getAllKeys(t,n).onsuccess=q}},e.getAll(t,n).onsuccess=W,e.getAllKeys(t,n).onsuccess=q):r?e.openCursor(t,"prev").onsuccess=de:e.openCursor(t).onsuccess=de}var xi=!1,ds=[];function yo(){xi||!ds.length||(xi=!0,ds.shift()())}function Ia(e,t,r,n){if((e=er(e)).continuous){var i=r+":"+si();return Fn.addListener(r,i,t,e),Fn.notify(r),{cancel:function(){Fn.removeListener(r,i)}}}var f=e.doc_ids&&new S(e.doc_ids);e.since=e.since||0;var d=e.since,O="limit"in e?e.limit:-1;0===O&&(O=1);var de,De,he,ee,U=[],W=0,q=function(e){var t={},r=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(i){i.doc||(i.doc={});var f=r&&function(e,t,r){try{return!e(t,r)}catch(i){var n="Filter function threw: "+i.toString();return Ne(G,n)}}(e.filter,i.doc,t);if("object"==typeof f)return f;if(f)return!1;if(e.include_docs){if(!e.attachments)for(var d in i.doc._attachments)i.doc._attachments.hasOwnProperty(d)&&(i.doc._attachments[d].stub=!0)}else delete i.doc;return!0}}(e),ne=new w;function Se(Ke,bt,dt,It){return dt.seq!==bt?It():dt.winningRev===Ke._rev?It(dt,Ke):void(ee.get(Ke._id+"::"+dt.winningRev).onsuccess=function(St){It(dt,Ri(St.target.result))})}function be(){e.complete(null,{results:U,last_seq:d})}var Re=[tr,lr];e.attachments&&Re.push(Pr);var Ge=Ar(n,Re,"readonly");if(Ge.error)return e.complete(Ge.error);(de=Ge.txn).onabort=kr(e.complete),de.oncomplete=function(){!e.continuous&&e.attachments?ci(U).then(be):be()},De=de.objectStore(lr),he=de.objectStore(tr),ee=De.index("_doc_id_rev"),Mi(De,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,O,function(Ke,bt,dt){if(dt&&Ke.length){var It=new Array(Ke.length),Ut=new Array(Ke.length),xt=0;bt.forEach(function($t,Ie){!function(Ke,bt,dt){if(f&&!f.has(Ke._id))return dt();var It=ne.get(Ke._id);if(It)return Se(Ke,bt,It,dt);he.get(Ke._id).onsuccess=function(Ut){It=_n(Ut.target.result),ne.set(Ke._id,It),Se(Ke,bt,It,dt)}}(Ri($t),Ke[Ie],function(Xe,He){Ut[Ie]=Xe,It[Ie]=He,++xt===Ke.length&&function(){for(var $t=[],Ie=0,Me=It.length;Ie<Me&&W!==O;Ie++){var Fe=It[Ie];Fe&&$t.push(Ft(Ut[Ie],Fe))}Promise.all($t).then(function(He){for(var qe=0,st=He.length;qe<st;qe++)He[qe]&&e.onChange(He[qe])}).catch(e.complete),W!==O&&dt.continue()}()})})}function Ft($t,Ie){var Me=e.processChange(Ie,$t,e);d=Me.seq=$t.seq;var Fe=q(Me);return"object"==typeof Fe?Promise.reject(Fe):Fe?(W++,e.return_docs&&U.push(Me),e.attachments&&e.include_docs?new Promise(function(Xe){Ca(Ie,e,de,function(){ci([Me],e.binary).then(function(){Xe(Me)})})}):Promise.resolve(Me)):Promise.resolve()}})}var hs,Nn=new w,ki=new w;function ps(e,t){var r=this;!function(e,t,r){ds.push(function(){e(function(f,d){(function(e,t,r,n){try{e(t,r)}catch(i){n.emit("error",i)}})(t,f,d,r),xi=!1,R()(function(){yo()})})}),yo()}(function(n){!function(e,t,r){var n=t.name,i=null;function d(he,ee){var fe=he.objectStore(tr);fe.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),fe.openCursor().onsuccess=function(Se){var Oe=Se.target.result;if(Oe){var be=Oe.value,xe=Gr(be);be.deletedOrLocal=xe?"1":"0",fe.put(be),Oe.continue()}else ee()}}function U(he,ee){var fe=he.objectStore(Ur),Se=he.objectStore(tr),Oe=he.objectStore(lr);Se.openCursor().onsuccess=function(xe){var Re=xe.target.result;if(Re){var Ge=Re.value,We=Ge.id,Ke=nn(We),bt=gn(Ge);if(Ke){var dt=We+"::"+bt,It=We+"::",Ut=We+"::~",Ft=Oe.index("_doc_id_rev"),St=IDBKeyRange.bound(It,Ut,!1,!1),xt=Ft.openCursor(St);xt.onsuccess=function($t){if(xt=$t.target.result){var Ie=xt.value;Ie._doc_id_rev===dt&&fe.put(Ie),Oe.delete(xt.primaryKey),xt.continue()}else Se.delete(Re.primaryKey),Re.continue()}}else Re.continue()}else ee&&ee()}}function q(he,ee){var fe=he.objectStore(lr),Se=he.objectStore(Pr),Oe=he.objectStore(sn);Se.count().onsuccess=function(xe){if(!xe.target.result)return ee();fe.openCursor().onsuccess=function(Ge){var We=Ge.target.result;if(!We)return ee();for(var Ke=We.value,bt=We.primaryKey,dt=Object.keys(Ke._attachments||{}),It={},Ut=0;Ut<dt.length;Ut++)It[Ke._attachments[dt[Ut]].digest]=!0;var St=Object.keys(It);for(Ut=0;Ut<St.length;Ut++)Oe.put({seq:bt,digestSeq:St[Ut]+"::"+bt});We.continue()}}}function ne(he){var fe=he.objectStore(lr),Se=he.objectStore(tr);Se.openCursor().onsuccess=function(be){var Ke,bt,dt,It,xe=be.target.result;if(xe){var Re=function(be){return be.data?_n(be):(be.deleted="1"===be.deletedOrLocal,be)}(xe.value);if(Re.winningRev=Re.winningRev||gn(Re),Re.seq)return We();Ke=Re.id+"::",bt=Re.id+"::\uffff",dt=fe.index("_doc_id_rev").openCursor(IDBKeyRange.bound(Ke,bt)),It=0,dt.onsuccess=function(Ut){var Ft=Ut.target.result;if(!Ft)return Re.seq=It,We();var St=Ft.primaryKey;St>It&&(It=St),Ft.continue()}}function We(){var Ke=ls(Re,Re.winningRev,Re.deleted);Se.put(Ke).onsuccess=function(){xe.continue()}}}}e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=jr(function(he){he(null,e._meta.instanceId)}),e._bulkDocs=function(ee,fe,Se){Lr(t,ee,fe,e,i,Se)},e._get=function(ee,fe,Se){var Oe,be,xe,Re=fe.ctx;if(!Re){var Ge=Ar(i,[tr,lr,Pr],"readonly");if(Ge.error)return Se(Ge.error);Re=Ge.txn}function We(){Se(xe,{doc:Oe,metadata:be,ctx:Re})}Re.objectStore(tr).get(ee).onsuccess=function(Ke){if(!(be=_n(Ke.target.result)))return xe=Ne(o,"missing"),We();var bt;if(fe.rev)bt=fe.latest?function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,f=n.ids,d=f[0],O=f[1],U=f[2],W=0===U.length,q=n.history?n.history.slice():[];if(q.push({id:d,pos:i,opts:O}),W)for(var ne=0,de=q.length;ne<de;ne++){var De=q[ne];if(De.pos+"-"+De.id===e)return i+"-"+d}for(var ee=0,fe=U.length;ee<fe;ee++)r.push({pos:i+1,ids:U[ee],history:q})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(fe.rev,be):fe.rev;else if(bt=be.winningRev,Gr(be))return xe=Ne(o,"deleted"),We();var It=Re.objectStore(lr),Ut=be.id+"::"+bt;It.index("_doc_id_rev").get(Ut).onsuccess=function(Ft){if((Oe=Ft.target.result)&&(Oe=Ri(Oe)),!Oe)return xe=Ne(o,"missing"),We();We()}}},e._getAttachment=function(he,ee,fe,Se,Oe){var be;if(Se.ctx)be=Se.ctx;else{var xe=Ar(i,[tr,lr,Pr],"readonly");if(xe.error)return Oe(xe.error);be=xe.txn}var Re=fe.digest,Ge=fe.content_type;be.objectStore(Pr).get(Re).onsuccess=function(We){fs(We.target.result.body,Ge,Se.binary,function(bt){Oe(null,bt)})}},e._info=function(ee){var fe,Se,Oe=Ar(i,[mr,lr],"readonly");if(Oe.error)return ee(Oe.error);var be=Oe.txn;be.objectStore(mr).get(mr).onsuccess=function(xe){Se=xe.target.result.docCount},be.objectStore(lr).openCursor(null,"prev").onsuccess=function(xe){var Re=xe.target.result;fe=Re?Re.key:0},be.oncomplete=function(){ee(null,{doc_count:Se,update_seq:fe,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(ee,fe){!function(e,t,r){var q,ne,d="keys"in e&&e.keys,O=e.skip||0,U="number"==typeof e.limit?e.limit:-1;if(!d&&(q=function(e,t,r,n,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!r,!1):IDBKeyRange.bound(e,t,!1,!r);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!r):IDBKeyRange.upperBound(t,!r);if(n)return IDBKeyRange.only(n)}catch(f){return{error:f}}return null}("startkey"in e&&e.startkey,"endkey"in e&&e.endkey,!1!==e.inclusive_end,"key"in e&&e.key,e.descending),(ne=q&&q.error)&&("DataError"!==ne.name||0!==ne.code)))return r(Ne(ie,ne.name));var de=[tr,lr,mr];e.attachments&&de.push(Pr);var De=Ar(t,de,"readonly");if(De.error)return r(De.error);var he=De.txn;he.oncomplete=function(){e.attachments?ci(be,e.binary).then(Ut):Ut()},he.onabort=kr(r);var xe,Re,xt,ee=he.objectStore(tr),fe=he.objectStore(lr),Se=he.objectStore(mr),Oe=fe.index("_doc_id_rev"),be=[];function Ke(St,xt){var $t={id:xt.id,key:xt.id,value:{rev:St}};xt.deleted?d&&(be.push($t),$t.value.deleted=!0,$t.doc=null):O--<=0&&(be.push($t),e.include_docs&&function(St,xt,$t){Oe.get(St.id+"::"+$t).onsuccess=function(Fe){if(xt.doc=Ri(Fe.target.result)||{},e.conflicts){var Xe=oi(St);Xe.length&&(xt.doc._conflicts=Xe)}Ca(xt.doc,e,he)}}(xt,$t,St))}function bt(St){for(var xt=0,$t=St.length;xt<$t&&be.length!==U;xt++){var Ie=St[xt];if(Ie.error&&d)be.push(Ie);else{var Me=_n(Ie);Ke(Me.winningRev,Me)}}}function dt(St,xt,$t){!$t||(bt(xt),be.length<U&&$t.continue())}function Ut(){var St={total_rows:xe,offset:e.skip,rows:be};e.update_seq&&void 0!==Re&&(St.update_seq=Re),r(null,St)}if(Se.get(mr).onsuccess=function(St){xe=St.target.result.docCount},e.update_seq&&(xt=function(St){St.target.result&&St.target.result.length>0&&(Re=St.target.result[0])},fe.openCursor(null,"prev").onsuccess=function(Ie){var Me=Ie.target.result,Fe=void 0;return Me&&Me.key&&(Fe=Me.key),xt({target:{result:[Fe]}})}),!ne&&0!==U){if(d)return function(e,t,r){var n=new Array(e.length),i=0;e.forEach(function(f,d){t.get(f).onsuccess=function(O){n[d]=O.target.result?O.target.result:{key:f,error:"not_found"},++i===e.length&&r(e,n,{})}})}(e.keys,ee,dt);if(-1===U)return function(e,t,r){if("function"!=typeof e.getAll){var n=[];e.openCursor(t).onsuccess=function(f){var d=f.target.result;d?(n.push(d.value),d.continue()):r({target:{result:n}})}}else e.getAll(t).onsuccess=r}(ee,q,function(St){var xt=St.target.result;e.descending&&(xt=xt.reverse()),bt(xt)});Mi(ee,q,e.descending,U+O,dt)}}(ee,i,fe)},e._changes=function(ee){return Ia(ee,e,n,i)},e._close=function(he){i.close(),Nn.delete(n),he()},e._getRevisionTree=function(he,ee){var fe=Ar(i,[tr],"readonly");if(fe.error)return ee(fe.error);fe.txn.objectStore(tr).get(he).onsuccess=function(be){var xe=_n(be.target.result);xe?ee(null,xe.rev_tree):ee(Ne(o))}},e._doCompaction=function(he,ee,fe){var Oe=Ar(i,[tr,lr,Pr,sn],"readwrite");if(Oe.error)return fe(Oe.error);var be=Oe.txn;be.objectStore(tr).get(he).onsuccess=function(Re){var Ge=_n(Re.target.result);ur(Ge.rev_tree,function(bt,dt,It,Ut,Ft){-1!==ee.indexOf(dt+"-"+It)&&(Ft.status="missing")}),po(ee,he,be);var We=Ge.winningRev,Ke=Ge.deleted;be.objectStore(tr).put(ls(Ge,We,Ke))},be.onabort=kr(fe),be.oncomplete=function(){fe()}},e._getLocal=function(he,ee){var fe=Ar(i,[Ur],"readonly");if(fe.error)return ee(fe.error);var Oe=fe.txn.objectStore(Ur).get(he);Oe.onerror=kr(ee),Oe.onsuccess=function(be){var xe=be.target.result;xe?(delete xe._doc_id_rev,ee(null,xe)):ee(Ne(o))}},e._putLocal=function(he,ee,fe){"function"==typeof ee&&(fe=ee,ee={}),delete he._revisions;var Se=he._rev,Oe=he._id;he._rev=Se?"0-"+(parseInt(Se.split("-")[1],10)+1):"0-1";var xe,be=ee.ctx;if(!be){var Re=Ar(i,[Ur],"readwrite");if(Re.error)return fe(Re.error);(be=Re.txn).onerror=kr(fe),be.oncomplete=function(){xe&&fe(null,xe)}}var We,Ge=be.objectStore(Ur);Se?(We=Ge.get(Oe)).onsuccess=function(Ke){var bt=Ke.target.result;bt&&bt._rev===Se?Ge.put(he).onsuccess=function(){xe={ok:!0,id:he._id,rev:he._rev},ee.ctx&&fe(null,xe)}:fe(Ne(v))}:((We=Ge.add(he)).onerror=function(Ke){fe(Ne(v)),Ke.preventDefault(),Ke.stopPropagation()},We.onsuccess=function(){xe={ok:!0,id:he._id,rev:he._rev},ee.ctx&&fe(null,xe)})},e._removeLocal=function(he,ee,fe){"function"==typeof ee&&(fe=ee,ee={});var Se=ee.ctx;if(!Se){var Oe=Ar(i,[Ur],"readwrite");if(Oe.error)return fe(Oe.error);(Se=Oe.txn).oncomplete=function(){be&&fe(null,be)}}var be,xe=he._id,Re=Se.objectStore(Ur),Ge=Re.get(xe);Ge.onerror=kr(fe),Ge.onsuccess=function(We){var Ke=We.target.result;Ke&&Ke._rev===he._rev?(Re.delete(xe),be={ok:!0,id:xe,rev:"0-0"},ee.ctx&&fe(null,be)):fe(Ne(o))}},e._destroy=function(he,ee){Fn.removeAllListeners(n);var fe=ki.get(n);fe&&fe.result&&(fe.result.close(),Nn.delete(n));var Se=indexedDB.deleteDatabase(n);Se.onsuccess=function(){ki.delete(n),se()&&n in localStorage&&delete localStorage[n],ee(null,{ok:!0})},Se.onerror=kr(ee)};var de=Nn.get(n);if(de)return i=de.idb,e._meta=de.global,R()(function(){r(null,e)});var De=indexedDB.open(n,5);ki.set(n,De),De.onupgradeneeded=function(he){var ee=he.target.result;if(he.oldVersion<1)return function(he){var ee=he.createObjectStore(tr,{keyPath:"id"});he.createObjectStore(lr,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),he.createObjectStore(Pr,{keyPath:"digest"}),he.createObjectStore(mr,{keyPath:"id",autoIncrement:!1}),he.createObjectStore(Ti),ee.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),he.createObjectStore(Ur,{keyPath:"_id"});var fe=he.createObjectStore(sn,{autoIncrement:!0});fe.createIndex("seq","seq"),fe.createIndex("digestSeq","digestSeq",{unique:!0})}(ee);var fe=he.currentTarget.transaction;he.oldVersion<3&&function(he){he.createObjectStore(Ur,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(ee),he.oldVersion<4&&function(he){var ee=he.createObjectStore(sn,{autoIncrement:!0});ee.createIndex("seq","seq"),ee.createIndex("digestSeq","digestSeq",{unique:!0})}(ee);var Se=[d,U,q,ne],Oe=he.oldVersion;!function be(){var xe=Se[Oe-1];Oe++,xe&&xe(fe,be)}()},De.onsuccess=function(he){(i=he.target.result).onversionchange=function(){i.close(),Nn.delete(n)},i.onabort=function(We){nt("error","Database has a global failure",We.target.error),i.close(),Nn.delete(n)};var Se,Oe,be,xe,ee=i.transaction([mr,Ti,tr],"readwrite"),fe=!1;function Re(){void 0===be||!fe||(e._meta={name:n,instanceId:xe,blobSupport:be},Nn.set(n,{idb:i,global:e._meta}),r(null,e))}function Ge(){if(void 0!==Oe&&void 0!==Se){var We=n+"_id";We in Se?xe=Se[We]:Se[We]=xe=si(),Se.docCount=Oe,ee.objectStore(mr).put(Se)}}ee.objectStore(mr).get(mr).onsuccess=function(We){Se=We.target.result||{id:mr},Ge()},function(e,t){e.objectStore(tr).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(n){Oe=n.target.result,Ge()}}(ee),hs||(hs=function(e){return new Promise(function(t){var r=pr([""]),n=e.objectStore(Ti).put(r,"key");n.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),f=navigator.userAgent.match(/Edge\//);t(f||!i||parseInt(i[1],10)>=43)},n.onerror=e.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)}}).catch(function(){return!1})}(ee)),hs.then(function(We){be=We,Re()}),ee.oncomplete=function(){fe=!0,Re()},ee.onabort=kr(r)},De.onerror=function(he){var ee=he.target.error&&he.target.error.message;ee?-1!==ee.indexOf("stored database is a higher version")&&(ee=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):ee="Failed to open indexedDB, are you in private browsing mode?",nt("error",ee),r(Ne(ie,ee))}}(r,e,n)},t,r.constructor)}ps.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch{return!1}};const bo=function(e){e.adapter("idb",ps,!0)};function Eo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rr(e,t,r){return t&&Eo(e.prototype,t),r&&Eo(e,r),e}var Li=l(2559),wo=l.n(Li),Ta=l(8624),dr=l.n(Ta),Ra=l(4966),yt=l.n(Ra),So=l(1452),Ma=l.n(So),xa=l(9456),ka=l.n(xa);function Nt(e){var t=e.split("-"),r="RxDB";return t.forEach(function(n){r+=Co(n)}),r+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+r+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+r+");\n        ")}function Bi(e){return"string"!=typeof e&&(e=JSON.stringify(e)),Ma().hash("rxdb-specific-hash-salt"+e)}var Fi=0;function $r(){var e=(new Date).getTime();return e<=Fi&&(e=Fi+1),Fi=e,e}function jn(){return new Promise(function(e){return setTimeout(e,0)})}function Fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){return setTimeout(t,e)})}Promise.resolve(!0);var Br=Promise.resolve(!1),fi=Promise.resolve(null),on=Promise.resolve();function Co(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function an(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}function vs(e){if(!e)throw new Error("ensureNotFalsy() is falsy");return e}function un(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;if(!t&&Array.isArray(e))return e.sort(function(n,i){return"string"==typeof n&&"string"==typeof i?n.localeCompare(i):"object"==typeof n?1:-1}).map(function(n){return un(n,t)});if("object"==typeof e&&!Array.isArray(e)){if(e instanceof RegExp)return e;var r={};return Object.keys(e).sort(function(n,i){return n.localeCompare(i)}).forEach(function(n){r[n]=un(e[n],t)}),r}return e}function Ua(e,t){return t instanceof RegExp?t.toString():t}function Do(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",r="abcdefghijklmnopqrstuvwxyz",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function Un(e){var t={db:e};return"string"==typeof e&&(t={adapter:e,db:void 0}),t}var Zt=function(e){return e&&yt()(e,!1)};function jt(e){return Object.assign({},e)}function ji(e){var t={};for(var r in e)if(e.hasOwnProperty(r))if("object"==typeof e[r]){var n=ji(e[r]);for(var i in n)!n.hasOwnProperty(i)||(t[r+"."+i]=n[i])}else t[r]=e[r];return t}function $n(e){return function(e){var t=e.split("-");return{height:parseInt(t[0],10),hash:t[1]}}(e).height}function En(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r}function Ao(e){return!(!e.includes("/")&&!e.includes("\\"))}function hi(e,t){var r=e.get(t);if(!r)throw new Error("missing value from map "+t);return r}ka()();var Ui_toString=function(t){return"undefined"!=typeof Buffer&&t instanceof Buffer?jn().then(function(){return t.toString()}):new Promise(function(r){var n=new FileReader;n.addEventListener("loadend",function(f){r(f.target.result)}),"[object Uint8Array]"===Object.prototype.toString.call(t)&&(t=new Blob([t])),n.readAsText(t)})};function Fr(e,t){return(Fr=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n})(e,t)}function Et(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Fr(e,t)}function zn(e){return(zn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(e)}function Ka(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wn(e,t,r){return(Wn=Ka()?Reflect.construct:function(i,f,d){var O=[null];O.push.apply(O,f);var W=new(Function.bind.apply(i,O));return d&&Fr(W,d.prototype),W}).apply(null,arguments)}function Kn(e){var t="function"==typeof Map?new Map:void 0;return Kn=function(n){if(null===n||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return Wn(n,arguments,zn(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Fr(i,n)},Kn(e)}var hr={isDevMode:function(){return!1},deepFreezeWhenDevMode:function(t){return t},validatePassword:function(t){throw Nt("encryption")},tunnelErrorMessage:function(t){return"RxDB Error-Code "+t+".\n        - To find out what this means, use the dev-mode-plugin https://pubkey.github.io/rxdb/custom-build.html#dev-mode\n        - Or search for this code https://github.com/pubkey/rxdb/search?q="+t+"\n        "}};function ys(e,t,r){return"RxError ("+t+"):\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length||(t+="Given parameters: {\n",t+=Object.keys(e).map(function(r){var n="[object Object]";try{n=JSON.stringify(e[r],function(i,f){return void 0===f?null:f},2)}catch{}return r+":"+n}).join("\n"),t+="}"),t}(r)}var Po=function(e){function t(n,i){var f,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},O=ys(i,n,d);return(f=e.call(this,O)||this).code=n,f.message=O,f.parameters=d,f.rxdb=!0,f}return Et(t,e),t.prototype.toString=function(){return this.message},rr(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),t}(Kn(Error)),_s=function(e){function t(n,i){var f,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},O=ys(i,n,d);return(f=e.call(this,O)||this).code=n,f.message=O,f.parameters=d,f.rxdb=!0,f}return Et(t,e),t.prototype.toString=function(){return this.message},rr(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),t}(Kn(TypeError));function ze(e,t){return new Po(e,hr.tunnelErrorMessage(e),t)}function Wt(e,t){return new _s(e,hr.tunnelErrorMessage(e),t)}var Hn={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],createRxQuery:[],preQueryMatcher:[],preSortComparator:[],prePrepareQuery:[],preWriteToStorageInstance:[],postReadFromInstance:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[]};function nr(e,t){Hn[e].forEach(function(r){return r(t)})}function bs(e,t){return Promise.all(Hn[e].map(function(r){return r(t)}))}var it=l(5861),Es=l(7757),$e=l.n(Es),mi=l(1135),Vt=l(4004),To=l(1884),Eu="_rxdb_internal";function Qr(e){return $i.apply(this,arguments)}function $i(){return($i=(0,it.Z)($e().mark(function e(t){var r;return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=t.prepareQuery({selector:{}}),d.next=3,t.query(r);case 3:return d.abrupt("return",d.sent.documents);case 6:case"end":return d.stop()}},e)}))).apply(this,arguments)}function Ss(e,t){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,it.Z)($e().mark(function e(t,r){var i;return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.findDocumentsById([r],!1);case 2:if(!(i=d.sent.get(r))){d.next=8;break}return d.abrupt("return",i);case 8:return d.abrupt("return",null);case 9:case"end":return d.stop()}},e)}))).apply(this,arguments)}function Ro(e,t){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,it.Z)($e().mark(function e(t,r){var n,f;return $e().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,t.bulkWrite([r]);case 2:if(!((n=O.sent).error.size>0)){O.next=8;break}throw n.error.values().next().value;case 8:return f=n.success.values().next().value,O.abrupt("return",f);case 10:case"end":return O.stop()}},e)}))).apply(this,arguments)}function As(e,t){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,it.Z)($e().mark(function e(t,r){var i;return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.findLocalDocumentsById([r]);case 2:if(i=d.sent.get(r)){d.next=8;break}return d.abrupt("return",null);case 8:return d.abrupt("return",i);case 9:case"end":return d.stop()}},e)}))).apply(this,arguments)}function Wi(e,t,r,n){var i,d;if("DELETE"!==t.change.operation)if(n){var f={collection:n,doc:t.change.doc};nr("postReadFromInstance",f),i=n._crypter.decrypt(i=f.doc)}else i=t.change.doc;if("INSERT"!==t.change.operation)if(n){var O={collection:n,doc:t.change.previous};nr("postReadFromInstance",O),d=n._crypter.decrypt(d=O.doc)}else d=t.change.previous;return{eventId:t.eventId,documentId:t.documentId,databaseToken:r.token,collectionName:n?n.name:void 0,startTime:t.startTime,endTime:t.endTime,isLocal:e,operation:t.change.operation,documentData:hr.deepFreezeWhenDevMode(i),previousDocumentData:hr.deepFreezeWhenDevMode(d)}}function xo(e,t){return Os.apply(this,arguments)}function Os(){return Os=(0,it.Z)($e().mark(function e(t,r){var n,i,d,O=arguments;return $e().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:n=O.length>2&&void 0!==O[2]&&O[2],i={previous:r.previous?wn(t,jt(r.previous)):void 0,document:wn(t,jt(r.document))};case 2:return W.prev=3,W.next=6,t.database.lockedRun(function(){return Ro(t.storageInstance,i)});case 6:return d=Ps(t,W.sent),W.abrupt("return",d);case 11:return W.prev=11,W.t0=W.catch(3),W.delegateYield($e().mark(function q(){var ne,de,De;return $e().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(de=(ne=W.t0).documentId,!n||409!==ne.status){ee.next=11;break}return ee.next=5,t.database.lockedRun(function(){return Ss(t.storageInstance,de)});case 5:if(De=ee.sent){ee.next=8;break}throw ze("SNH",{args:{writeRow:r}});case 8:i.previous=De,ee.next=16;break;case 11:if(409!==ne.status){ee.next=15;break}throw ze("COL19",{collection:t.name,id:de,pouchDbError:ne,data:r});case 15:throw ne;case 16:case"end":return ee.stop()}},q)})(),"t1",14);case 14:W.next=2;break;case 16:case"end":return W.stop()}},e,null,[[3,11]])})),Os.apply(this,arguments)}function wn(e,t){hr.isDevMode()&&e.schema.fillPrimaryKey(t),t=e._crypter.encrypt(t);var r={collection:e,doc:t};return nr("preWriteToStorageInstance",r),r.doc}function Ps(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={collection:e,doc:t};return nr("postReadFromInstance",n),r?n.doc:e._crypter.decrypt(n.doc)}function gi(e,t){var r=e.schema.fillObjectWithDefaults(t);return e.schema.fillPrimaryKey(r)}function Ha(e){return e+"-local"}function yi(e,t,r,n){return Is.apply(this,arguments)}function Is(){return(Is=(0,it.Z)($e().mark(function e(t,r,n,i){var f;return $e().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return n.broadcastChannel=r.broadcastChannel,W.next=3,Promise.all([r.storage.createStorageInstance(n),r.storage.createKeyObjectStorageInstance({databaseName:r.name,collectionName:Ha(t),options:i,idleQueue:r.idleQueue,broadcastChannel:r.broadcastChannel})]);case 3:return W.abrupt("return",{storageInstance:(f=W.sent)[0],localDocumentsStore:f[1]});case 7:case"end":return W.stop()}},e)}))).apply(this,arguments)}function Ts(e,t){var r;return{version:e,type:"object",primaryKey:t,properties:(r={},r[t]={type:"string"},r),required:[t]}}function Sn(e,t){var r=t;return r=an(r="properties."+(r=r.replace(/\./g,".properties."))),dr().get(e,r)}var e,_i={get _data(){if(this.isInstanceOfRxDocument)return this._dataSync$.getValue()},get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this._isDeleted$.asObservable()},get deleted(){if(this.isInstanceOfRxDocument)return this._isDeleted$.getValue()},get $(){return this._dataSync$.asObservable().pipe((0,Vt.U)(function(t){return hr.deepFreezeWhenDevMode(t)}))},_handleChangeEvent:function(t){if(t.documentId===this.primary){var n=$n(((e=t).documentData?e.documentData:e.previousDocumentData)._rev);if(!($n(this._data._rev)>n))switch(t.operation){case"INSERT":break;case"UPDATE":this._dataSync$.next(t.documentData);break;case"DELETE":this.collection._docCache.delete(this.primary),this._isDeleted$.next(!0)}}var e},$emit:function(t){return this.collection.$emit(t)},get$:function(t){if(t.includes(".item."))throw ze("DOC1",{path:t});if(t===this.primaryPath)throw ze("DOC2");if(this.collection.schema.finalFields.includes(t))throw ze("DOC3",{path:t});if(!Sn(this.collection.schema.jsonSchema,t))throw ze("DOC4",{path:t});return this._dataSync$.pipe((0,Vt.U)(function(n){return dr().get(n,t)}),(0,To.x)())},populate:function(t){var r=Sn(this.collection.schema.jsonSchema,t),n=this.get(t);if(!n)return fi;if(!r)throw ze("DOC5",{path:t});if(!r.ref)throw ze("DOC6",{path:t,schemaObj:r});var i=this.collection.database.collections[r.ref];if(!i)throw ze("DOC7",{ref:r.ref,path:t,schemaObj:r});return"array"===r.type?i.findByIds(n).then(function(f){var d=f.values();return Array.from(d)}):i.findOne(n).exec()},get:function(t){if(this._data){var r=dr().get(this._data,t);return"object"!=typeof r||Array.isArray(r)?hr.deepFreezeWhenDevMode(r):(r=Zt(r),Lo(this.collection.schema,r,t,this),r)}},toJSON:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)return hr.deepFreezeWhenDevMode(this._data);var r=jt(this._data);return delete r._rev,delete r._attachments,hr.deepFreezeWhenDevMode(r)},set:function(t,r){if(!this._isTemporary)throw Wt("DOC16",{objPath:t,value:r});if("string"!=typeof t)throw Wt("DOC15",{objPath:t,value:r});if(!Object.is(this.get(t),r)){var n=t.split(".");n.pop();var i=n.join(".");if(void 0===dr().get(this._data,i))throw ze("DOC10",{childpath:t,rootPath:i});return dr().set(this._data,t,r),this}},update:function(t){throw Nt("update")},putAttachment:function(){throw Nt("attachments")},getAttachment:function(){throw Nt("attachments")},allAttachments:function(){throw Nt("attachments")},get allAttachments$(){throw Nt("attachments")},atomicUpdate:function(t){var r=this;return new Promise(function(n,i){r._atomicQueue=r._atomicQueue.then((0,it.Z)($e().mark(function f(){var d,O,U;return $e().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:d=!1;case 1:if(d){q.next=24;break}return O=r._dataSync$.getValue(),q.prev=3,q.next=6,t(Zt(r._dataSync$.getValue()),r);case 6:return U=q.sent,r.collection&&(U=r.collection.schema.fillObjectWithDefaults(U)),q.next=10,r._saveData(U,O);case 10:d=!0,q.next=22;break;case 13:if(q.prev=13,q.t0=q.catch(3),!(e=q.t0).parameters||!e.parameters.pouchDbError||409!==e.parameters.pouchDbError.status){q.next=20;break}return q.next=18,jn();case 18:q.next=22;break;case 20:return i(q.t0),q.abrupt("return");case 22:q.next=1;break;case 24:n(r);case 25:case"end":return q.stop()}var e},f,null,[[3,13]])})))})},atomicPatch:function(t){return this.atomicUpdate(function(r){return Object.entries(t).forEach(function(n){r[n[0]]=n[1]}),r})},_saveData:(e=(0,it.Z)($e().mark(function r(n,i){return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=n,!this._isDeleted$.getValue()){d.next=3;break}throw ze("DOC11",{id:this.primary,document:this});case 3:return this.collection.schema.validateChange(i,n),d.next=6,this.collection._runHooks("pre","save",n,this);case 6:return this.collection.schema.validate(n),d.next=9,xo(this.collection,{previous:i,document:n});case 9:return d.abrupt("return",this.collection._runHooks("post","save",n,this));case 10:case"end":return d.stop()}},r,this)})),function(r,n){return e.apply(this,arguments)}),save:function(){var t=this;if(!this._isTemporary)throw ze("DOC17",{id:this.primary,document:this});return this.collection.insert(this).then(function(){return t._isTemporary=!1,t.collection._docCache.set(t.primary,t),t._dataSync$.next(t._data),!0})},remove:function(){var t=this;if(this.deleted)return Promise.reject(ze("DOC13",{document:this,id:this.primary}));var r=jt(this._data);return this.collection._runHooks("pre","remove",r,this).then(function(){return r._deleted=!0,$r(),xo(t.collection,{previous:t._data,document:r})}).then(function(){return t.collection._runHooks("post","remove",r,t)}).then(function(){return t})},destroy:function(){throw ze("DOC14")}};function ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_i,t=function(n,i){this.collection=n,this._isTemporary=!1,this._dataSync$=new mi.X(i),this._isDeleted$=new mi.X(!1),this._atomicQueue=on,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function Lo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!==t){var i=Sn(e.jsonSchema,r);void 0!==i&&(i.properties&&(i=i.properties),Object.keys(i).forEach(function(f){var d=an(r+"."+f);t.__defineGetter__(f,function(){var O=n||this;if(O.get&&"function"==typeof O.get)return O.get(d)}),Object.defineProperty(t,f+"$",{get:function(){return(n||this).get$(d)},enumerable:!1,configurable:!1}),Object.defineProperty(t,f+"_",{get:function(){return(n||this).populate(d)},enumerable:!1,configurable:!1}),t.__defineSetter__(f,function(O){return(n||this).set(d,O)})}))}}function V(e,t,r){if(r[t.schema.primaryPath]&&r[t.schema.primaryPath].startsWith("_design"))return null;var n=new e(t,r);return nr("createRxDocument",n),n}function C(e){return void 0!==e&&!!e.isInstanceOfRxDocument}var _=function(){function e(r){this.jsonSchema=r,this.indexes=function(e){return(e.indexes||[]).map(function(t){return Array.isArray(t)?t:[t]})}(this.jsonSchema),this.primaryPath=Q(this.jsonSchema.primaryKey),this.finalFields=function(e){var t=Object.keys(e.properties).filter(function(n){return e.properties[n].final}),r=Q(e.primaryKey);return t.push(r),"string"!=typeof e.primaryKey&&e.primaryKey.fields.forEach(function(n){return t.push(n)}),t}(this.jsonSchema),this.jsonSchema.required=this.jsonSchema.required.concat(this.finalFields).filter(function(n){return!n.includes(".")}).filter(function(n,i,f){return f.indexOf(n)===i})}var t=e.prototype;return t.validateChange=function(n,i){var f=this;this.finalFields.forEach(function(d){if(!wo()(n[d],i[d]))throw ze("DOC9",{dataBefore:n,dataAfter:i,fieldName:d,schema:f.jsonSchema})})},t.validate=function(n,i){throw Nt("validate")},t.fillObjectWithDefaults=function(n){return n=jt(n),Object.entries(this.defaultValues).filter(function(i){var f=i[0];return!n.hasOwnProperty(f)||void 0===n[f]}).forEach(function(i){return n[i[0]]=i[1]}),n},t.getDocumentPrototype=function(){var n={};return Lo(this,n,""),En(this,"getDocumentPrototype",function(){return n}),n},t.getPrimaryOfDocumentData=function(n){return le(this.jsonSchema,n)},t.fillPrimaryKey=function(n){var i=jt(n),f=le(this.jsonSchema,n),d=n[this.primaryPath];if(d&&d!==f)throw ze("DOC19",{args:{documentData:n,existingPrimary:d,newPrimary:f},schema:this.jsonSchema});return i[this.primaryPath]=f,i},rr(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"normalized",get:function(){return En(this,"normalized",function(e){var t=un(Zt(e));return e.indexes&&(t.indexes=Array.from(e.indexes)),t}(this.jsonSchema))}},{key:"topLevelFields",get:function(){return Object.keys(this.normalized.properties)}},{key:"defaultValues",get:function(){var n={};return Object.entries(this.normalized.properties).filter(function(i){return i[1].hasOwnProperty("default")}).forEach(function(i){return n[i[0]]=i[1].default}),En(this,"defaultValues",n)}},{key:"crypt",get:function(){return!!(this.jsonSchema.encrypted&&this.jsonSchema.encrypted.length>0||this.jsonSchema.attachments&&this.jsonSchema.attachments.encrypted)}},{key:"encryptedPaths",get:function(){return this.jsonSchema.encrypted||[]}},{key:"hash",get:function(){return En(this,"hash",Bi(this.normalized))}}]),e}();function Q(e){return"string"==typeof e?e:e.key}function le(e,t){if("string"==typeof e.primaryKey)return t[e.primaryKey];var r=e.primaryKey;return r.fields.map(function(n){var i=dr().get(t,n);if(void 0===i)throw ze("DOC18",{args:{field:n,documentData:t}});return i}).join(r.separator)}function rt(e){return(e=Zt(e)).additionalProperties=!1,e.hasOwnProperty("keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes||[],e.required=e.required||[],e.encrypted=e.encrypted||[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.version=e.version||0,e}function Ct(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&nr("preCreateRxSchema",e);var r=new _(rt(e));return nr("createRxSchema",r),r}var Or=function(){function e(r,n){this.password=r,this.schema=n}var t=e.prototype;return t._encryptString=function(n){throw Nt("encryption")},t._decryptString=function(n){throw Nt("encryption")},t.encrypt=function(n){var i=this;if(!this.password)return n;var f=(n=jt(n))._attachments;delete n._attachments;var d=Zt(n);return f&&(d._attachments=f),this.schema.encryptedPaths.forEach(function(O){var U=dr().get(d,O);if(void 0!==U){var W=JSON.stringify(U),q=i._encryptString(W);dr().set(d,O,q)}}),d},t.decrypt=function(n){var i=this;if(!this.password)return n;var f=(n=jt(n))._attachments;delete n._attachments;var d=Zt(n);return f&&(d._attachments=f),this.schema.encryptedPaths.forEach(function(O){var U=dr().get(d,O);if(void 0!==U){var W=i._decryptString(U),q=JSON.parse(W);dr().set(d,O,q)}}),d},e}();function bi(e,t){return new Or(e,t)}var Cn=l(3905),Zn=l(6451),Er=l(5577),zr=l(9300),Zr=l(7579),Ei=l(6063);class Rs extends Zr.x{constructor(t=1/0,r=1/0,n=Ei.l){super(),this._bufferSize=t,this._windowTime=r,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,r)}next(t){const{isStopped:r,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:f,_windowTime:d}=this;r||(n.push(t),!i&&n.push(f.now()+d)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:i}=this,f=i.slice();for(let d=0;d<f.length&&!t.closed;d+=n?1:2)t.next(f[d]);return this._checkFinalizedStatuses(t),r}_trimBuffer(){const{_bufferSize:t,_timestampProvider:r,_buffer:n,_infiniteTimeWindow:i}=this,f=(i?1:2)*t;if(t<1/0&&f<n.length&&n.splice(0,n.length-f),!i){const d=r.now();let O=0;for(let U=1;U<n.length&&n[U]<=d;U+=2)O=U;O&&n.splice(0,O+1)}}}var zc=l(3099);function Su(e,t,r){var n,i;let f,d=!1;return e&&"object"==typeof e?(f=null!==(n=e.bufferSize)&&void 0!==n?n:1/0,t=null!==(i=e.windowTime)&&void 0!==i?i:1/0,d=!!e.refCount,r=e.scheduler):f=e??1/0,(0,zc.B)({connector:()=>new Rs(f,t,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}var Ms=l(8505),Va=new WeakMap,xs=new WeakMap;function Cu(e){if(!xs.has(e)){var t=ko(function(e){if(!Va.has(e)){var t=e.schema.getDocumentPrototype(),r=function(e){var t={};return Object.entries(e.methods).forEach(function(r){t[r[0]]=r[1]}),t}(e),i={};[t,r,_i].forEach(function(f){Object.getOwnPropertyNames(f).forEach(function(O){var U=Object.getOwnPropertyDescriptor(f,O),W=!0;(O.startsWith("_")||O.endsWith("_")||O.startsWith("$")||O.endsWith("$"))&&(W=!1),"function"==typeof U.value?Object.defineProperty(i,O,{get:function(){return U.value.bind(this)},enumerable:W,configurable:!1}):(U.enumerable=W,U.configurable=!1,U.writable&&(U.writable=!1),Object.defineProperty(i,O,U))})}),Va.set(e,i)}return Va.get(e)}(e));xs.set(e,t)}return xs.get(e)}function Bo(e,t){var r=t[e.schema.primaryPath],n=e._docCache.get(r);if(n)return n;var i=V(Cu(e),e,hr.deepFreezeWhenDevMode(t));return e._docCache.set(r,i),e._runHooksSync("post","create",t,i),nr("postCreateRxDocument",i),i}var Ki=function(e){e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},ks=function(e){e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},Fo=function(e){var t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},Yn=function(e){var t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},Qa=function(e){e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);for(var t=e.queryParams.primaryKey,r=e.previousResults,n=0;n<r.length;n++)if(r[n][t]===e.changeEvent.id){r.splice(n,1);break}},Bs=function(e){var t=e.changeEvent.id,r=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,r)}else if(e.previousResults.find(function(i){return i[e.queryParams.primaryKey]===t}))return;!function(e,t,r,n){var i=e,f=i.length-1,d=0,O=0;if(0===i.length)return i.push(t),i;for(;d<=f;)r(i[O=d+(f-d>>1)],t)<=0?d=O+1:f=O-1;r(i[O],t)<=0&&O++,i.splice(O,0,t)}(e.previousResults,r,e.queryParams.sortComparator)},Tu=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Ru={doNothing:function(e){},insertFirst:Ki,insertLast:ks,removeFirstItem:Fo,removeLastItem:Yn,removeFirstInsertLast:function(e){Fo(e),ks(e)},removeLastInsertFirst:function(e){Yn(e),Ki(e)},removeFirstInsertFirst:function(e){Fo(e),Ki(e)},removeLastInsertLast:function(e){Yn(e),ks(e)},removeExisting:Qa,replaceExisting:function(e){for(var t=e.changeEvent.doc,r=e.queryParams.primaryKey,n=e.previousResults,i=0;i<n.length;i++)if(n[i][r]===e.changeEvent.id){n[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},alwaysWrong:function(e){var t={_id:"wrongHuman"+(new Date).getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},insertAtSortPosition:Bs,removeExistingAndInsertAtSortPosition:function(e){Qa(e),Bs(e)},runFullQueryAgain:function(e){throw new Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:function(e){throw new Error("Action unknownAction should never be called")}};function xu(e){return e?"1":"0"}function Xa(e,t){for(var r=[],n=0,i=e.length;n<i;n+=t)r.push(e.substring(n,n+t));return r}function js(e){return e.charCodeAt(0)-40}!function(e){void 0===e&&(e=6);for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,i=0;i<e;i++)r.charAt(Math.floor(Math.random()*n))}(4);var wi="UNKNOWN";function zo(e){return e[e.length-1]}var Jn,s=function(e){return!!e.queryParams.limit},wr={0:function(e){return"INSERT"===e.changeEvent.operation},1:function(e){return"UPDATE"===e.changeEvent.operation},2:function(e){return"DELETE"===e.changeEvent.operation},3:s,4:function(e){return 1===e.queryParams.limit},5:function(e){return!!(e.queryParams.skip&&e.queryParams.skip>0)},6:function(e){return 0===e.previousResults.length},7:function(e){return e.changeEvent.previous===wi},8:function(e){return s(e)&&e.previousResults.length>=e.queryParams.limit},9:function(e){var t=e.previousResults[0];return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},10:function(e){var t=zo(e.previousResults);return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},11:function(e){var t=e.queryParams.sortFields,r=e.changeEvent.previous,n=e.changeEvent.doc;if(!n)return!1;if(!r||r===wi)return!0;for(var i=0;i<t.length;i++){var f=t[i];if(dr().get(r,f)!==dr().get(n,f))return!0}return!1},12:function(e){var t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);for(var n=e.queryParams.primaryKey,i=e.previousResults,f=0;f<i.length;f++)if(i[f][n]===t)return!0;return!1},13:function(e){var t=e.changeEvent.previous;if(!t||t===wi)return!1;var r=e.previousResults[0];return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)<0)},14:function(e){var t=e.changeEvent.previous;if(!t||t===wi)return!1;var r=zo(e.previousResults);return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)>0)},15:function(e){var t=e.changeEvent.doc;if(!t)return!1;var r=e.previousResults[0];return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)<0)},16:function(e){var t=e.changeEvent.doc;if(!t)return!1;var r=zo(e.previousResults);return!!r&&(r[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,r)>0)},17:function(e){var t=e.changeEvent.previous;return!(!t||t===wi)&&e.queryParams.queryMatcher(t)},18:function(e){var t=e.changeEvent.doc;return!!t&&e.queryParams.queryMatcher(t)}};var ru=function(e){return function(e,t,r){for(var n=e,i=e.l;;){if("number"==typeof(n=n[xu(t[i](r))])||"string"==typeof n)return n;i=n.l}}((Jn||(Jn=function(e){for(var t=new Map,n=2+2*parseInt(e.charAt(0)+e.charAt(1),10),f=Xa(e.substring(2,n),2),d=0;d<f.length;d++){var U=(O=f[d]).charAt(0),W=js(O.charAt(1));t.set(U,W)}var ne=Xa(e.substring(n,e.length-3),4);for(d=0;d<ne.length;d++){U=(O=ne[d]).charAt(0);var O,de=O.charAt(1),De=O.charAt(2),he=js(O.charAt(3));if(!t.has(de))throw new Error("missing node with id "+de);if(!t.has(De))throw new Error("missing node with id "+De);var ee=t.get(de),fe=t.get(De);t.set(U,{l:he,0:ee,1:fe})}var Oe=e.slice(-3),be=Oe.charAt(0),xe=Oe.charAt(1);return{l:js(Oe.charAt(2)),0:t.get(be),1:t.get(xe)}}("14a2b0c/d1e,f+g5h.i4j*k-l)m(n6ohk1pdf1qef1rin-sjn-ton-ugn-vmn-whn-xkn-yln-zdf5{ef5|wx5}df7~dz7\x7fef7\xa1bk7\xa2e{7\xa3g|7\xa4ry7\xa5dp7\xa6gk7\xa7eq7\xa8gt7\xa9ac7\xaamv7\xabgu7\xacnm7\xadiy7\xaenw7\xaf\xa4s8\xb0\xab\xa68\xb1\xack8\xb2\xaam8\xb3\xaev8\xb4\xabn8\xb5\xacn8\xb6vm8\xb7xv8\xb8mn8\xb9\xadj8\xba\xaem8\xbbxm8\xbc\xad\xb93\xbd}~3\xbe\xa9\xb03\xbf\x7f\xa23\xc0\xa1\xa33\xc1m\xb13\xc2\xae\xba3\xc3m\xba3\xc4\xa9\xb43\xc5b\xae3\xc6m\xb53\xc7m\xbb3\xc8x\xbb3\xc9kn3\xcam\xb83\xcb\xbcj6\xcc\xc2m6\xcd\xc6\xc36\xce\xc8m6\xcfnm6\xd0\xca\xc76\xd1\xcc\xce,\xd2\xcd\xd0,\xd3\xc5\xc9,\xd4\xb2\xb6,\xd5\xb3\xb7,\xd6\xaen,\xd7\xba\xbb,\xd8mf9\xd9\xcb\xc19\xdaym9\xdbm\xcf9\xdc\xd1\xd29\xddz{2\xdepq2\xdf\xbd\xbf2\xe0\xbe\xc02\xe1\xa5\xa72\xe2\xb0\xa82\xe3\xc4\xd32\xe4\xb4\xd62\xe5\xddn0\xe6\xden0\xe7\xd8\xdb0\xe8\xd9\xdc0\xe9\xdfn0\xea\xe0\xe30\xeb\xb2\xd40\xec\xaf\xd50\xed\xe1n0\xee\xe2\xe40\xef\xb9\xd70\xf0\xe7v/\xf1\xe5\xe6/\xf2\xe7\xeb/\xf3\xe8\xec/\xf4\xe9\xed/\xf5\xea\xee/\xf6\xday/\xf7\xf2m(\xf8\xf3\xef(\xf9\xf6y(\xfa\xf7\xf8:\xfb\xf4\xf5:\xfcm\xf9:\xfd\xf0\xf14\xfe\xfa\xfb4\xff\xfe\xfd*\u0100\xfcm*\xff\u0100.")),Jn),wr,e)};function Bt(e,t){return t.sort&&0!==t.sort.length?t.sort.map(function(r){return Object.keys(r)[0]}):[e]}var or=new WeakMap;function Tr(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=function(e){if(or.has(e))return or.get(e);var t=e.collection,r=e.getPreparedQuery(),n=t.schema.primaryPath,i=t.storageInstance.getSortComparator(r),d=t.storageInstance.getQueryMatcher(r),U={primaryKey:e.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:Bt(n,e.mangoQuery),sortComparator:function(q,ne){var de={docA:q,docB:ne,rxQuery:e};return nr("preSortComparator",de),i(de.docA,de.docB)},queryMatcher:function(q){var ne={doc:q,rxQuery:e};return nr("preQueryMatcher",ne),d(ne.doc)}};return or.set(e,U),U}(e),n=e._resultsData.slice(),i=e._resultsDataMap,f=!1,d=t.find(function(O){var U=function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:hr.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}(O),q=function(e){var t=ru(e);return Tu[t]}({queryParams:r,changeEvent:U,previousResults:n,keyDocumentMap:i});return"runFullQueryAgain"===q||("doNothing"!==q?(f=!0,function(e,t,r,n,i){(0,Ru[e])({queryParams:t,changeEvent:r,previousResults:n,keyDocumentMap:i})}(q,r,U,n,i),!1):void 0)});return d?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:f,newResults:n}}var Pn=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(n){var i=n.toString();return this._map.has(i)||this._map.set(i,n),this._map.get(i)},e}();function Yt(){return new Pn}function Wo(e,t){t.uncached=!0;var r=t.toString();e._map.delete(r)}function $u(e){return e.refCount$.observers.length}var In=(100,3e4,function(n,i){if(!(i._map.size<100)){for(var f=$r()-3e4,d=[],U=0,W=Array.from(i._map.values());U<W.length;U++){var q=W[U];if(!($u(q)>0)){if(0===q._lastEnsureEqual&&q._creationTime<f){Wo(i,q);continue}d.push(q)}}var ne=d.length-100;ne<=0||d.sort(function(he,ee){return he._lastEnsureEqual-ee._lastEnsureEqual}).slice(0,ne).forEach(function(he){return Wo(i,he)})}}),Vi=new WeakSet;var kf=0,nu=function(){function e(r,n,i){this.id=++kf,this._execOverDatabaseCount=0,this._creationTime=$r(),this._lastEnsureEqual=0,this.other={},this.uncached=!1,this.refCount$=new mi.X(null),this._latestChangeEvent=-1,this._resultsData=null,this._resultsDataMap=new Map,this._lastExecStart=0,this._lastExecEnd=0,this._resultsDocs$=new mi.X(null),this._ensureEqualQueue=Br,this.op=r,this.mangoQuery=n,this.collection=i,n||(n={selector:{}})}var t=e.prototype;return t._setResultData=function(n){var i=this,f=function(e,t){return t.map(function(r){return Bo(e,r)})}(this.collection,n),d=this.collection.schema.primaryPath;return this._resultsDataMap=new Map,this._resultsData=f.map(function(O){var U=O._dataSync$.getValue();return i._resultsDataMap.set(U[d],U),U}),this._resultsDocs$.next(f),f},t._execOverDatabase=function(){var i,n=this;switch(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=$r(),this.op){case"find":i=this.collection._queryStorageInstance(this);break;case"findOne":i=this.collection._queryStorageInstance(this,1);break;default:throw ze("QU1",{collection:this.collection.name,op:this.op})}return i.then(function(f){return n._lastExecEnd=$r(),f})},t.exec=function(n){var i=this;if(n&&"findOne"!==this.op)throw ze("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Ku(this).then(function(){return(0,Cn.z)(i.$)}).then(function(f){if(!f&&n)throw ze("QU10",{collection:i.collection.name,query:i.mangoQuery,op:i.op});return f})},t.toString=function(){var n=un({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(n,Ua);return this.toString=function(){return i},i},t.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:Zt(this.mangoQuery)};nr("prePrepareQuery",n);var i=this.collection.storageInstance.prepareQuery(n.mangoQuery);return this.getPreparedQuery=function(){return i},i},t.doesDocumentDataMatch=function(n){return!n._deleted&&this.queryMatcher(wn(this.collection,n))},t.remove=function(){var n;return this.exec().then(function(i){return n=i,Array.isArray(i)?Promise.all(i.map(function(f){return f.remove()})):i.remove()}).then(function(){return n})},t.update=function(n){throw Nt("update")},t.where=function(n){throw Nt("query-builder")},t.sort=function(n){throw Nt("query-builder")},t.skip=function(n){throw Nt("query-builder")},t.limit=function(n){throw Nt("query-builder")},rr(e,[{key:"$",get:function(){var n=this;if(!this._$){var i=this._resultsDocs$.pipe((0,Er.z)(function(d){return Ku(n).then(function(O){return!O&&d})}),(0,zr.h)(function(d){return!!d}),(0,Vt.U)(function(d){return d.slice(0)}),(0,Vt.U)(function(d){return"findOne"===n.op?0===d.length?null:d[0]:d}),Su({bufferSize:1,refCount:!0})).asObservable(),f=this.collection.$.pipe((0,Ms.b)(function(){return Ku(n)}),(0,zr.h)(function(){return!1}));this._$=(0,Zn.T)(i,f,this.refCount$.pipe((0,zr.h)(function(){return!1})))}return this._$}},{key:"queryMatcher",get:function(){return En(this,"queryMatcher",this.collection.storageInstance.getQueryMatcher(this.getPreparedQuery()))}},{key:"asRxQuery",get:function(){return this}}]),e}();function hl(e){return e.collection._queryCache.getByQuery(e)}function Wu(e,t,r){if(t&&"object"!=typeof t)throw Wt("QU7",{queryObj:t});if(Array.isArray(t))throw Wt("QU8",{queryObj:t});nr("preCreateRxQuery",{op:e,queryObj:t,collection:r});var n=new nu(e,t,r);return nr("createRxQuery",n=hl(n)),function(e){Vi.has(e)||(Vi.add(e),jn().then(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"object"==typeof window&&window.requestIdleCallback?new Promise(function(t){return window.requestIdleCallback(t,{timeout:e})}):Fa(0)}(200)}).then(function(){e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),Vi.delete(e)}))}(r),n}function pl(e){return e._latestChangeEvent>=e.asRxQuery.collection._changeEventBuffer.counter}function Ku(e){return e.collection.database.destroyed||pl(e)?Br:(e._ensureEqualQueue=e._ensureEqualQueue.then(function(){return function(e){if(e._lastEnsureEqual=$r(),e.collection.database.destroyed||pl(e))return Br;var t=!1,r=!1;if(-1===e._latestChangeEvent&&(r=!0),!r){var n=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===n)r=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter,n=n.filter(function(O){return!O.startTime||e._lastExecStart<O.startTime&&(!O.endTime||e._lastExecEnd<O.endTime)});var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n),f=Tr(e,i);f.runFullQueryAgain?r=!0:f.changed&&(t=!0,e._setResultData(f.newResults))}}if(r){var d=e.collection._changeEventBuffer.counter;return e._execOverDatabase().then(function(O){return e._latestChangeEvent=d,wo()(O,e._resultsData)||(t=!0,e._setResultData(O)),t})}return t}(e)}),e._ensureEqualQueue)}var Ff=l(8675),Nf=function(){function e(){this._map=new Map,this._map=new Map}var t=e.prototype;return t.get=function(n){return this._map.get(n)},t.set=function(n,i){return this._map.set(n,i)},t.delete=function(n){return this._map.delete(n)},e}();function jf(){return new Nf}var Uf=function(){function e(r){var n=this;this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=r,this.subs.push(this.collection.$.pipe((0,zr.h)(function(i){return!i.isLocal})).subscribe(function(i){return n._handleChangeEvent(i)}))}var t=e.prototype;return t._handleChangeEvent=function(n){for(this.counter++,this.buffer.push(n),this.eventCounterMap.set(n,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(n){var f=this.eventCounterMap.get(this.buffer[0]);return n<f?null:n-f},t.getFrom=function(n){var i=[],f=this.getArrayIndexByPointer(n);if(null===f)return null;for(;;){var d=this.buffer[f];if(f++,!d)return i;i.push(d)}},t.runFrom=function(n,i){var f=this.getFrom(n);if(null===f)throw new Error("out of bounds");f.forEach(function(d){return i(d)})},t.reduceByLastOfDoc=function(n){return n.slice(0)},t.hasChangeWithRevision=function(n){for(var i=this.buffer.length;i>0;){i--;var f=this.buffer[i];if(f.documentData&&f.documentData._rev===n)return!0}return!1},t.destroy=function(){this.subs.forEach(function(n){return n.unsubscribe()})},e}();function $f(e){return new Uf(e)}var ml=["pre","post"],vl=["insert","save","remove","create"],gl=!1,iu=function(){function e(r,n,i,f,d){var O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},W=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},q=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},ne=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},de=arguments.length>10&&void 0!==arguments[10]?arguments[10]:In,De=arguments.length>11&&void 0!==arguments[11]?arguments[11]:{};this._isInMemory=!1,this.destroyed=!1,this._atomicUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._repStates=new Set,this._docCache=jf(),this._queryCache=Yt(),this._crypter={},this._observable$={},this._changeEventBuffer={},this.database=r,this.name=n,this.schema=i,this.storageInstance=f,this.localDocumentsStore=d,this.instanceCreationOptions=O,this.migrationStrategies=U,this.methods=W,this.attachments=q,this.options=ne,this.cacheReplacementPolicy=de,this.statics=De,zf(this.asRxCollection)}var t=e.prototype;return t.prepare=function(){var r=(0,it.Z)($e().mark(function i(f){var O,U,d=this;return $e().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:this._crypter=bi(this.database.password,this.schema),this._observable$=this.database.$.pipe((0,zr.h)(function(ne){return ne.collectionName===d.name})),this._changeEventBuffer=$f(this.asRxCollection),O=this.storageInstance.changeStream().pipe((0,Vt.U)(function(ne){return Wi(!1,ne,d.database,d)})).subscribe(function(ne){d.$emit(ne)}),this._subs.push(O),U=this.localDocumentsStore.changeStream().pipe((0,Vt.U)(function(ne){return Wi(!0,ne,d.database,d)})).subscribe(function(ne){return d.$emit(ne)}),this._subs.push(U),this._subs.push(this._observable$.pipe((0,zr.h)(function(ne){return!ne.isLocal})).subscribe(function(ne){var de=d._docCache.get(ne.documentId);de&&de._handleChangeEvent(ne)}));case 8:case"end":return q.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.migrationNeeded=function(){throw Nt("migration")},t.getDataMigrator=function(){throw Nt("migration")},t.migrate=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migrate(n)},t.migratePromise=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migratePromise(n)},t._queryStorageInstance=function(){var r=(0,it.Z)($e().mark(function i(f,d){var U,W,ne,O=this,de=arguments;return $e().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return U=de.length>2&&void 0!==de[2]&&de[2],W=f.getPreparedQuery(),d&&(W.limit=d),he.next=5,this.database.lockedRun(function(){return O.storageInstance.query(W)});case 5:return ne=he.sent.documents.map(function(ee){return Ps(O,ee,U)}),he.abrupt("return",ne);case 8:case"end":return he.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.$emit=function(n){return this.database.$emit(n)},t.insert=function(){var r=(0,it.Z)($e().mark(function i(f){var d,O,U,W;return $e().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(d=null,!C(f)){ne.next=6;break}if((d=f)._isTemporary){ne.next=5;break}throw ze("COL1",{data:f});case 5:f=d.toJSON();case 6:return O=gi(this,f),U=d,ne.next=10,this._runHooks("pre","insert",O);case 10:return this.schema.validate(O),ne.next=13,xo(this,{document:O});case 13:return W=ne.sent,d?d._dataSync$.next(W):U=Bo(this,W),ne.next=17,this._runHooks("post","insert",O,U);case 17:return ne.abrupt("return",U);case 18:case"end":return ne.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.bulkInsert=function(){var r=(0,it.Z)($e().mark(function i(f){var O,U,W,q,ne,de,De,d=this;return $e().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(0!==f.length){ee.next=2;break}return ee.abrupt("return",{success:[],error:[]});case 2:return O=f.map(function(fe){return gi(d,fe)}),ee.next=5,Promise.all(O.map(function(fe){return d._runHooks("pre","insert",fe).then(function(){return d.schema.validate(fe),fe})}));case 5:return W=(U=ee.sent).map(function(fe){return{document:wn(d,fe)}}),q=new Map,U.forEach(function(fe){q.set(fe[d.schema.primaryPath],fe)}),ee.next=11,this.database.lockedRun(function(){return d.storageInstance.bulkWrite(W)});case 11:return ne=ee.sent,de=Array.from(ne.success.entries()),De=de.map(function(fe){var Oe=fe[1],be=hi(q,fe[0]);return be._rev=Oe._rev,Bo(d,be)}),ee.next=16,Promise.all(De.map(function(fe){return d._runHooks("post","insert",q.get(fe.primary),fe)}));case 16:return ee.abrupt("return",{success:De,error:Array.from(ne.error.values())});case 17:case"end":return ee.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.bulkRemove=function(){var r=(0,it.Z)($e().mark(function i(f){var O,U,W,q,ne,de,De,d=this;return $e().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(0!==f.length){ee.next=2;break}return ee.abrupt("return",{success:[],error:[]});case 2:return ee.next=4,this.findByIds(f);case 4:return O=ee.sent,U=[],W=new Map,Array.from(O.values()).forEach(function(fe){var Se=Zt(fe.toJSON(!0));U.push(Se),W.set(fe.primary,Se)}),ee.next=10,Promise.all(U.map(function(fe){return d._runHooks("pre","remove",fe,O.get(fe[d.schema.primaryPath]))}));case 10:return q=U.map(function(fe){var Se=jt(fe);return Se._deleted=!0,{previous:wn(d,fe),document:wn(d,Se)}}),ee.next=13,this.database.lockedRun(function(){return d.storageInstance.bulkWrite(q)});case 13:return ne=ee.sent,de=Array.from(ne.success.keys()),ee.next=17,Promise.all(de.map(function(fe){return d._runHooks("post","remove",W.get(fe),O.get(fe))}));case 17:return De=de.map(function(fe){return O.get(fe)}),ee.abrupt("return",{success:De,error:Array.from(ne.error.values())});case 19:case"end":return ee.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.upsert=function(n){var i=this,f=gi(this,n),d=f[this.schema.primaryPath];if(!d)throw ze("COL3",{primaryPath:this.schema.primaryPath,data:f,schema:this.schema.jsonSchema});return this.findOne(d).exec().then(function(O){return O&&!O.deleted?(f._rev=O._rev,O.atomicUpdate(function(){return f}).then(function(){return O})):i.insert(n)})},t.atomicUpsert=function(n){var O,i=this,f=gi(this,n),d=f[this.schema.primaryPath];if(!d)throw ze("COL4",{data:n});return O=(O=this._atomicUpsertQueues.has(d)?this._atomicUpsertQueues.get(d):on).then(function(){return function(e,t,r){var n=e._docCache.get(t);return n?Promise.resolve({doc:n,inserted:!1}):e.findOne(t).exec().then(function(i){return i?{doc:i,inserted:!1}:e.insert(r).then(function(f){return{doc:f,inserted:!0}})})}(i,d,f)}).then(function(U){return U.inserted?U.doc:function(e,t){return e.atomicUpdate(function(r){return t._rev=r._rev,r._data=t,r._data}).then(function(){return e})}(U.doc,f).then(function(){return jn()}).then(function(){return jn()}).then(function(){return jn()}).then(function(){return U.doc})}),this._atomicUpsertQueues.set(d,O),O},t.find=function(n){if("string"==typeof n)throw ze("COL5",{queryObj:n});return n||(n={selector:{}}),Wu("find",n,this)},t.findOne=function(n){var i;if("string"==typeof n){var f;i=Wu("findOne",{selector:(f={},f[this.schema.primaryPath]=n,f)},this)}else{if(n||(n={selector:{}}),n.limit)throw ze("QU6");i=Wu("findOne",n,this)}if("number"==typeof n||Array.isArray(n))throw Wt("COL6",{queryObj:n});return i},t.findByIds=function(){var r=(0,it.Z)($e().mark(function i(f){var O,U,d=this;return $e().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(O=new Map,U=[],f.forEach(function(de){var De=d._docCache.get(de);De?O.set(de,De):U.push(de)}),!(U.length>0)){ne.next=8;break}return ne.next=6,this.storageInstance.findDocumentsById(U,!1);case 6:Array.from(ne.sent.values()).forEach(function(de){de=Ps(d,de);var De=Bo(d,de);O.set(De.primary,De)});case 8:return ne.abrupt("return",O);case 9:case"end":return ne.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.findByIds$=function(n){var i=this,f=null,d=-1,O=this.findByIds(n).then(function(U){d=i._changeEventBuffer.counter,f=U});return this.$.pipe((0,Ff.O)(null),(0,Er.z)(function(U){return O.then(function(){return U})}),(0,Er.z)(function(){var U=(0,it.Z)($e().mark(function W(q){var ne,de;return $e().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(ne=vs(f),null!==(de=i._changeEventBuffer.getFrom(d+1))){ee.next=10;break}return ee.next=5,i.findByIds(n);case 5:d=i._changeEventBuffer.counter,Array.from(ee.sent.entries()).forEach(function(fe){return ne.set(fe[0],fe[1])}),ee.next=11;break;case 10:de.filter(function(fe){return n.includes(fe.documentId)}).forEach(function(fe){var Se=fe.operation;"INSERT"===Se||"UPDATE"===Se?ne.set(fe.documentId,i._docCache.get(fe.documentId)):ne.delete(fe.documentId)});case 11:return ee.abrupt("return",ne);case 12:case"end":return ee.stop()}},W)}));return function(W){return U.apply(this,arguments)}}()),(0,zr.h)(function(U){return!!U}),Su({bufferSize:1,refCount:!0}))},t.exportJSON=function(){throw Nt("json-dump")},t.importJSON=function(n){throw Nt("json-dump")},t.syncCouchDB=function(n){throw Nt("replication")},t.syncGraphQL=function(n){throw Nt("replication-graphql")},t.inMemory=function(){throw Nt("in-memory")},t.addHook=function(n,i,f){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"!=typeof f)throw Wt("COL7",{key:i,when:n});if(!ml.includes(n))throw Wt("COL8",{key:i,when:n});if(!vl.includes(i))throw ze("COL9",{key:i});if("post"===n&&"create"===i&&!0===d)throw ze("COL10",{when:n,key:i,parallel:d});var O=f.bind(this),U=d?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][n]=this.hooks[i][n]||{series:[],parallel:[]},this.hooks[i][n][U].push(O)},t.getHooks=function(n,i){try{return this.hooks[i][n]}catch{return{series:[],parallel:[]}}},t._runHooks=function(n,i,f,d){var O=this.getHooks(n,i);return O?function(e,t){return e.reduce(function(r,n){return r.then(n)},Promise.resolve(void 0))}(O.series.map(function(W){return function(){return W(f,d)}})).then(function(){return Promise.all(O.parallel.map(function(W){return W(f,d)}))}):on},t._runHooksSync=function(n,i,f,d){var O=this.getHooks(n,i);!O||O.series.forEach(function(U){return U(f,d)})},t.newDocument=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=this.schema.fillObjectWithDefaults(n);var i=V(Cu(this),this,n);return i._isTemporary=!0,this._runHooksSync("post","create",n,i),i},t.destroy=function(){var n=this;return this.destroyed?Br:(this._onDestroyCall&&this._onDestroyCall(),this._subs.forEach(function(i){return i.unsubscribe()}),this._changeEventBuffer&&this._changeEventBuffer.destroy(),Array.from(this._repStates).forEach(function(i){return i.cancel()}),Promise.all([this.storageInstance.close(),this.localDocumentsStore.close()]).then(function(){return delete n.database.collections[n.name],n.destroyed=!0,bs("postDestroyRxCollection",n).then(function(){return!0})}))},t.remove=function(){return this.database.removeCollection(this.name)},rr(e,[{key:"$",get:function(){return this._observable$}},{key:"insert$",get:function(){return this.$.pipe((0,zr.h)(function(n){return"INSERT"===n.operation}))}},{key:"update$",get:function(){return this.$.pipe((0,zr.h)(function(n){return"UPDATE"===n.operation}))}},{key:"remove$",get:function(){return this.$.pipe((0,zr.h)(function(n){return"DELETE"===n.operation}))}},{key:"onDestroy",get:function(){var n=this;return this._onDestroy||(this._onDestroy=new Promise(function(i){return n._onDestroyCall=i})),this._onDestroy}},{key:"asRxCollection",get:function(){return this}}]),e}();function zf(e){if(!gl){gl=!0;var t=Object.getPrototypeOf(e);vl.forEach(function(r){ml.map(function(n){var i=n+Co(r);t[i]=function(f,d){return this.addHook(n,r,f,d)}})})}}function Hf(e,t){var r=e.database,n=e.name,i=e.schema,f=e.instanceCreationOptions,d=void 0===f?{}:f,O=e.migrationStrategies,U=void 0===O?{}:O,W=e.autoMigrate,q=void 0===W||W,ne=e.statics,de=void 0===ne?{}:ne,De=e.methods,he=void 0===De?{}:De,ee=e.attachments,fe=void 0===ee?{}:ee,Se=e.options,Oe=void 0===Se?{}:Se,be=e.cacheReplacementPolicy,xe=void 0===be?In:be;hr.isDevMode()&&Object.keys(he).filter(function(Ge){return i.topLevelFields.includes(Ge)}).forEach(function(Ge){throw ze("COL18",{funName:Ge})});var Re={databaseName:r.name,collectionName:n,schema:i.jsonSchema,options:d,idleQueue:r.idleQueue};return nr("preCreateRxStorageInstance",Re),yi(n,r,Re,d).then(function(Ge){var We=new iu(r,n,i,Ge.storageInstance,Ge.localDocumentsStore,d,U,he,fe,Oe,xe,de);return We.prepare(t).then(function(){Object.entries(de).forEach(function(bt){var It=bt[1];Object.defineProperty(We,bt[0],{get:function(){return It.bind(We)}})});var Ke=on;return q&&0!==We.schema.version&&(Ke=We.migratePromise()),Ke}).then(function(){return nr("createRxCollection",We),We}).catch(function(Ke){return Promise.all([Ge.storageInstance.close(),Ge.localDocumentsStore.close()]).then(function(){return Promise.reject(Ke)})})})}var Hu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function Vu(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var r=e._pHM.get(t);e._hPM.delete(r),e._pHM.delete(t)}e._iC.delete(t)}}function Gu(e){e._tryIR||0===e._iC.size||(e._tryIR=!0,setTimeout(function(){e.isIdle()?setTimeout(function(){e.isIdle()?(function(e){0!==e._iC.size&&(e._iC.values().next().value._manRes(),setTimeout(function(){return Gu(e)},0))}(e),e._tryIR=!1):e._tryIR=!1},0):e._tryIR=!1},0))}Hu.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Gu(this)},wrapCall:function(t){var n,r=this;this.lock();try{n=t()}catch(i){throw this.unlock(),i}return n.then&&"function"==typeof n.then?n.then(function(i){return r.unlock(),i}).catch(function(i){throw r.unlock(),i}):(this.unlock(),n)},requestIdlePromise:function(t){var r=this;t=t||{};var n,i=new Promise(function(O){return n=O});if(i._manRes=function(){Vu(r,i),n()},t.timeout){var d=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=d}return this._iC.add(i),Gu(this),i},cancelIdlePromise:function(t){Vu(this,t)},requestIdleCallback:function(t,r){var n=this._lHN++,i=this.requestIdlePromise(r);return this._hPM.set(n,i),this._pHM.set(i,n),i.then(function(){return t()}),n},cancelIdleCallback:function(t){var r=this._hPM.get(t);this.cancelIdlePromise(r)},clear:function(){var t=this;this._iC.forEach(function(r){return Vu(t,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}},Promise.resolve(!1);var Gi=Promise.resolve();function yl(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function Qu(){return Math.random().toString(36).substring(2)}var _l=0,Zu=0;function su(){var e=(new Date).getTime();return e===_l?1e3*e+ ++Zu:(_l=e,Zu=0,1e3*e)}var ou="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);const nd={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(r){t.messagesCallback&&t.messagesCallback(r.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),Gi}catch(r){return Promise.reject(r)}},canBeUsed:function(){if(ou&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:su};var Yu=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var r=this;this.timeMap.set(t,bl()),this.set.add(t),setTimeout(function(){!function(e){for(var t=bl()-e.ttl,r=e.set[Symbol.iterator]();;){var n=r.next().value;if(!n)return;if(!(e.timeMap.get(n)<t))return;e.timeMap.delete(n),e.set.delete(n)}}(r)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function bl(){return(new Date).getTime()}function Ju(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var hn="messages";function El(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function wl(e){e.closed||Sl(e).then(function(){return yl(e.options.idb.fallbackInterval)}).then(function(){return wl(e)})}function Sl(e){return e.closed||!e.messagesCallback?Gi:function(e,t){var r=e.transaction(hn).objectStore(hn),n=[];return new Promise(function(f){(function(){try{var f=IDBKeyRange.bound(t+1,1/0);return r.openCursor(f)}catch{return r.openCursor()}}()).onsuccess=function(d){var O=d.target.result;O?O.value.id<t+1?O.continue(t+1):(n.push(O.value),O.continue()):f(n)}})}(e.db,e.lastCursorId).then(function(t){var r=t.filter(function(n){return!!n}).map(function(n){return n.id>e.lastCursorId&&(e.lastCursorId=n.id),n}).filter(function(n){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(n,e)}).sort(function(n,i){return n.time-i.time});return r.forEach(function(n){e.messagesCallback&&(e.eMIs.add(n.id),e.messagesCallback(n.data))}),Gi})}const Ed={create:function(e,t){return t=Ju(t),function(e){var n=El().open("pubkey.broadcast-channel-0-"+e,1);return n.onupgradeneeded=function(f){f.target.result.createObjectStore(hn,{keyPath:"id",autoIncrement:!0})},new Promise(function(f,d){n.onerror=function(O){return d(O)},n.onsuccess=function(){f(n.result)}})}(e).then(function(r){var n={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Qu(),eMIs:new Yu(2*t.idb.ttl),writeBlockPromise:Gi,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,t.idb.onclose&&t.idb.onclose()},wl(n),n})},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t,Sl(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return function(e,t,r){var i={uuid:t,time:(new Date).getTime(),data:r},f=e.transaction([hn],"readwrite");return new Promise(function(d,O){f.oncomplete=function(){return d()},f.onerror=function(W){return O(W)},f.objectStore(hn).add(i)})}(e.db,e.uuid,t)}).then(function(){0===Math.floor(11*Math.random()+0)&&function(e,t){(function(e,t){var r=(new Date).getTime()-t,n=e.transaction(hn).objectStore(hn),i=[];return new Promise(function(f){n.openCursor().onsuccess=function(d){var O=d.target.result;if(O){var U=O.value;if(!(U.time<r))return void f(i);i.push(U),O.continue()}else f(i)}})})(e,t).then(function(r){return Promise.all(r.map(function(n){return function(e,t){var r=e.transaction([hn],"readwrite").objectStore(hn).delete(t);return new Promise(function(n){r.onsuccess=function(){return n()}})}(e,n.id)}))})}(e.db,e.options.idb.ttl)}),e.writeBlockPromise},canBeUsed:function(){return!ou&&!!El()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:su};function Cl(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Dl(e){return"pubkey.broadcastChannel-"+e}function Al(){if(ou)return!1;var e=Cl();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}const Md={create:function(e,t){if(t=Ju(t),!Al())throw new Error("BroadcastChannel: localstorage cannot be used");var r=Qu(),n=new Yu(t.localstorage.removeTimeout),i={channelName:e,uuid:r,eMIs:n};return i.listener=function(e,t){var r=Dl(e),n=function(f){f.key===r&&t(JSON.parse(f.newValue))};return window.addEventListener("storage",n),n}(e,function(f){!i.messagesCallback||f.uuid!==r&&(!f.token||n.has(f.token)||f.data.time&&f.data.time<i.messagesCallbackTime||(n.add(f.token),i.messagesCallback(f.data)))}),i},close:function(e){!function(e){window.removeEventListener("storage",e)}(e.listener)},onMessage:function(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(r){yl().then(function(){var n=Dl(e.channelName),i={token:Qu(),time:(new Date).getTime(),data:t,uuid:e.uuid},f=JSON.stringify(i);Cl().setItem(n,f);var d=document.createEvent("Event");d.initEvent("storage",!0,!0),d.key=n,d.newValue=f,window.dispatchEvent(d),r()})})},canBeUsed:Al,type:"localstorage",averageResponseTime:function(){var t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?240:120},microSeconds:su};var xd=su,Xu=new Set;const $d={create:function(e){var t={name:e,messagesCallback:null};return Xu.add(t),t},close:function(e){Xu.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(r){return setTimeout(function(){Array.from(Xu).filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),r()},5)})},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:xd};var Ol=[nd,Ed,Md],qu=function(t,r){this.name=t,this.options=Ju(r),this.method=function(e){var t=[].concat(e.methods,Ol).filter(Boolean);if(e.type){if("simulate"===e.type)return $d;var r=t.find(function(i){return i.type===e.type});if(r)return r;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!ou&&(t=t.filter(function(i){return"idb"!==i.type}));var n=t.find(function(i){return i.canBeUsed()});if(n)return n;throw new Error("No useable method found in "+JSON.stringify(Ol.map(function(i){return i.type})))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);!function(e){return!(!e||"function"!=typeof e.then)}(t)?e._state=t:(e._prepP=t,t.then(function(r){e._state=r}))}(this)};function Pl(e,t,r){var i={time:e.method.microSeconds(),type:t,data:r};return(e._prepP?e._prepP:Gi).then(function(){var d=e.method.postMessage(e._state,i);return e._uMP.add(d),d.catch().then(function(){return e._uMP.delete(d)}),d})}function Il(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Tl(e,t,r){e._addEL[t].push(r),function(e){if(!e._iL&&Il(e)){var t=function(i){e._addEL[i.type].forEach(function(f){i.time>=f.time&&f.fn(i.data)})},r=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,r)}):(e._iL=!0,e.method.onMessage(e._state,t,r))}}(e)}function Rl(e,t,r){e._addEL[t]=e._addEL[t].filter(function(n){return n!==r}),function(e){if(e._iL&&!Il(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}qu._pubkey=!0,qu.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return Pl(this,"message",t)},postInternal:function(t){return Pl(this,"internal",t)},set onmessage(e){var r={time:this.method.microSeconds(),fn:e};Rl(this,"message",this._onML),e&&"function"==typeof e?(this._onML=r,Tl(this,"message",r)):this._onML=null},addEventListener:function(t,r){Tl(this,t,{time:this.method.microSeconds(),fn:r})},removeEventListener:function(t,r){Rl(this,t,this._addEL[t].find(function(i){return i.fn===r}))},close:function(){var t=this;if(!this.closed){this.closed=!0;var r=this._prepP?this._prepP:Gi;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(n){return n()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};var tc=new Set,au=function(){function e(r,n,i,f,d){var O=arguments.length>5&&void 0!==arguments[5]&&arguments[5],U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},W=arguments.length>7?arguments[7]:void 0,q=arguments.length>8?arguments[8]:void 0,ne=arguments.length>9?arguments[9]:void 0,de=arguments.length>10?arguments[10]:void 0;this.token=Do(10),this._subs=[],this.destroyed=!1,this.subject=new Zr.x,this.observable$=this.subject.asObservable(),this.broadcastChannel$=new Zr.x,this.name=r,this.storage=n,this.instanceCreationOptions=i,this.password=f,this.multiInstance=d,this.eventReduce=O,this.options=U,this.idleQueue=W,this.internalStore=q,this.localDocumentsStore=ne,this.broadcastChannel=de,this.collections={}}var t=e.prototype;return t.dangerousRemoveCollectionInfo=function(){var r=(0,it.Z)($e().mark(function i(){var d;return $e().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,Qr(this.internalStore);case 2:return d=U.sent.map(function(W){var q=jt(W);return q._deleted=!0,{previous:W,document:q}}),U.next=6,this.internalStore.bulkWrite(d);case 6:case"end":return U.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.$emit=function(n){this.subject.next(n),n.databaseToken===this.token&&function(e,t){if(e.destroyed)return Br;e.multiInstance&&!function(e){return!(!e.collectionName||"_"!==e.collectionName.charAt(0))}(t)&&e.broadcastChannel&&e.broadcastChannel.postMessage({cE:t,storageToken:e.storageToken}).then(function(){return!0})}(this,n)},t.removeCollectionDoc=function(){var r=(0,it.Z)($e().mark(function i(f,d){var U,W,q,O=this;return $e().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return U=uu(f,d),de.next=3,Ss(this.internalStore,U);case 3:if(W=de.sent){de.next=6;break}throw ze("SNH",{name:f,schema:d});case 6:return(q=jt(W))._deleted=!0,de.next=10,this.lockedRun(function(){return O.internalStore.bulkWrite([{document:q,previous:W}])});case 10:case"end":return de.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.addCollections=function(){var r=(0,it.Z)($e().mark(function i(f){var U,W,ne,de,d=this;return $e().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,this.lockedRun(function(){return d.internalStore.findDocumentsById(Object.keys(f).map(function(ee){return uu(ee,f[ee].schema)}),!1)});case 2:return U={},Array.from(he.sent.entries()).forEach(function(ee){U[ee[0]]=ee[1]}),W={},he.next=8,Promise.all(Object.entries(f).map(function(ee){var fe=ee[0],Se=ee[1],Oe=fe,be=U[uu(fe,f[Oe].schema)],xe=jt(Se);xe.name=Oe;var Re=Ct(Se.schema);if(W[Oe]=Re.hash,xe.schema=Re,xe.database=d,Re.crypt&&!d.password)throw ze("DB7",{name:fe});if(d.collections[fe])throw ze("DB3",{name:fe});if(be&&be.schemaHash!==W[Oe])throw ze("DB6",{name:fe,previousSchemaHash:be.schemaHash,schemaHash:W[Oe]});var Ge=jt(Se);return Ge.database=d,Ge.name=fe,nr("preCreateRxCollection",Ge),Hf(xe,!!be)}));case 8:if(ne=[],de={},he.sent.forEach(function(ee){var fe=ee.name;de[fe]=ee;var Se=uu(fe,f[fe].schema);U[Se]||ne.push({document:{collectionName:Se,schemaHash:W[fe],schema:ee.schema.normalized,version:ee.schema.version,_attachments:{}}}),d.collections[fe]=ee,d[fe]||Object.defineProperty(d,fe,{get:function(){return d.collections[fe]}})}),!(ne.length>0)){he.next=15;break}return he.next=15,this.lockedRun(function(){return d.internalStore.bulkWrite(ne)});case 15:return he.abrupt("return",de);case 16:case"end":return he.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.removeCollection=function(n){var i=this,f=on;return this.collections[n]&&(f=this.collections[n].destroy()),f.then(function(){return function(e,t){return ic.apply(this,arguments)}(i,n)}).then(function(d){return Promise.all(d.map(function(O){return yi(n,i,{databaseName:i.name,collectionName:n,idleQueue:i.idleQueue,schema:Ts(O,"collectionName"),options:i.instanceCreationOptions},{})}))}).then(function(d){return Promise.all(d.map(function(O){return i.lockedRun(function(){return Promise.all([O.storageInstance.remove(),O.localDocumentsStore.remove()])})}))}).then(function(){})},t.lockedRun=function(n){return this.idleQueue.wrapCall(n)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(){throw Nt("json-dump")},t.importJSON=function(n){throw Nt("json-dump")},t.server=function(n){throw Nt("server")},t.backup=function(n){throw Nt("backup")},t.leaderElector=function(){throw Nt("leader-election")},t.isLeader=function(){throw Nt("leader-election")},t.waitForLeadership=function(){throw Nt("leader-election")},t.migrationStates=function(){throw Nt("migration")},t.destroy=function(){var n=this;return this.destroyed||(nr("preDestroyRxDatabase",this),this.destroyed=!0,this._subs.map(function(i){return i.unsubscribe()}),"pseudoInstance"===this.name)?Br:this.requestIdlePromise().then(function(){return Promise.all(Object.keys(n.collections).map(function(i){return n.collections[i]}).map(function(i){return i.destroy()}))}).then(function(){return n.internalStore.close()}).then(function(){return n.localDocumentsStore.close()}).then(function(){return n.broadcastChannel?n.broadcastChannel.close():null}).then(function(){return tc.delete(n.name)}).then(function(){return!0})},t.remove=function(){var n=this;return this.destroy().then(function(){return function(e,t){return ac.apply(this,arguments)}(n.name,n.storage)})},rr(e,[{key:"$",get:function(){return this.observable$}}]),e}();function Gd(e){return nc.apply(this,arguments)}function nc(){return nc=(0,it.Z)($e().mark(function e(t){var r,n,i;return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r="storageToken",d.next=3,As(t.localDocumentsStore,r);case 3:if(n=d.sent){d.next=11;break}return i=Do(10),d.next=8,t.localDocumentsStore.bulkWrite([{document:{_id:r,value:i,_attachments:{}}}]);case 8:return d.abrupt("return",i);case 11:return d.abrupt("return",n.value);case 12:case"end":return d.stop()}},e)})),nc.apply(this,arguments)}function uu(e,t){return e+"-"+t.version}function ic(){return ic=(0,it.Z)($e().mark(function e(t,r){var i;return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.lockedRun(function(){return Qr(t.internalStore)});case 2:return i=d.sent.filter(function(O){return O.collectionName.split("-")[0]===r}),d.abrupt("return",Promise.all(i.map(function(O){var U=jt(O);return U._deleted=!0,t.lockedRun(function(){return Ro(t.internalStore,{previous:O,document:U})})})).then(function(){return i.map(function(O){return O.version})}));case 5:case"end":return d.stop()}},e)})),ic.apply(this,arguments)}function Yd(e){if(!e.broadcastChannel)throw ze("SNH",{args:{rxDatabase:e}});e.broadcastChannel.addEventListener("message",function(t){t.storageToken===e.storageToken&&t.cE.databaseToken!==e.token&&e.broadcastChannel$.next(t.cE)}),e._subs.push(e.broadcastChannel$.subscribe(function(t){e.$emit(t)}))}function Ml(e,t,r,n,i){return sc.apply(this,arguments)}function sc(){return sc=(0,it.Z)($e().mark(function e(t,r,n,i,f){var d;return $e().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,t.createStorageInstance({databaseName:r,collectionName:Eu,schema:Ts(0,"collectionName"),options:n,idleQueue:i,broadcastChannel:f});case 2:return d=W.sent,W.next=5,t.createKeyObjectStorageInstance({databaseName:r,collectionName:"",options:n,idleQueue:i,broadcastChannel:f});case 5:return W.abrupt("return",{internalStore:d,localDocumentsStore:W.sent});case 7:case"end":return W.stop()}},e)})),sc.apply(this,arguments)}function oc(){return oc=(0,it.Z)($e().mark(function e(t){var r;return $e().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.localDocumentsStore.changeStream().subscribe(function(f){t.$emit(Wi(!0,f,t))}),t._subs.push(r),i.next=4,Gd(t);case 4:t.storageToken=i.sent,t.multiInstance&&Yd(t);case 6:case"end":return i.stop()}},e)})),oc.apply(this,arguments)}function ac(){return ac=(0,it.Z)($e().mark(function e(t,r){var n,i,f;return $e().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return n=new Hu,O.next=3,Ml(r,t,{},n);case 3:return i=O.sent,O.next=6,Qr(i.internalStore);case 6:return f=O.sent,O.next=9,Promise.all(f.map(function(){var U=(0,it.Z)($e().mark(function W(q){var de,De,he,ee,fe,Se,Oe,be;return $e().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return de=q.schema,De=q.collectionName.split("-"),he=De[0],ee=parseInt(De[1],10),fe=Q(de.primaryKey),Re.next=8,Promise.all([r.createStorageInstance({databaseName:t,collectionName:he,schema:Ts(ee,fe),options:{},idleQueue:n}),r.createKeyObjectStorageInstance({databaseName:t,collectionName:Ha(he),options:{},idleQueue:n})]);case 8:return Oe=(Se=Re.sent)[0],be=Se[1],Re.next=13,Promise.all([Oe.remove(),be.remove()]);case 13:case"end":return Re.stop()}},W)}));return function(W){return U.apply(this,arguments)}}()));case 9:return O.abrupt("return",Promise.all([i.internalStore.remove(),i.localDocumentsStore.remove()]));case 10:case"end":return O.stop()}},e)})),ac.apply(this,arguments)}var eh={RxSchema:_.prototype,Crypter:Or.prototype,RxDocument:_i,RxQuery:nu.prototype,RxCollection:iu.prototype,RxDatabase:au.prototype},uc=new Set;function Ko(e){if(nr("preAddRxPlugin",{plugin:e,plugins:uc}),!uc.has(e)){if(uc.add(e),!e.rxdb)throw Wt("PL1",{plugin:e});e.prototypes&&Object.entries(e.prototypes).forEach(function(t){return(0,t[1])(eh[t[0]])}),e.overwritable&&Object.assign(hr,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(function(t){return Hn[t[0]].push(t[1])})}}var cc,lc,fc,xl={UT1:"given name is no string or empty",UT2:"collection- and database-names must match the regex to be compatible with couchdb databases.\n    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'",UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",PL1:"Given plugin is not RxDB plugin. Pouchdb plugins must be added via addPouchPlugin()",PL2:"You tried importy a RxDB plugin to pouchdb. Use addRxPlugin() instead.",P1:"PouchDB.getBatch: limit must be > 2",P2:"bulkWrite() cannot be called with an empty array",P3:"bulkAddRevisions cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU7:"query must be an object",QU8:"query cannot be an array",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase.[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://pubkey.github.io/rxdb/questions-answers.html#cant-change-the-schema",DB7:"RxDatabase.addCollections(): schema encrypted but no password given",DB8:"RxDatabase.create(): A RxDatabase with the same name and adapter already exists.\nMake sure to use this combination only once or set ignoreDuplicate to true if you do this intentional",DB9:"RxDatabase.create(): Adapter not added. Use RxDB.plugin(require('pouchdb-adapter-[adaptername]');",DB10:"RxDatabase.create(): To use leveldown-adapters, you have to add the leveldb-plugin. Use RxDB.plugin(require('pouchdb-adapter-leveldb'));",DB11:"RxDatabase.create(): Invalid db-name, folder-paths must not have an ending slash",COL1:"RxDocument.insert() You cannot insert an existing document",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.atomicUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL19:"Document document update conflict, when changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): cant save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",AT1:"to use attachments, please define this in your schema",EN1:"password is no string",EN2:"validatePassword: min-length of password not complied",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ cant use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not useable on local documents",LD7:"Local document already exists",RC1:"Replication: already added",RC2:"RxCollection.syncCouchDB() query must be from the same RxCollection",RC3:"RxCollection.syncCouchDB() Do not use a collection's pouchdb as remote, use the collection instead",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await inital replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await inital replication if multiInstance because the replication might run on another instance",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",DEV1:"dev-mode added multiple times, this is likely because you have mixed up the import from the the plugins/core and the full RxDB",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",IM1:"InMemory: Memory-Adapter must be added. Use addPouchPlugin(require('pouchdb-adapter-memory'));",IM2:"inMemoryCollection.sync(): Do not replicate with the in-memory instance. Replicate with the parent instead",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"cannot find sub schema by key",SNH:"This should never happen"},ih=new(ko(_i));function kl(){if(!fc){var t=Object.getOwnPropertyNames(ih),r=Object.getOwnPropertyNames(_i);fc=[].concat(t,r,["deleted","synced"])}return fc}function oh(e){return function r(n,i){"object"==typeof n&&Object.keys(n).forEach(function(f){n.properties||function(n,i,f){if("string"==typeof n&&"object"==typeof i&&!Array.isArray(i)&&function(e){if(""!==e&&"_deleted"!==e){if(["properties","language"].includes(e))throw ze("SC23",{fieldName:e});var t="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(t);if(!e.match(r))throw ze("SC1",{regex:t,fieldName:e})}}(n),i.hasOwnProperty("item")&&"array"!==i.type)throw ze("SC2",{fieldName:n});if(i.hasOwnProperty("required")&&"boolean"==typeof i.required)throw ze("SC24",{fieldName:n});if(i.hasOwnProperty("ref"))if(Array.isArray(i.type)){if(i.type.length>2||!i.type.includes("string")||!i.type.includes("null"))throw ze("SC4",{fieldName:n})}else switch(i.type){case"string":break;case"array":if(!i.items||!i.items.type||"string"!==i.items.type)throw ze("SC3",{fieldName:n});break;default:throw ze("SC4",{fieldName:n})}var d=f.split(".").length>=2;if(d){if(i.primary)throw ze("SC6",{path:f,primary:i.primary});if(i.default)throw ze("SC7",{path:f})}if(!d&&"_"===n.charAt(0)){if("_deleted"===n)return;throw ze("SC8",{fieldName:n})}}(f,n[f],i);var d=i;"properties"!==f&&(d=d+"."+f),r(n[f],d)})}(e,""),!0}function Ll(e){for(var t=e.split("."),r="",n=0;n<t.length;n+=1)r=r.concat("[]"!==t[n]?".properties.".concat(t[n]):".items");return an(r)}function dc(e){!e||Object.entries(e).forEach(function(t){var r=t[0],n=t[1];if("string"!=typeof r)throw Wt("COL14",{name:r});if(r.startsWith("_"))throw Wt("COL15",{name:r});if("function"!=typeof n)throw Wt("COL16",{name:r,type:typeof r});if(function(){if(!cc){var e=new iu,t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));cc=[].concat(t,r)}return cc}().includes(r)||kl().includes(r))throw ze("COL17",{name:r})})}var Bl="^[a-z][_$a-z0-9\\-]*$",dh=new RegExp(Bl);function Fl(e){if("string"!=typeof e||0===e.length)throw Wt("UT1",{name:e});if(Ao(e))return!0;if(!e.match(dh))throw ze("UT2",{regex:Bl,givenName:e});return!0}var ph=l(4949),mh=l.n(ph),Nl="dev-mode",gh={name:Nl,rxdb:!0,overwritable:{isDevMode:function(){return!0},deepFreezeWhenDevMode:function(e){return e&&mh()(e)},tunnelErrorMessage:function(t){if(!xl[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return xl[t]}},hooks:{preAddRxPlugin:function(t){if(t.plugin.name===Nl)throw ze("DEV1",{plugins:t.plugins})},preCreateRxSchema:function(e){if(!e.primaryKey)throw ze("SC30",{schema:e});if(!e.hasOwnProperty("properties"))throw ze("SC29",{schema:e});if(e.properties._rev)throw ze("SC10",{schema:e});if(!e.hasOwnProperty("version")||"number"!=typeof e.version||e.version<0)throw ze("SC11",{version:e.version});if(oh(e),function(e){if(!e.primaryKey)throw ze("SC30",{schema:e});function t(d){if(!d)throw ze("SC33",{schema:e});var O=d.type;if(!O||!["string","number","integer"].includes(O))throw ze("SC32",{schema:e,args:{schemaPart:d}})}if("string"==typeof e.primaryKey)t(e.properties[e.primaryKey]);else{var i=e.primaryKey;t(Sn(e,i.key)),i.fields.forEach(function(d){t(Sn(e,d))})}}(e),Object.keys(e.properties).forEach(function(t){var r=e.properties[t];if(t===e.primaryKey){if(e.indexes&&e.indexes.includes(t))throw ze("SC13",{value:r,schema:e});if(r.unique)throw ze("SC14",{value:r,schema:e});if(e.encrypted&&e.encrypted.includes(t))throw ze("SC15",{value:r,schema:e});if("string"!==r.type)throw ze("SC16",{value:r,schema:e})}if(kl().includes(t))throw ze("SC17",{key:t,schema:e})}),e.indexes){if(!Array.isArray(e.indexes))throw ze("SC18",{indexes:e.indexes,schema:e});e.indexes.forEach(function(t){if("string"!=typeof t&&!Array.isArray(t))throw ze("SC19",{index:t,schema:e});if(Array.isArray(t))for(var r=0;r<t.length;r+=1)if("string"!=typeof t[r])throw ze("SC20",{index:t,schema:e})})}if(Object.keys(e).includes("compoundIndexes"))throw ze("SC25",{schema:e});Object.keys(ji(e)).map(function(t){var r=t.split(".");return r.pop(),r.join(".")}).filter(function(t){return""!==t}).filter(function(t,r,n){return n.indexOf(t)===r}).filter(function(t){return!!dr().get(e,t).index}).forEach(function(t){throw ze("SC26",{index:an(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})}),(e.indexes||[]).reduce(function(t,r){return Array.isArray(r)?t.concat(r):t.push(r),t},[]).filter(function(t,r,n){return n.indexOf(t)===r}).map(function(t){var r=Ll(t),n=dr().get(e,r);if(!n||"object"!=typeof n)throw ze("SC21",{index:t,schema:e});return{indexPath:t,schemaObj:n}}).filter(function(t){return"string"!==t.schemaObj.type&&"integer"!==t.schemaObj.type&&"number"!==t.schemaObj.type}).forEach(function(t){throw ze("SC22",{key:t.indexPath,type:t.schemaObj.type,schema:e})}),Object.keys(ji(e)).map(function(t){var r=t.split(".");return r.pop(),r.join(".")}).filter(function(t){return""!==t&&"attachments"!==t}).filter(function(t,r,n){return n.indexOf(t)===r}).filter(function(t){return!!dr().get(e,t).encrypted}).forEach(function(t){throw ze("SC27",{index:an(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})}),e.encrypted&&e.encrypted.forEach(function(t){var r=Ll(t),n=dr().get(e,r);if(!n||"object"!=typeof n)throw ze("SC28",{field:t,schema:e})})},preCreateRxDatabase:function(t){!function(e){if(Fl(e.name),Ao(e.name)&&(e.name.endsWith("/")||e.name.endsWith("\\")))throw ze("DB11",{name:e.name})}(t)},preCreateRxCollection:function(t){if(function(e){if(function(){if(!lc){var e=new au("pseudoInstance","memory"),t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));lc=[].concat(t,r),e.destroy()}return lc}().includes(e.name))throw ze("DB5",{name:e.name});Fl(e.name)}(t),"_"===t.name.charAt(0))throw ze("DB2",{name:t.name});if(!t.schema)throw ze("DB4",{name:t.name,args:t})},preCreateRxQuery:function(t){!function(e){if("[object Object]"!==Object.prototype.toString.call(e.queryObj))throw Wt("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj});var r=["selector","limit","skip","sort"];Object.keys(e.queryObj).forEach(function(n){if(!r.includes(n))throw Wt("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj,key:n})})}(t)},createRxCollection:function(t){dc(t.statics),dc(t.methods),dc(t.attachments),t.schema&&t.migrationStrategies&&function(e,t){if("object"!=typeof t||Array.isArray(t))throw Wt("COL11",{schema:e});var r=function(e){var r=0;return new Array(e.version?e.version:0).fill(0).map(function(){return r++})}(e);if(r.length!==Object.keys(t).length)throw ze("COL12",{have:Object.keys(t),should:r});r.map(function(n){return{v:n,s:t[n+1]}}).filter(function(n){return"function"!=typeof n.s}).forEach(function(n){throw Wt("COL13",{version:n.v,type:typeof n,schema:e})})}(t.schema,t.migrationStrategies)}}},yh=l(7466),jl=l.n(yh),_h=l(4384),wh=function(t){return function(e,t){return jl().encrypt(e,t).toString()}(t,this.password)},Sh=function(t){var r=function(e,t){return jl().decrypt(e,t).toString(_h)}(t,this.password);return r};function hc(){return hc=(0,it.Z)($e().mark(function e(t){var r,n,i,f;return $e().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(t.password){O.next=2;break}return O.abrupt("return",Br);case 2:return r=Bi(t.password),n="pwHash",O.next=6,As(t.localDocumentsStore,n);case 6:if(i=O.sent){O.next=14;break}return f={_id:n,value:r,_attachments:{}},O.next=11,t.localDocumentsStore.bulkWrite([{document:f}]);case 11:case 20:return O.abrupt("return",!0);case 14:if(r===i.value){O.next=20;break}return O.next=17,t.destroy();case 17:throw ze("DB1",{passwordHash:Bi(t.password),existingPasswordHash:i.value});case 21:case"end":return O.stop()}},e)})),hc.apply(this,arguments)}var Ah={Crypter:function(t){t._encryptString=wh,t._decryptString=Sh}},Oh={validatePassword:function(t){if(t&&"string"!=typeof t)throw Wt("EN1",{password:t});if(t&&t.length<8)throw ze("EN2",{minPassLength:8,password:t})}},Ph={name:"encryption",rxdb:!0,prototypes:Ah,overwritable:Oh,hooks:{createRxDatabase:function(t){return function(e){return hc.apply(this,arguments)}(t)}}},Ih=("undefined"!=typeof AbortController&&AbortController,fetch),cu=Headers;function Sr(e,t){if(e===t)return 0;e=Qi(e),t=Qi(t);var r=vc(e),n=vc(t);if(r-n!=0)return r-n;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var i=Sr(e[n],t[n]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var r=Object.keys(e),n=Object.keys(t),i=Math.min(r.length,n.length),f=0;f<i;f++){var d=Sr(r[f],n[f]);if(0!==d||0!==(d=Sr(e[r[f]],t[n[f]])))return d}return r.length===n.length?0:r.length>n.length?1:-1}(e,t)}function Qi(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var r=e.length;e=new Array(r);for(var n=0;n<r;n++)e[n]=Qi(t[n])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var f=t[i];void 0!==f&&(e[i]=Qi(f))}}}return e}function pn(e){return vc(e=Qi(e))+""+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),r=parseInt(t[1],10),n=e<0,i=n?"0":"2",d=function(e,t,r){var n=function(e,t,r){for(var n="",i=3-e.length;n.length<i;)n+="0";return n}(e);return n+e}(((n?-r:r)- -324).toString());i+=""+d;var O=Math.abs(parseFloat(t[0]));n&&(O=10-O);var U=O.toFixed(20);return i+""+U.replace(/\.?0+$/,"")}(e);case"string":return e.replace(/\u0002/g,"\x02\x02").replace(/\u0001/g,"\x01\x02").replace(/\u0000/g,"\x01\x01");case"object":var t=Array.isArray(e),r=t?e:Object.keys(e),n=-1,i=r.length,f="";if(t)for(;++n<i;)f+=pn(r[n]);else for(;++n<i;){var d=r[n];f+=pn(d)+pn(e[d])}return f}return""}(e)+"\0"}function xh(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var f="0"===e[t];t++;var d="",O=e.substring(t,t+3),U=parseInt(O,10)+-324;for(f&&(U=-U),t+=3;;){var W=e[t];if("\0"===W)break;d+=W,t++}n=1===(d=d.split(".")).length?parseInt(d,10):parseFloat(d[0]+"."+d[1]),f&&(n-=10),0!==U&&(n=parseFloat(n+"e"+U))}return{num:n,length:t-r}}function kh(e,t){var r=e.pop();if(t.length){var n=t[t.length-1];r===n.element&&(t.pop(),n=t[t.length-1]);var i=n.element,f=n.index;Array.isArray(i)?i.push(r):f===e.length-2?i[e.pop()]=r:e.push(r)}}function vc(e){var r=["boolean","number","string","object"].indexOf(typeof e);return~r?null===e?1:Array.isArray(e)?5:r<3?r+2:r+3:Array.isArray(e)?5:void 0}function gc(e,t){for(var r=e,n=0,i=t.length;n<i&&(r=r[t[n]]);n++);return r}function Uh(e,t,r){for(var n=0,i=t.length;n<i-1;n++){var f=t[n];e=e[f]=e[f]||{}}e[t[i-1]]=r}function yc(e,t){return e<t?-1:e>t?1:0}function Ho(e){for(var t=[],r="",n=0,i=e.length;n<i;n++){var f=e[n];"."===f?n>0&&"\\"===e[n-1]?r=r.substring(0,r.length-1)+".":(t.push(r),r=""):r+=f}return t.push(r),t}var $h=["$or","$nor","$not"];function zl(e){return $h.indexOf(e)>-1}function Wr(e){return Object.keys(e)[0]}function _c(e){return e[Wr(e)]}function Vo(e){var t={};return e.forEach(function(r){Object.keys(r).forEach(function(n){var i=r[n];if("object"!=typeof i&&(i={$eq:i}),zl(n))t[n]=i instanceof Array?i.map(function(d){return Vo([d])}):Vo([i]);else{var f=t[n]=t[n]||{};Object.keys(i).forEach(function(d){var O=i[d];return"$gt"===d||"$gte"===d?function(e,t,r){void 0===r.$eq&&(void 0!==r.$gte?"$gte"===e?t>r.$gte&&(r.$gte=t):t>=r.$gte&&(delete r.$gte,r.$gt=t):void 0!==r.$gt?"$gte"===e?t>r.$gt&&(delete r.$gt,r.$gte=t):t>r.$gt&&(r.$gt=t):r[e]=t)}(d,O,f):"$lt"===d||"$lte"===d?function(e,t,r){void 0===r.$eq&&(void 0!==r.$lte?"$lte"===e?t<r.$lte&&(r.$lte=t):t<=r.$lte&&(delete r.$lte,r.$lt=t):void 0!==r.$lt?"$lte"===e?t<r.$lt&&(delete r.$lt,r.$lte=t):t<r.$lt&&(r.$lt=t):r[e]=t)}(d,O,f):"$ne"===d?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(O,f):"$eq"===d?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(O,f):void(f[d]=O)})}})}),t}function Wl(e){for(var t in e){if(Array.isArray(e))for(var r in e)e[r].$and&&(e[r]=Vo(e[r].$and));var n=e[t];"object"==typeof n&&Wl(n)}return e}function Kl(e,t){for(var r in e){"$and"===r&&(t=!0);var n=e[r];"object"==typeof n&&(t=Kl(n,t))}return t}function bc(e){var t=er(e),r=!1;Kl(t,!1)&&("$and"in(t=Wl(t))&&(t=Vo(t.$and)),r=!0),["$or","$nor"].forEach(function(O){O in t&&t[O].forEach(function(U){for(var W=Object.keys(U),q=0;q<W.length;q++){var ne=W[q],de=U[ne];("object"!=typeof de||null===de)&&(U[ne]={$eq:de})}})}),"$not"in t&&(t.$not=Vo([t.$not]));for(var n=Object.keys(t),i=0;i<n.length;i++){var f=n[i],d=t[f];"object"!=typeof d||null===d?d={$eq:d}:"$ne"in d&&!r&&(d.$ne=[d.$ne]),t[f]=d}return t}function lu(e,t,r){if(e=e.filter(function(d){return $s(d.doc,t.selector,r)}),t.sort){var n=function(e){function t(r){return e.map(function(n){var f=Ho(Wr(n));return gc(r,f)})}return function(r,n){var d=Sr(t(r.doc),t(n.doc));return 0!==d?d:yc(r.doc._id,n.doc._id)}}(t.sort);e=e.sort(n),"string"!=typeof t.sort[0]&&"desc"===_c(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0;e=e.slice(i,("limit"in t?t.limit:e.length)+i)}return e}function $s(e,t,r){return r.every(function(n){var i=t[n],f=Ho(n),d=gc(e,f);return zl(n)?function(e,t,r){return"$or"===e?t.some(function(n){return $s(r,n,Object.keys(n))}):"$not"===e?!$s(r,t,Object.keys(t)):!t.find(function(n){return $s(r,n,Object.keys(n))})}(n,i,e):Ec(i,e,f,d)})}function Ec(e,t,r,n){return!e||("object"==typeof e?Object.keys(e).every(function(i){return function(e,t,r,n,i){if(!Vl[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Vl[e](t,r,n,i)}(i,t,e[i],r,n)}):e===n)}function Go(e){return null!=e}function Zi(e){return void 0!==e}function Hl(e,t){return t.some(function(r){return e instanceof Array?e.indexOf(r)>-1:e===r})}var Vl={$elemMatch:function(e,t,r,n){return!(!Array.isArray(n)||0===n.length)&&n.some("object"==typeof n[0]?function(i){return $s(i,t,Object.keys(t))}:function(i){return Ec(t,e,r,i)})},$allMatch:function(e,t,r,n){return!(!Array.isArray(n)||0===n.length)&&n.every("object"==typeof n[0]?function(i){return $s(i,t,Object.keys(t))}:function(i){return Ec(t,e,r,i)})},$eq:function(e,t,r,n){return Zi(n)&&0===Sr(n,t)},$gte:function(e,t,r,n){return Zi(n)&&Sr(n,t)>=0},$gt:function(e,t,r,n){return Zi(n)&&Sr(n,t)>0},$lte:function(e,t,r,n){return Zi(n)&&Sr(n,t)<=0},$lt:function(e,t,r,n){return Zi(n)&&Sr(n,t)<0},$exists:function(e,t,r,n){return t?Zi(n):!Zi(n)},$mod:function(e,t,r,n){return Go(n)&&function(e,t){var r=t[0],n=t[1];if(0===r)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(r,10)!==r)throw new Error("Divisor is not an integer");if(parseInt(n,10)!==n)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%r===n}(n,t)},$ne:function(e,t,r,n){return t.every(function(i){return 0!==Sr(n,i)})},$in:function(e,t,r,n){return Go(n)&&Hl(n,t)},$nin:function(e,t,r,n){return Go(n)&&!Hl(n,t)},$size:function(e,t,r,n){return Go(n)&&function(e,t){return e.length===t}(n,t)},$all:function(e,t,r,n){return Array.isArray(n)&&function(e,t){return t.every(function(r){return e.indexOf(r)>-1})}(n,t)},$regex:function(e,t,r,n){return Go(n)&&function(e,t){return new RegExp(t).test(e)}(n,t)},$type:function(e,t,r,n){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(n,t)}};function np(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter)return t(new Error('selector invalid for filter "'+("string"==typeof e.filter?e.filter:"function")+'"'));t()}function ip(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=is(e.view):e.filter=is(e.filter))}function sp(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!Cr(e.db)}function op(e,t){var r=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var n=Ne(G,"`view` filter parameter not found or invalid.");return r(n)}var i=ns(t.view);e.db.get("_design/"+i[0],function(d,O){if(e.isCancelled)return r(null,{status:"cancelled"});if(d)return r(Qe(d));var U=O&&O.views&&O.views[i[1]]&&O.views[i[1]].map;if(!U)return r(Ne(o,O.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=function(e){return ro(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}(U),e.doChanges(t)})}else if(t.selector)t.filter=function(d){return function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=lu([{doc:e}],{selector:t=bc(t)},Object.keys(t));return n&&1===n.length}(d,t.selector)},e.doChanges(t);else{var f=ns(t.filter);e.db.get("_design/"+f[0],function(d,O){if(e.isCancelled)return r(null,{status:"cancelled"});if(d)return r(Qe(d));var U=O&&O.filters&&O.filters[f[1]];if(!U)return r(Ne(o,O&&O.filters?"missing json key: "+f[1]:"missing json key: filters"));t.filter=function(e){return ro('"use strict";\nreturn '+e+";",{})}(U),e.doChanges(t)})}}function Qo(e,t,r){et().call(this);var n=this;this.db=e;var i=(t=t?er(t):{}).complete=ri(function(O,U){O?function(e,t){return"listenerCount"in e?e.listenerCount(t):et().listenerCount(e,t)}(n,"error")>0&&n.emit("error",O):n.emit("complete",U),n.removeAllListeners(),e.removeListener("destroyed",f)});function f(){n.cancel()}r&&(n.on("complete",function(O){r(null,O)}),n.on("error",r)),e.once("destroyed",f),t.onChange=function(O,U,W){n.isCancelled||function(e,t,r,n){try{e.emit("change",t,r,n)}catch(i){nt("error",'Error in .on("change", function):',i)}}(n,O,U,W)};var d=new Promise(function(O,U){t.complete=function(W,q){W?U(W):O(q)}});n.once("cancel",function(){e.removeListener("destroyed",f),t.complete(null,{status:"cancelled"})}),this.then=d.then.bind(d),this.catch=d.catch.bind(d),this.then(function(O){i(null,O)},i),e.taskqueue.isReady?n.validateChanges(t):e.taskqueue.addTask(function(O){O?t.complete(O):n.isCancelled?n.emit("cancel"):n.validateChanges(t)})}function lp(e,t,r){var n=[{rev:e._rev}];"all_docs"===r.style&&(n=yn(t.rev_tree).map(function(f){return{rev:f.rev}}));var i={id:t.id,changes:n,doc:e};return Gr(t,e._rev)&&(i.deleted=!0),r.conflicts&&(i.doc._conflicts=oi(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function Gl(e,t){return e<t?-1:e>t?1:0}function wc(e,t){return function(r,n){r||n[0]&&n[0].error?((r=r||n[0]).docId=t,e(r)):e(null,n.length?n[0]:n)}}function dp(e,t){var r=Gl(e._id,t._id);return 0!==r?r:Gl(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function Ql(e){var t=e._compactionQueue[0],r=t.opts,n=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(r.last_seq=i.last_seq),e._compact(r,function(f,d){f?n(f):n(null,d),R()(function(){e._compactionQueue.shift(),e._compactionQueue.length&&Ql(e)})})})}function Jt(){for(var e in et().call(this),Jt.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function Zo(){this.isReady=!1,this.failed=!1,this.queue=[]}function Ot(e,t){if(!(this instanceof Ot))return new Ot(e,t);var r=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=er(t),r.auto_compaction=t.auto_compaction,r.prefix=Ot.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var i=function(e,t){var r=e.match(/([a-z-]*):\/\/(.*)/);if(r)return{name:/https?/.test(r[1])?r[1]+"://"+r[2]:r[2],adapter:r[1]};var n=Ot.adapters,i=Ot.preferredAdapters,f=Ot.prefix,d=t.adapter;if(!d)for(var O=0;O<i.length&&"idb"===(d=i[O])&&"websql"in n&&se()&&localStorage["_pouch__websqldb_"+f+e];++O)nt("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var U=n[d];return{name:U&&"use_prefix"in U&&!U.use_prefix?e:f+e,adapter:d}}((t.prefix||"")+e,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,r.name=e,r._adapter=t.adapter,Ot.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Ot.adapters[t.adapter]||!Ot.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);Jt.call(r),r.taskqueue=new Zo,r.adapter=t.adapter,Ot.adapters[t.adapter].call(r,t,function(f){if(f)return r.taskqueue.fail(f);(function(e){function t(n){e.removeListener("closed",r),n||e.constructor.emit("destroyed",e.name)}function r(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",r),e.constructor.emit("ref",e)})(r),r.emit("created",r),Ot.emit("created",r.name),r.taskqueue.ready(r)})}P()(Qo,et()),Qo.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Qo.prototype.validateChanges=function(e){var t=e.complete,r=this;Ot._changesFilterPlugin?Ot._changesFilterPlugin.validate(e,function(n){if(n)return t(n);r.doChanges(e)}):r.doChanges(e)},Qo.prototype.doChanges=function(e){var t=this,r=e.complete;if("live"in(e=er(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=lp,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(Ot._changesFilterPlugin){if(Ot._changesFilterPlugin.normalize(e),Ot._changesFilterPlugin.shouldFilter(this,e))return Ot._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(f){f in e&&nt("warn",'The "'+f+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=r;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){var i=t.cancel;t.cancel=p()(function(f){n.cancel(),i.apply(this,f)})}}else this.db.info().then(function(f){t.isCancelled?r(null,{status:"cancelled"}):(e.since=f.update_seq,t.doChanges(e))},r)},P()(Jt,et()),Jt.prototype.post=sr("post",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(Ne(X));this.bulkDocs({docs:[e]},t,wc(r,e._id))}),Jt.prototype.put=sr("put",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof e||Array.isArray(e))return r(Ne(X));if(Js(e._id),nn(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,r):this._putLocal(e,r);var d,O,W,q,n=this;function f(d){"function"==typeof n._put&&!1!==t.new_edits?n._put(e,t,d):n.bulkDocs({docs:[e]},t,wc(d,e._id))}t.force&&e._rev?(O=(d=e._rev.split("-"))[1],W=parseInt(d[0],10)+1,q=no(),e._revisions={start:W,ids:[q,O]},e._rev=W+"-"+q,t.new_edits=!1,f(function(d){r(d,d?null:{ok:!0,id:e._id,rev:e._rev})})):f(r)}),Jt.prototype.putAttachment=sr("putAttachment",function(e,t,r,n,i){var f=this;function d(O){var U="_rev"in O?parseInt(O._rev,10):0;return O._attachments=O._attachments||{},O._attachments[t]={content_type:i,data:n,revpos:++U},f.put(O)}return"function"==typeof i&&(i=n,n=r,r=null),void 0===i&&(i=n,n=r,r=null),i||nt("warn","Attachment",t,"on document",e,"is missing content_type"),f.get(e).then(function(O){if(O._rev!==r)throw Ne(v);return d(O)},function(O){if(O.reason===o.message)return d({_id:e});throw O})}),Jt.prototype.removeAttachment=sr("removeAttachment",function(e,t,r,n){var i=this;i.get(e,function(f,d){if(f)n(f);else{if(d._rev===r)return d._attachments?(delete d._attachments[t],0===Object.keys(d._attachments).length&&delete d._attachments,void i.put(d,n)):n();n(Ne(v))}})}),Jt.prototype.remove=sr("remove",function(e,t,r,n){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof r&&(n=r,r={})):(i=e,"function"==typeof t?(n=t,r={}):(n=r,r=t)),(r=r||{}).was_delete=!0;var f={_id:i._id,_rev:i._rev||r.rev,_deleted:!0};if(nn(f._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,n);this.bulkDocs({docs:[f]},r,wc(n,f._id))}),Jt.prototype.revsDiff=sr("revsDiff",function(e,t,r){"function"==typeof t&&(r=t,t={});var n=Object.keys(e);if(!n.length)return r(null,{});var i=0,f=new w;function d(U,W){f.has(U)||f.set(U,{missing:[]}),f.get(U).missing.push(W)}n.map(function(U){this._getRevisionTree(U,function(W,q){if(W&&404===W.status&&"missing"===W.message)f.set(U,{missing:e[U]});else{if(W)return r(W);!function(U,W){var q=e[U].slice(0);ur(W,function(ne,de,De,he,ee){var fe=de+"-"+De,Se=q.indexOf(fe);-1!==Se&&(q.splice(Se,1),"available"!==ee.status&&d(U,fe))}),q.forEach(function(ne){d(U,ne)})}(U,q)}if(++i===n.length){var ne={};return f.forEach(function(de,De){ne[De]=de}),r(null,ne)}})},this)}),Jt.prototype.bulkGet=sr("bulkGet",function(e,t){Ae(this,e,t)}),Jt.prototype.compactDocument=sr("compactDocument",function(e,t,r){var n=this;this._getRevisionTree(e,function(i,f){if(i)return r(i);var d=function(e){var t={},r=[];return ur(e,function(n,i,f,d){var O=i+"-"+f;return n&&(t[O]=0),void 0!==d&&r.push({from:d,to:O}),O}),r.reverse(),r.forEach(function(n){t[n.from]=void 0===t[n.from]?1+t[n.to]:Math.min(t[n.from],1+t[n.to])}),t}(f),O=[],U=[];Object.keys(d).forEach(function(W){d[W]>t&&O.push(W)}),ur(f,function(W,q,ne,de,De){var he=q+"-"+ne;"available"===De.status&&-1!==O.indexOf(he)&&U.push(he)}),n._doCompaction(e,U,r)})}),Jt.prototype.compact=sr("compact",function(e,t){"function"==typeof e&&(t=e,e={});var r=this;e=e||{},r._compactionQueue=r._compactionQueue||[],r._compactionQueue.push({opts:e,callback:t}),1===r._compactionQueue.length&&Ql(r)}),Jt.prototype._compact=function(e,t){var r=this,i=[];r.changes({return_docs:!1,last_seq:e.last_seq||0}).on("change",function(O){i.push(r.compactDocument(O.id,0))}).on("complete",function(O){var U=O.last_seq;Promise.all(i).then(function(){return Ln(r,"_local/compaction",function(q){return(!q.last_seq||q.last_seq<U)&&(q.last_seq=U,q)})}).then(function(){t(null,{ok:!0})}).catch(t)}).on("error",t)},Jt.prototype.get=sr("get",function(e,t,r){if("function"==typeof t&&(r=t,t={}),"string"!=typeof e)return r(Ne(h));if(nn(e)&&"function"==typeof this._getLocal)return this._getLocal(e,r);var n=[],i=this;function f(){var U=[],W=n.length;if(!W)return r(null,U);n.forEach(function(q){i.get(e,{rev:q,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(ne,de){if(ne)U.push({missing:q});else{for(var De,he=0,ee=U.length;he<ee;he++)if(U[he].ok&&U[he].ok._rev===de._rev){De=!0;break}De||U.push({ok:de})}--W||r(null,U)})})}if(!t.open_revs)return this._get(e,t,function(U,W){if(U)return U.docId=e,r(U);var q=W.doc,ne=W.metadata,de=W.ctx;if(t.conflicts){var De=oi(ne);De.length&&(q._conflicts=De)}if(Gr(ne,q._rev)&&(q._deleted=!0),t.revs||t.revs_info){for(var he=q._rev.split("-"),ee=parseInt(he[0],10),fe=he[1],Se=io(ne.rev_tree),Oe=null,be=0;be<Se.length;be++){var xe=Se[be],Re=xe.ids.map(function(Ft){return Ft.id}).indexOf(fe);(Re===ee-1||!Oe&&-1!==Re)&&(Oe=xe)}if(!Oe)return(U=new Error("invalid rev tree")).docId=e,r(U);var We=Oe.ids.map(function(Ft){return Ft.id}).indexOf(q._rev.split("-")[1])+1;if(Oe.ids.splice(We,Oe.ids.length-We),Oe.ids.reverse(),t.revs&&(q._revisions={start:Oe.pos+Oe.ids.length-1,ids:Oe.ids.map(function(Ft){return Ft.id})}),t.revs_info){var bt=Oe.pos+Oe.ids.length;q._revs_info=Oe.ids.map(function(Ft){return{rev:--bt+"-"+Ft.id,status:Ft.opts.status}})}}if(t.attachments&&q._attachments){var dt=q._attachments,It=Object.keys(dt).length;if(0===It)return r(null,q);Object.keys(dt).forEach(function(Ft){this._getAttachment(q._id,Ft,dt[Ft],{rev:q._rev,binary:t.binary,ctx:de},function(St,xt){var $t=q._attachments[Ft];$t.data=xt,delete $t.stub,delete $t.length,--It||r(null,q)})},i)}else{if(q._attachments)for(var Ut in q._attachments)q._attachments.hasOwnProperty(Ut)&&(q._attachments[Ut].stub=!0);r(null,q)}});if("all"===t.open_revs)this._getRevisionTree(e,function(U,W){if(U)return r(U);n=yn(W).map(function(q){return q.rev}),f()});else{if(!Array.isArray(t.open_revs))return r(Ne(ge,"function_clause"));n=t.open_revs;for(var d=0;d<n.length;d++){var O=n[d];if("string"!=typeof O||!/^\d+-/.test(O))return r(Ne(_e))}f()}}),Jt.prototype.getAttachment=sr("getAttachment",function(e,t,r,n){var i=this;r instanceof Function&&(n=r,r={}),this._get(e,r,function(f,d){return f?n(f):d.doc._attachments&&d.doc._attachments[t]?(r.ctx=d.ctx,r.binary=!0,void i._getAttachment(e,t,d.doc._attachments[t],r,n)):n(Ne(o))})}),Jt.prototype.allDocs=sr("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(n){return n in e})[0];if(r)return void t(Ne($,"Query parameter `"+r+"` is not compatible with multi-get"));if(!Cr(this)&&(function(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)}),Jt.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new Qo(this,e,t)},Jt.prototype.close=sr("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),Jt.prototype.info=sr("info",function(e){var t=this;this._info(function(r,n){if(r)return e(r);n.db_name=n.db_name||t.name,n.auto_compaction=!(!t.auto_compaction||Cr(t)),n.adapter=t.adapter,e(null,n)})}),Jt.prototype.id=sr("id",function(e){return this._id(e)}),Jt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Jt.prototype.bulkDocs=sr("bulkDocs",function(e,t,r){if("function"==typeof t&&(r=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(Ne(c));for(var n=0;n<e.docs.length;++n)if("object"!=typeof e.docs[n]||Array.isArray(e.docs[n]))return r(Ne(X));var i;if(e.docs.forEach(function(O){O._attachments&&Object.keys(O._attachments).forEach(function(U){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(U),O._attachments[U].content_type||nt("warn","Attachment",U,"on document",O._id,"is missing content_type")})}),i)return r(Ne(G,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var f=this;!t.new_edits&&!Cr(f)&&e.docs.sort(dp),function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r._deleted)delete r._attachments;else if(r._attachments)for(var n=Object.keys(r._attachments),i=0;i<n.length;i++){var f=n[i];r._attachments[f]=vn(r._attachments[f],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var d=e.docs.map(function(O){return O._id});return this._bulkDocs(e,t,function(O,U){if(O)return r(O);if(t.new_edits||(U=U.filter(function(ne){return ne.error})),!Cr(f))for(var W=0,q=U.length;W<q;W++)U[W].id=U[W].id||d[W];r(null,U)})}),Jt.prototype.registerDependentDatabase=sr("registerDependentDatabase",function(e,t){var r=new this.constructor(e,this.__opts);Ln(this,"_local/_pouch_dependentDbs",function(i){return i.dependentDbs=i.dependentDbs||{},!i.dependentDbs[e]&&(i.dependentDbs[e]=!0,i)}).then(function(){t(null,{db:r})}).catch(t)}),Jt.prototype.destroy=sr("destroy",function(e,t){"function"==typeof e&&(t=e,e={});var r=this,n=!("use_prefix"in r)||r.use_prefix;function i(){r._destroy(e,function(f,d){if(f)return t(f);r._destroyed=!0,r.emit("destroyed"),t(null,d||{ok:!0})})}if(Cr(r))return i();r.get("_local/_pouch_dependentDbs",function(f,d){if(f)return 404!==f.status?t(f):i();var U=r.constructor,W=Object.keys(d.dependentDbs).map(function(q){var ne=n?q.replace(new RegExp("^"+U.prefix),""):q;return new U(ne,r.__opts).destroy()});Promise.all(W).then(i,t)})}),Zo.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Zo.prototype.fail=function(e){this.failed=e,this.execute()},Zo.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Zo.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},P()(Ot,Jt),Ot.adapters={},Ot.preferredAdapters=[],Ot.prefix="_pouch_";var Zl=new(et());(function(e){Object.keys(et().prototype).forEach(function(r){"function"==typeof et().prototype[r]&&(e[r]=Zl[r].bind(Zl))});var t=e._destructionListeners=new w;e.on("ref",function(n){t.has(n.name)||t.set(n.name,[]),t.get(n.name).push(n)}),e.on("unref",function(n){if(t.has(n.name)){var i=t.get(n.name),f=i.indexOf(n);f<0||(i.splice(f,1),i.length>1?t.set(n.name,i):t.delete(n.name))}}),e.on("destroyed",function(n){if(t.has(n)){var i=t.get(n);t.delete(n),i.forEach(function(f){f.emit("destroyed",!0)})}})})(Ot),Ot.adapter=function(e,t,r){t.valid()&&(Ot.adapters[e]=t,r&&Ot.preferredAdapters.push(e))},Ot.plugin=function(e){if("function"==typeof e)e(Ot);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){Ot.prototype[t]=e[t]})}return this.__defaults&&(Ot.__defaults=kn({},this.__defaults)),Ot},Ot.defaults=function(e){function t(r,n){if(!(this instanceof t))return new t(r,n);n=n||{},r&&"object"==typeof r&&(r=(n=r).name,delete n.name),n=kn({},t.__defaults,n),Ot.call(this,r,n)}return P()(t,Ot),t.preferredAdapters=Ot.preferredAdapters.slice(),Object.keys(Ot).forEach(function(r){r in t||(t[r]=Ot[r])}),t.__defaults=kn({},this.__defaults,e),t},Ot.fetch=function(e,t){return Ih(e,t)},Ot.plugin(function(e){e._changesFilterPlugin={validate:np,normalize:ip,shouldFilter:sp,filter:op}}),Ot.version="7.2.2";const fu=Ot;function Yi(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Yi)}catch{}}function Sc(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Sc)}catch{}}function Cc(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Cc)}catch{}}function Yl(e,t){return t&&e.then(function(r){R()(function(){t(null,r)})},function(r){R()(function(){t(r)})}),e}function Dc(e,t){return function(){var r=arguments,n=this;return e.add(function(){return t.apply(n,r)})}}function Jl(e){var t=new S(e),r=new Array(t.size),n=-1;return t.forEach(function(i){r[++n]=i}),r}function Ac(e){var t=new Array(e.size),r=-1;return e.forEach(function(n,i){t[++r]=i}),t}function Yo(){this.promise=new Promise(function(e){e()})}function Xl(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function ql(e,t,r,n,i,f){var O,d=function(e,t){return Xl(e)+Xl(t)+"undefined"}(r,n);if(!i&&(O=e._cachedViews=e._cachedViews||{})[d])return O[d];var U=e.info().then(function(W){var q=W.db_name+"-mrview-"+(i?"temp":Ai(d));return Ln(e,"_local/"+f,function(de){de.views=de.views||{};var De=t;-1===De.indexOf("/")&&(De=t+"/"+t);var he=de.views[De]=de.views[De]||{};if(!he[q])return he[q]=!0,de}).then(function(){return e.registerDependentDatabase(q).then(function(de){var De=de.db;De.auto_compaction=!0;var he={name:q,db:De,sourceDB:e,adapter:e.adapter,mapFun:r,reduceFun:n};return he.db.get("_local/lastSeq").catch(function(ee){if(404!==ee.status)throw ee}).then(function(ee){return he.seq=ee?ee.seq:0,O&&he.db.once("destroyed",function(){delete O[d]}),he})})})});return O&&(O[d]=U),U}P()(Yi,Error),P()(Sc,Error),P()(Cc,Error),Yo.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},Yo.prototype.finish=function(){return this.promise};var ef={},tf=new Yo;function Oc(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function nf(e,t){try{e.emit("error",t)}catch{nt("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),nt("error",t)}}function sf(e){return(e=er(e)).index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function Jo(e,t,r,n){var i,f;r.headers=new cu({"Content-type":"application/json"}),e.fetch(t,r).then(function(d){return i=d.status,f=d.ok,d.json()}).then(function(d){if(f)n(null,d);else{d.status=i;var O=Qe(d);n(O)}}).catch(n)}function Ap(e,t,r){t=sf(t),Jo(e,"_index",{method:"POST",body:JSON.stringify(t)},r)}function Op(e,t,r){Jo(e,"_find",{method:"POST",body:JSON.stringify(t)},r)}function Pp(e,t,r){Jo(e,"_explain",{method:"POST",body:JSON.stringify(t)},r)}function Ip(e,t){Jo(e,"_index",{method:"GET"},t)}function Tp(e,t,r){var n=t.ddoc,f=t.name;return n?f?void Jo(e,"_index/"+[n,t.type||"json",f].map(encodeURIComponent).join("/"),{method:"DELETE"},r):r(new Error("you must provide an index's name")):r(new Error("you must provide an index's ddoc"))}function af(e){return function(){for(var t=arguments.length,r=new Array(t),n=-1;++n<t;)r[n]=arguments[n];return e.call(this,r)}}function Xo(e){return af(function(t){var r=t.pop(),n=e.apply(this,t);return function(e,t){e.then(function(r){R()(function(){t(null,r)})},function(r){R()(function(){t(r)})})}(n,r),n})}var Pc=af(function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?t=t.concat(Pc.apply(null,i)):t.push(i)}return t});function Ic(e){for(var t={},r=0,n=e.length;r<n;r++)t=kn(t,e[r]);return t}function uf(e,t){for(var r=0,n=Math.min(e.length,t.length);r<n;r++)if(e[r]!==t[r])return!1;return!0}function cf(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Gp=function(e,t,r,n){function i(Ie,Me,Fe){try{Me(Fe)}catch(Xe){nf(Ie,Xe)}}function f(Ie,Me,Fe,Xe,He){try{return{output:Me(Fe,Xe,He)}}catch(qe){return nf(Ie,qe),{error:qe}}}function d(Ie,Me){var Fe=Sr(Ie.key,Me.key);return 0!==Fe?Fe:Sr(Ie.value,Me.value)}function O(Ie,Me,Fe){return Fe=Fe||0,"number"==typeof Me?Ie.slice(Fe,Me+Fe):Fe>0?Ie.slice(Fe):Ie}function U(Ie){var Me=Ie.value;return Me&&"object"==typeof Me&&Me._id||Ie.id}function q(Ie){return function(Me){return Ie.include_docs&&Ie.attachments&&Ie.binary&&function(Ie){Ie.rows.forEach(function(Me){var Fe=Me.doc&&Me.doc._attachments;!Fe||Object.keys(Fe).forEach(function(Xe){var He=Fe[Xe];Fe[Xe].data=je(He.data,He.content_type)})})}(Me),Me}}function ne(Ie,Me,Fe,Xe){var He=Me[Ie];void 0!==He&&(Xe&&(He=encodeURIComponent(JSON.stringify(He))),Fe.push(Ie+"="+He))}function de(Ie){if(void 0!==Ie){var Me=Number(Ie);return isNaN(Me)||Me!==parseInt(Ie,10)?Ie:Me}}function ee(Ie,Me){var Fe=Ie.descending?"endkey":"startkey",Xe=Ie.descending?"startkey":"endkey";if(void 0!==Ie[Fe]&&void 0!==Ie[Xe]&&Sr(Ie[Fe],Ie[Xe])>0)throw new Yi("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(Me.reduce&&!1!==Ie.reduce){if(Ie.include_docs)throw new Yi("{include_docs:true} is invalid for reduce");if(Ie.keys&&Ie.keys.length>1&&!Ie.group&&!Ie.group_level)throw new Yi("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(He){var qe=function(Ie){if(Ie){if("number"!=typeof Ie)return new Yi('Invalid value for integer: "'+Ie+'"');if(Ie<0)return new Yi('Invalid value for positive integer: "'+Ie+'"')}}(Ie[He]);if(qe)throw qe})}function be(Ie){return function(Me){if(404===Me.status)return Ie;throw Me}}function Ge(Ie){var Me="string"==typeof Ie?Ie:Ie.name,Fe=ef[Me];return Fe||(Fe=ef[Me]=new Yo),Fe}function We(Ie){return Dc(Ge(Ie),function(){return function(Ie){var Me,Fe;var He=t(Ie.mapFun,function(mt,Pt){var Qt={id:Fe._id,key:Qi(mt)};null!=Pt&&(Qt.value=Qi(Pt)),Me.push(Qt)}),qe=Ie.seq||0;function st(mt,Pt){return function(){return function(Ie,Me,Fe){var Xe="_local/lastSeq";return Ie.db.get(Xe).catch(be({_id:Xe,seq:0})).then(function(He){var qe=Ac(Me);return Promise.all(qe.map(function(st){return function(Ie,Me,Fe){var Xe="_local/doc_"+Ie,He={_id:Xe,keys:[]},qe=Fe.get(Ie),st=qe[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(qe[1])?Promise.resolve(He):Me.db.get(Xe).catch(be(He))).then(function(Ye){return function(Ye){return Ye.keys.length?Me.db.allDocs({keys:Ye.keys,include_docs:!0}):Promise.resolve({rows:[]})}(Ye).then(function(mt){return function(Ye,mt){for(var Pt=[],Qt=new S,Kt=0,zt=mt.rows.length;Kt<zt;Kt++){var ar=mt.rows[Kt].doc;if(ar&&(Pt.push(ar),Qt.add(ar._id),ar._deleted=!st.has(ar._id),!ar._deleted)){var qr=st.get(ar._id);"value"in qr&&(ar.value=qr.value)}}var Hr=Ac(st);return Hr.forEach(function(ia){if(!Qt.has(ia)){var sa={_id:ia},Rf=st.get(ia);"value"in Rf&&(sa.value=Rf.value),Pt.push(sa)}}),Ye.keys=Jl(Hr.concat(Ye.keys)),Pt.push(Ye),Pt}(Ye,mt)})})}(st,Ie,Me)})).then(function(st){var vt=Zs(st);return He.seq=Fe,vt.push(He),Ie.db.bulkDocs({docs:vt})})})}(Ie,mt,Pt)}}var vt=new Yo;function at(){return Ie.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:qe,limit:50}).then(gt)}function gt(mt){var Pt=mt.results;if(Pt.length){var Qt=function(mt){for(var Pt=new w,Qt=0,Kt=mt.length;Qt<Kt;Qt++){var zt=mt[Qt];if("_"!==zt.doc._id[0]){Me=[],(Fe=zt.doc)._deleted||i(Ie.sourceDB,He,Fe),Me.sort(d);var Ht=Ye(Me);Pt.set(zt.doc._id,[Ht,zt.changes])}qe=zt.seq}return Pt}(Pt);if(vt.add(st(Qt,qe)),!(Pt.length<50))return at()}}function Ye(mt){for(var Qt,Pt=new w,Kt=0,zt=mt.length;Kt<zt;Kt++){var Ht=mt[Kt],ar=[Ht.key,Ht.id];Kt>0&&0===Sr(Ht.key,Qt)&&ar.push(Kt),Pt.set(pn(ar),Ht),Qt=Ht.key}return Pt}return at().then(function(){return vt.finish()}).then(function(){Ie.seq=qe})}(Ie)})()}function dt(Ie,Me){return Dc(Ge(Ie),function(){return function(Ie,Me){var Fe,Xe=Ie.reduceFun&&!1!==Me.reduce,He=Me.skip||0;function qe(Kt){return Kt.include_docs=!0,Ie.db.allDocs(Kt).then(function(zt){return Fe=zt.total_rows,zt.rows.map(function(Ht){if("value"in Ht.doc&&"object"==typeof Ht.doc.value&&null!==Ht.doc.value){var ar=Object.keys(Ht.doc.value).sort(),qr=["id","key","value"];if(!(ar<qr||ar>qr))return Ht.doc.value}var Hr=function(e){for(var t=[],r=[],n=0;;){var i=e[n++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[n]),n++;break;case"3":var f=xh(e,n);t.push(f.num),n+=f.length;break;case"4":for(var d="";;){var O=e[n];if("\0"===O)break;d+=O,n++}d=d.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"\x01").replace(/\u0002\u0002/g,"\x02"),t.push(d);break;case"5":var U={element:[],index:t.length};t.push(U.element),r.push(U);break;case"6":var W={element:{},index:t.length};t.push(W.element),r.push(W);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();kh(t,r)}}}(Ht.doc._id);return{key:Hr[0],id:Hr[1],value:"value"in Ht.doc?Ht.doc.value:null}})})}function st(Kt){var zt;if(zt=Xe?function(Ie,Me,Fe){0===Fe.group_level&&delete Fe.group_level;var Xe=Fe.group||Fe.group_level,He=r(Ie.reduceFun),qe=[],st=isNaN(Fe.group_level)?Number.POSITIVE_INFINITY:Fe.group_level;Me.forEach(function(Ye){var mt=qe[qe.length-1],Pt=Xe?Ye.key:null;if(Xe&&Array.isArray(Pt)&&(Pt=Pt.slice(0,st)),mt&&0===Sr(mt.groupKey,Pt))return mt.keys.push([Ye.key,Ye.id]),void mt.values.push(Ye.value);qe.push({keys:[[Ye.key,Ye.id]],values:[Ye.value],groupKey:Pt})}),Me=[];for(var vt=0,at=qe.length;vt<at;vt++){var gt=qe[vt],pt=f(Ie.sourceDB,He,gt.keys,gt.values,!1);if(pt.error&&pt.error instanceof Cc)throw pt.error;Me.push({value:pt.error?null:pt.output,key:gt.groupKey})}return{rows:O(Me,Fe.limit,Fe.skip)}}(Ie,Kt,Me):{total_rows:Fe,offset:He,rows:Kt},Me.update_seq&&(zt.update_seq=Ie.seq),Me.include_docs){var Ht=Jl(Kt.map(U));return Ie.sourceDB.allDocs({keys:Ht,include_docs:!0,conflicts:Me.conflicts,attachments:Me.attachments,binary:Me.binary}).then(function(ar){var qr=new w;return ar.rows.forEach(function(Hr){qr.set(Hr.id,Hr.doc)}),Kt.forEach(function(Hr){var ia=U(Hr),sa=qr.get(ia);sa&&(Hr.doc=sa)}),zt})}return zt}if(void 0!==Me.keys&&!Me.keys.length&&(Me.limit=0,delete Me.keys),void 0!==Me.keys){var at=Me.keys.map(function(Kt){var zt={startkey:pn([Kt]),endkey:pn([Kt,{}])};return Me.update_seq&&(zt.update_seq=!0),qe(zt)});return Promise.all(at).then(Zs).then(st)}var pt,Ye,gt={descending:Me.descending};if(Me.update_seq&&(gt.update_seq=!0),"start_key"in Me&&(pt=Me.start_key),"startkey"in Me&&(pt=Me.startkey),"end_key"in Me&&(Ye=Me.end_key),"endkey"in Me&&(Ye=Me.endkey),void 0!==pt&&(gt.startkey=pn(Me.descending?[pt,{}]:[pt])),void 0!==Ye){var mt=!1!==Me.inclusive_end;Me.descending&&(mt=!mt),gt.endkey=pn(mt?[Ye,{}]:[Ye])}if(void 0!==Me.key){var Pt=pn([Me.key]),Qt=pn([Me.key,{}]);gt.descending?(gt.endkey=Pt,gt.startkey=Qt):(gt.startkey=Pt,gt.endkey=Qt)}return Xe||("number"==typeof Me.limit&&(gt.limit=Me.limit),gt.skip=He),qe(gt).then(st)}(Ie,Me)})()}var $t=function(e){return p()(function(t){var r=t.pop(),n=e.apply(this,t);return"function"==typeof r&&Yl(n,r),n})}(function(){var Ie=this;return"function"==typeof Ie._viewCleanup?function(Ie){return new Promise(function(Me,Fe){Ie._viewCleanup(function(Xe,He){if(Xe)return Fe(Xe);Me(He)})})}(Ie):Cr(Ie)?function(Ie){return Ie.fetch("_view_cleanup",{headers:new cu({"Content-Type":"application/json"}),method:"POST"}).then(function(Me){return Me.json()})}(Ie):function(Ie){return Ie.get("_local/"+e).then(function(Me){var Fe=new w;Object.keys(Me.views).forEach(function(He){var qe=Oc(He),st="_design/"+qe[0],vt=qe[1],at=Fe.get(st);at||(at=new S,Fe.set(st,at)),at.add(vt)});var Xe={keys:Ac(Fe),include_docs:!0};return Ie.allDocs(Xe).then(function(He){var qe={};He.rows.forEach(function(at){var gt=at.key.substring(8);Fe.get(at.key).forEach(function(pt){var Ye=gt+"/"+pt;Me.views[Ye]||(Ye=pt);var mt=Object.keys(Me.views[Ye]),Pt=at.doc&&at.doc.views&&at.doc.views[pt];mt.forEach(function(Qt){qe[Qt]=qe[Qt]||Pt})})});var vt=Object.keys(qe).filter(function(at){return!qe[at]}).map(function(at){return Dc(Ge(at),function(){return new Ie.constructor(at,Ie.__opts).destroy()})()});return Promise.all(vt).then(function(){return{ok:!0}})})},be({ok:!0}))}(Ie)});return{query:function(Ie,Me,Fe){var Xe=this;"function"==typeof Me&&(Fe=Me,Me={}),Me=Me?function(Ie){return Ie.group_level=de(Ie.group_level),Ie.limit=de(Ie.limit),Ie.skip=de(Ie.skip),Ie}(Me):{},"function"==typeof Ie&&(Ie={map:Ie});var He=Promise.resolve().then(function(){return function(Ie,Me,Fe){if("function"==typeof Ie._query)return function(Ie,Me,Fe){return new Promise(function(Xe,He){Ie._query(Me,Fe,function(qe,st){if(qe)return He(qe);Xe(st)})})}(Ie,Me,Fe);if(Cr(Ie))return function(Ie,Me,Fe){var He,st,vt,Xe=[],qe="GET";if(ne("reduce",Fe,Xe),ne("include_docs",Fe,Xe),ne("attachments",Fe,Xe),ne("limit",Fe,Xe),ne("descending",Fe,Xe),ne("group",Fe,Xe),ne("group_level",Fe,Xe),ne("skip",Fe,Xe),ne("stale",Fe,Xe),ne("conflicts",Fe,Xe),ne("startkey",Fe,Xe,!0),ne("start_key",Fe,Xe,!0),ne("endkey",Fe,Xe,!0),ne("end_key",Fe,Xe,!0),ne("inclusive_end",Fe,Xe),ne("key",Fe,Xe,!0),ne("update_seq",Fe,Xe),Xe=""===(Xe=Xe.join("&"))?"":"?"+Xe,void 0!==Fe.keys){var gt="keys="+encodeURIComponent(JSON.stringify(Fe.keys));gt.length+Xe.length+1<=2e3?Xe+=("?"===Xe[0]?"&":"?")+gt:(qe="POST","string"==typeof Me?He={keys:Fe.keys}:Me.keys=Fe.keys)}if("string"==typeof Me){var pt=Oc(Me);return Ie.fetch("_design/"+pt[0]+"/_view/"+pt[1]+Xe,{headers:new cu({"Content-Type":"application/json"}),method:qe,body:JSON.stringify(He)}).then(function(Ye){return st=Ye.ok,vt=Ye.status,Ye.json()}).then(function(Ye){if(!st)throw Ye.status=vt,Qe(Ye);return Ye.rows.forEach(function(mt){if(mt.value&&mt.value.error&&"builtin_reduce_error"===mt.value.error)throw new Error(mt.reason)}),Ye}).then(q(Fe))}return He=He||{},Object.keys(Me).forEach(function(Ye){He[Ye]=Array.isArray(Me[Ye])?Me[Ye]:Me[Ye].toString()}),Ie.fetch("_temp_view"+Xe,{headers:new cu({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(He)}).then(function(Ye){return st=Ye.ok,vt=Ye.status,Ye.json()}).then(function(Ye){if(!st)throw Ye.status=vt,Qe(Ye);return Ye}).then(q(Fe))}(Ie,Me,Fe);if("string"!=typeof Me)return ee(Fe,Me),tf.add(function(){return ql(Ie,"temp_view/temp_view",Me.map,Me.reduce,!0,e).then(function(at){return function(e,t){return e.then(function(r){return t().then(function(){return r})},function(r){return t().then(function(){throw r})})}(We(at).then(function(){return dt(at,Fe)}),function(){return at.db.destroy()})})}),tf.finish();var Xe=Me,He=Oc(Xe),st=He[1];return Ie.get("_design/"+He[0]).then(function(vt){var at=vt.views&&vt.views[st];if(!at)throw new Sc("ddoc "+vt._id+" has no view named "+st);return n(vt,st),ee(Fe,at),ql(Ie,Xe,at.map,at.reduce,!1,e).then(function(pt){return"ok"===Fe.stale||"update_after"===Fe.stale?("update_after"===Fe.stale&&R()(function(){We(pt)}),dt(pt,Fe)):We(pt).then(function(){return dt(pt,Fe)})})})}(Xe,Ie,Me)});return Yl(He,Fe),He},viewCleanup:$t}}("indexes",function(e,t){return function(e,t){var r=function(e){for(var t=0,r=e.length;t<r;t++)if(-1!==e[t].indexOf("."))return!1;return!0}(e),n=1===e.length;return r?n?function(e,t){return function(r){t(r[e])}}(e[0],t):function(e,t){return function(r){for(var n=[],i=0,f=e.length;i<f;i++)n.push(r[e[i]]);t(n)}}(e,t):n?function(e,t){var r=Ho(e);return function(n){for(var i=n,f=0,d=r.length;f<d;f++)if(void 0===(i=i[r[f]]))return;t(i)}}(e[0],t):function(e,t){return function(r){for(var n=[],i=0,f=e.length;i<f;i++){for(var d=Ho(e[i]),O=r,U=0,W=d.length;U<W;U++)if(void 0===(O=O[d[U]]))return;n.push(O)}t(n)}}(e,t)}(Object.keys(e.fields),t)},function(){throw new Error("reduce not supported")},function(e,t){var r=e.views[t];if(!r.map||!r.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")});function Tc(e){return e._customFindAbstractMapper||Gp}function lf(e){return e.fields=e.fields.map(function(t){if("string"==typeof t){var r={};return r[t]="asc",r}return t}),e}function Yp(e,t){for(var r=[],n=0;n<t.def.fields.length;n++){var i=Wr(t.def.fields[n]);r.push(e[i])}return r}function ff(e){return e.allDocs({startkey:"_design/",endkey:"_design/\uffff",include_docs:!0}).then(function(t){var r={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return r.indexes=Pc(r.indexes,t.rows.filter(function(n){return"query"===n.doc.language}).map(function(n){return(void 0!==n.doc.views?Object.keys(n.doc.views):[]).map(function(f){return{ddoc:n.id,name:f,type:"json",def:lf(n.doc.views[f].options.def)}})})),r.indexes.sort(function(n,i){return yc(n.name,i.name)}),r.total_rows=r.indexes.length,r})}var Rc={"\uffff":{}};const im={queryOpts:{limit:0,startkey:Rc,endkey:null},inMemoryFields:[]};function sm(e,t){for(var r=e.def.fields.map(Wr),n=0,i=r.length;n<i;n++)if(t===r[n])return!0;return!1}function om(e,t){return"$eq"!==Wr(e[t])}function df(e,t){var r=t.def.fields.map(Wr);return e.slice().sort(function(n,i){var f=r.indexOf(n),d=r.indexOf(i);return-1===f&&(f=Number.MAX_VALUE),-1===d&&(d=Number.MAX_VALUE),yc(f,d)})}function cm(e,t,r,n){var i=Pc(e,function(e,t,r){for(var n=!1,i=0,f=(r=df(r,e)).length;i<f;i++){var d=r[i];if(n||!sm(e,d))return r.slice(i);i<f-1&&om(t,d)&&(n=!0)}return[]}(t,r,n),function(e){var t=[];return Object.keys(e).forEach(function(r){Object.keys(e[r]).forEach(function(i){"$ne"===i&&t.push(r)})}),t}(r));return df(function(e){for(var t={},r=0;r<e.length;r++)t["$"+e[r]]=!0;return Object.keys(t).map(function(n){return n.substring(1)})}(i),t)}var fm=["$eq","$gt","$gte","$lt","$lte"];function hf(e){return-1===fm.indexOf(e)}function hm(e,t,r,n){var i=e.def.fields.map(Wr);return!!function(e,t,r){if(t){var n=function(e,t){return!(e.length>t.length)&&uf(e,t)}(t,e),i=uf(r,e);return n&&i}return function(e,t){e=e.slice();for(var r=0,n=t.length;r<n;r++){var i=t[r];if(!e.length)break;var f=e.indexOf(i);if(-1===f)return!1;e.splice(f,1)}return!0}(r,e)}(i,t,r)&&function(e,t){var n=t[e[0]];return void 0===n||!(1===Object.keys(n).length&&"$ne"===Wr(n))}(i,n)}function ym(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function Sm(e,t){var r=e.selector,n=e.sort;if(function(e){return Object.keys(e).map(function(r){return e[r]}).some(function(r){return"object"==typeof r&&0===Object.keys(r).length})}(r))return kn({},im,{index:t[0]});var i=function(e,t){var i,r=Object.keys(e),n=t?t.map(Wr):[];return i=r.length>=n.length?r:n,0===n.length?{fields:i}:{fields:i=i.sort(function(f,d){var O=n.indexOf(f);-1===O&&(O=Number.MAX_VALUE);var U=n.indexOf(d);return-1===U&&(U=Number.MAX_VALUE),O<U?-1:O>U?1:0}),sortOrder:t.map(Wr)}}(r,n),f=i.fields,O=function(e,t,r,n,i){var f=function(e,t,r,n){return n.filter(function(i){return hm(i,r,t,e)})}(e,t,r,n);if(0===f.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var d=n[0];return d.defaultUsed=!0,d}if(1===f.length&&!i)return f[0];var O=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e[r]]=!0;return t}(t);if(i){var W="_design/"+i[0],q=2===i.length&&i[1],ne=f.find(function(de){return!!(q&&de.ddoc===W&&q===de.name||de.ddoc===W)});if(!ne)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return ne}return function(e,t){for(var r=null,n=-1,i=0,f=e.length;i<f;i++){var d=e[i],O=t(d);O>n&&(n=O,r=d)}return r}(f,function(de){for(var De=de.def.fields.map(Wr),he=0,ee=0,fe=De.length;ee<fe;ee++)O[De[ee]]&&he++;return he})}(r,f,i.sortOrder,t,e.use_index),U=function(e,t){return t.defaultUsed?function(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}(e):1===t.def.fields.length?function(e,t){var d,r=Wr(t.def.fields[0]),n=e[r]||{},i=[];return Object.keys(n).forEach(function(O){hf(O)&&i.push(r);var W=function(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:null}}(O,n[O]);d=d?Ic([d,W]):W}),{queryOpts:d,inMemoryFields:i}}(e,t):function(e,t){var d,O,r=t.def.fields.map(Wr),n=[],i=[],f=[];function U(bt){!1!==d&&i.push(null),!1!==O&&f.push(Rc),n=r.slice(bt)}for(var W=0,q=r.length;W<q;W++){var de=e[r[W]];if(!de||!Object.keys(de).length){U(W);break}if(Object.keys(de).some(hf)){U(W);break}if(W>0){var De="$gt"in de||"$gte"in de||"$lt"in de||"$lte"in de,he=Object.keys(e[r[W-1]]),ee=cf(he,["$eq"]),fe=cf(he,Object.keys(de));if(De&&!ee&&!fe){U(W);break}}for(var Oe=Object.keys(de),be=null,xe=0;xe<Oe.length;xe++){var Re=Oe[xe],We=ym(Re,de[Re]);be=be?Ic([be,We]):We}i.push("startkey"in be?be.startkey:null),f.push("endkey"in be?be.endkey:Rc),"inclusive_start"in be&&(d=be.inclusive_start),"inclusive_end"in be&&(O=be.inclusive_end)}var Ke={startkey:i,endkey:f};return void 0!==d&&(Ke.inclusive_start=d),void 0!==O&&(Ke.inclusive_end=O),{queryOpts:Ke,inMemoryFields:n}}(e,t)}(r,O);return{queryOpts:U.queryOpts,index:O,inMemoryFields:cm(U.inMemoryFields,O,r,f)}}function pf(e,t,r){return t.selector&&(t.selector=bc(t.selector)),t.sort&&(t.sort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if("string"==typeof t){var r={};return r[t]="asc",r}return t})}(t.sort)),t.use_index&&(t.use_index=function(e){var t=[];return"string"==typeof e?t.push(e):t=e,t.map(function(r){return r.replace("_design/","")})}(t.use_index)),function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}(t),ff(e).then(function(n){e.constructor.emit("debug",["find","planning query",t]);var i=Sm(t,n.indexes);e.constructor.emit("debug",["find","query plan",i]);var f=i.index;!function(e,t){if(t.defaultUsed&&e.sort){var r=e.sort.filter(function(n){return"_id"!==Object.keys(n)[0]}).map(function(n){return Object.keys(n)[0]});if(r.length>0)throw new Error('Cannot sort on field(s) "'+r.join(",")+'" when using the default index')}}(t,f);var d=kn({include_docs:!0,reduce:!1,indexes_count:n.total_rows},i.queryOpts);return"startkey"in d&&"endkey"in d&&Sr(d.startkey,d.endkey)>0?{docs:[]}:(t.sort&&"string"!=typeof t.sort[0]&&"desc"===_c(t.sort[0])&&(d.descending=!0,d=function(e){var t=er(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}(d)),i.inMemoryFields.length||("limit"in t&&(d.limit=t.limit),"skip"in t&&(d.skip=t.skip)),r?Promise.resolve(i,d):Promise.resolve().then(function(){if("_all_docs"===f.name)return function(e,t){var r=er(t);return r.descending?("endkey"in r&&"string"!=typeof r.endkey&&(r.endkey=""),"startkey"in r&&"string"!=typeof r.startkey&&(r.limit=0)):("startkey"in r&&"string"!=typeof r.startkey&&(r.startkey=""),"endkey"in r&&"string"!=typeof r.endkey&&(r.limit=0)),"key"in r&&"string"!=typeof r.key&&(r.limit=0),r.limit>0&&r.indexes_count&&(r.original_limit=r.limit,r.limit+=r.indexes_count),e.allDocs(r).then(function(n){return n.rows=n.rows.filter(function(i){return!/^_design\//.test(i.id)}),r.original_limit&&(r.limit=r.original_limit),n.rows=n.rows.slice(0,r.limit),n})}(e,d);var U=function(e){return e.ddoc.substring(8)+"/"+e.name}(f);return Tc(e).query.call(e,U,d)}).then(function(U){!1===d.inclusive_start&&(U.rows=function(e,t,r){for(var n=r.def.fields,i=0,f=e.length;i<f;i++){var O=Yp(e[i].doc,r);if(1===n.length)O=O[0];else for(;O.length>t.length;)O.pop();if(Math.abs(Sr(O,t))>0)break}return i>0?e.slice(i):e}(U.rows,d.startkey,f)),i.inMemoryFields.length&&(U.rows=lu(U.rows,t,i.inMemoryFields));var W={docs:U.rows.map(function(q){var ne=q.doc;return t.fields?function(e,t){for(var r={},n=0,i=t.length;n<i;n++){var f=Ho(t[n]),d=gc(e,f);void 0!==d&&Uh(r,f,d)}return r}(ne,t.fields):ne})};return f.defaultUsed&&(W.warning="No matching index found, create an index to optimize query time."),W}))})}var Pm=Xo(function(e,t){var n,r=er((t=sf(t)).index);function i(){return n||(n=Ai(JSON.stringify(t)))}t.index=lf(t.index),function(e){var t=e.fields.filter(function(r){return"asc"===_c(r)});if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}(t.index);var f=t.name||"idx-"+i(),d=t.ddoc||"idx-"+i(),O="_design/"+d,U=!1,W=!1;return e.constructor.emit("debug",["find","creating index",O]),Ln(e,O,function(ne){return ne._rev&&"query"!==ne.language&&(U=!0),ne.language="query",ne.views=ne.views||{},!(W=!!ne.views[f])&&(ne.views[f]={map:{fields:Ic(t.index.fields)},reduce:"_count",options:{def:r}},ne)}).then(function(){if(U)throw new Error('invalid language for ddoc with id "'+O+'" (should be "query")')}).then(function(){var ne=d+"/"+f;return Tc(e).query.call(e,ne,{limit:0,reduce:!1}).then(function(){return{id:O,name:f,result:W?"exists":"created"}})})}),Im=Xo(pf),Tm=Xo(function(e,t){return pf(e,t,!0).then(function(r){return{dbname:e.name,index:r.index,selector:t.selector,range:{start_key:r.queryOpts.startkey,end_key:r.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}})}),Rm=Xo(ff),Mm=Xo(function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var r=t.ddoc,n=t.name;return Ln(e,r,function(f){return 1===Object.keys(f.views).length&&f.views[n]?{_id:r,_deleted:!0}:(delete f.views[n],f)}).then(function(){return Tc(e).viewCleanup.apply(e)}).then(function(){return{ok:!0}})}),zs={};zs.createIndex=jr(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));(Cr(this)?Ap:Pm)(this,e,t)}),zs.find=jr(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));(Cr(this)?Op:Im)(this,e,t)}),zs.explain=jr(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to explain()"));(Cr(this)?Pp:Tm)(this,e,t)}),zs.getIndexes=jr(function(e){(Cr(this)?Ip:Rm)(this,e)}),zs.deleteIndex=jr(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));(Cr(this)?Tp:Mm)(this,e,t)});const xm=zs;var mf=!1,vf=new Map;function gf(e){var t=[e.name,e.adapter].join("|"),r=vf.get(t);return r||(r={subject:new Zr.x,obliviousSet:new Yu(6e4)},vf.set(t,r)),r}var km=0;function yf(e){if(e.rxdb)throw Wt("PL2",{plugin:e});"object"==typeof e&&e.default&&(e=e.default),fu.plugin(e)}yf(xm),function(){if(!mf){mf=!0;var e=fu.prototype.bulkDocs,t=function(){var r=(0,it.Z)($e().mark(function n(i,f,d){var U,W,q,ne,de,De,ee,O=this;return $e().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(U=$r(),W=km++,"function"==typeof f&&(d=f,f={}),f||(f={}),Array.isArray(i)?q=i:void 0===i?q=[]:(q=i.docs,i.hasOwnProperty("new_edits")&&(f.new_edits=i.new_edits)),0!==q.length){Se.next=7;break}throw ze("SNH",{args:{body:i,options:f}});case 7:if(ne=new Map,!f.hasOwnProperty("new_edits")||!1!==f.new_edits){Se.next=18;break}return de=q.map(function(Oe){return Oe._id}),Se.next=12,this.changes({live:!1,since:0,doc_ids:de,style:"all_docs"});case 12:return De=Se.sent,Se.next=15,Promise.all(De.results.map(function(){var Oe=(0,it.Z)($e().mark(function be(xe){return $e().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.next=2,O.get(xe.id,{rev:xe.changes[0].rev,deleted:"ok",revs:!!f.set_new_edit_as_latest_revision,style:"all_docs"});case 2:return We.abrupt("return",We.sent);case 4:case"end":return We.stop()}},be)}));return function(be){return Oe.apply(this,arguments)}}()));case 15:Se.sent.forEach(function(Oe){return ne.set(Oe._id,Oe)}),f.set_new_edit_as_latest_revision&&q.forEach(function(Oe){var xe=ne.get(Oe._id);if(xe){var Re=Oe._rev.split("-"),Ge=parseInt(Re[0],10),We=Re[1];Oe._revisions={start:Ge,ids:xe._revisions.ids},Oe._revisions.ids.unshift(We),delete xe._revisions}});case 18:return(ee=jt(f)).isDeeper=!0,Se.abrupt("return",e.call(this,q,ee,function(Oe,be){if(Oe){if(!d)throw Oe;d(Oe)}else{if(!f.isDeeper){var xe=$r(),Re={emitId:W,writeDocs:q,writeOptions:f,writeResult:be,previousDocs:ne,startTime:U,endTime:xe};gf(O).subject.next(Re)}if(!d)return be;d(null,be)}}));case 21:case"end":return Se.stop()}},n,this)}));return function(i,f,d){return r.apply(this,arguments)}}();fu.plugin({bulkDocs:t})}}();var qo=fu,Ws=new Set,hu="_local/",_f="_design/";function bf(e){return new Promise(function(t){Mn(e,function(r){t("md5-"+r)})})}function Ef(e,t){return"_id"===e||t[e]||((t=jt(t))[e]=t._id,delete t._id),t}function mn(e,t){var r=Ef(e,t);return delete(r=jt(r))._revisions,r._attachments={},t._attachments&&Object.entries(t._attachments).forEach(function(n){var f=n[1];r._attachments[n[0]]=f.data?{data:f.data,type:f.type?f.type:f.content_type}:{digest:f.digest,type:f.type?f.type:f.content_type,length:f.length}}),r}function wf(e,t){var r=Mc(e,t);return(r=jt(r))._attachments={},t._attachments&&Object.entries(t._attachments).forEach(function(n){var f=n[1];r._attachments[n[0]]=f.data?{data:f.data,content_type:f.type}:{digest:f.digest,content_type:f.type,length:f.length,stub:!0}}),r}function Mc(e,t){if("_id"===e)return t;var r=t[e],n=jt(t);return delete n[e],n._id=r,n}function Fm(e){return e.substring(hu.length)}function Sf(e,t,r){if(!t)throw new Error("primary missing !!");return(e?"local":"non-local")+"|"+t+"|"+r}function Nm(e,t){if(!t)throw ze("SNH",{args:{pouchDoc:t}});var r=t._id,n=mn(e,t),i=$n(n._rev);return t._deleted?{operation:"DELETE",id:r,doc:null,previous:n}:1===i?{operation:"INSERT",id:r,doc:n,previous:null}:{operation:"UPDATE",id:r,doc:n,previous:"UNKNOWN"}}function xc(e,t){if("_id"===t)return e;if(Array.isArray(e))return e.map(function(n){return xc(n,t)});if("object"==typeof e){var r={};return Object.entries(e).forEach(function(n){var i=n[0],f=n[1];i===t?r._id=f:r[i]=i.startsWith("$")?xc(f,t):f}),r}return e}function ea(e){return kc.apply(this,arguments)}function kc(){return kc=(0,it.Z)($e().mark(function e(t){var r;return $e().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return",{});case 2:return r={},i.next=5,Promise.all(Object.entries(t).map(function(){var f=(0,it.Z)($e().mark(function d(O){var U,W,q,ne;return $e().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(U=O[0],(W=O[1]).type){ee.next=3;break}throw ze("SNH",{args:{obj:W}});case 3:if(!W.data){ee.next=15;break}return q=W,ee.next=7,bf(q.data);case 7:return ne=ee.sent,ee.next=10,Ui_toString(q.data);case 10:r[U]={digest:ne,length:ee.sent.length,type:q.type},ee.next=16;break;case 15:r[U]=W;case 16:case"end":return ee.stop()}},d)}));return function(d){return f.apply(this,arguments)}}()));case 5:return i.abrupt("return",r);case 6:case"end":return i.stop()}},e)})),kc.apply(this,arguments)}var jm=function(){function e(r,n,i,f,d){var O=this;this.changes$=new Zr.x,this.subs=[],this.databaseName=r,this.collectionName=n,this.schema=i,this.internals=f,this.options=d,Ws.add(this),this.primaryPath=Q(this.schema.primaryKey);var U=gf(this.internals.pouch);this.emittedEventIds=U.obliviousSet;var W=U.subject.subscribe(function(){var q=(0,it.Z)($e().mark(function ne(de){var De,he;return $e().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!de.writeOptions.hasOwnProperty("new_edits")||de.writeOptions.new_edits){fe.next=4;break}return fe.next=3,Promise.all(de.writeDocs.map(function(){var Se=(0,it.Z)($e().mark(function Oe(be){var xe,Re,Ge;return $e().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return xe=be._id,be=mn(O.primaryPath,be),Ke.next=4,ea(be._attachments);case 4:if(be._attachments=Ke.sent,(Re=de.previousDocs.get(xe))&&(Re=mn(O.primaryPath,Re)),!(Re&&$n(Re._rev)>$n(be._rev))){Ke.next=9;break}return Ke.abrupt("return");case 9:if(Re||!be._deleted){Ke.next=11;break}return Ke.abrupt("return");case 11:if(!(Re&&Re._deleted&&be._deleted)){Ke.next=13;break}return Ke.abrupt("return");case 13:if(Re&&!Re._deleted||be._deleted){Ke.next=17;break}Ge={operation:"INSERT",doc:be,id:xe,previous:null},Ke.next=27;break;case 17:if(!be._deleted||!Re||Re._deleted){Ke.next=22;break}Re._rev=be._rev,Ge={operation:"DELETE",doc:null,id:xe,previous:Re},Ke.next=27;break;case 22:if(!Re){Ke.next=26;break}Ge={operation:"UPDATE",doc:be,id:xe,previous:Re},Ke.next=27;break;case 26:throw ze("SNH",{args:{writeDoc:be}});case 27:O.addEventToChangeStream(Ge,de.startTime,de.endTime);case 28:case"end":return Ke.stop()}},Oe)}));return function(Oe){return Se.apply(this,arguments)}}()));case 3:case 9:return fe.abrupt("return");case 4:if(de.writeOptions.custom){fe.next=10;break}return De=new Map,de.writeDocs.forEach(function(Se){return De.set(Se._id,Se)}),fe.next=9,Promise.all(de.writeResult.map(function(){var Se=(0,it.Z)($e().mark(function Oe(be){var xe,Re,Ge;return $e().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!(xe=be.id).startsWith(_f)&&!xe.startsWith(hu)){Ke.next=3;break}return Ke.abrupt("return");case 3:return Re=hi(De,be.id),Ke.next=6,ea(Re._attachments);case 6:Re._attachments=Ke.sent,(Re=jt(Re))._rev=be.rev,Ge=Nm(O.primaryPath,Re),O.addEventToChangeStream(Ge);case 11:case"end":return Ke.stop()}},Oe)}));return function(Oe){return Se.apply(this,arguments)}}()));case 10:return he=de.writeOptions.custom.writeRowById,fe.next=13,Promise.all(de.writeResult.map(function(){var Se=(0,it.Z)($e().mark(function Oe(be){var xe,Re,Ge,We,Ke;return $e().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(!be.error){dt.next=2;break}return dt.abrupt("return");case 2:return Re=hi(he,xe=be.id),Ge=mn(O.primaryPath,Re.document),dt.next=7,ea(Ge._attachments);case 7:if(Ge._attachments=dt.sent,Ge._rev=be.rev,Re.previous&&!Re.previous._deleted){dt.next=13;break}We={operation:"INSERT",doc:Ge,id:xe,previous:null},dt.next=23;break;case 13:if(!Re.document._deleted){dt.next=22;break}return Ke=mn(O.primaryPath,Re.previous),dt.next=17,ea(Ke._attachments);case 17:Ke._attachments=dt.sent,Ke._rev=be.rev,We={operation:"DELETE",doc:null,id:be.id,previous:Ke},dt.next=23;break;case 22:We={operation:"UPDATE",doc:Ge,id:be.id,previous:Re.previous};case 23:Re.document._deleted&&(!Re.previous||Re.previous._deleted)||O.addEventToChangeStream(We,de.startTime,de.endTime);case 24:case"end":return dt.stop()}},Oe)}));return function(Oe){return Se.apply(this,arguments)}}()));case 13:case"end":return fe.stop()}},ne)}));return function(ne){return q.apply(this,arguments)}}());this.subs.push(W)}var t=e.prototype;return t.addEventToChangeStream=function(n,i,f){var d="DELETE"===n.operation?n.previous:n.doc,U=d[Q(this.schema.primaryKey)],W=Sf(!1,U,d._rev);this.emittedEventIds.has(W)||(this.emittedEventIds.add(W),this.changes$.next({eventId:W,documentId:U,change:n,startTime:i,endTime:f}))},t.close=function(){return this.subs.forEach(function(n){return n.unsubscribe()}),Ws.delete(this),on},t.remove=function(){var r=(0,it.Z)($e().mark(function i(){return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.subs.forEach(function(O){return O.unsubscribe()}),Ws.delete(this),d.next=4,this.internals.pouch.destroy();case 4:case"end":return d.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.getSortComparator=function(n){var i,f=this,d=Q(this.schema.primaryKey),O=n.sort?n.sort:[(i={},i[d]="asc",i)],U=Object.keys(n.selector).filter(function(q){return!q.startsWith("$")});return function(ne,de){if(ne[d]===de[d])throw ze("SNH",{args:{a:ne,b:de},primaryPath:d});var De=[ne,de].map(function(ee){return{doc:Mc(f.primaryPath,ee)}}),he=lu(De,{selector:{},sort:O},U);if(2!==he.length)throw ze("SNH",{query:n,primaryPath:f.primaryPath,args:{rows:De,sortedRows:he}});return he[0].doc._id===De[0].doc._id?-1:1}},t.getQueryMatcher=function(n){var i=this,f=bc(n.selector);return function(U){var ne=lu([{doc:Mc(i.primaryPath,U)}],{selector:f},Object.keys(n.selector));return ne&&1===ne.length}},t.prepareQuery=function(n){var i=this,f=Q(this.schema.primaryKey),d=n;if(d.sort&&d.sort.forEach(function(U){var W=Object.keys(U)[0],q=["$gt","$gte","$lt","$lte"];if(!d.selector[W]||!Object.keys(d.selector[W]).some(function(De){return q.includes(De)})){var de=Sn(i.schema,W);if(!de)throw ze("QU5",{query:d,key:W});switch(d.selector[W]||(d.selector[W]={}),de.type){case"number":case"integer":d.selector[W].$gt=-1e28;break;case"string":"string"!=typeof d.selector[W]&&(d.selector[W].$gt="");break;default:d.selector[W].$gt=null}}}),d.selector[f]&&d.selector[f].$regex)throw ze("QU4",{path:f,query:n});if(d.sort){var O=d.sort.map(function(U){var W,q=Object.keys(U)[0],ne=Object.values(U)[0];return(W={})[q===f?"_id":q]=ne,W});d.sort=O}return Object.entries(d.selector).forEach(function(U){var W=U[0],q=U[1];"object"==typeof q&&null!==q&&!Array.isArray(q)&&0===Object.keys(q).length&&delete d.selector[W]}),d.selector=xc(d.selector,this.primaryPath),d},t.bulkAddRevisions=function(){var r=(0,it.Z)($e().mark(function i(f){var O,d=this;return $e().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(0!==f.length){W.next=2;break}throw ze("P3",{args:{documents:f}});case 2:return O=f.map(function(q){return wf(d.primaryPath,q)}),W.next=5,this.internals.pouch.bulkDocs(O,{new_edits:!1,set_new_edit_as_latest_revision:!0});case 5:case"end":return W.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.bulkWrite=function(){var r=(0,it.Z)($e().mark(function i(f){var O,U,W,q,d=this;return $e().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(0!==f.length){de.next=2;break}throw ze("P2",{args:{documentWrites:f}});case 2:return O=new Map,U=f.map(function(De){O.set(De.document[d.primaryPath],De);var ee=wf(d.primaryPath,De.document);return De.previous&&(ee._rev=De.previous._rev),ee}),de.next=6,this.internals.pouch.bulkDocs(U,{custom:{writeRowById:O}});case 6:return W=de.sent,q={success:new Map,error:new Map},de.next=10,Promise.all(W.map(function(){var De=(0,it.Z)($e().mark(function he(ee){var fe,Oe;return $e().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(fe=hi(O,ee.id),!ee.error){xe.next=6;break}q.error.set(ee.id,{isError:!0,status:409,documentId:ee.id,writeRow:fe}),xe.next=18;break;case 6:if(Oe=jt(fe.document),(Oe=Ef(d.primaryPath,Oe))._rev=ee.rev,Oe._attachments={},fe.document._attachments){xe.next=14;break}fe.document._attachments={},xe.next=17;break;case 14:return xe.next=16,ea(fe.document._attachments);case 16:Oe._attachments=xe.sent;case 17:q.success.set(ee.id,Oe);case 18:case"end":return xe.stop()}},he)}));return function(he){return De.apply(this,arguments)}}()));case 10:return de.abrupt("return",q);case 11:case"end":return de.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.query=function(){var r=(0,it.Z)($e().mark(function i(f){var U,d=this;return $e().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.internals.pouch.find(f);case 2:return U={documents:q.sent.docs.map(function(ne){return mn(d.primaryPath,ne)})},q.abrupt("return",U);case 5:case"end":return q.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.getAttachmentData=function(){var r=(0,it.Z)($e().mark(function i(f,d){return $e().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,this.internals.pouch.getAttachment(f,d);case 2:return W.abrupt("return",W.sent);case 4:case"end":return W.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.findDocumentsById=function(){var r=(0,it.Z)($e().mark(function i(f,d){var U,W,q,ne,O=this;return $e().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(!d){De.next=8;break}return De.next=3,this.internals.pouch.changes({live:!1,since:0,doc_ids:f,style:"all_docs"});case 3:return U=De.sent,W=new Map,De.next=7,Promise.all(U.results.map(function(){var he=(0,it.Z)($e().mark(function ee(fe){var Oe;return $e().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,O.internals.pouch.get(fe.id,{rev:fe.changes[0].rev,deleted:"ok",style:"all_docs"});case 2:Oe=mn(O.primaryPath,xe.sent),W.set(fe.id,Oe);case 5:case"end":return xe.stop()}},ee)}));return function(ee){return he.apply(this,arguments)}}()));case 7:return De.abrupt("return",W);case 8:return De.next=10,this.internals.pouch.allDocs({include_docs:!0,keys:f});case 10:return q=De.sent,ne=new Map,q.rows.filter(function(he){return!!he.doc}).forEach(function(he){var ee=he.doc;ee=mn(O.primaryPath,ee),ne.set(he.id,ee)}),De.abrupt("return",ne);case 14:case"end":return De.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.changeStream=function(){return this.changes$.asObservable()},t.getChangedDocuments=function(){var r=(0,it.Z)($e().mark(function i(f){var d,O,U;return $e().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return d={live:!1,limit:f.limit,include_docs:!1,since:f.sinceSequence,descending:"before"===f.direction},ne.next=3,this.internals.pouch.changes(d);case 3:return U=(O=ne.sent).results.filter(function(de){return!de.id.startsWith(_f)}).map(function(de){return{id:de.id,sequence:de.seq}}),ne.abrupt("return",{changedDocuments:U,lastSequence:O.last_seq});case 7:case"end":return ne.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),e}(),Um=function(){function e(r,n,i,f){this.changes$=new Zr.x,this.databaseName=r,this.collectionName=n,this.internals=i,this.options=f,Ws.add(this)}var t=e.prototype;return t.close=function(){return Ws.delete(this),on},t.remove=function(){var r=(0,it.Z)($e().mark(function i(){return $e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return Ws.delete(this),d.next=3,this.internals.pouch.destroy();case 3:case"end":return d.stop()}},i,this)}));return function(){return r.apply(this,arguments)}}(),t.bulkWrite=function(){var r=(0,it.Z)($e().mark(function i(f){var O,U,W,q,ne,de,d=this;return $e().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(0!==f.length){he.next=2;break}throw ze("P2",{args:{documentWrites:f}});case 2:return O=new Map,U=f.map(function(ee){O.set(ee.document._id,ee);var fe=jt(ee.document);return fe._id=hu+fe._id,ee.previous&&(fe._rev=ee.previous._rev),fe}),W=$r(),he.next=7,this.internals.pouch.bulkDocs(U);case 7:return q=he.sent,ne=$r(),de={success:new Map,error:new Map},q.forEach(function(ee){ee.id=Fm(ee.id);var fe=hi(O,ee.id);if(ee.error)de.error.set(ee.id,{isError:!0,status:409,documentId:ee.id,writeRow:fe});else{var be,Oe=jt(fe.document);if(Oe._rev=ee.rev,Oe._attachments={},de.success.set(ee.id,Oe),fe.previous)if(fe.document._deleted){var xe=jt(fe.previous);xe._rev=ee.rev,be={operation:"DELETE",doc:null,id:ee.id,previous:xe}}else be={operation:"UPDATE",doc:Oe,id:ee.id,previous:fe.previous};else be={operation:"INSERT",doc:Oe,id:ee.id,previous:null};if(!fe.document._deleted||fe.previous&&!fe.previous._deleted){var Re="DELETE"===be.operation?be.previous:be.doc,Ge=Sf(!0,Re._id,Re._rev?Re._rev:"");d.changes$.next({eventId:Ge,documentId:ee.id,change:be,startTime:W,endTime:ne})}}}),he.abrupt("return",de);case 12:case"end":return he.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.findLocalDocumentsById=function(){var r=(0,it.Z)($e().mark(function i(f){var O,d=this;return $e().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return O=new Map,W.next=3,Promise.all(f.map(function(){var q=(0,it.Z)($e().mark(function ne(de){var De,he;return $e().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return De=hu+de,fe.prev=1,fe.next=4,d.internals.pouch.get(De);case 4:(he=fe.sent)._id=de,O.set(de,he),fe.next=11;break;case 9:fe.prev=9,fe.t0=fe.catch(1);case 11:case"end":return fe.stop()}},ne,null,[[1,9]])}));return function(ne){return q.apply(this,arguments)}}()));case 3:return W.abrupt("return",O);case 4:case"end":return W.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),t.changeStream=function(){return this.changes$.asObservable()},e}(),$m=function(){function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.name="pouchdb",this.adapter=r,this.pouchSettings=n,zm(r)}var t=e.prototype;return t.hash=function(n){return bf(n)},t.createPouch=function(){var r=(0,it.Z)($e().mark(function i(f,d){var O,U,W;return $e().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return O={location:f,adapter:Un(this.adapter),settings:d},U=Object.assign({},O.adapter,this.pouchSettings,O.settings),W=new qo(O.location,U),ne.abrupt("return",W);case 4:case"end":return ne.stop()}},i,this)}));return function(i,f){return r.apply(this,arguments)}}(),t.createStorageInstance=function(){var r=(0,it.Z)($e().mark(function i(f){var d,O;return $e().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return d=Cf(f.databaseName,f.collectionName,f.schema.version),W.next=3,this.createPouch(d,f.options);case 3:return O=W.sent,W.next=6,Wm(O,f.schema);case 6:return W.abrupt("return",new jm(f.databaseName,f.collectionName,f.schema,{pouch:O},f.options));case 7:case"end":return W.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),t.createKeyObjectStorageInstance=function(){var r=(0,it.Z)($e().mark(function i(f){var d,O;return $e().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return(d=jt(f.options)).auto_compaction=!1,d.revs_limit=1,O=Cf(f.databaseName,f.collectionName,0),q.next=6,this.createPouch(O,f.options);case 6:return q.abrupt("return",new Um(f.databaseName,f.collectionName,{pouch:q.sent},f.options));case 8:case"end":return q.stop()}},i,this)}));return function(i){return r.apply(this,arguments)}}(),e}();function zm(e){if("string"==typeof e){if(!qo.adapters||!qo.adapters[e])throw ze("DB9",{adapter:e})}else if(function(e){if(!e||"function"!=typeof e.super_)throw ze("UT4",{adapter:e})}(e),!qo.adapters||!qo.adapters.leveldb)throw ze("DB10",{adapter:e})}function Wm(e,t){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,it.Z)($e().mark(function e(t,r){var n,f;return $e().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(r.indexes){O.next=2;break}return O.abrupt("return");case 2:return n=Q(r.primaryKey),O.next=5,t.getIndexes();case 5:return f=new Set(O.sent.indexes.map(function(U){return U.name})),O.next=9,Promise.all(r.indexes.map(function(){var U=(0,it.Z)($e().mark(function W(q){var ne,de;return $e().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(ne=(ne=Array.isArray(q)?q:[q]).map(function(ee){return ee===n?"_id":ee}),de="idx-rxdb-index-"+ne.join(","),!f.has(de)){he.next=5;break}return he.abrupt("return");case 5:return he.abrupt("return",t.createIndex({name:de,ddoc:de,index:{fields:ne}}));case 6:case"end":return he.stop()}},W)}));return function(W){return U.apply(this,arguments)}}()));case 9:case"end":return O.stop()}},e)})),Lc.apply(this,arguments)}function Cf(e,t,r){var n=e+"-rxdb-"+r+"-";if(t.includes("/")){var i=t.split("/"),f=i.pop();return i.join("/")+"/"+n+f}return n+t}function Km(e,t){if(!e)throw new Error("adapter missing");return new $m(e,t)}var Hm=["__proto__","constructor","prototype"];function ta(e,t){Object.keys(t).forEach(function(r){Hm.includes(r)||(void 0===e[r]?e[r]=t[r]:ra(t[r])?ta(e[r],t[r]):e[r]=t[r])})}function ra(e){return"[object Object]"===e.toString()}var pu=function(){function e(r){if(this.options={},this._conditions={},this._fields={},r){var n=this;r.selector&&n.find(r.selector),r.limit&&n.limit(r.limit),r.skip&&n.skip(r.skip),r.sort&&r.sort.forEach(function(i){return n.sort(i)})}}var t=e.prototype;return t.where=function(n,i){if(!arguments.length)return this;var f=typeof arguments[0];if("string"===f)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"===f&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw Wt("MQ1",{path:arguments[0]})},t.equals=function(n){return this._ensurePath("equals"),this._conditions[this._path]=n,this},t.eq=function(n){return this._ensurePath("eq"),this._conditions[this._path]=n,this},t.or=function(n){var i=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(n)||(n=[n]),i.push.apply(i,n),this},t.nor=function(n){var i=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(n)||(n=[n]),i.push.apply(i,n),this},t.and=function(n){var i=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(n)||(n=[n]),i.push.apply(i,n),this},t.mod=function(n,i){var f,d;1===arguments.length?(this._ensurePath("mod"),f=arguments[0],d=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(f=arguments.slice(1),d=arguments[0]):(f=arguments[1],d=arguments[0]):(this._ensurePath("mod"),f=arguments.slice(),d=this._path);var O=this._conditions[d]||(this._conditions[d]={});return O.$mod=f,this},t.exists=function(n,i){var f,d;0===arguments.length?(this._ensurePath("exists"),f=this._path,d=!0):1===arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),f=this._path,d=arguments[0]):(f=arguments[0],d=!0):2===arguments.length&&(f=arguments[0],d=arguments[1]);var O=this._conditions[f]||(this._conditions[f]={});return O.$exists=d,this},t.elemMatch=function(n,i){if(null===arguments[0])throw Wt("MQ2");var f,d,O;if("function"==typeof arguments[0])this._ensurePath("elemMatch"),d=this._path,f=arguments[0];else if(ra(arguments[0]))this._ensurePath("elemMatch"),d=this._path,O=arguments[0];else if("function"==typeof arguments[1])d=arguments[0],f=arguments[1];else{if(!arguments[1]||!ra(arguments[1]))throw Wt("MQ2");d=arguments[0],O=arguments[1]}f&&(f(O=new e),O=O._conditions);var U=this._conditions[d]||(this._conditions[d]={});return U.$elemMatch=O,this},t.sort=function(n){var i=this;if(!n)return this;var f,d=typeof n;if(Array.isArray(n)){f=n.length;for(var O=0;O<n.length;++O)Gm(this.options,n[O][0],n[O][1]);return this}if(1===arguments.length&&"string"===d){f=(n=n.split(/\s+/)).length;for(var U=0;U<f;++U){var W=n[U];if(W){var q="-"===W[0]?-1:1;-1===q&&(W=W.substring(1)),Of(this.options,W,q)}}return this}if(ra(n)){var ne=Object.keys(n);return ne.forEach(function(de){return Of(i.options,de,n[de])}),this}throw Wt("MQ3",{args:arguments})},t.merge=function(n){if(!n)return this;if(!Pf(n))throw Wt("MQ4",{source:n});return n instanceof e?(n._conditions&&ta(this._conditions,n._conditions),n._fields&&(this._fields||(this._fields={}),ta(this._fields,n._fields)),n.options&&(this.options||(this.options={}),ta(this.options,n.options)),n._distinct&&(this._distinct=n._distinct),this):(ta(this._conditions,n),this)},t.find=function(n){return Pf(n)&&this.merge(n),this},t._ensurePath=function(n){if(!this._path)throw ze("MQ5",{method:n})},t.toJSON=function(){var n={selector:this._conditions};return this.options.skip&&(n.skip=this.options.skip),this.options.limit&&(n.limit=this.options.limit),this.options.sort&&(n.sort=function(e){return Object.entries(e).map(function(t){var r;return(r={})[t[0]]=1===t[1]?"asc":"desc",r})}(this.options.sort)),{query:n,path:this._path}},e}(),Df=["limit","skip","maxScan","batchSize","comment"];Df.forEach(function(e){pu.prototype[e]=function(t){return this.options[e]=t,this}});var Af=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];function Of(e,t,r){if(Array.isArray(e.sort))throw Wt("MQ6",{opts:e,field:t,value:r});if(r&&r.$meta)(e.sort||(e.sort={}))[t]={$meta:r.$meta};else{var i=String(r||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(i))throw Array.isArray(r)&&(r="["+r+"]"),Wt("MQ7",{field:t,value:r});var f=e.sort||(e.sort={}),d=r.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");f[t]=parseInt(d,10)}}function Gm(e,t,r){if(e.sort=e.sort||[],!Array.isArray(e.sort))throw Wt("MQ8",{opts:e,field:t,value:r});e.sort.push([t,r])}function Pf(e){return e instanceof pu||ra(e)}Af.forEach(function(e){pu.prototype[e]=function(){var t,r;1===arguments.length?(this._ensurePath(e),r=arguments[0],t=this._path):(r=arguments[1],t=arguments[0]);var n=null===this._conditions[t]||"object"==typeof this._conditions[t]?this._conditions[t]:this._conditions[t]={};return n["$"+e]=r,this}});var Bc="queryBuilderPath";function Fc(e,t){e[t]=function(r){return function(e,t,r){var n=function(e){return new pu(e)}(Zt(e.mangoQuery));e.other[Bc]&&(n._path=e.other[Bc]),n[t](r);var i=n.toJSON(),f=new nu(e.op,i.query,e.collection);return i.path&&(f.other[Bc]=i.path),hl(f)}(this,t,r)}}var Ym={name:"query-builder",rxdb:!0,prototypes:{RxQuery:function(t){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach(function(r){Fc(t,r)}),Df.forEach(function(r){Fc(t,r)}),Af.forEach(function(r){Fc(t,r)})}}},Jm=l(9790),Xm=l.n(Jm);function qm(e){var t=this._data,r=Xm()(t,e);return this._saveData(r,t)}function ev(e){return this.exec().then(function(t){return t?Array.isArray(t)?Promise.all(t.map(function(r){return r.update(e)})).then(function(){return t}):t.update(e).then(function(){return t}):null})}var rv={RxDocument:function(t){t.update=qm},RxQuery:function(t){t.update=ev}},nv={name:"update",rxdb:!0,prototypes:rv},iv=l(8167),sv=l.n(iv),Nc=new Map;function jc(e){var t=e.hash;if(!Nc.has(t)){var r=sv()(e.jsonSchema);Nc.set(t,r)}return Nc.get(t)}var ov=function(t){var r=jc(this);if(r(t))return t;throw ze("VD2",{errors:r.errors,obj:t,schema:this.jsonSchema})},cv={RxSchema:function(t){t._getValidator=jc,t.validate=ov}},lv={createRxSchema:function(t){"object"==typeof window&&window.requestIdleCallback&&window.requestIdleCallback(function(){jc(t)})}},fv={name:"validate",rxdb:!0,prototypes:cv,hooks:lv},Xt=l(3900),Xr=l(2843),Si=l(9646),mu=l(9770),qn=l(2076),na=l(4128),dv=l(1042);let hv=(()=>{class e{constructor(){this.isInitialized=!1}initialize(r){this.isInitialized?console.warn("PermissionsService already initialized"):(this.collection=r,this.isInitialized=!0)}requestPermissions(r){return(0,mu.P)(()=>this.isInitialized&&this.collection?(0,qn.D)(this.collection.bulkInsert(r)).pipe((0,Vt.U)(({success:n})=>!!n)):(0,Xr._)(()=>new Error("PermissionsService not initialized")))}hasPermission(r){return(0,mu.P)(()=>{if(!this.isInitialized||!this.collection)return(0,Xr._)(()=>new Error("PermissionsService not initialized"));const n=this.collection.findOne({selector:{id:`${r.appId}:${r.kind}:${r.mode}:${r.target}`}});return(0,qn.D)(n.exec()).pipe((0,Vt.U)(i=>!!i))})}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Kr=l(899);class pv{constructor(t,r,n){this.appId=t,this.collection=r,this.acl=n}insert(t){return this.requestPermission(Kr.R.Write).pipe((0,Xt.w)(()=>this.collection.insert(t)),(0,Vt.U)(r=>r.toJSON()))}upsert(t){return this.requestPermission(Kr.R.Write).pipe((0,Xt.w)(()=>this.collection.upsert(t)),(0,Vt.U)(r=>r.toJSON()))}findOne(t){return this.requestPermission(Kr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne(t).exec()),(0,Vt.U)(r=>r?r.toJSON():null))}find(t){return this.requestPermission(Kr.R.Read).pipe((0,Xt.w)(()=>this.collection.find(t).exec()),(0,Vt.U)(r=>r.map(n=>n.toJSON())))}observe(t){return this.requestPermission(Kr.R.Read).pipe((0,Xt.w)(()=>this.collection.find(t).$),(0,Vt.U)(r=>r.map(n=>n.toJSON())))}observeOne(t){return this.observe(t).pipe((0,Vt.U)(r=>r.length>0?r[0]:null))}update(t,r){return this.requestPermission(Kr.R.Write).pipe((0,Xt.w)(()=>this.collection.find(t).update(r)),(0,Vt.U)(n=>n.map(i=>i.toJSON())))}remove(t){return this.requestPermission(Kr.R.Write).pipe((0,Xt.w)(()=>this.collection.find(t).remove()),(0,Vt.U)(r=>r.map(n=>n.toJSON())))}putAttachment(t,r,n=!1){return this.requestPermission(Kr.R.Write).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(i=>i?i.putAttachment(r,n):(0,Xr._)(()=>new Error("No document found for id "+t))),(0,Vt.U)(i=>i.id))}getAttachment(t,r){return this.requestPermission(Kr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(n=>n?(0,Si.of)(n.getAttachment(r)):(0,Xr._)(()=>new Error("No document found for id "+t))),(0,Xt.w)(n=>n?(0,qn.D)(n.getData()).pipe((0,Vt.U)(i=>({id:n.id,data:i,type:n.type}))):(0,Xr._)(()=>new Error("No attachment found for id "+r))))}getAllAttachments(t){return this.requestPermission(Kr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(r=>r?(0,Si.of)(r.allAttachments()):(0,Xr._)(()=>new Error("No document found for id "+t))),(0,Xt.w)(r=>(0,na.D)(r.map(n=>(0,qn.D)(n.getData()).pipe((0,Vt.U)(i=>({id:n.id,data:i,type:n.type})))))))}removeAttachment(t,r){return this.requestPermission(Kr.R.Write).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(n=>{if(!n)return(0,Xr._)(()=>new Error("No document found for id "+t));const i=n.getAttachment(r);return i?i.remove():(0,Xr._)(()=>new Error("No attachment found for id "+r))}))}observeAttachments(t){return this.requestPermission(Kr.R.Read).pipe((0,Xt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Xt.w)(r=>r?r.allAttachments$:(0,Xr._)(()=>new Error("No document found for id "+t))),(0,Xt.w)(r=>(0,na.D)(r.map(n=>(0,qn.D)(n.getData()).pipe((0,Vt.U)(i=>({id:n.id,data:i,type:n.type})))))))}requestPermission(t){return this.acl.hasPermission({appId:this.appId,kind:Kr.k.Collection,mode:t,target:this.collection.name}).pipe((0,Xt.w)(r=>r?(0,Si.of)(r):(0,Xr._)(()=>new Error(`No permission to perform action ${t} on ${this.collection.name} with appId ${this.appId}`))))}}yf(g),Ko(gh),Ko(fv),Ko(Ph),Ko(Ym),Ko(nv);const If=new a.InjectionToken("ENTITY_MANAGER_BASE_COLLECTIONS_TOKEN"),Tf=new a.InjectionToken("ENTITY_MANAGER_INITIAL_DATA_TOKEN");let mv=(()=>{class e{constructor(r,n,i){this.acl=r,this.baseCollections=n,this.initialData=i,this.initialize$=new Rs(0)}setupDatabase(r,n){return this.createDatabase(r,n).pipe((0,Xt.w)(i=>this.addBaseCollections(i)),(0,Ms.b)(i=>this.acl.initialize(i.applicationpermissions)),(0,Xt.w)(i=>this.addInitialData(i)),(0,Ms.b)(()=>this.initialize$.next()),(0,Vt.U)(()=>{}))}isDatabaseCreated(){return void 0!==this._dbInstance}getRepository(r,n){if(!this._dbInstance)return(0,Xr._)(()=>new Error("Database not initialized"));const i=this._dbInstance.collections[r];if(!i)return(0,Xr._)(()=>new Error("Collection not initialized"));const f=new pv(n,i,this.acl);return(0,Si.of)(f)}createDatabase(r,n){return(0,mu.P)(()=>(0,qn.D)(function(e){var De,t=e.storage,r=e.instanceCreationOptions,n=e.name,i=e.password,f=e.multiInstance,d=void 0===f||f,O=e.eventReduce,U=void 0!==O&&O,W=e.ignoreDuplicate,q=void 0!==W&&W,ne=e.options,de=void 0===ne?{}:ne;nr("preCreateRxDatabase",{storage:t,instanceCreationOptions:r,name:n,password:i,multiInstance:d,eventReduce:U,ignoreDuplicate:q,options:de}),i&&hr.validatePassword(i),q||function(e){if(tc.has(e))throw ze("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}(n),tc.add(n),d&&(De=new qu("RxDB:"+n+":socket"));var he=new Hu;return Ml(t,n,r,he,De).then(function(ee){var fe=new au(n,t,r,i,d,U,de,he,ee.internalStore,ee.localDocumentsStore,De);return function(e){return oc.apply(this,arguments)}(fe).then(function(){return bs("createRxDatabase",fe)}).then(function(){return fe})})}({name:r,password:n,storage:Km("idb")})).pipe((0,Ms.b)(i=>this._dbInstance=i)))}addBaseCollections(r){const n=this.baseCollections.reduce((i,f)=>Object.assign(i,{[f.name]:f.creator}),{});return(0,mu.P)(()=>(0,qn.D)(r.addCollections(n)).pipe((0,Ms.b)(i=>{Object.values(i).forEach(f=>{f.preInsert(d=>{const O=(new Date).toISOString();d.id=d.id||(0,dv.Z)(),d.createdAt=d.createdAt||O,d.updatedAt=d.updatedAt||O},!1),f.preSave((d,O)=>{const U=(new Date).toISOString();d.createdAt=O.createdAt||U,d.updatedAt=U},!1)})})))}addInitialData(r){return(0,na.D)(this.initialData.map(n=>{const i=r[n.name],f=!("upsert"in n)||n.upsert;return(0,na.D)(n.data.map(d=>(f?(0,Si.of)(!0):(0,qn.D)(i.findOne({selector:{id:d.id}}).exec()).pipe((0,Vt.U)(U=>!U))).pipe((0,Xt.w)(U=>U?(0,qn.D)(i.upsert(d)).pipe((0,Xt.w)(()=>{if("userapplications"!==n.name)return(0,Si.of)(void 0);const W=(d.additionalProperties?.permissions||[]).map(q=>({...q,appId:d.id,id:`${d.id}:${q.kind}:${q.mode}:${q.target}`}));return W.length?(0,na.D)(W.map(q=>r.applicationpermissions.upsert(q))):(0,Si.of)(void 0)})):(0,Si.of)(void 0)))))}))}}return e.\u0275fac=function(r){return new(r||e)(a.\u0275\u0275inject(hv),a.\u0275\u0275inject(If),a.\u0275\u0275inject(Tf))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},43:(oe,N,l)=>{l.d(N,{T:()=>T});var g=l(1457),D=l(442),p=l(1135),B=l(3900),L=l(4128),F=l(8505),M=l(2843),I=l(9841),S=l(7777);let T=(()=>{class P{constructor(R,E){this.document=R,this.entityManager=E,this.customizationSettings$=new p.X(void 0),this.entityManager.initialize$.pipe((0,B.w)(()=>(0,L.D)([this.entityManager.getRepository("userpreferences","com.central-factory.settings")])),(0,F.b)(([y])=>{this.userPreferencesRepository=y,this.subscribeToDataChanges()})).subscribe()}setCustomizationSettings(R,E){return this.userPreferencesRepository?this.userPreferencesRepository.upsert({id:"settings.customization"+(E?`.${E}`:""),key:"settings.customization",value:R,avatar:E}):(0,M._)(()=>new Error("Repositories not initialized"))}subscribeToDataChanges(){if(!this.userPreferencesRepository)throw new Error("Repositories not initialized");this.customizationSettings$.pipe((0,F.b)(R=>{!R||R.theme&&this.loadThemeFromUrl(R.theme.path)})).subscribe(),(0,I.a)([this.userPreferencesRepository.observeOne({selector:{key:"userAvatars.selectedAvatar"}}),this.userPreferencesRepository.observe({selector:{key:"settings.customization"}})]).pipe((0,F.b)(([R,E])=>{if(E.length<=0)return;const y=E.find(c=>c.avatar===R?.value)||E[0];this.customizationSettings$.next(y.value)})).subscribe()}loadThemeFromUrl(R){if(this.activeThemeLinkElem&&this.activeThemeLinkElem?.href.endsWith(R))return;const y=this.document.getElementsByTagName("head")[0],c=this.document.createElement("link");c.rel="stylesheet",c.href=R,y.appendChild(c),this.activeThemeLinkElem&&y.removeChild(this.activeThemeLinkElem),this.activeThemeLinkElem=c}}return P.\u0275fac=function(R){return new(R||P)(S.\u0275\u0275inject(g.DOCUMENT),S.\u0275\u0275inject(D.v2))},P.\u0275prov=S.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},4438:(oe,N,l)=>{l.d(N,{O:()=>D});var g=l(7777);let D=(()=>{class p{}return p.\u0275fac=function(L){return new(L||p)},p.\u0275mod=g.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=g.\u0275\u0275defineInjector({}),p})()},1894:(oe,N,l)=>{l.d(N,{t:()=>D});var g=l(7777);let D=(()=>{class p{constructor(){this.separators={el:"__",mod:"--",val:"-"},this.ignoreValues=!1,this.modCase="kebab"}setMods(L,F,M,I,S,w){Object.keys(M).forEach(T=>{if(I[T]){if(M[T]===I[T])return;w.removeClass(S.nativeElement,this.generateClass(L,F,T,I[T]))}M[T]&&w.addClass(S.nativeElement,this.generateClass(L,F,T,M[T]))}),Object.keys(I).forEach(T=>{!(T in M)&&I[T]&&w.removeClass(S.nativeElement,this.generateClass(L,F,T,I[T]))})}generateClass(L,F,M,I){this.ignoreValues&&(I=!!I),"string"!=typeof I&&"boolean"!=typeof I&&(I=!!I);let S=L;return F&&(S+=this.separators.el+F),M&&(M=this.modNameHandler(M),S+=this.separators.mod+M,"boolean"!=typeof I&&null!=I&&(S+=this.separators.val+I)),S}parseMods(L){if("string"==typeof L&&(L=L.split(/\s+/)),Array.isArray(L)){const F=L;L={},F.forEach(M=>{L[M]=!0})}else if("object"!=typeof L)return{};return L}modNameHandler(L){switch(this.modCase){case"kebab":return L?L.replace(/[A-Z]/g,function(F){return"-"+F.toLowerCase()}).replace(/$\-/,""):"";case"snake":return L?L.replace(/[A-Z]/g,function(F){return"_"+F.toLowerCase()}).replace(/$\-/,""):"";default:return L}}}return p.\u0275fac=function(L){return new(L||p)},p.\u0275prov=g.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},1623:(oe,N,l)=>{l.d(N,{G:()=>p});var g=l(7777),D=l(1894);let p=(()=>{class B{constructor(F,M,I,S){this.bemService=S,this.name=I,this.element=F,this.renderer=M,M.addClass(F.nativeElement,this.bemService.generateClass(I))}ngOnChanges(){if(JSON.stringify(this.cfMod)!==this._modSerialized){this._modSerialized=JSON.stringify(this.cfMod);let F=this.cfMod;const{renderer:M,element:I,name:S}=this;F=this.bemService.parseMods(F),this.bemService.setMods(S,"",F,this._mods||{},I,M),this._mods=this._mods===F?Object.assign({},F):F}}}return B.\u0275fac=function(F){return new(F||B)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.Renderer2),g.\u0275\u0275injectAttribute("cfBlock"),g.\u0275\u0275directiveInject(D.t))},B.\u0275dir=g.\u0275\u0275defineDirective({type:B,selectors:[["","cfBlock",""]],inputs:{cfMod:"cfMod"},features:[g.\u0275\u0275NgOnChangesFeature]}),B})()},3454:(oe,N,l)=>{l.d(N,{e:()=>B});var g=l(7777),D=l(1894),p=l(1623);let B=(()=>{class L{constructor(M,I,S,w,T){this.bemService=T,this.blockName=w.name,this.name=S,this.element=M,this.renderer=I,I.addClass(M.nativeElement,this.bemService.generateClass(w.name,S))}ngOnChanges(){if(JSON.stringify(this.cfMod)!==this._modSerialized){this._modSerialized=JSON.stringify(this.cfMod);let M=this.cfMod;const{renderer:I,element:S,blockName:w,name:T}=this;M=this.bemService.parseMods(M),this.bemService.setMods(w,T,M,this._mods||{},S,I),this._mods=this._mods===M?Object.assign({},M):M}}}return L.\u0275fac=function(M){return new(M||L)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.Renderer2),g.\u0275\u0275injectAttribute("cfElem"),g.\u0275\u0275directiveInject(p.G),g.\u0275\u0275directiveInject(D.t))},L.\u0275dir=g.\u0275\u0275defineDirective({type:L,selectors:[["","cfElem",""]],inputs:{cfMod:"cfMod"},features:[g.\u0275\u0275NgOnChangesFeature]}),L})()},7967:(oe,N,l)=>{l.d(N,{I:()=>D});var g=l(7777);let D=(()=>{class p{}return p.\u0275fac=function(L){return new(L||p)},p.\u0275dir=g.\u0275\u0275defineDirective({type:p,selectors:[["","cfMod",""]]}),p})()},5183:(oe,N,l)=>{l.d(N,{L:()=>M});var g=l(1457),D=l(7777);function B(I,S){if(1&I){const w=D.\u0275\u0275getCurrentView();D.\u0275\u0275elementStart(0,"div",2),D.\u0275\u0275listener("click",function(){return D.\u0275\u0275restoreView(w),D.\u0275\u0275nextContext()._onBackdropClicked()}),D.\u0275\u0275elementEnd()}if(2&I){const w=D.\u0275\u0275nextContext();D.\u0275\u0275property("ngClass",w.backdropClass)}}const L=[[["cf-sidebar"],["","cf-sidebar",""]],[["","cf-sidebar-content",""]]],F=["cf-sidebar,[cf-sidebar]","[cf-sidebar-content]"];let M=(()=>{class I{constructor(w,T){this._ref=w,this.animate=!0,this.allowSidebarBackdropControl=!0,this.showBackdrop=!1,this.showBackdropChange=new D.EventEmitter,this.backdropClick=new D.EventEmitter,this._sidebars=[],this._isBrowser=(0,g.isPlatformBrowser)(T)}ngAfterContentInit(){!this._isBrowser||this._onToggle()}ngOnChanges(w){!this._isBrowser||w.showBackdrop&&this.showBackdropChange.emit(w.showBackdrop.currentValue)}ngOnDestroy(){!this._isBrowser||this._unsubscribe()}_addSidebar(w){this._sidebars.push(w),this._subscribe(w)}_removeSidebar(w){const T=this._sidebars.indexOf(w);-1!==T&&this._sidebars.splice(T,1)}_getContentStyle(){let w=0,T=0,P=0,x=0,R="",E="",y="";for(const c of this._sidebars)if(c._isModeSlide&&c.opened&&(R=`translate${c._isLeftOrRight?"X":"Y"}(${c._isLeftOrTop?"":"-"}${c._isLeftOrRight?c._width:c._height}px)`),c._isModePush&&c.opened||c.dock){let o=0;switch(c._isModeSlide&&c.opened?c._isLeftOrRight?y="100%":E="100%":o=c._isDocked||c._isModeOver&&c.dock?c._dockedSize:c._isLeftOrRight?c._width:c._height,c.position){case"left":w=Math.max(w,o);break;case"right":T=Math.max(T,o);break;case"top":P=Math.max(P,o);break;case"bottom":x=Math.max(x,o)}}return{padding:`${P}px ${T}px ${x}px ${w}px`,webkitTransform:R,transform:R,height:E,width:y}}_onBackdropClicked(){let w=!1;for(const T of this._sidebars)T.opened&&T.showBackdrop&&T.closeOnClickBackdrop&&(T.close(),w=!0);w&&this.backdropClick.emit()}_subscribe(w){w.openStart.subscribe(()=>this._onToggle()),w.sidebarOpen.subscribe(()=>this._markForCheck()),w.closeStart.subscribe(()=>this._onToggle()),w.sidebarClose.subscribe(()=>this._markForCheck()),w.modeChange.subscribe(()=>this._markForCheck()),w.positionChange.subscribe(()=>this._markForCheck()),w._onRerender.subscribe(()=>this._markForCheck())}_unsubscribe(){for(const w of this._sidebars)w.openStart.unsubscribe(),w.sidebarOpen.unsubscribe(),w.closeStart.unsubscribe(),w.sidebarClose.unsubscribe(),w.modeChange.unsubscribe(),w.positionChange.unsubscribe(),w._onRerender.unsubscribe()}_onToggle(){if(this._sidebars.length>0&&this.allowSidebarBackdropControl){const w=this._sidebars.some(T=>T.opened&&T.showBackdrop);this.showBackdrop=w,this.showBackdropChange.emit(w)}setTimeout(()=>{this._markForCheck()})}_markForCheck(){this._ref.markForCheck()}}return I.\u0275fac=function(w){return new(w||I)(D.\u0275\u0275directiveInject(D.ChangeDetectorRef),D.\u0275\u0275directiveInject(D.PLATFORM_ID))},I.\u0275cmp=D.\u0275\u0275defineComponent({type:I,selectors:[["cf-sidebar-container"]],inputs:{animate:"animate",allowSidebarBackdropControl:"allowSidebarBackdropControl",showBackdrop:"showBackdrop",contentClass:"contentClass",backdropClass:"backdropClass"},outputs:{showBackdropChange:"showBackdropChange",backdropClick:"backdropClick"},features:[D.\u0275\u0275NgOnChangesFeature],ngContentSelectors:F,decls:4,vars:5,consts:[["aria-hidden","true","class","cf-sidebar__backdrop",3,"ngClass","click",4,"ngIf"],[1,"cf-sidebar__content",3,"ngClass","ngStyle"],["aria-hidden","true",1,"cf-sidebar__backdrop",3,"ngClass","click"]],template:function(w,T){1&w&&(D.\u0275\u0275projectionDef(L),D.\u0275\u0275template(0,B,1,1,"div",0),D.\u0275\u0275projection(1),D.\u0275\u0275elementStart(2,"div",1),D.\u0275\u0275projection(3,1),D.\u0275\u0275elementEnd()),2&w&&(D.\u0275\u0275property("ngIf",T.showBackdrop),D.\u0275\u0275advance(2),D.\u0275\u0275classProp("cf-sidebar__content--animate",T.animate),D.\u0275\u0275property("ngClass",T.contentClass)("ngStyle",T._getContentStyle()))},directives:[g.NgIf,g.NgClass,g.NgStyle],encapsulation:2,changeDetection:0}),I})()},6111:(oe,N,l)=>{l.d(N,{k:()=>M});var g=l(1457),a=l(7777),B=l(5183);const L=["sidebar"],F=["*"];let M=(()=>{class I{constructor(w,T,P){if(this._container=w,this._ref=T,this.opened=!1,this.openedChange=new a.EventEmitter,this.mode="over",this.dock=!1,this.dockedSize="0px",this.position="start",this.animate=!0,this.autoCollapseOnInit=!0,this.trapFocus=!1,this.autoFocus=!0,this.showBackdrop=!1,this.closeOnClickBackdrop=!1,this.closeOnClickOutside=!1,this.keyClose=!1,this.keyCode=27,this.contentInit=new a.EventEmitter,this.openStart=new a.EventEmitter,this.sidebarOpen=new a.EventEmitter,this.closeStart=new a.EventEmitter,this.sidebarClose=new a.EventEmitter,this.transitionEnd=new a.EventEmitter,this.modeChange=new a.EventEmitter,this.positionChange=new a.EventEmitter,this._onRerender=new a.EventEmitter,this._focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]),textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], [contenteditable]",this._tabIndexAttr="__tabindex__",this._tabIndexIndicatorAttr="__ngsidebar-tabindex__",this._clickEvent="click",this._onClickOutsideAttached=!1,this._onKeyDownAttached=!1,this._onResizeAttached=!1,!this._container)throw new Error("<cf-sidebar> must be inside a <cf-sidebar-container>. See https://github.com/arkon/ng-sidebar#usage for more info.");this._isBrowser=(0,g.isPlatformBrowser)(P),this._isBrowser&&"undefined"!=typeof window&&"undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!("onclick"in window)&&(this._clickEvent="touchstart"),this._normalizePosition(),this.open=this.open.bind(this),this._onTransitionEnd=this._onTransitionEnd.bind(this),this._onFocusTrap=this._onFocusTrap.bind(this),this._onClickOutside=this._onClickOutside.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._collapse=this._collapse.bind(this)}ngOnInit(){!this._isBrowser||(this.animate&&(this._shouldAnimate=!0,this.animate=!1),this._container._addSidebar(this),this.autoCollapseOnInit&&this._collapse())}ngAfterContentInit(){this.contentInit.emit()}ngOnChanges(w){!this._isBrowser||(w.animate&&this._shouldAnimate&&(this._shouldAnimate=w.animate.currentValue),w.closeOnClickOutside&&(w.closeOnClickOutside.currentValue?this._initCloseClickListener():this._destroyCloseClickListener()),w.keyClose&&(w.keyClose.currentValue?this._initCloseKeyDownListener():this._destroyCloseKeyDownListener()),w.position&&(this._normalizePosition(),setTimeout(()=>{this.positionChange.emit(w.position.currentValue)})),w.mode&&setTimeout(()=>{this.modeChange.emit(w.mode.currentValue)}),w.dock&&this.triggerRerender(),w.opened&&(this._shouldAnimate&&(this.animate=!0,this._shouldAnimate=!1),w.opened.currentValue?this.open():this.close()),(w.autoCollapseHeight||w.autoCollapseWidth)&&this._initCollapseListeners())}ngOnDestroy(){!this._isBrowser||(this._destroyCloseListeners(),this._destroyCollapseListeners(),this._container._removeSidebar(this))}open(){!this._isBrowser||(this.opened=!0,this.openedChange.emit(!0),this.openStart.emit(),this._ref.detectChanges(),setTimeout(()=>{this.animate&&!this._isModeSlide?this._elSidebar.nativeElement.addEventListener("transitionend",this._onTransitionEnd):(this._setFocused(),this._initCloseListeners(),this.opened&&this.sidebarOpen.emit())}))}close(){!this._isBrowser||(this.opened=!1,this.openedChange.emit(!1),this.closeStart.emit(),this._ref.detectChanges(),setTimeout(()=>{this.animate&&!this._isModeSlide?this._elSidebar.nativeElement.addEventListener("transitionend",this._onTransitionEnd):(this._setFocused(),this._destroyCloseListeners(),this.opened||this.sidebarClose.emit())}))}triggerRerender(){!this._isBrowser||setTimeout(()=>{this._onRerender.emit()})}_getStyle(){let w="";if(!this.opened){const T="translate"+(this._isLeftOrRight?"X":"Y");w=`${T}(${(this._isLeftOrTop?"-":"")+"100%"})`,this.dock&&this._dockedSize>0&&(!this._isModeSlide||!this.opened)&&(w+=` ${T}(${this._isLeftOrTop?"+":"-"}${this.dockedSize})`)}return{webkitTransform:w,transform:w}}_onTransitionEnd(w){w.target===this._elSidebar.nativeElement&&w.propertyName.endsWith("transform")&&(this._setFocused(),this.opened?(this._initCloseListeners(),this.sidebarOpen.emit()):(this._destroyCloseListeners(),this.sidebarClose.emit()),this.transitionEnd.emit(),this._elSidebar.nativeElement.removeEventListener("transitionend",this._onTransitionEnd))}get _shouldTrapFocus(){return this.opened&&this.trapFocus}_focusFirstItem(){this._focusableElements&&this._focusableElements.length>0&&this._focusableElements[0].focus()}_onFocusTrap(w){this._shouldTrapFocus&&!this._elSidebar.nativeElement.contains(w.target)&&this._focusFirstItem()}_setFocused(){if(this._focusableElements=Array.from(this._elSidebar.nativeElement.querySelectorAll(this._focusableElementsString)),this.opened){this._focusedBeforeOpen=document.activeElement;for(const w of this._focusableElements){const T=w.getAttribute(this._tabIndexAttr),P=null!==w.getAttribute(this._tabIndexIndicatorAttr);null!==T?(w.setAttribute("tabindex",T),w.removeAttribute(this._tabIndexAttr)):P&&(w.removeAttribute("tabindex"),w.removeAttribute(this._tabIndexIndicatorAttr))}this.autoFocus&&this._focusFirstItem(),document.addEventListener("focus",this._onFocusTrap,!0)}else{for(const w of this._focusableElements){const T=w.getAttribute("tabindex");w.setAttribute("tabindex","-1"),w.setAttribute(this._tabIndexIndicatorAttr,""),null!==T&&w.setAttribute(this._tabIndexAttr,T)}document.removeEventListener("focus",this._onFocusTrap,!0),this._focusedBeforeOpen&&this.autoFocus&&this._isModeOver&&(this._focusedBeforeOpen.focus(),this._focusedBeforeOpen=null)}}_initCloseListeners(){this._initCloseClickListener(),this._initCloseKeyDownListener()}_initCloseClickListener(){setTimeout(()=>{this.opened&&this.closeOnClickOutside&&!this._onClickOutsideAttached&&(document.addEventListener(this._clickEvent,this._onClickOutside),this._onClickOutsideAttached=!0)})}_initCloseKeyDownListener(){setTimeout(()=>{this.opened&&this.keyClose&&!this._onKeyDownAttached&&(document.addEventListener("keydown",this._onKeyDown),this._onKeyDownAttached=!0)})}_destroyCloseListeners(){this._destroyCloseClickListener(),this._destroyCloseKeyDownListener()}_destroyCloseClickListener(){this._onClickOutsideAttached&&(document.removeEventListener(this._clickEvent,this._onClickOutside),this._onClickOutsideAttached=!1)}_destroyCloseKeyDownListener(){this._onKeyDownAttached&&(document.removeEventListener("keydown",this._onKeyDown),this._onKeyDownAttached=!1)}_onClickOutside(w){this._onClickOutsideAttached&&this._elSidebar&&!this._elSidebar.nativeElement.contains(w.target)&&this.close()}_onKeyDown(w){(w=w||window.event).keyCode===this.keyCode&&this.close()}_initCollapseListeners(){(this.autoCollapseHeight||this.autoCollapseWidth)&&setTimeout(()=>{this._onResizeAttached||(window.addEventListener("resize",this._collapse),this._onResizeAttached=!0)})}_destroyCollapseListeners(){this._onResizeAttached&&(window.removeEventListener("resize",this._collapse),this._onResizeAttached=!1)}_collapse(){const w=window.innerHeight,T=window.innerWidth;this.autoCollapseHeight&&(w<=this.autoCollapseHeight&&this.opened?(this._wasCollapsed=!0,this.close()):w>this.autoCollapseHeight&&this._wasCollapsed&&(this.open(),this._wasCollapsed=!1)),this.autoCollapseWidth&&(T<=this.autoCollapseWidth&&this.opened?(this._wasCollapsed=!0,this.close()):T>this.autoCollapseWidth&&this._wasCollapsed&&(this.open(),this._wasCollapsed=!1))}get _height(){return this._elSidebar.nativeElement?this._isDocked?this._dockedSize:this._elSidebar.nativeElement.offsetHeight:0}get _width(){return this._elSidebar.nativeElement?this._isDocked?this._dockedSize:this._elSidebar.nativeElement.offsetWidth:0}get _dockedSize(){return parseFloat(this.dockedSize)}get _isModeOver(){return"over"===this.mode}get _isModePush(){return"push"===this.mode}get _isModeSlide(){return"slide"===this.mode}get _isDocked(){return!(!this.dock||!this.dockedSize||this.opened)}get _isLeftOrTop(){return"left"===this.position||"top"===this.position}get _isLeftOrRight(){return"left"===this.position||"right"===this.position}get _isInert(){return!this.opened&&!this.dock}_normalizePosition(){const w=(()=>{let I="ltr";return"undefined"!=typeof window&&(I=window.getComputedStyle?window.getComputedStyle(document.body,null).getPropertyValue("direction"):document.body.currentStyle.direction),"ltr"===I})();"start"===this.position?this.position=w?"left":"right":"end"===this.position&&(this.position=w?"right":"left")}}return I.\u0275fac=function(w){return new(w||I)(a.\u0275\u0275directiveInject(B.L,8),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(a.PLATFORM_ID))},I.\u0275cmp=a.\u0275\u0275defineComponent({type:I,selectors:[["cf-sidebar"]],viewQuery:function(w,T){if(1&w&&a.\u0275\u0275viewQuery(L,5),2&w){let P;a.\u0275\u0275queryRefresh(P=a.\u0275\u0275loadQuery())&&(T._elSidebar=P.first)}},inputs:{opened:"opened",mode:"mode",dock:"dock",dockedSize:"dockedSize",position:"position",animate:"animate",autoCollapseHeight:"autoCollapseHeight",autoCollapseWidth:"autoCollapseWidth",autoCollapseOnInit:"autoCollapseOnInit",sidebarClass:"sidebarClass",ariaLabel:"ariaLabel",trapFocus:"trapFocus",autoFocus:"autoFocus",showBackdrop:"showBackdrop",closeOnClickBackdrop:"closeOnClickBackdrop",closeOnClickOutside:"closeOnClickOutside",keyClose:"keyClose",keyCode:"keyCode"},outputs:{openedChange:"openedChange",contentInit:"contentInit",openStart:"openStart",sidebarOpen:"sidebarOpen",closeStart:"closeStart",sidebarClose:"sidebarClose",transitionEnd:"transitionEnd",modeChange:"modeChange",positionChange:"positionChange",_onRerender:"_onRerender"},features:[a.\u0275\u0275NgOnChangesFeature],ngContentSelectors:F,decls:3,vars:15,consts:[["role","complementary",3,"ngClass","ngStyle"],["sidebar",""]],template:function(w,T){1&w&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"aside",0,1),a.\u0275\u0275projection(2),a.\u0275\u0275elementEnd()),2&w&&(a.\u0275\u0275classMapInterpolate3("cf-sidebar cf-sidebar--",T.opened?"opened":"closed"," cf-sidebar--",T.position," cf-sidebar--",T.mode,""),a.\u0275\u0275classProp("cf-sidebar--docked",T._isDocked)("cf-sidebar--inert",T._isInert)("cf-sidebar--animate",T.animate),a.\u0275\u0275property("ngClass",T.sidebarClass)("ngStyle",T._getStyle()),a.\u0275\u0275attribute("aria-hidden",!T.opened)("aria-label",T.ariaLabel))},directives:[g.NgClass,g.NgStyle],encapsulation:2,changeDetection:0}),I})()},5687:(oe,N,l)=>{l.d(N,{l:()=>B});var g=l(1457),D=l(7777);let B=(()=>{class L{}return L.\u0275fac=function(M){return new(M||L)},L.\u0275mod=D.\u0275\u0275defineNgModule({type:L}),L.\u0275inj=D.\u0275\u0275defineInjector({imports:[[g.CommonModule]]}),L})()},5605:(oe,N,l)=>{l.d(N,{wn:()=>R});var g=l(5861),a=l(7340),D=l(7777),p=l(1623),B=l(7967),L=l(1457),F=l(3454),M=l(9750);let I=(()=>{class E{}return E.\u0275fac=function(c){return new(c||E)},E.\u0275cmp=D.\u0275\u0275defineComponent({type:E,selectors:[["cf-spinner"]],decls:2,vars:0,consts:[["cfBlock","spinner","cfMod","3x"]],template:function(c,o){1&c&&(D.\u0275\u0275elementStart(0,"div",0),D.\u0275\u0275element(1,"div"),D.\u0275\u0275elementEnd())},directives:[p.G,B.I],styles:["[_nghost-%COMP%]{display:contents}"]}),E})();function S(E,y){1&E&&(D.\u0275\u0275elementStart(0,"div",8),D.\u0275\u0275element(1,"cf-spinner"),D.\u0275\u0275elementEnd())}function w(E,y){if(1&E&&(D.\u0275\u0275elementStart(0,"p",9),D.\u0275\u0275text(1),D.\u0275\u0275elementEnd()),2&E){const c=D.\u0275\u0275nextContext();D.\u0275\u0275advance(1),D.\u0275\u0275textInterpolate1(" ",c.loadingText," ")}}const T=function(E){return{"background-color":E}};var P=(()=>{return(E=P||(P={})).Visible="visible",E.Hidden="hidden",P;var E})(),x=(()=>{return(E=x||(x={})).Visible="visible",E.Hidden="hidden",x;var E})();let R=(()=>{class E{constructor(){this.title="Portal",this.logo="assets/logo.svg",this.loadingTexts=["Setting up the rockets...","Calling the crew..","Jumping to the cyber space..."],this.welcomeMessage="Welcome to the Metaverse",this.displayLoadingTime=5e3,this.displayWelcomeTime=3e3,this.mods="",this.splashScreenHide=new D.EventEmitter,this.state=P.Visible,this.logoState=x.Hidden,this.selectedLoadingTextIndex=void 0}ngOnInit(){this.displaySplashScreen()}displaySplashScreen(){var c=this;return(0,g.Z)(function*(){c.displayLoadingText(),yield c.wait(c.displayLoadingTime),c.logoState=x.Visible,c.selectedLoadingTextIndex=void 0,c.loadingText=c.welcomeMessage,yield c.wait(c.displayWelcomeTime),c.state=P.Hidden,c.splashScreenHide.emit()})()}displayLoadingText(){var c=this;return(0,g.Z)(function*(){if(c.logoState===x.Visible)return c.selectedLoadingTextIndex=void 0,void(c.loadingText=c.welcomeMessage);const v=(void 0===c.selectedLoadingTextIndex?-1:c.selectedLoadingTextIndex)+1;if(v>=c.loadingTexts.length)return c.selectedLoadingTextIndex=void 0,yield c.wait(1e3),void c.displayLoadingText();c.selectedLoadingTextIndex=v,c.loadingText=c.loadingTexts[v],yield c.wait(1e3),c.displayLoadingText()})()}wait(c){return new Promise(o=>setTimeout(o,c))}}return E.\u0275fac=function(c){return new(c||E)},E.\u0275cmp=D.\u0275\u0275defineComponent({type:E,selectors:[["cf-splash-screen"]],inputs:{title:"title",logo:"logo",backgroundColor:"backgroundColor",loadingTexts:"loadingTexts",welcomeMessage:"welcomeMessage",displayLoadingTime:"displayLoadingTime",displayWelcomeTime:"displayWelcomeTime",mods:"mods"},outputs:{splashScreenHide:"splashScreenHide"},decls:9,vars:10,consts:[["cfBlock","splash-screen",3,"cfMod","ngStyle"],["cfElem","content"],["cfElem","title"],["cfElem","spinner"],["cfElem","logo"],["cfElem","logo-image",3,"src"],["cfElem","spinner-content",4,"ngIf"],["cfElem","loading-text",4,"ngIf"],["cfElem","spinner-content"],["cfElem","loading-text"]],template:function(c,o){1&c&&(D.\u0275\u0275elementStart(0,"div",0),D.\u0275\u0275elementStart(1,"div",1),D.\u0275\u0275elementStart(2,"h1",2),D.\u0275\u0275text(3),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementStart(4,"div",3),D.\u0275\u0275elementStart(5,"div",4),D.\u0275\u0275element(6,"cf-svg-icon",5),D.\u0275\u0275elementEnd(),D.\u0275\u0275template(7,S,2,0,"div",6),D.\u0275\u0275elementEnd(),D.\u0275\u0275template(8,w,2,1,"p",7),D.\u0275\u0275elementEnd(),D.\u0275\u0275elementEnd()),2&c&&(D.\u0275\u0275property("@splashState",o.state)("cfMod",o.mods)("ngStyle",D.\u0275\u0275pureFunction1(8,T,o.backgroundColor)),D.\u0275\u0275advance(3),D.\u0275\u0275textInterpolate(o.title),D.\u0275\u0275advance(2),D.\u0275\u0275property("@logoState",o.logoState),D.\u0275\u0275advance(1),D.\u0275\u0275property("src",o.logo),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngIf","visible"!==o.logoState),D.\u0275\u0275advance(1),D.\u0275\u0275property("ngIf",o.loadingText))},directives:[p.G,B.I,L.NgStyle,F.e,M.b,L.NgIf,I],encapsulation:2,data:{animation:[(0,a.X$)("splashState",[(0,a.SB)(P.Visible,(0,a.oB)({opacity:1,display:"block"})),(0,a.SB)(P.Hidden,(0,a.oB)({opacity:0,display:"none"})),(0,a.eR)(`${P.Hidden} => ${P.Visible}`,[(0,a.oB)({opacity:0}),(0,a.jt)("1s",(0,a.oB)({opacity:1}))]),(0,a.eR)(`${P.Visible} => ${P.Hidden}`,[(0,a.jt)("1s",(0,a.oB)({opacity:0}))])]),(0,a.X$)("logoState",[(0,a.SB)(x.Visible,(0,a.oB)({opacity:1,display:"flex"})),(0,a.SB)(x.Hidden,(0,a.oB)({opacity:0,display:"none"})),(0,a.eR)(`${x.Hidden} => ${x.Visible}`,[(0,a.oB)({display:"flex",opacity:0}),(0,a.jt)("1s",(0,a.oB)({opacity:1}))]),(0,a.eR)(`${x.Visible} => ${x.Hidden}`,[(0,a.jt)("1s",(0,a.oB)({opacity:0}))])])]}}),E})()},2085:(oe,N,l)=>{l.d(N,{x:()=>L});var g=l(1457),a=l(4438),D=l(7777);let p=(()=>{class F{}return F.\u0275fac=function(I){return new(I||F)},F.\u0275mod=D.\u0275\u0275defineNgModule({type:F}),F.\u0275inj=D.\u0275\u0275defineInjector({imports:[[a.O]]}),F})();var B=l(2051);let L=(()=>{class F{}return F.\u0275fac=function(I){return new(I||F)},F.\u0275mod=D.\u0275\u0275defineNgModule({type:F}),F.\u0275inj=D.\u0275\u0275defineInjector({imports:[[g.CommonModule,a.O,p,B.Y]]}),F})()},5028:(oe,N,l)=>{l.d(N,{M6:()=>x,Kb:()=>E});var g=l(1457),D=l(7777),B=l(9646),L=l(2843),F=l(4004),M=l(8505),I=l(262),S=l(8746),w=l(3099),T=l(7191);const P=new D.InjectionToken("SERVER_URL");let x=(()=>{class y{constructor(o,v,h,K){this.loader=o,this.platformId=v,this.serverUrl=h,this._document=K,this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map,this.document=this._document}addSvg(o,v){if(!this.iconsByUrl.has(o)){const h=this.document.createElement("DIV");h.innerHTML=v;const K=h.querySelector("svg");this.iconsByUrl.set(o,K)}}loadSvg(o,v=o){if(this.serverUrl&&null===o.match(/^(http(s)?):/)&&(v=o=this.serverUrl+o),this.iconsByUrl.has(v))return(0,B.of)(this.iconsByUrl.get(v));if(this.iconsLoadingByUrl.has(v))return this.iconsLoadingByUrl.get(v);const h=this.loader.getSvg(o).pipe((0,F.U)(K=>{const ue=this.document.createElement("DIV");return ue.innerHTML=K,ue.querySelector("svg")}),(0,M.b)(K=>this.iconsByUrl.set(v,K)),(0,I.K)(K=>(console.error(K),(0,L._)(K))),(0,S.x)(()=>this.iconsLoadingByUrl.delete(v)),(0,w.B)());return this.iconsLoadingByUrl.set(v,h),h}getSvgByName(o){return this.iconsByUrl.has(o)?(0,B.of)(this.iconsByUrl.get(o)):this.iconsLoadingByUrl.has(o)?this.iconsLoadingByUrl.get(o):(0,L._)(`No svg with name '${o}' has been loaded`)}unloadSvg(o){this.iconsByUrl.has(o)&&this.iconsByUrl.delete(o)}}return y.\u0275fac=function(o){return new(o||y)(D.\u0275\u0275inject(T.S),D.\u0275\u0275inject(D.PLATFORM_ID),D.\u0275\u0275inject(P,8),D.\u0275\u0275inject(g.DOCUMENT,8))},y.\u0275prov=D.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y})();const E={provide:x,deps:[[new D.Optional,new D.SkipSelf,x],T.S,[D.PLATFORM_ID],[new D.Optional,P],[new D.Optional,g.DOCUMENT]],useFactory:function(y,c,o,v,h){return y||new x(c,o,v,h)}}},9750:(oe,N,l)=>{l.d(N,{b:()=>L});var g=l(7777),D=l(5028);const p=["*"];class B{constructor(){this.loaded=!1}}let L=(()=>{class F{constructor(I,S,w,T,P){this.element=I,this.differs=S,this.renderer=w,this.iconReg=T,this.cdr=P,this.stretch=!1,this.applyClass=!1,this.svgClass="icon__svg",this.helper=new B,this._svgStyle=null}set svgStyle(I){this._svgStyle=I,!this.helper.differ&&I&&(this.helper.differ=this.differs.find(I).create())}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}ngOnChanges(I){const S=this.element.nativeElement.firstChild;(I.src||I.name)&&(this.helper.loaded&&this.destroy(),this.init()),I.stretch&&this.stylize(),I.applyClass&&(this.applyClass?this.setClass(S,null,this.klass):this.setClass(S,this.klass,null)),I.svgClass&&this.setClass(S,I.svgClass.previousValue,I.svgClass.currentValue),I.klass&&(this.setClass(this.element.nativeElement,I.klass.previousValue,I.klass.currentValue),this.setClass(S,I.klass.previousValue,this.applyClass?I.klass.currentValue:null)),I.viewBox&&(this.helper.loaded&&this.destroy(),this.init()),I.svgAriaLabel&&this.doAria(I.svgAriaLabel.currentValue)}ngDoCheck(){if(this.helper.svg&&this.helper.differ){const I=this.helper.differ.diff(this._svgStyle);I&&this.applyChanges(I)}}init(){if(this.name){const I=this.iconReg.getSvgByName(this.name);I&&(this.helper.icnSub=I.subscribe(S=>this.initSvg(S)))}else if(this.src){const I=this.iconReg.loadSvg(this.src);I&&(this.helper.icnSub=I.subscribe(S=>this.initSvg(S)))}else this.element.nativeElement.innerHTML="",this.cdr.markForCheck()}initSvg(I){!this.helper.loaded&&I&&(this.setSvg(I),this.resetDiffer())}destroy(){this.helper.icnSub&&this.helper.icnSub.unsubscribe(),this.helper=new B}resetDiffer(){this._svgStyle&&!this.helper.differ&&(this.helper.differ=this.differs.find(this._svgStyle).create())}setSvg(I){if(!this.helper.loaded&&I){this.helper.svg=I;const S=I.cloneNode(!0),w=this.element.nativeElement;if(w.innerHTML="",this.renderer.appendChild(w,S),this.helper.loaded=!0,this.copyNgContentAttribute(w,S),this.klass&&this.applyClass&&this.setClass(w.firstChild,null,this.klass),this.svgClass&&this.setClass(w.firstChild,null,this.svgClass),this.viewBox)if("auto"===this.viewBox){const T=S.getAttribute("width"),P=S.getAttribute("height");P&&T&&(this.renderer.setAttribute(S,"viewBox",`0 0 ${T} ${P}`),this.renderer.removeAttribute(S,"width"),this.renderer.removeAttribute(S,"height"))}else""!==this.viewBox&&(this.renderer.setAttribute(S,"viewBox",this.viewBox),this.renderer.removeAttribute(S,"width"),this.renderer.removeAttribute(S,"height"));this.stylize(),void 0===this.svgAriaLabel&&w.firstChild.hasAttribute("aria-label")||this.doAria(this.svgAriaLabel||""),this.cdr.markForCheck()}}copyNgContentAttribute(I,S){const w=I.attributes,T=w.length;for(let P=0;P<T;P+=1){const x=w.item(P);if(x&&x.name.startsWith("_ngcontent")){this.setNgContentAttribute(S,x.name);break}}}setNgContentAttribute(I,S){this.renderer.setAttribute(I,S,"");const w=I.childNodes.length;for(let T=0;T<w;T+=1){const P=I.childNodes[T];P instanceof Element&&this.setNgContentAttribute(P,S)}}stylize(){if(this.helper.svg){const I=this.element.nativeElement.firstChild;!0===this.stretch?this.renderer.setAttribute(I,"preserveAspectRatio","none"):!1===this.stretch&&this.renderer.removeAttribute(I,"preserveAspectRatio")}}applyChanges(I){I.forEachRemovedItem(S=>this.setStyle(S.key,null)),I.forEachAddedItem(S=>this.setStyle(S.key,S.currentValue)),I.forEachChangedItem(S=>this.setStyle(S.key,S.currentValue))}setStyle(I,S){const[w,T]=I.split("."),P=this.element.nativeElement.firstChild;null!==(S=null!==S&&T?`${S}${T}`:S)?this.renderer.setStyle(P,w,S):this.renderer.removeStyle(P,w)}setClass(I,S,w){if(I){if(S){const T=(Array.isArray(S)?S:S.split(" ")).filter(P=>P);for(const P of T)this.renderer.removeClass(I,P)}if(w){const T=(Array.isArray(w)?w:w.split(" ")).filter(P=>P);for(const P of T)this.renderer.addClass(I,P)}}}doAria(I){const S=this.element.nativeElement.firstChild;S&&(""===I?(this.renderer.setAttribute(S,"aria-hidden","true"),this.renderer.removeAttribute(S,"aria-label")):(this.renderer.removeAttribute(S,"aria-hidden"),this.renderer.setAttribute(S,"aria-label",I)))}}return F.\u0275fac=function(I){return new(I||F)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(g.KeyValueDiffers),g.\u0275\u0275directiveInject(g.Renderer2),g.\u0275\u0275directiveInject(D.M6),g.\u0275\u0275directiveInject(g.ChangeDetectorRef))},F.\u0275cmp=g.\u0275\u0275defineComponent({type:F,selectors:[["cf-svg-icon"]],inputs:{src:"src",name:"name",stretch:"stretch",applyClass:"applyClass",svgClass:"svgClass",klass:["class","klass"],viewBox:"viewBox",svgAriaLabel:"svgAriaLabel",svgStyle:"svgStyle"},features:[g.\u0275\u0275NgOnChangesFeature],ngContentSelectors:p,decls:1,vars:0,template:function(I,S){1&I&&(g.\u0275\u0275projectionDef(),g.\u0275\u0275projection(0))},encapsulation:2}),F})()},2051:(oe,N,l)=>{l.d(N,{Y:()=>F});var g=l(1457),D=l(7777),B=l(5028),L=l(7191);let F=(()=>{class M{static forRoot(S={}){return{ngModule:M,providers:[B.Kb,S.loader||{provide:L.S,useClass:L.o}]}}}return M.\u0275fac=function(S){return new(S||M)},M.\u0275mod=D.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=D.\u0275\u0275defineInjector({imports:[[g.CommonModule]]}),M})()},7191:(oe,N,l)=>{l.d(N,{S:()=>B,o:()=>L});var g=l(9283),D=l(7777);class B{}let L=(()=>{class F extends B{constructor(I){super(),this.http=I}getSvg(I){return this.http.get(I,{responseType:"text"})}}return F.\u0275fac=function(I){return new(I||F)(D.\u0275\u0275inject(g.HttpClient))},F.\u0275prov=D.\u0275\u0275defineInjectable({token:F,factory:F.\u0275fac}),F})()},1611:oe=>{oe.exports=function(l){return function(){var g=arguments.length;if(g){for(var a=[],D=-1;++D<g;)a[D]=arguments[D];return l.call(this,a)}return l.call(this,[])}}},5834:(oe,N,l)=>{var g=l(5203),a=l(5685),D=a(g("String.prototype.indexOf"));oe.exports=function(B,L){var F=g(B,!!L);return"function"==typeof F&&D(B,".prototype.")>-1?a(F):F}},5685:(oe,N,l)=>{var g=l(4444),a=l(5203),D=a("%Function.prototype.apply%"),p=a("%Function.prototype.call%"),B=a("%Reflect.apply%",!0)||g.call(p,D),L=a("%Object.getOwnPropertyDescriptor%",!0),F=a("%Object.defineProperty%",!0),M=a("%Math.max%");if(F)try{F({},"a",{value:1})}catch{F=null}oe.exports=function(w){var T=B(g,p,arguments);if(L&&F){var P=L(T,"length");P.configurable&&F(T,"length",{value:1+M(0,w.length-(arguments.length-1))})}return T};var I=function(){return B(g,D,arguments)};F?F(oe.exports,"apply",{value:I}):oe.exports.apply=I},7466:function(oe,N,l){var g;oe.exports=(g=l(7585),l(8319),l(9493),l(7865),l(3057),function(){var a=g,p=a.lib.BlockCipher,B=a.algo,L=[],F=[],M=[],I=[],S=[],w=[],T=[],P=[],x=[],R=[];!function(){for(var c=[],o=0;o<256;o++)c[o]=o<128?o<<1:o<<1^283;var v=0,h=0;for(o=0;o<256;o++){var K=h^h<<1^h<<2^h<<3^h<<4;L[v]=K=K>>>8^255&K^99,F[K]=v;var pe,ue=c[v],Ee=c[ue],ge=c[Ee];M[v]=(pe=257*c[K]^16843008*K)<<24|pe>>>8,I[v]=pe<<16|pe>>>16,S[v]=pe<<8|pe>>>24,w[v]=pe,T[K]=(pe=16843009*ge^65537*Ee^257*ue^16843008*v)<<24|pe>>>8,P[K]=pe<<16|pe>>>16,x[K]=pe<<8|pe>>>24,R[K]=pe,v?(v=ue^c[c[c[ge^ue]]],h^=c[c[h]]):v=h=1}}();var E=[0,1,2,4,8,16,32,64,128,27,54],y=B.AES=p.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var o=this._keyPriorReset=this._key,v=o.words,h=o.sigBytes/4,ue=4*((this._nRounds=h+6)+1),Ee=this._keySchedule=[],ge=0;ge<ue;ge++)ge<h?Ee[ge]=v[ge]:(c=Ee[ge-1],ge%h?h>6&&ge%h==4&&(c=L[c>>>24]<<24|L[c>>>16&255]<<16|L[c>>>8&255]<<8|L[255&c]):(c=L[(c=c<<8|c>>>24)>>>24]<<24|L[c>>>16&255]<<16|L[c>>>8&255]<<8|L[255&c],c^=E[ge/h|0]<<24),Ee[ge]=Ee[ge-h]^c);for(var pe=this._invKeySchedule=[],Y=0;Y<ue;Y++){if(ge=ue-Y,Y%4)var c=Ee[ge];else c=Ee[ge-4];pe[Y]=Y<4||ge<=4?c:T[L[c>>>24]]^P[L[c>>>16&255]]^x[L[c>>>8&255]]^R[L[255&c]]}}},encryptBlock:function(c,o){this._doCryptBlock(c,o,this._keySchedule,M,I,S,w,L)},decryptBlock:function(c,o){var v=c[o+1];c[o+1]=c[o+3],c[o+3]=v,this._doCryptBlock(c,o,this._invKeySchedule,T,P,x,R,F),v=c[o+1],c[o+1]=c[o+3],c[o+3]=v},_doCryptBlock:function(c,o,v,h,K,ue,Ee,ge){for(var pe=this._nRounds,Y=c[o]^v[0],$=c[o+1]^v[1],J=c[o+2]^v[2],G=c[o+3]^v[3],X=4,H=1;H<pe;H++){var ie=h[Y>>>24]^K[$>>>16&255]^ue[J>>>8&255]^Ee[255&G]^v[X++],we=h[$>>>24]^K[J>>>16&255]^ue[G>>>8&255]^Ee[255&Y]^v[X++],Be=h[J>>>24]^K[G>>>16&255]^ue[Y>>>8&255]^Ee[255&$]^v[X++],me=h[G>>>24]^K[Y>>>16&255]^ue[$>>>8&255]^Ee[255&J]^v[X++];Y=ie,$=we,J=Be,G=me}ie=(ge[Y>>>24]<<24|ge[$>>>16&255]<<16|ge[J>>>8&255]<<8|ge[255&G])^v[X++],we=(ge[$>>>24]<<24|ge[J>>>16&255]<<16|ge[G>>>8&255]<<8|ge[255&Y])^v[X++],Be=(ge[J>>>24]<<24|ge[G>>>16&255]<<16|ge[Y>>>8&255]<<8|ge[255&$])^v[X++],me=(ge[G>>>24]<<24|ge[Y>>>16&255]<<16|ge[$>>>8&255]<<8|ge[255&J])^v[X++],c[o]=ie,c[o+1]=we,c[o+2]=Be,c[o+3]=me},keySize:8});a.AES=p._createHelper(y)}(),g.AES)},3057:function(oe,N,l){var D,p,B,L,F,M,S,T,P,R,E,y,o,h,ue,Ee,pe,Y,g;oe.exports=(g=l(7585),l(7865),void(g.lib.Cipher||(D=g,p=D.lib,B=p.Base,L=p.WordArray,F=p.BufferedBlockAlgorithm,M=D.enc,S=M.Base64,T=D.algo.EvpKDF,P=p.Cipher=F.extend({cfg:B.extend(),createEncryptor:function($,J){return this.create(this._ENC_XFORM_MODE,$,J)},createDecryptor:function($,J){return this.create(this._DEC_XFORM_MODE,$,J)},init:function($,J,G){this.cfg=this.cfg.extend(G),this._xformMode=$,this._key=J,this.reset()},reset:function(){F.reset.call(this),this._doReset()},process:function($){return this._append($),this._process()},finalize:function($){return $&&this._append($),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function $(J){return"string"==typeof J?Y:Ee}return function(J){return{encrypt:function(G,X,H){return $(X).encrypt(J,G,X,H)},decrypt:function(G,X,H){return $(X).decrypt(J,G,X,H)}}}}()}),p.StreamCipher=P.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),R=D.mode={},E=p.BlockCipherMode=B.extend({createEncryptor:function($,J){return this.Encryptor.create($,J)},createDecryptor:function($,J){return this.Decryptor.create($,J)},init:function($,J){this._cipher=$,this._iv=J}}),y=R.CBC=function(){var $=E.extend();function J(G,X,H){var ie,we=this._iv;we?(ie=we,this._iv=undefined):ie=this._prevBlock;for(var Be=0;Be<H;Be++)G[X+Be]^=ie[Be]}return $.Encryptor=$.extend({processBlock:function(G,X){var H=this._cipher,ie=H.blockSize;J.call(this,G,X,ie),H.encryptBlock(G,X),this._prevBlock=G.slice(X,X+ie)}}),$.Decryptor=$.extend({processBlock:function(G,X){var H=this._cipher,ie=H.blockSize,we=G.slice(X,X+ie);H.decryptBlock(G,X),J.call(this,G,X,ie),this._prevBlock=we}}),$}(),o=(D.pad={}).Pkcs7={pad:function($,J){for(var G=4*J,X=G-$.sigBytes%G,H=X<<24|X<<16|X<<8|X,ie=[],we=0;we<X;we+=4)ie.push(H);var Be=L.create(ie,X);$.concat(Be)},unpad:function($){$.sigBytes-=255&$.words[$.sigBytes-1>>>2]}},p.BlockCipher=P.extend({cfg:P.cfg.extend({mode:y,padding:o}),reset:function(){var $;P.reset.call(this);var J=this.cfg,G=J.iv,X=J.mode;this._xformMode==this._ENC_XFORM_MODE?$=X.createEncryptor:($=X.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==$?this._mode.init(this,G&&G.words):(this._mode=$.call(X,this,G&&G.words),this._mode.__creator=$)},_doProcessBlock:function($,J){this._mode.processBlock($,J)},_doFinalize:function(){var $,J=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(J.pad(this._data,this.blockSize),$=this._process(!0)):($=this._process(!0),J.unpad($)),$},blockSize:4}),h=p.CipherParams=B.extend({init:function($){this.mixIn($)},toString:function($){return($||this.formatter).stringify(this)}}),ue=(D.format={}).OpenSSL={stringify:function($){var G=$.ciphertext,X=$.salt;return(X?L.create([1398893684,1701076831]).concat(X).concat(G):G).toString(S)},parse:function($){var J,G=S.parse($),X=G.words;return 1398893684==X[0]&&1701076831==X[1]&&(J=L.create(X.slice(2,4)),X.splice(0,4),G.sigBytes-=16),h.create({ciphertext:G,salt:J})}},Ee=p.SerializableCipher=B.extend({cfg:B.extend({format:ue}),encrypt:function($,J,G,X){X=this.cfg.extend(X);var H=$.createEncryptor(G,X),ie=H.finalize(J),we=H.cfg;return h.create({ciphertext:ie,key:G,iv:we.iv,algorithm:$,mode:we.mode,padding:we.padding,blockSize:$.blockSize,formatter:X.format})},decrypt:function($,J,G,X){return X=this.cfg.extend(X),J=this._parse(J,X.format),$.createDecryptor(G,X).finalize(J.ciphertext)},_parse:function($,J){return"string"==typeof $?J.parse($,this):$}}),pe=(D.kdf={}).OpenSSL={execute:function($,J,G,X){X||(X=L.random(8));var H=T.create({keySize:J+G}).compute($,X),ie=L.create(H.words.slice(J),4*G);return H.sigBytes=4*J,h.create({key:H,iv:ie,salt:X})}},Y=p.PasswordBasedCipher=Ee.extend({cfg:Ee.cfg.extend({kdf:pe}),encrypt:function($,J,G,X){var H=(X=this.cfg.extend(X)).kdf.execute(G,$.keySize,$.ivSize);X.iv=H.iv;var ie=Ee.encrypt.call(this,$,J,H.key,X);return ie.mixIn(H),ie},decrypt:function($,J,G,X){X=this.cfg.extend(X),J=this._parse(J,X.format);var H=X.kdf.execute(G,$.keySize,$.ivSize,J.salt);return X.iv=H.iv,Ee.decrypt.call(this,$,J,H.key,X)}}))))},7585:function(oe,N,l){var g;oe.exports=(g=g||function(a,D){var p;if("undefined"!=typeof window&&window.crypto&&(p=window.crypto),"undefined"!=typeof self&&self.crypto&&(p=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(p=globalThis.crypto),!p&&"undefined"!=typeof window&&window.msCrypto&&(p=window.msCrypto),!p&&"undefined"!=typeof global&&global.crypto&&(p=global.crypto),!p)try{p=l(2480)}catch{}var B=function(){if(p){if("function"==typeof p.getRandomValues)try{return p.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof p.randomBytes)try{return p.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},L=Object.create||function(){function c(){}return function(o){var v;return c.prototype=o,v=new c,c.prototype=null,v}}(),F={},M=F.lib={},I=M.Base={extend:function(c){var o=L(this);return c&&o.mixIn(c),(!o.hasOwnProperty("init")||this.init===o.init)&&(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var o in c)c.hasOwnProperty(o)&&(this[o]=c[o]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}},S=M.WordArray=I.extend({init:function(c,o){c=this.words=c||[],this.sigBytes=null!=o?o:4*c.length},toString:function(c){return(c||T).stringify(this)},concat:function(c){var o=this.words,v=c.words,h=this.sigBytes,K=c.sigBytes;if(this.clamp(),h%4)for(var ue=0;ue<K;ue++)o[h+ue>>>2]|=(v[ue>>>2]>>>24-ue%4*8&255)<<24-(h+ue)%4*8;else for(var ge=0;ge<K;ge+=4)o[h+ge>>>2]=v[ge>>>2];return this.sigBytes+=K,this},clamp:function(){var c=this.words,o=this.sigBytes;c[o>>>2]&=4294967295<<32-o%4*8,c.length=a.ceil(o/4)},clone:function(){var c=I.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var o=[],v=0;v<c;v+=4)o.push(B());return new S.init(o,c)}}),w=F.enc={},T=w.Hex={stringify:function(c){for(var o=c.words,v=c.sigBytes,h=[],K=0;K<v;K++){var ue=o[K>>>2]>>>24-K%4*8&255;h.push((ue>>>4).toString(16)),h.push((15&ue).toString(16))}return h.join("")},parse:function(c){for(var o=c.length,v=[],h=0;h<o;h+=2)v[h>>>3]|=parseInt(c.substr(h,2),16)<<24-h%8*4;return new S.init(v,o/2)}},P=w.Latin1={stringify:function(c){for(var o=c.words,v=c.sigBytes,h=[],K=0;K<v;K++)h.push(String.fromCharCode(o[K>>>2]>>>24-K%4*8&255));return h.join("")},parse:function(c){for(var o=c.length,v=[],h=0;h<o;h++)v[h>>>2]|=(255&c.charCodeAt(h))<<24-h%4*8;return new S.init(v,o)}},x=w.Utf8={stringify:function(c){try{return decodeURIComponent(escape(P.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return P.parse(unescape(encodeURIComponent(c)))}},R=M.BufferedBlockAlgorithm=I.extend({reset:function(){this._data=new S.init,this._nDataBytes=0},_append:function(c){"string"==typeof c&&(c=x.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var o,v=this._data,h=v.words,K=v.sigBytes,ue=this.blockSize,ge=K/(4*ue),pe=(ge=c?a.ceil(ge):a.max((0|ge)-this._minBufferSize,0))*ue,Y=a.min(4*pe,K);if(pe){for(var $=0;$<pe;$+=ue)this._doProcessBlock(h,$);o=h.splice(0,pe),v.sigBytes-=Y}return new S.init(o,Y)},clone:function(){var c=I.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0}),y=(M.Hasher=R.extend({cfg:I.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){R.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(o,v){return new c.init(v).finalize(o)}},_createHmacHelper:function(c){return function(o,v){return new y.HMAC.init(c,v).finalize(o)}}}),F.algo={});return F}(Math),g)},8319:function(oe,N,l){var g,p;oe.exports=(g=l(7585),p=g.lib.WordArray,g.enc.Base64={stringify:function(M){var I=M.words,S=M.sigBytes,w=this._map;M.clamp();for(var T=[],P=0;P<S;P+=3)for(var y=(I[P>>>2]>>>24-P%4*8&255)<<16|(I[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|I[P+2>>>2]>>>24-(P+2)%4*8&255,c=0;c<4&&P+.75*c<S;c++)T.push(w.charAt(y>>>6*(3-c)&63));var o=w.charAt(64);if(o)for(;T.length%4;)T.push(o);return T.join("")},parse:function(M){var I=M.length,S=this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var T=0;T<S.length;T++)w[S.charCodeAt(T)]=T}var P=S.charAt(64);if(P){var x=M.indexOf(P);-1!==x&&(I=x)}return function(M,I,S){for(var w=[],T=0,P=0;P<I;P++)if(P%4){var x=S[M.charCodeAt(P-1)]<<P%4*2,R=S[M.charCodeAt(P)]>>>6-P%4*2;w[T>>>2]|=(x|R)<<24-T%4*8,T++}return p.create(w,T)}(M,I,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},g.enc.Base64)},4384:function(oe,N,l){oe.exports=l(7585).enc.Utf8},7865:function(oe,N,l){var a,D,p,B,L,M,g;oe.exports=(g=l(7585),l(5162),l(3764),B=(D=(a=g).lib).WordArray,M=(L=a.algo).EvpKDF=(p=D.Base).extend({cfg:p.extend({keySize:4,hasher:L.MD5,iterations:1}),init:function(I){this.cfg=this.cfg.extend(I)},compute:function(I,S){for(var w,T=this.cfg,P=T.hasher.create(),x=B.create(),R=x.words,E=T.keySize,y=T.iterations;R.length<E;){w&&P.update(w),w=P.update(I).finalize(S),P.reset();for(var c=1;c<y;c++)w=P.finalize(w),P.reset();x.concat(w)}return x.sigBytes=4*E,x}}),a.EvpKDF=function(I,S,w){return M.create(w).compute(I,S)},g.EvpKDF)},3764:function(oe,N,l){var g,L;oe.exports=(g=l(7585),L=g.enc.Utf8,void(g.algo.HMAC=g.lib.Base.extend({init:function(I,S){I=this._hasher=new I.init,"string"==typeof S&&(S=L.parse(S));var w=I.blockSize,T=4*w;S.sigBytes>T&&(S=I.finalize(S)),S.clamp();for(var P=this._oKey=S.clone(),x=this._iKey=S.clone(),R=P.words,E=x.words,y=0;y<w;y++)R[y]^=1549556828,E[y]^=909522486;P.sigBytes=x.sigBytes=T,this.reset()},reset:function(){var I=this._hasher;I.reset(),I.update(this._iKey)},update:function(I){return this._hasher.update(I),this},finalize:function(I){var S=this._hasher,w=S.finalize(I);return S.reset(),S.finalize(this._oKey.clone().concat(w))}})))},9493:function(oe,N,l){var g;oe.exports=(g=l(7585),function(a){var D=g,p=D.lib,B=p.WordArray,L=p.Hasher,F=D.algo,M=[];!function(){for(var x=0;x<64;x++)M[x]=4294967296*a.abs(a.sin(x+1))|0}();var I=F.MD5=L.extend({_doReset:function(){this._hash=new B.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(x,R){for(var E=0;E<16;E++){var y=R+E,c=x[y];x[y]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var o=this._hash.words,v=x[R+0],h=x[R+1],K=x[R+2],ue=x[R+3],Ee=x[R+4],ge=x[R+5],pe=x[R+6],Y=x[R+7],$=x[R+8],J=x[R+9],G=x[R+10],X=x[R+11],H=x[R+12],ie=x[R+13],we=x[R+14],Be=x[R+15],me=o[0],_e=o[1],re=o[2],ce=o[3];me=S(me,_e,re,ce,v,7,M[0]),ce=S(ce,me,_e,re,h,12,M[1]),re=S(re,ce,me,_e,K,17,M[2]),_e=S(_e,re,ce,me,ue,22,M[3]),me=S(me,_e,re,ce,Ee,7,M[4]),ce=S(ce,me,_e,re,ge,12,M[5]),re=S(re,ce,me,_e,pe,17,M[6]),_e=S(_e,re,ce,me,Y,22,M[7]),me=S(me,_e,re,ce,$,7,M[8]),ce=S(ce,me,_e,re,J,12,M[9]),re=S(re,ce,me,_e,G,17,M[10]),_e=S(_e,re,ce,me,X,22,M[11]),me=S(me,_e,re,ce,H,7,M[12]),ce=S(ce,me,_e,re,ie,12,M[13]),re=S(re,ce,me,_e,we,17,M[14]),me=w(me,_e=S(_e,re,ce,me,Be,22,M[15]),re,ce,h,5,M[16]),ce=w(ce,me,_e,re,pe,9,M[17]),re=w(re,ce,me,_e,X,14,M[18]),_e=w(_e,re,ce,me,v,20,M[19]),me=w(me,_e,re,ce,ge,5,M[20]),ce=w(ce,me,_e,re,G,9,M[21]),re=w(re,ce,me,_e,Be,14,M[22]),_e=w(_e,re,ce,me,Ee,20,M[23]),me=w(me,_e,re,ce,J,5,M[24]),ce=w(ce,me,_e,re,we,9,M[25]),re=w(re,ce,me,_e,ue,14,M[26]),_e=w(_e,re,ce,me,$,20,M[27]),me=w(me,_e,re,ce,ie,5,M[28]),ce=w(ce,me,_e,re,K,9,M[29]),re=w(re,ce,me,_e,Y,14,M[30]),me=T(me,_e=w(_e,re,ce,me,H,20,M[31]),re,ce,ge,4,M[32]),ce=T(ce,me,_e,re,$,11,M[33]),re=T(re,ce,me,_e,X,16,M[34]),_e=T(_e,re,ce,me,we,23,M[35]),me=T(me,_e,re,ce,h,4,M[36]),ce=T(ce,me,_e,re,Ee,11,M[37]),re=T(re,ce,me,_e,Y,16,M[38]),_e=T(_e,re,ce,me,G,23,M[39]),me=T(me,_e,re,ce,ie,4,M[40]),ce=T(ce,me,_e,re,v,11,M[41]),re=T(re,ce,me,_e,ue,16,M[42]),_e=T(_e,re,ce,me,pe,23,M[43]),me=T(me,_e,re,ce,J,4,M[44]),ce=T(ce,me,_e,re,H,11,M[45]),re=T(re,ce,me,_e,Be,16,M[46]),me=P(me,_e=T(_e,re,ce,me,K,23,M[47]),re,ce,v,6,M[48]),ce=P(ce,me,_e,re,Y,10,M[49]),re=P(re,ce,me,_e,we,15,M[50]),_e=P(_e,re,ce,me,ge,21,M[51]),me=P(me,_e,re,ce,H,6,M[52]),ce=P(ce,me,_e,re,ue,10,M[53]),re=P(re,ce,me,_e,G,15,M[54]),_e=P(_e,re,ce,me,h,21,M[55]),me=P(me,_e,re,ce,$,6,M[56]),ce=P(ce,me,_e,re,Be,10,M[57]),re=P(re,ce,me,_e,pe,15,M[58]),_e=P(_e,re,ce,me,ie,21,M[59]),me=P(me,_e,re,ce,Ee,6,M[60]),ce=P(ce,me,_e,re,X,10,M[61]),re=P(re,ce,me,_e,K,15,M[62]),_e=P(_e,re,ce,me,J,21,M[63]),o[0]=o[0]+me|0,o[1]=o[1]+_e|0,o[2]=o[2]+re|0,o[3]=o[3]+ce|0},_doFinalize:function(){var x=this._data,R=x.words,E=8*this._nDataBytes,y=8*x.sigBytes;R[y>>>5]|=128<<24-y%32;var c=a.floor(E/4294967296),o=E;R[15+(y+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),R[14+(y+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),x.sigBytes=4*(R.length+1),this._process();for(var v=this._hash,h=v.words,K=0;K<4;K++){var ue=h[K];h[K]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8)}return v},clone:function(){var x=L.clone.call(this);return x._hash=this._hash.clone(),x}});function S(x,R,E,y,c,o,v){var h=x+(R&E|~R&y)+c+v;return(h<<o|h>>>32-o)+R}function w(x,R,E,y,c,o,v){var h=x+(R&y|E&~y)+c+v;return(h<<o|h>>>32-o)+R}function T(x,R,E,y,c,o,v){var h=x+(R^E^y)+c+v;return(h<<o|h>>>32-o)+R}function P(x,R,E,y,c,o,v){var h=x+(E^(R|~y))+c+v;return(h<<o|h>>>32-o)+R}D.MD5=L._createHelper(I),D.HmacMD5=L._createHmacHelper(I)}(Math),g.MD5)},5162:function(oe,N,l){var a,D,p,B,F,M,g;oe.exports=(g=l(7585),p=(D=(a=g).lib).WordArray,F=[],M=a.algo.SHA1=(B=D.Hasher).extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,S){for(var w=this._hash.words,T=w[0],P=w[1],x=w[2],R=w[3],E=w[4],y=0;y<80;y++){if(y<16)F[y]=0|I[S+y];else{var c=F[y-3]^F[y-8]^F[y-14]^F[y-16];F[y]=c<<1|c>>>31}var o=(T<<5|T>>>27)+E+F[y];o+=y<20?1518500249+(P&x|~P&R):y<40?1859775393+(P^x^R):y<60?(P&x|P&R|x&R)-1894007588:(P^x^R)-899497514,E=R,R=x,x=P<<30|P>>>2,P=T,T=o}w[0]=w[0]+T|0,w[1]=w[1]+P|0,w[2]=w[2]+x|0,w[3]=w[3]+R|0,w[4]=w[4]+E|0},_doFinalize:function(){var I=this._data,S=I.words,w=8*this._nDataBytes,T=8*I.sigBytes;return S[T>>>5]|=128<<24-T%32,S[14+(T+64>>>9<<4)]=Math.floor(w/4294967296),S[15+(T+64>>>9<<4)]=w,I.sigBytes=4*S.length,this._process(),this._hash},clone:function(){var I=B.clone.call(this);return I._hash=this._hash.clone(),I}}),a.SHA1=B._createHelper(M),a.HmacSHA1=B._createHmacHelper(M),g.SHA1)},6952:(oe,N,l)=>{var g=l(1356),a=l(3407),D=l(2e3),p=l(2342),B=l(9235),L=l(2374),F=Date.prototype.getTime;function I(T){return null==T}function S(T){return!(!T||"object"!=typeof T||"number"!=typeof T.length||"function"!=typeof T.copy||"function"!=typeof T.slice||T.length>0&&"number"!=typeof T[0])}oe.exports=function M(T,P,x){var R=x||{};return!!(R.strict?D(T,P):T===P)||(!T||!P||"object"!=typeof T&&"object"!=typeof P?R.strict?D(T,P):T==P:function(T,P,x){var R,E;if(typeof T!=typeof P||I(T)||I(P)||T.prototype!==P.prototype||a(T)!==a(P))return!1;var y=p(T),c=p(P);if(y!==c)return!1;if(y||c)return T.source===P.source&&B(T)===B(P);if(L(T)&&L(P))return F.call(T)===F.call(P);var o=S(T),v=S(P);if(o!==v)return!1;if(o||v){if(T.length!==P.length)return!1;for(R=0;R<T.length;R++)if(T[R]!==P[R])return!1;return!0}if(typeof T!=typeof P)return!1;try{var h=g(T),K=g(P)}catch{return!1}if(h.length!==K.length)return!1;for(h.sort(),K.sort(),R=h.length-1;R>=0;R--)if(h[R]!=K[R])return!1;for(R=h.length-1;R>=0;R--)if(!M(T[E=h[R]],P[E],x))return!1;return!0}(T,P,R))}},4949:oe=>{oe.exports=function N(l){return Object.freeze(l),Object.getOwnPropertyNames(l).forEach(function(g){l.hasOwnProperty(g)&&null!==l[g]&&("object"==typeof l[g]||"function"==typeof l[g])&&!Object.isFrozen(l[g])&&N(l[g])}),l}},2358:(oe,N,l)=>{var g=l(1356),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),D=Object.prototype.toString,p=Array.prototype.concat,B=Object.defineProperty,M=B&&function(){var w={};try{for(var T in B(w,"x",{enumerable:!1,value:w}),w)return!1;return w.x===w}catch{return!1}}(),I=function(w,T,P,x){T in w&&(!function(w){return"function"==typeof w&&"[object Function]"===D.call(w)}(x)||!x())||(M?B(w,T,{configurable:!0,enumerable:!1,value:P,writable:!0}):w[T]=P)},S=function(w,T){var P=arguments.length>2?arguments[2]:{},x=g(T);a&&(x=p.call(x,Object.getOwnPropertySymbols(T)));for(var R=0;R<x.length;R+=1)I(w,x[R],T[x[R]],P[x[R]])};S.supportsDescriptors=!!M,oe.exports=S},9069:oe=>{var g,N="object"==typeof Reflect?Reflect:null,l=N&&"function"==typeof N.apply?N.apply:function(v,h,K){return Function.prototype.apply.call(v,h,K)};g=N&&"function"==typeof N.ownKeys?N.ownKeys:Object.getOwnPropertySymbols?function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:function(v){return Object.getOwnPropertyNames(v)};var D=Number.isNaN||function(v){return v!=v};function p(){p.init.call(this)}oe.exports=p,oe.exports.once=function(o,v){return new Promise(function(h,K){function ue(ge){o.removeListener(v,Ee),K(ge)}function Ee(){"function"==typeof o.removeListener&&o.removeListener("error",ue),h([].slice.call(arguments))}c(o,v,Ee,{once:!0}),"error"!==v&&function(o,v,h){"function"==typeof o.on&&c(o,"error",v,{once:!0})}(o,ue)})},p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var B=10;function L(o){if("function"!=typeof o)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}function F(o){return void 0===o._maxListeners?p.defaultMaxListeners:o._maxListeners}function M(o,v,h,K){var ue,Ee,ge;if(L(h),void 0===(Ee=o._events)?(Ee=o._events=Object.create(null),o._eventsCount=0):(void 0!==Ee.newListener&&(o.emit("newListener",v,h.listener?h.listener:h),Ee=o._events),ge=Ee[v]),void 0===ge)ge=Ee[v]=h,++o._eventsCount;else if("function"==typeof ge?ge=Ee[v]=K?[h,ge]:[ge,h]:K?ge.unshift(h):ge.push(h),(ue=F(o))>0&&ge.length>ue&&!ge.warned){ge.warned=!0;var pe=new Error("Possible EventEmitter memory leak detected. "+ge.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");pe.name="MaxListenersExceededWarning",pe.emitter=o,pe.type=v,pe.count=ge.length,function(o){console&&console.warn&&console.warn(o)}(pe)}return o}function I(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(o,v,h){var K={fired:!1,wrapFn:void 0,target:o,type:v,listener:h},ue=I.bind(K);return ue.listener=h,K.wrapFn=ue,ue}function w(o,v,h){var K=o._events;if(void 0===K)return[];var ue=K[v];return void 0===ue?[]:"function"==typeof ue?h?[ue.listener||ue]:[ue]:h?function(o){for(var v=new Array(o.length),h=0;h<v.length;++h)v[h]=o[h].listener||o[h];return v}(ue):P(ue,ue.length)}function T(o){var v=this._events;if(void 0!==v){var h=v[o];if("function"==typeof h)return 1;if(void 0!==h)return h.length}return 0}function P(o,v){for(var h=new Array(v),K=0;K<v;++K)h[K]=o[K];return h}function c(o,v,h,K){if("function"==typeof o.on)K.once?o.once(v,h):o.on(v,h);else{if("function"!=typeof o.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o);o.addEventListener(v,function ue(Ee){K.once&&o.removeEventListener(v,ue),h(Ee)})}}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return B},set:function(o){if("number"!=typeof o||o<0||D(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");B=o}}),p.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(v){if("number"!=typeof v||v<0||D(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this},p.prototype.getMaxListeners=function(){return F(this)},p.prototype.emit=function(v){for(var h=[],K=1;K<arguments.length;K++)h.push(arguments[K]);var ue="error"===v,Ee=this._events;if(void 0!==Ee)ue=ue&&void 0===Ee.error;else if(!ue)return!1;if(ue){var ge;if(h.length>0&&(ge=h[0]),ge instanceof Error)throw ge;var pe=new Error("Unhandled error."+(ge?" ("+ge.message+")":""));throw pe.context=ge,pe}var Y=Ee[v];if(void 0===Y)return!1;if("function"==typeof Y)l(Y,this,h);else{var $=Y.length,J=P(Y,$);for(K=0;K<$;++K)l(J[K],this,h)}return!0},p.prototype.on=p.prototype.addListener=function(v,h){return M(this,v,h,!1)},p.prototype.prependListener=function(v,h){return M(this,v,h,!0)},p.prototype.once=function(v,h){return L(h),this.on(v,S(this,v,h)),this},p.prototype.prependOnceListener=function(v,h){return L(h),this.prependListener(v,S(this,v,h)),this},p.prototype.off=p.prototype.removeListener=function(v,h){var K,ue,Ee,ge,pe;if(L(h),void 0===(ue=this._events))return this;if(void 0===(K=ue[v]))return this;if(K===h||K.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete ue[v],ue.removeListener&&this.emit("removeListener",v,K.listener||h));else if("function"!=typeof K){for(Ee=-1,ge=K.length-1;ge>=0;ge--)if(K[ge]===h||K[ge].listener===h){pe=K[ge].listener,Ee=ge;break}if(Ee<0)return this;0===Ee?K.shift():function(o,v){for(;v+1<o.length;v++)o[v]=o[v+1];o.pop()}(K,Ee),1===K.length&&(ue[v]=K[0]),void 0!==ue.removeListener&&this.emit("removeListener",v,pe||h)}return this},p.prototype.removeAllListeners=function(v){var h,K,ue;if(void 0===(K=this._events))return this;if(void 0===K.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==K[v]&&(0==--this._eventsCount?this._events=Object.create(null):delete K[v]),this;if(0===arguments.length){var ge,Ee=Object.keys(K);for(ue=0;ue<Ee.length;++ue)"removeListener"!==(ge=Ee[ue])&&this.removeAllListeners(ge);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=K[v]))this.removeListener(v,h);else if(void 0!==h)for(ue=h.length-1;ue>=0;ue--)this.removeListener(v,h[ue]);return this},p.prototype.listeners=function(v){return w(this,v,!0)},p.prototype.rawListeners=function(v){return w(this,v,!1)},p.listenerCount=function(o,v){return"function"==typeof o.listenerCount?o.listenerCount(v):T.call(o,v)},p.prototype.listenerCount=T,p.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},2559:oe=>{oe.exports=function N(l,g){if(l===g)return!0;if(l&&g&&"object"==typeof l&&"object"==typeof g){if(l.constructor!==g.constructor)return!1;var a,D,p;if(Array.isArray(l)){if((a=l.length)!=g.length)return!1;for(D=a;0!=D--;)if(!N(l[D],g[D]))return!1;return!0}if(l.constructor===RegExp)return l.source===g.source&&l.flags===g.flags;if(l.valueOf!==Object.prototype.valueOf)return l.valueOf()===g.valueOf();if(l.toString!==Object.prototype.toString)return l.toString()===g.toString();if((a=(p=Object.keys(l)).length)!==Object.keys(g).length)return!1;for(D=a;0!=D--;)if(!Object.prototype.hasOwnProperty.call(g,p[D]))return!1;for(D=a;0!=D--;){var B=p[D];if(!N(l[B],g[B]))return!1}return!0}return l!=l&&g!=g}},9076:oe=>{var N=Object.prototype.hasOwnProperty,l=Object.prototype.toString;oe.exports=function(a,D,p){if("[object Function]"!==l.call(D))throw new TypeError("iterator must be a function");var B=a.length;if(B===+B)for(var L=0;L<B;L++)D.call(p,a[L],L,a);else for(var F in a)N.call(a,F)&&D.call(p,a[F],F,a)}},3457:oe=>{var N="Function.prototype.bind called on incompatible ",l=Array.prototype.slice,g=Object.prototype.toString,a="[object Function]";oe.exports=function(p){var B=this;if("function"!=typeof B||g.call(B)!==a)throw new TypeError(N+B);for(var F,L=l.call(arguments,1),M=function(){if(this instanceof F){var P=B.apply(this,L.concat(l.call(arguments)));return Object(P)===P?P:this}return B.apply(p,L.concat(l.call(arguments)))},I=Math.max(0,B.length-L.length),S=[],w=0;w<I;w++)S.push("$"+w);if(F=Function("binder","return function ("+S.join(",")+"){ return binder.apply(this,arguments); }")(M),B.prototype){var T=function(){};T.prototype=B.prototype,F.prototype=new T,T.prototype=null}return F}},4444:(oe,N,l)=>{var g=l(3457);oe.exports=Function.prototype.bind||g},1227:(oe,N,l)=>{for(var g=l(6788),a=l(7549),D=/[\{\[]/,p=/[\}\]]/,B=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],L={},F=0;F<B.length;F++)L[B[F]]=!0;var M=function(w){return a(w)&&!L.hasOwnProperty(w)},I={s:function(w){return""+w},d:function(w){return""+Number(w)},o:function(w){return JSON.stringify(w)}},S=function(){var w=[],T=0,P={},x=function(y){for(var c="";c.length<2*T;)c+="  ";w.push(c+y)},R=function(y){return p.test(y.trim()[0])&&D.test(y[y.length-1])?(T--,x(y),void T++):D.test(y[y.length-1])?(x(y),void T++):p.test(y.trim()[0])?(T--,void x(y)):void x(y)},E=function(y){if(!y)return E;if(1===arguments.length&&y.indexOf("\n")>-1)for(var c=y.trim().split("\n"),o=0;o<c.length;o++)R(c[o].trim());else R(g.format.apply(g,arguments));return E};return E.scope={},E.formats=I,E.sym=function(y){return(!y||!M(y))&&(y="tmp"),P[y]||(P[y]=0),y+(P[y]++||"")},E.property=function(y,c){return 1===arguments.length&&(c=y,y=""),a(c+="")?y?y+"."+c:c:y?y+"["+JSON.stringify(c)+"]":JSON.stringify(c)},E.toString=function(){return w.join("\n")},E.toFunction=function(y){y||(y={});var c="return ("+E.toString()+")";Object.keys(E.scope).forEach(function(h){y[h]||(y[h]=E.scope[h])});var o=Object.keys(y).map(function(h){return h}),v=o.map(function(h){return y[h]});return Function.apply(null,o.concat(c)).apply(null,v)},arguments.length&&E.apply(null,arguments),E};S.formats=I,oe.exports=S},2562:(oe,N,l)=>{var g=l(7549),a=function(D,p){return g(p)?D+"."+p:D+"["+JSON.stringify(p)+"]"};a.valid=g,a.property=function(D){return g(D)?D:JSON.stringify(D)},oe.exports=a},5203:(oe,N,l)=>{var g,a=SyntaxError,D=Function,p=TypeError,B=function(pe){try{return D('"use strict"; return ('+pe+").constructor;")()}catch{}},L=Object.getOwnPropertyDescriptor;if(L)try{L({},"")}catch{L=null}var F=function(){throw new p},M=L?function(){try{return F}catch{try{return L(arguments,"callee").get}catch{return F}}}():F,I=l(2969)(),S=Object.getPrototypeOf||function(pe){return pe.__proto__},w={},T="undefined"==typeof Uint8Array?g:S(Uint8Array),P={"%AggregateError%":"undefined"==typeof AggregateError?g:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?g:ArrayBuffer,"%ArrayIteratorPrototype%":I?S([][Symbol.iterator]()):g,"%AsyncFromSyncIteratorPrototype%":g,"%AsyncFunction%":w,"%AsyncGenerator%":w,"%AsyncGeneratorFunction%":w,"%AsyncIteratorPrototype%":w,"%Atomics%":"undefined"==typeof Atomics?g:Atomics,"%BigInt%":"undefined"==typeof BigInt?g:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?g:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?g:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?g:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?g:FinalizationRegistry,"%Function%":D,"%GeneratorFunction%":w,"%Int8Array%":"undefined"==typeof Int8Array?g:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?g:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?g:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I?S(S([][Symbol.iterator]())):g,"%JSON%":"object"==typeof JSON?JSON:g,"%Map%":"undefined"==typeof Map?g:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&I?S((new Map)[Symbol.iterator]()):g,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?g:Promise,"%Proxy%":"undefined"==typeof Proxy?g:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?g:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?g:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&I?S((new Set)[Symbol.iterator]()):g,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?g:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I?S(""[Symbol.iterator]()):g,"%Symbol%":I?Symbol:g,"%SyntaxError%":a,"%ThrowTypeError%":M,"%TypedArray%":T,"%TypeError%":p,"%Uint8Array%":"undefined"==typeof Uint8Array?g:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?g:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?g:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?g:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?g:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?g:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?g:WeakSet},x=function pe(Y){var $;if("%AsyncFunction%"===Y)$=B("async function () {}");else if("%GeneratorFunction%"===Y)$=B("function* () {}");else if("%AsyncGeneratorFunction%"===Y)$=B("async function* () {}");else if("%AsyncGenerator%"===Y){var J=pe("%AsyncGeneratorFunction%");J&&($=J.prototype)}else if("%AsyncIteratorPrototype%"===Y){var G=pe("%AsyncGenerator%");G&&($=S(G.prototype))}return P[Y]=$,$},R={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=l(4444),y=l(3164),c=E.call(Function.call,Array.prototype.concat),o=E.call(Function.apply,Array.prototype.splice),v=E.call(Function.call,String.prototype.replace),h=E.call(Function.call,String.prototype.slice),K=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ue=/\\(\\)?/g,Ee=function(Y){var $=h(Y,0,1),J=h(Y,-1);if("%"===$&&"%"!==J)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===J&&"%"!==$)throw new a("invalid intrinsic syntax, expected opening `%`");var G=[];return v(Y,K,function(X,H,ie,we){G[G.length]=ie?v(we,ue,"$1"):H||X}),G},ge=function(Y,$){var G,J=Y;if(y(R,J)&&(J="%"+(G=R[J])[0]+"%"),y(P,J)){var X=P[J];if(X===w&&(X=x(J)),void 0===X&&!$)throw new p("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:G,name:J,value:X}}throw new a("intrinsic "+Y+" does not exist!")};oe.exports=function(Y,$){if("string"!=typeof Y||0===Y.length)throw new p("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof $)throw new p('"allowMissing" argument must be a boolean');var J=Ee(Y),G=J.length>0?J[0]:"",X=ge("%"+G+"%",$),H=X.name,ie=X.value,we=!1,Be=X.alias;Be&&(G=Be[0],o(J,c([0,1],Be)));for(var me=1,_e=!0;me<J.length;me+=1){var re=J[me],ce=h(re,0,1),Te=h(re,-1);if(('"'===ce||"'"===ce||"`"===ce||'"'===Te||"'"===Te||"`"===Te)&&ce!==Te)throw new a("property names with quotes must have matching quotes");if(("constructor"===re||!_e)&&(we=!0),y(P,H="%"+(G+="."+re)+"%"))ie=P[H];else if(null!=ie){if(!(re in ie)){if(!$)throw new p("base intrinsic for "+Y+" exists, but the property is not available.");return}if(L&&me+1>=J.length){var Ne=L(ie,re);ie=(_e=!!Ne)&&"get"in Ne&&!("originalValue"in Ne.get)?Ne.get:ie[re]}else _e=y(ie,re),ie=ie[re];_e&&!we&&(P[H]=ie)}}return ie}},2969:(oe,N,l)=>{var g="undefined"!=typeof Symbol&&Symbol,a=l(1983);oe.exports=function(){return"function"==typeof g&&"function"==typeof Symbol&&"symbol"==typeof g("foo")&&"symbol"==typeof Symbol("bar")&&a()}},1983:oe=>{oe.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var l={},g=Symbol("test"),a=Object(g);if("string"==typeof g||"[object Symbol]"!==Object.prototype.toString.call(g)||"[object Symbol]"!==Object.prototype.toString.call(a))return!1;for(g in l[g]=42,l)return!1;if("function"==typeof Object.keys&&0!==Object.keys(l).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(l).length)return!1;var p=Object.getOwnPropertySymbols(l);if(1!==p.length||p[0]!==g||!Object.prototype.propertyIsEnumerable.call(l,g))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var B=Object.getOwnPropertyDescriptor(l,g);if(42!==B.value||!0!==B.enumerable)return!1}return!0}},6259:(oe,N,l)=>{var g=l(1983);oe.exports=function(){return g()&&!!Symbol.toStringTag}},3164:(oe,N,l)=>{var g=l(4444);oe.exports=g.call(Function.call,Object.prototype.hasOwnProperty)},3894:oe=>{oe.exports="function"==typeof Object.create?function(l,g){g&&(l.super_=g,l.prototype=Object.create(g.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:function(l,g){if(g){l.super_=g;var a=function(){};a.prototype=g.prototype,l.prototype=new a,l.prototype.constructor=l}}},3407:(oe,N,l)=>{var g=l(6259)(),D=l(5834)("Object.prototype.toString"),p=function(M){return!(g&&M&&"object"==typeof M&&Symbol.toStringTag in M)&&"[object Arguments]"===D(M)},B=function(M){return!!p(M)||null!==M&&"object"==typeof M&&"number"==typeof M.length&&M.length>=0&&"[object Array]"!==D(M)&&"[object Function]"===D(M.callee)},L=function(){return p(arguments)}();p.isLegacyArguments=B,oe.exports=L?p:B},2374:(oe,N,l)=>{var g=Date.prototype.getDay,D=Object.prototype.toString,B=l(6259)();oe.exports=function(F){return"object"==typeof F&&null!==F&&(B?function(F){try{return g.call(F),!0}catch{return!1}}(F):"[object Date]"===D.call(F))}},9456:oe=>{oe.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&!!process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},110:(oe,N,l)=>{var F,g=Object.prototype.toString,a=Function.prototype.toString,D=/^\s*(?:function)?\*/,p=l(6259)(),B=Object.getPrototypeOf;oe.exports=function(I){if("function"!=typeof I)return!1;if(D.test(a.call(I)))return!0;if(!p)return"[object GeneratorFunction]"===g.call(I);if(!B)return!1;if(void 0===F){var w=function(){if(!p)return!1;try{return Function("return function*() {}")()}catch{}}();F=!!w&&B(w)}return B(I)===F}},1570:oe=>{var N=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l=/\/\d{1,3}(?=%|$)/,g=/\//,a=/%.*$/,D=/([^0-9a-f:/%])/i,p=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/i;function B(M){if(!N.test(M))return!1;var I=M.split(".");if(4!==I.length||"0"===I[0][0]&&I[0].length>1||"0"===I[1][0]&&I[1].length>1||"0"===I[2][0]&&I[2].length>1||"0"===I[3][0]&&I[3].length>1)return!1;var S=Number(I[0]),w=Number(I[1]),T=Number(I[2]),P=Number(I[3]);return S>=0&&S<256&&w>=0&&w<256&&T>=0&&T<256&&P>=0&&P<256}function L(M){var I=M.replace(l,""),S=M.length!==I.length;if(S||!S&&g.test(M))return!1;var w=I.replace(a,""),T=w.lastIndexOf(":");if(-1===T)return!1;var R=B(w.substring(T+1))?w.substring(0,T+1)+"1234:5678":w;if(D.test(R)||p.test(R))return!1;var E=R.split("::");if(E.length>2)return!1;if(2===E.length){var y=""===E[0]?[]:E[0].split(":"),c=""===E[1]?[]:E[1].split(":");if(8-(y.length+c.length)<=0)return!1}else if(8!==R.split(":").length)return!1;return!0}function F(M){return B(M)||L(M)}oe.exports=function(I){if(I||(I={}),4===I.version)return B;if(6===I.version)return L;if(null==I.version)return F;throw new Error("Unknown version: "+I.version)},oe.exports.__all_regexes__=[N,l,g,a,D,p]},1367:(oe,N,l)=>{var g=l(1570),a=/\s/,D=/^[a-zA-Z0-9.-]+$/,p=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/,B=/^\+[0-9][0-9 ]{5,27}[0-9]$/,L=/ {2}/,F=/ /g;N["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(?:\.\d+|)([zZ]|[+-]\d{2}:\d{2})$/,N.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,N.time=/^\d{2}:\d{2}:\d{2}$/,N.email=function(M){return-1!==M.indexOf("@")&&!a.test(M)},N["ip-address"]=N.ipv4=g({version:4}),N.ipv6=g({version:6}),N.uri=/^[a-zA-Z][a-zA-Z0-9+\-.]*:[^\s]*$/,N.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,N.hostname=function(M){if(!D.test(M))return!1;for(var I=M.split("."),S=0;S<I.length;S++)if(!p.test(I[S]))return!1;return!0},N.alpha=/^[a-zA-Z]+$/,N.alphanumeric=/^[a-zA-Z0-9]+$/,N.style=/.:\s*[^;]/g,N.phone=function(M){if(!B.test(M)||L.test(M))return!1;var I=M.substring(1).replace(F,"").length;return I>=7&&I<=15},N["utc-millisec"]=/^[0-9]{1,15}\.?[0-9]{0,15}$/},8167:(oe,N,l)=>{var g=l(2562),a=l(1227),D=l(6936),p=l(1995),B=l(1367),F={any:function(){return"true"},null:function(T){return T+" === null"},boolean:function(T){return"typeof "+T+' === "boolean"'},array:function(T){return"Array.isArray("+T+")"},object:function(T){return"typeof "+T+' === "object" && '+T+" && !Array.isArray("+T+")"},number:function(T){return"typeof "+T+' === "number" && isFinite('+T+")"},integer:function(T){return"typeof "+T+' === "number" && (Math.floor('+T+") === "+T+" || "+T+" > 9007199254740992 || "+T+" < -9007199254740992)"},string:function(T){return"typeof "+T+' === "string"'}},M=function(T,P){P=Math.min(-1===P?T.length:P,T.length);for(var x=[],R=0;R<P;R++)x.push("object"==typeof T[R]?JSON.stringify(T[R]):T[R]);for(R=1;R<x.length;R++)if(x.indexOf(x[R])!==R)return!1;return!0},I=function(T,P){var R=(0|P)!==P?Math.pow(10,P.toString().split(".").pop().length):1;return!(R>1?((0|T)!==T?Math.pow(10,T.toString().split(".").pop().length):1)>R||Math.round(R*T)%(R*P):T%P)},S=function(T,P,x){return x>-1&&P.length>x||T.test(P)},w=function(T,P,x,R,E){var y=E?p(B,E.formats):B,c={unique:M,formats:y,isMultipleOf:I,testLimitedRegex:S},o=!!E&&!!E.verbose,v=!(!E||void 0===E.greedy)&&E.greedy,h={},K=[],ue=function(X){var H=X+(h[X]=(h[X]||0)+1);return K.push(H),H},Ee=function(X){var H=JSON.stringify(X);try{for(var ie=/\[([^\[\]"]+)\]/;ie.test(H);)H=H.replace(ie,we);return H}catch{return JSON.stringify(X)}function we(Be,me){if(-1===K.indexOf(me))throw new Error("Unreplaceable");return'." + '+me+' + "'}},ge={},pe=function(X){if(ge[X])return ge[X];var H=ue("pattern");return c[H]=new RegExp(X),ge[X]=H,H},Y=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],$=function(){var X=Y.shift();return Y.push(X+X[0]),K.push(X),X},J=function(X,H,ie,we,Be){var me=H.properties,_e=H.type,re=!1;Array.isArray(H.items)&&(me={},H.items.forEach(function(Rt,kt){me[kt]=Rt}),_e="array",re=!0);var ce=0,Te=function(Rt,kt,Mt){G("errors++"),!0===ie&&(G("if (validate.errors === null) validate.errors = []"),o?G("validate.errors.push({field:%s,message:%s,value:%s,type:%s,schemaPath:%s})",Ee(kt||X),JSON.stringify(Rt),Mt||X,JSON.stringify(_e),JSON.stringify(Be)):G("validate.errors.push({field:%s,message:%s})",Ee(kt||X),JSON.stringify(Rt)))};!0===H.required?(ce++,G("if (%s === undefined) {",X),Te("is required"),G("} else {")):(ce++,G("if (%s !== undefined) {",X));var Ne=[].concat(_e).map(function(Rt){if(Rt&&!F.hasOwnProperty(Rt))throw new Error("Unknown type: "+Rt);return F[Rt||"any"](X)}).join(" || ")||"true";if("true"!==Ne&&(ce++,G("if (!(%s)) {",Ne),Te("is the wrong type"),G("} else {")),re)if(!1===H.additionalItems)G("if (%s.length > %d) {",X,H.items.length),Te("has additional items"),G("}");else if(H.additionalItems){var Qe=$();G("for (var %s = %d; %s < %s.length; %s++) {",Qe,H.items.length,Qe,X,Qe),J(X+"["+Qe+"]",H.additionalItems,ie,we,Be.concat("additionalItems")),G("}")}if(H.format&&y[H.format]){"string"!==_e&&B[H.format]&&G("if (%s) {",F.string(X));var ut=ue("format");c[ut]=y[H.format],"function"==typeof c[ut]?G("if (!%s(%s)) {",ut,X):G("if (!testLimitedRegex(%s, %s, %d)) {",ut,X,void 0===H.maxLength?-1:H.maxLength),Te("must be "+H.format+" format"),G("}"),"string"!==_e&&B[H.format]&&G("}")}if(Array.isArray(H.required)&&(ut=ue("missing"),G("var %s = 0",ut),G("if ((%s)) {","object"!==_e?F.object(X):"true"),H.required.map(function(kt){var Mt=g(X,kt);G("if (%s === undefined) {",Mt),Te("is required",Mt),G("%s++",ut),G("}")}),G("}"),v||(G("if (%s === 0) {",ut),ce++)),H.uniqueItems&&("array"!==_e&&G("if (%s) {",F.array(X)),G("if (!(unique(%s, %d))) {",X,H.maxItems||-1),Te("must be unique"),G("}"),"array"!==_e&&G("}")),H.enum){var ct=H.enum.some(function(Rt){return"object"==typeof Rt});G("if (%s) {",H.enum.map(ct?function(Rt){return"JSON.stringify("+X+") !== JSON.stringify("+JSON.stringify(Rt)+")"}:function(Rt){return X+" !== "+JSON.stringify(Rt)}).join(" && ")||"false"),Te("must be an enum value"),G("}")}if(H.dependencies&&("object"!==_e&&G("if (%s) {",F.object(X)),Object.keys(H.dependencies).forEach(function(Rt){var kt=H.dependencies[Rt];"string"==typeof kt&&(kt=[kt]),Array.isArray(kt)&&(G("if (%s !== undefined && !(%s)) {",g(X,Rt),kt.map(function(en){return g(X,en)+" !== undefined"}).join(" && ")||"true"),Te("dependencies not set"),G("}")),"object"==typeof kt&&(G("if (%s !== undefined) {",g(X,Rt)),J(X,kt,ie,we,Be.concat(["dependencies",Rt])),G("}"))}),"object"!==_e&&G("}")),H.additionalProperties||!1===H.additionalProperties){"object"!==_e&&G("if (%s) {",F.object(X)),Qe=$();var Tt=ue("keys"),_r=Object.keys(me||{}).map(function(kt){return Tt+"["+Qe+"] !== "+JSON.stringify(kt)}).concat(Object.keys(H.patternProperties||{}).map(function(kt){return"!"+pe(kt)+".test("+Tt+"["+Qe+"])"})).join(" && ")||"true";G("var %s = Object.keys(%s)",Tt,X)("for (var %s = 0; %s < %s.length; %s++) {",Qe,Qe,Tt,Qe)("if (%s) {",_r),!1===H.additionalProperties?(we&&G("delete %s",X+"["+Tt+"["+Qe+"]]"),Te("has additional properties",null,JSON.stringify(X+".")+" + "+Tt+"["+Qe+"]")):J(X+"["+Tt+"["+Qe+"]]",H.additionalProperties,ie,we,Be.concat(["additionalProperties"])),G("}")("}"),"object"!==_e&&G("}")}if(H.$ref){var cr=function(T,P,x){var R=function(h){return h&&h.id===x?h:"object"==typeof h&&h?Object.keys(h).reduce(function(K,ue){return K||R(h[ue])},null):null},E=R(T);if(E)return E;x=(x=x.replace(/^#/,"")).replace(/\/$/,"");try{return D.get(T,decodeURI(x))}catch{var c,y=x.indexOf("#");if(0!==y)if(-1===y)c=P[x];else{c=P[x.slice(0,y)];var v=x.slice(y).replace(/^#/,"");try{return D.get(c,v)}catch{}}else c=P[x];return c||null}}(x,E&&E.schemas||{},H.$ref);if(cr){var pr=P[H.$ref];pr||(P[H.$ref]=function(Mt){return pr(Mt)},pr=w(cr,P,x,!1,E)),ut=ue("ref"),c[ut]=pr,G("if (!(%s(%s))) {",ut,X),Te("referenced schema does not match"),G("}")}}if(H.not){var ir=ue("prev");G("var %s = errors",ir),J(X,H.not,!1,we,Be.concat("not")),G("if (%s === errors) {",ir),Te("negative schema matches"),G("} else {")("errors = %s",ir)("}")}if(H.items&&!re&&("array"!==_e&&G("if (%s) {",F.array(X)),Qe=$(),G("for (var %s = 0; %s < %s.length; %s++) {",Qe,Qe,X,Qe),J(X+"["+Qe+"]",H.items,ie,we,Be.concat("items")),G("}"),"array"!==_e&&G("}")),H.patternProperties&&("object"!==_e&&G("if (%s) {",F.object(X)),Tt=ue("keys"),Qe=$(),G("var %s = Object.keys(%s)",Tt,X)("for (var %s = 0; %s < %s.length; %s++) {",Qe,Qe,Tt,Qe),Object.keys(H.patternProperties).forEach(function(Mt){var en=pe(Mt);G("if (%s.test(%s)) {",en,Tt+"["+Qe+"]"),J(X+"["+Tt+"["+Qe+"]]",H.patternProperties[Mt],ie,we,Be.concat(["patternProperties",Mt])),G("}")}),G("}"),"object"!==_e&&G("}")),H.pattern){var Vr=pe(H.pattern);"string"!==_e&&G("if (%s) {",F.string(X)),G("if (!(testLimitedRegex(%s, %s, %d))) {",Vr,X,void 0===H.maxLength?-1:H.maxLength),Te("pattern mismatch"),G("}"),"string"!==_e&&G("}")}if(H.allOf&&H.allOf.forEach(function(Rt,kt){J(X,Rt,ie,we,Be.concat(["allOf",kt]))}),H.anyOf&&H.anyOf.length&&(ir=ue("prev"),H.anyOf.forEach(function(kt,Mt){0===Mt?G("var %s = errors",ir):G("if (errors !== %s) {",ir)("errors = %s",ir),J(X,kt,!1,!1,Be)}),H.anyOf.forEach(function(kt,Mt){Mt&&G("}")}),G("if (%s !== errors) {",ir),Te("no schemas match"),G("}")),H.oneOf&&H.oneOf.length){ir=ue("prev");var je=ue("passes");G("var %s = errors",ir)("var %s = 0",je),H.oneOf.forEach(function(kt,Mt){J(X,kt,!1,!1,Be),G("if (%s === errors) {",ir)("%s++",je)("} else {")("errors = %s",ir)("}")}),G("if (%s !== 1) {",je),Te("no (or more than one) schemas match"),G("}")}for(void 0!==H.multipleOf&&("number"!==_e&&"integer"!==_e&&G("if (%s) {",F.number(X)),G("if (!isMultipleOf(%s, %d)) {",X,H.multipleOf),Te("has a remainder"),G("}"),"number"!==_e&&"integer"!==_e&&G("}")),void 0!==H.maxProperties&&("object"!==_e&&G("if (%s) {",F.object(X)),G("if (Object.keys(%s).length > %d) {",X,H.maxProperties),Te("has more properties than allowed"),G("}"),"object"!==_e&&G("}")),void 0!==H.minProperties&&("object"!==_e&&G("if (%s) {",F.object(X)),G("if (Object.keys(%s).length < %d) {",X,H.minProperties),Te("has less properties than allowed"),G("}"),"object"!==_e&&G("}")),void 0!==H.maxItems&&("array"!==_e&&G("if (%s) {",F.array(X)),G("if (%s.length > %d) {",X,H.maxItems),Te("has more items than allowed"),G("}"),"array"!==_e&&G("}")),void 0!==H.minItems&&("array"!==_e&&G("if (%s) {",F.array(X)),G("if (%s.length < %d) {",X,H.minItems),Te("has less items than allowed"),G("}"),"array"!==_e&&G("}")),void 0!==H.maxLength&&("string"!==_e&&G("if (%s) {",F.string(X)),G("if (%s.length > %d) {",X,H.maxLength),Te("has longer length than allowed"),G("}"),"string"!==_e&&G("}")),void 0!==H.minLength&&("string"!==_e&&G("if (%s) {",F.string(X)),G("if (%s.length < %d) {",X,H.minLength),Te("has less length than allowed"),G("}"),"string"!==_e&&G("}")),void 0!==H.minimum&&("number"!==_e&&"integer"!==_e&&G("if (%s) {",F.number(X)),G("if (%s %s %d) {",X,H.exclusiveMinimum?"<=":"<",H.minimum),Te("is less than minimum"),G("}"),"number"!==_e&&"integer"!==_e&&G("}")),void 0!==H.maximum&&("number"!==_e&&"integer"!==_e&&G("if (%s) {",F.number(X)),G("if (%s %s %d) {",X,H.exclusiveMaximum?">=":">",H.maximum),Te("is more than maximum"),G("}"),"number"!==_e&&"integer"!==_e&&G("}")),me&&Object.keys(me).forEach(function(Rt){Array.isArray(_e)&&-1!==_e.indexOf("null")&&G("if (%s !== null) {",X),J(g(X,Rt),me[Rt],ie,we,Be.concat(re?Rt:["properties",Rt])),Array.isArray(_e)&&-1!==_e.indexOf("null")&&G("}")});ce--;)G("}")},G=a("function validate(data) {")("if (data === undefined) data = null")("validate.errors = null")("var errors = 0");return J("data",T,R,E&&E.filter,[]),G("return errors === 0")("}"),(G=G.toFunction(c)).errors=null,Object.defineProperty&&Object.defineProperty(G,"error",{get:function(){return G.errors?G.errors.map(function(X){return X.field+" "+X.message}).join("\n"):""}}),G.toJSON=function(){return T},G};oe.exports=function(T,P){return"string"==typeof T&&(T=JSON.parse(T)),w(T,{},T,!0,P)},oe.exports.filter=function(T,P){var x=oe.exports(T,p(P,{filter:!0}));return function(R){return x(R),R}}},7549:oe=>{oe.exports=function(l){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(l)}},2342:(oe,N,l)=>{var D,p,B,L,g=l(5834),a=l(6259)();if(a){D=g("Object.prototype.hasOwnProperty"),p=g("RegExp.prototype.exec"),B={};var F=function(){throw B};L={toString:F,valueOf:F},"symbol"==typeof Symbol.toPrimitive&&(L[Symbol.toPrimitive]=F)}var M=g("Object.prototype.toString"),I=Object.getOwnPropertyDescriptor;oe.exports=a?function(T){if(!T||"object"!=typeof T)return!1;var P=I(T,"lastIndex");if(!P||!D(P,"value"))return!1;try{p(T,L)}catch(R){return R===B}}:function(T){return!(!T||"object"!=typeof T&&"function"!=typeof T)&&"[object RegExp]"===M(T)}},597:(oe,N,l)=>{var g=l(9076),a=l(7029),D=l(5834),p=D("Object.prototype.toString"),B=l(6259)(),L="undefined"==typeof globalThis?global:globalThis,F=a(),M=D("Array.prototype.indexOf",!0)||function(R,E){for(var y=0;y<R.length;y+=1)if(R[y]===E)return y;return-1},I=D("String.prototype.slice"),S={},w=l(8555),T=Object.getPrototypeOf;B&&w&&T&&g(F,function(x){var R=new L[x];if(Symbol.toStringTag in R){var E=T(R),y=w(E,Symbol.toStringTag);if(!y){var c=T(E);y=w(c,Symbol.toStringTag)}S[x]=y.get}}),oe.exports=function(R){if(!R||"object"!=typeof R)return!1;if(!B||!(Symbol.toStringTag in R)){var E=I(p(R),8,-1);return M(F,E)>-1}return!!w&&function(R){var E=!1;return g(S,function(y,c){if(!E)try{E=y.call(R)===c}catch{}}),E}(R)}},6936:(oe,N)=>{var l=/~/,g=/~[01]/g;function a(I){switch(I){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+I)}function D(I){return l.test(I)?I.replace(g,a):I}function B(I){if("string"==typeof I){if(""===(I=I.split("/"))[0])return I;throw new Error("Invalid JSON pointer.")}if(Array.isArray(I)){for(const S of I)if("string"!=typeof S&&"number"!=typeof S)throw new Error("Invalid JSON pointer. Must be of type string or number.");return I}throw new Error("Invalid JSON pointer.")}function L(I,S){if("object"!=typeof I)throw new Error("Invalid input object.");var w=(S=B(S)).length;if(1===w)return I;for(var T=1;T<w;){if(I=I[D(S[T++])],w===T)return I;if("object"!=typeof I)return}}function F(I,S,w){if("object"!=typeof I)throw new Error("Invalid input object.");if(0===(S=B(S)).length)throw new Error("Invalid JSON pointer for set.");return function(I,S,w){for(var T,P,x=1,R=S.length;x<R;){if("constructor"===S[x]||"prototype"===S[x]||"__proto__"===S[x])return I;if(T=D(S[x++]),P=R>x,void 0===I[T]&&(Array.isArray(I)&&"-"===T&&(T=I.length),P&&(I[T]=""!==S[x]&&S[x]<1/0||"-"===S[x]?[]:{})),!P)break;I=I[T]}var E=I[T];return void 0===w?delete I[T]:I[T]=w,E}(I,S,w)}N.get=L,N.set=F,N.compile=function(I){var S=B(I);return{get:function(w){return L(w,S)},set:function(w,T){return F(w,S,T)}}}},9790:(oe,N,l)=>{function g(pe){return pe&&"object"==typeof pe&&"default"in pe?pe.default:pe}var a=g(l(8309)),D=g(l(6952)),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},B=Object.assign||function(pe){for(var Y=1;Y<arguments.length;Y++){var $=arguments[Y];for(var J in $)Object.prototype.hasOwnProperty.call($,J)&&(pe[J]=$[J])}return pe},S=function(pe,Y){Object.keys(pe).forEach(function($){Y(pe[$],$)})},T=function(pe){return!!("undefined"!=typeof Uint8Array&&pe instanceof Uint8Array||pe&&pe.$Uint8ArrayPolyfill)},P_each=S,x=function(Y){return Array.isArray(Y)&&!T(Y)},R=function(Y){return x(Y)||c(Y)},y=function(Y){return/^[0-9]+$/.test(Y)},c=function(pe){return!(!pe||"number"==typeof pe||"string"==typeof pe||"boolean"==typeof pe||x(pe)||null===pe||pe instanceof RegExp||"function"==typeof pe||pe instanceof Date||T(pe))},o=function(pe){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof pe&&Y.field&&(pe+=" for field '"+Y.field+"'");var $=new Error(pe);return $.name="ModifyJsError",$},v_each=S,K=function(Y,$,J){if(J=J||{},!c($))throw o("Modifier must be an object");var X,G=function(Y,$){if(!c(Y))return!1;var J=void 0;return P_each(Y,function(G,X){var H="$"===X.substr(0,1);if(void 0===J)J=H;else if(J!==H)throw new Error("Inconsistent operator: "+JSON.stringify(Y))}),!!J}($=a($));if(G?(X=a(Y),v_each($,function(H,ie){var we=ge[ie];if(!we)throw o("Invalid modifier specified "+ie);v_each(H,function(Be,me){if(""===me)throw o("An empty update path is not valid.");var _e=me.split(".");if(!function(pe,Y){return pe.every(function($){return Y&&Y($)||$})}(_e))throw o("The update path '"+me+"' contains an empty field name, which is not allowed.");var re=ue(X,_e,{noCreate:Ee[ie],forbidArray:"$rename"===ie,arrayIndices:J.arrayIndices}),ce=_e.pop();we(re,ce,Be,me,X)})})):X=$,J.returnInsteadOfReplacing)return X;v_each(Object.keys(Y),function(H){"_id"!==H&&delete Y[H]}),v_each(X,function(H,ie){Y[ie]=H})},ue=function(Y,$,J){J=J||{};for(var G=!1,X=0;X<$.length;X++){var H=X===$.length-1,ie=$[X];if(!R(Y)){if(J.noCreate)return;var Be=o("cannot use the part '"+ie+"' to traverse "+Y);throw Be.setPropertyError=!0,Be}if(Y instanceof Array){if(J.forbidArray)return null;if("$"===ie){if(G)throw o("Too many positional (i.e. '$') elements");if(!J.arrayIndices||!J.arrayIndices.length)throw o("The positional operator did not find the match needed from the query");ie=J.arrayIndices[0],G=!0}else{if(!y(ie)){if(J.noCreate)return;throw o("can't append to array using string field name ["+ie+"]")}ie=parseInt(ie)}if(H&&($[X]=ie),J.noCreate&&ie>=Y.length)return;for(;Y.length<ie;)Y.push(null);if(!H)if(Y.length===ie)Y.push({});else if("object"!==p(Y[ie]))throw o("can't modify field '"+$[X+1]+"' of list value "+JSON.stringify(Y[ie]))}else if(!(ie in Y)){if(J.noCreate)return;H||(Y[ie]={})}if(H)return Y;Y=Y[ie]}},Ee={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},ge={$currentDate:function(Y,$,J){if("object"===(void 0===J?"undefined":p(J))&&J.hasOwnProperty("$type")){if("date"!==J.$type)throw o("Minimongo does currently only support the date type in $currentDate modifiers",{field:$})}else if(!0!==J)throw o("Invalid $currentDate modifier",{field:$});Y[$]=new Date},$min:function(Y,$,J){if("number"!=typeof J)throw o("Modifier $min allowed for numbers only",{field:$});if($ in Y){if("number"!=typeof Y[$])throw o("Cannot apply $min modifier to non-number",{field:$});Y[$]>J&&(Y[$]=J)}else Y[$]=J},$max:function(Y,$,J){if("number"!=typeof J)throw o("Modifier $max allowed for numbers only",{field:$});if($ in Y){if("number"!=typeof Y[$])throw o("Cannot apply $max modifier to non-number",{field:$});Y[$]<J&&(Y[$]=J)}else Y[$]=J},$inc:function(Y,$,J){if("number"!=typeof J)throw o("Modifier $inc allowed for numbers only",{field:$});if($ in Y){if("number"!=typeof Y[$])throw o("Cannot apply $inc modifier to non-number",{field:$});Y[$]+=J}else Y[$]=J},$set:function(Y,$,J){var G,pe;if("object"!==(void 0===(pe=Y)?"undefined":p(pe))||null===pe)throw(G=o("Cannot set property on non-object field",{field:$})).setPropertyError=!0,G;if(null===Y)throw(G=o("Cannot set property on null",{field:$})).setPropertyError=!0,G;Y[$]=J},$setOnInsert:function(Y,$,J){},$unset:function(Y,$,J){void 0!==Y&&(Y instanceof Array?$ in Y&&(Y[$]=null):delete Y[$])},$push:function(Y,$,J){if(void 0===Y[$]&&(Y[$]=[]),!(Y[$]instanceof Array))throw o("Cannot apply $push modifier to non-array",{field:$});if(J&&J.$each){var G=J.$each;if(!(G instanceof Array))throw o("$each must be an array",{field:$});var X=void 0;if("$position"in J){if("number"!=typeof J.$position)throw o("$position must be a numeric value",{field:$});if(J.$position<0)throw o("$position in $push must be zero or positive",{field:$});X=J.$position}var H=void 0;if("$slice"in J){if("number"!=typeof J.$slice)throw o("$slice must be a numeric value",{field:$});if(J.$slice>0)throw o("$slice in $push must be zero or negative",{field:$});H=J.$slice}if(J.$sort)throw o("$sort in $push not implemented yet");if(void 0===X)for(var we=0;we<G.length;we++)Y[$].push(G[we]);else{var Be=[X,0];for(we=0;we<G.length;we++)Be.push(G[we]);Array.prototype.splice.apply(Y[$],Be)}void 0!==H&&(Y[$]=0===H?[]:Y[$].slice(H))}else Y[$].push(J)},$pushAll:function(Y,$,J){if(!("object"===(void 0===J?"undefined":p(J))&&J instanceof Array))throw o("Modifier $pushAll/pullAll allowed for arrays only");var G=Y[$];if(void 0===G)Y[$]=J;else{if(!(G instanceof Array))throw o("Cannot apply $pushAll modifier to non-array",{field:$});for(var X=0;X<J.length;X++)G.push(J[X])}},$addToSet:function(Y,$,J){var G=!1;"object"===(void 0===J?"undefined":p(J))&&"$each"===Object.keys(J)[0]&&(G=!0);var H=G?J.$each:[J],ie=Y[$];if(void 0===ie)Y[$]=H;else{if(!(ie instanceof Array))throw o("Cannot apply $addToSet modifier to non-array",{field:$});v_each(H,function(we){for(var Be=0;Be<ie.length;Be++)if(D(we,ie[Be]))return;ie.push(we)})}},$pop:function(Y,$,J){if(void 0!==Y){var G=Y[$];if(void 0!==G){if(!(G instanceof Array))throw o("Cannot apply $pop modifier to non-array",{field:$});"number"==typeof J&&J<0?G.splice(0,1):G.pop()}}},$pull:function(Y,$,J){if(void 0!==Y){var G=Y[$];if(void 0!==G)throw G instanceof Array?o("$pull not implemented yet"):o("Cannot apply $pull/pullAll modifier to non-array",{field:$})}},$pullAll:function(Y,$,J){if(!("object"===(void 0===J?"undefined":p(J))&&J instanceof Array))throw o("Modifier $pushAll/pullAll allowed for arrays only",{field:$});if(void 0!==Y){var G=Y[$];if(void 0!==G){if(!(G instanceof Array))throw o("Cannot apply $pull/pullAll modifier to non-array",{field:$});for(var X=[],H=0;H<G.length;H++){for(var ie=!1,we=0;we<J.length;we++)if(D(G[H],J[we])){ie=!0;break}ie||X.push(G[H])}Y[$]=X}}},$rename:function(Y,$,J,G,X){if(G===J)throw o("$rename source must differ from target",{field:$});if(null===Y)throw o("$rename source field invalid",{field:$});if("string"!=typeof J)throw o("$rename target must be a string",{field:$});if(J.indexOf("\0")>-1)throw o("The 'to' field for $rename cannot contain an embedded null byte",{field:$});if(void 0!==Y){var H=Y[$];delete Y[$];var ie=J.split("."),we=ue(X,ie,{forbidArray:!0});if(null===we)throw o("$rename target field invalid",{field:$});we[ie.pop()]=H}},$bit:function(Y,$,J){throw o("$bit is not supported",{field:$})}};oe.exports=function(pe,Y,$){if(!$||!$.each)return K(pe,Y,B({},$,{returnInsteadOfReplacing:!0}))}},8309:oe=>{var N=function(){"use strict";function l(S,w){return null!=w&&S instanceof w}var g,a,D;try{g=Map}catch{g=function(){}}try{a=Set}catch{a=function(){}}try{D=Promise}catch{D=function(){}}function p(S,w,T,P,x){"object"==typeof w&&(T=w.depth,P=w.prototype,x=w.includeNonEnumerable,w=w.circular);var R=[],E=[],y="undefined"!=typeof Buffer;return void 0===w&&(w=!0),void 0===T&&(T=1/0),function c(o,v){if(null===o)return null;if(0===v)return o;var h,K;if("object"!=typeof o)return o;if(l(o,g))h=new g;else if(l(o,a))h=new a;else if(l(o,D))h=new D(function(X,H){o.then(function(ie){X(c(ie,v-1))},function(ie){H(c(ie,v-1))})});else if(p.__isArray(o))h=[];else if(p.__isRegExp(o))h=new RegExp(o.source,I(o)),o.lastIndex&&(h.lastIndex=o.lastIndex);else if(p.__isDate(o))h=new Date(o.getTime());else{if(y&&Buffer.isBuffer(o))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(h),h;l(o,Error)?h=Object.create(o):void 0===P?(K=Object.getPrototypeOf(o),h=Object.create(K)):(h=Object.create(P),K=P)}if(w){var ue=R.indexOf(o);if(-1!=ue)return E[ue];R.push(o),E.push(h)}for(var Ee in l(o,g)&&o.forEach(function(X,H){var ie=c(H,v-1),we=c(X,v-1);h.set(ie,we)}),l(o,a)&&o.forEach(function(X){var H=c(X,v-1);h.add(H)}),o){var ge;K&&(ge=Object.getOwnPropertyDescriptor(K,Ee)),(!ge||null!=ge.set)&&(h[Ee]=c(o[Ee],v-1))}if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(o);for(Ee=0;Ee<pe.length;Ee++){var Y=pe[Ee];($=Object.getOwnPropertyDescriptor(o,Y))&&!$.enumerable&&!x||(h[Y]=c(o[Y],v-1),$.enumerable||Object.defineProperty(h,Y,{enumerable:!1}))}}if(x){var J=Object.getOwnPropertyNames(o);for(Ee=0;Ee<J.length;Ee++){var $,G=J[Ee];($=Object.getOwnPropertyDescriptor(o,G))&&$.enumerable||(h[G]=c(o[G],v-1),Object.defineProperty(h,G,{enumerable:!1}))}}return h}(S,T)}function B(S){return Object.prototype.toString.call(S)}function I(S){var w="";return S.global&&(w+="g"),S.ignoreCase&&(w+="i"),S.multiline&&(w+="m"),w}return p.clonePrototype=function(w){if(null===w)return null;var T=function(){};return T.prototype=w,new T},p.__objToStr=B,p.__isDate=function(S){return"object"==typeof S&&"[object Date]"===B(S)},p.__isArray=function(S){return"object"==typeof S&&"[object Array]"===B(S)},p.__isRegExp=function(S){return"object"==typeof S&&"[object RegExp]"===B(S)},p.__getRegExpFlags=I,p}();oe.exports&&(oe.exports=N)},1175:oe=>{var N=function(l){return l!=l};oe.exports=function(g,a){return 0===g&&0===a?1/g==1/a:!!(g===a||N(g)&&N(a))}},2e3:(oe,N,l)=>{var g=l(2358),a=l(5685),D=l(1175),p=l(6305),B=l(3859),L=a(p(),Object);g(L,{getPolyfill:p,implementation:D,shim:B}),oe.exports=L},6305:(oe,N,l)=>{var g=l(1175);oe.exports=function(){return"function"==typeof Object.is?Object.is:g}},3859:(oe,N,l)=>{var g=l(6305),a=l(2358);oe.exports=function(){var p=g();return a(Object,{is:p},{is:function(){return Object.is!==p}}),p}},2450:(oe,N,l)=>{var g;if(!Object.keys){var a=Object.prototype.hasOwnProperty,D=Object.prototype.toString,p=l(9978),B=Object.prototype.propertyIsEnumerable,L=!B.call({toString:null},"toString"),F=B.call(function(){},"prototype"),M=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],I=function(P){var x=P.constructor;return x&&x.prototype===P},S={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},w=function(){if("undefined"==typeof window)return!1;for(var P in window)try{if(!S["$"+P]&&a.call(window,P)&&null!==window[P]&&"object"==typeof window[P])try{I(window[P])}catch{return!0}}catch{return!0}return!1}();g=function(x){var R=null!==x&&"object"==typeof x,E="[object Function]"===D.call(x),y=p(x),c=R&&"[object String]"===D.call(x),o=[];if(!R&&!E&&!y)throw new TypeError("Object.keys called on a non-object");var v=F&&E;if(c&&x.length>0&&!a.call(x,0))for(var h=0;h<x.length;++h)o.push(String(h));if(y&&x.length>0)for(var K=0;K<x.length;++K)o.push(String(K));else for(var ue in x)(!v||"prototype"!==ue)&&a.call(x,ue)&&o.push(String(ue));if(L)for(var Ee=function(P){if("undefined"==typeof window||!w)return I(P);try{return I(P)}catch{return!1}}(x),ge=0;ge<M.length;++ge)(!Ee||"constructor"!==M[ge])&&a.call(x,M[ge])&&o.push(M[ge]);return o}}oe.exports=g},1356:(oe,N,l)=>{var g=Array.prototype.slice,a=l(9978),D=Object.keys,p=D?function(F){return D(F)}:l(2450),B=Object.keys;p.shim=function(){if(Object.keys){var F=function(){var M=Object.keys(arguments);return M&&M.length===arguments.length}(1,2);F||(Object.keys=function(I){return a(I)?B(g.call(I)):B(I)})}else Object.keys=p;return Object.keys||p},oe.exports=p},9978:oe=>{var N=Object.prototype.toString;oe.exports=function(g){var a=N.call(g),D="[object Arguments]"===a;return D||(D="[object Array]"!==a&&null!==g&&"object"==typeof g&&"number"==typeof g.length&&g.length>=0&&"[object Function]"===N.call(g.callee)),D}},8624:function(oe,N){var l,g,a;!function(D,p){"use strict";"object"==typeof oe.exports?oe.exports=p():(g=[],void 0!==(a="function"==typeof(l=p)?l.apply(N,g):l)&&(oe.exports=a))}(0,function(){"use strict";var D=Object.prototype.toString;function p(P,x){return null!=P&&Object.prototype.hasOwnProperty.call(P,x)}function B(P){if(!P||M(P)&&0===P.length)return!0;if("string"!=typeof P){for(var x in P)if(p(P,x))return!1;return!0}return!1}function L(P){return D.call(P)}var M=Array.isArray||function(P){return"[object Array]"===D.call(P)};function S(P){var x=parseInt(P);return x.toString()===P?x:P}function w(P){var R,y,x=function(o){return Object.keys(x).reduce(function(v,h){return"create"===h||"function"==typeof x[h]&&(v[h]=x[h].bind(x,o)),v},{})};function E(o,v){if(R(o,v))return o[v]}function c(o,v,h,K){if("number"==typeof v&&(v=[v]),!v||0===v.length)return o;if("string"==typeof v)return c(o,v.split(".").map(S),h,K);var ue=v[0],Ee=y(o,ue);return 1===v.length?((void 0===Ee||!K)&&(o[ue]=h),Ee):(void 0===Ee&&(o[ue]="number"==typeof v[1]?[]:{}),c(o[ue],v.slice(1),h,K))}return R=(P=P||{}).includeInheritedProps?function(){return!0}:function(o,v){return"number"==typeof v&&Array.isArray(o)||p(o,v)},y=P.includeInheritedProps?function(o,v){"string"!=typeof v&&"number"!=typeof v&&(v=String(v));var h=E(o,v);if("__proto__"===v||"prototype"===v||"constructor"===v&&"function"==typeof h)throw new Error("For security reasons, object's magic properties cannot be set");return h}:function(o,v){return E(o,v)},x.has=function(o,v){if("number"==typeof v?v=[v]:"string"==typeof v&&(v=v.split(".")),!v||0===v.length)return!!o;for(var h=0;h<v.length;h++){var K=S(v[h]);if(!("number"==typeof K&&M(o)&&K<o.length||(P.includeInheritedProps?K in Object(o):p(o,K))))return!1;o=o[K]}return!0},x.ensureExists=function(o,v,h){return c(o,v,h,!0)},x.set=function(o,v,h,K){return c(o,v,h,K)},x.insert=function(o,v,h,K){var ue=x.get(o,v);K=~~K,M(ue)||x.set(o,v,ue=[]),ue.splice(K,0,h)},x.empty=function(o,v){var h,K;if(!B(v)&&null!=o&&(h=x.get(o,v))){if("string"==typeof h)return x.set(o,v,"");if(function(P){return"boolean"==typeof P||"[object Boolean]"===L(P)}(h))return x.set(o,v,!1);if("number"==typeof h)return x.set(o,v,0);if(M(h))h.length=0;else{if(!function(P){return"object"==typeof P&&"[object Object]"===L(P)}(h))return x.set(o,v,null);for(K in h)R(h,K)&&delete h[K]}}},x.push=function(o,v){var h=x.get(o,v);M(h)||x.set(o,v,h=[]),h.push.apply(h,Array.prototype.slice.call(arguments,2))},x.coalesce=function(o,v,h){for(var K,ue=0,Ee=v.length;ue<Ee;ue++)if(void 0!==(K=x.get(o,v[ue])))return K;return h},x.get=function(o,v,h){if("number"==typeof v&&(v=[v]),!v||0===v.length)return o;if(null==o)return h;if("string"==typeof v)return x.get(o,v.split("."),h);var K=S(v[0]),ue=y(o,K);return void 0===ue?h:1===v.length?ue:x.get(o[K],v.slice(1),h)},x.del=function(v,h){if("number"==typeof h&&(h=[h]),null==v||B(h))return v;if("string"==typeof h)return x.del(v,h.split("."));var K=S(h[0]);return y(v,K),R(v,K)?1!==h.length?x.del(v[K],h.slice(1)):(M(v)?v.splice(K,1):delete v[K],v):v},x}var T=w();return T.create=w,T.withInheritedProps=w({includeInheritedProps:!0}),T})},3625:oe=>{oe.exports=function(N){"use strict";var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function D(E,y){var c=E[0],o=E[1],v=E[2],h=E[3];o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[0]-680876936|0)<<7|c>>>25)+o|0)&o|~c&v)+y[1]-389564586|0)<<12|h>>>20)+c|0)&c|~h&o)+y[2]+606105819|0)<<17|v>>>15)+h|0)&h|~v&c)+y[3]-1044525330|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[4]-176418897|0)<<7|c>>>25)+o|0)&o|~c&v)+y[5]+1200080426|0)<<12|h>>>20)+c|0)&c|~h&o)+y[6]-1473231341|0)<<17|v>>>15)+h|0)&h|~v&c)+y[7]-45705983|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[8]+1770035416|0)<<7|c>>>25)+o|0)&o|~c&v)+y[9]-1958414417|0)<<12|h>>>20)+c|0)&c|~h&o)+y[10]-42063|0)<<17|v>>>15)+h|0)&h|~v&c)+y[11]-1990404162|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[12]+1804603682|0)<<7|c>>>25)+o|0)&o|~c&v)+y[13]-40341101|0)<<12|h>>>20)+c|0)&c|~h&o)+y[14]-1502002290|0)<<17|v>>>15)+h|0)&h|~v&c)+y[15]+1236535329|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[1]-165796510|0)<<5|c>>>27)+o|0)&v|o&~v)+y[6]-1069501632|0)<<9|h>>>23)+c|0)&o|c&~o)+y[11]+643717713|0)<<14|v>>>18)+h|0)&c|h&~c)+y[0]-373897302|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[5]-701558691|0)<<5|c>>>27)+o|0)&v|o&~v)+y[10]+38016083|0)<<9|h>>>23)+c|0)&o|c&~o)+y[15]-660478335|0)<<14|v>>>18)+h|0)&c|h&~c)+y[4]-405537848|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[9]+568446438|0)<<5|c>>>27)+o|0)&v|o&~v)+y[14]-1019803690|0)<<9|h>>>23)+c|0)&o|c&~o)+y[3]-187363961|0)<<14|v>>>18)+h|0)&c|h&~c)+y[8]+1163531501|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[13]-1444681467|0)<<5|c>>>27)+o|0)&v|o&~v)+y[2]-51403784|0)<<9|h>>>23)+c|0)&o|c&~o)+y[7]+1735328473|0)<<14|v>>>18)+h|0)&c|h&~c)+y[12]-1926607734|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[5]-378558|0)<<4|c>>>28)+o|0)^o^v)+y[8]-2022574463|0)<<11|h>>>21)+c|0)^c^o)+y[11]+1839030562|0)<<16|v>>>16)+h|0)^h^c)+y[14]-35309556|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[1]-1530992060|0)<<4|c>>>28)+o|0)^o^v)+y[4]+1272893353|0)<<11|h>>>21)+c|0)^c^o)+y[7]-155497632|0)<<16|v>>>16)+h|0)^h^c)+y[10]-1094730640|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[13]+681279174|0)<<4|c>>>28)+o|0)^o^v)+y[0]-358537222|0)<<11|h>>>21)+c|0)^c^o)+y[3]-722521979|0)<<16|v>>>16)+h|0)^h^c)+y[6]+76029189|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[9]-640364487|0)<<4|c>>>28)+o|0)^o^v)+y[12]-421815835|0)<<11|h>>>21)+c|0)^c^o)+y[15]+530742520|0)<<16|v>>>16)+h|0)^h^c)+y[2]-995338651|0)<<23|o>>>9)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[0]-198630844|0)<<6|c>>>26)+o|0)|~v))+y[7]+1126891415|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[14]-1416354905|0)<<15|v>>>17)+h|0)|~c))+y[5]-57434055|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[12]+1700485571|0)<<6|c>>>26)+o|0)|~v))+y[3]-1894986606|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[10]-1051523|0)<<15|v>>>17)+h|0)|~c))+y[1]-2054922799|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[8]+1873313359|0)<<6|c>>>26)+o|0)|~v))+y[15]-30611744|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[6]-1560198380|0)<<15|v>>>17)+h|0)|~c))+y[13]+1309151649|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[4]-145523070|0)<<6|c>>>26)+o|0)|~v))+y[11]-1120210379|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[2]+718787259|0)<<15|v>>>17)+h|0)|~c))+y[9]-343485551|0)<<21|o>>>11)+v|0,E[0]=c+E[0]|0,E[1]=o+E[1]|0,E[2]=v+E[2]|0,E[3]=h+E[3]|0}function p(E){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=E.charCodeAt(c)+(E.charCodeAt(c+1)<<8)+(E.charCodeAt(c+2)<<16)+(E.charCodeAt(c+3)<<24);return y}function B(E){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=E[c]+(E[c+1]<<8)+(E[c+2]<<16)+(E[c+3]<<24);return y}function L(E){var o,v,h,K,ue,Ee,y=E.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,p(E.substring(o-64,o)));for(v=(E=E.substring(o-64)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=E.charCodeAt(o)<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),Ee=parseInt(K[1],16)||0,h[14]=ue,h[15]=Ee,D(c,h),c}function M(E){var c,y="";for(c=0;c<4;c+=1)y+=g[E>>8*c+4&15]+g[E>>8*c&15];return y}function I(E){var y;for(y=0;y<E.length;y+=1)E[y]=M(E[y]);return E.join("")}function S(E){return/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E))),E}function x(E){var o,y=[],c=E.length;for(o=0;o<c-1;o+=2)y.push(parseInt(E.substr(o,2),16));return String.fromCharCode.apply(String,y)}function R(){this.reset()}return I(L("hello")),"undefined"!=typeof ArrayBuffer&&!ArrayBuffer.prototype.slice&&function(){function E(y,c){return(y=0|y||0)<0?Math.max(y+c,0):Math.min(y,c)}ArrayBuffer.prototype.slice=function(y,c){var K,ue,Ee,ge,o=this.byteLength,v=E(y,o),h=o;return undefined!==c&&(h=E(c,o)),v>h?new ArrayBuffer(0):(K=h-v,ue=new ArrayBuffer(K),Ee=new Uint8Array(ue),ge=new Uint8Array(this,v,K),Ee.set(ge),ue)}}(),R.prototype.append=function(E){return this.appendBinary(S(E)),this},R.prototype.appendBinary=function(E){this._buff+=E,this._length+=E.length;var c,y=this._buff.length;for(c=64;c<=y;c+=64)D(this._hash,p(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},R.prototype.end=function(E){var o,h,y=this._buff,c=y.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<c;o+=1)v[o>>2]|=y.charCodeAt(o)<<(o%4<<3);return this._finish(v,c),h=I(this._hash),E&&(h=x(h)),this.reset(),h},R.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},R.prototype.setState=function(E){return this._buff=E.buff,this._length=E.length,this._hash=E.hash,this},R.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},R.prototype._finish=function(E,y){var o,v,h,c=y;if(E[c>>2]|=128<<(c%4<<3),c>55)for(D(this._hash,E),c=0;c<16;c+=1)E[c]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(o[2],16),h=parseInt(o[1],16)||0,E[14]=v,E[15]=h,D(this._hash,E)},R.hash=function(E,y){return R.hashBinary(S(E),y)},R.hashBinary=function(E,y){var o=I(L(E));return y?x(o):o},(R.ArrayBuffer=function(){this.reset()}).prototype.append=function(E){var o,y=function(E,y,c){var o=new Uint8Array(E.byteLength+y.byteLength);return o.set(new Uint8Array(E)),o.set(new Uint8Array(y),E.byteLength),c?o:o.buffer}(this._buff.buffer,E,!0),c=y.length;for(this._length+=E.byteLength,o=64;o<=c;o+=64)D(this._hash,B(y.subarray(o-64,o)));return this._buff=o-64<c?new Uint8Array(y.buffer.slice(o-64)):new Uint8Array(0),this},R.ArrayBuffer.prototype.end=function(E){var v,h,y=this._buff,c=y.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(v=0;v<c;v+=1)o[v>>2]|=y[v]<<(v%4<<3);return this._finish(o,c),h=I(this._hash),E&&(h=x(h)),this.reset(),h},R.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.ArrayBuffer.prototype.getState=function(){var E=R.prototype.getState.call(this);return E.buff=function(E){return String.fromCharCode.apply(null,new Uint8Array(E))}(E.buff),E},R.ArrayBuffer.prototype.setState=function(E){return E.buff=function(E,y){var h,c=E.length,o=new ArrayBuffer(c),v=new Uint8Array(o);for(h=0;h<c;h+=1)v[h]=E.charCodeAt(h);return y?v:o}(E.buff,!0),R.prototype.setState.call(this,E)},R.ArrayBuffer.prototype.destroy=R.prototype.destroy,R.ArrayBuffer.prototype._finish=R.prototype._finish,R.ArrayBuffer.hash=function(E,y){var o=I(function(E){var o,v,h,K,ue,Ee,y=E.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,B(E.subarray(o-64,o)));for(v=(E=o-64<y?E.subarray(o-64):new Uint8Array(0)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=E[o]<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),Ee=parseInt(K[1],16)||0,h[14]=ue,h[15]=Ee,D(c,h),c}(new Uint8Array(E)));return y?x(o):o},R}()},2302:(oe,N,l)=>{var a,D,g=[l(4703),l(3328),l(6139),l(5675),l(1767),l(3259)],p=-1,B=[],L=!1;function F(){!a||!D||(a=!1,D.length?B=D.concat(B):p=-1,B.length&&M())}function M(){if(!a){L=!1,a=!0;for(var x=B.length,R=setTimeout(F);x;){for(D=B,B=[];D&&++p<x;)D[p].run();p=-1,x=B.length}D=null,p=-1,a=!1,clearTimeout(R)}}for(var I,S=-1,w=g.length;++S<w;)if(g[S]&&g[S].test&&g[S].test()){I=g[S].install(M);break}function T(x,R){this.fun=x,this.array=R}T.prototype.run=function(){var x=this.fun,R=this.array;switch(R.length){case 0:return x();case 1:return x(R[0]);case 2:return x(R[0],R[1]);case 3:return x(R[0],R[1],R[2]);default:return x.apply(null,R)}},oe.exports=function(x){var R=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)R[E-1]=arguments[E];B.push(new T(x,R)),!L&&!a&&(L=!0,I())}},5675:(oe,N)=>{N.test=function(){return!global.setImmediate&&void 0!==global.MessageChannel},N.install=function(l){var g=new global.MessageChannel;return g.port1.onmessage=l,function(){g.port2.postMessage(0)}}},6139:(oe,N)=>{var l=global.MutationObserver||global.WebKitMutationObserver;N.test=function(){return l},N.install=function(g){var a=0,D=new l(g),p=global.document.createTextNode("");return D.observe(p,{characterData:!0}),function(){p.data=a=++a%2}}},3328:(oe,N)=>{N.test=function(){return"function"==typeof global.queueMicrotask},N.install=function(l){return function(){global.queueMicrotask(l)}}},1767:(oe,N)=>{N.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")},N.install=function(l){return function(){var g=global.document.createElement("script");return g.onreadystatechange=function(){l(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},global.document.documentElement.appendChild(g),l}}},3259:(oe,N)=>{N.test=function(){return!0},N.install=function(l){return function(){setTimeout(l,0)}}},2448:(oe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;const l=[];for(let D=0;D<256;++D)l.push((D+256).toString(16).substr(1));N.default=function(D,p){const B=p||0;return(l[D[B+0]]+l[D[B+1]]+l[D[B+2]]+l[D[B+3]]+"-"+l[D[B+4]]+l[D[B+5]]+"-"+l[D[B+6]]+l[D[B+7]]+"-"+l[D[B+8]]+l[D[B+9]]+"-"+l[D[B+10]]+l[D[B+11]]+l[D[B+12]]+l[D[B+13]]+l[D[B+14]]+l[D[B+15]]).toLowerCase()}},3306:(oe,N,l)=>{Object.defineProperty(N,"v1",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(N,"v3",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(N,"v4",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(N,"v5",{enumerable:!0,get:function(){return B.default}});var a=L(l(9110)),D=L(l(8693)),p=L(l(491)),B=L(l(8518));function L(F){return F&&F.__esModule?F:{default:F}}},872:(oe,N)=>{function a(P){return 14+(P+64>>>9<<4)+1}function B(P,x){const R=(65535&P)+(65535&x);return(P>>16)+(x>>16)+(R>>16)<<16|65535&R}function F(P,x,R,E,y,c){return B(function(P,x){return P<<x|P>>>32-x}(B(B(x,P),B(E,c)),y),R)}function M(P,x,R,E,y,c,o){return F(x&R|~x&E,P,x,y,c,o)}function I(P,x,R,E,y,c,o){return F(x&E|R&~E,P,x,y,c,o)}function S(P,x,R,E,y,c,o){return F(x^R^E,P,x,y,c,o)}function w(P,x,R,E,y,c,o){return F(R^(x|~E),P,x,y,c,o)}Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.default=function(P){if("string"==typeof P){const x=unescape(encodeURIComponent(P));P=new Uint8Array(x.length);for(let R=0;R<x.length;++R)P[R]=x.charCodeAt(R)}return function(P){const x=[],R=32*P.length,E="0123456789abcdef";for(let y=0;y<R;y+=8){const c=P[y>>5]>>>y%32&255,o=parseInt(E.charAt(c>>>4&15)+E.charAt(15&c),16);x.push(o)}return x}(function(P,x){P[x>>5]|=128<<x%32,P[a(x)-1]=x;let R=1732584193,E=-271733879,y=-1732584194,c=271733878;for(let o=0;o<P.length;o+=16){const v=R,h=E,K=y,ue=c;R=M(R,E,y,c,P[o],7,-680876936),c=M(c,R,E,y,P[o+1],12,-389564586),y=M(y,c,R,E,P[o+2],17,606105819),E=M(E,y,c,R,P[o+3],22,-1044525330),R=M(R,E,y,c,P[o+4],7,-176418897),c=M(c,R,E,y,P[o+5],12,1200080426),y=M(y,c,R,E,P[o+6],17,-1473231341),E=M(E,y,c,R,P[o+7],22,-45705983),R=M(R,E,y,c,P[o+8],7,1770035416),c=M(c,R,E,y,P[o+9],12,-1958414417),y=M(y,c,R,E,P[o+10],17,-42063),E=M(E,y,c,R,P[o+11],22,-1990404162),R=M(R,E,y,c,P[o+12],7,1804603682),c=M(c,R,E,y,P[o+13],12,-40341101),y=M(y,c,R,E,P[o+14],17,-1502002290),E=M(E,y,c,R,P[o+15],22,1236535329),R=I(R,E,y,c,P[o+1],5,-165796510),c=I(c,R,E,y,P[o+6],9,-1069501632),y=I(y,c,R,E,P[o+11],14,643717713),E=I(E,y,c,R,P[o],20,-373897302),R=I(R,E,y,c,P[o+5],5,-701558691),c=I(c,R,E,y,P[o+10],9,38016083),y=I(y,c,R,E,P[o+15],14,-660478335),E=I(E,y,c,R,P[o+4],20,-405537848),R=I(R,E,y,c,P[o+9],5,568446438),c=I(c,R,E,y,P[o+14],9,-1019803690),y=I(y,c,R,E,P[o+3],14,-187363961),E=I(E,y,c,R,P[o+8],20,1163531501),R=I(R,E,y,c,P[o+13],5,-1444681467),c=I(c,R,E,y,P[o+2],9,-51403784),y=I(y,c,R,E,P[o+7],14,1735328473),E=I(E,y,c,R,P[o+12],20,-1926607734),R=S(R,E,y,c,P[o+5],4,-378558),c=S(c,R,E,y,P[o+8],11,-2022574463),y=S(y,c,R,E,P[o+11],16,1839030562),E=S(E,y,c,R,P[o+14],23,-35309556),R=S(R,E,y,c,P[o+1],4,-1530992060),c=S(c,R,E,y,P[o+4],11,1272893353),y=S(y,c,R,E,P[o+7],16,-155497632),E=S(E,y,c,R,P[o+10],23,-1094730640),R=S(R,E,y,c,P[o+13],4,681279174),c=S(c,R,E,y,P[o],11,-358537222),y=S(y,c,R,E,P[o+3],16,-722521979),E=S(E,y,c,R,P[o+6],23,76029189),R=S(R,E,y,c,P[o+9],4,-640364487),c=S(c,R,E,y,P[o+12],11,-421815835),y=S(y,c,R,E,P[o+15],16,530742520),E=S(E,y,c,R,P[o+2],23,-995338651),R=w(R,E,y,c,P[o],6,-198630844),c=w(c,R,E,y,P[o+7],10,1126891415),y=w(y,c,R,E,P[o+14],15,-1416354905),E=w(E,y,c,R,P[o+5],21,-57434055),R=w(R,E,y,c,P[o+12],6,1700485571),c=w(c,R,E,y,P[o+3],10,-1894986606),y=w(y,c,R,E,P[o+10],15,-1051523),E=w(E,y,c,R,P[o+1],21,-2054922799),R=w(R,E,y,c,P[o+8],6,1873313359),c=w(c,R,E,y,P[o+15],10,-30611744),y=w(y,c,R,E,P[o+6],15,-1560198380),E=w(E,y,c,R,P[o+13],21,1309151649),R=w(R,E,y,c,P[o+4],6,-145523070),c=w(c,R,E,y,P[o+11],10,-1120210379),y=w(y,c,R,E,P[o+2],15,718787259),E=w(E,y,c,R,P[o+9],21,-343485551),R=B(R,v),E=B(E,h),y=B(y,K),c=B(c,ue)}return[R,E,y,c]}(function(P){if(0===P.length)return[];const x=8*P.length,R=new Uint32Array(a(x));for(let E=0;E<x;E+=8)R[E>>5]|=(255&P[E/8])<<E%32;return R}(P),8*P.length))}},5468:(oe,N)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(){if(!l)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(g)};const l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),g=new Uint8Array(16)},209:(oe,N)=>{function l(p,B,L,F){switch(p){case 0:return B&L^~B&F;case 1:case 3:return B^L^F;case 2:return B&L^B&F^L&F}}function g(p,B){return p<<B|p>>>32-B}Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0,N.default=function(p){const B=[1518500249,1859775393,2400959708,3395469782],L=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof p){const S=unescape(encodeURIComponent(p));p=[];for(let w=0;w<S.length;++w)p.push(S.charCodeAt(w))}p.push(128);const M=Math.ceil((p.length/4+2)/16),I=new Array(M);for(let S=0;S<M;++S){const w=new Uint32Array(16);for(let T=0;T<16;++T)w[T]=p[64*S+4*T]<<24|p[64*S+4*T+1]<<16|p[64*S+4*T+2]<<8|p[64*S+4*T+3];I[S]=w}I[M-1][14]=8*(p.length-1)/Math.pow(2,32),I[M-1][14]=Math.floor(I[M-1][14]),I[M-1][15]=8*(p.length-1)&4294967295;for(let S=0;S<M;++S){const w=new Uint32Array(80);for(let y=0;y<16;++y)w[y]=I[S][y];for(let y=16;y<80;++y)w[y]=g(w[y-3]^w[y-8]^w[y-14]^w[y-16],1);let T=L[0],P=L[1],x=L[2],R=L[3],E=L[4];for(let y=0;y<80;++y){const c=Math.floor(y/20),o=g(T,5)+l(c,P,x,R)+E+B[c]+w[y]>>>0;E=R,R=x,x=g(P,30)>>>0,P=T,T=o}L[0]=L[0]+T>>>0,L[1]=L[1]+P>>>0,L[2]=L[2]+x>>>0,L[3]=L[3]+R>>>0,L[4]=L[4]+E>>>0}return[L[0]>>24&255,L[0]>>16&255,L[0]>>8&255,255&L[0],L[1]>>24&255,L[1]>>16&255,L[1]>>8&255,255&L[1],L[2]>>24&255,L[2]>>16&255,L[2]>>8&255,255&L[2],L[3]>>24&255,L[3]>>16&255,L[3]>>8&255,255&L[3],L[4]>>24&255,L[4]>>16&255,L[4]>>8&255,255&L[4]]}},9110:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(5468)),a=D(l(2448));function D(S){return S&&S.__esModule?S:{default:S}}let p,B,L=0,F=0;N.default=function(S,w,T){let P=w&&T||0;const x=w||[];let R=(S=S||{}).node||p,E=void 0!==S.clockseq?S.clockseq:B;if(null==R||null==E){const K=S.random||(S.rng||g.default)();null==R&&(R=p=[1|K[0],K[1],K[2],K[3],K[4],K[5]]),null==E&&(E=B=16383&(K[6]<<8|K[7]))}let y=void 0!==S.msecs?S.msecs:Date.now(),c=void 0!==S.nsecs?S.nsecs:F+1;const o=y-L+(c-F)/1e4;if(o<0&&void 0===S.clockseq&&(E=E+1&16383),(o<0||y>L)&&void 0===S.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");L=y,F=c,B=E,y+=122192928e5;const v=(1e4*(268435455&y)+c)%4294967296;x[P++]=v>>>24&255,x[P++]=v>>>16&255,x[P++]=v>>>8&255,x[P++]=255&v;const h=y/4294967296*1e4&268435455;x[P++]=h>>>8&255,x[P++]=255&h,x[P++]=h>>>24&15|16,x[P++]=h>>>16&255,x[P++]=E>>>8|128,x[P++]=255&E;for(let K=0;K<6;++K)x[P+K]=R[K];return w||(0,a.default)(x)}},8693:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(1657)),a=D(l(872));function D(L){return L&&L.__esModule?L:{default:L}}var B=(0,g.default)("v3",48,a.default);N.default=B},1657:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(M,I,S){function w(T,P,x,R){const E=x&&R||0;if("string"==typeof T&&(T=function(M){M=unescape(encodeURIComponent(M));const I=[];for(let S=0;S<M.length;++S)I.push(M.charCodeAt(S));return I}(T)),"string"==typeof P&&(P=function(M){const I=[];return M.replace(/[a-fA-F0-9]{2}/g,function(S){I.push(parseInt(S,16))}),I}(P)),!Array.isArray(T))throw TypeError("value must be an array of bytes");if(!Array.isArray(P)||16!==P.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const y=S(P.concat(T));if(y[6]=15&y[6]|I,y[8]=63&y[8]|128,x)for(let c=0;c<16;++c)x[E+c]=y[c];return x||(0,g.default)(y)}try{w.name=M}catch{}return w.DNS=B,w.URL=L,w},N.URL=N.DNS=void 0;var M,g=(M=l(2448))&&M.__esModule?M:{default:M};const B="6ba7b810-9dad-11d1-80b4-00c04fd430c8";N.DNS=B;const L="6ba7b811-9dad-11d1-80b4-00c04fd430c8";N.URL=L},491:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(5468)),a=D(l(2448));function D(L){return L&&L.__esModule?L:{default:L}}N.default=function(L,F,M){"string"==typeof L&&(F="binary"===L?new Uint8Array(16):null,L=null);const I=(L=L||{}).random||(L.rng||g.default)();if(I[6]=15&I[6]|64,I[8]=63&I[8]|128,F){const S=M||0;for(let w=0;w<16;++w)F[S+w]=I[w];return F}return(0,a.default)(I)}},8518:(oe,N,l)=>{Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var g=D(l(1657)),a=D(l(209));function D(L){return L&&L.__esModule?L:{default:L}}var B=(0,g.default)("v5",80,a.default);N.default=B},7854:oe=>{var N=function(l){"use strict";var D,g=Object.prototype,a=g.hasOwnProperty,p="function"==typeof Symbol?Symbol:{},B=p.iterator||"@@iterator",L=p.asyncIterator||"@@asyncIterator",F=p.toStringTag||"@@toStringTag";function M(H,ie,we){return Object.defineProperty(H,ie,{value:we,enumerable:!0,configurable:!0,writable:!0}),H[ie]}try{M({},"")}catch{M=function(ie,we,Be){return ie[we]=Be}}function I(H,ie,we,Be){var _e=Object.create((ie&&ie.prototype instanceof E?ie:E).prototype),re=new J(Be||[]);return _e._invoke=function(H,ie,we){var Be=w;return function(_e,re){if(Be===P)throw new Error("Generator is already running");if(Be===x){if("throw"===_e)throw re;return X()}for(we.method=_e,we.arg=re;;){var ce=we.delegate;if(ce){var Te=pe(ce,we);if(Te){if(Te===R)continue;return Te}}if("next"===we.method)we.sent=we._sent=we.arg;else if("throw"===we.method){if(Be===w)throw Be=x,we.arg;we.dispatchException(we.arg)}else"return"===we.method&&we.abrupt("return",we.arg);Be=P;var Ne=S(H,ie,we);if("normal"===Ne.type){if(Be=we.done?x:T,Ne.arg===R)continue;return{value:Ne.arg,done:we.done}}"throw"===Ne.type&&(Be=x,we.method="throw",we.arg=Ne.arg)}}}(H,we,re),_e}function S(H,ie,we){try{return{type:"normal",arg:H.call(ie,we)}}catch(Be){return{type:"throw",arg:Be}}}l.wrap=I;var w="suspendedStart",T="suspendedYield",P="executing",x="completed",R={};function E(){}function y(){}function c(){}var o={};M(o,B,function(){return this});var v=Object.getPrototypeOf,h=v&&v(v(G([])));h&&h!==g&&a.call(h,B)&&(o=h);var K=c.prototype=E.prototype=Object.create(o);function ue(H){["next","throw","return"].forEach(function(ie){M(H,ie,function(we){return this._invoke(ie,we)})})}function Ee(H,ie){function we(_e,re,ce,Te){var Ne=S(H[_e],H,re);if("throw"!==Ne.type){var Qe=Ne.arg,ut=Qe.value;return ut&&"object"==typeof ut&&a.call(ut,"__await")?ie.resolve(ut.__await).then(function(et){we("next",et,ce,Te)},function(et){we("throw",et,ce,Te)}):ie.resolve(ut).then(function(et){Qe.value=et,ce(Qe)},function(et){return we("throw",et,ce,Te)})}Te(Ne.arg)}var Be;this._invoke=function(_e,re){function ce(){return new ie(function(Te,Ne){we(_e,re,Te,Ne)})}return Be=Be?Be.then(ce,ce):ce()}}function pe(H,ie){var we=H.iterator[ie.method];if(we===D){if(ie.delegate=null,"throw"===ie.method){if(H.iterator.return&&(ie.method="return",ie.arg=D,pe(H,ie),"throw"===ie.method))return R;ie.method="throw",ie.arg=new TypeError("The iterator does not provide a 'throw' method")}return R}var Be=S(we,H.iterator,ie.arg);if("throw"===Be.type)return ie.method="throw",ie.arg=Be.arg,ie.delegate=null,R;var me=Be.arg;return me?me.done?(ie[H.resultName]=me.value,ie.next=H.nextLoc,"return"!==ie.method&&(ie.method="next",ie.arg=D),ie.delegate=null,R):me:(ie.method="throw",ie.arg=new TypeError("iterator result is not an object"),ie.delegate=null,R)}function Y(H){var ie={tryLoc:H[0]};1 in H&&(ie.catchLoc=H[1]),2 in H&&(ie.finallyLoc=H[2],ie.afterLoc=H[3]),this.tryEntries.push(ie)}function $(H){var ie=H.completion||{};ie.type="normal",delete ie.arg,H.completion=ie}function J(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(Y,this),this.reset(!0)}function G(H){if(H){var ie=H[B];if(ie)return ie.call(H);if("function"==typeof H.next)return H;if(!isNaN(H.length)){var we=-1,Be=function me(){for(;++we<H.length;)if(a.call(H,we))return me.value=H[we],me.done=!1,me;return me.value=D,me.done=!0,me};return Be.next=Be}}return{next:X}}function X(){return{value:D,done:!0}}return y.prototype=c,M(K,"constructor",c),M(c,"constructor",y),y.displayName=M(c,F,"GeneratorFunction"),l.isGeneratorFunction=function(H){var ie="function"==typeof H&&H.constructor;return!!ie&&(ie===y||"GeneratorFunction"===(ie.displayName||ie.name))},l.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,c):(H.__proto__=c,M(H,F,"GeneratorFunction")),H.prototype=Object.create(K),H},l.awrap=function(H){return{__await:H}},ue(Ee.prototype),M(Ee.prototype,L,function(){return this}),l.AsyncIterator=Ee,l.async=function(H,ie,we,Be,me){void 0===me&&(me=Promise);var _e=new Ee(I(H,ie,we,Be),me);return l.isGeneratorFunction(ie)?_e:_e.next().then(function(re){return re.done?re.value:_e.next()})},ue(K),M(K,F,"Generator"),M(K,B,function(){return this}),M(K,"toString",function(){return"[object Generator]"}),l.keys=function(H){var ie=[];for(var we in H)ie.push(we);return ie.reverse(),function Be(){for(;ie.length;){var me=ie.pop();if(me in H)return Be.value=me,Be.done=!1,Be}return Be.done=!0,Be}},l.values=G,J.prototype={constructor:J,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=D,this.done=!1,this.delegate=null,this.method="next",this.arg=D,this.tryEntries.forEach($),!H)for(var ie in this)"t"===ie.charAt(0)&&a.call(this,ie)&&!isNaN(+ie.slice(1))&&(this[ie]=D)},stop:function(){this.done=!0;var ie=this.tryEntries[0].completion;if("throw"===ie.type)throw ie.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var ie=this;function we(Te,Ne){return _e.type="throw",_e.arg=H,ie.next=Te,Ne&&(ie.method="next",ie.arg=D),!!Ne}for(var Be=this.tryEntries.length-1;Be>=0;--Be){var me=this.tryEntries[Be],_e=me.completion;if("root"===me.tryLoc)return we("end");if(me.tryLoc<=this.prev){var re=a.call(me,"catchLoc"),ce=a.call(me,"finallyLoc");if(re&&ce){if(this.prev<me.catchLoc)return we(me.catchLoc,!0);if(this.prev<me.finallyLoc)return we(me.finallyLoc)}else if(re){if(this.prev<me.catchLoc)return we(me.catchLoc,!0)}else{if(!ce)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return we(me.finallyLoc)}}}},abrupt:function(H,ie){for(var we=this.tryEntries.length-1;we>=0;--we){var Be=this.tryEntries[we];if(Be.tryLoc<=this.prev&&a.call(Be,"finallyLoc")&&this.prev<Be.finallyLoc){var me=Be;break}}me&&("break"===H||"continue"===H)&&me.tryLoc<=ie&&ie<=me.finallyLoc&&(me=null);var _e=me?me.completion:{};return _e.type=H,_e.arg=ie,me?(this.method="next",this.next=me.finallyLoc,R):this.complete(_e)},complete:function(H,ie){if("throw"===H.type)throw H.arg;return"break"===H.type||"continue"===H.type?this.next=H.arg:"return"===H.type?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):"normal"===H.type&&ie&&(this.next=ie),R},finish:function(H){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var we=this.tryEntries[ie];if(we.finallyLoc===H)return this.complete(we.completion,we.afterLoc),$(we),R}},catch:function(H){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var we=this.tryEntries[ie];if(we.tryLoc===H){var Be=we.completion;if("throw"===Be.type){var me=Be.arg;$(we)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(H,ie,we){return this.delegate={iterator:G(H),resultName:ie,nextLoc:we},"next"===this.method&&(this.arg=D),R}},l}(oe.exports);try{regeneratorRuntime=N}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=N:Function("r","regeneratorRuntime = r")(N)}},4468:oe=>{var N=Object,l=TypeError;oe.exports=function(){if(null!=this&&this!==N(this))throw new l("RegExp.prototype.flags getter called on non-object");var a="";return this.global&&(a+="g"),this.ignoreCase&&(a+="i"),this.multiline&&(a+="m"),this.dotAll&&(a+="s"),this.unicode&&(a+="u"),this.sticky&&(a+="y"),a}},9235:(oe,N,l)=>{var g=l(2358),a=l(5685),D=l(4468),p=l(6343),B=l(1956),L=a(D);g(L,{getPolyfill:p,implementation:D,shim:B}),oe.exports=L},6343:(oe,N,l)=>{var g=l(4468),a=l(2358).supportsDescriptors,D=Object.getOwnPropertyDescriptor,p=TypeError;oe.exports=function(){if(!a)throw new p("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var L=D(RegExp.prototype,"flags");if(L&&"function"==typeof L.get&&"boolean"==typeof/a/.dotAll)return L.get}return g}},1956:(oe,N,l)=>{var g=l(2358).supportsDescriptors,a=l(6343),D=Object.getOwnPropertyDescriptor,p=Object.defineProperty,B=TypeError,L=Object.getPrototypeOf,F=/a/;oe.exports=function(){if(!g||!L)throw new B("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var I=a(),S=L(F),w=D(S,"flags");return(!w||w.get!==I)&&p(S,"flags",{configurable:!0,enumerable:!1,get:I}),I}},4966:oe=>{var N=function(){"use strict";function l(S,w){return null!=w&&S instanceof w}var g,a,D;try{g=Map}catch{g=function(){}}try{a=Set}catch{a=function(){}}try{D=Promise}catch{D=function(){}}function p(S,w,T,P,x){"object"==typeof w&&(T=w.depth,P=w.prototype,x=w.includeNonEnumerable,w=w.circular);var R=[],E=[],y="undefined"!=typeof Buffer;return void 0===w&&(w=!0),void 0===T&&(T=1/0),function c(o,v){if(null===o)return null;if(0===v)return o;var h,K;if("object"!=typeof o)return o;if(l(o,g))h=new g;else if(l(o,a))h=new a;else if(l(o,D))h=new D(function(X,H){o.then(function(ie){X(c(ie,v-1))},function(ie){H(c(ie,v-1))})});else if(p.__isArray(o))h=[];else if(p.__isRegExp(o))h=new RegExp(o.source,I(o)),o.lastIndex&&(h.lastIndex=o.lastIndex);else if(p.__isDate(o))h=new Date(o.getTime());else{if(y&&Buffer.isBuffer(o))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(h),h;l(o,Error)?h=Object.create(o):void 0===P?(K=Object.getPrototypeOf(o),h=Object.create(K)):(h=Object.create(P),K=P)}if(w){var ue=R.indexOf(o);if(-1!=ue)return E[ue];R.push(o),E.push(h)}for(var Ee in l(o,g)&&o.forEach(function(X,H){var ie=c(H,v-1),we=c(X,v-1);h.set(ie,we)}),l(o,a)&&o.forEach(function(X){var H=c(X,v-1);h.add(H)}),o){var ge;K&&(ge=Object.getOwnPropertyDescriptor(K,Ee)),(!ge||null!=ge.set)&&(h[Ee]=c(o[Ee],v-1))}if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(o);for(Ee=0;Ee<pe.length;Ee++){var Y=pe[Ee];($=Object.getOwnPropertyDescriptor(o,Y))&&!$.enumerable&&!x||(h[Y]=c(o[Y],v-1),$.enumerable||Object.defineProperty(h,Y,{enumerable:!1}))}}if(x){var J=Object.getOwnPropertyNames(o);for(Ee=0;Ee<J.length;Ee++){var $,G=J[Ee];($=Object.getOwnPropertyDescriptor(o,G))&&$.enumerable||(h[G]=c(o[G],v-1),Object.defineProperty(h,G,{enumerable:!1}))}}return h}(S,T)}function B(S){return Object.prototype.toString.call(S)}function I(S){var w="";return S.global&&(w+="g"),S.ignoreCase&&(w+="i"),S.multiline&&(w+="m"),w}return p.clonePrototype=function(w){if(null===w)return null;var T=function(){};return T.prototype=w,new T},p.__objToStr=B,p.__isDate=function(S){return"object"==typeof S&&"[object Date]"===B(S)},p.__isArray=function(S){return"object"==typeof S&&"[object Array]"===B(S)},p.__isRegExp=function(S){return"object"==typeof S&&"[object RegExp]"===B(S)},p.__getRegExpFlags=I,p}();oe.exports&&(oe.exports=N)},1135:(oe,N,l)=>{l.d(N,{X:()=>a});var g=l(7579);class a extends g.x{constructor(p){super(),this._value=p}get value(){return this.getValue()}_subscribe(p){const B=super._subscribe(p);return!B.closed&&p.next(this._value),B}getValue(){const{hasError:p,thrownError:B,_value:L}=this;if(p)throw B;return this._throwIfClosed(),L}next(p){super.next(this._value=p)}}},8306:(oe,N,l)=>{l.d(N,{y:()=>S});var g=l(930),a=l(727),D=l(8822),p=l(4671);var F=l(2416),M=l(576),I=l(2806);let S=(()=>{class x{constructor(E){E&&(this._subscribe=E)}lift(E){const y=new x;return y.source=this,y.operator=E,y}subscribe(E,y,c){const o=function(x){return x&&x instanceof g.Lv||function(x){return x&&(0,M.m)(x.next)&&(0,M.m)(x.error)&&(0,M.m)(x.complete)}(x)&&(0,a.Nn)(x)}(E)?E:new g.Hp(E,y,c);return(0,I.x)(()=>{const{operator:v,source:h}=this;o.add(v?v.call(o,h):h?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(E){try{return this._subscribe(E)}catch(y){E.error(y)}}forEach(E,y){return new(y=w(y))((c,o)=>{const v=new g.Hp({next:h=>{try{E(h)}catch(K){o(K),v.unsubscribe()}},error:o,complete:c});this.subscribe(v)})}_subscribe(E){var y;return null===(y=this.source)||void 0===y?void 0:y.subscribe(E)}[D.L](){return this}pipe(...E){return function(x){return 0===x.length?p.y:1===x.length?x[0]:function(E){return x.reduce((y,c)=>c(y),E)}}(E)(this)}toPromise(E){return new(E=w(E))((y,c)=>{let o;this.subscribe(v=>o=v,v=>c(v),()=>y(o))})}}return x.create=R=>new x(R),x})();function w(x){var R;return null!==(R=x??F.v.Promise)&&void 0!==R?R:Promise}},7579:(oe,N,l)=>{l.d(N,{x:()=>F});var g=l(8306),a=l(727);const p=(0,l(3888).d)(I=>function(){I(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var B=l(8737),L=l(2806);let F=(()=>{class I extends g.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(w){const T=new M(this,this);return T.operator=w,T}_throwIfClosed(){if(this.closed)throw new p}next(w){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const T=this.observers.slice();for(const P of T)P.next(w)}})}error(w){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=w;const{observers:T}=this;for(;T.length;)T.shift().error(w)}})}complete(){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:w}=this;for(;w.length;)w.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var w;return(null===(w=this.observers)||void 0===w?void 0:w.length)>0}_trySubscribe(w){return this._throwIfClosed(),super._trySubscribe(w)}_subscribe(w){return this._throwIfClosed(),this._checkFinalizedStatuses(w),this._innerSubscribe(w)}_innerSubscribe(w){const{hasError:T,isStopped:P,observers:x}=this;return T||P?a.Lc:(x.push(w),new a.w0(()=>(0,B.P)(x,w)))}_checkFinalizedStatuses(w){const{hasError:T,thrownError:P,isStopped:x}=this;T?w.error(P):x&&w.complete()}asObservable(){const w=new g.y;return w.source=this,w}}return I.create=(S,w)=>new M(S,w),I})();class M extends F{constructor(S,w){super(),this.destination=S,this.source=w}next(S){var w,T;null===(T=null===(w=this.destination)||void 0===w?void 0:w.next)||void 0===T||T.call(w,S)}error(S){var w,T;null===(T=null===(w=this.destination)||void 0===w?void 0:w.error)||void 0===T||T.call(w,S)}complete(){var S,w;null===(w=null===(S=this.destination)||void 0===S?void 0:S.complete)||void 0===w||w.call(S)}_subscribe(S){var w,T;return null!==(T=null===(w=this.source)||void 0===w?void 0:w.subscribe(S))&&void 0!==T?T:a.Lc}}},930:(oe,N,l)=>{l.d(N,{Hp:()=>P,Lv:()=>T});var g=l(576),a=l(727),D=l(2416),p=l(7849),B=l(5032);const L=I("C",void 0,void 0);function I(c,o,v){return{kind:c,value:o,error:v}}var S=l(3410),w=l(2806);class T extends a.w0{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,(0,a.Nn)(o)&&o.add(this)):this.destination=y}static create(o,v,h){return new P(o,v,h)}next(o){this.isStopped?E(I("N",o,void 0),this):this._next(o)}error(o){this.isStopped?E(I("E",void 0,o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?E(L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class P extends T{constructor(o,v,h){let K;if(super(),(0,g.m)(o))K=o;else if(o){let ue;({next:K,error:v,complete:h}=o),this&&D.v.useDeprecatedNextContext?(ue=Object.create(o),ue.unsubscribe=()=>this.unsubscribe()):ue=o,K=null==K?void 0:K.bind(ue),v=null==v?void 0:v.bind(ue),h=null==h?void 0:h.bind(ue)}this.destination={next:K?x(K):B.Z,error:x(v??R),complete:h?x(h):B.Z}}}function x(c,o){return(...v)=>{try{c(...v)}catch(h){D.v.useDeprecatedSynchronousErrorHandling?(0,w.O)(h):(0,p.h)(h)}}}function R(c){throw c}function E(c,o){const{onStoppedNotification:v}=D.v;v&&S.z.setTimeout(()=>v(c,o))}const y={closed:!0,next:B.Z,error:R,complete:B.Z}},727:(oe,N,l)=>{l.d(N,{Lc:()=>L,w0:()=>B,Nn:()=>F});var g=l(576);const D=(0,l(3888).d)(I=>function(w){I(this),this.message=w?`${w.length} errors occurred during unsubscription:\n${w.map((T,P)=>`${P+1}) ${T.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=w});var p=l(8737);class B{constructor(S){this.initialTeardown=S,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let S;if(!this.closed){this.closed=!0;const{_parentage:w}=this;if(w)if(this._parentage=null,Array.isArray(w))for(const x of w)x.remove(this);else w.remove(this);const{initialTeardown:T}=this;if((0,g.m)(T))try{T()}catch(x){S=x instanceof D?x.errors:[x]}const{_teardowns:P}=this;if(P){this._teardowns=null;for(const x of P)try{M(x)}catch(R){S=S??[],R instanceof D?S=[...S,...R.errors]:S.push(R)}}if(S)throw new D(S)}}add(S){var w;if(S&&S!==this)if(this.closed)M(S);else{if(S instanceof B){if(S.closed||S._hasParent(this))return;S._addParent(this)}(this._teardowns=null!==(w=this._teardowns)&&void 0!==w?w:[]).push(S)}}_hasParent(S){const{_parentage:w}=this;return w===S||Array.isArray(w)&&w.includes(S)}_addParent(S){const{_parentage:w}=this;this._parentage=Array.isArray(w)?(w.push(S),w):w?[w,S]:S}_removeParent(S){const{_parentage:w}=this;w===S?this._parentage=null:Array.isArray(w)&&(0,p.P)(w,S)}remove(S){const{_teardowns:w}=this;w&&(0,p.P)(w,S),S instanceof B&&S._removeParent(this)}}B.EMPTY=(()=>{const I=new B;return I.closed=!0,I})();const L=B.EMPTY;function F(I){return I instanceof B||I&&"closed"in I&&(0,g.m)(I.remove)&&(0,g.m)(I.add)&&(0,g.m)(I.unsubscribe)}function M(I){(0,g.m)(I)?I():I.unsubscribe()}},2416:(oe,N,l)=>{l.d(N,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3905:(oe,N,l)=>{l.d(N,{z:()=>D});var g=l(6805),a=l(930);function D(p,B){const L="object"==typeof B;return new Promise((F,M)=>{const I=new a.Hp({next:S=>{F(S),I.unsubscribe()},error:M,complete:()=>{L?F(B.defaultValue):M(new g.K)}});p.subscribe(I)})}},9841:(oe,N,l)=>{l.d(N,{a:()=>S});var g=l(8306),a=l(4742),D=l(2076),p=l(4671),B=l(3268),L=l(3269),F=l(1810),M=l(5403),I=l(9672);function S(...P){const x=(0,L.yG)(P),R=(0,L.jO)(P),{args:E,keys:y}=(0,a.D)(P);if(0===E.length)return(0,D.D)([],x);const c=new g.y(function(P,x,R=p.y){return E=>{T(x,()=>{const{length:y}=P,c=new Array(y);let o=y,v=y;for(let h=0;h<y;h++)T(x,()=>{const K=(0,D.D)(P[h],x);let ue=!1;K.subscribe(new M.Q(E,Ee=>{c[h]=Ee,ue||(ue=!0,v--),v||E.next(R(c.slice()))},()=>{--o||E.complete()}))},E)},E)}}(E,x,y?o=>(0,F.n)(y,o):p.y));return R?c.pipe((0,B.Z)(R)):c}function T(P,x,R){P?(0,I.f)(R,P,x):x()}},7272:(oe,N,l)=>{l.d(N,{z:()=>B});var g=l(8189),D=l(3269),p=l(2076);function B(...L){return(0,g.J)(1)((0,p.D)(L,(0,D.yG)(L)))}},9770:(oe,N,l)=>{l.d(N,{P:()=>D});var g=l(8306),a=l(8421);function D(p){return new g.y(B=>{(0,a.Xf)(p()).subscribe(B)})}},515:(oe,N,l)=>{l.d(N,{E:()=>a});const a=new(l(8306).y)(B=>B.complete())},4128:(oe,N,l)=>{l.d(N,{D:()=>M});var g=l(8306),a=l(4742),D=l(8421),p=l(3269),B=l(5403),L=l(3268),F=l(1810);function M(...I){const S=(0,p.jO)(I),{args:w,keys:T}=(0,a.D)(I),P=new g.y(x=>{const{length:R}=w;if(!R)return void x.complete();const E=new Array(R);let y=R,c=R;for(let o=0;o<R;o++){let v=!1;(0,D.Xf)(w[o]).subscribe(new B.Q(x,h=>{v||(v=!0,c--),E[o]=h},()=>y--,void 0,()=>{(!y||!v)&&(c||x.next(T?(0,F.n)(T,E):E),x.complete())}))}});return S?P.pipe((0,L.Z)(S)):P}},2076:(oe,N,l)=>{l.d(N,{D:()=>Ee});var g=l(8421),a=l(9672),D=l(4482),p=l(5403);function B(ge,pe=0){return(0,D.e)((Y,$)=>{Y.subscribe(new p.Q($,J=>(0,a.f)($,ge,()=>$.next(J),pe),()=>(0,a.f)($,ge,()=>$.complete(),pe),J=>(0,a.f)($,ge,()=>$.error(J),pe)))})}function L(ge,pe=0){return(0,D.e)((Y,$)=>{$.add(ge.schedule(()=>Y.subscribe($),pe))})}var I=l(8306),w=l(2202),T=l(576);function x(ge,pe){if(!ge)throw new Error("Iterable cannot be null");return new I.y(Y=>{(0,a.f)(Y,pe,()=>{const $=ge[Symbol.asyncIterator]();(0,a.f)(Y,pe,()=>{$.next().then(J=>{J.done?Y.complete():Y.next(J.value)})},0,!0)})})}var R=l(3670),E=l(8239),y=l(1144),c=l(6495),o=l(2206),v=l(4532),h=l(3260);function Ee(ge,pe){return pe?function(ge,pe){if(null!=ge){if((0,R.c)(ge))return function(ge,pe){return(0,g.Xf)(ge).pipe(L(pe),B(pe))}(ge,pe);if((0,y.z)(ge))return function(ge,pe){return new I.y(Y=>{let $=0;return pe.schedule(function(){$===ge.length?Y.complete():(Y.next(ge[$++]),Y.closed||this.schedule())})})}(ge,pe);if((0,E.t)(ge))return function(ge,pe){return(0,g.Xf)(ge).pipe(L(pe),B(pe))}(ge,pe);if((0,o.D)(ge))return x(ge,pe);if((0,c.T)(ge))return function(ge,pe){return new I.y(Y=>{let $;return(0,a.f)(Y,pe,()=>{$=ge[w.h](),(0,a.f)(Y,pe,()=>{let J,G;try{({value:J,done:G}=$.next())}catch(X){return void Y.error(X)}G?Y.complete():Y.next(J)},0,!0)}),()=>(0,T.m)(null==$?void 0:$.return)&&$.return()})}(ge,pe);if((0,h.L)(ge))return function(ge,pe){return x((0,h.Q)(ge),pe)}(ge,pe)}throw(0,v.z)(ge)}(ge,pe):(0,g.Xf)(ge)}},4968:(oe,N,l)=>{l.d(N,{R:()=>S});var g=l(8421),a=l(8306),D=l(5577),p=l(1144),B=l(576),L=l(3268);const F=["addListener","removeListener"],M=["addEventListener","removeEventListener"],I=["on","off"];function S(R,E,y,c){if((0,B.m)(y)&&(c=y,y=void 0),c)return S(R,E,y).pipe((0,L.Z)(c));const[o,v]=function(R){return(0,B.m)(R.addEventListener)&&(0,B.m)(R.removeEventListener)}(R)?M.map(h=>K=>R[h](E,K,y)):function(R){return(0,B.m)(R.addListener)&&(0,B.m)(R.removeListener)}(R)?F.map(w(R,E)):function(R){return(0,B.m)(R.on)&&(0,B.m)(R.off)}(R)?I.map(w(R,E)):[];if(!o&&(0,p.z)(R))return(0,D.z)(h=>S(h,E,y))((0,g.Xf)(R));if(!o)throw new TypeError("Invalid event target");return new a.y(h=>{const K=(...ue)=>h.next(1<ue.length?ue:ue[0]);return o(K),()=>v(K)})}function w(R,E){return y=>c=>R[y](E,c)}},8421:(oe,N,l)=>{l.d(N,{Xf:()=>P});var g=l(655),a=l(1144),D=l(8239),p=l(8306),B=l(3670),L=l(2206),F=l(4532),M=l(6495),I=l(3260),S=l(576),w=l(7849),T=l(8822);function P(h){if(h instanceof p.y)return h;if(null!=h){if((0,B.c)(h))return function(h){return new p.y(K=>{const ue=h[T.L]();if((0,S.m)(ue.subscribe))return ue.subscribe(K);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(h);if((0,a.z)(h))return function(h){return new p.y(K=>{for(let ue=0;ue<h.length&&!K.closed;ue++)K.next(h[ue]);K.complete()})}(h);if((0,D.t)(h))return function(h){return new p.y(K=>{h.then(ue=>{K.closed||(K.next(ue),K.complete())},ue=>K.error(ue)).then(null,w.h)})}(h);if((0,L.D)(h))return c(h);if((0,M.T)(h))return function(h){return new p.y(K=>{for(const ue of h)if(K.next(ue),K.closed)return;K.complete()})}(h);if((0,I.L)(h))return function(h){return c((0,I.Q)(h))}(h)}throw(0,F.z)(h)}function c(h){return new p.y(K=>{(function(h,K){var ue,Ee,ge,pe;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ue=(0,g.KL)(h);!(Ee=yield ue.next()).done;)if(K.next(Ee.value),K.closed)return}catch(Y){ge={error:Y}}finally{try{Ee&&!Ee.done&&(pe=ue.return)&&(yield pe.call(ue))}finally{if(ge)throw ge.error}}K.complete()})})(h,K).catch(ue=>K.error(ue))})}},6451:(oe,N,l)=>{l.d(N,{T:()=>L});var g=l(8189),a=l(8421),D=l(515),p=l(3269),B=l(2076);function L(...F){const M=(0,p.yG)(F),I=(0,p._6)(F,1/0),S=F;return S.length?1===S.length?(0,a.Xf)(S[0]):(0,g.J)(I)((0,B.D)(S,M)):D.E}},9646:(oe,N,l)=>{l.d(N,{of:()=>D});var g=l(3269),a=l(2076);function D(...p){const B=(0,g.yG)(p);return(0,a.D)(p,B)}},2843:(oe,N,l)=>{l.d(N,{_:()=>D});var g=l(8306),a=l(576);function D(p,B){const L=(0,a.m)(p)?p:()=>p,F=M=>M.error(L());return new g.y(B?M=>B.schedule(F,0,M):F)}},5963:(oe,N,l)=>{l.d(N,{H:()=>B});var g=l(8306),a=l(4986),D=l(3532);function B(L=0,F,M=a.P){let I=-1;return null!=F&&((0,D.K)(F)?M=F:I=F),new g.y(S=>{let w=function(L){return L instanceof Date&&!isNaN(L)}(L)?+L-M.now():L;w<0&&(w=0);let T=0;return M.schedule(function(){S.closed||(S.next(T++),0<=I?this.schedule(void 0,I):S.complete())},w)})}},5403:(oe,N,l)=>{l.d(N,{Q:()=>a});var g=l(930);class a extends g.Lv{constructor(p,B,L,F,M){super(p),this.onFinalize=M,this._next=B?function(I){try{B(I)}catch(S){p.error(S)}}:super._next,this._error=F?function(I){try{F(I)}catch(S){p.error(S)}finally{this.unsubscribe()}}:super._error,this._complete=L?function(){try{L()}catch(I){p.error(I)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var p;const{closed:B}=this;super.unsubscribe(),!B&&(null===(p=this.onFinalize)||void 0===p||p.call(this))}}},3601:(oe,N,l)=>{l.d(N,{e:()=>F});var g=l(4986),a=l(4482),D=l(8421),p=l(5403),L=l(5963);function F(M,I=g.P){return function(M){return(0,a.e)((I,S)=>{let w=!1,T=null,P=null,x=!1;const R=()=>{if(null==P||P.unsubscribe(),P=null,w){w=!1;const y=T;T=null,S.next(y)}x&&S.complete()},E=()=>{P=null,x&&S.complete()};I.subscribe(new p.Q(S,y=>{w=!0,T=y,P||(0,D.Xf)(M()).subscribe(P=new p.Q(S,R,E))},()=>{x=!0,(!w||!P||P.closed)&&S.complete()}))})}(()=>(0,L.H)(M,I))}},262:(oe,N,l)=>{l.d(N,{K:()=>p});var g=l(8421),a=l(5403),D=l(4482);function p(B){return(0,D.e)((L,F)=>{let S,M=null,I=!1;M=L.subscribe(new a.Q(F,void 0,void 0,w=>{S=(0,g.Xf)(B(w,p(B)(L))),M?(M.unsubscribe(),M=null,S.subscribe(F)):I=!0})),I&&(M.unsubscribe(),M=null,S.subscribe(F))})}},1884:(oe,N,l)=>{l.d(N,{x:()=>p});var g=l(4671),a=l(4482),D=l(5403);function p(L,F=g.y){return L=L??B,(0,a.e)((M,I)=>{let S,w=!0;M.subscribe(new D.Q(I,T=>{const P=F(T);(w||!L(S,P))&&(w=!1,S=P,I.next(T))}))})}function B(L,F){return L===F}},9300:(oe,N,l)=>{l.d(N,{h:()=>D});var g=l(4482),a=l(5403);function D(p,B){return(0,g.e)((L,F)=>{let M=0;L.subscribe(new a.Q(F,I=>p.call(B,I,M++)&&F.next(I)))})}},8746:(oe,N,l)=>{l.d(N,{x:()=>a});var g=l(4482);function a(D){return(0,g.e)((p,B)=>{try{p.subscribe(B)}finally{B.add(D)}})}},4004:(oe,N,l)=>{l.d(N,{U:()=>D});var g=l(4482),a=l(5403);function D(p,B){return(0,g.e)((L,F)=>{let M=0;L.subscribe(new a.Q(F,I=>{F.next(p.call(B,I,M++))}))})}},8189:(oe,N,l)=>{l.d(N,{J:()=>D});var g=l(5577),a=l(4671);function D(p=1/0){return(0,g.z)(a.y,p)}},5577:(oe,N,l)=>{l.d(N,{z:()=>M});var g=l(4004),a=l(8421),D=l(4482),B=(l(9672),l(5403)),F=l(576);function M(I,S,w=1/0){return(0,F.m)(S)?M((T,P)=>(0,g.U)((x,R)=>S(T,x,P,R))((0,a.Xf)(I(T,P))),w):("number"==typeof S&&(w=S),(0,D.e)((T,P)=>function(I,S,w,T,P,x,R,E){const y=[];let c=0,o=0,v=!1;const h=()=>{v&&!y.length&&!c&&S.complete()},K=Ee=>c<T?ue(Ee):y.push(Ee),ue=Ee=>{c++;let ge=!1;(0,a.Xf)(w(Ee,o++)).subscribe(new B.Q(S,pe=>{S.next(pe)},()=>{ge=!0},void 0,()=>{if(ge)try{for(c--;y.length&&c<T;){const pe=y.shift();ue(pe)}h()}catch(pe){S.error(pe)}}))};return I.subscribe(new B.Q(S,K,()=>{v=!0,h()})),()=>{}}(T,P,I,w)))}},3099:(oe,N,l)=>{l.d(N,{B:()=>L});var g=l(2076),a=l(5698),D=l(7579),p=l(930),B=l(4482);function L(M={}){const{connector:I=(()=>new D.x),resetOnError:S=!0,resetOnComplete:w=!0,resetOnRefCountZero:T=!0}=M;return P=>{let x=null,R=null,E=null,y=0,c=!1,o=!1;const v=()=>{null==R||R.unsubscribe(),R=null},h=()=>{v(),x=E=null,c=o=!1},K=()=>{const ue=x;h(),null==ue||ue.unsubscribe()};return(0,B.e)((ue,Ee)=>{y++,!o&&!c&&v();const ge=E=E??I();Ee.add(()=>{y--,0===y&&!o&&!c&&(R=F(K,T))}),ge.subscribe(Ee),x||(x=new p.Hp({next:pe=>ge.next(pe),error:pe=>{o=!0,v(),R=F(h,S,pe),ge.error(pe)},complete:()=>{c=!0,v(),R=F(h,w),ge.complete()}}),(0,g.D)(ue).subscribe(x))})(P)}}function F(M,I,...S){return!0===I?(M(),null):!1===I?null:I(...S).pipe((0,a.q)(1)).subscribe(()=>M())}},8675:(oe,N,l)=>{l.d(N,{O:()=>p});var g=l(7272),a=l(3269),D=l(4482);function p(...B){const L=(0,a.yG)(B);return(0,D.e)((F,M)=>{(L?(0,g.z)(B,F,L):(0,g.z)(B,F)).subscribe(M)})}},3900:(oe,N,l)=>{l.d(N,{w:()=>p});var g=l(8421),a=l(4482),D=l(5403);function p(B,L){return(0,a.e)((F,M)=>{let I=null,S=0,w=!1;const T=()=>w&&!I&&M.complete();F.subscribe(new D.Q(M,P=>{null==I||I.unsubscribe();let x=0;const R=S++;(0,g.Xf)(B(P,R)).subscribe(I=new D.Q(M,E=>M.next(L?L(P,E,R,x++):E),()=>{I=null,T()}))},()=>{w=!0,T()}))})}},5698:(oe,N,l)=>{l.d(N,{q:()=>p});var g=l(515),a=l(4482),D=l(5403);function p(B){return B<=0?()=>g.E:(0,a.e)((L,F)=>{let M=0;L.subscribe(new D.Q(F,I=>{++M<=B&&(F.next(I),B<=M&&F.complete())}))})}},3085:(oe,N,l)=>{l.d(N,{R:()=>B});var g=l(4482),a=l(5403),D=l(8421),p=l(5032);function B(L){return(0,g.e)((F,M)=>{(0,D.Xf)(L).subscribe(new a.Q(M,()=>M.complete(),p.Z)),!M.closed&&F.subscribe(M)})}},8505:(oe,N,l)=>{l.d(N,{b:()=>B});var g=l(576),a=l(4482),D=l(5403),p=l(4671);function B(L,F,M){const I=(0,g.m)(L)||F||M?{next:L,error:F,complete:M}:L;return I?(0,a.e)((S,w)=>{var T;null===(T=I.subscribe)||void 0===T||T.call(I);let P=!0;S.subscribe(new D.Q(w,x=>{var R;null===(R=I.next)||void 0===R||R.call(I,x),w.next(x)},()=>{var x;P=!1,null===(x=I.complete)||void 0===x||x.call(I),w.complete()},x=>{var R;P=!1,null===(R=I.error)||void 0===R||R.call(I,x),w.error(x)},()=>{var x,R;P&&(null===(x=I.unsubscribe)||void 0===x||x.call(I)),null===(R=I.finalize)||void 0===R||R.call(I)}))}):p.y}},4408:(oe,N,l)=>{l.d(N,{o:()=>B});var g=l(727);class a extends g.w0{constructor(F,M){super()}schedule(F,M=0){return this}}const D={setInterval(...L){const{delegate:F}=D;return((null==F?void 0:F.setInterval)||setInterval)(...L)},clearInterval(L){const{delegate:F}=D;return((null==F?void 0:F.clearInterval)||clearInterval)(L)},delegate:void 0};var p=l(8737);class B extends a{constructor(F,M){super(F,M),this.scheduler=F,this.work=M,this.pending=!1}schedule(F,M=0){if(this.closed)return this;this.state=F;const I=this.id,S=this.scheduler;return null!=I&&(this.id=this.recycleAsyncId(S,I,M)),this.pending=!0,this.delay=M,this.id=this.id||this.requestAsyncId(S,this.id,M),this}requestAsyncId(F,M,I=0){return D.setInterval(F.flush.bind(F,this),I)}recycleAsyncId(F,M,I=0){if(null!=I&&this.delay===I&&!1===this.pending)return M;D.clearInterval(M)}execute(F,M){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const I=this._execute(F,M);if(I)return I;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(F,M){let S,I=!1;try{this.work(F)}catch(w){I=!0,S=w||new Error("Scheduled action threw falsy error")}if(I)return this.unsubscribe(),S}unsubscribe(){if(!this.closed){const{id:F,scheduler:M}=this,{actions:I}=M;this.work=this.state=this.scheduler=null,this.pending=!1,(0,p.P)(I,this),null!=F&&(this.id=this.recycleAsyncId(M,F,null)),this.delay=null,super.unsubscribe()}}}},7565:(oe,N,l)=>{l.d(N,{v:()=>D});var g=l(6063);class a{constructor(B,L=a.now){this.schedulerActionCtor=B,this.now=L}schedule(B,L=0,F){return new this.schedulerActionCtor(this,B).schedule(F,L)}}a.now=g.l.now;class D extends a{constructor(B,L=a.now){super(B,L),this.actions=[],this._active=!1,this._scheduled=void 0}flush(B){const{actions:L}=this;if(this._active)return void L.push(B);let F;this._active=!0;do{if(F=B.execute(B.state,B.delay))break}while(B=L.shift());if(this._active=!1,F){for(;B=L.shift();)B.unsubscribe();throw F}}}},6406:(oe,N,l)=>{l.d(N,{Z:()=>F});var g=l(4408),a=l(727);const D={schedule(I){let S=requestAnimationFrame,w=cancelAnimationFrame;const{delegate:T}=D;T&&(S=T.requestAnimationFrame,w=T.cancelAnimationFrame);const P=S(x=>{w=void 0,I(x)});return new a.w0(()=>null==w?void 0:w(P))},requestAnimationFrame(...I){const{delegate:S}=D;return((null==S?void 0:S.requestAnimationFrame)||requestAnimationFrame)(...I)},cancelAnimationFrame(...I){const{delegate:S}=D;return((null==S?void 0:S.cancelAnimationFrame)||cancelAnimationFrame)(...I)},delegate:void 0};var B=l(7565);const F=new class extends B.v{flush(S){this._active=!0;const w=this._scheduled;this._scheduled=void 0;const{actions:T}=this;let P;S=S||T.shift();do{if(P=S.execute(S.state,S.delay))break}while((S=T[0])&&S.id===w&&T.shift());if(this._active=!1,P){for(;(S=T[0])&&S.id===w&&T.shift();)S.unsubscribe();throw P}}}(class extends g.o{constructor(S,w){super(S,w),this.scheduler=S,this.work=w}requestAsyncId(S,w,T=0){return null!==T&&T>0?super.requestAsyncId(S,w,T):(S.actions.push(this),S._scheduled||(S._scheduled=D.requestAnimationFrame(()=>S.flush(void 0))))}recycleAsyncId(S,w,T=0){if(null!=T&&T>0||null==T&&this.delay>0)return super.recycleAsyncId(S,w,T);S.actions.some(P=>P.id===w)||(D.cancelAnimationFrame(w),S._scheduled=void 0)}})},3101:(oe,N,l)=>{l.d(N,{E:()=>x});var g=l(4408);let D,a=1;const p={};function B(E){return E in p&&(delete p[E],!0)}const L={setImmediate(E){const y=a++;return p[y]=!0,D||(D=Promise.resolve()),D.then(()=>B(y)&&E()),y},clearImmediate(E){B(E)}},{setImmediate:M,clearImmediate:I}=L,S={setImmediate(...E){const{delegate:y}=S;return((null==y?void 0:y.setImmediate)||M)(...E)},clearImmediate(E){const{delegate:y}=S;return((null==y?void 0:y.clearImmediate)||I)(E)},delegate:void 0};var T=l(7565);const x=new class extends T.v{flush(y){this._active=!0;const c=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let v;y=y||o.shift();do{if(v=y.execute(y.state,y.delay))break}while((y=o[0])&&y.id===c&&o.shift());if(this._active=!1,v){for(;(y=o[0])&&y.id===c&&o.shift();)y.unsubscribe();throw v}}}(class extends g.o{constructor(y,c){super(y,c),this.scheduler=y,this.work=c}requestAsyncId(y,c,o=0){return null!==o&&o>0?super.requestAsyncId(y,c,o):(y.actions.push(this),y._scheduled||(y._scheduled=S.setImmediate(y.flush.bind(y,void 0))))}recycleAsyncId(y,c,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(y,c,o);y.actions.some(v=>v.id===c)||(S.clearImmediate(c),y._scheduled=void 0)}})},4986:(oe,N,l)=>{l.d(N,{z:()=>D,P:()=>p});var g=l(4408);const D=new(l(7565).v)(g.o),p=D},6063:(oe,N,l)=>{l.d(N,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(oe,N,l)=>{l.d(N,{z:()=>g});const g={setTimeout(...a){const{delegate:D}=g;return((null==D?void 0:D.setTimeout)||setTimeout)(...a)},clearTimeout(a){const{delegate:D}=g;return((null==D?void 0:D.clearTimeout)||clearTimeout)(a)},delegate:void 0}},2202:(oe,N,l)=>{l.d(N,{h:()=>a});const a="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},8822:(oe,N,l)=>{l.d(N,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(oe,N,l)=>{l.d(N,{K:()=>a});const a=(0,l(3888).d)(D=>function(){D(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(oe,N,l)=>{l.d(N,{jO:()=>p,yG:()=>B,_6:()=>L});var g=l(576),a=l(3532);function D(F){return F[F.length-1]}function p(F){return(0,g.m)(D(F))?F.pop():void 0}function B(F){return(0,a.K)(D(F))?F.pop():void 0}function L(F,M){return"number"==typeof D(F)?F.pop():M}},4742:(oe,N,l)=>{l.d(N,{D:()=>B});const{isArray:g}=Array,{getPrototypeOf:a,prototype:D,keys:p}=Object;function B(F){if(1===F.length){const M=F[0];if(g(M))return{args:M,keys:null};if(function(F){return F&&"object"==typeof F&&a(F)===D}(M)){const I=p(M);return{args:I.map(S=>M[S]),keys:I}}}return{args:F,keys:null}}},8737:(oe,N,l)=>{function g(a,D){if(a){const p=a.indexOf(D);0<=p&&a.splice(p,1)}}l.d(N,{P:()=>g})},3888:(oe,N,l)=>{function g(a){const p=a(B=>{Error.call(B),B.stack=(new Error).stack});return p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p}l.d(N,{d:()=>g})},1810:(oe,N,l)=>{function g(a,D){return a.reduce((p,B,L)=>(p[B]=D[L],p),{})}l.d(N,{n:()=>g})},2806:(oe,N,l)=>{l.d(N,{x:()=>D,O:()=>p});var g=l(2416);let a=null;function D(B){if(g.v.useDeprecatedSynchronousErrorHandling){const L=!a;if(L&&(a={errorThrown:!1,error:null}),B(),L){const{errorThrown:F,error:M}=a;if(a=null,F)throw M}}else B()}function p(B){g.v.useDeprecatedSynchronousErrorHandling&&a&&(a.errorThrown=!0,a.error=B)}},9672:(oe,N,l)=>{function g(a,D,p,B=0,L=!1){const F=D.schedule(function(){p(),L?a.add(this.schedule(null,B)):this.unsubscribe()},B);if(a.add(F),!L)return F}l.d(N,{f:()=>g})},4671:(oe,N,l)=>{function g(a){return a}l.d(N,{y:()=>g})},1144:(oe,N,l)=>{l.d(N,{z:()=>g});const g=a=>a&&"number"==typeof a.length&&"function"!=typeof a},2206:(oe,N,l)=>{l.d(N,{D:()=>a});var g=l(576);function a(D){return Symbol.asyncIterator&&(0,g.m)(null==D?void 0:D[Symbol.asyncIterator])}},576:(oe,N,l)=>{function g(a){return"function"==typeof a}l.d(N,{m:()=>g})},3670:(oe,N,l)=>{l.d(N,{c:()=>D});var g=l(8822),a=l(576);function D(p){return(0,a.m)(p[g.L])}},6495:(oe,N,l)=>{l.d(N,{T:()=>D});var g=l(2202),a=l(576);function D(p){return(0,a.m)(null==p?void 0:p[g.h])}},8239:(oe,N,l)=>{l.d(N,{t:()=>a});var g=l(576);function a(D){return(0,g.m)(null==D?void 0:D.then)}},3260:(oe,N,l)=>{l.d(N,{Q:()=>D,L:()=>p});var g=l(655),a=l(576);function D(B){return(0,g.FC)(this,arguments,function*(){const F=B.getReader();try{for(;;){const{value:M,done:I}=yield(0,g.qq)(F.read());if(I)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(M)}}finally{F.releaseLock()}})}function p(B){return(0,a.m)(null==B?void 0:B.getReader)}},3532:(oe,N,l)=>{l.d(N,{K:()=>a});var g=l(576);function a(D){return D&&(0,g.m)(D.schedule)}},4482:(oe,N,l)=>{l.d(N,{A:()=>a,e:()=>D});var g=l(576);function a(p){return(0,g.m)(null==p?void 0:p.lift)}function D(p){return B=>{if(a(B))return B.lift(function(L){try{return p(L,this)}catch(F){this.error(F)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(oe,N,l)=>{l.d(N,{Z:()=>p});var g=l(4004);const{isArray:a}=Array;function p(B){return(0,g.U)(L=>function(B,L){return a(L)?B(...L):B(L)}(B,L))}},5032:(oe,N,l)=>{function g(){}l.d(N,{Z:()=>g})},7849:(oe,N,l)=>{l.d(N,{h:()=>D});var g=l(2416),a=l(3410);function D(p){a.z.setTimeout(()=>{const{onUnhandledError:B}=g.v;if(!B)throw p;B(p)})}},4532:(oe,N,l)=>{function g(a){return new TypeError(`You provided ${null!==a&&"object"==typeof a?"an invalid object":`'${a}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}l.d(N,{z:()=>g})},1452:oe=>{oe.exports=function(N){"use strict";var g=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function D(E,y){var c=E[0],o=E[1],v=E[2],h=E[3];o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[0]-680876936|0)<<7|c>>>25)+o|0)&o|~c&v)+y[1]-389564586|0)<<12|h>>>20)+c|0)&c|~h&o)+y[2]+606105819|0)<<17|v>>>15)+h|0)&h|~v&c)+y[3]-1044525330|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[4]-176418897|0)<<7|c>>>25)+o|0)&o|~c&v)+y[5]+1200080426|0)<<12|h>>>20)+c|0)&c|~h&o)+y[6]-1473231341|0)<<17|v>>>15)+h|0)&h|~v&c)+y[7]-45705983|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[8]+1770035416|0)<<7|c>>>25)+o|0)&o|~c&v)+y[9]-1958414417|0)<<12|h>>>20)+c|0)&c|~h&o)+y[10]-42063|0)<<17|v>>>15)+h|0)&h|~v&c)+y[11]-1990404162|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&v|~o&h)+y[12]+1804603682|0)<<7|c>>>25)+o|0)&o|~c&v)+y[13]-40341101|0)<<12|h>>>20)+c|0)&c|~h&o)+y[14]-1502002290|0)<<17|v>>>15)+h|0)&h|~v&c)+y[15]+1236535329|0)<<22|o>>>10)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[1]-165796510|0)<<5|c>>>27)+o|0)&v|o&~v)+y[6]-1069501632|0)<<9|h>>>23)+c|0)&o|c&~o)+y[11]+643717713|0)<<14|v>>>18)+h|0)&c|h&~c)+y[0]-373897302|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[5]-701558691|0)<<5|c>>>27)+o|0)&v|o&~v)+y[10]+38016083|0)<<9|h>>>23)+c|0)&o|c&~o)+y[15]-660478335|0)<<14|v>>>18)+h|0)&c|h&~c)+y[4]-405537848|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[9]+568446438|0)<<5|c>>>27)+o|0)&v|o&~v)+y[14]-1019803690|0)<<9|h>>>23)+c|0)&o|c&~o)+y[3]-187363961|0)<<14|v>>>18)+h|0)&c|h&~c)+y[8]+1163531501|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o&h|v&~h)+y[13]-1444681467|0)<<5|c>>>27)+o|0)&v|o&~v)+y[2]-51403784|0)<<9|h>>>23)+c|0)&o|c&~o)+y[7]+1735328473|0)<<14|v>>>18)+h|0)&c|h&~c)+y[12]-1926607734|0)<<20|o>>>12)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[5]-378558|0)<<4|c>>>28)+o|0)^o^v)+y[8]-2022574463|0)<<11|h>>>21)+c|0)^c^o)+y[11]+1839030562|0)<<16|v>>>16)+h|0)^h^c)+y[14]-35309556|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[1]-1530992060|0)<<4|c>>>28)+o|0)^o^v)+y[4]+1272893353|0)<<11|h>>>21)+c|0)^c^o)+y[7]-155497632|0)<<16|v>>>16)+h|0)^h^c)+y[10]-1094730640|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[13]+681279174|0)<<4|c>>>28)+o|0)^o^v)+y[0]-358537222|0)<<11|h>>>21)+c|0)^c^o)+y[3]-722521979|0)<<16|v>>>16)+h|0)^h^c)+y[6]+76029189|0)<<23|o>>>9)+v|0,o=((o+=((v=((v+=((h=((h+=((c=((c+=(o^v^h)+y[9]-640364487|0)<<4|c>>>28)+o|0)^o^v)+y[12]-421815835|0)<<11|h>>>21)+c|0)^c^o)+y[15]+530742520|0)<<16|v>>>16)+h|0)^h^c)+y[2]-995338651|0)<<23|o>>>9)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[0]-198630844|0)<<6|c>>>26)+o|0)|~v))+y[7]+1126891415|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[14]-1416354905|0)<<15|v>>>17)+h|0)|~c))+y[5]-57434055|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[12]+1700485571|0)<<6|c>>>26)+o|0)|~v))+y[3]-1894986606|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[10]-1051523|0)<<15|v>>>17)+h|0)|~c))+y[1]-2054922799|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[8]+1873313359|0)<<6|c>>>26)+o|0)|~v))+y[15]-30611744|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[6]-1560198380|0)<<15|v>>>17)+h|0)|~c))+y[13]+1309151649|0)<<21|o>>>11)+v|0,o=((o+=((h=((h+=(o^((c=((c+=(v^(o|~h))+y[4]-145523070|0)<<6|c>>>26)+o|0)|~v))+y[11]-1120210379|0)<<10|h>>>22)+c|0)^((v=((v+=(c^(h|~o))+y[2]+718787259|0)<<15|v>>>17)+h|0)|~c))+y[9]-343485551|0)<<21|o>>>11)+v|0,E[0]=c+E[0]|0,E[1]=o+E[1]|0,E[2]=v+E[2]|0,E[3]=h+E[3]|0}function p(E){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=E.charCodeAt(c)+(E.charCodeAt(c+1)<<8)+(E.charCodeAt(c+2)<<16)+(E.charCodeAt(c+3)<<24);return y}function B(E){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=E[c]+(E[c+1]<<8)+(E[c+2]<<16)+(E[c+3]<<24);return y}function L(E){var o,v,h,K,ue,Ee,y=E.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,p(E.substring(o-64,o)));for(v=(E=E.substring(o-64)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=E.charCodeAt(o)<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),Ee=parseInt(K[1],16)||0,h[14]=ue,h[15]=Ee,D(c,h),c}function M(E){var c,y="";for(c=0;c<4;c+=1)y+=g[E>>8*c+4&15]+g[E>>8*c&15];return y}function I(E){var y;for(y=0;y<E.length;y+=1)E[y]=M(E[y]);return E.join("")}function S(E){return/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E))),E}function x(E){var o,y=[],c=E.length;for(o=0;o<c-1;o+=2)y.push(parseInt(E.substr(o,2),16));return String.fromCharCode.apply(String,y)}function R(){this.reset()}return I(L("hello")),"undefined"!=typeof ArrayBuffer&&!ArrayBuffer.prototype.slice&&function(){function E(y,c){return(y=0|y||0)<0?Math.max(y+c,0):Math.min(y,c)}ArrayBuffer.prototype.slice=function(y,c){var K,ue,Ee,ge,o=this.byteLength,v=E(y,o),h=o;return undefined!==c&&(h=E(c,o)),v>h?new ArrayBuffer(0):(K=h-v,ue=new ArrayBuffer(K),Ee=new Uint8Array(ue),ge=new Uint8Array(this,v,K),Ee.set(ge),ue)}}(),R.prototype.append=function(E){return this.appendBinary(S(E)),this},R.prototype.appendBinary=function(E){this._buff+=E,this._length+=E.length;var c,y=this._buff.length;for(c=64;c<=y;c+=64)D(this._hash,p(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},R.prototype.end=function(E){var o,h,y=this._buff,c=y.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<c;o+=1)v[o>>2]|=y.charCodeAt(o)<<(o%4<<3);return this._finish(v,c),h=I(this._hash),E&&(h=x(h)),this.reset(),h},R.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},R.prototype.setState=function(E){return this._buff=E.buff,this._length=E.length,this._hash=E.hash,this},R.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},R.prototype._finish=function(E,y){var o,v,h,c=y;if(E[c>>2]|=128<<(c%4<<3),c>55)for(D(this._hash,E),c=0;c<16;c+=1)E[c]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(o[2],16),h=parseInt(o[1],16)||0,E[14]=v,E[15]=h,D(this._hash,E)},R.hash=function(E,y){return R.hashBinary(S(E),y)},R.hashBinary=function(E,y){var o=I(L(E));return y?x(o):o},(R.ArrayBuffer=function(){this.reset()}).prototype.append=function(E){var o,y=function(E,y,c){var o=new Uint8Array(E.byteLength+y.byteLength);return o.set(new Uint8Array(E)),o.set(new Uint8Array(y),E.byteLength),c?o:o.buffer}(this._buff.buffer,E,!0),c=y.length;for(this._length+=E.byteLength,o=64;o<=c;o+=64)D(this._hash,B(y.subarray(o-64,o)));return this._buff=o-64<c?new Uint8Array(y.buffer.slice(o-64)):new Uint8Array(0),this},R.ArrayBuffer.prototype.end=function(E){var v,h,y=this._buff,c=y.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(v=0;v<c;v+=1)o[v>>2]|=y[v]<<(v%4<<3);return this._finish(o,c),h=I(this._hash),E&&(h=x(h)),this.reset(),h},R.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},R.ArrayBuffer.prototype.getState=function(){var E=R.prototype.getState.call(this);return E.buff=function(E){return String.fromCharCode.apply(null,new Uint8Array(E))}(E.buff),E},R.ArrayBuffer.prototype.setState=function(E){return E.buff=function(E,y){var h,c=E.length,o=new ArrayBuffer(c),v=new Uint8Array(o);for(h=0;h<c;h+=1)v[h]=E.charCodeAt(h);return y?v:o}(E.buff,!0),R.prototype.setState.call(this,E)},R.ArrayBuffer.prototype.destroy=R.prototype.destroy,R.ArrayBuffer.prototype._finish=R.prototype._finish,R.ArrayBuffer.hash=function(E,y){var o=I(function(E){var o,v,h,K,ue,Ee,y=E.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)D(c,B(E.subarray(o-64,o)));for(v=(E=o-64<y?E.subarray(o-64):new Uint8Array(0)).length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<v;o+=1)h[o>>2]|=E[o]<<(o%4<<3);if(h[o>>2]|=128<<(o%4<<3),o>55)for(D(c,h),o=0;o<16;o+=1)h[o]=0;return K=(K=8*y).toString(16).match(/(.*?)(.{0,8})$/),ue=parseInt(K[2],16),Ee=parseInt(K[1],16)||0,h[14]=ue,h[15]=Ee,D(c,h),c}(new Uint8Array(E)));return y?x(o):o},R}()},1451:oe=>{oe.exports=function(l){return l&&"object"==typeof l&&"function"==typeof l.copy&&"function"==typeof l.fill&&"function"==typeof l.readUInt8}},8791:(oe,N,l)=>{var g=l(3407),a=l(110),D=l(2031),p=l(597);function B(je){return je.call.bind(je)}var L="undefined"!=typeof BigInt,F="undefined"!=typeof Symbol,M=B(Object.prototype.toString),I=B(Number.prototype.valueOf),S=B(String.prototype.valueOf),w=B(Boolean.prototype.valueOf);if(L)var T=B(BigInt.prototype.valueOf);if(F)var P=B(Symbol.prototype.valueOf);function x(je,Rt){if("object"!=typeof je)return!1;try{return Rt(je),!0}catch{return!1}}function $(je){return"[object Map]"===M(je)}function G(je){return"[object Set]"===M(je)}function H(je){return"[object WeakMap]"===M(je)}function we(je){return"[object WeakSet]"===M(je)}function me(je){return"[object ArrayBuffer]"===M(je)}function _e(je){return"undefined"!=typeof ArrayBuffer&&(me.working?me(je):je instanceof ArrayBuffer)}function re(je){return"[object DataView]"===M(je)}function ce(je){return"undefined"!=typeof DataView&&(re.working?re(je):je instanceof DataView)}N.isArgumentsObject=g,N.isGeneratorFunction=a,N.isTypedArray=p,N.isPromise=function(je){return"undefined"!=typeof Promise&&je instanceof Promise||null!==je&&"object"==typeof je&&"function"==typeof je.then&&"function"==typeof je.catch},N.isArrayBufferView=function(je){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(je):p(je)||ce(je)},N.isUint8Array=function(je){return"Uint8Array"===D(je)},N.isUint8ClampedArray=function(je){return"Uint8ClampedArray"===D(je)},N.isUint16Array=function(je){return"Uint16Array"===D(je)},N.isUint32Array=function(je){return"Uint32Array"===D(je)},N.isInt8Array=function(je){return"Int8Array"===D(je)},N.isInt16Array=function(je){return"Int16Array"===D(je)},N.isInt32Array=function(je){return"Int32Array"===D(je)},N.isFloat32Array=function(je){return"Float32Array"===D(je)},N.isFloat64Array=function(je){return"Float64Array"===D(je)},N.isBigInt64Array=function(je){return"BigInt64Array"===D(je)},N.isBigUint64Array=function(je){return"BigUint64Array"===D(je)},$.working="undefined"!=typeof Map&&$(new Map),N.isMap=function(je){return"undefined"!=typeof Map&&($.working?$(je):je instanceof Map)},G.working="undefined"!=typeof Set&&G(new Set),N.isSet=function(je){return"undefined"!=typeof Set&&(G.working?G(je):je instanceof Set)},H.working="undefined"!=typeof WeakMap&&H(new WeakMap),N.isWeakMap=function(je){return"undefined"!=typeof WeakMap&&(H.working?H(je):je instanceof WeakMap)},we.working="undefined"!=typeof WeakSet&&we(new WeakSet),N.isWeakSet=function(je){return we(je)},me.working="undefined"!=typeof ArrayBuffer&&me(new ArrayBuffer),N.isArrayBuffer=_e,re.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&re(new DataView(new ArrayBuffer(1),0,1)),N.isDataView=ce;var Te="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function Ne(je){return"[object SharedArrayBuffer]"===M(je)}function Qe(je){return void 0!==Te&&(void 0===Ne.working&&(Ne.working=Ne(new Te)),Ne.working?Ne(je):je instanceof Te)}function yr(je){return x(je,I)}function Rr(je){return x(je,S)}function _r(je){return x(je,w)}function cr(je){return L&&x(je,T)}function pr(je){return F&&x(je,P)}N.isSharedArrayBuffer=Qe,N.isAsyncFunction=function(je){return"[object AsyncFunction]"===M(je)},N.isMapIterator=function(je){return"[object Map Iterator]"===M(je)},N.isSetIterator=function(je){return"[object Set Iterator]"===M(je)},N.isGeneratorObject=function(je){return"[object Generator]"===M(je)},N.isWebAssemblyCompiledModule=function(je){return"[object WebAssembly.Module]"===M(je)},N.isNumberObject=yr,N.isStringObject=Rr,N.isBooleanObject=_r,N.isBigIntObject=cr,N.isSymbolObject=pr,N.isBoxedPrimitive=function(je){return yr(je)||Rr(je)||_r(je)||cr(je)||pr(je)},N.isAnyArrayBuffer=function(je){return"undefined"!=typeof Uint8Array&&(_e(je)||Qe(je))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(je){Object.defineProperty(N,je,{enumerable:!1,value:function(){throw new Error(je+" is not supported in userland")}})})},6788:(oe,N,l)=>{var g=Object.getOwnPropertyDescriptors||function(ce){for(var Te=Object.keys(ce),Ne={},Qe=0;Qe<Te.length;Qe++)Ne[Te[Qe]]=Object.getOwnPropertyDescriptor(ce,Te[Qe]);return Ne},a=/%[sdj%]/g;N.format=function(re){if(!h(re)){for(var ce=[],Te=0;Te<arguments.length;Te++)ce.push(L(arguments[Te]));return ce.join(" ")}Te=1;for(var Ne=arguments,Qe=Ne.length,ut=String(re).replace(a,function(ct){if("%%"===ct)return"%";if(Te>=Qe)return ct;switch(ct){case"%s":return String(Ne[Te++]);case"%d":return Number(Ne[Te++]);case"%j":try{return JSON.stringify(Ne[Te++])}catch{return"[Circular]"}default:return ct}}),et=Ne[Te];Te<Qe;et=Ne[++Te])c(et)||!ge(et)?ut+=" "+et:ut+=" "+L(et);return ut},N.deprecate=function(re,ce){if("undefined"!=typeof process&&!0===process.noDeprecation)return re;if("undefined"==typeof process)return function(){return N.deprecate(re,ce).apply(this,arguments)};var Te=!1;return function(){if(!Te){if(process.throwDeprecation)throw new Error(ce);process.traceDeprecation?console.trace(ce):console.error(ce),Te=!0}return re.apply(this,arguments)}};var D={},p=/^$/;if(process.env.NODE_DEBUG){var B=process.env.NODE_DEBUG;B=B.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),p=new RegExp("^"+B+"$","i")}function L(re,ce){var Te={seen:[],stylize:M};return arguments.length>=3&&(Te.depth=arguments[2]),arguments.length>=4&&(Te.colors=arguments[3]),y(ce)?Te.showHidden=ce:ce&&N._extend(Te,ce),ue(Te.showHidden)&&(Te.showHidden=!1),ue(Te.depth)&&(Te.depth=2),ue(Te.colors)&&(Te.colors=!1),ue(Te.customInspect)&&(Te.customInspect=!0),Te.colors&&(Te.stylize=F),S(Te,re,Te.depth)}function F(re,ce){var Te=L.styles[ce];return Te?"\x1b["+L.colors[Te][0]+"m"+re+"\x1b["+L.colors[Te][1]+"m":re}function M(re,ce){return re}function S(re,ce,Te){if(re.customInspect&&ce&&$(ce.inspect)&&ce.inspect!==N.inspect&&(!ce.constructor||ce.constructor.prototype!==ce)){var Ne=ce.inspect(Te,re);return h(Ne)||(Ne=S(re,Ne,Te)),Ne}var Qe=function(re,ce){if(ue(ce))return re.stylize("undefined","undefined");if(h(ce)){var Te="'"+JSON.stringify(ce).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return re.stylize(Te,"string")}return v(ce)?re.stylize(""+ce,"number"):y(ce)?re.stylize(""+ce,"boolean"):c(ce)?re.stylize("null","null"):void 0}(re,ce);if(Qe)return Qe;var ut=Object.keys(ce),et=function(re){var ce={};return re.forEach(function(Te,Ne){ce[Te]=!0}),ce}(ut);if(re.showHidden&&(ut=Object.getOwnPropertyNames(ce)),Y(ce)&&(ut.indexOf("message")>=0||ut.indexOf("description")>=0))return T(ce);if(0===ut.length){if($(ce))return re.stylize("[Function"+(ce.name?": "+ce.name:"")+"]","special");if(Ee(ce))return re.stylize(RegExp.prototype.toString.call(ce),"regexp");if(pe(ce))return re.stylize(Date.prototype.toString.call(ce),"date");if(Y(ce))return T(ce)}var _r,wt="",Tt=!1,yr=["{","}"];return E(ce)&&(Tt=!0,yr=["[","]"]),$(ce)&&(wt=" [Function"+(ce.name?": "+ce.name:"")+"]"),Ee(ce)&&(wt=" "+RegExp.prototype.toString.call(ce)),pe(ce)&&(wt=" "+Date.prototype.toUTCString.call(ce)),Y(ce)&&(wt=" "+T(ce)),0!==ut.length||Tt&&0!=ce.length?Te<0?Ee(ce)?re.stylize(RegExp.prototype.toString.call(ce),"regexp"):re.stylize("[Object]","special"):(re.seen.push(ce),_r=Tt?function(re,ce,Te,Ne,Qe){for(var ut=[],et=0,ct=ce.length;et<ct;++et)we(ce,String(et))?ut.push(x(re,ce,Te,Ne,String(et),!0)):ut.push("");return Qe.forEach(function(wt){wt.match(/^\d+$/)||ut.push(x(re,ce,Te,Ne,wt,!0))}),ut}(re,ce,Te,et,ut):ut.map(function(cr){return x(re,ce,Te,et,cr,Tt)}),re.seen.pop(),function(re,ce,Te){var Qe=re.reduce(function(ut,et){return et.indexOf("\n"),ut+et.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Qe>60?Te[0]+(""===ce?"":ce+"\n ")+" "+re.join(",\n  ")+" "+Te[1]:Te[0]+ce+" "+re.join(", ")+" "+Te[1]}(_r,wt,yr)):yr[0]+wt+yr[1]}function T(re){return"["+Error.prototype.toString.call(re)+"]"}function x(re,ce,Te,Ne,Qe,ut){var et,ct,wt;if((wt=Object.getOwnPropertyDescriptor(ce,Qe)||{value:ce[Qe]}).get?ct=re.stylize(wt.set?"[Getter/Setter]":"[Getter]","special"):wt.set&&(ct=re.stylize("[Setter]","special")),we(Ne,Qe)||(et="["+Qe+"]"),ct||(re.seen.indexOf(wt.value)<0?(ct=c(Te)?S(re,wt.value,null):S(re,wt.value,Te-1)).indexOf("\n")>-1&&(ct=ut?ct.split("\n").map(function(Tt){return"  "+Tt}).join("\n").substr(2):"\n"+ct.split("\n").map(function(Tt){return"   "+Tt}).join("\n")):ct=re.stylize("[Circular]","special")),ue(et)){if(ut&&Qe.match(/^\d+$/))return ct;(et=JSON.stringify(""+Qe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(et=et.substr(1,et.length-2),et=re.stylize(et,"name")):(et=et.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),et=re.stylize(et,"string"))}return et+": "+ct}function E(re){return Array.isArray(re)}function y(re){return"boolean"==typeof re}function c(re){return null===re}function v(re){return"number"==typeof re}function h(re){return"string"==typeof re}function ue(re){return void 0===re}function Ee(re){return ge(re)&&"[object RegExp]"===G(re)}function ge(re){return"object"==typeof re&&null!==re}function pe(re){return ge(re)&&"[object Date]"===G(re)}function Y(re){return ge(re)&&("[object Error]"===G(re)||re instanceof Error)}function $(re){return"function"==typeof re}function G(re){return Object.prototype.toString.call(re)}function X(re){return re<10?"0"+re.toString(10):re.toString(10)}N.debuglog=function(re){if(re=re.toUpperCase(),!D[re])if(p.test(re)){var ce=process.pid;D[re]=function(){var Te=N.format.apply(N,arguments);console.error("%s %d: %s",re,ce,Te)}}else D[re]=function(){};return D[re]},N.inspect=L,L.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},L.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},N.types=l(8791),N.isArray=E,N.isBoolean=y,N.isNull=c,N.isNullOrUndefined=function(re){return null==re},N.isNumber=v,N.isString=h,N.isSymbol=function(re){return"symbol"==typeof re},N.isUndefined=ue,N.isRegExp=Ee,N.types.isRegExp=Ee,N.isObject=ge,N.isDate=pe,N.types.isDate=pe,N.isError=Y,N.types.isNativeError=Y,N.isFunction=$,N.isPrimitive=function(re){return null===re||"boolean"==typeof re||"number"==typeof re||"string"==typeof re||"symbol"==typeof re||void 0===re},N.isBuffer=l(1451);var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ie(){var re=new Date,ce=[X(re.getHours()),X(re.getMinutes()),X(re.getSeconds())].join(":");return[re.getDate(),H[re.getMonth()],ce].join(" ")}function we(re,ce){return Object.prototype.hasOwnProperty.call(re,ce)}N.log=function(){console.log("%s - %s",ie(),N.format.apply(N,arguments))},N.inherits=l(3894),N._extend=function(re,ce){if(!ce||!ge(ce))return re;for(var Te=Object.keys(ce),Ne=Te.length;Ne--;)re[Te[Ne]]=ce[Te[Ne]];return re};var Be="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function me(re,ce){if(!re){var Te=new Error("Promise was rejected with a falsy value");Te.reason=re,re=Te}return ce(re)}N.promisify=function(ce){if("function"!=typeof ce)throw new TypeError('The "original" argument must be of type Function');if(Be&&ce[Be]){var Te;if("function"!=typeof(Te=ce[Be]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Te,Be,{value:Te,enumerable:!1,writable:!1,configurable:!0}),Te}function Te(){for(var Ne,Qe,ut=new Promise(function(wt,Tt){Ne=wt,Qe=Tt}),et=[],ct=0;ct<arguments.length;ct++)et.push(arguments[ct]);et.push(function(wt,Tt){wt?Qe(wt):Ne(Tt)});try{ce.apply(this,et)}catch(wt){Qe(wt)}return ut}return Object.setPrototypeOf(Te,Object.getPrototypeOf(ce)),Be&&Object.defineProperty(Te,Be,{value:Te,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Te,g(ce))},N.promisify.custom=Be,N.callbackify=function(re){if("function"!=typeof re)throw new TypeError('The "original" argument must be of type Function');function ce(){for(var Te=[],Ne=0;Ne<arguments.length;Ne++)Te.push(arguments[Ne]);var Qe=Te.pop();if("function"!=typeof Qe)throw new TypeError("The last argument must be of type Function");var ut=this,et=function(){return Qe.apply(ut,arguments)};re.apply(this,Te).then(function(ct){process.nextTick(et.bind(null,null,ct))},function(ct){process.nextTick(me.bind(null,ct,et))})}return Object.setPrototypeOf(ce,Object.getPrototypeOf(re)),Object.defineProperties(ce,g(re)),ce}},1042:(oe,N,l)=>{l.d(N,{Z:()=>T});var g,a=new Uint8Array(16);function D(){if(!g&&!(g="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(a)}const p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,L=function(P){return"string"==typeof P&&p.test(P)};for(var F=[],M=0;M<256;++M)F.push((M+256).toString(16).substr(1));const T=function(P,x,R){var E=(P=P||{}).random||(P.rng||D)();if(E[6]=15&E[6]|64,E[8]=63&E[8]|128,x){R=R||0;for(var y=0;y<16;++y)x[R+y]=E[y];return x}return function(P){var x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=(F[P[x+0]]+F[P[x+1]]+F[P[x+2]]+F[P[x+3]]+"-"+F[P[x+4]]+F[P[x+5]]+"-"+F[P[x+6]]+F[P[x+7]]+"-"+F[P[x+8]]+F[P[x+9]]+"-"+F[P[x+10]]+F[P[x+11]]+F[P[x+12]]+F[P[x+13]]+F[P[x+14]]+F[P[x+15]]).toLowerCase();if(!L(R))throw TypeError("Stringified UUID is invalid");return R}(E)}},2899:(oe,N)=>{function l(g,a,D){var p=D[D.length-1];g===p.element&&(D.pop(),p=D[D.length-1]);var B=p.element,L=p.index;Array.isArray(B)?B.push(g):L===a.length-2?B[a.pop()]=g:a.push(g)}N.stringify=function(a){var D=[];D.push({obj:a});for(var B,L,M,I,w,T,P,x,R,p="";B=D.pop();)if(L=B.obj,p+=B.prefix||"",M=B.val||"")p+=M;else if("object"!=typeof L)p+=void 0===L?null:JSON.stringify(L);else if(null===L)p+="null";else if(Array.isArray(L)){for(D.push({val:"]"}),I=L.length-1;I>=0;I--)D.push({obj:L[I],prefix:0===I?"":","});D.push({val:"["})}else{for(T in w=[],L)L.hasOwnProperty(T)&&w.push(T);for(D.push({val:"}"}),I=w.length-1;I>=0;I--)x=L[P=w[I]],R=I>0?",":"",R+=JSON.stringify(P)+":",D.push({obj:x,prefix:R});D.push({val:"{"})}return p},N.parse=function(g){for(var B,L,F,M,I,S,w,T,P,a=[],D=[],p=0;;)if("}"!==(B=g[p++])&&"]"!==B&&void 0!==B)switch(B){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,l(null,a,D);break;case"t":p+=3,l(!0,a,D);break;case"f":p+=4,l(!1,a,D);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(L="",p--;;){if(F=g[p++],!/[\d\.\-e\+]/.test(F)){p--;break}L+=F}l(parseFloat(L),a,D);break;case'"':for(M="",I=void 0,S=0;'"'!==(w=g[p++])||"\\"===I&&S%2==1;)M+=w,"\\"===(I=w)?S++:S=0;l(JSON.parse('"'+M+'"'),a,D);break;case"[":a.push((T={element:[],index:a.length}).element),D.push(T);break;case"{":a.push((P={element:{},index:a.length}).element),D.push(P);break;default:throw new Error("unexpectedly reached end of input: "+B)}else{if(1===a.length)return a.pop();l(a.pop(),a,D)}}},2031:(oe,N,l)=>{var g=l(9076),a=l(7029),D=l(5834),p=D("Object.prototype.toString"),B=l(6259)(),L="undefined"==typeof globalThis?global:globalThis,F=a(),M=D("String.prototype.slice"),I={},S=l(8555),w=Object.getPrototypeOf;B&&S&&w&&g(F,function(x){if("function"==typeof L[x]){var R=new L[x];if(Symbol.toStringTag in R){var E=w(R),y=S(E,Symbol.toStringTag);if(!y){var c=w(E);y=S(c,Symbol.toStringTag)}I[x]=y.get}}});var P=l(597);oe.exports=function(R){return!!P(R)&&(B&&Symbol.toStringTag in R?function(R){var E=!1;return g(I,function(y,c){if(!E)try{var o=y.call(R);o===c&&(E=o)}catch{}}),E}(R):M(p(R),8,-1))}},1995:oe=>{oe.exports=function(){for(var g={},a=0;a<arguments.length;a++){var D=arguments[a];for(var p in D)N.call(D,p)&&(g[p]=D[p])}return g};var N=Object.prototype.hasOwnProperty},7757:(oe,N,l)=>{oe.exports=l(7854)},655:(oe,N,l)=>{function M(Y,$,J,G){return new(J||(J=Promise))(function(H,ie){function we(_e){try{me(G.next(_e))}catch(re){ie(re)}}function Be(_e){try{me(G.throw(_e))}catch(re){ie(re)}}function me(_e){_e.done?H(_e.value):function(H){return H instanceof J?H:new J(function(ie){ie(H)})}(_e.value).then(we,Be)}me((G=G.apply(Y,$||[])).next())})}function y(Y){return this instanceof y?(this.v=Y,this):new y(Y)}function c(Y,$,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,G=J.apply(Y,$||[]),H=[];return X={},ie("next"),ie("throw"),ie("return"),X[Symbol.asyncIterator]=function(){return this},X;function ie(ce){G[ce]&&(X[ce]=function(Te){return new Promise(function(Ne,Qe){H.push([ce,Te,Ne,Qe])>1||we(ce,Te)})})}function we(ce,Te){try{!function(ce){ce.value instanceof y?Promise.resolve(ce.value.v).then(me,_e):re(H[0][2],ce)}(G[ce](Te))}catch(Ne){re(H[0][3],Ne)}}function me(ce){we("next",ce)}function _e(ce){we("throw",ce)}function re(ce,Te){ce(Te),H.shift(),H.length&&we(H[0][0],H[0][1])}}function v(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,$=Y[Symbol.asyncIterator];return $?$.call(Y):(Y=function(Y){var $="function"==typeof Symbol&&Symbol.iterator,J=$&&Y[$],G=0;if(J)return J.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&G>=Y.length&&(Y=void 0),{value:Y&&Y[G++],done:!Y}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),J={},G("next"),G("throw"),G("return"),J[Symbol.asyncIterator]=function(){return this},J);function G(H){J[H]=Y[H]&&function(ie){return new Promise(function(we,Be){!function(H,ie,we,Be){Promise.resolve(Be).then(function(me){H({value:me,done:we})},ie)}(we,Be,(ie=Y[H](ie)).done,ie.value)})}}}l.d(N,{mG:()=>M,qq:()=>y,FC:()=>c,KL:()=>v})},2480:()=>{},4703:()=>{},7029:oe=>{var N=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],l="undefined"==typeof globalThis?global:globalThis;oe.exports=function(){for(var a=[],D=0;D<N.length;D++)"function"==typeof l[N[D]]&&(a[a.length]=N[D]);return a}},8555:(oe,N,l)=>{var a=l(5203)("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch{a=null}oe.exports=a},7340:(oe,N,l)=>{l.d(N,{l3:()=>D,_j:()=>g,LC:()=>a,ZN:()=>c,jt:()=>B,oQ:()=>T,F4:()=>S,vP:()=>F,SB:()=>I,oB:()=>M,eR:()=>w,X$:()=>p,_7:()=>x,ZE:()=>o,k1:()=>v});class g{}class a{}const D="*";function p(h,K){return{type:7,name:h,definitions:K,options:{}}}function B(h,K=null){return{type:4,styles:K,timings:h}}function F(h,K=null){return{type:2,steps:h,options:K}}function M(h){return{type:6,styles:h,offset:null}}function I(h,K,ue){return{type:0,name:h,styles:K,options:ue}}function S(h){return{type:5,steps:h}}function w(h,K,ue=null){return{type:1,expr:h,animation:K,options:ue}}function T(h,K=null){return{type:8,animation:h,options:K}}function x(h,K=null){return{type:10,animation:h,options:K}}function y(h){Promise.resolve(null).then(h)}class c{constructor(K=0,ue=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=K+ue}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}onStart(K){this._onStartFns.push(K)}onDone(K){this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){y(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(K=>K()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(K){this._position=this.totalTime?K*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(K){const ue="start"==K?this._onStartFns:this._onDoneFns;ue.forEach(Ee=>Ee()),ue.length=0}}class o{constructor(K){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=K;let ue=0,Ee=0,ge=0;const pe=this.players.length;0==pe?y(()=>this._onFinish()):this.players.forEach(Y=>{Y.onDone(()=>{++ue==pe&&this._onFinish()}),Y.onDestroy(()=>{++Ee==pe&&this._onDestroy()}),Y.onStart(()=>{++ge==pe&&this._onStart()})}),this.totalTime=this.players.reduce((Y,$)=>Math.max(Y,$.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(K=>K()),this._onDoneFns=[])}init(){this.players.forEach(K=>K.init())}onStart(K){this._onStartFns.push(K)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(K=>K()),this._onStartFns=[])}onDone(K){this._onDoneFns.push(K)}onDestroy(K){this._onDestroyFns.push(K)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(K=>K.play())}pause(){this.players.forEach(K=>K.pause())}restart(){this.players.forEach(K=>K.restart())}finish(){this._onFinish(),this.players.forEach(K=>K.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(K=>K.destroy()),this._onDestroyFns.forEach(K=>K()),this._onDestroyFns=[])}reset(){this.players.forEach(K=>K.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(K){const ue=K*this.totalTime;this.players.forEach(Ee=>{const ge=Ee.totalTime?Math.min(1,ue/Ee.totalTime):1;Ee.setPosition(ge)})}getPosition(){const K=this.players.reduce((ue,Ee)=>null===ue||Ee.totalTime>ue.totalTime?Ee:ue,null);return null!=K?K.getPosition():0}beforeDestroy(){this.players.forEach(K=>{K.beforeDestroy&&K.beforeDestroy()})}triggerCallback(K){const ue="start"==K?this._onStartFns:this._onDoneFns;ue.forEach(Ee=>Ee()),ue.length=0}}const v="!"},8753:(oe,N,l)=>{l.d(N,{Zt:()=>ko,Hk:()=>Is,Wj:()=>Ps,_t:()=>Lo});var g=l(7777),a=l(1457);function D(V){return null!=V&&"false"!=`${V}`}function p(V,C=0){return function(V){return!isNaN(parseFloat(V))&&!isNaN(Number(V))}(V)?Number(V):C}function M(V){return V instanceof g.ElementRef?V.nativeElement:V}var S=l(7579),w=l(9646),T=l(8306),P=l(4968),x=l(6406),E=(l(3101),l(3601)),y=l(9300);let c;try{c="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch{c=!1}let Ee,X,o=(()=>{class V{constructor(_){this._platformId=_,this.isBrowser=this._platformId?(0,a.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!c)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(g.PLATFORM_ID))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function pe(V){return function(){if(null==Ee&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ee=!0}))}finally{Ee=Ee||!1}return Ee}()?V:!!V.capture}function ie(V){if(function(){if(null==X){const V="undefined"!=typeof document?document.head:null;X=!(!V||!V.createShadowRoot&&!V.attachShadow)}return X}()){const C=V.getRootNode?V.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&C instanceof ShadowRoot)return C}return null}function Be(V){return V.composedPath?V.composedPath()[0]:V.target}let et=(()=>{class V{constructor(_,j,Q){this._ngZone=_,this._platform=j,this._scrolled=new S.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Q}register(_){this.scrollContainers.has(_)||this.scrollContainers.set(_,_.elementScrolled().subscribe(()=>this._scrolled.next(_)))}deregister(_){const j=this.scrollContainers.get(_);j&&(j.unsubscribe(),this.scrollContainers.delete(_))}scrolled(_=20){return this._platform.isBrowser?new T.y(j=>{this._globalSubscription||this._addGlobalListener();const Q=_>0?this._scrolled.pipe((0,E.e)(_)).subscribe(j):this._scrolled.subscribe(j);return this._scrolledCount++,()=>{Q.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,w.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((_,j)=>this.deregister(j)),this._scrolled.complete()}ancestorScrolled(_,j){const Q=this.getAncestorScrollContainers(_);return this.scrolled(j).pipe((0,y.h)(le=>!le||Q.indexOf(le)>-1))}getAncestorScrollContainers(_){const j=[];return this.scrollContainers.forEach((Q,le)=>{this._scrollableContainsElement(le,_)&&j.push(le)}),j}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(_,j){let Q=M(j),le=_.getElementRef().nativeElement;do{if(Q==le)return!0}while(Q=Q.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const _=this._getWindow();return(0,P.R)(_.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(o),g.\u0275\u0275inject(a.DOCUMENT,8))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),Tt=(()=>{class V{constructor(_,j,Q){this._platform=_,this._change=new S.x,this._changeListener=le=>{this._change.next(le)},this._document=Q,j.runOutsideAngular(()=>{if(_.isBrowser){const le=this._getWindow();le.addEventListener("resize",this._changeListener),le.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const _=this._getWindow();_.removeEventListener("resize",this._changeListener),_.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const _={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),_}getViewportRect(){const _=this.getViewportScrollPosition(),{width:j,height:Q}=this.getViewportSize();return{top:_.top,left:_.left,bottom:_.top+Q,right:_.left+j,height:Q,width:j}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const _=this._document,j=this._getWindow(),Q=_.documentElement,le=Q.getBoundingClientRect();return{top:-le.top||_.body.scrollTop||j.scrollY||Q.scrollTop||0,left:-le.left||_.body.scrollLeft||j.scrollX||Q.scrollLeft||0}}change(_=20){return _>0?this._change.pipe((0,E.e)(_)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const _=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:_.innerWidth,height:_.innerHeight}:{width:0,height:0}}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(o),g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(a.DOCUMENT,8))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})(),ir=(()=>{class V{}return V.\u0275fac=function(_){return new(_||V)},V.\u0275mod=g.\u0275\u0275defineNgModule({type:V}),V.\u0275inj=g.\u0275\u0275defineInjector({}),V})();var $a=l(4986),za=l(5963),Un=l(727),gs=l(6451),Zt=l(3085),jt=l(8675),di=l(4004),cn=l(5698),ji=l(8505),bn=l(3900);const $n=new g.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,g.inject)(a.DOCUMENT)}});let En=(()=>{class V{constructor(_){if(this.value="ltr",this.change=new g.EventEmitter,_){const Q=_.documentElement?_.documentElement.dir:null,le=(_.body?_.body.dir:null)||Q;this.value="ltr"===le||"rtl"===le?le:"ltr"}}ngOnDestroy(){this.change.complete()}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject($n,8))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();function Ui(V,C,_){for(let j in C)if(C.hasOwnProperty(j)){const Q=C[j];Q?V.setProperty(j,Q,_?.has(j)?"important":""):V.removeProperty(j)}return V}function Fr(V,C){const _=C?"":"none";Ui(V.style,{"touch-action":C?"":"none","-webkit-user-drag":C?"":"none","-webkit-tap-highlight-color":C?"":"transparent","user-select":_,"-ms-user-select":_,"-webkit-user-select":_,"-moz-user-select":_})}function Et(V,C,_){Ui(V.style,{position:C?"":"fixed",top:C?"":"0",opacity:C?"":"0",left:C?"":"-999em"},_)}function zn(V,C){return C&&"none"!=C?V+" "+C:V}function Oo(V){const C=V.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(V)*C}function Wn(V,C){return V.getPropertyValue(C).split(",").map(j=>j.trim())}function Kn(V){const C=V.getBoundingClientRect();return{top:C.top,right:C.right,bottom:C.bottom,left:C.left,width:C.width,height:C.height,x:C.x,y:C.y}}function hr(V,C,_){const{top:j,bottom:Q,left:le,right:Pe}=V;return _>=j&&_<=Q&&C>=le&&C<=Pe}function pi(V,C,_){V.top+=C,V.bottom=V.top+V.height,V.left+=_,V.right=V.left+V.width}function ys(V,C,_,j){const{top:Q,right:le,bottom:Pe,left:Le,width:Ze,height:rt}=V,Ct=Ze*C,vr=rt*C;return j>Q-vr&&j<Pe+vr&&_>Le-Ct&&_<le+Ct}class Po{constructor(C,_){this._document=C,this._viewportRuler=_,this.positions=new Map}clear(){this.positions.clear()}cache(C){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),C.forEach(_=>{this.positions.set(_,{scrollPosition:{top:_.scrollTop,left:_.scrollLeft},clientRect:Kn(_)})})}handleScroll(C){const _=Be(C),j=this.positions.get(_);if(!j)return null;const Q=j.scrollPosition;let le,Pe;if(_===this._document){const rt=this._viewportRuler.getViewportScrollPosition();le=rt.top,Pe=rt.left}else le=_.scrollTop,Pe=_.scrollLeft;const Le=Q.top-le,Ze=Q.left-Pe;return this.positions.forEach((rt,Ct)=>{rt.clientRect&&_!==Ct&&_.contains(Ct)&&pi(rt.clientRect,Le,Ze)}),Q.top=le,Q.left=Pe,{top:Le,left:Ze}}}function _s(V){const C=V.cloneNode(!0),_=C.querySelectorAll("[id]"),j=V.nodeName.toLowerCase();C.removeAttribute("id");for(let Q=0;Q<_.length;Q++)_[Q].removeAttribute("id");return"canvas"===j?Hn(V,C):("input"===j||"select"===j||"textarea"===j)&&Io(V,C),ze("canvas",V,C,Hn),ze("input, textarea, select",V,C,Io),C}function ze(V,C,_,j){const Q=C.querySelectorAll(V);if(Q.length){const le=_.querySelectorAll(V);for(let Pe=0;Pe<Q.length;Pe++)j(Q[Pe],le[Pe])}}let Wt=0;function Io(V,C){"file"!==C.type&&(C.value=V.value),"radio"===C.type&&C.name&&(C.name=`mat-clone-${C.name}-${Wt++}`)}function Hn(V,C){const _=C.getContext("2d");if(_)try{_.drawImage(V,0,0)}catch{}}const nr=pe({passive:!0}),bs=pe({passive:!1}),it=new Set(["position"]);class Es{constructor(C,_,j,Q,le,Pe){this._config=_,this._document=j,this._ngZone=Q,this._viewportRuler=le,this._dragDropRegistry=Pe,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new S.x,this._pointerMoveSubscription=Un.w0.EMPTY,this._pointerUpSubscription=Un.w0.EMPTY,this._scrollSubscription=Un.w0.EMPTY,this._resizeSubscription=Un.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new S.x,this.started=new S.x,this.released=new S.x,this.ended=new S.x,this.entered=new S.x,this.exited=new S.x,this.dropped=new S.x,this.moved=this._moveEvents,this._pointerDown=Le=>{if(this.beforeStarted.next(),this._handles.length){const Ze=this._handles.find(rt=>Le.target&&(Le.target===rt||rt.contains(Le.target)));Ze&&!this._disabledHandles.has(Ze)&&!this.disabled&&this._initializeDragSequence(Ze,Le)}else this.disabled||this._initializeDragSequence(this._rootElement,Le)},this._pointerMove=Le=>{const Ze=this._getPointerPositionOnPage(Le);if(!this._hasStartedDragging){if(Math.abs(Ze.x-this._pickupPositionOnPage.x)+Math.abs(Ze.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const bi=Date.now()>=this._dragStartTime+this._getDragStartDelay(Le),Cn=this._dropContainer;if(!bi)return void this._endDragSequence(Le);(!Cn||!Cn.isDragging()&&!Cn.isReceiving())&&(Le.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(Le)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),Le.preventDefault();const rt=this._getConstrainedPointerPosition(Ze);if(this._hasMoved=!0,this._lastKnownPointerPosition=Ze,this._updatePointerDirectionDelta(rt),this._dropContainer)this._updateActiveDropContainer(rt,Ze);else{const Ct=this._activeTransform;Ct.x=rt.x-this._pickupPositionOnPage.x+this._passiveTransform.x,Ct.y=rt.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(Ct.x,Ct.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:rt,event:Le,distance:this._getDragDistance(rt),delta:this._pointerDirectionDelta})})},this._pointerUp=Le=>{this._endDragSequence(Le)},this.withRootElement(C).withParent(_.parentDragRef||null),this._parentPositions=new Po(j,le),Pe.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(C){const _=D(C);_!==this._disabled&&(this._disabled=_,this._toggleNativeDragInteractions(),this._handles.forEach(j=>Fr(j,_)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(C){this._handles=C.map(j=>M(j)),this._handles.forEach(j=>Fr(j,this.disabled)),this._toggleNativeDragInteractions();const _=new Set;return this._disabledHandles.forEach(j=>{this._handles.indexOf(j)>-1&&_.add(j)}),this._disabledHandles=_,this}withPreviewTemplate(C){return this._previewTemplate=C,this}withPlaceholderTemplate(C){return this._placeholderTemplate=C,this}withRootElement(C){const _=M(C);return _!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{_.addEventListener("mousedown",this._pointerDown,bs),_.addEventListener("touchstart",this._pointerDown,nr)}),this._initialTransform=void 0,this._rootElement=_),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(C){return this._boundaryElement=C?M(C):null,this._resizeSubscription.unsubscribe(),C&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(C){return this._parentDragRef=C,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(C){!this._disabledHandles.has(C)&&this._handles.indexOf(C)>-1&&(this._disabledHandles.add(C),Fr(C,!0))}enableHandle(C){this._disabledHandles.has(C)&&(this._disabledHandles.delete(C),Fr(C,this.disabled))}withDirection(C){return this._direction=C,this}_withDropContainer(C){this._dropContainer=C}getFreeDragPosition(){const C=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:C.x,y:C.y}}setFreeDragPosition(C){return this._activeTransform={x:0,y:0},this._passiveTransform.x=C.x,this._passiveTransform.y=C.y,this._dropContainer||this._applyRootElementTransform(C.x,C.y),this}withPreviewContainer(C){return this._previewContainer=C,this}_sortFromLastPointerPosition(){const C=this._lastKnownPointerPosition;C&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(C),C)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(C){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(C),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const _=this._getPointerPositionOnPage(C);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(_),dropPoint:_})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(C){Vt(C)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const _=this._dropContainer;if(_){const j=this._rootElement,Q=j.parentNode,le=this._placeholder=this._createPlaceholderElement(),Pe=this._anchor=this._anchor||this._document.createComment(""),Le=this._getShadowRoot();Q.insertBefore(Pe,j),this._initialTransform=j.style.transform||"",this._preview=this._createPreviewElement(),Et(j,!1,it),this._document.body.appendChild(Q.replaceChild(le,j)),this._getPreviewInsertionPoint(Q,Le).appendChild(this._preview),this.started.next({source:this}),_.start(),this._initialContainer=_,this._initialIndex=_.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(_?_.getScrollableParents():[])}_initializeDragSequence(C,_){this._parentDragRef&&_.stopPropagation();const j=this.isDragging(),Q=Vt(_),le=!Q&&0!==_.button,Pe=this._rootElement,Le=Be(_),Ze=!Q&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),rt=Q?function(V){const C=V.touches&&V.touches[0]||V.changedTouches&&V.changedTouches[0];return!(!C||-1!==C.identifier||null!=C.radiusX&&1!==C.radiusX||null!=C.radiusY&&1!==C.radiusY)}(_):0===(V=_).offsetX&&0===V.offsetY;var V;if(Le&&Le.draggable&&"mousedown"===_.type&&_.preventDefault(),j||le||Ze||rt)return;if(this._handles.length){const Or=Pe.style;this._rootElementTapHighlight=Or.webkitTapHighlightColor||"",Or.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Or=>this._updateOnScroll(Or)),this._boundaryElement&&(this._boundaryRect=Kn(this._boundaryElement));const Ct=this._previewTemplate;this._pickupPositionInElement=Ct&&Ct.template&&!Ct.matchSize?{x:0,y:0}:this._getPointerPositionInElement(C,_);const vr=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(_);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:vr.x,y:vr.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,_)}_cleanupDragArtifacts(C){Et(this._rootElement,!0,it),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const _=this._dropContainer,j=_.getItemIndex(this),Q=this._getPointerPositionOnPage(C),le=this._getDragDistance(Q),Pe=_._isOverContainer(Q.x,Q.y);this.ended.next({source:this,distance:le,dropPoint:Q}),this.dropped.next({item:this,currentIndex:j,previousIndex:this._initialIndex,container:_,previousContainer:this._initialContainer,isPointerOverContainer:Pe,distance:le,dropPoint:Q}),_.drop(this,j,this._initialIndex,this._initialContainer,Pe,le,Q),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:C,y:_},{x:j,y:Q}){let le=this._initialContainer._getSiblingContainerFromPosition(this,C,_);!le&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(C,_)&&(le=this._initialContainer),le&&le!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=le,this._dropContainer.enter(this,C,_,le===this._initialContainer&&le.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:le,currentIndex:le.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(j,Q),this._dropContainer._sortItem(this,C,_,this._pointerDirectionDelta),this._applyPreviewTransform(C-this._pickupPositionInElement.x,_-this._pickupPositionInElement.y))}_createPreviewElement(){const C=this._previewTemplate,_=this.previewClass,j=C?C.template:null;let Q;if(j&&C){const le=C.matchSize?this._rootElement.getBoundingClientRect():null,Pe=C.viewContainer.createEmbeddedView(j,C.context);Pe.detectChanges(),Q=To(Pe,this._document),this._previewRef=Pe,C.matchSize?vi(Q,le):Q.style.transform=$e(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const le=this._rootElement;Q=_s(le),vi(Q,le.getBoundingClientRect()),this._initialTransform&&(Q.style.transform=this._initialTransform)}return Ui(Q.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},it),Fr(Q,!1),Q.classList.add("cdk-drag-preview"),Q.setAttribute("dir",this._direction),_&&(Array.isArray(_)?_.forEach(le=>Q.classList.add(le)):Q.classList.add(_)),Q}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const C=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(C.left,C.top);const _=function(V){const C=getComputedStyle(V),_=Wn(C,"transition-property"),j=_.find(Le=>"transform"===Le||"all"===Le);if(!j)return 0;const Q=_.indexOf(j),le=Wn(C,"transition-duration"),Pe=Wn(C,"transition-delay");return Oo(le[Q])+Oo(Pe[Q])}(this._preview);return 0===_?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(j=>{const Q=Pe=>{(!Pe||Be(Pe)===this._preview&&"transform"===Pe.propertyName)&&(this._preview?.removeEventListener("transitionend",Q),j(),clearTimeout(le))},le=setTimeout(Q,1.5*_);this._preview.addEventListener("transitionend",Q)}))}_createPlaceholderElement(){const C=this._placeholderTemplate,_=C?C.template:null;let j;return _?(this._placeholderRef=C.viewContainer.createEmbeddedView(_,C.context),this._placeholderRef.detectChanges(),j=To(this._placeholderRef,this._document)):j=_s(this._rootElement),j.classList.add("cdk-drag-placeholder"),j}_getPointerPositionInElement(C,_){const j=this._rootElement.getBoundingClientRect(),Q=C===this._rootElement?null:C,le=Q?Q.getBoundingClientRect():j,Pe=Vt(_)?_.targetTouches[0]:_,Le=this._getViewportScrollPosition();return{x:le.left-j.left+(Pe.pageX-le.left-Le.left),y:le.top-j.top+(Pe.pageY-le.top-Le.top)}}_getPointerPositionOnPage(C){const _=this._getViewportScrollPosition(),j=Vt(C)?C.touches[0]||C.changedTouches[0]||{pageX:0,pageY:0}:C,Q=j.pageX-_.left,le=j.pageY-_.top;if(this._ownerSVGElement){const Pe=this._ownerSVGElement.getScreenCTM();if(Pe){const Le=this._ownerSVGElement.createSVGPoint();return Le.x=Q,Le.y=le,Le.matrixTransform(Pe.inverse())}}return{x:Q,y:le}}_getConstrainedPointerPosition(C){const _=this._dropContainer?this._dropContainer.lockAxis:null;let{x:j,y:Q}=this.constrainPosition?this.constrainPosition(C,this):C;if("x"===this.lockAxis||"x"===_?Q=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===_)&&(j=this._pickupPositionOnPage.x),this._boundaryRect){const{x:le,y:Pe}=this._pickupPositionInElement,Le=this._boundaryRect,Ze=this._previewRect,rt=Le.top+Pe,Ct=Le.bottom-(Ze.height-Pe);j=mi(j,Le.left+le,Le.right-(Ze.width-le)),Q=mi(Q,rt,Ct)}return{x:j,y:Q}}_updatePointerDirectionDelta(C){const{x:_,y:j}=C,Q=this._pointerDirectionDelta,le=this._pointerPositionAtLastDirectionChange,Pe=Math.abs(_-le.x),Le=Math.abs(j-le.y);return Pe>this._config.pointerDirectionChangeThreshold&&(Q.x=_>le.x?1:-1,le.x=_),Le>this._config.pointerDirectionChangeThreshold&&(Q.y=j>le.y?1:-1,le.y=j),Q}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const C=this._handles.length>0||!this.isDragging();C!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=C,Fr(this._rootElement,C))}_removeRootElementListeners(C){C.removeEventListener("mousedown",this._pointerDown,bs),C.removeEventListener("touchstart",this._pointerDown,nr)}_applyRootElementTransform(C,_){const j=$e(C,_),Q=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=Q.transform&&"none"!=Q.transform?Q.transform:""),Q.transform=zn(j,this._initialTransform)}_applyPreviewTransform(C,_){const j=this._previewTemplate?.template?void 0:this._initialTransform,Q=$e(C,_);this._preview.style.transform=zn(Q,j)}_getDragDistance(C){const _=this._pickupPositionOnPage;return _?{x:C.x-_.x,y:C.y-_.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:C,y:_}=this._passiveTransform;if(0===C&&0===_||this.isDragging()||!this._boundaryElement)return;const j=this._boundaryElement.getBoundingClientRect(),Q=this._rootElement.getBoundingClientRect();if(0===j.width&&0===j.height||0===Q.width&&0===Q.height)return;const le=j.left-Q.left,Pe=Q.right-j.right,Le=j.top-Q.top,Ze=Q.bottom-j.bottom;j.width>Q.width?(le>0&&(C+=le),Pe>0&&(C-=Pe)):C=0,j.height>Q.height?(Le>0&&(_+=Le),Ze>0&&(_-=Ze)):_=0,(C!==this._passiveTransform.x||_!==this._passiveTransform.y)&&this.setFreeDragPosition({y:_,x:C})}_getDragStartDelay(C){const _=this.dragStartDelay;return"number"==typeof _?_:Vt(C)?_.touch:_?_.mouse:0}_updateOnScroll(C){const _=this._parentPositions.handleScroll(C);if(_){const j=Be(C);this._boundaryRect&&j!==this._boundaryElement&&j.contains(this._boundaryElement)&&pi(this._boundaryRect,_.top,_.left),this._pickupPositionOnPage.x+=_.left,this._pickupPositionOnPage.y+=_.top,this._dropContainer||(this._activeTransform.x-=_.left,this._activeTransform.y-=_.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const C=this._parentPositions.positions.get(this._document);return C?C.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=ie(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(C,_){const j=this._previewContainer||"global";if("parent"===j)return C;if("global"===j){const Q=this._document;return _||Q.fullscreenElement||Q.webkitFullscreenElement||Q.mozFullScreenElement||Q.msFullscreenElement||Q.body}return M(j)}}function $e(V,C){return`translate3d(${Math.round(V)}px, ${Math.round(C)}px, 0)`}function mi(V,C,_){return Math.max(C,Math.min(_,V))}function Vt(V){return"t"===V.type[0]}function To(V,C){const _=V.rootNodes;if(1===_.length&&_[0].nodeType===C.ELEMENT_NODE)return _[0];const j=C.createElement("div");return _.forEach(Q=>j.appendChild(Q)),j}function vi(V,C){V.style.width=`${C.width}px`,V.style.height=`${C.height}px`,V.style.transform=$e(C.left,C.top)}function Qr(V,C){return Math.max(0,Math.min(C,V))}class Vn{constructor(C,_,j,Q,le){this._dragDropRegistry=_,this._ngZone=Q,this._viewportRuler=le,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new S.x,this.entered=new S.x,this.exited=new S.x,this.dropped=new S.x,this.sorted=new S.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=Un.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new S.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(V=0,C=$a.z){return V<0&&(V=0),(0,za.H)(V,V,C)}(0,x.Z).pipe((0,Zt.R)(this._stopScrollTimers)).subscribe(()=>{const Pe=this._scrollNode,Le=this.autoScrollStep;1===this._verticalScrollDirection?Pe.scrollBy(0,-Le):2===this._verticalScrollDirection&&Pe.scrollBy(0,Le),1===this._horizontalScrollDirection?Pe.scrollBy(-Le,0):2===this._horizontalScrollDirection&&Pe.scrollBy(Le,0)})},this.element=M(C),this._document=j,this.withScrollableParents([this.element]),_.registerDropContainer(this),this._parentPositions=new Po(j,le)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(C,_,j,Q){let le;this._draggingStarted(),null==Q?(le=this.sortingDisabled?this._draggables.indexOf(C):-1,-1===le&&(le=this._getItemIndexFromPointerPosition(C,_,j))):le=Q;const Pe=this._activeDraggables,Le=Pe.indexOf(C),Ze=C.getPlaceholderElement();let rt=Pe[le];if(rt===C&&(rt=Pe[le+1]),Le>-1&&Pe.splice(Le,1),rt&&!this._dragDropRegistry.isDragging(rt)){const Ct=rt.getRootElement();Ct.parentElement.insertBefore(Ze,Ct),Pe.splice(le,0,C)}else if(this._shouldEnterAsFirstChild(_,j)){const Ct=Pe[0].getRootElement();Ct.parentNode.insertBefore(Ze,Ct),Pe.unshift(C)}else M(this.element).appendChild(Ze),Pe.push(C);Ze.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:C,container:this,currentIndex:this.getItemIndex(C)})}exit(C){this._reset(),this.exited.next({item:C,container:this})}drop(C,_,j,Q,le,Pe,Le){this._reset(),this.dropped.next({item:C,currentIndex:_,previousIndex:j,container:this,previousContainer:Q,isPointerOverContainer:le,distance:Pe,dropPoint:Le})}withItems(C){const _=this._draggables;return this._draggables=C,C.forEach(j=>j._withDropContainer(this)),this.isDragging()&&(_.filter(Q=>Q.isDragging()).every(Q=>-1===C.indexOf(Q))?this._reset():this._cacheItems()),this}withDirection(C){return this._direction=C,this}connectedTo(C){return this._siblings=C.slice(),this}withOrientation(C){return this._orientation=C,this}withScrollableParents(C){const _=M(this.element);return this._scrollableElements=-1===C.indexOf(_)?[_,...C]:C.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(C){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(j=>j.drag===C):this._draggables.indexOf(C)}isReceiving(){return this._activeSiblings.size>0}_sortItem(C,_,j,Q){if(this.sortingDisabled||!this._clientRect||!ys(this._clientRect,.05,_,j))return;const le=this._itemPositions,Pe=this._getItemIndexFromPointerPosition(C,_,j,Q);if(-1===Pe&&le.length>0)return;const Le="horizontal"===this._orientation,Ze=le.findIndex(Er=>Er.drag===C),rt=le[Pe],vr=rt.clientRect,Or=Ze>Pe?1:-1,bi=this._getItemOffsetPx(le[Ze].clientRect,vr,Or),Cn=this._getSiblingOffsetPx(Ze,le,Or),Zn=le.slice();(function(V,C,_){const j=Qr(C,V.length-1),Q=Qr(_,V.length-1);if(j===Q)return;const le=V[j],Pe=Q<j?-1:1;for(let Le=j;Le!==Q;Le+=Pe)V[Le]=V[Le+Pe];V[Q]=le})(le,Ze,Pe),this.sorted.next({previousIndex:Ze,currentIndex:Pe,container:this,item:C}),le.forEach((Er,zr)=>{if(Zn[zr]===Er)return;const Zr=Er.drag===C,Ei=Zr?bi:Cn,Rs=Zr?C.getPlaceholderElement():Er.drag.getRootElement();Er.offset+=Ei,Le?(Rs.style.transform=zn(`translate3d(${Math.round(Er.offset)}px, 0, 0)`,Er.initialTransform),pi(Er.clientRect,0,Ei)):(Rs.style.transform=zn(`translate3d(0, ${Math.round(Er.offset)}px, 0)`,Er.initialTransform),pi(Er.clientRect,Ei,0))}),this._previousSwap.overlaps=hr(vr,_,j),this._previousSwap.drag=rt.drag,this._previousSwap.delta=Le?Q.x:Q.y}_startScrollingIfNecessary(C,_){if(this.autoScrollDisabled)return;let j,Q=0,le=0;if(this._parentPositions.positions.forEach((Pe,Le)=>{Le===this._document||!Pe.clientRect||j||ys(Pe.clientRect,.05,C,_)&&([Q,le]=function(V,C,_,j){const Q=Cs(C,j),le=zi(C,_);let Pe=0,Le=0;if(Q){const Ze=V.scrollTop;1===Q?Ze>0&&(Pe=1):V.scrollHeight-Ze>V.clientHeight&&(Pe=2)}if(le){const Ze=V.scrollLeft;1===le?Ze>0&&(Le=1):V.scrollWidth-Ze>V.clientWidth&&(Le=2)}return[Pe,Le]}(Le,Pe.clientRect,C,_),(Q||le)&&(j=Le))}),!Q&&!le){const{width:Pe,height:Le}=this._viewportRuler.getViewportSize(),Ze={width:Pe,height:Le,top:0,right:Pe,bottom:Le,left:0};Q=Cs(Ze,_),le=zi(Ze,C),j=window}j&&(Q!==this._verticalScrollDirection||le!==this._horizontalScrollDirection||j!==this._scrollNode)&&(this._verticalScrollDirection=Q,this._horizontalScrollDirection=le,this._scrollNode=j,(Q||le)&&j?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const C=M(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=C.msScrollSnapType||C.scrollSnapType||"",C.scrollSnapType=C.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const C=M(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(C).clientRect}_cacheItemPositions(){const C="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(_=>{const j=_.getVisibleElement();return{drag:_,offset:0,initialTransform:j.style.transform||"",clientRect:Kn(j)}}).sort((_,j)=>C?_.clientRect.left-j.clientRect.left:_.clientRect.top-j.clientRect.top)}_reset(){this._isDragging=!1;const C=M(this.element).style;C.scrollSnapType=C.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(_=>{const j=_.getRootElement();if(j){const Q=this._itemPositions.find(le=>le.drag===_)?.initialTransform;j.style.transform=Q||""}}),this._siblings.forEach(_=>_._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(C,_,j){const Q="horizontal"===this._orientation,le=_[C].clientRect,Pe=_[C+-1*j];let Le=le[Q?"width":"height"]*j;if(Pe){const Ze=Q?"left":"top",rt=Q?"right":"bottom";-1===j?Le-=Pe.clientRect[Ze]-le[rt]:Le+=le[Ze]-Pe.clientRect[rt]}return Le}_getItemOffsetPx(C,_,j){const Q="horizontal"===this._orientation;let le=Q?_.left-C.left:_.top-C.top;return-1===j&&(le+=Q?_.width-C.width:_.height-C.height),le}_shouldEnterAsFirstChild(C,_){if(!this._activeDraggables.length)return!1;const j=this._itemPositions,Q="horizontal"===this._orientation;if(j[0].drag!==this._activeDraggables[0]){const Pe=j[j.length-1].clientRect;return Q?C>=Pe.right:_>=Pe.bottom}{const Pe=j[0].clientRect;return Q?C<=Pe.left:_<=Pe.top}}_getItemIndexFromPointerPosition(C,_,j,Q){const le="horizontal"===this._orientation,Pe=this._itemPositions.findIndex(({drag:Le,clientRect:Ze})=>{if(Le===C)return!1;if(Q){const rt=le?Q.x:Q.y;if(Le===this._previousSwap.drag&&this._previousSwap.overlaps&&rt===this._previousSwap.delta)return!1}return le?_>=Math.floor(Ze.left)&&_<Math.floor(Ze.right):j>=Math.floor(Ze.top)&&j<Math.floor(Ze.bottom)});return-1!==Pe&&this.sortPredicate(Pe,C,this)?Pe:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(C,_){return null!=this._clientRect&&hr(this._clientRect,C,_)}_getSiblingContainerFromPosition(C,_,j){return this._siblings.find(Q=>Q._canReceive(C,_,j))}_canReceive(C,_,j){if(!this._clientRect||!hr(this._clientRect,_,j)||!this.enterPredicate(C,this))return!1;const Q=this._getShadowRoot().elementFromPoint(_,j);if(!Q)return!1;const le=M(this.element);return Q===le||le.contains(Q)}_startReceiving(C,_){const j=this._activeSiblings;!j.has(C)&&_.every(Q=>this.enterPredicate(Q,this)||this._draggables.indexOf(Q)>-1)&&(j.add(C),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(C){this._activeSiblings.delete(C),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(C=>{if(this.isDragging()){const _=this._parentPositions.handleScroll(C);_&&(this._itemPositions.forEach(({clientRect:j})=>{pi(j,_.top,_.left)}),this._itemPositions.forEach(({drag:j})=>{this._dragDropRegistry.isDragging(j)&&j._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const C=ie(M(this.element));this._cachedShadowRoot=C||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const C=this._activeDraggables.filter(_=>_.isDragging());this._siblings.forEach(_=>_._startReceiving(this,C))}}function Cs(V,C){const{top:_,bottom:j,height:Q}=V,le=.05*Q;return C>=_-le&&C<=_+le?1:C>=j-le&&C<=j+le?2:0}function zi(V,C){const{left:_,right:j,width:Q}=V,le=.05*Q;return C>=_-le&&C<=_+le?1:C>=j-le&&C<=j+le?2:0}const Gn=pe({passive:!1,capture:!0});let Ro=(()=>{class V{constructor(_,j){this._ngZone=_,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=Q=>Q.isDragging(),this.pointerMove=new S.x,this.pointerUp=new S.x,this.scroll=new S.x,this._preventDefaultWhileDragging=Q=>{this._activeDragInstances.length>0&&Q.preventDefault()},this._persistentTouchmoveListener=Q=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&Q.preventDefault(),this.pointerMove.next(Q))},this._document=j}registerDropContainer(_){this._dropInstances.has(_)||this._dropInstances.add(_)}registerDragItem(_){this._dragInstances.add(_),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Gn)})}removeDropContainer(_){this._dropInstances.delete(_)}removeDragItem(_){this._dragInstances.delete(_),this.stopDragging(_),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Gn)}startDragging(_,j){if(!(this._activeDragInstances.indexOf(_)>-1)&&(this._activeDragInstances.push(_),1===this._activeDragInstances.length)){const Q=j.type.startsWith("touch");this._globalListeners.set(Q?"touchend":"mouseup",{handler:le=>this.pointerUp.next(le),options:!0}).set("scroll",{handler:le=>this.scroll.next(le),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Gn}),Q||this._globalListeners.set("mousemove",{handler:le=>this.pointerMove.next(le),options:Gn}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((le,Pe)=>{this._document.addEventListener(Pe,le.handler,le.options)})})}}stopDragging(_){const j=this._activeDragInstances.indexOf(_);j>-1&&(this._activeDragInstances.splice(j,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(_){return this._activeDragInstances.indexOf(_)>-1}scrolled(_){const j=[this.scroll];return _&&_!==this._document&&j.push(new T.y(Q=>this._ngZone.runOutsideAngular(()=>{const Pe=Le=>{this._activeDragInstances.length&&Q.next(Le)};return _.addEventListener("scroll",Pe,!0),()=>{_.removeEventListener("scroll",Pe,!0)}}))),(0,gs.T)(...j)}ngOnDestroy(){this._dragInstances.forEach(_=>this.removeDragItem(_)),this._dropInstances.forEach(_=>this.removeDropContainer(_)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((_,j)=>{this._document.removeEventListener(j,_.handler,_.options)}),this._globalListeners.clear()}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(a.DOCUMENT))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();const Ds={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Qn=(()=>{class V{constructor(_,j,Q,le){this._document=_,this._ngZone=j,this._viewportRuler=Q,this._dragDropRegistry=le}createDrag(_,j=Ds){return new Es(_,j,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(_){return new Vn(_,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275inject(a.DOCUMENT),g.\u0275\u0275inject(g.NgZone),g.\u0275\u0275inject(Tt),g.\u0275\u0275inject(Ro))},V.\u0275prov=g.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac,providedIn:"root"}),V})();const fn=new g.InjectionToken("CDK_DRAG_PARENT"),As=new g.InjectionToken("CdkDropListGroup"),Wi=new g.InjectionToken("CDK_DRAG_CONFIG");let Os=0;const wn=new g.InjectionToken("CdkDropList");let Ps=(()=>{class V{constructor(_,j,Q,le,Pe,Le,Ze){this.element=_,this._changeDetectorRef=Q,this._scrollDispatcher=le,this._dir=Pe,this._group=Le,this._destroyed=new S.x,this.connectedTo=[],this.id="cdk-drop-list-"+Os++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new g.EventEmitter,this.entered=new g.EventEmitter,this.exited=new g.EventEmitter,this.sorted=new g.EventEmitter,this._unsortedItems=new Set,this._dropListRef=j.createDropList(_),this._dropListRef.data=this,Ze&&this._assignDefaults(Ze),this._dropListRef.enterPredicate=(rt,Ct)=>this.enterPredicate(rt.data,Ct.data),this._dropListRef.sortPredicate=(rt,Ct,vr)=>this.sortPredicate(rt,Ct.data,vr.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),V._dropLists.push(this),Le&&Le._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(_){this._dropListRef.disabled=this._disabled=D(_)}addItem(_){this._unsortedItems.add(_),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(_){this._unsortedItems.delete(_),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((_,j)=>_._dragRef.getVisibleElement().compareDocumentPosition(j._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const _=V._dropLists.indexOf(this);_>-1&&V._dropLists.splice(_,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(_){this._dir&&this._dir.change.pipe((0,jt.O)(this._dir.value),(0,Zt.R)(this._destroyed)).subscribe(j=>_.withDirection(j)),_.beforeStarted.subscribe(()=>{const j=function(V){return Array.isArray(V)?V:[V]}(this.connectedTo).map(Q=>"string"==typeof Q?V._dropLists.find(Pe=>Pe.id===Q):Q);if(this._group&&this._group._items.forEach(Q=>{-1===j.indexOf(Q)&&j.push(Q)}),!this._scrollableParentsResolved){const Q=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(le=>le.getElementRef().nativeElement);this._dropListRef.withScrollableParents(Q),this._scrollableParentsResolved=!0}_.disabled=this.disabled,_.lockAxis=this.lockAxis,_.sortingDisabled=D(this.sortingDisabled),_.autoScrollDisabled=D(this.autoScrollDisabled),_.autoScrollStep=p(this.autoScrollStep,2),_.connectedTo(j.filter(Q=>Q&&Q!==this).map(Q=>Q._dropListRef)).withOrientation(this.orientation)})}_handleEvents(_){_.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),_.entered.subscribe(j=>{this.entered.emit({container:this,item:j.item.data,currentIndex:j.currentIndex})}),_.exited.subscribe(j=>{this.exited.emit({container:this,item:j.item.data}),this._changeDetectorRef.markForCheck()}),_.sorted.subscribe(j=>{this.sorted.emit({previousIndex:j.previousIndex,currentIndex:j.currentIndex,container:this,item:j.item.data})}),_.dropped.subscribe(j=>{this.dropped.emit({previousIndex:j.previousIndex,currentIndex:j.currentIndex,previousContainer:j.previousContainer.data,container:j.container.data,item:j.item.data,isPointerOverContainer:j.isPointerOverContainer,distance:j.distance,dropPoint:j.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(_){const{lockAxis:j,draggingDisabled:Q,sortingDisabled:le,listAutoScrollDisabled:Pe,listOrientation:Le}=_;this.disabled=Q??!1,this.sortingDisabled=le??!1,this.autoScrollDisabled=Pe??!1,this.orientation=Le||"vertical",j&&(this.lockAxis=j)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(_=>_._dragRef))}}return V._dropLists=[],V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(Qn),g.\u0275\u0275directiveInject(g.ChangeDetectorRef),g.\u0275\u0275directiveInject(et),g.\u0275\u0275directiveInject(En,8),g.\u0275\u0275directiveInject(As,12),g.\u0275\u0275directiveInject(Wi,8))},V.\u0275dir=g.\u0275\u0275defineDirective({type:V,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(_,j){2&_&&(g.\u0275\u0275attribute("id",j.id),g.\u0275\u0275classProp("cdk-drop-list-disabled",j.disabled)("cdk-drop-list-dragging",j._dropListRef.isDragging())("cdk-drop-list-receiving",j._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[g.\u0275\u0275ProvidersFeature([{provide:As,useValue:void 0},{provide:wn,useExisting:V}])]}),V})();const gi=new g.InjectionToken("CdkDragHandle"),yi=new g.InjectionToken("CdkDragPlaceholder");let Is=(()=>{class V{constructor(_){this.templateRef=_}}return V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275directiveInject(g.TemplateRef))},V.\u0275dir=g.\u0275\u0275defineDirective({type:V,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[g.\u0275\u0275ProvidersFeature([{provide:yi,useExisting:V}])]}),V})();const Ts=new g.InjectionToken("CdkDragPreview");let ko=(()=>{class V{constructor(_,j,Q,le,Pe,Le,Ze,rt,Ct,vr,Or){this.element=_,this.dropContainer=j,this._ngZone=le,this._viewContainerRef=Pe,this._dir=Ze,this._changeDetectorRef=Ct,this._selfHandle=vr,this._parentDrag=Or,this._destroyed=new S.x,this.started=new g.EventEmitter,this.released=new g.EventEmitter,this.ended=new g.EventEmitter,this.entered=new g.EventEmitter,this.exited=new g.EventEmitter,this.dropped=new g.EventEmitter,this.moved=new T.y(bi=>{const Cn=this._dragRef.moved.pipe((0,di.U)(Zn=>({source:this,pointerPosition:Zn.pointerPosition,event:Zn.event,delta:Zn.delta,distance:Zn.distance}))).subscribe(bi);return()=>{Cn.unsubscribe()}}),this._dragRef=rt.createDrag(_,{dragStartThreshold:Le&&null!=Le.dragStartThreshold?Le.dragStartThreshold:5,pointerDirectionChangeThreshold:Le&&null!=Le.pointerDirectionChangeThreshold?Le.pointerDirectionChangeThreshold:5,zIndex:Le?.zIndex}),this._dragRef.data=this,V._dragInstances.push(this),Le&&this._assignDefaults(Le),j&&(this._dragRef._withDropContainer(j._dropListRef),j.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(_){this._disabled=D(_),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,cn.q)(1),(0,Zt.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(_){const j=_.rootElementSelector,Q=_.freeDragPosition;j&&!j.firstChange&&this._updateRootElement(),Q&&!Q.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const _=V._dragInstances.indexOf(this);_>-1&&V._dragInstances.splice(_,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const _=this.element.nativeElement;let j=_;this.rootElementSelector&&(j=void 0!==_.closest?_.closest(this.rootElementSelector):_.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(j||_)}_getBoundaryElement(){const _=this.boundaryElement;return _?"string"==typeof _?this.element.nativeElement.closest(_):M(_):null}_syncInputs(_){_.beforeStarted.subscribe(()=>{if(!_.isDragging()){const j=this._dir,Q=this.dragStartDelay,le=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,Pe=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;_.disabled=this.disabled,_.lockAxis=this.lockAxis,_.dragStartDelay="object"==typeof Q&&Q?Q:p(Q),_.constrainPosition=this.constrainPosition,_.previewClass=this.previewClass,_.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(le).withPreviewTemplate(Pe).withPreviewContainer(this.previewContainer||"global"),j&&_.withDirection(j.value)}}),_.beforeStarted.pipe((0,cn.q)(1)).subscribe(()=>{if(this._parentDrag)return void _.withParent(this._parentDrag._dragRef);let j=this.element.nativeElement.parentElement;for(;j;){if(j.classList.contains("cdk-drag")){_.withParent(V._dragInstances.find(Q=>Q.element.nativeElement===j)?._dragRef||null);break}j=j.parentElement}})}_handleEvents(_){_.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),_.released.subscribe(()=>{this.released.emit({source:this})}),_.ended.subscribe(j=>{this.ended.emit({source:this,distance:j.distance,dropPoint:j.dropPoint}),this._changeDetectorRef.markForCheck()}),_.entered.subscribe(j=>{this.entered.emit({container:j.container.data,item:this,currentIndex:j.currentIndex})}),_.exited.subscribe(j=>{this.exited.emit({container:j.container.data,item:this})}),_.dropped.subscribe(j=>{this.dropped.emit({previousIndex:j.previousIndex,currentIndex:j.currentIndex,previousContainer:j.previousContainer.data,container:j.container.data,isPointerOverContainer:j.isPointerOverContainer,item:this,distance:j.distance,dropPoint:j.dropPoint})})}_assignDefaults(_){const{lockAxis:j,dragStartDelay:Q,constrainPosition:le,previewClass:Pe,boundaryElement:Le,draggingDisabled:Ze,rootElementSelector:rt,previewContainer:Ct}=_;this.disabled=Ze??!1,this.dragStartDelay=Q||0,j&&(this.lockAxis=j),le&&(this.constrainPosition=le),Pe&&(this.previewClass=Pe),Le&&(this.boundaryElement=Le),rt&&(this.rootElementSelector=rt),Ct&&(this.previewContainer=Ct)}_setupHandlesListener(){this._handles.changes.pipe((0,jt.O)(this._handles),(0,ji.b)(_=>{const j=_.filter(Q=>Q._parentDrag===this).map(Q=>Q.element);this._selfHandle&&this.rootElementSelector&&j.push(this.element),this._dragRef.withHandles(j)}),(0,bn.w)(_=>(0,gs.T)(..._.map(j=>j._stateChanges.pipe((0,jt.O)(j))))),(0,Zt.R)(this._destroyed)).subscribe(_=>{const j=this._dragRef,Q=_.element.nativeElement;_.disabled?j.disableHandle(Q):j.enableHandle(Q)})}}return V._dragInstances=[],V.\u0275fac=function(_){return new(_||V)(g.\u0275\u0275directiveInject(g.ElementRef),g.\u0275\u0275directiveInject(wn,12),g.\u0275\u0275directiveInject(a.DOCUMENT),g.\u0275\u0275directiveInject(g.NgZone),g.\u0275\u0275directiveInject(g.ViewContainerRef),g.\u0275\u0275directiveInject(Wi,8),g.\u0275\u0275directiveInject(En,8),g.\u0275\u0275directiveInject(Qn),g.\u0275\u0275directiveInject(g.ChangeDetectorRef),g.\u0275\u0275directiveInject(gi,10),g.\u0275\u0275directiveInject(fn,12))},V.\u0275dir=g.\u0275\u0275defineDirective({type:V,selectors:[["","cdkDrag",""]],contentQueries:function(_,j,Q){if(1&_&&(g.\u0275\u0275contentQuery(Q,Ts,5),g.\u0275\u0275contentQuery(Q,yi,5),g.\u0275\u0275contentQuery(Q,gi,5)),2&_){let le;g.\u0275\u0275queryRefresh(le=g.\u0275\u0275loadQuery())&&(j._previewTemplate=le.first),g.\u0275\u0275queryRefresh(le=g.\u0275\u0275loadQuery())&&(j._placeholderTemplate=le.first),g.\u0275\u0275queryRefresh(le=g.\u0275\u0275loadQuery())&&(j._handles=le)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(_,j){2&_&&g.\u0275\u0275classProp("cdk-drag-disabled",j.disabled)("cdk-drag-dragging",j._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[g.\u0275\u0275ProvidersFeature([{provide:fn,useExisting:V}]),g.\u0275\u0275NgOnChangesFeature]}),V})(),Lo=(()=>{class V{}return V.\u0275fac=function(_){return new(_||V)},V.\u0275mod=g.\u0275\u0275defineNgModule({type:V}),V.\u0275inj=g.\u0275\u0275defineInjector({providers:[Qn],imports:[ir]}),V})()},1481:(oe,N,l)=>{l.d(N,{b2:()=>cr,H7:()=>vn,q6:()=>Rr,se:()=>X});var g=l(1457),a=l(7777);class D extends g.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class p extends D{static makeCurrent(){(0,g.\u0275setRootDomAdapter)(new p)}onAndCancel(ve,se,Ce){return ve.addEventListener(se,Ce,!1),()=>{ve.removeEventListener(se,Ce,!1)}}dispatchEvent(ve,se){ve.dispatchEvent(se)}remove(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}createElement(ve,se){return(se=se||this.getDefaultDocument()).createElement(ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ve){return ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(ve){return ve instanceof DocumentFragment}getGlobalEventTarget(ve,se){return"window"===se?window:"document"===se?ve:"body"===se?ve.body:null}getBaseHref(ve){const se=(B=B||document.querySelector("base"),B?B.getAttribute("href"):null);return null==se?null:function(Ae){F=F||document.createElement("a"),F.setAttribute("href",Ae);const ve=F.pathname;return"/"===ve.charAt(0)?ve:`/${ve}`}(se)}resetBaseElement(){B=null}getUserAgent(){return window.navigator.userAgent}getCookie(ve){return(0,g.\u0275parseCookieValue)(document.cookie,ve)}}let F,B=null;const I=new a.InjectionToken("TRANSITION_ID"),w=[{provide:a.APP_INITIALIZER,useFactory:function(Ae,ve,se){return()=>{se.get(a.ApplicationInitStatus).donePromise.then(()=>{const Ce=(0,g.\u0275getDOM)(),Ue=ve.querySelectorAll(`style[ng-transition="${Ae}"]`);for(let nt=0;nt<Ue.length;nt++)Ce.remove(Ue[nt])})}},deps:[I,g.DOCUMENT,a.Injector],multi:!0}];class T{static init(){(0,a.setTestabilityGetter)(new T)}addToWindow(ve){a.\u0275global.getAngularTestability=(Ce,Ue=!0)=>{const nt=ve.findTestabilityInTree(Ce,Ue);if(null==nt)throw new Error("Could not find testability for element.");return nt},a.\u0275global.getAllAngularTestabilities=()=>ve.getAllTestabilities(),a.\u0275global.getAllAngularRootElements=()=>ve.getAllRootElements(),a.\u0275global.frameworkStabilizers||(a.\u0275global.frameworkStabilizers=[]),a.\u0275global.frameworkStabilizers.push(Ce=>{const Ue=a.\u0275global.getAllAngularTestabilities();let nt=Ue.length,Lt=!1;const br=function(xr){Lt=Lt||xr,nt--,0==nt&&Ce(Lt)};Ue.forEach(function(xr){xr.whenStable(br)})})}findTestabilityInTree(ve,se,Ce){return null==se?null:ve.getTestability(se)??(Ce?(0,g.\u0275getDOM)().isShadowRoot(se)?this.findTestabilityInTree(ve,se.host,!0):this.findTestabilityInTree(ve,se.parentElement,!0):null)}}let P=(()=>{class Ae{build(){return new XMLHttpRequest}}return Ae.\u0275fac=function(se){return new(se||Ae)},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac}),Ae})();const x=new a.InjectionToken("EventManagerPlugins");let R=(()=>{class Ae{constructor(se,Ce){this._zone=Ce,this._eventNameToPlugin=new Map,se.forEach(Ue=>Ue.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,Ce,Ue){return this._findPluginFor(Ce).addEventListener(se,Ce,Ue)}addGlobalEventListener(se,Ce,Ue){return this._findPluginFor(Ce).addGlobalEventListener(se,Ce,Ue)}getZone(){return this._zone}_findPluginFor(se){const Ce=this._eventNameToPlugin.get(se);if(Ce)return Ce;const Ue=this._plugins;for(let nt=0;nt<Ue.length;nt++){const Lt=Ue[nt];if(Lt.supports(se))return this._eventNameToPlugin.set(se,Lt),Lt}throw new Error(`No event manager plugin found for event ${se}`)}}return Ae.\u0275fac=function(se){return new(se||Ae)(a.\u0275\u0275inject(x),a.\u0275\u0275inject(a.NgZone))},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac}),Ae})();class E{constructor(ve){this._doc=ve}addGlobalEventListener(ve,se,Ce){const Ue=(0,g.\u0275getDOM)().getGlobalEventTarget(this._doc,ve);if(!Ue)throw new Error(`Unsupported event target ${Ue} for event ${se}`);return this.addEventListener(Ue,se,Ce)}}let y=(()=>{class Ae{constructor(){this._stylesSet=new Set}addStyles(se){const Ce=new Set;se.forEach(Ue=>{this._stylesSet.has(Ue)||(this._stylesSet.add(Ue),Ce.add(Ue))}),this.onStylesAdded(Ce)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return Ae.\u0275fac=function(se){return new(se||Ae)},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac}),Ae})(),c=(()=>{class Ae extends y{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,Ce,Ue){se.forEach(nt=>{const Lt=this._doc.createElement("style");Lt.textContent=nt,Ue.push(Ce.appendChild(Lt))})}addHost(se){const Ce=[];this._addStylesToHost(this._stylesSet,se,Ce),this._hostNodes.set(se,Ce)}removeHost(se){const Ce=this._hostNodes.get(se);Ce&&Ce.forEach(o),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((Ce,Ue)=>{this._addStylesToHost(se,Ue,Ce)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(o))}}return Ae.\u0275fac=function(se){return new(se||Ae)(a.\u0275\u0275inject(g.DOCUMENT))},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac}),Ae})();function o(Ae){(0,g.\u0275getDOM)().remove(Ae)}const v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},h=/%COMP%/g;function $(Ae,ve,se){for(let Ce=0;Ce<ve.length;Ce++){let Ue=ve[Ce];Array.isArray(Ue)?$(Ae,Ue,se):(Ue=Ue.replace(h,Ae),se.push(Ue))}return se}function J(Ae){return ve=>{if("__ngUnwrap__"===ve)return Ae;!1===Ae(ve)&&(ve.preventDefault(),ve.returnValue=!1)}}let X=(()=>{class Ae{constructor(se,Ce,Ue){this.eventManager=se,this.sharedStylesHost=Ce,this.appId=Ue,this.rendererByCompId=new Map,this.defaultRenderer=new H(se)}createRenderer(se,Ce){if(!se||!Ce)return this.defaultRenderer;switch(Ce.encapsulation){case a.ViewEncapsulation.Emulated:{let Ue=this.rendererByCompId.get(Ce.id);return Ue||(Ue=new Be(this.eventManager,this.sharedStylesHost,Ce,this.appId),this.rendererByCompId.set(Ce.id,Ue)),Ue.applyToHost(se),Ue}case 1:case a.ViewEncapsulation.ShadowDom:return new me(this.eventManager,this.sharedStylesHost,se,Ce);default:if(!this.rendererByCompId.has(Ce.id)){const Ue=$(Ce.id,Ce.styles,[]);this.sharedStylesHost.addStyles(Ue),this.rendererByCompId.set(Ce.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ae.\u0275fac=function(se){return new(se||Ae)(a.\u0275\u0275inject(R),a.\u0275\u0275inject(c),a.\u0275\u0275inject(a.APP_ID))},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac}),Ae})();class H{constructor(ve){this.eventManager=ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ve,se){return se?document.createElementNS(v[se]||se,ve):document.createElement(ve)}createComment(ve){return document.createComment(ve)}createText(ve){return document.createTextNode(ve)}appendChild(ve,se){ve.appendChild(se)}insertBefore(ve,se,Ce){ve&&ve.insertBefore(se,Ce)}removeChild(ve,se){ve&&ve.removeChild(se)}selectRootElement(ve,se){let Ce="string"==typeof ve?document.querySelector(ve):ve;if(!Ce)throw new Error(`The selector "${ve}" did not match any elements`);return se||(Ce.textContent=""),Ce}parentNode(ve){return ve.parentNode}nextSibling(ve){return ve.nextSibling}setAttribute(ve,se,Ce,Ue){if(Ue){se=Ue+":"+se;const nt=v[Ue];nt?ve.setAttributeNS(nt,se,Ce):ve.setAttribute(se,Ce)}else ve.setAttribute(se,Ce)}removeAttribute(ve,se,Ce){if(Ce){const Ue=v[Ce];Ue?ve.removeAttributeNS(Ue,se):ve.removeAttribute(`${Ce}:${se}`)}else ve.removeAttribute(se)}addClass(ve,se){ve.classList.add(se)}removeClass(ve,se){ve.classList.remove(se)}setStyle(ve,se,Ce,Ue){Ue&(a.RendererStyleFlags2.DashCase|a.RendererStyleFlags2.Important)?ve.style.setProperty(se,Ce,Ue&a.RendererStyleFlags2.Important?"important":""):ve.style[se]=Ce}removeStyle(ve,se,Ce){Ce&a.RendererStyleFlags2.DashCase?ve.style.removeProperty(se):ve.style[se]=""}setProperty(ve,se,Ce){ve[se]=Ce}setValue(ve,se){ve.nodeValue=se}listen(ve,se,Ce){return"string"==typeof ve?this.eventManager.addGlobalEventListener(ve,se,J(Ce)):this.eventManager.addEventListener(ve,se,J(Ce))}}class Be extends H{constructor(ve,se,Ce,Ue){super(ve),this.component=Ce;const nt=$(Ue+"-"+Ce.id,Ce.styles,[]);se.addStyles(nt),this.contentAttr="_ngcontent-%COMP%".replace(h,Ue+"-"+Ce.id),this.hostAttr="_nghost-%COMP%".replace(h,Ue+"-"+Ce.id)}applyToHost(ve){super.setAttribute(ve,this.hostAttr,"")}createElement(ve,se){const Ce=super.createElement(ve,se);return super.setAttribute(Ce,this.contentAttr,""),Ce}}class me extends H{constructor(ve,se,Ce,Ue){super(ve),this.sharedStylesHost=se,this.hostEl=Ce,this.shadowRoot=Ce.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const nt=$(Ue.id,Ue.styles,[]);for(let Lt=0;Lt<nt.length;Lt++){const br=document.createElement("style");br.textContent=nt[Lt],this.shadowRoot.appendChild(br)}}nodeOrShadowRoot(ve){return ve===this.hostEl?this.shadowRoot:ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ve,se){return super.appendChild(this.nodeOrShadowRoot(ve),se)}insertBefore(ve,se,Ce){return super.insertBefore(this.nodeOrShadowRoot(ve),se,Ce)}removeChild(ve,se){return super.removeChild(this.nodeOrShadowRoot(ve),se)}parentNode(ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ve)))}}let _e=(()=>{class Ae extends E{constructor(se){super(se)}supports(se){return!0}addEventListener(se,Ce,Ue){return se.addEventListener(Ce,Ue,!1),()=>this.removeEventListener(se,Ce,Ue)}removeEventListener(se,Ce,Ue){return se.removeEventListener(Ce,Ue)}}return Ae.\u0275fac=function(se){return new(se||Ae)(a.\u0275\u0275inject(g.DOCUMENT))},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac}),Ae})();const re=["alt","control","meta","shift"],Te={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ne={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Qe={alt:Ae=>Ae.altKey,control:Ae=>Ae.ctrlKey,meta:Ae=>Ae.metaKey,shift:Ae=>Ae.shiftKey};let ut=(()=>{class Ae extends E{constructor(se){super(se)}supports(se){return null!=Ae.parseEventName(se)}addEventListener(se,Ce,Ue){const nt=Ae.parseEventName(Ce),Lt=Ae.eventCallback(nt.fullKey,Ue,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.\u0275getDOM)().onAndCancel(se,nt.domEventName,Lt))}static parseEventName(se){const Ce=se.toLowerCase().split("."),Ue=Ce.shift();if(0===Ce.length||"keydown"!==Ue&&"keyup"!==Ue)return null;const nt=Ae._normalizeKey(Ce.pop());let Lt="";if(re.forEach(xr=>{const rn=Ce.indexOf(xr);rn>-1&&(Ce.splice(rn,1),Lt+=xr+".")}),Lt+=nt,0!=Ce.length||0===nt.length)return null;const br={};return br.domEventName=Ue,br.fullKey=Lt,br}static getEventFullKey(se){let Ce="",Ue=function(Ae){let ve=Ae.key;if(null==ve){if(ve=Ae.keyIdentifier,null==ve)return"Unidentified";ve.startsWith("U+")&&(ve=String.fromCharCode(parseInt(ve.substring(2),16)),3===Ae.location&&Ne.hasOwnProperty(ve)&&(ve=Ne[ve]))}return Te[ve]||ve}(se);return Ue=Ue.toLowerCase()," "===Ue?Ue="space":"."===Ue&&(Ue="dot"),re.forEach(nt=>{nt!=Ue&&Qe[nt](se)&&(Ce+=nt+".")}),Ce+=Ue,Ce}static eventCallback(se,Ce,Ue){return nt=>{Ae.getEventFullKey(nt)===se&&Ue.runGuarded(()=>Ce(nt))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return Ae.\u0275fac=function(se){return new(se||Ae)(a.\u0275\u0275inject(g.DOCUMENT))},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:Ae.\u0275fac}),Ae})();const Rr=(0,a.createPlatformFactory)(a.platformCore,"browser",[{provide:a.PLATFORM_ID,useValue:g.\u0275PLATFORM_BROWSER_ID},{provide:a.PLATFORM_INITIALIZER,useValue:function(){p.makeCurrent(),T.init()},multi:!0},{provide:g.DOCUMENT,useFactory:function(){return(0,a.\u0275setDocument)(document),document},deps:[]}]),_r=[{provide:a.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:a.ErrorHandler,useFactory:function(){return new a.ErrorHandler},deps:[]},{provide:x,useClass:_e,multi:!0,deps:[g.DOCUMENT,a.NgZone,a.PLATFORM_ID]},{provide:x,useClass:ut,multi:!0,deps:[g.DOCUMENT]},{provide:X,useClass:X,deps:[R,c,a.APP_ID]},{provide:a.RendererFactory2,useExisting:X},{provide:y,useExisting:c},{provide:c,useClass:c,deps:[g.DOCUMENT]},{provide:a.Testability,useClass:a.Testability,deps:[a.NgZone]},{provide:R,useClass:R,deps:[x,a.NgZone]},{provide:g.XhrFactory,useClass:P,deps:[]}];let cr=(()=>{class Ae{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:Ae,providers:[{provide:a.APP_ID,useValue:se.appId},{provide:I,useExisting:a.APP_ID},w]}}}return Ae.\u0275fac=function(se){return new(se||Ae)(a.\u0275\u0275inject(Ae,12))},Ae.\u0275mod=a.\u0275\u0275defineNgModule({type:Ae}),Ae.\u0275inj=a.\u0275\u0275defineInjector({providers:_r,imports:[g.CommonModule,a.ApplicationModule]}),Ae})();"undefined"!=typeof window&&window;let vn=(()=>{class Ae{}return Ae.\u0275fac=function(se){return new(se||Ae)},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:function(se){let Ce=null;return Ce=se?new(se||Ae):a.\u0275\u0275inject(ii),Ce},providedIn:"root"}),Ae})(),ii=(()=>{class Ae extends vn{constructor(se){super(),this._doc=se}sanitize(se,Ce){if(null==Ce)return null;switch(se){case a.SecurityContext.NONE:return Ce;case a.SecurityContext.HTML:return(0,a.\u0275allowSanitizationBypassAndThrow)(Ce,"HTML")?(0,a.\u0275unwrapSafeValue)(Ce):(0,a.\u0275_sanitizeHtml)(this._doc,String(Ce)).toString();case a.SecurityContext.STYLE:return(0,a.\u0275allowSanitizationBypassAndThrow)(Ce,"Style")?(0,a.\u0275unwrapSafeValue)(Ce):Ce;case a.SecurityContext.SCRIPT:if((0,a.\u0275allowSanitizationBypassAndThrow)(Ce,"Script"))return(0,a.\u0275unwrapSafeValue)(Ce);throw new Error("unsafe value used in a script context");case a.SecurityContext.URL:return(0,a.\u0275getSanitizationBypassType)(Ce),(0,a.\u0275allowSanitizationBypassAndThrow)(Ce,"URL")?(0,a.\u0275unwrapSafeValue)(Ce):(0,a.\u0275_sanitizeUrl)(String(Ce));case a.SecurityContext.RESOURCE_URL:if((0,a.\u0275allowSanitizationBypassAndThrow)(Ce,"ResourceURL"))return(0,a.\u0275unwrapSafeValue)(Ce);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,a.\u0275bypassSanitizationTrustHtml)(se)}bypassSecurityTrustStyle(se){return(0,a.\u0275bypassSanitizationTrustStyle)(se)}bypassSecurityTrustScript(se){return(0,a.\u0275bypassSanitizationTrustScript)(se)}bypassSecurityTrustUrl(se){return(0,a.\u0275bypassSanitizationTrustUrl)(se)}bypassSecurityTrustResourceUrl(se){return(0,a.\u0275bypassSanitizationTrustResourceUrl)(se)}}return Ae.\u0275fac=function(se){return new(se||Ae)(a.\u0275\u0275inject(g.DOCUMENT))},Ae.\u0275prov=a.\u0275\u0275defineInjectable({token:Ae,factory:function(se){let Ce=null;return Ce=se?new se:function(Ae){return new ii(Ae.get(g.DOCUMENT))}(a.\u0275\u0275inject(a.Injector)),Ce},providedIn:"root"}),Ae})()},5861:(oe,N,l)=>{function g(D,p,B,L,F,M,I){try{var S=D[M](I),w=S.value}catch(T){return void B(T)}S.done?p(w):Promise.resolve(w).then(L,F)}function a(D){return function(){var p=this,B=arguments;return new Promise(function(L,F){var M=D.apply(p,B);function I(w){g(M,L,F,I,S,"next",w)}function S(w){g(M,L,F,I,S,"throw",w)}I(void 0)})}}l.d(N,{Z:()=>a})}}]);