(self.webpackChunk_central_factory_portal=self.webpackChunk_central_factory_portal||[]).push([[722],{4722:(se,U,l)=>{l.r(U);var v=l(1481),a=l(7777),C=l(1281),M=l(7579),N=l(9841),L=l(7272),j=l(8306),B=l(5698),S=l(9300);function w(g){return(0,S.h)((u,s)=>g<=s)}var E=l(8372),I=l(4004),P=l(8675),R=l(2722),T=l(3353);let b=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({}),g})();const y=new Set;let c,o=(()=>{class g{constructor(s){this._platform=s,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):d}matchMedia(s){return(this._platform.WEBKIT||this._platform.BLINK)&&function(g){if(!y.has(g))try{c||(c=document.createElement("style"),c.setAttribute("type","text/css"),document.head.appendChild(c)),c.sheet&&(c.sheet.insertRule(`@media ${g} {body{ }}`,0),y.add(g))}catch(u){console.error(u)}}(s),this._matchMedia(s)}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(T.t4))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();function d(g){return{matches:"all"===g||""===g,media:g,addListener:()=>{},removeListener:()=>{}}}let $=(()=>{class g{constructor(s,p){this._mediaMatcher=s,this._zone=p,this._queries=new Map,this._destroySubject=new M.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(s){return ne((0,C.Eq)(s)).some(k=>this._registerQuery(k).mql.matches)}observe(s){const k=ne((0,C.Eq)(s)).map(ee=>this._registerQuery(ee).observable);let K=(0,N.a)(k);return K=(0,L.z)(K.pipe((0,B.q)(1)),K.pipe(w(1),(0,E.b)(0))),K.pipe((0,I.U)(ee=>{const re={matches:!1,breakpoints:{}};return ee.forEach(({matches:he,query:Pe})=>{re.matches=re.matches||he,re.breakpoints[Pe]=he}),re}))}_registerQuery(s){if(this._queries.has(s))return this._queries.get(s);const p=this._mediaMatcher.matchMedia(s),K={observable:new j.y(ee=>{const re=he=>this._zone.run(()=>ee.next(he));return p.addListener(re),()=>{p.removeListener(re)}}).pipe((0,P.O)(p),(0,I.U)(({matches:ee})=>({query:s,matches:ee})),(0,R.R)(this._destroySubject)),mql:p};return this._queries.set(s,K),K}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(o),a.\u0275\u0275inject(a.NgZone))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();function ne(g){return g.map(u=>u.split(",")).reduce((u,s)=>u.concat(s)).map(u=>u.trim())}var pe=l(9283),x=l(7340);function Y(){return"undefined"!=typeof window&&void 0!==window.document}function W(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Q(g){switch(g.length){case 0:return new x.ZN;case 1:return g[0];default:return new x.ZE(g)}}function G(g,u,s,p,k={},K={}){const ee=[],re=[];let he=-1,Pe=null;if(p.forEach(ze=>{const He=ze.offset,ct=He==he,At=ct&&Pe||{};Object.keys(ze).forEach(st=>{let ht=st,Pt=ze[st];if("offset"!==st)switch(ht=u.normalizePropertyName(ht,ee),Pt){case x.k1:Pt=k[st];break;case x.l3:Pt=K[st];break;default:Pt=u.normalizeStyleValue(st,ht,Pt,ee)}At[ht]=Pt}),ct||re.push(At),Pe=At,he=He}),ee.length){const ze="\n - ";throw new Error(`Unable to animate due to the following errors:${ze}${ee.join(ze)}`)}return re}function X(g,u,s,p){switch(u){case"start":g.onStart(()=>p(s&&te(s,"start",g)));break;case"done":g.onDone(()=>p(s&&te(s,"done",g)));break;case"destroy":g.onDestroy(()=>p(s&&te(s,"destroy",g)))}}function te(g,u,s){const K=be(g.element,g.triggerName,g.fromState,g.toState,u||g.phaseName,s.totalTime??g.totalTime,!!s.disabled),ee=g._data;return null!=ee&&(K._data=ee),K}function be(g,u,s,p,k="",K=0,ee){return{element:g,triggerName:u,fromState:s,toState:p,phaseName:k,totalTime:K,disabled:!!ee}}function Le(g,u,s){let p;return g instanceof Map?(p=g.get(u),p||g.set(u,p=s)):(p=g[u],p||(p=g[u]=s)),p}function Qe(g){const u=g.indexOf(":");return[g.substring(1,u),g.substr(u+1)]}let Se=(g,u)=>!1,ge=(g,u,s)=>[];(W()||"undefined"!=typeof Element)&&(Se=Y()?(g,u)=>{for(;u&&u!==document.documentElement;){if(u===g)return!0;u=u.parentNode||u.host}return!1}:(g,u)=>g.contains(u),ge=(g,u,s)=>{let p=[];if(s){const k=g.querySelectorAll(u);for(let K=0;K<k.length;K++)p.push(k[K])}else{const k=g.querySelector(u);k&&p.push(k)}return p});let Oe=null,Ne=!1;function Ye(g){Oe||(Oe=("undefined"!=typeof document?document.body:null)||{},Ne=!!Oe.style&&"WebkitAppearance"in Oe.style);let u=!0;return Oe.style&&!function(g){return"ebkit"==g.substring(1,6)}(g)&&(u=g in Oe.style,!u&&Ne&&(u="Webkit"+g.charAt(0).toUpperCase()+g.substr(1)in Oe.style)),u}const nt=Se,vt=ge;function Rt(g){const u={};return Object.keys(g).forEach(s=>{const p=s.replace(/([a-z])([A-Z])/g,"$1-$2");u[p]=g[s]}),u}let kt=(()=>{class g{validateStyleProperty(s){return Ye(s)}matchesElement(s,p){return!1}containsElement(s,p){return nt(s,p)}query(s,p,k){return vt(s,p,k)}computeStyle(s,p,k){return k||""}animate(s,p,k,K,ee,re=[],he){return new x.ZN(k,K)}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g})(),un=(()=>{class g{}return g.NOOP=new kt,g})();const _n="ng-enter",Xt="ng-leave",Hn="ng-trigger",xe=".ng-trigger",Ot="ng-animating",It=".ng-animating";function zt(g){if("number"==typeof g)return g;const u=g.match(/^(-?[\.\d]+)(m?s)/);return!u||u.length<2?0:dr(parseFloat(u[1]),u[2])}function dr(g,u){return"s"===u?1e3*g:g}function ni(g,u,s){return g.hasOwnProperty("duration")?g:function(g,u,s){let k,K=0,ee="";if("string"==typeof g){const re=g.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===re)return u.push(`The provided timing value "${g}" is invalid.`),{duration:0,delay:0,easing:""};k=dr(parseFloat(re[1]),re[2]);const he=re[3];null!=he&&(K=dr(parseFloat(he),re[4]));const Pe=re[5];Pe&&(ee=Pe)}else k=g;if(!s){let re=!1,he=u.length;k<0&&(u.push("Duration values below 0 are not allowed for this animation step."),re=!0),K<0&&(u.push("Delay values below 0 are not allowed for this animation step."),re=!0),re&&u.splice(he,0,`The provided timing value "${g}" is invalid.`)}return{duration:k,delay:K,easing:ee}}(g,u,s)}function hn(g,u={}){return Object.keys(g).forEach(s=>{u[s]=g[s]}),u}function Vn(g,u,s={}){if(u)for(let p in g)s[p]=g[p];else hn(g,s);return s}function Wr(g,u,s){return s?u+":"+s+";":""}function ri(g){let u="";for(let s=0;s<g.style.length;s++){const p=g.style.item(s);u+=Wr(0,p,g.style.getPropertyValue(p))}for(const s in g.style)g.style.hasOwnProperty(s)&&!s.startsWith("_")&&(u+=Wr(0,eo(s),g.style[s]));g.setAttribute("style",u)}function jn(g,u,s){g.style&&(Object.keys(u).forEach(p=>{const k=ai(p);s&&!s.hasOwnProperty(p)&&(s[p]=g.style[k]),g.style[k]=u[p]}),W()&&ri(g))}function hr(g,u){g.style&&(Object.keys(u).forEach(s=>{const p=ai(s);g.style[p]=""}),W()&&ri(g))}function Kr(g){return Array.isArray(g)?1==g.length?g[0]:(0,x.vP)(g):g}const Hr=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ai(g){let u=[];if("string"==typeof g){let s;for(;s=Hr.exec(g);)u.push(s[1]);Hr.lastIndex=0}return u}function si(g,u,s){const p=g.toString(),k=p.replace(Hr,(K,ee)=>{let re=u[ee];return u.hasOwnProperty(ee)||(s.push(`Please provide a value for the animation param ${ee}`),re=""),re.toString()});return k==p?g:k}function oi(g){const u=[];let s=g.next();for(;!s.done;)u.push(s.value),s=g.next();return u}const fs=/-+([a-z0-9])/g;function ai(g){return g.replace(fs,(...u)=>u[1].toUpperCase())}function eo(g){return g.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function pn(g,u){return 0===g||0===u}function Di(g,u,s){const p=Object.keys(s);if(p.length&&u.length){let K=u[0],ee=[];if(p.forEach(re=>{K.hasOwnProperty(re)||ee.push(re),K[re]=s[re]}),ee.length)for(var k=1;k<u.length;k++){let re=u[k];ee.forEach(function(he){re[he]=Pi(g,he)})}}return u}function qt(g,u,s){switch(u.type){case 7:return g.visitTrigger(u,s);case 0:return g.visitState(u,s);case 1:return g.visitTransition(u,s);case 2:return g.visitSequence(u,s);case 3:return g.visitGroup(u,s);case 4:return g.visitAnimate(u,s);case 5:return g.visitKeyframes(u,s);case 6:return g.visitStyle(u,s);case 8:return g.visitReference(u,s);case 9:return g.visitAnimateChild(u,s);case 10:return g.visitAnimateRef(u,s);case 11:return g.visitQuery(u,s);case 12:return g.visitStagger(u,s);default:throw new Error(`Unable to resolve animation metadata node #${u.type}`)}}function Pi(g,u){return window.getComputedStyle(g)[u]}function Ar(g,u){const s=[];return"string"==typeof g?g.split(/\s*,\s*/).forEach(p=>function(g,u,s){if(":"==g[0]){const he=function(g,u){switch(g){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(s,p)=>parseFloat(p)>parseFloat(s);case":decrement":return(s,p)=>parseFloat(p)<parseFloat(s);default:return u.push(`The transition alias value "${g}" is not supported`),"* => *"}}(g,s);if("function"==typeof he)return void u.push(he);g=he}const p=g.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==p||p.length<4)return s.push(`The provided transition expression "${g}" is not supported`),u;const k=p[1],K=p[2],ee=p[3];u.push(de(k,ee));"<"==K[0]&&!("*"==k&&"*"==ee)&&u.push(de(ee,k))}(p,s,u)):s.push(g),s}const ci=new Set(["true","1"]),Ee=new Set(["false","0"]);function de(g,u){const s=ci.has(g)||Ee.has(g),p=ci.has(u)||Ee.has(u);return(k,K)=>{let ee="*"==g||g==k,re="*"==u||u==K;return!ee&&s&&"boolean"==typeof k&&(ee=k?ci.has(g):Ee.has(g)),!re&&p&&"boolean"==typeof K&&(re=K?ci.has(u):Ee.has(u)),ee&&re}}const ye=new RegExp("s*:selfs*,?","g");function Be(g,u,s){return new Mt(g).build(u,s)}class Mt{constructor(u){this._driver=u}build(u,s){const p=new Vr(s);return this._resetContextStyleTimingState(p),qt(this,Kr(u),p)}_resetContextStyleTimingState(u){u.currentQuerySelector="",u.collectedStyles={},u.collectedStyles[""]={},u.currentTime=0}visitTrigger(u,s){let p=s.queryCount=0,k=s.depCount=0;const K=[],ee=[];return"@"==u.name.charAt(0)&&s.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),u.definitions.forEach(re=>{if(this._resetContextStyleTimingState(s),0==re.type){const he=re,Pe=he.name;Pe.toString().split(/\s*,\s*/).forEach(ze=>{he.name=ze,K.push(this.visitState(he,s))}),he.name=Pe}else if(1==re.type){const he=this.visitTransition(re,s);p+=he.queryCount,k+=he.depCount,ee.push(he)}else s.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:u.name,states:K,transitions:ee,queryCount:p,depCount:k,options:null}}visitState(u,s){const p=this.visitStyle(u.styles,s),k=u.options&&u.options.params||null;if(p.containsDynamicStyles){const K=new Set,ee=k||{};if(p.styles.forEach(re=>{if(Oi(re)){const he=re;Object.keys(he).forEach(Pe=>{Ai(he[Pe]).forEach(ze=>{ee.hasOwnProperty(ze)||K.add(ze)})})}}),K.size){const re=oi(K.values());s.errors.push(`state("${u.name}", ...) must define default values for all the following style substitutions: ${re.join(", ")}`)}}return{type:0,name:u.name,style:p,options:k?{params:k}:null}}visitTransition(u,s){s.queryCount=0,s.depCount=0;const p=qt(this,Kr(u.animation),s);return{type:1,matchers:Ar(u.expr,s.errors),animation:p,queryCount:s.queryCount,depCount:s.depCount,options:pr(u.options)}}visitSequence(u,s){return{type:2,steps:u.steps.map(p=>qt(this,p,s)),options:pr(u.options)}}visitGroup(u,s){const p=s.currentTime;let k=0;const K=u.steps.map(ee=>{s.currentTime=p;const re=qt(this,ee,s);return k=Math.max(k,s.currentTime),re});return s.currentTime=k,{type:3,steps:K,options:pr(u.options)}}visitAnimate(u,s){const p=function(g,u){let s=null;if(g.hasOwnProperty("duration"))s=g;else if("number"==typeof g)return hs(ni(g,u).duration,0,"");const p=g;if(p.split(/\s+/).some(K=>"{"==K.charAt(0)&&"{"==K.charAt(1))){const K=hs(0,0,"");return K.dynamic=!0,K.strValue=p,K}return s=s||ni(p,u),hs(s.duration,s.delay,s.easing)}(u.timings,s.errors);s.currentAnimateTimings=p;let k,K=u.styles?u.styles:(0,x.oB)({});if(5==K.type)k=this.visitKeyframes(K,s);else{let ee=u.styles,re=!1;if(!ee){re=!0;const Pe={};p.easing&&(Pe.easing=p.easing),ee=(0,x.oB)(Pe)}s.currentTime+=p.duration+p.delay;const he=this.visitStyle(ee,s);he.isEmptyStep=re,k=he}return s.currentAnimateTimings=null,{type:4,timings:p,style:k,options:null}}visitStyle(u,s){const p=this._makeStyleAst(u,s);return this._validateStyleAst(p,s),p}_makeStyleAst(u,s){const p=[];Array.isArray(u.styles)?u.styles.forEach(ee=>{"string"==typeof ee?ee==x.l3?p.push(ee):s.errors.push(`The provided style string value ${ee} is not allowed.`):p.push(ee)}):p.push(u.styles);let k=!1,K=null;return p.forEach(ee=>{if(Oi(ee)){const re=ee,he=re.easing;if(he&&(K=he,delete re.easing),!k)for(let Pe in re)if(re[Pe].toString().indexOf("{{")>=0){k=!0;break}}}),{type:6,styles:p,easing:K,offset:u.offset,containsDynamicStyles:k,options:null}}_validateStyleAst(u,s){const p=s.currentAnimateTimings;let k=s.currentTime,K=s.currentTime;p&&K>0&&(K-=p.duration+p.delay),u.styles.forEach(ee=>{"string"!=typeof ee&&Object.keys(ee).forEach(re=>{if(!this._driver.validateStyleProperty(re))return void s.errors.push(`The provided animation property "${re}" is not a supported CSS property for animations`);const he=s.collectedStyles[s.currentQuerySelector],Pe=he[re];let ze=!0;Pe&&(K!=k&&K>=Pe.startTime&&k<=Pe.endTime&&(s.errors.push(`The CSS property "${re}" that exists between the times of "${Pe.startTime}ms" and "${Pe.endTime}ms" is also being animated in a parallel animation between the times of "${K}ms" and "${k}ms"`),ze=!1),K=Pe.startTime),ze&&(he[re]={startTime:K,endTime:k}),s.options&&function(g,u,s){const p=u.params||{},k=Ai(g);k.length&&k.forEach(K=>{p.hasOwnProperty(K)||s.push(`Unable to resolve the local animation param ${K} in the given list of values`)})}(ee[re],s.options,s.errors)})})}visitKeyframes(u,s){const p={type:5,styles:[],options:null};if(!s.currentAnimateTimings)return s.errors.push("keyframes() must be placed inside of a call to animate()"),p;let K=0;const ee=[];let re=!1,he=!1,Pe=0;const ze=u.steps.map(Kt=>{const Qt=this._makeStyleAst(Kt,s);let An=null!=Qt.offset?Qt.offset:function(g){if("string"==typeof g)return null;let u=null;if(Array.isArray(g))g.forEach(s=>{if(Oi(s)&&s.hasOwnProperty("offset")){const p=s;u=parseFloat(p.offset),delete p.offset}});else if(Oi(g)&&g.hasOwnProperty("offset")){const s=g;u=parseFloat(s.offset),delete s.offset}return u}(Qt.styles),dn=0;return null!=An&&(K++,dn=Qt.offset=An),he=he||dn<0||dn>1,re=re||dn<Pe,Pe=dn,ee.push(dn),Qt});he&&s.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),re&&s.errors.push("Please ensure that all keyframe offsets are in order");const He=u.steps.length;let ct=0;K>0&&K<He?s.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==K&&(ct=1/(He-1));const At=He-1,st=s.currentTime,ht=s.currentAnimateTimings,Pt=ht.duration;return ze.forEach((Kt,Qt)=>{const An=ct>0?Qt==At?1:ct*Qt:ee[Qt],dn=An*Pt;s.currentTime=st+ht.delay+dn,ht.duration=dn,this._validateStyleAst(Kt,s),Kt.offset=An,p.styles.push(Kt)}),p}visitReference(u,s){return{type:8,animation:qt(this,Kr(u.animation),s),options:pr(u.options)}}visitAnimateChild(u,s){return s.depCount++,{type:9,options:pr(u.options)}}visitAnimateRef(u,s){return{type:10,animation:this.visitReference(u.animation,s),options:pr(u.options)}}visitQuery(u,s){const p=s.currentQuerySelector,k=u.options||{};s.queryCount++,s.currentQuery=u;const[K,ee]=function(g){const u=!!g.split(/\s*,\s*/).find(s=>":self"==s);return u&&(g=g.replace(ye,"")),g=g.replace(/@\*/g,xe).replace(/@\w+/g,s=>xe+"-"+s.substr(1)).replace(/:animating/g,It),[g,u]}(u.selector);s.currentQuerySelector=p.length?p+" "+K:K,Le(s.collectedStyles,s.currentQuerySelector,{});const re=qt(this,Kr(u.animation),s);return s.currentQuery=null,s.currentQuerySelector=p,{type:11,selector:K,limit:k.limit||0,optional:!!k.optional,includeSelf:ee,animation:re,originalSelector:u.selector,options:pr(u.options)}}visitStagger(u,s){s.currentQuery||s.errors.push("stagger() can only be used inside of query()");const p="full"===u.timings?{duration:0,delay:0,easing:"full"}:ni(u.timings,s.errors,!0);return{type:12,animation:qt(this,Kr(u.animation),s),timings:p,options:null}}}class Vr{constructor(u){this.errors=u,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Oi(g){return!Array.isArray(g)&&"object"==typeof g}function pr(g){return g?(g=hn(g)).params&&(g.params=function(g){return g?hn(g):null}(g.params)):g={},g}function hs(g,u,s){return{duration:g,delay:u,easing:s}}function ps(g,u,s,p,k,K,ee=null,re=!1){return{type:1,element:g,keyframes:u,preStyleProps:s,postStyleProps:p,duration:k,delay:K,totalTime:k+K,easing:ee,subTimeline:re}}class li{constructor(){this._map=new Map}get(u){return this._map.get(u)||[]}append(u,s){let p=this._map.get(u);p||this._map.set(u,p=[]),p.push(...s)}has(u){return this._map.has(u)}clear(){this._map.clear()}}const On=new RegExp(":enter","g"),ms=new RegExp(":leave","g");function Ii(g,u,s,p,k,K={},ee={},re,he,Pe=[]){return(new no).buildKeyframes(g,u,s,p,k,K,ee,re,he,Pe)}class no{buildKeyframes(u,s,p,k,K,ee,re,he,Pe,ze=[]){Pe=Pe||new li;const He=new vs(u,s,Pe,k,K,ze,[]);He.options=he,He.currentTimeline.setStyles([ee],null,He.errors,he),qt(this,p,He);const ct=He.timelines.filter(At=>At.containsAnimation());if(ct.length&&Object.keys(re).length){const At=ct[ct.length-1];At.allowOnlyTimelineStyles()||At.setStyles([re],null,He.errors,he)}return ct.length?ct.map(At=>At.buildKeyframes()):[ps(s,[],[],[],0,0,"",!1)]}visitTrigger(u,s){}visitState(u,s){}visitTransition(u,s){}visitAnimateChild(u,s){const p=s.subInstructions.get(s.element);if(p){const k=s.createSubContext(u.options),K=s.currentTimeline.currentTime,ee=this._visitSubInstructions(p,k,k.options);K!=ee&&s.transformIntoNewTimeline(ee)}s.previousNode=u}visitAnimateRef(u,s){const p=s.createSubContext(u.options);p.transformIntoNewTimeline(),this.visitReference(u.animation,p),s.transformIntoNewTimeline(p.currentTimeline.currentTime),s.previousNode=u}_visitSubInstructions(u,s,p){let K=s.currentTimeline.currentTime;const ee=null!=p.duration?zt(p.duration):null,re=null!=p.delay?zt(p.delay):null;return 0!==ee&&u.forEach(he=>{const Pe=s.appendInstructionToTimeline(he,ee,re);K=Math.max(K,Pe.duration+Pe.delay)}),K}visitReference(u,s){s.updateOptions(u.options,!0),qt(this,u.animation,s),s.previousNode=u}visitSequence(u,s){const p=s.subContextCount;let k=s;const K=u.options;if(K&&(K.params||K.delay)&&(k=s.createSubContext(K),k.transformIntoNewTimeline(),null!=K.delay)){6==k.previousNode.type&&(k.currentTimeline.snapshotCurrentStyles(),k.previousNode=fi);const ee=zt(K.delay);k.delayNextStep(ee)}u.steps.length&&(u.steps.forEach(ee=>qt(this,ee,k)),k.currentTimeline.applyStylesToKeyframe(),k.subContextCount>p&&k.transformIntoNewTimeline()),s.previousNode=u}visitGroup(u,s){const p=[];let k=s.currentTimeline.currentTime;const K=u.options&&u.options.delay?zt(u.options.delay):0;u.steps.forEach(ee=>{const re=s.createSubContext(u.options);K&&re.delayNextStep(K),qt(this,ee,re),k=Math.max(k,re.currentTimeline.currentTime),p.push(re.currentTimeline)}),p.forEach(ee=>s.currentTimeline.mergeTimelineCollectedStyles(ee)),s.transformIntoNewTimeline(k),s.previousNode=u}_visitTiming(u,s){if(u.dynamic){const p=u.strValue;return ni(s.params?si(p,s.params,s.errors):p,s.errors)}return{duration:u.duration,delay:u.delay,easing:u.easing}}visitAnimate(u,s){const p=s.currentAnimateTimings=this._visitTiming(u.timings,s),k=s.currentTimeline;p.delay&&(s.incrementTime(p.delay),k.snapshotCurrentStyles());const K=u.style;5==K.type?this.visitKeyframes(K,s):(s.incrementTime(p.duration),this.visitStyle(K,s),k.applyStylesToKeyframe()),s.currentAnimateTimings=null,s.previousNode=u}visitStyle(u,s){const p=s.currentTimeline,k=s.currentAnimateTimings;!k&&p.getCurrentStyleProperties().length&&p.forwardFrame();const K=k&&k.easing||u.easing;u.isEmptyStep?p.applyEmptyStep(K):p.setStyles(u.styles,K,s.errors,s.options),s.previousNode=u}visitKeyframes(u,s){const p=s.currentAnimateTimings,k=s.currentTimeline.duration,K=p.duration,re=s.createSubContext().currentTimeline;re.easing=p.easing,u.styles.forEach(he=>{re.forwardTime((he.offset||0)*K),re.setStyles(he.styles,he.easing,s.errors,s.options),re.applyStylesToKeyframe()}),s.currentTimeline.mergeTimelineCollectedStyles(re),s.transformIntoNewTimeline(k+K),s.previousNode=u}visitQuery(u,s){const p=s.currentTimeline.currentTime,k=u.options||{},K=k.delay?zt(k.delay):0;K&&(6===s.previousNode.type||0==p&&s.currentTimeline.getCurrentStyleProperties().length)&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=fi);let ee=p;const re=s.invokeQuery(u.selector,u.originalSelector,u.limit,u.includeSelf,!!k.optional,s.errors);s.currentQueryTotal=re.length;let he=null;re.forEach((Pe,ze)=>{s.currentQueryIndex=ze;const He=s.createSubContext(u.options,Pe);K&&He.delayNextStep(K),Pe===s.element&&(he=He.currentTimeline),qt(this,u.animation,He),He.currentTimeline.applyStylesToKeyframe(),ee=Math.max(ee,He.currentTimeline.currentTime)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(ee),he&&(s.currentTimeline.mergeTimelineCollectedStyles(he),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=u}visitStagger(u,s){const p=s.parentContext,k=s.currentTimeline,K=u.timings,ee=Math.abs(K.duration),re=ee*(s.currentQueryTotal-1);let he=ee*s.currentQueryIndex;switch(K.duration<0?"reverse":K.easing){case"reverse":he=re-he;break;case"full":he=p.currentStaggerTime}const ze=s.currentTimeline;he&&ze.delayNextStep(he);const He=ze.currentTime;qt(this,u.animation,s),s.previousNode=u,p.currentStaggerTime=k.currentTime-He+(k.startTime-p.currentTimeline.startTime)}}const fi={};class vs{constructor(u,s,p,k,K,ee,re,he){this._driver=u,this.element=s,this.subInstructions=p,this._enterClassName=k,this._leaveClassName=K,this.errors=ee,this.timelines=re,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fi,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=he||new Ti(this._driver,s,0),re.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(u,s){if(!u)return;const p=u;let k=this.options;null!=p.duration&&(k.duration=zt(p.duration)),null!=p.delay&&(k.delay=zt(p.delay));const K=p.params;if(K){let ee=k.params;ee||(ee=this.options.params={}),Object.keys(K).forEach(re=>{(!s||!ee.hasOwnProperty(re))&&(ee[re]=si(K[re],ee,this.errors))})}}_copyOptions(){const u={};if(this.options){const s=this.options.params;if(s){const p=u.params={};Object.keys(s).forEach(k=>{p[k]=s[k]})}}return u}createSubContext(u=null,s,p){const k=s||this.element,K=new vs(this._driver,k,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(k,p||0));return K.previousNode=this.previousNode,K.currentAnimateTimings=this.currentAnimateTimings,K.options=this._copyOptions(),K.updateOptions(u),K.currentQueryIndex=this.currentQueryIndex,K.currentQueryTotal=this.currentQueryTotal,K.parentContext=this,this.subContextCount++,K}transformIntoNewTimeline(u){return this.previousNode=fi,this.currentTimeline=this.currentTimeline.fork(this.element,u),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(u,s,p){const k={duration:s??u.duration,delay:this.currentTimeline.currentTime+(p??0)+u.delay,easing:""},K=new Pu(this._driver,u.element,u.keyframes,u.preStyleProps,u.postStyleProps,k,u.stretchStartingKeyframe);return this.timelines.push(K),k}incrementTime(u){this.currentTimeline.forwardTime(this.currentTimeline.duration+u)}delayNextStep(u){u>0&&this.currentTimeline.delayNextStep(u)}invokeQuery(u,s,p,k,K,ee){let re=[];if(k&&re.push(this.element),u.length>0){u=(u=u.replace(On,"."+this._enterClassName)).replace(ms,"."+this._leaveClassName);let Pe=this._driver.query(this.element,u,1!=p);0!==p&&(Pe=p<0?Pe.slice(Pe.length+p,Pe.length):Pe.slice(0,p)),re.push(...Pe)}return!K&&0==re.length&&ee.push(`\`query("${s}")\` returned zero elements. (Use \`query("${s}", { optional: true })\` if you wish to allow this.)`),re}}class Ti{constructor(u,s,p,k){this._driver=u,this.element=s,this.startTime=p,this._elementTimelineStylesLookup=k,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(s),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(s,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(u){const s=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||s?(this.forwardTime(this.currentTime+u),s&&this.snapshotCurrentStyles()):this.startTime+=u}fork(u,s){return this.applyStylesToKeyframe(),new Ti(this._driver,u,s||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(u){this.applyStylesToKeyframe(),this.duration=u,this._loadKeyframe()}_updateStyle(u,s){this._localTimelineStyles[u]=s,this._globalTimelineStyles[u]=s,this._styleSummary[u]={time:this.currentTime,value:s}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(u){u&&(this._previousKeyframe.easing=u),Object.keys(this._globalTimelineStyles).forEach(s=>{this._backFill[s]=this._globalTimelineStyles[s]||x.l3,this._currentKeyframe[s]=x.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(u,s,p,k){s&&(this._previousKeyframe.easing=s);const K=k&&k.params||{},ee=function(g,u){const s={};let p;return g.forEach(k=>{"*"===k?(p=p||Object.keys(u),p.forEach(K=>{s[K]=x.l3})):Vn(k,!1,s)}),s}(u,this._globalTimelineStyles);Object.keys(ee).forEach(re=>{const he=si(ee[re],K,p);this._pendingStyles[re]=he,this._localTimelineStyles.hasOwnProperty(re)||(this._backFill[re]=this._globalTimelineStyles.hasOwnProperty(re)?this._globalTimelineStyles[re]:x.l3),this._updateStyle(re,he)})}applyStylesToKeyframe(){const u=this._pendingStyles,s=Object.keys(u);0!=s.length&&(this._pendingStyles={},s.forEach(p=>{this._currentKeyframe[p]=u[p]}),Object.keys(this._localTimelineStyles).forEach(p=>{this._currentKeyframe.hasOwnProperty(p)||(this._currentKeyframe[p]=this._localTimelineStyles[p])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(u=>{const s=this._localTimelineStyles[u];this._pendingStyles[u]=s,this._updateStyle(u,s)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const u=[];for(let s in this._currentKeyframe)u.push(s);return u}mergeTimelineCollectedStyles(u){Object.keys(u._styleSummary).forEach(s=>{const p=this._styleSummary[s],k=u._styleSummary[s];(!p||k.time>p.time)&&this._updateStyle(s,k.value)})}buildKeyframes(){this.applyStylesToKeyframe();const u=new Set,s=new Set,p=1===this._keyframes.size&&0===this.duration;let k=[];this._keyframes.forEach((re,he)=>{const Pe=Vn(re,!0);Object.keys(Pe).forEach(ze=>{const He=Pe[ze];He==x.k1?u.add(ze):He==x.l3&&s.add(ze)}),p||(Pe.offset=he/this.duration),k.push(Pe)});const K=u.size?oi(u.values()):[],ee=s.size?oi(s.values()):[];if(p){const re=k[0],he=hn(re);re.offset=0,he.offset=1,k=[re,he]}return ps(this.element,k,K,ee,this.duration,this.startTime,this.easing,!1)}}class Pu extends Ti{constructor(u,s,p,k,K,ee,re=!1){super(u,s,ee.delay),this.keyframes=p,this.preStyleProps=k,this.postStyleProps=K,this._stretchStartingKeyframe=re,this.timings={duration:ee.duration,delay:ee.delay,easing:ee.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let u=this.keyframes,{delay:s,duration:p,easing:k}=this.timings;if(this._stretchStartingKeyframe&&s){const K=[],ee=p+s,re=s/ee,he=Vn(u[0],!1);he.offset=0,K.push(he);const Pe=Vn(u[0],!1);Pe.offset=gs(re),K.push(Pe);const ze=u.length-1;for(let He=1;He<=ze;He++){let ct=Vn(u[He],!1);ct.offset=gs((s+ct.offset*p)/ee),K.push(ct)}p=ee,s=0,k="",u=K}return ps(this.element,u,this.preStyleProps,this.postStyleProps,p,s,k,!0)}}function gs(g,u=3){const s=Math.pow(10,u-1);return Math.round(g*s)/s}class Ri{}class Pr extends Ri{normalizePropertyName(u,s){return ai(u)}normalizeStyleValue(u,s,p,k){let K="";const ee=p.toString().trim();if(Or[s]&&0!==p&&"0"!==p)if("number"==typeof p)K="px";else{const re=p.match(/^[+-]?[\d\.]+([a-z]*)$/);re&&0==re[1].length&&k.push(`Please provide a CSS unit value for ${u}:${p}`)}return ee+K}}const Or=(()=>function(g){const u={};return g.forEach(s=>u[s]=!0),u}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Mi(g,u,s,p,k,K,ee,re,he,Pe,ze,He,ct){return{type:0,element:g,triggerName:u,isRemovalTransition:k,fromState:s,fromStyles:K,toState:p,toStyles:ee,timelines:re,queriedElements:he,preStyleProps:Pe,postStyleProps:ze,totalTime:He,errors:ct}}const di={};class io{constructor(u,s,p){this._triggerName=u,this.ast=s,this._stateStyles=p}match(u,s,p,k){return function(g,u,s,p,k){return g.some(K=>K(u,s,p,k))}(this.ast.matchers,u,s,p,k)}buildStyles(u,s,p){const k=this._stateStyles["*"],K=this._stateStyles[u],ee=k?k.buildStyles(s,p):{};return K?K.buildStyles(s,p):ee}build(u,s,p,k,K,ee,re,he,Pe,ze){const He=[],ct=this.ast.options&&this.ast.options.params||di,st=this.buildStyles(p,re&&re.params||di,He),ht=he&&he.params||di,Pt=this.buildStyles(k,ht,He),Kt=new Set,Qt=new Map,An=new Map,dn="void"===k,ns={params:{...ct,...ht}},Zn=ze?[]:Ii(u,s,this.ast.animation,K,ee,st,Pt,ns,Pe,He);let Tn=0;if(Zn.forEach(Er=>{Tn=Math.max(Er.duration+Er.delay,Tn)}),He.length)return Mi(s,this._triggerName,p,k,dn,st,Pt,[],[],Qt,An,Tn,He);Zn.forEach(Er=>{const Yn=Er.element,lu=Le(Qt,Yn,{});Er.preStyleProps.forEach(Xr=>lu[Xr]=!0);const rs=Le(An,Yn,{});Er.postStyleProps.forEach(Xr=>rs[Xr]=!0),Yn!==s&&Kt.add(Yn)});const br=oi(Kt.values());return Mi(s,this._triggerName,p,k,dn,st,Pt,Zn,br,Qt,An,Tn)}}class ga{constructor(u,s,p){this.styles=u,this.defaultParams=s,this.normalizer=p}buildStyles(u,s){const p={},k=hn(this.defaultParams);return Object.keys(u).forEach(K=>{const ee=u[K];null!=ee&&(k[K]=ee)}),this.styles.styles.forEach(K=>{if("string"!=typeof K){const ee=K;Object.keys(ee).forEach(re=>{let he=ee[re];he.length>1&&(he=si(he,k,s));const Pe=this.normalizer.normalizePropertyName(re,s);he=this.normalizer.normalizeStyleValue(re,Pe,he,s),p[Pe]=he})}}),p}}class _a{constructor(u,s,p){this.name=u,this.ast=s,this._normalizer=p,this.transitionFactories=[],this.states={},s.states.forEach(k=>{this.states[k.name]=new ga(k.style,k.options&&k.options.params||{},p)}),ao(this.states,"true","1"),ao(this.states,"false","0"),s.transitions.forEach(k=>{this.transitionFactories.push(new io(u,k,this.states))}),this.fallbackTransition=function(g,u,s){return new io(g,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ee,re)=>!0],options:null,queryCount:0,depCount:0},u)}(u,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(u,s,p,k){return this.transitionFactories.find(ee=>ee.match(u,s,p,k))||null}matchStyles(u,s,p){return this.fallbackTransition.buildStyles(u,s,p)}}function ao(g,u,s){g.hasOwnProperty(u)?g.hasOwnProperty(s)||(g[s]=g[u]):g.hasOwnProperty(s)&&(g[u]=g[s])}const uo=new li;class co{constructor(u,s,p){this.bodyNode=u,this._driver=s,this._normalizer=p,this._animations={},this._playersById={},this.players=[]}register(u,s){const p=[],k=Be(this._driver,s,p);if(p.length)throw new Error(`Unable to build the animation due to the following errors: ${p.join("\n")}`);this._animations[u]=k}_buildPlayer(u,s,p){const k=u.element,K=G(0,this._normalizer,0,u.keyframes,s,p);return this._driver.animate(k,K,u.duration,u.delay,u.easing,[],!0)}create(u,s,p={}){const k=[],K=this._animations[u];let ee;const re=new Map;if(K?(ee=Ii(this._driver,s,K,_n,Xt,{},{},p,uo,k),ee.forEach(ze=>{const He=Le(re,ze.element,{});ze.postStyleProps.forEach(ct=>He[ct]=null)})):(k.push("The requested animation doesn't exist or has already been destroyed"),ee=[]),k.length)throw new Error(`Unable to create the animation due to the following errors: ${k.join("\n")}`);re.forEach((ze,He)=>{Object.keys(ze).forEach(ct=>{ze[ct]=this._driver.computeStyle(He,ct,x.l3)})});const Pe=Q(ee.map(ze=>{const He=re.get(ze.element);return this._buildPlayer(ze,{},He)}));return this._playersById[u]=Pe,Pe.onDestroy(()=>this.destroy(u)),this.players.push(Pe),Pe}destroy(u){const s=this._getPlayer(u);s.destroy(),delete this._playersById[u];const p=this.players.indexOf(s);p>=0&&this.players.splice(p,1)}_getPlayer(u){const s=this._playersById[u];if(!s)throw new Error(`Unable to find the timeline player referenced by ${u}`);return s}listen(u,s,p,k){const K=be(s,"","","");return X(this._getPlayer(u),p,K,k),()=>{}}command(u,s,p,k){if("register"==p)return void this.register(u,k[0]);if("create"==p)return void this.create(u,s,k[0]||{});const K=this._getPlayer(u);switch(p){case"play":K.play();break;case"pause":K.pause();break;case"reset":K.reset();break;case"restart":K.restart();break;case"finish":K.finish();break;case"init":K.init();break;case"setPosition":K.setPosition(parseFloat(k[0]));break;case"destroy":this.destroy(u)}}}const lo="ng-animate-queued",ys="ng-animate-disabled",Ea=[],Sa={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ho={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Rn="__ng_removed";class _s{constructor(u,s=""){this.namespaceId=s;const p=u&&u.hasOwnProperty("value");if(this.value=(p?u.value:u)??null,p){const K=hn(u);delete K.value,this.options=K}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(u){const s=u.params;if(s){const p=this.options.params;Object.keys(s).forEach(k=>{null==p[k]&&(p[k]=s[k])})}}}const Qr="void",bs=new _s(Qr);class po{constructor(u,s,p){this.id=u,this.hostElement=s,this._engine=p,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+u,Mn(s,this._hostClassName)}listen(u,s,p,k){if(!this._triggers.hasOwnProperty(s))throw new Error(`Unable to listen on the animation trigger event "${p}" because the animation trigger "${s}" doesn't exist!`);if(null==p||0==p.length)throw new Error(`Unable to listen on the animation trigger "${s}" because the provided event is undefined!`);if("start"!=(g=p)&&"done"!=g)throw new Error(`The provided animation trigger event "${p}" for the animation trigger "${s}" is not supported!`);var g;const K=Le(this._elementListeners,u,[]),ee={name:s,phase:p,callback:k};K.push(ee);const re=Le(this._engine.statesByElement,u,{});return re.hasOwnProperty(s)||(Mn(u,Hn),Mn(u,Hn+"-"+s),re[s]=bs),()=>{this._engine.afterFlush(()=>{const he=K.indexOf(ee);he>=0&&K.splice(he,1),this._triggers[s]||delete re[s]})}}register(u,s){return!this._triggers[u]&&(this._triggers[u]=s,!0)}_getTrigger(u){const s=this._triggers[u];if(!s)throw new Error(`The provided animation trigger "${u}" has not been registered!`);return s}trigger(u,s,p,k=!0){const K=this._getTrigger(s),ee=new xi(this.id,s,u);let re=this._engine.statesByElement.get(u);re||(Mn(u,Hn),Mn(u,Hn+"-"+s),this._engine.statesByElement.set(u,re={}));let he=re[s];const Pe=new _s(p,this.id);if(!(p&&p.hasOwnProperty("value"))&&he&&Pe.absorbOptions(he.options),re[s]=Pe,he||(he=bs),Pe.value!==Qr&&he.value===Pe.value){if(!function(g,u){const s=Object.keys(g),p=Object.keys(u);if(s.length!=p.length)return!1;for(let k=0;k<s.length;k++){const K=s[k];if(!u.hasOwnProperty(K)||g[K]!==u[K])return!1}return!0}(he.params,Pe.params)){const ht=[],Pt=K.matchStyles(he.value,he.params,ht),Kt=K.matchStyles(Pe.value,Pe.params,ht);ht.length?this._engine.reportError(ht):this._engine.afterFlush(()=>{hr(u,Pt),jn(u,Kt)})}return}const ct=Le(this._engine.playersByElement,u,[]);ct.forEach(ht=>{ht.namespaceId==this.id&&ht.triggerName==s&&ht.queued&&ht.destroy()});let At=K.matchTransition(he.value,Pe.value,u,Pe.params),st=!1;if(!At){if(!k)return;At=K.fallbackTransition,st=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:u,triggerName:s,transition:At,fromState:he,toState:Pe,player:ee,isFallbackTransition:st}),st||(Mn(u,lo),ee.onStart(()=>{Tr(u,lo)})),ee.onDone(()=>{let ht=this.players.indexOf(ee);ht>=0&&this.players.splice(ht,1);const Pt=this._engine.playersByElement.get(u);if(Pt){let Kt=Pt.indexOf(ee);Kt>=0&&Pt.splice(Kt,1)}}),this.players.push(ee),ct.push(ee),ee}deregister(u){delete this._triggers[u],this._engine.statesByElement.forEach((s,p)=>{delete s[u]}),this._elementListeners.forEach((s,p)=>{this._elementListeners.set(p,s.filter(k=>k.name!=u))})}clearElementCache(u){this._engine.statesByElement.delete(u),this._elementListeners.delete(u);const s=this._engine.playersByElement.get(u);s&&(s.forEach(p=>p.destroy()),this._engine.playersByElement.delete(u))}_signalRemovalForInnerTriggers(u,s){const p=this._engine.driver.query(u,xe,!0);p.forEach(k=>{if(k[Rn])return;const K=this._engine.fetchNamespacesByElement(k);K.size?K.forEach(ee=>ee.triggerLeaveAnimation(k,s,!1,!0)):this.clearElementCache(k)}),this._engine.afterFlushAnimationsDone(()=>p.forEach(k=>this.clearElementCache(k)))}triggerLeaveAnimation(u,s,p,k){const K=this._engine.statesByElement.get(u);if(K){const ee=[];if(Object.keys(K).forEach(re=>{if(this._triggers[re]){const he=this.trigger(u,re,Qr,k);he&&ee.push(he)}}),ee.length)return this._engine.markElementAsRemoved(this.id,u,!0,s),p&&Q(ee).onDone(()=>this._engine.processLeaveNode(u)),!0}return!1}prepareLeaveAnimationListeners(u){const s=this._elementListeners.get(u),p=this._engine.statesByElement.get(u);if(s&&p){const k=new Set;s.forEach(K=>{const ee=K.name;if(k.has(ee))return;k.add(ee);const he=this._triggers[ee].fallbackTransition,Pe=p[ee]||bs,ze=new _s(Qr),He=new xi(this.id,ee,u);this._engine.totalQueuedPlayers++,this._queue.push({element:u,triggerName:ee,transition:he,fromState:Pe,toState:ze,player:He,isFallbackTransition:!0})})}}removeNode(u,s){const p=this._engine;if(u.childElementCount&&this._signalRemovalForInnerTriggers(u,s),this.triggerLeaveAnimation(u,s,!0))return;let k=!1;if(p.totalAnimations){const K=p.players.length?p.playersByQueriedElement.get(u):[];if(K&&K.length)k=!0;else{let ee=u;for(;ee=ee.parentNode;)if(p.statesByElement.get(ee)){k=!0;break}}}if(this.prepareLeaveAnimationListeners(u),k)p.markElementAsRemoved(this.id,u,!1,s);else{const K=u[Rn];(!K||K===Sa)&&(p.afterFlush(()=>this.clearElementCache(u)),p.destroyInnerAnimations(u),p._onRemovalComplete(u,s))}}insertNode(u,s){Mn(u,this._hostClassName)}drainQueuedTransitions(u){const s=[];return this._queue.forEach(p=>{const k=p.player;if(k.destroyed)return;const K=p.element,ee=this._elementListeners.get(K);ee&&ee.forEach(re=>{if(re.name==p.triggerName){const he=be(K,p.triggerName,p.fromState.value,p.toState.value);he._data=u,X(p.player,re.phase,he,re.callback)}}),k.markedForDestroy?this._engine.afterFlush(()=>{k.destroy()}):s.push(p)}),this._queue=[],s.sort((p,k)=>{const K=p.transition.ast.depCount,ee=k.transition.ast.depCount;return 0==K||0==ee?K-ee:this._engine.driver.containsElement(p.element,k.element)?1:-1})}destroy(u){this.players.forEach(s=>s.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,u)}elementContainsData(u){let s=!1;return this._elementListeners.has(u)&&(s=!0),s=!!this._queue.find(p=>p.element===u)||s,s}}class wa{constructor(u,s,p){this.bodyNode=u,this.driver=s,this._normalizer=p,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(k,K)=>{}}_onRemovalComplete(u,s){this.onRemovalComplete(u,s)}get queuedPlayers(){const u=[];return this._namespaceList.forEach(s=>{s.players.forEach(p=>{p.queued&&u.push(p)})}),u}createNamespace(u,s){const p=new po(u,s,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,s)?this._balanceNamespaceList(p,s):(this.newHostElements.set(s,p),this.collectEnterElement(s)),this._namespaceLookup[u]=p}_balanceNamespaceList(u,s){const p=this._namespaceList.length-1;if(p>=0){let k=!1;for(let K=p;K>=0;K--)if(this.driver.containsElement(this._namespaceList[K].hostElement,s)){this._namespaceList.splice(K+1,0,u),k=!0;break}k||this._namespaceList.splice(0,0,u)}else this._namespaceList.push(u);return this.namespacesByHostElement.set(s,u),u}register(u,s){let p=this._namespaceLookup[u];return p||(p=this.createNamespace(u,s)),p}registerTrigger(u,s,p){let k=this._namespaceLookup[u];k&&k.register(s,p)&&this.totalAnimations++}destroy(u,s){if(!u)return;const p=this._fetchNamespace(u);this.afterFlush(()=>{this.namespacesByHostElement.delete(p.hostElement),delete this._namespaceLookup[u];const k=this._namespaceList.indexOf(p);k>=0&&this._namespaceList.splice(k,1)}),this.afterFlushAnimationsDone(()=>p.destroy(s))}_fetchNamespace(u){return this._namespaceLookup[u]}fetchNamespacesByElement(u){const s=new Set,p=this.statesByElement.get(u);if(p){const k=Object.keys(p);for(let K=0;K<k.length;K++){const ee=p[k[K]].namespaceId;if(ee){const re=this._fetchNamespace(ee);re&&s.add(re)}}}return s}trigger(u,s,p,k){if(ki(s)){const K=this._fetchNamespace(u);if(K)return K.trigger(s,p,k),!0}return!1}insertNode(u,s,p,k){if(!ki(s))return;const K=s[Rn];if(K&&K.setForRemoval){K.setForRemoval=!1,K.setForMove=!0;const ee=this.collectedLeaveElements.indexOf(s);ee>=0&&this.collectedLeaveElements.splice(ee,1)}if(u){const ee=this._fetchNamespace(u);ee&&ee.insertNode(s,p)}k&&this.collectEnterElement(s)}collectEnterElement(u){this.collectedEnterElements.push(u)}markElementAsDisabled(u,s){s?this.disabledNodes.has(u)||(this.disabledNodes.add(u),Mn(u,ys)):this.disabledNodes.has(u)&&(this.disabledNodes.delete(u),Tr(u,ys))}removeNode(u,s,p,k){if(ki(s)){const K=u?this._fetchNamespace(u):null;if(K?K.removeNode(s,k):this.markElementAsRemoved(u,s,!1,k),p){const ee=this.namespacesByHostElement.get(s);ee&&ee.id!==u&&ee.removeNode(s,k)}}else this._onRemovalComplete(s,k)}markElementAsRemoved(u,s,p,k){this.collectedLeaveElements.push(s),s[Rn]={namespaceId:u,setForRemoval:k,hasAnimation:p,removedBeforeQueried:!1}}listen(u,s,p,k,K){return ki(s)?this._fetchNamespace(u).listen(s,p,k,K):()=>{}}_buildInstruction(u,s,p,k,K){return u.transition.build(this.driver,u.element,u.fromState.value,u.toState.value,p,k,u.fromState.options,u.toState.options,s,K)}destroyInnerAnimations(u){let s=this.driver.query(u,xe,!0);s.forEach(p=>this.destroyActiveAnimationsForElement(p)),0!=this.playersByQueriedElement.size&&(s=this.driver.query(u,It,!0),s.forEach(p=>this.finishActiveQueriedAnimationOnElement(p)))}destroyActiveAnimationsForElement(u){const s=this.playersByElement.get(u);s&&s.forEach(p=>{p.queued?p.markedForDestroy=!0:p.destroy()})}finishActiveQueriedAnimationOnElement(u){const s=this.playersByQueriedElement.get(u);s&&s.forEach(p=>p.finish())}whenRenderingDone(){return new Promise(u=>{if(this.players.length)return Q(this.players).onDone(()=>u());u()})}processLeaveNode(u){const s=u[Rn];if(s&&s.setForRemoval){if(u[Rn]=Sa,s.namespaceId){this.destroyInnerAnimations(u);const p=this._fetchNamespace(s.namespaceId);p&&p.clearElementCache(u)}this._onRemovalComplete(u,s.setForRemoval)}u.classList?.contains(ys)&&this.markElementAsDisabled(u,!1),this.driver.query(u,".ng-animate-disabled",!0).forEach(p=>{this.markElementAsDisabled(p,!1)})}flush(u=-1){let s=[];if(this.newHostElements.size&&(this.newHostElements.forEach((p,k)=>this._balanceNamespaceList(p,k)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let p=0;p<this.collectedEnterElements.length;p++)Mn(this.collectedEnterElements[p],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const p=[];try{s=this._flushAnimations(p,u)}finally{for(let k=0;k<p.length;k++)p[k]()}}else for(let p=0;p<this.collectedLeaveElements.length;p++)this.processLeaveNode(this.collectedLeaveElements[p]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(p=>p()),this._flushFns=[],this._whenQuietFns.length){const p=this._whenQuietFns;this._whenQuietFns=[],s.length?Q(s).onDone(()=>{p.forEach(k=>k())}):p.forEach(k=>k())}}reportError(u){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${u.join("\n")}`)}_flushAnimations(u,s){const p=new li,k=[],K=new Map,ee=[],re=new Map,he=new Map,Pe=new Map,ze=new Set;this.disabledNodes.forEach(qe=>{ze.add(qe);const at=this.driver.query(qe,".ng-animate-queued",!0);for(let gt=0;gt<at.length;gt++)ze.add(at[gt])});const He=this.bodyNode,ct=Array.from(this.statesByElement.keys()),At=Bi(ct,this.collectedEnterElements),st=new Map;let ht=0;At.forEach((qe,at)=>{const gt=_n+ht++;st.set(at,gt),qe.forEach(xt=>Mn(xt,gt))});const Pt=[],Kt=new Set,Qt=new Set;for(let qe=0;qe<this.collectedLeaveElements.length;qe++){const at=this.collectedLeaveElements[qe],gt=at[Rn];gt&&gt.setForRemoval&&(Pt.push(at),Kt.add(at),gt.hasAnimation?this.driver.query(at,".ng-star-inserted",!0).forEach(xt=>Kt.add(xt)):Qt.add(at))}const An=new Map,dn=Bi(ct,Array.from(Kt));dn.forEach((qe,at)=>{const gt=Xt+ht++;An.set(at,gt),qe.forEach(xt=>Mn(xt,gt))}),u.push(()=>{At.forEach((qe,at)=>{const gt=st.get(at);qe.forEach(xt=>Tr(xt,gt))}),dn.forEach((qe,at)=>{const gt=An.get(at);qe.forEach(xt=>Tr(xt,gt))}),Pt.forEach(qe=>{this.processLeaveNode(qe)})});const ns=[],Zn=[];for(let qe=this._namespaceList.length-1;qe>=0;qe--)this._namespaceList[qe].drainQueuedTransitions(s).forEach(gt=>{const xt=gt.player,an=gt.element;if(ns.push(xt),this.collectedEnterElements.length){const Nn=an[Rn];if(Nn&&Nn.setForMove)return void xt.destroy()}const Kn=!He||!this.driver.containsElement(He,an),Fn=An.get(an),zr=st.get(an),Zt=this._buildInstruction(gt,p,zr,Fn,Kn);if(Zt.errors&&Zt.errors.length)return void Zn.push(Zt);if(Kn)return xt.onStart(()=>hr(an,Zt.fromStyles)),xt.onDestroy(()=>jn(an,Zt.toStyles)),void k.push(xt);if(gt.isFallbackTransition)return xt.onStart(()=>hr(an,Zt.fromStyles)),xt.onDestroy(()=>jn(an,Zt.toStyles)),void k.push(xt);const is=[];Zt.timelines.forEach(Nn=>{Nn.stretchStartingKeyframe=!0,this.disabledNodes.has(Nn.element)||is.push(Nn)}),Zt.timelines=is,p.append(an,Zt.timelines),ee.push({instruction:Zt,player:xt,element:an}),Zt.queriedElements.forEach(Nn=>Le(re,Nn,[]).push(xt)),Zt.preStyleProps.forEach((Nn,qr)=>{const ss=Object.keys(Nn);if(ss.length){let Sr=he.get(qr);Sr||he.set(qr,Sr=new Set),ss.forEach(Xo=>Sr.add(Xo))}}),Zt.postStyleProps.forEach((Nn,qr)=>{const ss=Object.keys(Nn);let Sr=Pe.get(qr);Sr||Pe.set(qr,Sr=new Set),ss.forEach(Xo=>Sr.add(Xo))})});if(Zn.length){const qe=[];Zn.forEach(at=>{qe.push(`@${at.triggerName} has failed due to:\n`),at.errors.forEach(gt=>qe.push(`- ${gt}\n`))}),ns.forEach(at=>at.destroy()),this.reportError(qe)}const Tn=new Map,br=new Map;ee.forEach(qe=>{const at=qe.element;p.has(at)&&(br.set(at,at),this._beforeAnimationBuild(qe.player.namespaceId,qe.instruction,Tn))}),k.forEach(qe=>{const at=qe.element;this._getPreviousPlayers(at,!1,qe.namespaceId,qe.triggerName,null).forEach(xt=>{Le(Tn,at,[]).push(xt),xt.destroy()})});const Er=Pt.filter(qe=>mr(qe,he,Pe)),Yn=new Map;mo(Yn,this.driver,Qt,Pe,x.l3).forEach(qe=>{mr(qe,he,Pe)&&Er.push(qe)});const rs=new Map;At.forEach((qe,at)=>{mo(rs,this.driver,new Set(qe),he,x.k1)}),Er.forEach(qe=>{const at=Yn.get(qe),gt=rs.get(qe);Yn.set(qe,{...at,...gt})});const Xr=[],fu=[],Yo={};ee.forEach(qe=>{const{element:at,player:gt,instruction:xt}=qe;if(p.has(at)){if(ze.has(at))return gt.onDestroy(()=>jn(at,xt.toStyles)),gt.disabled=!0,gt.overrideTotalTime(xt.totalTime),void k.push(gt);let an=Yo;if(br.size>1){let Fn=at;const zr=[];for(;Fn=Fn.parentNode;){const Zt=br.get(Fn);if(Zt){an=Zt;break}zr.push(Fn)}zr.forEach(Zt=>br.set(Zt,an))}const Kn=this._buildAnimation(gt.namespaceId,xt,Tn,K,rs,Yn);if(gt.setRealPlayer(Kn),an===Yo)Xr.push(gt);else{const Fn=this.playersByElement.get(an);Fn&&Fn.length&&(gt.parentPlayer=Q(Fn)),k.push(gt)}}else hr(at,xt.fromStyles),gt.onDestroy(()=>jn(at,xt.toStyles)),fu.push(gt),ze.has(at)&&k.push(gt)}),fu.forEach(qe=>{const at=K.get(qe.element);if(at&&at.length){const gt=Q(at);qe.setRealPlayer(gt)}}),k.forEach(qe=>{qe.parentPlayer?qe.syncPlayerEvents(qe.parentPlayer):qe.destroy()});for(let qe=0;qe<Pt.length;qe++){const at=Pt[qe],gt=at[Rn];if(Tr(at,Xt),gt&&gt.hasAnimation)continue;let xt=[];if(re.size){let Kn=re.get(at);Kn&&Kn.length&&xt.push(...Kn);let Fn=this.driver.query(at,It,!0);for(let zr=0;zr<Fn.length;zr++){let Zt=re.get(Fn[zr]);Zt&&Zt.length&&xt.push(...Zt)}}const an=xt.filter(Kn=>!Kn.destroyed);an.length?Da(this,at,an):this.processLeaveNode(at)}return Pt.length=0,Xr.forEach(qe=>{this.players.push(qe),qe.onDone(()=>{qe.destroy();const at=this.players.indexOf(qe);this.players.splice(at,1)}),qe.play()}),Xr}elementContainsData(u,s){let p=!1;const k=s[Rn];return k&&k.setForRemoval&&(p=!0),this.playersByElement.has(s)&&(p=!0),this.playersByQueriedElement.has(s)&&(p=!0),this.statesByElement.has(s)&&(p=!0),this._fetchNamespace(u).elementContainsData(s)||p}afterFlush(u){this._flushFns.push(u)}afterFlushAnimationsDone(u){this._whenQuietFns.push(u)}_getPreviousPlayers(u,s,p,k,K){let ee=[];if(s){const re=this.playersByQueriedElement.get(u);re&&(ee=re)}else{const re=this.playersByElement.get(u);if(re){const he=!K||K==Qr;re.forEach(Pe=>{Pe.queued||!he&&Pe.triggerName!=k||ee.push(Pe)})}}return(p||k)&&(ee=ee.filter(re=>!(p&&p!=re.namespaceId||k&&k!=re.triggerName))),ee}_beforeAnimationBuild(u,s,p){const K=s.element,ee=s.isRemovalTransition?void 0:u,re=s.isRemovalTransition?void 0:s.triggerName;for(const he of s.timelines){const Pe=he.element,ze=Pe!==K,He=Le(p,Pe,[]);this._getPreviousPlayers(Pe,ze,ee,re,s.toState).forEach(At=>{const st=At.getRealPlayer();st.beforeDestroy&&st.beforeDestroy(),At.destroy(),He.push(At)})}hr(K,s.fromStyles)}_buildAnimation(u,s,p,k,K,ee){const re=s.triggerName,he=s.element,Pe=[],ze=new Set,He=new Set,ct=s.timelines.map(st=>{const ht=st.element;ze.add(ht);const Pt=ht[Rn];if(Pt&&Pt.removedBeforeQueried)return new x.ZN(st.duration,st.delay);const Kt=ht!==he,Qt=function(g){const u=[];return sn(g,u),u}((p.get(ht)||Ea).map(Tn=>Tn.getRealPlayer())).filter(Tn=>!!Tn.element&&Tn.element===ht),An=K.get(ht),dn=ee.get(ht),ns=G(0,this._normalizer,0,st.keyframes,An,dn),Zn=this._buildPlayer(st,ns,Qt);if(st.subTimeline&&k&&He.add(ht),Kt){const Tn=new xi(u,re,ht);Tn.setRealPlayer(Zn),Pe.push(Tn)}return Zn});Pe.forEach(st=>{Le(this.playersByQueriedElement,st.element,[]).push(st),st.onDone(()=>function(g,u,s){let p;if(g instanceof Map){if(p=g.get(u),p){if(p.length){const k=p.indexOf(s);p.splice(k,1)}0==p.length&&g.delete(u)}}else if(p=g[u],p){if(p.length){const k=p.indexOf(s);p.splice(k,1)}0==p.length&&delete g[u]}return p}(this.playersByQueriedElement,st.element,st))}),ze.forEach(st=>Mn(st,Ot));const At=Q(ct);return At.onDestroy(()=>{ze.forEach(st=>Tr(st,Ot)),jn(he,s.toStyles)}),He.forEach(st=>{Le(k,st,[]).push(At)}),At}_buildPlayer(u,s,p){return s.length>0?this.driver.animate(u.element,s,u.duration,u.delay,u.easing,p):new x.ZN(u.duration,u.delay)}}class xi{constructor(u,s,p){this.namespaceId=u,this.triggerName=s,this.element=p,this._player=new x.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(u){this._containsRealPlayer||(this._player=u,Object.keys(this._queuedCallbacks).forEach(s=>{this._queuedCallbacks[s].forEach(p=>X(u,s,void 0,p))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(u.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(u){this.totalTime=u}syncPlayerEvents(u){const s=this._player;s.triggerCallback&&u.onStart(()=>s.triggerCallback("start")),u.onDone(()=>this.finish()),u.onDestroy(()=>this.destroy())}_queueEvent(u,s){Le(this._queuedCallbacks,u,[]).push(s)}onDone(u){this.queued&&this._queueEvent("done",u),this._player.onDone(u)}onStart(u){this.queued&&this._queueEvent("start",u),this._player.onStart(u)}onDestroy(u){this.queued&&this._queueEvent("destroy",u),this._player.onDestroy(u)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(u){this.queued||this._player.setPosition(u)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(u){const s=this._player;s.triggerCallback&&s.triggerCallback(u)}}function ki(g){return g&&1===g.nodeType}function Li(g,u){const s=g.style.display;return g.style.display=u??"none",s}function mo(g,u,s,p,k){const K=[];s.forEach(he=>K.push(Li(he)));const ee=[];p.forEach((he,Pe)=>{const ze={};he.forEach(He=>{const ct=ze[He]=u.computeStyle(Pe,He,k);(!ct||0==ct.length)&&(Pe[Rn]=ho,ee.push(Pe))}),g.set(Pe,ze)});let re=0;return s.forEach(he=>Li(he,K[re++])),ee}function Bi(g,u){const s=new Map;if(g.forEach(re=>s.set(re,[])),0==u.length)return s;const k=new Set(u),K=new Map;function ee(re){if(!re)return 1;let he=K.get(re);if(he)return he;const Pe=re.parentNode;return he=s.has(Pe)?Pe:k.has(Pe)?1:ee(Pe),K.set(re,he),he}return u.forEach(re=>{const he=ee(re);1!==he&&s.get(he).push(re)}),s}function Mn(g,u){g.classList?.add(u)}function Tr(g,u){g.classList?.remove(u)}function Da(g,u,s){Q(s).onDone(()=>g.processLeaveNode(u))}function sn(g,u){for(let s=0;s<g.length;s++){const p=g[s];p instanceof x.ZE?sn(p.players,u):u.push(p)}}function mr(g,u,s){const p=s.get(g);if(!p)return!1;let k=u.get(g);return k?p.forEach(K=>k.add(K)):u.set(g,p),s.delete(g),!0}class on{constructor(u,s,p){this.bodyNode=u,this._driver=s,this._normalizer=p,this._triggerCache={},this.onRemovalComplete=(k,K)=>{},this._transitionEngine=new wa(u,s,p),this._timelineEngine=new co(u,s,p),this._transitionEngine.onRemovalComplete=(k,K)=>this.onRemovalComplete(k,K)}registerTrigger(u,s,p,k,K){const ee=u+"-"+k;let re=this._triggerCache[ee];if(!re){const he=[],Pe=Be(this._driver,K,he);if(he.length)throw new Error(`The animation trigger "${k}" has failed to build due to the following errors:\n - ${he.join("\n - ")}`);re=function(g,u,s){return new _a(g,u,s)}(k,Pe,this._normalizer),this._triggerCache[ee]=re}this._transitionEngine.registerTrigger(s,k,re)}register(u,s){this._transitionEngine.register(u,s)}destroy(u,s){this._transitionEngine.destroy(u,s)}onInsert(u,s,p,k){this._transitionEngine.insertNode(u,s,p,k)}onRemove(u,s,p,k){this._transitionEngine.removeNode(u,s,k||!1,p)}disableAnimations(u,s){this._transitionEngine.markElementAsDisabled(u,s)}process(u,s,p,k){if("@"==p.charAt(0)){const[K,ee]=Qe(p);this._timelineEngine.command(K,s,ee,k)}else this._transitionEngine.trigger(u,s,p,k)}listen(u,s,p,k,K){if("@"==p.charAt(0)){const[ee,re]=Qe(p);return this._timelineEngine.listen(ee,s,re,K)}return this._transitionEngine.listen(u,s,p,k,K)}flush(u=-1){this._transitionEngine.flush(u)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Un(g,u){let s=null,p=null;return Array.isArray(u)&&u.length?(s=kn(u[0]),u.length>1&&(p=kn(u[u.length-1]))):u&&(s=kn(u)),s||p?new Ss(g,s,p):null}let Ss=(()=>{class g{constructor(s,p,k){this._element=s,this._startStyles=p,this._endStyles=k,this._state=0;let K=g.initialStylesByElement.get(s);K||g.initialStylesByElement.set(s,K={}),this._initialStyles=K}start(){this._state<1&&(this._startStyles&&jn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jn(this._element,this._initialStyles),this._endStyles&&(jn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(g.initialStylesByElement.delete(this._element),this._startStyles&&(hr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hr(this._element,this._endStyles),this._endStyles=null),jn(this._element,this._initialStyles),this._state=3)}}return g.initialStylesByElement=new WeakMap,g})();function kn(g){let u=null;const s=Object.keys(g);for(let p=0;p<s.length;p++){const k=s[p];ws(k)&&(u=u||{},u[k]=g[k])}return u}function ws(g){return"display"===g||"position"===g}const hi="animation",Fi="animationend";class Ni{constructor(u,s,p,k,K,ee,re){this._element=u,this._name=s,this._duration=p,this._delay=k,this._easing=K,this._fillMode=ee,this._onDoneFn=re,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=he=>this._handleCallback(he)}apply(){(function(g,u){const s=As(g,"").trim();let p=0;s.length&&(function(g,u){let s=0;for(let p=0;p<g.length;p++)","===g.charAt(p)&&s++;return s}(s)+1,u=`${s}, ${u}`),zi(g,"",u)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),go(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){ji(this._element,this._name,"paused")}resume(){ji(this._element,this._name,"running")}setPosition(u){const s=vo(this._element,this._name);this._position=u*this._duration,zi(this._element,"Delay",`-${this._position}ms`,s)}getPosition(){return this._position}_handleCallback(u){const s=u._ngTestManualTimestamp||Date.now(),p=1e3*parseFloat(u.elapsedTime.toFixed(3));u.animationName==this._name&&Math.max(s-this._startTime,0)>=this._delay&&p>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),go(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(g,u){const p=As(g,"").split(","),k=Ui(p,u);k>=0&&(p.splice(k,1),zi(g,"",p.join(",")))}(this._element,this._name))}}function ji(g,u,s){zi(g,"PlayState",s,vo(g,u))}function vo(g,u){const s=As(g,"");return s.indexOf(",")>0?Ui(s.split(","),u):Ui([s],u)}function Ui(g,u){for(let s=0;s<g.length;s++)if(g[s].indexOf(u)>=0)return s;return-1}function go(g,u,s){s?g.removeEventListener(Fi,u):g.addEventListener(Fi,u)}function zi(g,u,s,p){const k=hi+u;if(null!=p){const K=g.style[k];if(K.length){const ee=K.split(",");ee[p]=s,s=ee.join(",")}}g.style[k]=s}function As(g,u){return g.style[hi+u]||""}class $i{constructor(u,s,p,k,K,ee,re,he){this.element=u,this.keyframes=s,this.animationName=p,this._duration=k,this._delay=K,this._finalStyles=re,this._specialStyles=he,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=ee||"linear",this.totalTime=k+K,this._buildStyler()}onStart(u){this._onStartFns.push(u)}onDone(u){this._onDoneFns.push(u)}onDestroy(u){this._onDestroyFns.push(u)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(u=>u()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(u=>u()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(u=>u()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(u){this._styler.setPosition(u)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ni(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(u){const s="start"==u?this._onStartFns:this._onDoneFns;s.forEach(p=>p()),s.length=0}beforeDestroy(){this.init();const u={};if(this.hasStarted()){const s=this._state>=3;Object.keys(this._finalStyles).forEach(p=>{"offset"!=p&&(u[p]=s?this._finalStyles[p]:Pi(this.element,p))})}this.currentSnapshot=u}}class Ds extends x.ZN{constructor(u,s){super(),this.element=u,this._startingStyles={},this.__initialized=!1,this._styles=Rt(s)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(u=>{this._startingStyles[u]=this.element.style[u]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(u=>this.element.style.setProperty(u,this._styles[u])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(u=>{const s=this._startingStyles[u];s?this.element.style.setProperty(u,s):this.element.style.removeProperty(u)}),this._startingStyles=null,super.destroy())}}class Os{constructor(){this._count=0}validateStyleProperty(u){return Ye(u)}matchesElement(u,s){return!1}containsElement(u,s){return nt(u,s)}query(u,s,p){return vt(u,s,p)}computeStyle(u,s,p){return window.getComputedStyle(u)[s]}buildKeyframeElement(u,s,p){p=p.map(re=>Rt(re));let k=`@keyframes ${s} {\n`,K="";p.forEach(re=>{K=" ";const he=parseFloat(re.offset);k+=`${K}${100*he}% {\n`,K+=" ",Object.keys(re).forEach(Pe=>{const ze=re[Pe];switch(Pe){case"offset":return;case"easing":return void(ze&&(k+=`${K}animation-timing-function: ${ze};\n`));default:return void(k+=`${K}${Pe}: ${ze};\n`)}}),k+=`${K}}\n`}),k+="}\n";const ee=document.createElement("style");return ee.textContent=k,ee}animate(u,s,p,k,K,ee=[],re){const he=ee.filter(Pt=>Pt instanceof $i),Pe={};pn(p,k)&&he.forEach(Pt=>{let Kt=Pt.currentSnapshot;Object.keys(Kt).forEach(Qt=>Pe[Qt]=Kt[Qt])});const ze=function(g){let u={};return g&&(Array.isArray(g)?g:[g]).forEach(p=>{Object.keys(p).forEach(k=>{"offset"==k||"easing"==k||(u[k]=p[k])})}),u}(s=Di(u,s,Pe));if(0==p)return new Ds(u,ze);const He="gen_css_kf_"+this._count++,ct=this.buildKeyframeElement(u,He,s);(function(g){const u=g.getRootNode?.();return"undefined"!=typeof ShadowRoot&&u instanceof ShadowRoot?u:document.head})(u).appendChild(ct);const st=Un(u,s),ht=new $i(u,s,He,p,k,K,ze,st);return ht.onDestroy(()=>{var g;(g=ct).parentNode.removeChild(g)}),ht}}class _o{constructor(u,s,p,k){this.element=u,this.keyframes=s,this.options=p,this._specialStyles=k,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=p.duration,this._delay=p.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(u=>u()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const u=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,u,this.options),this._finalKeyframe=u.length?u[u.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(u,s,p){return u.animate(s,p)}onStart(u){this._onStartFns.push(u)}onDone(u){this._onDoneFns.push(u)}onDestroy(u){this._onDestroyFns.push(u)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(u=>u()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(u=>u()),this._onDestroyFns=[])}setPosition(u){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=u*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const u={};if(this.hasStarted()){const s=this._finalKeyframe;Object.keys(s).forEach(p=>{"offset"!=p&&(u[p]=this._finished?s[p]:Pi(this.element,p))})}this.currentSnapshot=u}triggerCallback(u){const s="start"==u?this._onStartFns:this._onDoneFns;s.forEach(p=>p()),s.length=0}}class Ma{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Ht().toString()),this._cssKeyframesDriver=new Os}validateStyleProperty(u){return Ye(u)}matchesElement(u,s){return!1}containsElement(u,s){return nt(u,s)}query(u,s,p){return vt(u,s,p)}computeStyle(u,s,p){return window.getComputedStyle(u)[s]}overrideWebAnimationsSupport(u){this._isNativeImpl=u}animate(u,s,p,k,K,ee=[],re){if(!re&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(u,s,p,k,K,ee);const ze={duration:p,delay:k,fill:0==k?"both":"forwards"};K&&(ze.easing=K);const He={},ct=ee.filter(st=>st instanceof _o);pn(p,k)&&ct.forEach(st=>{let ht=st.currentSnapshot;Object.keys(ht).forEach(Pt=>He[Pt]=ht[Pt])});const At=Un(u,s=Di(u,s=s.map(st=>Vn(st,!1)),He));return new _o(u,s,ze,At)}}function Ht(){return Y()&&Element.prototype.animate||{}}var zn=l(1457);let xa=(()=>{class g extends x._j{constructor(s,p){super(),this._nextAnimationId=0,this._renderer=s.createRenderer(p.body,{id:"0",encapsulation:a.ViewEncapsulation.None,styles:[],data:{animation:[]}})}build(s){const p=this._nextAnimationId.toString();this._nextAnimationId++;const k=Array.isArray(s)?(0,x.vP)(s):s;return Eo(this._renderer,null,p,"register",[k]),new ka(p,this._renderer)}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(a.RendererFactory2),a.\u0275\u0275inject(zn.DOCUMENT))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g})();class ka extends x.LC{constructor(u,s){super(),this._id=u,this._renderer=s}create(u,s){return new La(this._id,u,s||{},this._renderer)}}class La{constructor(u,s,p,k){this.id=u,this.element=s,this._renderer=k,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",p)}_listen(u,s){return this._renderer.listen(this.element,`@@${this.id}:${u}`,s)}_command(u,...s){return Eo(this._renderer,this.element,this.id,u,s)}onDone(u){this._listen("done",u)}onStart(u){this._listen("start",u)}onDestroy(u){this._listen("destroy",u)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(u){this._command("setPosition",u)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Eo(g,u,s,p,k){return g.setProperty(u,`@@${s}:${p}`,k)}const Bt="@.disabled";let Iu=(()=>{class g{constructor(s,p,k){this.delegate=s,this.engine=p,this._zone=k,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),p.onRemovalComplete=(K,ee)=>{const re=ee?.parentNode(K);re&&ee.removeChild(re,K)}}createRenderer(s,p){const K=this.delegate.createRenderer(s,p);if(!(s&&p&&p.data&&p.data.animation)){let ze=this._rendererCache.get(K);return ze||(ze=new So("",K,this.engine),this._rendererCache.set(K,ze)),ze}const ee=p.id,re=p.id+"-"+this._currentId;this._currentId++,this.engine.register(re,s);const he=ze=>{Array.isArray(ze)?ze.forEach(he):this.engine.registerTrigger(ee,re,s,ze.name,ze)};return p.data.animation.forEach(he),new Ts(this,re,K,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(s,p,k){s>=0&&s<this._microtaskId?this._zone.run(()=>p(k)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(K=>{const[ee,re]=K;ee(re)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([p,k]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(a.RendererFactory2),a.\u0275\u0275inject(on),a.\u0275\u0275inject(a.NgZone))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g})();class So{constructor(u,s,p){this.namespaceId=u,this.delegate=s,this.engine=p,this.destroyNode=this.delegate.destroyNode?k=>s.destroyNode(k):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(u,s){return this.delegate.createElement(u,s)}createComment(u){return this.delegate.createComment(u)}createText(u){return this.delegate.createText(u)}appendChild(u,s){this.delegate.appendChild(u,s),this.engine.onInsert(this.namespaceId,s,u,!1)}insertBefore(u,s,p,k=!0){this.delegate.insertBefore(u,s,p),this.engine.onInsert(this.namespaceId,s,u,k)}removeChild(u,s,p){this.engine.onRemove(this.namespaceId,s,this.delegate,p)}selectRootElement(u,s){return this.delegate.selectRootElement(u,s)}parentNode(u){return this.delegate.parentNode(u)}nextSibling(u){return this.delegate.nextSibling(u)}setAttribute(u,s,p,k){this.delegate.setAttribute(u,s,p,k)}removeAttribute(u,s,p){this.delegate.removeAttribute(u,s,p)}addClass(u,s){this.delegate.addClass(u,s)}removeClass(u,s){this.delegate.removeClass(u,s)}setStyle(u,s,p,k){this.delegate.setStyle(u,s,p,k)}removeStyle(u,s,p){this.delegate.removeStyle(u,s,p)}setProperty(u,s,p){"@"==s.charAt(0)&&s==Bt?this.disableAnimations(u,!!p):this.delegate.setProperty(u,s,p)}setValue(u,s){this.delegate.setValue(u,s)}listen(u,s,p){return this.delegate.listen(u,s,p)}disableAnimations(u,s){this.engine.disableAnimations(u,s)}}class Ts extends So{constructor(u,s,p,k){super(s,p,k),this.factory=u,this.namespaceId=s}setProperty(u,s,p){"@"==s.charAt(0)?"."==s.charAt(1)&&s==Bt?this.disableAnimations(u,p=void 0===p||!!p):this.engine.process(this.namespaceId,u,s.substr(1),p):this.delegate.setProperty(u,s,p)}listen(u,s,p){if("@"==s.charAt(0)){const k=function(g){switch(g){case"body":return document.body;case"document":return document;case"window":return window;default:return g}}(u);let K=s.substr(1),ee="";return"@"!=K.charAt(0)&&([K,ee]=function(g){const u=g.indexOf(".");return[g.substring(0,u),g.substr(u+1)]}(K)),this.engine.listen(this.namespaceId,k,K,ee,re=>{this.factory.scheduleListenerCallback(re._data||-1,p,re)})}return this.delegate.listen(u,s,p)}}let xr=(()=>{class g extends on{constructor(s,p,k){super(s.body,p,k)}ngOnDestroy(){this.flush()}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(zn.DOCUMENT),a.\u0275\u0275inject(un),a.\u0275\u0275inject(Ri))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g})();const En=new a.InjectionToken("AnimationModuleType"),mi=[{provide:x._j,useClass:xa},{provide:Ri,useFactory:function(){return new Pr}},{provide:on,useClass:xr},{provide:a.RendererFactory2,useFactory:function(g,u,s){return new Iu(g,u,s)},deps:[v.se,on,a.NgZone]}],nr=[{provide:un,useFactory:function(){return"function"==typeof Ht()?new Ma:new Os}},{provide:En,useValue:"BrowserAnimations"},...mi],Ms=[{provide:un,useClass:kt},{provide:En,useValue:"NoopAnimations"},...mi];let Ao=(()=>{class g{static withConfig(s){return{ngModule:g,providers:s.disableAnimations?Ms:nr}}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({providers:nr,imports:[v.b2]}),g})();var tn=l(6435);const kr={properties:{id:{type:"string",description:"Id"},name:{type:"string",description:"Name"},shortName:{type:"string",description:"Short name"},description:{type:"string",description:"Description"},startUrl:{type:"string",description:"Start url"},icons:{type:"array",description:"Icons",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"}},required:["src","sizes","type"]}},themeColor:{type:"string",description:"Theme color"},backgroundColor:{type:"string",description:"Background color"},screenshots:{type:"array",description:"Screenshots",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"},platform:{type:"string",description:"Platform"},label:{type:"string",description:"Label"}},required:["src","sizes","type","platform","label"]}},iarcRatingId:{type:"string",description:"IARC rating id"},categories:{type:"array",description:"Categories",items:{type:"string",description:"Category"}},additionalProperties:{type:"object",description:"Additional properties",properties:{permissions:{type:"array",description:"Permissions",items:{type:"object",properties:{kind:{type:"string",description:"Kind",enum:["collection"]},mode:{type:"string",description:"Mode",enum:["read","write","delete"]},target:{type:"string",description:"Target"}},required:["kind","mode","target"]}},internal:{type:"boolean",description:"Internal"},starred:{type:"boolean",description:"Internal"},defaultShortcut:{type:"string",description:"Default shortcut"},sidebarShortcuts:{type:"array",description:"Sidebar shortcuts",items:{type:"string",description:"Sidebar shortcut"}}}},shortcuts:{type:"array",description:"Shortcuts",items:{type:"object",properties:{name:{type:"string",description:"Name"},url:{type:"string",description:"Url"},icons:{type:"array",description:"Icons",items:{type:"object",properties:{src:{type:"string",description:"Src"},sizes:{type:"string",description:"Sizes"},type:{type:"string",description:"Type"}},required:["src","sizes","type"]}},shortName:{type:"string",description:"Short name"},description:{type:"string",description:"Description"}},required:["name","url"]}},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","name","startUrl","createdAt","updatedAt"]},vi={provide:tn.RY,useValue:{name:"storeapplications",creator:{schema:{title:"Store Store",description:"User Applications",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:kr.properties,required:["id","name","startUrl","createdAt","updatedAt"]}}},multi:!0},Vi={provide:tn.RY,useValue:{name:"userapplications",creator:{schema:{title:"User Applications",description:"User Applications",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:kr.properties,required:["id","name","startUrl","createdAt","updatedAt"]}}},multi:!0},Gi={provide:tn.RY,useValue:{name:"usertopics",creator:{schema:{title:"User Topics",description:"User Topics",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},title:{type:"string",description:"Title"},description:{type:"string",description:"Description"},icon:{type:"string",description:"Icon"},themeColor:{type:"string",description:"Theme color"},background:{type:"string",description:"Background color"},applications:{type:"array",description:"applications",items:{type:"string",description:"applications"}},categories:{type:"array",description:"Categories",items:{type:"string",description:"Category"}},shortcuts:{type:"array",description:"Shortcuts",items:{type:"string",description:"Shortcut"}},media:{type:"array",description:"Media",items:{type:"object",description:"MediaContent"}},triggers:{type:"array",description:"Shortcuts",items:{type:"object",description:"Shortcut"}},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","title","createdAt","updatedAt"]}}},multi:!0};var Xe=l(899),Oo=l(4995);const Qi={provide:tn.To,useValue:{name:"userapplications",upsert:!0,data:[{id:"com.central-factory.portal",name:"Central Factory Portal",description:"Central Factory Portal",startUrl:"/",icons:[{src:"assets/icons/mdi/open-in-app.svg",sizes:"512x512",type:"image/svg+xml"}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userpreferences"},{kind:Xe.k.Collection,mode:Xe.R.Read,target:"useravatars"},{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userapplications"}]}},{id:"com.central-factory.start",name:"Start",description:"Access to many local and hosted web applications. Applications can be loaded through a webview or through a webpack module federation.",startUrl:"start",icons:[{src:"assets/icons/mdi/flare.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Start",url:"/start",icons:[{src:"assets/icons/mdi/flare.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userapplications"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"userapplications"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"userapplications"},{kind:Xe.k.Collection,mode:Xe.R.Read,target:"storeapplications"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"storeapplications"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"storeapplications"},{kind:Xe.k.Collection,mode:Xe.R.Read,target:"usertopics"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"usertopics"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"usertopics"}],sidebarShortcuts:["Start"]}},{id:"com.central-factory.portals",name:"Portals",description:"Access to many local and hosted web applications. Applications can be loaded through a webview or through a webpack module federation.",startUrl:"portals",icons:[{src:"assets/icons/mdi/web-box.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Portals",url:"/portals",icons:[{src:"assets/icons/mdi/web-box.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userapplications"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"userapplications"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"userapplications"},{kind:Xe.k.Collection,mode:Xe.R.Read,target:"storeapplications"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"storeapplications"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"storeapplications"}]}},{id:"com.central-factory.user-avatars",name:"User Avatars",description:"Avatars management module. Customize your user avatars.",startUrl:"user-avatars",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Selected Avatar",url:"/selected-avatar",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}]},{name:"Select Avatar",url:"/select-avatar",icons:[{src:"assets/icons/mdi/account.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:Xe.k.Collection,mode:Xe.R.Read,target:"useravatars"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"useravatars"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"useravatars"},{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userpreferences"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"userpreferences"}],sidebarShortcuts:["Selected Avatar"]}},{id:"com.central-factory.inventory",name:"Inventory",description:"Assets management module. Manage and preview your assets.",startUrl:"inventory",icons:[{src:"assets/icons/mdi/bag-personal.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Inventory",url:"/inventory",icons:[{src:"assets/icons/mdi/bag-personal.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userassets"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"userassets"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"userassets"}],sidebarShortcuts:["Inventory"]}},{id:"com.central-factory.marketplace",name:"Marketplace",description:"Portal Marketplace. Sell your assets and acquire new ones.",startUrl:"marketplace",icons:[{src:"assets/icons/mdi/store.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Marketplace",url:"/marketplace",icons:[{src:"assets/icons/mdi/store.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},internal:!0,permissions:[{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userassets"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"userassets"},{kind:Xe.k.Collection,mode:Xe.R.Delete,target:"userassets"}],sidebarShortcuts:["Marketplace"]}},{id:"com.central-factory.settings",name:"Settings",description:"Customize your portal experience. Manage your preferences.",startUrl:"settings",icons:[{src:"assets/icons/mdi/cog.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Settings",url:"/settings",icons:[{src:"assets/icons/mdi/cog.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{internal:!0,author:{id:"com.central-factory",name:"Central Factory"},permissions:[{kind:Xe.k.Collection,mode:Xe.R.Read,target:"userpreferences"},{kind:Xe.k.Collection,mode:Xe.R.Write,target:"userpreferences"}],sidebarShortcuts:["Settings"]}},{id:"com.central-factory.codex",name:"Codex",description:"Official documentation for the Central Factory Metaverse",startUrl:"codex",categories:["productivity"],icons:[{src:"assets/icons/mdi/book-open-page-variant.svg",sizes:"512x512",type:"image/svg+xml"}],shortcuts:[{name:"Codex",url:"https://www.aitorllamas.com/metaverse/apps/codex",icons:[{src:"assets/icons/mdi/book-open-page-variant.svg",sizes:"512x512",type:"image/svg+xml"}]}],additionalProperties:{author:{id:"com.central-factory",name:"Central Factory"},renderingType:Oo.B.Webview,supportsBrowser:!0,internal:!1,permissions:[],defaultShortcut:"Codex",sidebarShortcuts:[],colors:[{variation:Oo.c.Primary,color:"#706fd3"}]}}]},multi:!0},Sn={provide:tn.To,useValue:{name:"usertopics",upsert:!0,data:[{id:"morning.routine",icon:"assets/icons/mdi/weather-sunny.svg",title:"Morning Routine",background:"https://images.unsplash.com/photo-1415750465391-51ed29b1e610?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",themeColor:"light",applications:["com.ibm.weather","com.feedly.feedly","com.spotify.player","com.google.calendar","com.google.mail","com.doist.todoist","com.microsoft.github"],shortcuts:["com.ibm.weather#TodaysForecast","com.feedly.feedly#NewsFeed","com.spotify.player#PlayMusic","com.google.calendar#Agenda","com.doist.todoist#Today"],categories:["lifestyle","productivity","food","fitness","health"],triggers:[{name:"Every morning",rules:{startTime:"06:00",endTime:"09:30"}}]},{id:"meal.time",icon:"assets/icons/mdi/silverware.svg",title:"Meal Time",background:"https://images.unsplash.com/photo-1565895405138-6c3a1555da6a?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",themeColor:"light",applications:["com.fitbit.fitbit","com.uber.eats","com.glovo.glovo","com.justeat.justeat","com.burgerking.burgerking"],shortcuts:[],categories:["food","health"],triggers:[{name:"Breakfast",rules:{startTime:"06:00",endTime:"8:00"}},{name:"Coffee",rules:{startTime:"11:00",endTime:"12:00"}},{name:"Lunch",rules:{startTime:"13:00",endTime:"14:00"}},{name:"Tea",rules:{startTime:"17:00",endTime:"18:00"}},{name:"Dinner",rules:{startTime:"21:00",endTime:"22:00"}}]},{id:"plan.day",icon:"assets/icons/mdi/account-check.svg",title:"Plan your day",background:"https://images.unsplash.com/photo-1484480974693-6ca0a78fb36b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1472&q=80",applications:["com.google.calendar","com.google.mail","com.google.keep","com.doist.todoist"],shortcuts:["com.google.calendar#Agenda","com.google.calendar#CreateEvent","com.google.keep#CreateNote","com.google.mail#Inbox","com.google.mail#CreateEmail","com.doist.todoist#CreateTask"],categories:["productivity","business"],triggers:[{name:"Every morning",rules:{startTime:"09:00",endTime:"10:30"}}]},{id:"work.matrix",icon:"assets/icons/mdi/account-network.svg",title:"Work at The Matrix",background:"https://images.unsplash.com/photo-1564069114553-7215e1ff1890?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1332&q=80",applications:["com.microsoft.teams","com.slack.slack","com.microsoft.outlook.office","com.atlassian.jira","com.microsoft.azure","com.microsoft.onedrive","com.microsoft.onenote","com.atlassian.confluence"],shortcuts:["com.microsoft.outlook.office#Inbox","com.microsoft.outlook.office#CreateEmail","com.microsoft.outlook.office#Agenda","com.microsoft.onedrive#UploadFile","com.microsoft.onenote#CreateNote","com.atlassian.jira#CreateIssue","com.atlassian.jira#Board","com.atlassian.confluence#CreateNote","com.microsoft.vscode.insiders#Code"],categories:["productivity","business"],triggers:[{name:"Every morning",rules:{startTime:"10:00",endTime:"14:00"}},{name:"Every afternoon",rules:{startTime:"14:00",endTime:"18:00"}}]},{id:"coding.night",icon:"assets/icons/mdi/account-network.svg",title:"Coding Nights",background:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1472&q=80",themeColor:"light",applications:["com.google.search","com.microsoft.github","com.central-factory.codex","com.ivoox.player","com.spotify.player","com.google.youtube","com.stackexchange.overflow","com.templarian.materialdesignicons","com.brandcolors.brandcolors","com.simpleicons.simpleicons","com.discord.discord"],shortcuts:["com.microsoft.github#PullRequests","com.google.youtube#Subscriptions","com.spotify.player#Library"],categories:["devtools","productivity"],triggers:[{name:"Every night",rules:{startTime:"18:00",endTime:"23:59"}},{name:"Every morning",rules:{startTime:"00:00",endTime:"03:00"}}]},{id:"gaming.night",icon:"assets/icons/mdi/google-controller.svg",themeColor:"light",background:"https://images.unsplash.com/photo-1610041321327-b794c052db27?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80",title:"Gaming Night",applications:["com.microsoft.xbox","com.valve.steam","com.nintendo.my","com.discord.discord","com.amazon.twitchtv","com.google.youtube","com.spotify.spotify"],shortcuts:["com.amazon.twitchtv#Following","com.google.youtube#Subscriptions"],categories:["games"],media:[{type:"image",title:"Halo Infinite",src:"https://store-images.s-microsoft.com/image/apps.56579.13727851868390641.c9cc5f66-aff8-406c-af6b-440838730be0.0dee39b3-efb2-4425-8f1f-087c111ff9b2?w=300&h=300",url:"https://www.xbox.com/es-ES/play/games/halo-infinite-campa%C3%B1a/9NP1P1WFS0LB"},{type:"image",title:"Nobody Saves the World",src:"https://store-images.s-microsoft.com/image/apps.53413.13585830814774327.d6e142bb-27e2-4109-8139-edac768eca10.bd597240-e065-42b4-a809-b42e4a7a9815?w=300&h=300",url:"https://www.xbox.com/en-US/play/games/nobody-saves-the-world/9NFZ65KKJ10X"}],triggers:[{name:"Every night",rules:{startTime:"18:00",endTime:"23:59"}},{name:"Every morning",rules:{startTime:"00:00",endTime:"03:00"}}]}]},multi:!0},Io={provide:tn.RY,useValue:{name:"userassets",creator:{schema:{title:"User Assets",description:"User assets",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},name:{type:"string",description:"Name"},model:{type:"string",description:"Model"},description:{type:"string",description:"Description"},digital:{type:"boolean",description:"Digital"},private:{type:"boolean",description:"Private"},kind:{type:"string",description:"Kind",enum:["unknown","currency","land","material","building","equipment","furniture","machine","vehicle","media-resource","other"]},url:{type:"string",description:"Url"},previewUrl:{type:"string",description:"Preview url"},currentValue:{type:"object",description:"Current value",properties:{usd:{type:"string",description:"Usd"},eth:{type:"string",description:"Eth"}}},purchaseValue:{type:"object",description:"Purchase value",properties:{usd:{type:"string",description:"Usd"},eth:{type:"string",description:"Eth"}}},purchaseDate:{format:"date-time",type:"string"},data:{type:"object",description:"Data"},owner:{type:"string",description:"Owner"},producer:{type:"string",description:"Producer"},permissions:{type:"array",description:"Permissions",items:{type:"object",description:"Permission"}},createdAt:{format:"date-time",type:"string",description:"Created at"},updatedAt:{format:"date-time",type:"string",description:"Updated at"}}}}},multi:!0},gi={type:"object",description:"Appearance",properties:{format:{type:"string"},src:{type:"string"},smallPreviewUrl:{type:"string"},previewCamera:{type:"object",properties:{position:{type:"string"},rotation:{type:"string"},scale:{type:"string"}}}}},Yi={provide:tn.RY,useValue:{name:"useravatars",creator:{schema:{title:"User Avatars",description:"User Avatars",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},welcomeMessage:{type:"string",description:"Welcome message"},name:{type:"string",description:"Name"},title:{type:"string",description:"Title"},selectedAppearance:gi,appearances:{type:"array",description:"Appearances",items:gi},scopes:{type:"array",description:"Scopes",items:{type:"object",properties:{integration:{type:"string",description:"Integration"},domain:{type:"string",description:"Domain"},scope:{type:"string",description:"Scope"}}}},skills:{type:"array",description:"Skills",items:{type:"object",properties:{domain:{type:"string",description:"Domain"},scope:{type:"string",description:"Scope"},skill:{type:"string",description:"Skill"}}}},createdAt:{format:"date-time",type:"string",description:"Created at"},updatedAt:{format:"date-time",type:"string",description:"Updated at"}},attachments:{encrypted:!1}}}},multi:!0},Lr={provide:tn.RY,useValue:{name:"applicationpermissions",creator:{schema:{title:"Application Permissions",description:"Application Permissions",version:0,keyCompression:!0,primaryKey:{key:"id",fields:["appId","kind","mode","target"],separator:":"},type:"object",properties:{id:{type:"string",description:"Id"},appId:{type:"string",description:"AppId"},kind:{type:"string",description:"Kind",enum:["collection"]},mode:{type:"string",description:"Mode",enum:["read","write","delete"]},target:{type:"string",description:"Target"},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","appId","kind","mode","target"],encrypted:["kind","mode","target"]}}},multi:!0},Br={provide:tn.RY,useValue:{name:"userpreferences",creator:{schema:{title:"User Preferences",description:"User preferences",version:0,keyCompression:!0,primaryKey:"id",type:"object",properties:{id:{type:"string",description:"Id"},key:{type:"string",description:"Key"},value:{description:"Value"},avatar:{type:"string"},createdAt:{format:"date-time",type:"string"},updatedAt:{format:"date-time",type:"string"}},required:["id","value"]}}},multi:!0},Fr={production:!1,demo:!0,useMocks:!0,autologin:!0,showSplashScreen:!1,repositoryUrl:"https://raw.githubusercontent.com/central-factory/web-application-manifests/main",webUrl:"http://localhost:3000",documentationUrl:"http://localhost:3000/docs",blogUrl:"http://localhost:3000/blog",developersUrl:"http://localhost:3000/developers"},$n={provide:tn.To,useValue:{name:"userpreferences",upsert:!1,data:[{id:"settings.customization",key:"settings.customization",value:{theme:{name:"Metaverse",path:"assets/themes/metaverse/variables.css"}}},{id:"settings.customization.1",key:"settings.customization.1",value:{theme:{name:"Metaverse",path:"assets/themes/metaverse/variables.css"}}},{id:"settings.customization.2",key:"settings.customization.2",value:{theme:{name:"Bubbles",path:"assets/themes/bubbles/variables.css"}}},{id:"settings.customization.3",key:"settings.customization.3",value:{theme:{name:"Default",path:"assets/themes/default/variables.css"}}},{id:"store.settings.repositories",key:"store.settings.repositories",value:[{label:"The Central Factory",url:`${Fr.repositoryUrl}/applications.json`}]}]},multi:!0};var ir=l(43),Nr=l(4438),sr=l(2085),or=l(2051);let Ro=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({}),g})(),Bs=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({}),g})(),Yr=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({imports:[[zn.CommonModule,Nr.O,or.Y,Ro,Bs]]}),g})();var yi=l(5088),Qn=(()=>{return(g=Qn||(Qn={})).Body="body",g.Head="head",g.Ears="ears",g.Face="face",g.Eyes="eyes",g.Nose="nose",g.Mouth="mouth",g.Neck="neck",g.Chest="chest",g.Waist="waist",g.Back="back",g.Arms="arms",g.RightArm="right-arm",g.LeftArm="left-arm",g.Wrist="wrist",g.Hands="hands",g.RightHand="right-hand",g.LeftHand="left-hand",g.Legs="legs",g.RightLeg="right-leg",g.LeftLeg="left-leg",g.Feet="feet",g.RightFoot="right-foot",g.LeftFoot="left-foot",g.Finger="finger",Qn;var g})();const _i={id:"1",name:"Raven's Cloak",model:"Raven's Cloak",producer:"Shop5363155 Store",owner:"Metam",description:"Microfiber hooded cloak with fleece lining",kind:yi.R.Equipment,previewUrl:"https://i.imgur.com/ukcsu1q.png",url:"https://es.aliexpress.com/item/1005001952208453.html",currentValue:{usd:"23.62",eth:"0.0070218623"},purchaseValue:{usd:"23.62",eth:"0.0070218623"},purchaseDate:(new Date).toISOString(),digital:!1,private:!0,data:{allowedSlots:[Qn.Back],colors:["#ff0000","#00ff00","#0000ff"],isEquipped:!1}},cn={id:"2",name:"Foundation's Coat",model:"Foundation's Coat",producer:"Shop1948549 Store",owner:"Metam",description:"Hooded coat with thick fleece lining",kind:yi.R.Equipment,previewUrl:"https://i.imgur.com/w1XmjIj.png",url:"https://es.aliexpress.com/item/1005003209038453.html",currentValue:{usd:"43.9",eth:"0.01305079404"},purchaseValue:{usd:"43.9",eth:"0.01305079404"},purchaseDate:(new Date).toISOString(),digital:!1,private:!0,data:{allowedSlots:[Qn.Chest],colors:["#ff0000","#00ff00","#0000ff"],isEquipped:!1}},ko=((new Date).toISOString(),{provide:tn.To,useValue:{name:"userassets",upsert:!0,data:[_i,cn]},multi:!0});var Fe=l(120);const Fs={provide:tn.To,useValue:{name:"useravatars",upsert:!0,data:[{id:"1",welcomeMessage:"Hello!",name:"Thomas Anderson",title:"Software Engineer",selectedAppearance:{id:"2",filename:"appearance.glb",format:Fe.g.Model,src:"assets/avatars/samples/thomas-anderson/default/appearance.glb",portrait:{id:"5a6ecf92-141f-46ca-aa9f-b67c009a5df1",filename:"portrait.png",format:Fe.g.Image,src:"assets/avatars/samples/thomas-anderson/default/portrait.png"}},appearances:[{id:"1",filename:"appearance.glb",format:Fe.g.Model,src:"assets/avatars/samples/thomas-anderson/neo/appearance.glb",portrait:{id:"690798c7-9bf0-45ce-b76a-7982ee119322",filename:"portrait.png",format:Fe.g.Image,src:"assets/avatars/samples/thomas-anderson/neo/portrait.png"},previewCamera:{position:"0 1.5 0.7",rotation:"-5 0 0",scale:"0.4 0.4 0.4"}},{id:"2",filename:"50f2bc3a-fe0c-4036-8546-15a2bc63c1cf",format:Fe.g.Model,src:"assets/avatars/samples/thomas-anderson/default/appearance.glb",portrait:{id:"5a6ecf92-141f-46ca-aa9f-b67c009a5df1",filename:"portrait.png",format:Fe.g.Image,src:"assets/avatars/samples/thomas-anderson/default/portrait.png"},previewCamera:{position:"0 1.5 0.7",rotation:"-5 0 0",scale:"1 1 1"}}],scopes:[{integration:"CF",domain:"Calendars",scope:"manage"},{integration:"Google",domain:"Calendars",scope:"manage"},{integration:"NFT",domain:"Tokens",scope:"manage"}],skills:[{domain:"calendar",scope:"manage",skill:"create"},{domain:"event",scope:"manage",skill:"create"},{domain:"assets",scope:"manage",skill:"trade"}]},{id:"2",welcomeMessage:"Hello!",name:"Elliot Alderson",title:"Software Engineer",selectedAppearance:{id:"1",filename:"appearance.glb",format:Fe.g.Model,src:"assets/avatars/samples/elliot-alderson/default/appearance.glb",portrait:{id:"74f583ff-8c6d-4433-9aa4-4d4a7903dac4",filename:"portrait.png",format:Fe.g.Image,src:"assets/avatars/samples/elliot-alderson/default/portrait.png"}},appearances:[{id:"1",filename:"appearance.glb",format:Fe.g.Model,src:"assets/avatars/samples/elliot-alderson/default/appearance.glb",portrait:{id:"4d84c56a-f62b-4df1-a566-a5124cf4f75a",filename:"portrait.png",format:Fe.g.Image,src:"assets/avatars/samples/elliot-alderson/default/portrait.png"}}],scopes:[],skills:[]},{id:"3",welcomeMessage:"Hello!",name:"Alan Turing",title:"Software Engineer",selectedAppearance:{id:"3",format:Fe.g.Model,src:"assets/avatars/samples/alan-turing/default/appearance.glb",filename:"appearance.glb",portrait:{id:"8eccca39-ba05-4cf5-a106-3dffd9f563b0",filename:"portrait.png",format:Fe.g.Image,src:"assets/avatars/samples/alan-turing/default/portrait.png"}},appearances:[{id:"3",filename:"appearance.glb",format:Fe.g.Model,src:"assets/avatars/samples/alan-turing/default/appearance.glb",portrait:{id:"ab321f41-8a46-42b4-9e42-29f95042d734",filename:"portrait.png",format:Fe.g.Image,src:"assets/avatars/samples/alan-turing/default/portrait.png"}}],scopes:[],skills:[]}]},multi:!0};var jr=l(3905);let nn=(()=>{class g{static forRoot({enabled:s=!1,autologin:p=!1}){const k=[];return s&&(k.push(Fs),k.push(ko)),p&&k.push({provide:a.APP_INITIALIZER,useFactory:K=>()=>(0,jr.z)(K.setupDatabase("test","test1234")),deps:[tn.v2],multi:!0}),{ngModule:g,providers:k}}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({}),g})();var wn=l(428),Na=l(3900),yr=l(8505);const Lo=new a.InjectionToken("ON_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/select-avatar"});let Wn=(()=>{class g{constructor(s,p,k){this.entityManager=s,this.router=p,this.failureRedirectTo=k}canActivate(){return this.entityManager.getRepository("userpreferences","com.central-factory.user-avatars").pipe((0,Na.w)(s=>s.findOne({selector:{id:"userAvatars.selectedAvatar"}})),(0,I.U)(s=>!(!s||!s.value)),(0,yr.b)(s=>{s||this.router.navigate([this.failureRedirectTo])}))}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(tn.v2),a.\u0275\u0275inject(wn.Router),a.\u0275\u0275inject(Lo))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const Bo=new a.InjectionToken("ON_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/login"});let _r=(()=>{class g{constructor(s,p,k){this.entityManager=s,this.router=p,this.failureRedirectTo=k}canActivate(){const s=this.entityManager.isDatabaseCreated();return s||this.router.navigate([this.failureRedirectTo]),s}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(tn.v2),a.\u0275\u0275inject(wn.Router),a.\u0275\u0275inject(Bo))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const Ji=new a.InjectionToken("ON_NOT_DATABASE_CREATED_GUARD_FAILURE_REDIRECT_TOKEN",{providedIn:"root",factory:()=>"/"});let Ei=(()=>{class g{constructor(s,p,k){this.entityManager=s,this.router=p,this.failureRedirectTo=k}canActivate(){const s=this.entityManager.isDatabaseCreated();return s&&this.router.navigate([this.failureRedirectTo]),!s}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(tn.v2),a.\u0275\u0275inject(wn.Router),a.\u0275\u0275inject(Ji))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var Fo=l(6961),Ns=l(4918),No=l(7165);(0,x.oQ)([(0,x.oB)({transform:"translate3d(0, 0, 0)"}),(0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"translate3d(0, 0, 0)",offset:.2}),(0,x.oB)({transform:"translate3d(0, -30px, 0)",offset:.4}),(0,x.oB)({transform:"translate3d(0, 0, 0)",offset:.53}),(0,x.oB)({transform:"translate3d(0, -15px, 0)",offset:.7}),(0,x.oB)({transform:"translate3d(0, -4px, 0)",offset:.9}),(0,x.oB)({transform:"translate3d(0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:1}),(0,x.oB)({opacity:0}),(0,x.oB)({opacity:1}),(0,x.oB)({opacity:0}),(0,x.oB)({opacity:1})])),{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"scale3d(1, 1, 1)"}),(0,x.oB)({transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})"}),(0,x.oB)({transform:"scale3d(1, 1, 1)"})])),{params:{scale:1.25,timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"scale3d(1, 1, 1)",offset:0}),(0,x.oB)({transform:"scale3d(1.25, 0.75, 1)",offset:.3}),(0,x.oB)({transform:"scale3d(0.75, 1.25, 1)",offset:.4}),(0,x.oB)({transform:"scale3d(1.15, 0.85, 1)",offset:.5}),(0,x.oB)({transform:"scale3d(.95, 1.05, 1)",offset:.65}),(0,x.oB)({transform:"scale3d(1.05, .95, 1)",offset:.75}),(0,x.oB)({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"translate3d(0, 0, 0)",offset:0}),(0,x.oB)({transform:"translate3d(-10px, 0, 0)",offset:.1}),(0,x.oB)({transform:"translate3d(10px, 0, 0)",offset:.2}),(0,x.oB)({transform:"translate3d(-10px, 0, 0)",offset:.3}),(0,x.oB)({transform:"translate3d(10px, 0, 0)",offset:.4}),(0,x.oB)({transform:"translate3d(-10px, 0, 0)",offset:.5}),(0,x.oB)({transform:"translate3d(10px, 0, 0)",offset:.6}),(0,x.oB)({transform:"translate3d(-10px, 0, 0)",offset:.7}),(0,x.oB)({transform:"translate3d(10px, 0, 0)",offset:.8}),(0,x.oB)({transform:"translate3d(-10px, 0, 0)",offset:.9}),(0,x.oB)({transform:"translate3d(0, 0, 0)",offset:1})])),{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"rotate3d(0, 0, 1, 15deg)",offset:.2}),(0,x.oB)({transform:"rotate3d(0, 0, 1, -10deg)",offset:.4}),(0,x.oB)({transform:"rotate3d(0, 0, 1, 5deg)",offset:.6}),(0,x.oB)({transform:"rotate3d(0, 0, 1, -5deg)",offset:.8}),(0,x.oB)({transform:"rotate3d(0, 0, 1, 0deg)",offset:1})])),{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"scale3d(1, 1, 1)",offset:0}),(0,x.oB)({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.1}),(0,x.oB)({transform:"scale3d(.9, .9, .9) rotate3d(0, 0, 1, -3deg)",offset:.2}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.3}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.4}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.5}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.6}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.7}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg)",offset:.8}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg)",offset:.9}),(0,x.oB)({transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"none",offset:0}),(0,x.oB)({transform:"translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg)",offset:.15}),(0,x.oB)({transform:"translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg)",offset:.3}),(0,x.oB)({transform:"translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg)",offset:.45}),(0,x.oB)({transform:"translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg)",offset:.6}),(0,x.oB)({transform:"translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg)",offset:.75}),(0,x.oB)({transform:"none",offset:1})])),{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"none",offset:0}),(0,x.oB)({transform:"none",offset:.11}),(0,x.oB)({transform:"skewX(-12.5deg) skewY(-12.5deg)",offset:.22}),(0,x.oB)({transform:"skewX(6.25deg) skewY(6.25deg)",offset:.33}),(0,x.oB)({transform:"skewX(-3.125deg) skewY(-3.125deg)",offset:.44}),(0,x.oB)({transform:"skewX(1.5625deg) skewY(1.5625deg)",offset:.55}),(0,x.oB)({transform:"skewX(-0.78125deg) skewY(-0.78125deg)",offset:.66}),(0,x.oB)({transform:"skewX(0.390625deg) skewY(0.390625deg)",offset:.77}),(0,x.oB)({transform:"skewX(-0.1953125deg) skewY(-0.1953125deg)",offset:.88}),(0,x.oB)({transform:"none",offset:1})])),{params:{timing:1,delay:0}});const We=(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,x.F4)([(0,x.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),(0,x.oB)({transform:"scale3d(1.1, 1.1, 1.1)",offset:.2}),(0,x.oB)({transform:"scale3d(.9, .9, .9)",offset:.4}),(0,x.oB)({opacity:1,transform:"scale3d(1.03, 1.03, 1.03)",offset:.6}),(0,x.oB)({transform:"scale3d(.97, .97, .97)",offset:.8}),(0,x.oB)({opacity:1,transform:"scale3d(1, 1, 1)",offset:1})])),{params:{timing:1,delay:0}});function et(g,u,s,p){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,x.F4)([(0,x.oB)({opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,x.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.6}),(0,x.oB)({transform:"translate3d(0, {{ c }}, 0)",offset:.75}),(0,x.oB)({transform:"translate3d(0, {{ d }}, 0)",offset:.9}),(0,x.oB)({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:g,b:u,c:s,d:p}})}function _t(g,u,s,p){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.215, 0.610, 0.355, 1.000)",(0,x.F4)([(0,x.oB)({opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,x.oB)({opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:.6}),(0,x.oB)({transform:"translate3d({{ c }}, 0, 0)",offset:.75}),(0,x.oB)({transform:"translate3d({{ d }}, 0, 0)",offset:.9}),(0,x.oB)({opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,a:g,b:u,c:s,d:p}})}function fn(g,u,s,p){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"translate3d(0, {{ a }}, 0)",offset:.2}),(0,x.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:.4}),(0,x.oB)({opacity:1,transform:"translate3d(0, {{ c }}, 0)",offset:.45}),(0,x.oB)({opacity:0,transform:"translate3d(0, {{ d }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u,c:s,d:p}})}function Us(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:1,transform:"translate3d({{ a }}, 0, 0)",offset:.2}),(0,x.oB)({opacity:0,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}function zo(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:0,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,x.oB)({opacity:1,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}function ja(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:0,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,x.oB)({opacity:1,transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}et("-3000px","25px","-10px","5px"),et("3000px","-25px","10px","-5px"),_t("-3000px","25px","-10px","5px"),_t("3000px","-25px","10px","-5px"),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"scale3d(.9, .9, .9)",offset:.2}),(0,x.oB)({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.5}),(0,x.oB)({opacity:1,transform:"scale3d({{ scale }}, {{ scale }}, {{ scale }})",offset:.55}),(0,x.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:1})])),{params:{timing:1,delay:0,scale:1.1}}),fn("10px","-20px","-20px","2000px"),fn("-10px","20px","20px","-2000px"),Us("20px","-2000px"),Us("-20px","2000px"),zo(0,0),ja("-100%",0);const Ru=ja("100%",0);function Wo(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:1,transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,x.oB)({opacity:0,transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}function Ua(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:1,transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,x.oB)({opacity:0,transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}function mn(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"translate3d({{ a }}, 0, 0)",offset:0}),(0,x.oB)({transform:"translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}function wi(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"translate3d(0, {{ a }}, 0)",offset:0}),(0,x.oB)({transform:"translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}function ur(g,u){return(0,x.oQ)([(0,x.oB)({"backface-visibility":"visible"}),(0,x.jt)("{{ timing }}s {{ delay }}s ease-in",(0,x.F4)([(0,x.oB)({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:0}),(0,x.oB)({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.4}),(0,x.oB)({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 10deg)",offset:.6}),(0,x.oB)({transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -5deg)",offset:.8}),(0,x.oB)({transform:"perspective(400px) rotate3d(0, 0, 0, 0)",offset:1})]))],{params:{timing:1,delay:0,rotateX:g,rotateY:u}})}function Wa(g,u){return(0,x.oQ)([(0,x.oB)({"backface-visibility":"visible"}),(0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({transform:"perspective(400px)",offset:0}),(0,x.oB)({opacity:1,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, -20deg)",offset:.3}),(0,x.oB)({opacity:0,transform:"perspective(400px) rotate3d({{ rotateX }}, {{ rotateY }}, 0, 90deg)",offset:1})]))],{params:{timing:1,delay:0,rotateX:g,rotateY:u}})}function Ws(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({"transform-origin":"{{ origin }}",opacity:0,transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:0}),(0,x.oB)({"transform-origin":"{{ origin }}",opacity:1,transform:"none",offset:1})])),{params:{timing:1,delay:0,origin:g,degrees:u}})}function In(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({"transform-origin":"{{ origin }}",opacity:1,transform:"none",offset:0}),(0,x.oB)({"transform-origin":"{{ origin }}",opacity:0,transform:"rotate3d(0, 0, 1, {{ degrees }})",offset:1})])),{params:{timing:1,delay:0,origin:g,degrees:u}})}function es(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,x.F4)([(0,x.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ a }}, 0)",offset:0}),(0,x.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ b }}, 0)",offset:.6})])),{params:{timing:1,delay:0,a:g,b:u}})}function Va(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,x.F4)([(0,x.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ a }}, 0, 0)",offset:0}),(0,x.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ b }}, 0, 0)",offset:.6})])),{params:{timing:1,delay:0,a:g,b:u}})}function Gs(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,x.F4)([(0,x.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d(0, {{ a }}, 0)",offset:.4}),(0,x.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d(0, {{ b }}, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}function Qs(g,u){return(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s cubic-bezier(0.550, 0.055, 0.675, 0.190)",(0,x.F4)([(0,x.oB)({opacity:1,transform:"scale3d(.475, .475, .475) translate3d({{ a }}, 0, 0)",offset:.4}),(0,x.oB)({opacity:0,transform:"scale3d(.1, .1, .1) translate3d({{ b }}, 0, 0)",offset:1})])),{params:{timing:1,delay:0,a:g,b:u}})}zo("-100%",0),zo("100%",0),Wo(0,0),Ua("-100%",0),Ua("100%",0),Wo("-100%",0),Wo("100%",0),wi("-100%",0),wi("100%",0),mn("-100%",0),mn("100%",0),wi(0,"-100%"),wi(0,"100%"),mn(0,"-100%"),mn(0,"100%"),(0,x.oQ)([(0,x.oB)({"backface-visibility":"visible"}),(0,x.jt)("{{ timing }}s {{ delay }}s ease-out",(0,x.F4)([(0,x.oB)({transform:"perspective(400px) rotate3d(0, 1, 0, -360deg)",offset:0}),(0,x.oB)({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -190deg)",offset:.4}),(0,x.oB)({transform:"perspective(400px) scale3d(1.5, 1.5, 1.5) rotate3d(0, 1, 0, -170deg)",offset:.5}),(0,x.oB)({transform:"perspective(400px) scale3d(.95, .95, .95)",offset:.8}),(0,x.oB)({transform:"perspective(400px)",offset:1})]))],{params:{timing:1,delay:0}}),ur(1,0),ur(0,1),Wa(1,0),Wa(0,1),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:0,transform:"translate3d(100%, 0, 0) skewX(-30deg)",offset:0}),(0,x.oB)({opacity:1,transform:"translate3d(0, 0, 0) skewX(0)",offset:1})])),{params:{timing:1,delay:0}}),(0,x.oQ)((0,x.jt)("{{ timing }}s {{ delay }}s ease-out",(0,x.F4)([(0,x.oB)({opacity:1,offset:0}),(0,x.oB)({opacity:0,transform:"translate3d(100%, 0, 0) skewX(30deg)",offset:1})])),{params:{timing:1,delay:0}}),Ws("center","-200deg"),Ws("left bottom","-45deg"),Ws("right bottom","45deg"),Ws("left bottom","45deg"),Ws("right bottom","-90deg"),In("center","200deg"),In("left bottom","45deg"),In("right bottom","-45deg"),In("left bottom","-45deg"),In("right bottom","90deg"),(0,x.oQ)([(0,x.oB)({"transform-origin":"top left"}),(0,x.jt)("{{ timing }}s {{ delay }}s ease-in-out",(0,x.F4)([(0,x.oB)({transform:"rotate3d(0, 0, 1, 80deg)",offset:.2}),(0,x.oB)({transform:"rotate3d(0, 0, 1, 60deg)",offset:.4}),(0,x.oB)({transform:"rotate3d(0, 0, 1, 80deg)",offset:.6}),(0,x.oB)({opacity:1,transform:"rotate3d(0, 0, 1, 60deg)",offset:.8}),(0,x.oB)({opacity:0,transform:"translate3d(0, 700px, 0)",offset:1})]))],{params:{timing:1,delay:0}}),(0,x.oQ)([(0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:0,transform:"scale(0.1) rotate(30deg)","transform-origin":"center bottom",offset:0}),(0,x.oB)({opacity:.5,transform:"rotate(-10deg)",offset:.5}),(0,x.oB)({opacity:.7,transform:"rotate(3deg)",offset:.7}),(0,x.oB)({opacity:1,transform:"scale(1)",offset:1})]))],{params:{timing:1,delay:0}}),(0,x.oQ)([(0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:0,transform:"translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg)",offset:0}),(0,x.oB)({opacity:1,transform:"none",offset:1})]))],{params:{timing:1,delay:0}}),(0,x.oQ)([(0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:1,offset:0}),(0,x.oB)({opacity:0,transform:"translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg)",offset:1})]))],{params:{timing:1,delay:0}}),(0,x.oQ)([(0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:0}),(0,x.oB)({opacity:1,transform:"scale3d(1, 1, 1)",offset:.5})]))],{params:{timing:1,delay:0}}),es("-1000px","10px"),es("1000px","-10px"),Va("-1000px","10px"),Va("1000px","-10px"),(0,x.oQ)([(0,x.jt)("{{ timing }}s {{ delay }}s",(0,x.F4)([(0,x.oB)({opacity:1,offset:0}),(0,x.oB)({opacity:0,transform:"scale3d(.3, .3, .3)",offset:.5}),(0,x.oB)({opacity:0,offset:1})]))],{params:{timing:1,delay:0}}),Gs("-60px","2000px"),Gs("60px","-2000px"),Qs("42px","-2000px"),Qs("-42px","2000px");var Za=l(4128),Ya=l(1884),Zs=l(1623),ts=l(7967),Ko=l(3454),Uu=l(5183),zu=l(6111),$u=l(405),Ho=l(4691),Vo=l(9750),Wu=l(5605);let Ku=(()=>{class g{constructor(){this.title="CF Portal",this.titleClick=new a.EventEmitter}onTitleClick(){this.titleClick.emit()}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["cf-navbar"]],inputs:{environment:"environment",title:"title"},outputs:{titleClick:"titleClick"},decls:24,vars:10,consts:[["cfBlock","navbar"],["cfBlock","navbar-section","cfMod","left"],["cfElem","title",3,"click"],["cfElem","icon","src","assets/logo.svg",3,"svgClass"],["cfElem","text"],["cfBlock","navbar-section","cfMod","right"],["cfBlock","list","cfMod","horizontal"],["cfElem","item"],["src","assets/icons/mdi/web.svg","cfElem","icon",3,"svgClass"],["cfElem","link",3,"href"],["src","assets/icons/mdi/text-box-search-outline.svg","cfElem","icon",3,"svgClass"],["src","assets/icons/mdi/post-outline.svg","cfElem","icon",3,"svgClass"],["src","assets/icons/mdi/code-tags.svg","cfElem","icon",3,"svgClass"]],template:function(s,p){1&s&&(a.\u0275\u0275elementStart(0,"div",0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"h1",2),a.\u0275\u0275listener("click",function(){return p.onTitleClick()}),a.\u0275\u0275element(3,"cf-svg-icon",3),a.\u0275\u0275elementStart(4,"span",4),a.\u0275\u0275text(5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(6,"div",5),a.\u0275\u0275elementStart(7,"ul",6),a.\u0275\u0275elementStart(8,"li",7),a.\u0275\u0275element(9,"cf-svg-icon",8),a.\u0275\u0275elementStart(10,"a",9),a.\u0275\u0275text(11,"Website"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"li",7),a.\u0275\u0275element(13,"cf-svg-icon",10),a.\u0275\u0275elementStart(14,"a",9),a.\u0275\u0275text(15,"Documentation"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"li",7),a.\u0275\u0275element(17,"cf-svg-icon",11),a.\u0275\u0275elementStart(18,"a",9),a.\u0275\u0275text(19,"Blog"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(20,"li",7),a.\u0275\u0275element(21,"cf-svg-icon",12),a.\u0275\u0275elementStart(22,"a",9),a.\u0275\u0275text(23," Developers "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&s&&(a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(p.title),a.\u0275\u0275advance(4),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==p.environment?null:p.environment.webUrl,a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==p.environment?null:p.environment.documentationUrl,a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==p.environment?null:p.environment.blogUrl,a.\u0275\u0275sanitizeUrl),a.\u0275\u0275advance(3),a.\u0275\u0275property("svgClass","icon__svg"),a.\u0275\u0275advance(1),a.\u0275\u0275property("href",null==p.environment?null:p.environment.developersUrl,a.\u0275\u0275sanitizeUrl))},directives:[Zs.G,ts.I,Ko.e,Vo.b],encapsulation:2}),g})();const Hu=function(g){return{"button--active":g}};function al(g,u){if(1&g){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"a",19),a.\u0275\u0275listener("click",function(){const K=a.\u0275\u0275restoreView(s).$implicit;return a.\u0275\u0275nextContext(3).onSidebarItemClick(K)}),a.\u0275\u0275elementStart(2,"div",9),a.\u0275\u0275elementStart(3,"span",10),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"button",20),a.\u0275\u0275element(6,"cf-svg-icon",21),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()}if(2&g){const s=u.$implicit;a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(s.name),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngClass",a.\u0275\u0275pureFunction1(4,Hu,s.active)),a.\u0275\u0275advance(1),a.\u0275\u0275property("src",s.icon)("svgClass","icon__svg")}}const Vu=function(g){return{"background-color":g,"margin-top":"15px"}};function Gu(g,u){if(1&g){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",22),a.\u0275\u0275elementStart(1,"div",22),a.\u0275\u0275elementStart(2,"div",9),a.\u0275\u0275elementStart(3,"span",10),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(5,"button",23),a.\u0275\u0275listener("click",function(){const K=a.\u0275\u0275restoreView(s).$implicit;return a.\u0275\u0275nextContext(3).onRecentlyOpenedItemClick(K)}),a.\u0275\u0275element(6,"cf-svg-icon",21),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&g){const s=u.$implicit;a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(s.name),a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkDragData",s.application)("ngClass",a.\u0275\u0275pureFunction1(6,Hu,s.active))("ngStyle",a.\u0275\u0275pureFunction1(8,Vu,s.color)),a.\u0275\u0275advance(1),a.\u0275\u0275property("src",s.icon)("svgClass","icon__svg")}}const Ja=function(){return[]};function ul(g,u){if(1&g){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",24),a.\u0275\u0275elementStart(1,"cf-splash-screen",25),a.\u0275\u0275listener("splashScreenHide",function(){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext(3).showSplashScreen=!1}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&g){const s=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275propertyInterpolate1("welcomeMessage","Welcome to ",null==s.openedSidebarItem?null:s.openedSidebarItem.name,""),a.\u0275\u0275property("mods","in-scene")("displayLoadingTime",2e3)("displayWelcomeTime",1e3)("title",(null==s.openedSidebarItem?null:s.openedSidebarItem.name)||"")("logo",(null==s.openedSidebarItem?null:s.openedSidebarItem.icon)||"")("backgroundColor",(null==s.openedSidebarItem?null:s.openedSidebarItem.color)||"")("loadingTexts",(null==s.openedSidebarItem||null==s.openedSidebarItem.application||null==s.openedSidebarItem.application.description?null:s.openedSidebarItem.application.description.split("."))||a.\u0275\u0275pureFunction0(8,Ja))}}const Qu=function(){return["/select-avatar"]},cl=function(){return["applications-carousel"]},Xa=function(g){return{"padding-left":g}},ll=function(g){return{"scene__content--splash-screen":g}};function fl(g,u){if(1&g){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cf-sidebar-container"),a.\u0275\u0275elementStart(1,"cf-sidebar",6),a.\u0275\u0275listener("openedChange",function(k){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext(2).sidebarIsOpen=k}),a.\u0275\u0275elementStart(2,"div",7),a.\u0275\u0275elementStart(3,"a",8),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext(2).onSidebarItemClick({name:"Select Avatar",routerLink:["/select-avatar"],icon:"assets/icons/mdi/account-switch.svg",application:{id:"com.central-factory.user-avatars",name:"User Avatars",description:"Select an avatar",startUrl:"/select-avatar"},active:!1})}),a.\u0275\u0275elementStart(4,"div",9),a.\u0275\u0275elementStart(5,"span",10),a.\u0275\u0275text(6,"Account"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(7,"cf-avatar-appearance-portrait",11),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(8,al,7,6,"ng-container",12),a.\u0275\u0275elementStart(9,"div",13),a.\u0275\u0275template(10,Gu,7,10,"div",14),a.\u0275\u0275elementEnd(),a.\u0275\u0275element(11,"router-outlet",15),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"div",16),a.\u0275\u0275elementStart(13,"div",17),a.\u0275\u0275template(14,ul,2,9,"div",18),a.\u0275\u0275element(15,"router-outlet"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&g){const s=a.\u0275\u0275nextContext().ngIf,p=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275property("opened",p.sidebarIsOpen)("dock",p.dockedSidebar)("dockedSize","100px")("showBackdrop",!0)("closeOnClickBackdrop",!0)("closeOnClickOutside",!0),a.\u0275\u0275advance(2),a.\u0275\u0275property("routerLink",a.\u0275\u0275pureFunction0(16,Qu)),a.\u0275\u0275advance(4),a.\u0275\u0275property("appearancePortrait",null==s.selectedAvatar.selectedAppearance?null:s.selectedAvatar.selectedAppearance.portrait),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",p.sidebarItems),a.\u0275\u0275advance(1),a.\u0275\u0275property("cdkDropListData",p.recentlyOpenedSidebarItems)("cdkDropListConnectedTo",a.\u0275\u0275pureFunction0(17,cl)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",p.recentlyOpenedSidebarItems),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(18,Xa,p.dockedSidebar?"0":"1rem"))("ngClass",a.\u0275\u0275pureFunction1(20,ll,p.showSplashScreen))("@sceneContentAnimationState",p.sceneContentAnimationState),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",p.showSplashScreen)}}function dl(g,u){if(1&g&&(a.\u0275\u0275elementStart(0,"div",26),a.\u0275\u0275elementStart(1,"div",27),a.\u0275\u0275element(2,"router-outlet"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&g){const s=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngStyle",a.\u0275\u0275pureFunction1(1,Xa,s.dockedSidebar?"0":"1rem"))}}function hl(g,u){if(1&g){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"cf-navbar",28),a.\u0275\u0275listener("titleClick",function(){a.\u0275\u0275restoreView(s);const k=a.\u0275\u0275nextContext(2);return k.sidebarIsOpen=!k.sidebarIsOpen}),a.\u0275\u0275elementEnd()}if(2&g){const s=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("title",s.title)}}const pl=function(g){return{"no-navbar":g}};function ml(g,u){if(1&g&&(a.\u0275\u0275elementContainerStart(0),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275template(3,fl,16,22,"cf-sidebar-container",3),a.\u0275\u0275template(4,dl,3,3,"ng-template",null,4,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,hl,1,1,"cf-navbar",5),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd()),2&g){const s=u.ngIf,p=a.\u0275\u0275reference(5),k=a.\u0275\u0275nextContext();a.\u0275\u0275advance(2),a.\u0275\u0275property("cfMod",a.\u0275\u0275pureFunction1(4,pl,!k.showNavbar)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",s.selectedAvatar)("ngIfElse",p),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",k.showNavbar)}}const qa=function(g){return{selectedAvatar:g}};var vn=(()=>{return(g=vn||(vn={})).Idle="Idle",g.Opened="Opened",g.Animated="Animated",vn;var g})();const gl=[{path:"",component:(()=>{class g{constructor(s,p,k,K,ee,re,he){this.router=s,this.entityManager=p,this.selectedAvatarState=k,this.selectedApplicationState=K,this.recentlyOpenedApplicationsState=ee,this.customizationSettingsState=re,this.breakpointObserver=he,this.title="Metaverse Portal",this.sidebarIsOpen=!1,this.sidebarItems=[],this.recentlyOpenedSidebarItems=[],this.dockedSidebar=!0,this.showSplashScreen=!1,this.showNavbar=!1,this.sceneContentAnimationState=vn.Idle,this.selectedAvatar$=this.selectedAvatarState.avatar$,this.recentlyOpenedApplications$=this.recentlyOpenedApplicationsState.applications$.pipe((0,I.U)(Pe=>Pe.reverse()),(0,I.U)(Pe=>this.generateSidebarItems(Pe))),this.destroy$=new M.x}ngOnInit(){this.breakpointObserver.observe(["(min-width: 600px)"]).subscribe(s=>{this.dockedSidebar=!!s.matches}),this.customizationSettingsState.customizationSettings$.pipe((0,I.U)(s=>s?.theme),(0,S.h)(s=>void 0!==s),(0,Ya.x)((s,p)=>s?.path===p?.path),w(1),(0,yr.b)(s=>{this.sceneContentAnimationState=vn.Idle,setTimeout(()=>this.sceneContentAnimationState=vn.Animated,100)}),(0,R.R)(this.destroy$)).subscribe(),this.recentlyOpenedApplications$.pipe((0,R.R)(this.destroy$),(0,yr.b)(s=>this.recentlyOpenedSidebarItems=s)).subscribe(),this.router.events.pipe((0,S.h)(s=>s instanceof wn.NavigationEnd),(0,R.R)(this.destroy$)).subscribe(()=>{this.setSidebarItemsActive(this.sidebarItems)}),this.entityManager.initialize$.pipe((0,Na.w)(()=>(0,Za.D)([this.entityManager.getRepository("userapplications","com.central-factory.portal")])),(0,yr.b)(([s])=>this.subscribeToDataChanges(s))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onRecentlyOpenedItemClick(s){this.sceneContentAnimationState=vn.Idle,setTimeout(()=>{this.sceneContentAnimationState=vn.Opened,s.application&&(this.selectedApplicationState.selectApplication(s.application),this.selectedApplicationState.openSidebar())},100)}onSidebarItemClick(s){this.sceneContentAnimationState=vn.Idle,setTimeout(()=>{this.sceneContentAnimationState=vn.Opened,this.showSplashScreen=!0,this.openedSidebarItem=s,s.routerLink&&this.router.navigate(s.routerLink)},100)}subscribeToDataChanges(s){s.find({selector:{"additionalProperties.sidebarShortcuts":{$exists:!0}}}).pipe((0,yr.b)(p=>{this.sidebarItems=this.generateSidebarItems(p)}),(0,R.R)(this.destroy$)).subscribe()}generateSidebarItems(s){const p=s.sort((k,K)=>k.createdAt.localeCompare(K.createdAt)).reduce((k,K)=>{const he=K.shortcuts||[],ze=(K.additionalProperties?.sidebarShortcuts||[]).map(He=>he.find(ct=>ct.name===He)).filter(He=>!!He).map(He=>({name:He.name,routerLink:[He.url],icon:He.icons&&He.icons.length>0?He.icons[0].src:"",color:K.additionalProperties?.colors?.find(ct=>"primary"===ct.variation)?.color||(!0===K.additionalProperties?.internal?"var(--color-base-primary-medium)":void 0),active:!1,application:K}));return k.concat(ze)},[]);return this.setSidebarItemsActive(p),p}setSidebarItemsActive(s){s.forEach(p=>{p.active=this.router.url.startsWith(p.routerLink.join("/"))})}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275directiveInject(wn.Router),a.\u0275\u0275directiveInject(tn.v2),a.\u0275\u0275directiveInject(No.Y),a.\u0275\u0275directiveInject(Ns.H),a.\u0275\u0275directiveInject(Fo.r),a.\u0275\u0275directiveInject(ir.T),a.\u0275\u0275directiveInject($))},g.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["cf-portal-layout"]],decls:2,vars:5,consts:[[4,"ngIf"],["cfBlock","scene","cfMod","layout"],["cfElem","body",3,"cfMod"],[4,"ngIf","ngIfElse"],["notSelectedAvatarLayout",""],["cfElem","navbar",3,"title","titleClick",4,"ngIf"],[3,"opened","dock","dockedSize","showBackdrop","closeOnClickBackdrop","closeOnClickOutside","openedChange"],[2,"margin-top","20px"],["cfBlock","sidebar-item",1,"d-block",3,"routerLink","click"],["cfElem","text"],["cfElem","text-content"],[3,"appearancePortrait"],[4,"ngFor","ngForOf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo"],["class","d-block","cfBlock","sidebar-item",4,"ngFor","ngForOf"],["name","sidebar"],["cf-sidebar-content",""],[1,"scene__content",3,"ngStyle","ngClass"],["cfBlock","scene-content","cfMod","splash-screen",4,"ngIf"],["cfBlock","sidebar-item",1,"d-block",3,"click"],["cfBlock","button","cfMod","fab",2,"margin-top","15px",3,"ngClass"],["cfElem","icon",3,"src","svgClass"],["cfBlock","sidebar-item",1,"d-block"],["cdkDrag","","cfBlock","button","cfMod","fab",3,"cdkDragData","ngClass","ngStyle","click"],["cfBlock","scene-content","cfMod","splash-screen"],[3,"mods","displayLoadingTime","displayWelcomeTime","title","logo","backgroundColor","welcomeMessage","loadingTexts","splashScreenHide"],[1,"scene__container"],[1,"scene__content",3,"ngStyle"],["cfElem","navbar",3,"title","titleClick"]],template:function(s,p){1&s&&(a.\u0275\u0275template(0,ml,7,6,"ng-container",0),a.\u0275\u0275pipe(1,"async")),2&s&&a.\u0275\u0275property("ngIf",a.\u0275\u0275pureFunction1(3,qa,a.\u0275\u0275pipeBind1(1,1,p.selectedAvatar$)))},directives:[zn.NgIf,Zs.G,ts.I,Ko.e,Uu.L,zu.k,wn.RouterLinkWithHref,$u.P,zn.NgForOf,Ho.Wj,wn.RouterOutlet,zn.NgStyle,zn.NgClass,Vo.b,Ho.Zt,Wu.wn,Ku],pipes:[zn.AsyncPipe],encapsulation:2,data:{animation:[(0,x.X$)("sceneContentAnimationState",[(0,x.eR)(`${vn.Idle} => ${vn.Animated}`,(0,x._7)(We)),(0,x.eR)(`${vn.Idle} => ${vn.Opened}`,(0,x._7)(Ru,{params:{timing:.5}}))])]}}),g})(),children:[{path:"login",loadChildren:()=>l.e(12).then(l.bind(l,12)).then(g=>g.LoginModule),canActivate:[Ei]},{path:"select-avatar",loadChildren:()=>l.e(700).then(l.bind(l,8700)).then(g=>g.SelectAvatarModule),canActivate:[_r]},{path:"create-avatar",loadChildren:()=>l.e(827).then(l.bind(l,3827)).then(g=>g.CreateAvatarModule),canActivate:[_r]},{path:"selected-avatar",loadChildren:()=>l.e(959).then(l.bind(l,1959)).then(g=>g.SelectedAvatarModule),canActivate:[_r,Wn]},{path:"start",loadChildren:()=>l.e(267).then(l.bind(l,5267)).then(g=>g.StartModule),canActivate:[_r,Wn]},{path:"portals",loadChildren:()=>l.e(350).then(l.bind(l,7350)).then(g=>g.PortalsModule),canActivate:[_r,Wn]},{path:"manage-applications",loadChildren:()=>l.e(835).then(l.bind(l,9835)).then(g=>g.ManageApplicationsModule),canActivate:[_r,Wn]},{path:"inventory",loadChildren:()=>l.e(740).then(l.bind(l,2740)).then(g=>g.InventoryModule),canActivate:[_r,Wn]},{path:"marketplace",loadChildren:()=>l.e(483).then(l.bind(l,6483)).then(g=>g.MarketplaceModule),canActivate:[_r,Wn]},{path:"settings",loadChildren:()=>l.e(672).then(l.bind(l,6672)).then(g=>g.SettingsModule),canActivate:[_r,Wn]},{path:"",redirectTo:"start",pathMatch:"full"}]}];let yl=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({imports:[[wn.RouterModule.forRoot(gl)],wn.RouterModule]}),g})();var tu=l(4968);const Jr=g=>"touchend"===g.type||"touchcancel"===g.type?g.changedTouches[0]:g.type.startsWith("touch")?g.targetTouches[0]:g,Go=g=>"touchstart"===g.type||"mousedown"===g.type&&0===g.button;let Ci=(()=>{class g{constructor(s){this.resizeBegin=new a.EventEmitter,this.resizing=new a.EventEmitter,this.resizeEnd=new a.EventEmitter,this.element=s.nativeElement}ngAfterViewInit(){this.south&&this.createHandle("resize-handle-s"),this.east&&this.createHandle("resize-handle-e"),this.southEast&&this.createHandle("resize-handle-se");const s=window.getComputedStyle(this.element);this.minWidth=parseFloat(s.minWidth),this.maxWidth=parseFloat(s.maxWidth),this.minHeight=parseFloat(s.minHeight),this.maxHeight=parseFloat(s.maxHeight)}ngOnDestroy(){this.destroySubscription()}onMousedown(s){if(!Go(s))return;const p=s.target.classList,k=p.contains("resize-handle-s"),K=p.contains("resize-handle-e"),ee=p.contains("resize-handle-se"),re=Jr(s),he=this.element.clientWidth,Pe=this.element.clientHeight,ze=re.screenX,He=re.screenY,ct=s.type.startsWith("touch"),At=ct?"touchmove":"mousemove",st=ct?"touchend":"mouseup";if(k||K||ee){this.initResize(s,k,K,ee);const ht=(0,tu.R)(document,st);this.subscription=ht.subscribe(Kt=>this.onMouseup(Kt));const Pt=(0,tu.R)(document,At).pipe((0,R.R)(ht)).subscribe(Kt=>this.move(Kt,he,Pe,ze,He));this.subscription.add(Pt)}}move(s,p,k,K,ee){const re=Jr(s),Pe=re.screenY-ee;this.newWidth=p+(re.screenX-K),this.newHeight=k+Pe,this.resizeWidth(re),this.resizeHeight(re)}onMouseup(s){this.endResize(s),this.destroySubscription()}destroySubscription(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)}createHandle(s){const p=document.createElement("span");p.className=s,this.element.appendChild(p)}initResize(s,p,k,K){p&&(this.resizingS=!0),k&&(this.resizingE=!0),K&&(this.resizingSE=!0),this.element.classList.add("resizing"),this.newWidth=this.element.clientWidth,this.newHeight=this.element.clientHeight,s.stopPropagation(),this.resizeBegin.emit()}endResize(s){this.resizingS=!1,this.resizingE=!1,this.resizingSE=!1,this.element.classList.remove("resizing"),this.resizeEnd.emit({event:Jr(s),width:this.newWidth,height:this.newHeight})}resizeWidth(s){(this.resizingSE||this.resizingE)&&(!this.minWidth||this.newWidth>=this.minWidth)&&(!this.maxWidth||this.newWidth<=this.maxWidth)&&(this.ghost||(this.element.style.width=`${this.newWidth}px`),this.resizing.emit({event:s,width:this.newWidth,height:this.newHeight,direction:"horizontal"}))}resizeHeight(s){(this.resizingSE||this.resizingS)&&(!this.minHeight||this.newHeight>=this.minHeight)&&(!this.maxHeight||this.newHeight<=this.maxHeight)&&(this.ghost||(this.element.style.height=`${this.newHeight}px`),this.resizing.emit({event:s,width:this.newWidth,height:this.newHeight,direction:"vertical"}))}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275directiveInject(a.ElementRef))},g.\u0275dir=a.\u0275\u0275defineDirective({type:g,selectors:[["","cfResizable",""]],hostBindings:function(s,p){1&s&&a.\u0275\u0275listener("mousedown",function(K){return p.onMousedown(K)})("touchstart",function(K){return p.onMousedown(K)})},inputs:{south:"south",east:"east",southEast:"southEast",ghost:"ghost"},outputs:{resizeBegin:"resizeBegin",resizing:"resizing",resizeEnd:"resizeEnd"}}),g})(),Qo=(()=>{class g{constructor(s,p){this.element=s,this.ngZone=p,this.dragX=!0,this.dragY=!0,this.dragStart=new a.EventEmitter,this.dragMove=new a.EventEmitter,this.dragEnd=new a.EventEmitter,this.isDragging=!1,this.globalListeners=new Map}ngOnChanges(s){s.dragEventTarget&&s.dragEventTarget.currentValue&&this.onMousedown(this.dragEventTarget)}ngOnDestroy(){this.removeEventListener()}onMousedown(s){if(Go(s)&&(this.dragX||this.dragY)){const p=Jr(s);this.initDrag(p.pageX,p.pageY),this.addEventListeners(s),this.dragStart.emit(s)}}onMousemove(s){const p=Jr(s);this.onDrag(p.pageX,p.pageY),this.dragMove.emit(s)}onMouseup(s){this.endDrag(),this.removeEventListener(),this.dragEnd.emit(s)}addEventListeners(s){const p=s.type.startsWith("touch"),K=p?"touchend":"mouseup";this.globalListeners.set(p?"touchmove":"mousemove",{handler:ee=>this.onMousemove(ee),options:!1}).set(K,{handler:ee=>this.onMouseup(ee),options:!1}),this.ngZone.runOutsideAngular(()=>{this.globalListeners.forEach((ee,re)=>{window.document.addEventListener(re,ee.handler,ee.options)})})}removeEventListener(){this.globalListeners.forEach((s,p)=>{window.document.removeEventListener(p,s.handler,s.options)})}initDrag(s,p){this.isDragging=!0,this.lastPageX=s,this.lastPageY=p,this.element.nativeElement.classList.add("dragging")}onDrag(s,p){if(this.isDragging){const k=s-this.lastPageX,K=p-this.lastPageY,ee=this.element.nativeElement.getBoundingClientRect();this.element.nativeElement.style.left=ee.left+k+"px",this.element.nativeElement.style.top=ee.top+K+"px",this.lastPageX=s,this.lastPageY=p}}endDrag(){this.isDragging=!1,this.element.nativeElement.classList.remove("dragging")}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275directiveInject(a.ElementRef),a.\u0275\u0275directiveInject(a.NgZone))},g.\u0275dir=a.\u0275\u0275defineDirective({type:g,selectors:[["","cfDraggable",""]],inputs:{dragEventTarget:"dragEventTarget",dragX:"dragX",dragY:"dragY"},outputs:{dragStart:"dragStart",dragMove:"dragMove",dragEnd:"dragEnd"},features:[a.\u0275\u0275NgOnChangesFeature]}),g})();const bl=["modalRoot"],El=["modalBody"],Sl=["modalHeader"],nu=["modalFooter"],wl=["closeIcon"],Cl=function(){return["light","small","has-icon","only-icon","rounded"]};function Al(g,u){if(1&g){const s=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",6),a.\u0275\u0275listener("click",function(k){return a.\u0275\u0275restoreView(s),a.\u0275\u0275nextContext().toggleMaximize(k)}),a.\u0275\u0275element(1,"cf-svg-icon",15),a.\u0275\u0275elementEnd()}if(2&g){const s=a.\u0275\u0275nextContext();a.\u0275\u0275property("cfMod",a.\u0275\u0275pureFunction0(2,Cl)),a.\u0275\u0275advance(1),a.\u0275\u0275property("src",s.maximized?"assets/icons/mdi/window-restore.svg":"assets/icons/mdi/window-maximize.svg")}}const Dl=[[["",8,"window-header__content"]],[["",8,"window-body__content"]],[["",8,"window-footer__content"]]],Pl=function(g){return{maximized:g}},Ol=function(){return["danger","small","has-icon","only-icon","rounded"]},Il=[".window-header__content",".window-body__content",".window-footer__content"];let Tl=(()=>{class g{constructor(s){this.element=s,this.scrollTopEnable=!0,this.maximizable=!1,this.backdrop=!0,this.openModal=new a.EventEmitter,this.closeModal=new a.EventEmitter,this.resizeModal=new a.EventEmitter,this.maximizeModal=new a.EventEmitter}ngAfterViewChecked(){this.executePostDisplayActions&&(this.center(),this.executePostDisplayActions=!1)}onKeyDown(s){s.preventDefault(),s.stopPropagation(),this.hide()}onWindowResize(){this.executePostDisplayActions=!0,this.center()}show(){this.executePostDisplayActions=!0,this.visible=!0,setTimeout(()=>{this.modalRoot.nativeElement.focus(),this.scrollTopEnable&&(this.modalBody.nativeElement.scrollTop=0),this.openModal.emit(!0)},1)}hide(){this.visible=!1,this.closeModal.emit(!0),this.focusLastModal()}center(){let s=this.modalRoot.nativeElement.offsetWidth,p=this.modalRoot.nativeElement.offsetHeight;0===s&&0===p&&(this.modalRoot.nativeElement.style.visibility="hidden",this.modalRoot.nativeElement.style.display="block",s=this.modalRoot.nativeElement.offsetWidth,p=this.modalRoot.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.display="none",this.modalRoot.nativeElement.style.visibility="visible");const k=Math.max((window.innerWidth-s)/2,0),K=Math.max((window.innerHeight-p)/2,0);this.modalRoot.nativeElement.style.left=k+"px",this.modalRoot.nativeElement.style.top=K+"px"}initDrag(s){s.target!==this.closeIcon.nativeElement&&(this.maximized||(this.dragEventTarget=s))}onResize(s){"vertical"===s.direction&&this.calcBodyHeight(),this.resizeModal.emit(s)}calcBodyHeight(){this.modalBody.nativeElement.style.height=this.modalRoot.nativeElement.offsetHeight-(this.modalHeader.nativeElement.offsetHeight+this.modalFooter.nativeElement.offsetHeight)+"px",this.modalBody.nativeElement.style.maxHeight="none"}getMaxModalIndex(){return((g="body *")=>Array.from(document.querySelectorAll(g)).map(u=>parseFloat(window.getComputedStyle(u).zIndex)).filter(u=>!isNaN(u)).sort((u,s)=>u-s).pop()||0)(".ui-modal")}focusLastModal(){const s=((g,u)=>{if("function"==typeof g.closest)return g.closest(u)||null;for(;g;){if(g.matches(u))return g;g=g.parentElement}return null})(this.element.nativeElement.parentElement,".window-modal");s&&s.focus()}toggleMaximize(s){this.maximized?this.revertMaximize():this.maximize(),this.maximizeModal.emit(this.maximized),s.preventDefault()}maximize(){this.preMaximizePageX=parseFloat(this.modalRoot.nativeElement.style.top),this.preMaximizePageY=parseFloat(this.modalRoot.nativeElement.style.left),this.preMaximizeRootWidth=this.modalRoot.nativeElement.offsetWidth,this.preMaximizeRootHeight=this.modalRoot.nativeElement.offsetHeight,this.preMaximizeBodyHeight=this.modalBody.nativeElement.offsetHeight,this.modalRoot.nativeElement.style.top="0px",this.modalRoot.nativeElement.style.left="0px",this.modalRoot.nativeElement.style.width="100vw",this.modalRoot.nativeElement.style.height="100vh",this.modalBody.nativeElement.style.height="calc(100vh - "+(this.modalHeader.nativeElement.offsetHeight+this.modalFooter.nativeElement.offsetHeight)+"px)",this.modalBody.nativeElement.style.maxHeight="none",this.maximized=!0}revertMaximize(){this.modalRoot.nativeElement.style.top=this.preMaximizePageX+"px",this.modalRoot.nativeElement.style.left=this.preMaximizePageY+"px",this.modalRoot.nativeElement.style.width=this.preMaximizeRootWidth+"px",this.modalRoot.nativeElement.style.height=this.preMaximizeRootHeight+"px",this.modalBody.nativeElement.style.height=this.preMaximizeBodyHeight+"px",this.maximized=!1}moveOnTop(){if(!this.backdrop){const s=this.getMaxModalIndex();let p=parseFloat(window.getComputedStyle(this.modalRoot.nativeElement).zIndex)||0;p<=s&&(p=s+1,this.modalRoot.nativeElement.style.zIndex=p.toString())}}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275directiveInject(a.ElementRef))},g.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["cf-window"]],viewQuery:function(s,p){if(1&s&&(a.\u0275\u0275viewQuery(bl,5),a.\u0275\u0275viewQuery(El,5),a.\u0275\u0275viewQuery(Sl,5),a.\u0275\u0275viewQuery(nu,5),a.\u0275\u0275viewQuery(wl,5)),2&s){let k;a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(p.modalRoot=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(p.modalBody=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(p.modalHeader=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(p.modalFooter=k.first),a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(p.closeIcon=k.first)}},hostBindings:function(s,p){1&s&&a.\u0275\u0275listener("keydown.esc",function(K){return p.onKeyDown(K)})("resize",function(){return p.onWindowResize()},!1,a.\u0275\u0275resolveWindow)},inputs:{scrollTopEnable:"scrollTopEnable",maximizable:"maximizable",backdrop:"backdrop"},outputs:{openModal:"openModal",closeModal:"closeModal",resizeModal:"resizeModal",maximizeModal:"maximizeModal"},ngContentSelectors:Il,decls:18,vars:14,consts:[["cfBlock","window-overlay"],["cfBlock","window","tabindex","-1","role","dialog","cfResizable","","cfDraggable","",3,"cfMod","south","east","southEast","dragEventTarget","resizing","mousedown","touchstart"],["modalRoot",""],["cfBlock","window-header",3,"mousedown","touchstart"],["modalHeader",""],["cfElem","controls"],["cfBlock","button",3,"cfMod","click"],["closeIcon",""],["src","assets/icons/mdi/close.svg","cfElem","icon"],["cfBlock","button",3,"cfMod","click",4,"ngIf"],["cfElem","title"],["cfBlock","window-body"],["modalBody",""],["cfBlock","window-footer"],["modalFooter",""],["cfElem","icon",3,"src"]],template:function(s,p){1&s&&(a.\u0275\u0275projectionDef(Dl),a.\u0275\u0275element(0,"div",0),a.\u0275\u0275elementStart(1,"div",1,2),a.\u0275\u0275listener("resizing",function(K){return p.onResize(K)})("mousedown",function(){return p.moveOnTop()})("touchstart",function(){return p.moveOnTop()}),a.\u0275\u0275elementStart(3,"div",3,4),a.\u0275\u0275listener("mousedown",function(K){return p.initDrag(K)})("touchstart",function(K){return p.initDrag(K)}),a.\u0275\u0275elementStart(5,"div",5),a.\u0275\u0275elementStart(6,"button",6,7),a.\u0275\u0275listener("click",function(){return p.hide()}),a.\u0275\u0275element(8,"cf-svg-icon",8),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(9,Al,2,3,"button",9),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(10,"div",10),a.\u0275\u0275projection(11),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(12,"div",11,12),a.\u0275\u0275projection(14,1),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(15,"div",13,14),a.\u0275\u0275projection(17,2),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&s&&(a.\u0275\u0275styleProp("display",p.visible&&p.backdrop?"block":"none"),a.\u0275\u0275advance(1),a.\u0275\u0275styleProp("display",p.visible?"block":"none"),a.\u0275\u0275property("cfMod",a.\u0275\u0275pureFunction1(11,Pl,p.maximized))("south",!0)("east",!0)("southEast",!0)("dragEventTarget",p.dragEventTarget),a.\u0275\u0275advance(5),a.\u0275\u0275property("cfMod",a.\u0275\u0275pureFunction0(13,Ol)),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",p.maximizable))},directives:[Zs.G,Ci,Qo,ts.I,Ko.e,Vo.b,zn.NgIf],encapsulation:2}),g})();const Rl=["rootWindow"];function Zo(g,u){1&g&&a.\u0275\u0275element(0,"cf-splash-screen")}let ru=(()=>{class g{constructor(){this.environment=Fr}ngOnInit(){this.environment.demo&&this.rootWindow.show()}}return g.\u0275fac=function(s){return new(s||g)},g.\u0275cmp=a.\u0275\u0275defineComponent({type:g,selectors:[["cf-portal-root"]],viewQuery:function(s,p){if(1&s&&a.\u0275\u0275viewQuery(Rl,7),2&s){let k;a.\u0275\u0275queryRefresh(k=a.\u0275\u0275loadQuery())&&(p.rootWindow=k.first)}},decls:19,vars:2,consts:[["id","bgcanvas"],[4,"ngIf"],[1,"application"],[3,"maximizable"],["rootWindow",""],[1,"window-header__content"],[1,"window-body__content"],["href","https://github.com/central-factory/metaverse","target","_blank"],[1,"window-footer__content"],["cfBlock","button","cfMod","primary",3,"click"]],template:function(s,p){if(1&s){const k=a.\u0275\u0275getCurrentView();a.\u0275\u0275element(0,"canvas",0),a.\u0275\u0275template(1,Zo,1,0,"cf-splash-screen",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275element(3,"router-outlet"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(4,"cf-window",3,4),a.\u0275\u0275elementContainerStart(6,5),a.\u0275\u0275text(7,"A message from the author"),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(8,6),a.\u0275\u0275elementStart(9,"h3"),a.\u0275\u0275text(10,"Welcome to The Central Factory Metaverse"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"p"),a.\u0275\u0275text(12," This is a demo release of The Central Factory Metaverse project. Not all features are implemented yet, you might find many issues and unexpected behaviours. You can give us your feedback on "),a.\u0275\u0275elementStart(13,"a",7),a.\u0275\u0275text(14,"the project page"),a.\u0275\u0275elementEnd(),a.\u0275\u0275text(15,". Thank you for getting interested on this project. "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementContainerStart(16,8),a.\u0275\u0275elementStart(17,"button",9),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(k),a.\u0275\u0275reference(5).hide()}),a.\u0275\u0275text(18," I'm ready! "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementContainerEnd(),a.\u0275\u0275elementEnd()}2&s&&(a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",p.environment.showSplashScreen),a.\u0275\u0275advance(3),a.\u0275\u0275property("maximizable",!0))},directives:[zn.NgIf,wn.RouterOutlet,Tl,Zs.G,ts.I,Wu.wn],styles:["#bgcanvas[_ngcontent-%COMP%]{display:block;margin:0 auto;width:100vw;height:100vh;position:fixed;z-index:-1}"]}),g})();var iu=l(1718);let su=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({imports:[[or.Y,Nr.O]]}),g})();var ou=l(5687);let au=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=a.\u0275\u0275defineInjector({imports:[[zn.CommonModule,or.Y,Nr.O,Ho._t,wn.RouterModule,su,ou.l,sr.x,iu.y]]}),g})(),uu=(()=>{class g{constructor(s){this.customizationSettingsState=s,this.renderProcessRunning=!1,this.textColor="#22b455",this.initialize()}initialize(){this.themeChangeSubscription&&this.themeChangeSubscription.unsubscribe(),this.themeChangeSubscription=this.customizationSettingsState.customizationSettings$.pipe((0,I.U)(s=>s?.theme.name),(0,Ya.x)((s,p)=>s===p),(0,yr.b)(s=>this.onThemeChange(s))).subscribe()}onThemeChange(s){const p=document.getElementsByClassName("application")[0];if(!p||!s)return void setTimeout(()=>this.initialize(),1e3);if(this.currentTheme===s)return;this.currentTheme=s;const k=new ResizeObserver(K=>{for(const ee of K)if(ee.contentBoxSize){const re=document.getElementById("bgcanvas"),he=Array.isArray(ee.contentBoxSize)?ee.contentBoxSize[0]:ee.contentBoxSize;re.width=he.inlineSize,re.height=window.innerHeight;const Pe=this.initializeMatrix();this.renderTick(()=>this.renderMatrix(Pe))}});switch(s){case"Matrix":this.textColor="#22b455",p.classList.add("application--no-background-color"),k.observe(document.documentElement);break;case"Metaverse":this.textColor="#9575cd",p.classList.add("application--no-background-color"),k.observe(document.documentElement);break;default:k.unobserve(document.documentElement),clearTimeout(this.renderTimeout),delete this.renderTimeout,this.renderProcessRunning=!1,p.classList.remove("application--no-background-color")}}initializeMatrix(){const k=document.getElementById("bgcanvas"),K=k.getContext("2d"),ee=[],re=Math.ceil(k.height/20);for(let he=0;he<k.width/20;++he)ee.push({x:20*he,stackHeight:10+Math.random()*re,stackCounter:0});return{tileSize:20,fadeFactor:.05,canvas:k,ctx:K,maxStackHeight:re,columns:ee}}renderTick(s,p=50){this.renderProcessRunning?console.warn("render process already running"):(this.renderProcessRunning=!0,s(),this.renderTimeout=window.setTimeout(()=>{this.renderProcessRunning=!1,this.renderTick(s,p)},p))}renderMatrix({ctx:s,fadeFactor:p,canvas:k,tileSize:K,maxStackHeight:ee,columns:re}){s.fillStyle="rgba( 0 , 0 , 0 , "+p+" )",s.fillRect(0,0,k.width,k.height),s.font=K-2+"px monospace",s.fillStyle=this.textColor;for(let he=0;he<re.length;++he){const Pe=String.fromCharCode(33+Math.floor(94*Math.random()));s.fillText(Pe,re[he].x,re[he].stackCounter*K+K),++re[he].stackCounter>=re[he].stackHeight&&(re[he].stackHeight=10+Math.random()*ee,re[he].stackCounter=0)}}}return g.\u0275fac=function(s){return new(s||g)(a.\u0275\u0275inject(ir.T))},g.\u0275prov=a.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),cu=(()=>{class g{}return g.\u0275fac=function(s){return new(s||g)},g.\u0275mod=a.\u0275\u0275defineNgModule({type:g,bootstrap:[ru]}),g.\u0275inj=a.\u0275\u0275defineInjector({providers:[{provide:a.APP_INITIALIZER,useFactory:()=>()=>null,deps:[ir.T,uu],multi:!0},vi,Vi,Gi,Lr,Br,Yi,Io,Qi,Sn,$n],imports:[[v.b2,Ao,pe.HttpClientModule,or.Y.forRoot(),Nr.O,au,sr.x,Yr,b,yl,nn.forRoot({enabled:Fr.useMocks,autologin:Fr.autologin})]]}),g})();Fr.production&&(0,a.enableProdMode)(),v.q6().bootstrapModule(cu).catch(g=>console.error(g))},4995:(se,U,l)=>{l.d(U,{B:()=>v,c:()=>a});var v=(()=>{return(C=v||(v={})).Webview="webview",C.WebpackModuleFederation="webpack-module-federation",C.Unknown="unknown",v;var C})(),a=(()=>{return(C=a||(a={})).Primary="primary",C.Secondary="secondary",C.Success="success",C.Warning="warning",C.Danger="danger",C.Info="info",C.Light="light",C.Dark="dark",a;var C})()},9813:(se,U,l)=>{l.d(U,{o:()=>j,O:()=>B});var v=l(9841),a=l(4004),C=l(7678),M=l(3395),N=l(7777),j=(()=>{return(S=j||(j={}))[S.User=0]="User",S[S.Store=1]="Store",j;var S})();let B=(()=>{class S{constructor(E,I){this.storeApplicationsState=E,this.userApplicationsState=I,this.applications$=(0,v.a)([this.storeApplicationsState.applications$,this.userApplicationsState.applications$]).pipe((0,a.U)(([P,R])=>[...R.map(T=>({origin:j.User,application:T})),...P.map(T=>({origin:j.Store,application:T}))].filter((T,b,y)=>y.findIndex(c=>T.application.id===c.application.id)===b)))}}return S.\u0275fac=function(E){return new(E||S)(N.\u0275\u0275inject(C.I),N.\u0275\u0275inject(M.g))},S.\u0275prov=N.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},6961:(se,U,l)=>{l.d(U,{r:()=>M});var v=l(1135),a=l(7777);let M=(()=>{class N{constructor(){this.applications$=new v.X([]),this.maxApplications=4}addApplication(j){const B=this.applications$.getValue();B.find(w=>w.id===j.id)||(B.length>=this.maxApplications&&B.shift(),B.unshift(j),this.applications$.next(B))}}return N.\u0275fac=function(j){return new(j||N)},N.\u0275prov=a.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac,providedIn:"root"}),N})()},4918:(se,U,l)=>{l.d(U,{H:()=>j});var v=l(9813),a=l(1135),C=l(4004),M=l(8505),N=l(7777);let j=(()=>{class B{constructor(w){this.availableApplicationsState=w,this.application$=new a.X(void 0),this.sidebarIsOpen$=new a.X(!1)}listenForChanges(w){this.changesSubscription&&this.changesSubscription.unsubscribe(),w?this.changesSubscription=this.availableApplicationsState.applications$.pipe((0,C.U)(E=>E.find(I=>I.application.id===w)),(0,M.b)(E=>this.application$.next(E?.application))).subscribe():this.application$.next(void 0)}selectApplication(w){this.listenForChanges(w.id)}unselectApplication(){this.listenForChanges(void 0)}openSidebar(){this.sidebarIsOpen$.next(!0)}closeSidebar(){this.sidebarIsOpen$.next(!1)}}return B.\u0275fac=function(w){return new(w||B)(N.\u0275\u0275inject(v.O))},B.\u0275prov=N.\u0275\u0275defineInjectable({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},7678:(se,U,l)=>{l.d(U,{I:()=>P});var v=l(9283),C=l(1549),M=l(1135),N=l(9646),L=l(4128),j=l(8505),B=l(4004),S=l(3900),w=l(4995),E=l(7777);let P=(()=>{class R{constructor(b,y){this.httpClient=b,this.userPreferencesState=y,this.applications$=new M.X([]),this.byCategory$=this.applications$.pipe((0,B.U)(c=>c.reduce((o,m)=>{const d=m.categories;return!d||!d.length||d.forEach($=>{o[$]||(o[$]=[]),o[$].push(m)}),o},{}))),this.byAuthor$=this.applications$.pipe((0,B.U)(c=>c.reduce((o,m)=>{const d=m.additionalProperties?.author;return d&&(o[d.id]=o[d.id]||[],o[d.id].push(m)),o},{}))),this.topAuthors$=this.byAuthor$.pipe((0,B.U)(c=>Object.keys(c).sort((m,d)=>c[d].length-c[m].length).filter(m=>c[m].length>2).map(m=>c[m][0].additionalProperties?.author).slice(0,5))),this.storeDataUrl="https://raw.githubusercontent.com/central-factory/web-application-manifests/main/applications.json",this.userPreferencesState.byKey("store.settings.repositories").pipe((0,B.U)(c=>c?.value||[]),(0,S.w)(c=>c?(0,L.D)(c.map(o=>this.httpClient.get(o.url))).pipe((0,B.U)(o=>o.reduce((m,d)=>m.concat(d),[]))):(0,N.of)([])),(0,j.b)(c=>{this.applications$.next(c.map(o=>{const d={color:this.getPrimaryColor(o)||"#000000",variation:w.c.Primary};return{...o,createdAt:o.createdAt||(new Date).toISOString(),updatedAt:o.updatedAt||(new Date).toISOString(),additionalProperties:{...o.additionalProperties,author:o.additionalProperties?.author||{id:o.id,name:o.name},renderingType:o.additionalProperties?.renderingType||w.B.Webview,supportsBrowser:o.additionalProperties?.supportsBrowser||!1,internal:!1,permissions:o.additionalProperties?.permissions||[],defaultShortcut:o.additionalProperties?.defaultShortcut||(o.shortcuts?o.shortcuts[0].name:void 0),sidebarShortcuts:o.additionalProperties?.sidebarShortcuts||(o.shortcuts?[o.shortcuts[0].name]:[]),colors:o.additionalProperties?.colors||[d]}}}))})).subscribe()}getPrimaryColor(b){if(b.additionalProperties?.colors&&b.additionalProperties?.colors.length>0){const c=b.additionalProperties?.colors?.find(o=>o.variation===w.c.Primary);if(c)return c?.color}return b.themeColor||b.backgroundColor}}return R.\u0275fac=function(b){return new(b||R)(E.\u0275\u0275inject(v.HttpClient),E.\u0275\u0275inject(C.w))},R.\u0275prov=E.\u0275\u0275defineInjectable({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},3395:(se,U,l)=>{l.d(U,{g:()=>B});var v=l(6435),a=l(1135),C=l(3900),M=l(4128),N=l(8505),L=l(7777);let B=(()=>{class S{constructor(E){this.entityManager=E,this.applications$=new a.X([]),this.entityManager.initialize$.pipe((0,C.w)(()=>(0,M.D)([this.entityManager.getRepository("userapplications","com.central-factory.start")])),(0,N.b)(([I])=>{this.userApplicationsRepository=I,this.subscribeToDataChanges()})).subscribe()}addApplication(E){if(!this.userApplicationsRepository)throw new Error("Repositories not initialized");return this.userApplicationsRepository.upsert(E)}subscribeToDataChanges(){if(!this.userApplicationsRepository)throw new Error("Repositories not initialized");this.userApplicationsRepository.observe().pipe((0,N.b)(E=>this.applications$.next(E))).subscribe()}}return S.\u0275fac=function(E){return new(E||S)(L.\u0275\u0275inject(v.v2))},S.\u0275prov=L.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},5088:(se,U,l)=>{l.d(U,{R:()=>v});var v=(()=>{return(a=v||(v={})).Unknown="unknown",a.Currency="currency",a.Land="land",a.Material="material",a.Building="building",a.Equipment="equipment",a.Furniture="furniture",a.Machine="machine",a.Vehicle="vehicle",a.MediaResource="media-resource",a.Consumable="consumable",a.Other="other",v;var a})()},120:(se,U,l)=>{l.d(U,{g:()=>v});var v=(()=>{return(a=v||(v={})).Model="Model",a.Image="Image",v;var a})()},7165:(se,U,l)=>{l.d(U,{Y:()=>E});var v=l(6435),a=l(1135),C=l(3900),M=l(4128),N=l(8505),L=l(2843),j=l(9646),B=l(4004),S=l(7777);let E=(()=>{class I{constructor(R){this.entityManager=R,this.avatar$=new a.X(void 0),this.entityManager.initialize$.pipe((0,C.w)(()=>(0,M.D)([this.entityManager.getRepository("userpreferences","com.central-factory.user-avatars"),this.entityManager.getRepository("useravatars","com.central-factory.user-avatars")])),(0,N.b)(([T,b])=>{this.userPreferencesRepository=T,this.userAvatarsRepository=b,this.subscribeToDataChanges()})).subscribe()}selectAvatar(R){return this.userPreferencesRepository?this.userPreferencesRepository.upsert({id:"userAvatars.selectedAvatar",key:"userAvatars.selectedAvatar",value:R.id}):(0,L._)(()=>new Error("Repositories not initialized"))}selectAppearance(R){if(!this.userAvatarsRepository)return(0,L._)(()=>new Error("Repositories not initialized"));const T=this.avatar$.getValue();if(!T)return(0,L._)(()=>new Error("Avatar not selected"));const b=JSON.parse(JSON.stringify(T));return b.selectedAppearance=R,this.userAvatarsRepository.upsert(b)}subscribeToDataChanges(){if(!this.userAvatarsRepository||!this.userPreferencesRepository)throw new Error("Repositories not initialized");this.userPreferencesRepository.observeOne({selector:{id:"userAvatars.selectedAvatar"}}).subscribe(R=>{this.avatarQuerySubscription&&this.avatarQuerySubscription.unsubscribe(),R&&this.userAvatarsRepository&&(this.avatarQuerySubscription=this.userAvatarsRepository.observeOne({selector:{id:R.value}}).pipe((0,C.w)(T=>T&&T._attachments&&Object.keys(T._attachments).length>0&&T?this.userAvatarsRepository.getAllAttachments(T.id).pipe((0,B.U)(y=>(T.appearances.forEach(c=>{const o=y.find(d=>d.id===c.portrait.id);o&&(c.portrait.src=URL.createObjectURL(o.data));const m=y.find(d=>d.id===c.id);m&&(c.src=URL.createObjectURL(m.data))}),T.selectedAppearance=T.appearances.find(c=>c.id===T.selectedAppearance.id),T))):(0,j.of)(T)),(0,N.b)(T=>this.avatar$.next(T))).subscribe())})}}return I.\u0275fac=function(R){return new(R||I)(S.\u0275\u0275inject(v.v2))},I.\u0275prov=S.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},405:(se,U,l)=>{l.d(U,{P:()=>E});var v=l(7777),C=l(1481),M=l(1623),N=l(1457),j=l(3454),B=l(9750);function S(I,P){if(1&I&&v.\u0275\u0275element(0,"img",3),2&I){const R=v.\u0275\u0275nextContext();v.\u0275\u0275property("src",R.src,v.\u0275\u0275sanitizeUrl)}}function w(I,P){if(1&I&&v.\u0275\u0275element(0,"cf-svg-icon",4),2&I){const R=v.\u0275\u0275nextContext();v.\u0275\u0275property("src",R.emptyIcon)}}let E=(()=>{class I{constructor(R){this.domSanitizer=R,this.emptyIcon="assets/icons/mdi/head-question.svg",this.showEmptyIcon=!1}set appearancePortrait(R){this.src=R?.src?this.domSanitizer.bypassSecurityTrustUrl(R.src):void 0}}return I.\u0275fac=function(R){return new(R||I)(v.\u0275\u0275directiveInject(C.H7))},I.\u0275cmp=v.\u0275\u0275defineComponent({type:I,selectors:[["cf-avatar-appearance-portrait"]],inputs:{appearancePortrait:"appearancePortrait",emptyIcon:"emptyIcon",showEmptyIcon:"showEmptyIcon"},decls:3,vars:2,consts:[["cfBlock","avatar-appearance-portrait"],["cfElem","image",3,"src",4,"ngIf"],[3,"src",4,"ngIf"],["cfElem","image",3,"src"],[3,"src"]],template:function(R,T){1&R&&(v.\u0275\u0275elementStart(0,"div",0),v.\u0275\u0275template(1,S,1,1,"img",1),v.\u0275\u0275template(2,w,1,1,"cf-svg-icon",2),v.\u0275\u0275elementEnd()),2&R&&(v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",T.src),v.\u0275\u0275advance(1),v.\u0275\u0275property("ngIf",!T.src&&T.showEmptyIcon))},directives:[M.G,N.NgIf,j.e,B.b],encapsulation:2}),I})()},1718:(se,U,l)=>{l.d(U,{y:()=>j});var v=l(1457),C=l(4438),M=l(2051),N=l(7777);let j=(()=>{class B{}return B.\u0275fac=function(w){return new(w||B)},B.\u0275mod=N.\u0275\u0275defineNgModule({type:B}),B.\u0275inj=N.\u0275\u0275defineInjector({imports:[[v.CommonModule,C.O,M.Y]]}),B})()},899:(se,U,l)=>{l.d(U,{k:()=>v,R:()=>a});var v=(()=>((v||(v={})).Collection="collection",v))(),a=(()=>{return(C=a||(a={})).Read="read",C.Write="write",C.Delete="delete",a;var C})()},6435:(se,U,l)=>{l.d(U,{RY:()=>Qf,To:()=>Zf,v2:()=>Lv});var v={};l.r(v),l.d(v,{default:()=>bo});var w,E,a=l(7777),C=l(1611),M=l.n(C);function N(e){return"$"+e}function L(e){return e.substring(1)}function j(){this._store={}}function B(e){if(this._store=new j,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}j.prototype.get=function(e){var t=N(e);return this._store[t]},j.prototype.set=function(e,t){var n=N(e);return this._store[n]=t,!0},j.prototype.has=function(e){return N(e)in this._store},j.prototype.delete=function(e){var t=N(e),n=t in this._store;return delete this._store[t],n},j.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n];e(this._store[i],i=L(i))}},Object.defineProperty(j.prototype,"size",{get:function(){return Object.keys(this._store).length}}),B.prototype.add=function(e){return this._store.set(e,!0)},B.prototype.has=function(e){return this._store.has(e)},B.prototype.forEach=function(e){this._store.forEach(function(t,n){e(n)})},Object.defineProperty(B.prototype,"size",{get:function(){return this._store.size}}),function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(w=Set,E=Map):(w=B,E=j);var I=l(3894),P=l.n(I),R=l(2302),T=l.n(R);function b(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}P()(b,Error),b.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new b(401,"unauthorized","Name or password is incorrect.");var c=new b(400,"bad_request","Missing JSON list of 'docs'"),o=new b(404,"not_found","missing"),m=new b(409,"conflict","Document update conflict"),d=new b(400,"bad_request","_id field must contain a string"),$=new b(412,"missing_id","_id is required for puts"),ne=new b(400,"bad_request","Only reserved document ids may start with underscore."),pe=(new b(412,"precondition_failed","Database not open"),new b(500,"unknown_error","Database encountered an unknown error")),x=new b(500,"badarg","Some query argument is invalid"),W=(new b(400,"invalid_request","Request was invalid"),new b(400,"query_parse_error","Some query parameter is invalid")),Q=new b(500,"doc_validation","Bad special document member"),G=new b(400,"bad_request","Something wrong with the request"),X=new b(400,"bad_request","Document must be a JSON object"),be=(new b(404,"not_found","Database not found"),new b(500,"indexed_db_went_bad","unknown")),ge=(new b(500,"web_sql_went_bad","unknown"),new b(500,"levelDB_went_went_bad","unknown"),new b(403,"forbidden","Forbidden by design doc validate_doc_update function"),new b(400,"bad_request","Invalid rev format")),le=(new b(412,"file_exists","The database could not be created, the file already exists."),new b(412,"missing_stub","A pre-existing attachment stub wasn't found"));function Ne(e,t){function n(r){for(var i=Object.getOwnPropertyNames(e),f=0,h=i.length;f<h;f++)"function"!=typeof e[i[f]]&&(this[i[f]]=e[i[f]]);void 0!==r&&(this.reason=r)}return n.prototype=b.prototype,new n(t)}function Ye(e){if("object"!=typeof e){var t=e;(e=pe).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}new b(413,"invalid_url","Provided URL is invalid");var mt=l(9069),nt=l.n(mt);const un=l(3306).v4;var gn=function(e){return atob(e)},yn=function(e){return btoa(e)};function _n(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(f){if("TypeError"!==f.name)throw f;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<e.length;i+=1)r.append(e[i]);return r.getBlob(t.type)}}function Xt(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function Hn(e,t){return _n([Xt(e)],{type:t})}function xe(e,t){return Hn(gn(e),t)}function It(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(i){var f=i.target.result||"";if(r)return t(f);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}(f))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function zt(e,t){It(e,function(n){t(n)})}var hn=l(3625),$r=l.n(hn),Vn=self.setImmediate||self.setTimeout;function hr(e,t,n,r,i){(n>0||r<t.size)&&(t=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.slice(t,n)}(t,n,r)),function(e,t){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);t(i)},n.readAsArrayBuffer(e)}(t,function(f){e.append(f),i()})}function Kr(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function ii(e,t){var n="string"==typeof e,r=n?e.length:e.size,i=Math.min(32768,r),f=Math.ceil(r/i),h=0,D=n?new($r()):new($r().ArrayBuffer),F=n?Kr:hr;function H(){Vn(ae)}function J(){var we=function(e){return yn(e)}(D.end(!0));t(we),D.destroy()}function ae(){var ce=h*i;h++,F(D,e,ce,ce+i,h<f?H:J)}ae()}function Hr(e){return $r().hash(e)}var de,Vr,fs=Function.prototype.toString,ai=fs.call(Object);function pn(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=pn(e[n]);return t}if(e instanceof Date)return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return function(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&fs.call(n)==ai}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=pn(e[n]);void 0!==i&&(t[n]=i)}return t}function Di(e){var t=!1;return M()(function(n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)})}function qt(e){return M()(function(t){t=pn(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),i=new Promise(function(f,h){var D;try{var F=Di(function(H,J){H?h(H):f(J)});t.push(F),(D=e.apply(n,t))&&"function"==typeof D.then&&f(D)}catch(H){h(H)}});return r&&i.then(function(f){r(null,f)},r),i})}function Gt(e,t){return qt(M()(function(n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return function(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var f=n[n.length-1];n[n.length-1]=function(h,D){var F=["api",e.name,t];F=F.concat(h?["error",h]:["success",D]),e.constructor.emit("debug",F),f(h,D)}}}(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise(function(i,f){r.taskqueue.addTask(function(h){h?f(h):i(r[e].apply(r,n))})})}))}function Ar(e,t){for(var n={},r=0,i=t.length;r<i;r++){var f=t[r];f in e&&(n[f]=e[f])}return n}function ui(e){return e}function ci(e){return[{ok:e}]}function Ee(e,t,n){var r=t.docs,i=new E;r.forEach(function(fe){i.has(fe.id)?i.get(fe.id).push(fe):i.set(fe.id,[fe])});var f=i.size,h=0,D=new Array(f);var ae=[];i.forEach(function(fe,_e){ae.push(_e)});var ce=0;!function we(){if(!(ce>=ae.length)){var fe=Math.min(ce+6,ae.length),_e=ae.slice(ce,fe);(function(fe,_e){fe.forEach(function(Te,Me){var Ie=_e+Me,je=i.get(Te),$e=Ar(je[0],["atts_since","attachments"]);$e.open_revs=je.map(function(Ke){return Ke.rev}),$e.open_revs=$e.open_revs.filter(ui);var Je=ui;0===$e.open_revs.length&&(delete $e.open_revs,Je=ci),["revs","attachments","binary","ajax","latest"].forEach(function(Ke){Ke in t&&($e[Ke]=t[Ke])}),e.get(Te,$e,function(Ke,tt){var yt;yt=Ke?[{error:Ke}]:Je(tt),function(fe,_e,Te){D[fe]={id:_e,docs:Te},function(){var fe;++h===f&&(fe=[],D.forEach(function(_e){_e.docs.forEach(function(Te){fe.push({id:_e.id,docs:[Te]})})}),n(null,{results:fe}))}()}(Ie,Te,yt),we()})})})(_e,ce),ce+=_e.length}}()}try{localStorage.setItem("_pouch_check_localstorage",1),de=!!localStorage.getItem("_pouch_check_localstorage")}catch{de=!1}function ie(){return de}function Be(){var e;nt().call(this),this._listeners={},e=this,ie()&&addEventListener("storage",function(t){e.emit(t.key)})}function rt(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}P()(Be,nt()),Be.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,f=!1;this._listeners[t]=h,this.on(e,h)}function h(){if(i._listeners[t])if(f)f="waiting";else{f=!0;var D=Ar(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(D).on("change",function(H){H.seq>r.since&&!r.cancelled&&(r.since=H.seq,r.onChange(H))}).on("complete",function(){"waiting"===f&&T()(h),f=!1}).on("error",function(){f=!1})}}},Be.prototype.removeListener=function(e,t){t in this._listeners&&(nt().prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},Be.prototype.notifyLocalWindows=function(e){ie()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},Be.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)},Vr="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};var Dr=Vr;function pr(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function to(e){var t;if(e?"string"!=typeof e?t=Ne(d):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=Ne(ne)):t=Ne($),t)throw t}function On(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(rt("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function ms(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function Ii(e){var t=ms(e);return t?t.join("/"):null}function gs(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function Gr(e,t,n){return new Promise(function(r,i){e.get(t,function(f,h){if(f){if(404!==f.status)return i(f);h={}}var D=h._rev,F=n(h);if(!F)return r({updated:!1,rev:D});F._id=t,F._rev=D,r(function(e,t,n){return e.put(t).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(409!==r.status)throw r;return Gr(e,t._id,n)})}(e,F,n))})})}function Ri(e,t){var n=pn(e);return t?(delete n._rev_tree,Hr(JSON.stringify(n))):un().replace(/-/g,"").toLowerCase()}var ro=un;function Pr(e){for(var t,n,r,f,i=e.rev_tree.slice();f=i.pop();){var h=f.ids,D=h[2],F=f.pos;if(D.length)for(var H=0,J=D.length;H<J;H++)i.push({pos:F+1,ids:D[H]});else{var ae=!!h[1].deleted,ce=h[0];(!t||(r!==ae?r:n!==F?n<F:t<ce))&&(t=ce,n=F,r=ae)}}return n+"-"+t}function Or(e,t){for(var r,n=e.slice();r=n.pop();)for(var i=r.pos,f=r.ids,h=f[2],D=t(0===h.length,i,f[0],r.ctx,f[1]),F=0,H=h.length;F<H;F++)n.push({pos:i+1,ids:h[F],ctx:D})}function va(e,t){return e.pos-t.pos}function Mi(e){var t=[];Or(e,function(i,f,h,D,F){i&&t.push({rev:f+"-"+h,pos:f,opts:F})}),t.sort(va).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function di(e){for(var t=Pr(e),n=Mi(e.rev_tree),r=[],i=0,f=n.length;i<f;i++){var h=n[i];h.rev!==t&&!h.opts.deleted&&r.push(h.rev)}return r}function so(e){for(var r,t=[],n=e.slice();r=n.pop();){var i=r.pos,f=r.ids,h=f[0],D=f[1],F=f[2],H=0===F.length,J=r.history?r.history.slice():[];J.push({id:h,opts:D}),H&&t.push({pos:i+1-J.length,ids:J});for(var ae=0,ce=F.length;ae<ce;ae++)n.push({pos:i+1,ids:F[ae],history:J})}return t.reverse()}function ga(e,t){return e.pos-t.pos}function _a(e,t,n){var r=function(e,t,n){for(var f,r=0,i=e.length;r<i;)n(e[f=r+i>>>1],t)<0?r=f+1:i=f;return r}(e,t,n);e.splice(r,0,t)}function oo(e,t){for(var n,r,i=t,f=e.length;i<f;i++){var h=e[i],D=[h.id,h.opts,[]];r?(r[2].push(D),r=D):n=r=D}return n}function ao(e,t){return e[0]<t[0]?-1:1}function uo(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),f=i.tree1,h=i.tree2;(f[1].status||h[1].status)&&(f[1].status="available"===f[1].status||"available"===h[1].status?"available":"missing");for(var D=0;D<h[2].length;D++)if(f[2][0]){for(var F=!1,H=0;H<f[2].length;H++)f[2][H][0]===h[2][D][0]&&(n.push({tree1:f[2][H],tree2:h[2][D]}),F=!0);F||(r="new_branch",_a(f[2],h[2][D],ao))}else r="new_leaf",f[2][0]=h[2][D]}return{conflicts:r,tree:e}}function co(e,t,n){var h,r=[],i=!1,f=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var D=0,F=e.length;D<F;D++){var H=e[D];if(H.pos===t.pos&&H.ids[0]===t.ids[0])h=uo(H.ids,t.ids),r.push({pos:H.pos,ids:h.tree}),i=i||h.conflicts,f=!0;else if(!0!==n){var J=H.pos<t.pos?H:t,ae=H.pos<t.pos?t:H,we=[],me=[];for(me.push({ids:J.ids,diff:ae.pos-J.pos,parent:null,parentIdx:null});me.length>0;){var fe=me.pop();if(0!==fe.diff)for(var _e=fe.ids[2],Te=0,Me=_e.length;Te<Me;Te++)me.push({ids:_e[Te],diff:fe.diff-1,parent:fe.ids,parentIdx:Te});else fe.ids[0]===ae.ids[0]&&we.push(fe)}var Ie=we[0];Ie?(h=uo(Ie.ids,ae.ids),Ie.parent[2][Ie.parentIdx]=h.tree,r.push({pos:J.pos,ids:J.ids}),i=i||h.conflicts,f=!0):r.push(H)}else r.push(H)}return f||r.push(t),r.sort(ga),{tree:r,conflicts:i||"internal_node"}}function fo(e,t,n){var r=co(e,t),i=function(e,t){for(var r,i,n=so(e),f=0,h=n.length;f<h;f++){var H,D=n[f],F=D.ids;if(F.length>t){r||(r={});var J=F.length-t;H={pos:D.pos+J,ids:oo(F,J)};for(var ae=0;ae<J;ae++)r[D.pos+ae+"-"+F[ae].id]=!0}else H={pos:D.pos,ids:oo(F,0)};i=i?co(i,H,!0).tree:[H]}return r&&Or(i,function(we,me,fe){delete r[me+"-"+fe]}),{tree:i,revs:r?Object.keys(r):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function ba(e){return e.ids}function tr(e,t){t||(t=Pr(e));for(var i,n=t.substring(t.indexOf("-")+1),r=e.rev_tree.map(ba);i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function Ir(e){return/^_local/.test(e)}function ho(e){return e.reduce(function(t,n){return t[n]=!0,t},{})}var Rn=ho(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),_s=ho(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Qr(e){if(!/^\d+-/.test(e))return Ne(ge);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function po(e,t,n){n||(n={deterministic_revs:!0});var r,i,f,h={status:"available"};if(e._deleted&&(h.deleted=!0),t)if(e._id||(e._id=ro()),i=Ri(e,n.deterministic_revs),e._rev){if((f=Qr(e._rev)).error)return f;e._rev_tree=[{pos:f.prefix,ids:[f.id,{status:"missing"},[[i,h,[]]]]}],r=f.prefix+1}else e._rev_tree=[{pos:1,ids:[i,h,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],f=1,h=r.length;f<h;f++)i=[r[f],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,h),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if((f=Qr(e._rev)).error)return f;e._rev_tree=[{pos:r=f.prefix,ids:[i=f.id,h,[]]}]}to(e._id),e._rev=r+"-"+i;var D={metadata:{},data:{}};for(var F in e)if(Object.prototype.hasOwnProperty.call(e,F)){var H="_"===F[0];if(H&&!Rn[F]){var J=Ne(Q,F);throw J.message=Q.message+": "+F,J}H&&!_s[F]?D.metadata[F.slice(1)]=e[F]:D.data[F]=e[F]}return D}function Es(e,t,n){if(e.stub)return n();"string"==typeof e.data?function(e,t,n){var r=function(e){try{return gn(e)}catch{return{error:Ne(x,"Attachment is not a valid base64 string")}}}(e.data);if(r.error)return n(r.error);e.length=r.length,e.data="blob"===t?Hn(r,e.content_type):"base64"===t?yn(r):r,ii(r,function(i){e.digest="md5-"+i,n()})}(e,t,n):function(e,t,n){ii(e.data,function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,"binary"===t?zt(e.data,function(i){e.data=i,n()}):"base64"===t?function(e,t){zt(e,function(n){t(yn(n))})}(e.data,function(i){e.data=i,n()}):n()})}(e,t,n)}function mo(e,t,n,r,i,f,h,D,F){e=e||1e3;var J=D.new_edits,ae=new E,ce=0,we=t.length;function me(){++ce===we&&F&&F()}t.forEach(function(fe,_e){if(fe._id&&Ir(fe._id))n[fe._deleted?"_removeLocal":"_putLocal"](fe,{ctx:i},function(Ie,je){f[_e]=Ie||je,me()});else{var Me=fe.metadata.id;ae.has(Me)?(we--,ae.get(Me).push([fe,_e])):ae.set(Me,[[fe,_e]])}}),ae.forEach(function(fe,_e){var Te=0;function Me(){++Te<fe.length?Ie():me()}function Ie(){var je=fe[Te],$e=je[0],Je=je[1];if(r.has(_e))!function(e,t,n,r,i,f,h,D){if(function(e,t){for(var h,n=e.slice(),r=t.split("-"),i=parseInt(r[0],10),f=r[1];h=n.pop();){if(h.pos===i&&h.ids[0]===f)return!0;for(var D=h.ids[2],F=0,H=D.length;F<H;F++)n.push({pos:h.pos+1,ids:D[F]})}return!1}(t.rev_tree,n.metadata.rev)&&!D)return r[i]=n,f();var F=t.winningRev||Pr(t),H="deleted"in t?t.deleted:tr(t,F),J="deleted"in n.metadata?n.metadata.deleted:tr(n.metadata),ae=/^1-/.test(n.metadata.rev);if(H&&!J&&D&&ae){var ce=n.data;ce._rev=F,ce._id=n.metadata.id,n=po(ce,D)}var we=fo(t.rev_tree,n.metadata.rev_tree[0],e);if(D&&(H&&J&&"new_leaf"!==we.conflicts||!H&&"new_leaf"!==we.conflicts||H&&!J&&"new_branch"===we.conflicts)){var fe=Ne(m);return r[i]=fe,f()}var _e=n.metadata.rev;n.metadata.rev_tree=we.tree,n.stemmedRevs=we.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var Te=Pr(n.metadata),Me=tr(n.metadata,Te),Ie=H===Me?0:H<Me?-1:1;h(n,Te,Me,_e===Te?Me:tr(n.metadata,_e),!0,Ie,i,f)}(e,r.get(_e),$e,f,Je,Me,h,J);else{var Ke=fo([],$e.metadata.rev_tree[0],e);$e.metadata.rev_tree=Ke.tree,$e.stemmedRevs=Ke.stemmedRevs||[],function(fe,_e,Te){var Me=Pr(fe.metadata),Ie=tr(fe.metadata,Me);if("was_delete"in D&&Ie)return f[_e]=Ne(o,"deleted"),Te();var je=J&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(fe);if(je){var $e=Ne(m);return f[_e]=$e,Te()}h(fe,Me,Ie,Ie,!1,Ie?0:1,_e,Te)}($e,Je,Me)}}Ie()})}var Bi=l(2899);function Tr(e){try{return JSON.stringify(e)}catch{return Bi.stringify(e)}}var en="document-store",sn="by-sequence",xn="attach-store",mr="attach-seq-store",on="meta-store",Un="local-store",Ss="detect-blob-support";function kn(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(Ne(be,n))}}function ws(e,t,n){return{data:Tr(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function Rr(e){if(!e)return null;var t=function(e){try{return JSON.parse(e)}catch{return Bi.parse(e)}}(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function hi(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Fi(e,t,n,r){n?r(e?"string"!=typeof e?e:xe(e,t):_n([""],{type:t})):e?"string"!=typeof e?It(e,function(i){r(yn(i))}):r(e):r("")}function Cs(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var f=0;function h(){++f===i.length&&r&&r()}i.forEach(function(F){t.attachments&&t.include_docs?function(F,H){var J=F._attachments[H],ae=J.digest;n.objectStore(xn).get(ae).onsuccess=function(we){J.body=we.target.result.body,h()}}(e,F):(e._attachments[F].stub=!0,h())})}function Ni(e,t){return Promise.all(e.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var f=n.doc._attachments[i];if("body"in f){var h=f.body,D=f.content_type;return new Promise(function(F){Fi(h,D,t,function(H){n.doc._attachments[i]=Dr(Ar(f,["digest","content_type"]),{data:H}),F()})})}}))}}))}function ji(e,t,n){var r=[],i=n.objectStore(sn),f=n.objectStore(xn),h=n.objectStore(mr),D=e.length;function F(){--D||!r.length||r.forEach(function(J){h.index("digestSeq").count(IDBKeyRange.bound(J+"::",J+"::\uffff",!1,!1)).onsuccess=function(ce){ce.target.result||f.delete(J)}})}e.forEach(function(J){i.index("_doc_id_rev").getKey(t+"::"+J).onsuccess=function(we){var me=we.target.result;if("number"!=typeof me)return F();i.delete(me),h.index("seq").openCursor(IDBKeyRange.only(me)).onsuccess=function(_e){var Te=_e.target.result;if(Te){var Me=Te.value.digestSeq.split("::")[0];r.push(Me),h.delete(Te.primaryKey),Te.continue()}else F()}}})}function Ln(e,t,n){try{return{txn:e.transaction(t,n)}}catch(r){return{error:r}}}var Mr=new Be;function vo(e,t,n,r,i,f){for(var D,F,H,J,ae,ce,we,me,h=t.docs,fe=0,_e=h.length;fe<_e;fe++){var Te=h[fe];Te._id&&Ir(Te._id)||(Te=h[fe]=po(Te,n.new_edits,e)).error&&!we&&(we=Te)}if(we)return f(we);var Me=!1,Ie=0,je=new Array(h.length),$e=new E,Je=!1;function yt(){Me=!0,Dt()}function Dt(){!me||!Me||(me.docCount+=Ie,ce.put(me))}function Lt(){Je||(Mr.notify(r._meta.name),f(null,je))}function jt(Ue,Ze,it,dt,ot,pt,lt,Ve){Ue.metadata.winningRev=Ze,Ue.metadata.deleted=it;var ft=Ue.data;if(ft._id=Ue.metadata.id,ft._rev=Ue.metadata.rev,dt&&(ft._deleted=!0),ft._attachments&&Object.keys(ft._attachments).length)return function(Ue,Ze,it,dt,ot,pt){var Ve=0,ft=Object.keys(Ue.data._attachments);function wt(){Ve===ft.length&&Ae(Ue,Ze,it,dt,ot,pt)}function Vt(){Ve++,wt()}ft.forEach(function($t){var Ut=Ue.data._attachments[$t];if(Ut.stub)Ve++,wt();else{var Wt=Ut.data;delete Ut.data,Ut.revpos=parseInt(Ze,10),function(Ue,Ze,it){J.count(Ue).onsuccess=function(ot){if(ot.target.result)return it();J.put({digest:Ue,body:Ze}).onsuccess=it}}(Ut.digest,Wt,Vt)}})}(Ue,Ze,it,ot,lt,Ve);Ie+=pt,Dt(),Ae(Ue,Ze,it,ot,lt,Ve)}function Ae(Ue,Ze,it,dt,ot,pt){var lt=Ue.data,Ve=Ue.metadata;function ft(Ut){var Wt=Ue.stemmedRevs||[];dt&&r.auto_compaction&&(Wt=Wt.concat(function(e){var t=[];return Or(e.rev_tree,function(n,r,i,f,h){"available"===h.status&&!n&&(t.push(r+"-"+i),h.status="missing")}),t}(Ue.metadata))),Wt&&Wt.length&&ji(Wt,Ue.metadata.id,D),Ve.seq=Ut.target.result;var rn=ws(Ve,Ze,it);F.put(rn).onsuccess=Vt}function Vt(){je[ot]={ok:!0,id:Ve.id,rev:Ve.rev},$e.set(Ue.metadata.id,Ue.metadata),function(Ue,Ze,it){var dt=0,ot=Object.keys(Ue.data._attachments||{});if(!ot.length)return it();function pt(){++dt===ot.length&&it()}function lt(ft){var Vt=ae.put({seq:Ze,digestSeq:Ue.data._attachments[ft].digest+"::"+Ze});Vt.onsuccess=pt,Vt.onerror=function($t){$t.preventDefault(),$t.stopPropagation(),pt()}}for(var Ve=0;Ve<ot.length;Ve++)lt(ot[Ve])}(Ue,Ve.seq,pt)}lt._doc_id_rev=Ve.id+"::"+Ve.rev,delete lt._id,delete lt._rev;var $t=H.put(lt);$t.onsuccess=ft,$t.onerror=function(Ut){Ut.preventDefault(),Ut.stopPropagation(),H.index("_doc_id_rev").getKey(lt._doc_id_rev).onsuccess=function(fr){H.put(lt,fr.target.result).onsuccess=ft}}}!function(e,t,n){if(!e.length)return n();var i,r=0;function f(){r++,e.length===r&&(i?n(i):n())}e.forEach(function(h){var D=h.data&&h.data._attachments?Object.keys(h.data._attachments):[],F=0;if(!D.length)return f();function H(ae){i=ae,++F===D.length&&f()}for(var J in h.data._attachments)h.data._attachments.hasOwnProperty(J)&&Es(h.data._attachments[J],t,H)})}(h,r._meta.blobSupport?"blob":"base64",function(Ue){if(Ue)return f(Ue);!function(){var Ze=Ln(i,[en,sn,xn,Un,mr,on],"readwrite");if(Ze.error)return f(Ze.error);(D=Ze.txn).onabort=kn(f),D.ontimeout=kn(f),D.oncomplete=Lt,F=D.objectStore(en),H=D.objectStore(sn),J=D.objectStore(xn),ae=D.objectStore(mr),(ce=D.objectStore(on)).get(on).onsuccess=function(it){me=it.target.result,Dt()},function(Ue){var Ze=[];if(h.forEach(function(pt){pt.data&&pt.data._attachments&&Object.keys(pt.data._attachments).forEach(function(lt){var Ve=pt.data._attachments[lt];Ve.stub&&Ze.push(Ve.digest)})}),!Ze.length)return Ue();var dt,it=0;Ze.forEach(function(pt){!function(Ue,Ze){J.get(Ue).onsuccess=function(dt){if(dt.target.result)Ze();else{var ot=Ne(le,"unknown stub attachment with digest "+Ue);ot.status=412,Ze(ot)}}}(pt,function(lt){lt&&!dt&&(dt=lt),++it===Ze.length&&Ue(dt)})})}(function(it){if(it)return Je=!0,f(it);!function(){if(h.length)for(var Ue=0,dt=0,ot=h.length;dt<ot;dt++){var pt=h[dt];pt._id&&Ir(pt._id)?Ze():F.get(pt.metadata.id).onsuccess=it}function Ze(){++Ue===h.length&&mo(e.revs_limit,h,r,$e,D,je,jt,n,yt)}function it(Ve){var ft=Rr(Ve.target.result);ft&&$e.set(ft.id,ft),Ze()}}()})}()})}function Ui(e,t,n,r,i){var h,D,F;function H(we){D=we.target.result,h&&i(h,D,F)}function J(we){h=we.target.result,D&&i(h,D,F)}function ce(we){var me=we.target.result;if(!me)return i();i([me.key],[me.value],me)}-1===r&&(r=1e3),"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&r>1&&!n?(F={continue:function(){if(!h.length)return i();var me,we=h[h.length-1];if(t&&t.upper)try{me=IDBKeyRange.bound(we,t.upper,!0,t.upperOpen)}catch(fe){if("DataError"===fe.name&&0===fe.code)return i()}else me=IDBKeyRange.lowerBound(we,!0);h=null,D=null,e.getAll(t=me,r).onsuccess=H,e.getAllKeys(t,r).onsuccess=J}},e.getAll(t,r).onsuccess=H,e.getAllKeys(t,r).onsuccess=J):n?e.openCursor(t,"prev").onsuccess=ce:e.openCursor(t).onsuccess=ce}var $i=!1,Ds=[];function Ps(){$i||!Ds.length||($i=!0,Ds.shift()())}function yo(e,t,n,r){if((e=pn(e)).continuous){var i=n+":"+ro();return Mr.addListener(n,i,t,e),Mr.notify(n),{cancel:function(){Mr.removeListener(n,i)}}}var f=e.doc_ids&&new w(e.doc_ids);e.since=e.since||0;var h=e.since,D="limit"in e?e.limit:-1;0===D&&(D=1);var ce,we,me,fe,F=[],H=0,J=function(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(i){i.doc||(i.doc={});var f=n&&function(e,t,n){try{return!e(t,n)}catch(i){var r="Filter function threw: "+i.toString();return Ne(G,r)}}(e.filter,i.doc,t);if("object"==typeof f)return f;if(f)return!1;if(e.include_docs){if(!e.attachments)for(var h in i.doc._attachments)i.doc._attachments.hasOwnProperty(h)&&(i.doc._attachments[h].stub=!0)}else delete i.doc;return!0}}(e),ae=new E;function Te(tt,yt,St,Dt){return St.seq!==yt?Dt():St.winningRev===tt._rev?Dt(St,tt):void(fe.get(tt._id+"::"+St.winningRev).onsuccess=function(bt){Dt(St,hi(bt.target.result))})}function Ie(){e.complete(null,{results:F,last_seq:h})}var $e=[en,sn];e.attachments&&$e.push(xn);var Je=Ln(r,$e,"readonly");if(Je.error)return e.complete(Je.error);(ce=Je.txn).onabort=kn(e.complete),ce.oncomplete=function(){!e.continuous&&e.attachments?Ni(F).then(Ie):Ie()},we=ce.objectStore(sn),me=ce.objectStore(en),fe=we.index("_doc_id_rev"),Ui(we,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,D,function(tt,yt,St){if(St&&tt.length){var Dt=new Array(tt.length),Nt=new Array(tt.length),Tt=0;yt.forEach(function(jt,Ae){!function(tt,yt,St){if(f&&!f.has(tt._id))return St();var Dt=ae.get(tt._id);if(Dt)return Te(tt,yt,Dt,St);me.get(tt._id).onsuccess=function(Nt){Dt=Rr(Nt.target.result),ae.set(tt._id,Dt),Te(tt,yt,Dt,St)}}(hi(jt),tt[Ae],function(Ge,Ue){Nt[Ae]=Ge,Dt[Ae]=Ue,++Tt===tt.length&&function(){for(var jt=[],Ae=0,De=Dt.length;Ae<De&&H!==D;Ae++){var ke=Dt[Ae];ke&&jt.push(Lt(Nt[Ae],ke))}Promise.all(jt).then(function(Ue){for(var Ze=0,it=Ue.length;Ze<it;Ze++)Ue[Ze]&&e.onChange(Ue[Ze])}).catch(e.complete),H!==D&&St.continue()}()})})}function Lt(jt,Ae){var De=e.processChange(Ae,jt,e);h=De.seq=jt.seq;var ke=J(De);return"object"==typeof ke?Promise.reject(ke):ke?(H++,e.return_docs&&F.push(De),e.attachments&&e.include_docs?new Promise(function(Ge){Cs(Ae,e,ce,function(){Ni([De],e.binary).then(function(){Ge(De)})})}):Promise.resolve(De)):Promise.resolve()}})}var Is,Zr=new E,Wi=new E;function Ra(e,t){var n=this;!function(e,t,n){Ds.push(function(){e(function(f,h){(function(e,t,n,r){try{e(t,n)}catch(i){r.emit("error",i)}})(t,f,h,n),$i=!1,T()(function(){Ps()})})}),Ps()}(function(r){!function(e,t,n){var r=t.name,i=null;function h(me,fe){var _e=me.objectStore(en);_e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),_e.openCursor().onsuccess=function(Te){var Me=Te.target.result;if(Me){var Ie=Me.value,je=tr(Ie);Ie.deletedOrLocal=je?"1":"0",_e.put(Ie),Me.continue()}else fe()}}function F(me,fe){var _e=me.objectStore(Un),Te=me.objectStore(en),Me=me.objectStore(sn);Te.openCursor().onsuccess=function(je){var $e=je.target.result;if($e){var Je=$e.value,Ke=Je.id,tt=Ir(Ke),yt=Pr(Je);if(tt){var St=Ke+"::"+yt,Dt=Ke+"::",Nt=Ke+"::~",Lt=Me.index("_doc_id_rev"),bt=IDBKeyRange.bound(Dt,Nt,!1,!1),Tt=Lt.openCursor(bt);Tt.onsuccess=function(jt){if(Tt=jt.target.result){var Ae=Tt.value;Ae._doc_id_rev===St&&_e.put(Ae),Me.delete(Tt.primaryKey),Tt.continue()}else Te.delete($e.primaryKey),$e.continue()}}else $e.continue()}else fe&&fe()}}function J(me,fe){var _e=me.objectStore(sn),Te=me.objectStore(xn),Me=me.objectStore(mr);Te.count().onsuccess=function(je){if(!je.target.result)return fe();_e.openCursor().onsuccess=function(Je){var Ke=Je.target.result;if(!Ke)return fe();for(var tt=Ke.value,yt=Ke.primaryKey,St=Object.keys(tt._attachments||{}),Dt={},Nt=0;Nt<St.length;Nt++)Dt[tt._attachments[St[Nt]].digest]=!0;var bt=Object.keys(Dt);for(Nt=0;Nt<bt.length;Nt++)Me.put({seq:yt,digestSeq:bt[Nt]+"::"+yt});Ke.continue()}}}function ae(me){var _e=me.objectStore(sn),Te=me.objectStore(en);Te.openCursor().onsuccess=function(Ie){var tt,yt,St,Dt,je=Ie.target.result;if(je){var $e=function(Ie){return Ie.data?Rr(Ie):(Ie.deleted="1"===Ie.deletedOrLocal,Ie)}(je.value);if($e.winningRev=$e.winningRev||Pr($e),$e.seq)return Ke();tt=$e.id+"::",yt=$e.id+"::\uffff",St=_e.index("_doc_id_rev").openCursor(IDBKeyRange.bound(tt,yt)),Dt=0,St.onsuccess=function(Nt){var Lt=Nt.target.result;if(!Lt)return $e.seq=Dt,Ke();var bt=Lt.primaryKey;bt>Dt&&(Dt=bt),Lt.continue()}}function Ke(){var tt=ws($e,$e.winningRev,$e.deleted);Te.put(tt).onsuccess=function(){je.continue()}}}}e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=qt(function(me){me(null,e._meta.instanceId)}),e._bulkDocs=function(fe,_e,Te){vo(t,fe,_e,e,i,Te)},e._get=function(fe,_e,Te){var Me,Ie,je,$e=_e.ctx;if(!$e){var Je=Ln(i,[en,sn,xn],"readonly");if(Je.error)return Te(Je.error);$e=Je.txn}function Ke(){Te(je,{doc:Me,metadata:Ie,ctx:$e})}$e.objectStore(en).get(fe).onsuccess=function(tt){if(!(Ie=Rr(tt.target.result)))return je=Ne(o,"missing"),Ke();var yt;if(_e.rev)yt=_e.latest?function(e,t){for(var r,n=t.rev_tree.slice();r=n.pop();){var i=r.pos,f=r.ids,h=f[0],D=f[1],F=f[2],H=0===F.length,J=r.history?r.history.slice():[];if(J.push({id:h,pos:i,opts:D}),H)for(var ae=0,ce=J.length;ae<ce;ae++){var we=J[ae];if(we.pos+"-"+we.id===e)return i+"-"+h}for(var fe=0,_e=F.length;fe<_e;fe++)n.push({pos:i+1,ids:F[fe],history:J})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(_e.rev,Ie):_e.rev;else if(yt=Ie.winningRev,tr(Ie))return je=Ne(o,"deleted"),Ke();var Dt=$e.objectStore(sn),Nt=Ie.id+"::"+yt;Dt.index("_doc_id_rev").get(Nt).onsuccess=function(Lt){if((Me=Lt.target.result)&&(Me=hi(Me)),!Me)return je=Ne(o,"missing"),Ke();Ke()}}},e._getAttachment=function(me,fe,_e,Te,Me){var Ie;if(Te.ctx)Ie=Te.ctx;else{var je=Ln(i,[en,sn,xn],"readonly");if(je.error)return Me(je.error);Ie=je.txn}var $e=_e.digest,Je=_e.content_type;Ie.objectStore(xn).get($e).onsuccess=function(Ke){Fi(Ke.target.result.body,Je,Te.binary,function(yt){Me(null,yt)})}},e._info=function(fe){var _e,Te,Me=Ln(i,[on,sn],"readonly");if(Me.error)return fe(Me.error);var Ie=Me.txn;Ie.objectStore(on).get(on).onsuccess=function(je){Te=je.target.result.docCount},Ie.objectStore(sn).openCursor(null,"prev").onsuccess=function(je){var $e=je.target.result;_e=$e?$e.key:0},Ie.oncomplete=function(){fe(null,{doc_count:Te,update_seq:_e,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(fe,_e){!function(e,t,n){var J,ae,h="keys"in e&&e.keys,D=e.skip||0,F="number"==typeof e.limit?e.limit:-1;if(!h&&(J=function(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(f){return{error:f}}return null}("startkey"in e&&e.startkey,"endkey"in e&&e.endkey,!1!==e.inclusive_end,"key"in e&&e.key,e.descending),(ae=J&&J.error)&&("DataError"!==ae.name||0!==ae.code)))return n(Ne(be,ae.name));var ce=[en,sn,on];e.attachments&&ce.push(xn);var we=Ln(t,ce,"readonly");if(we.error)return n(we.error);var me=we.txn;me.oncomplete=function(){e.attachments?Ni(Ie,e.binary).then(Nt):Nt()},me.onabort=kn(n);var je,$e,Tt,fe=me.objectStore(en),_e=me.objectStore(sn),Te=me.objectStore(on),Me=_e.index("_doc_id_rev"),Ie=[];function tt(bt,Tt){var jt={id:Tt.id,key:Tt.id,value:{rev:bt}};Tt.deleted?h&&(Ie.push(jt),jt.value.deleted=!0,jt.doc=null):D--<=0&&(Ie.push(jt),e.include_docs&&function(bt,Tt,jt){Me.get(bt.id+"::"+jt).onsuccess=function(ke){if(Tt.doc=hi(ke.target.result)||{},e.conflicts){var Ge=di(bt);Ge.length&&(Tt.doc._conflicts=Ge)}Cs(Tt.doc,e,me)}}(Tt,jt,bt))}function yt(bt){for(var Tt=0,jt=bt.length;Tt<jt&&Ie.length!==F;Tt++){var Ae=bt[Tt];if(Ae.error&&h)Ie.push(Ae);else{var De=Rr(Ae);tt(De.winningRev,De)}}}function St(bt,Tt,jt){!jt||(yt(Tt),Ie.length<F&&jt.continue())}function Nt(){var bt={total_rows:je,offset:e.skip,rows:Ie};e.update_seq&&void 0!==$e&&(bt.update_seq=$e),n(null,bt)}if(Te.get(on).onsuccess=function(bt){je=bt.target.result.docCount},e.update_seq&&(Tt=function(bt){bt.target.result&&bt.target.result.length>0&&($e=bt.target.result[0])},_e.openCursor(null,"prev").onsuccess=function(Ae){var De=Ae.target.result,ke=void 0;return De&&De.key&&(ke=De.key),Tt({target:{result:[ke]}})}),!ae&&0!==F){if(h)return function(e,t,n){var r=new Array(e.length),i=0;e.forEach(function(f,h){t.get(f).onsuccess=function(D){r[h]=D.target.result?D.target.result:{key:f,error:"not_found"},++i===e.length&&n(e,r,{})}})}(e.keys,fe,St);if(-1===F)return function(e,t,n){if("function"!=typeof e.getAll){var r=[];e.openCursor(t).onsuccess=function(f){var h=f.target.result;h?(r.push(h.value),h.continue()):n({target:{result:r}})}}else e.getAll(t).onsuccess=n}(fe,J,function(bt){var Tt=bt.target.result;e.descending&&(Tt=Tt.reverse()),yt(Tt)});Ui(fe,J,e.descending,F+D,St)}}(fe,i,_e)},e._changes=function(fe){return yo(fe,e,r,i)},e._close=function(me){i.close(),Zr.delete(r),me()},e._getRevisionTree=function(me,fe){var _e=Ln(i,[en],"readonly");if(_e.error)return fe(_e.error);_e.txn.objectStore(en).get(me).onsuccess=function(Ie){var je=Rr(Ie.target.result);je?fe(null,je.rev_tree):fe(Ne(o))}},e._doCompaction=function(me,fe,_e){var Me=Ln(i,[en,sn,xn,mr],"readwrite");if(Me.error)return _e(Me.error);var Ie=Me.txn;Ie.objectStore(en).get(me).onsuccess=function($e){var Je=Rr($e.target.result);Or(Je.rev_tree,function(yt,St,Dt,Nt,Lt){-1!==fe.indexOf(St+"-"+Dt)&&(Lt.status="missing")}),ji(fe,me,Ie);var Ke=Je.winningRev,tt=Je.deleted;Ie.objectStore(en).put(ws(Je,Ke,tt))},Ie.onabort=kn(_e),Ie.oncomplete=function(){_e()}},e._getLocal=function(me,fe){var _e=Ln(i,[Un],"readonly");if(_e.error)return fe(_e.error);var Me=_e.txn.objectStore(Un).get(me);Me.onerror=kn(fe),Me.onsuccess=function(Ie){var je=Ie.target.result;je?(delete je._doc_id_rev,fe(null,je)):fe(Ne(o))}},e._putLocal=function(me,fe,_e){"function"==typeof fe&&(_e=fe,fe={}),delete me._revisions;var Te=me._rev,Me=me._id;me._rev=Te?"0-"+(parseInt(Te.split("-")[1],10)+1):"0-1";var je,Ie=fe.ctx;if(!Ie){var $e=Ln(i,[Un],"readwrite");if($e.error)return _e($e.error);(Ie=$e.txn).onerror=kn(_e),Ie.oncomplete=function(){je&&_e(null,je)}}var Ke,Je=Ie.objectStore(Un);Te?(Ke=Je.get(Me)).onsuccess=function(tt){var yt=tt.target.result;yt&&yt._rev===Te?Je.put(me).onsuccess=function(){je={ok:!0,id:me._id,rev:me._rev},fe.ctx&&_e(null,je)}:_e(Ne(m))}:((Ke=Je.add(me)).onerror=function(tt){_e(Ne(m)),tt.preventDefault(),tt.stopPropagation()},Ke.onsuccess=function(){je={ok:!0,id:me._id,rev:me._rev},fe.ctx&&_e(null,je)})},e._removeLocal=function(me,fe,_e){"function"==typeof fe&&(_e=fe,fe={});var Te=fe.ctx;if(!Te){var Me=Ln(i,[Un],"readwrite");if(Me.error)return _e(Me.error);(Te=Me.txn).oncomplete=function(){Ie&&_e(null,Ie)}}var Ie,je=me._id,$e=Te.objectStore(Un),Je=$e.get(je);Je.onerror=kn(_e),Je.onsuccess=function(Ke){var tt=Ke.target.result;tt&&tt._rev===me._rev?($e.delete(je),Ie={ok:!0,id:je,rev:"0-0"},fe.ctx&&_e(null,Ie)):_e(Ne(o))}},e._destroy=function(me,fe){Mr.removeAllListeners(r);var _e=Wi.get(r);_e&&_e.result&&(_e.result.close(),Zr.delete(r));var Te=indexedDB.deleteDatabase(r);Te.onsuccess=function(){Wi.delete(r),ie()&&r in localStorage&&delete localStorage[r],fe(null,{ok:!0})},Te.onerror=kn(fe)};var ce=Zr.get(r);if(ce)return i=ce.idb,e._meta=ce.global,T()(function(){n(null,e)});var we=indexedDB.open(r,5);Wi.set(r,we),we.onupgradeneeded=function(me){var fe=me.target.result;if(me.oldVersion<1)return function(me){var fe=me.createObjectStore(en,{keyPath:"id"});me.createObjectStore(sn,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),me.createObjectStore(xn,{keyPath:"digest"}),me.createObjectStore(on,{keyPath:"id",autoIncrement:!1}),me.createObjectStore(Ss),fe.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),me.createObjectStore(Un,{keyPath:"_id"});var _e=me.createObjectStore(mr,{autoIncrement:!0});_e.createIndex("seq","seq"),_e.createIndex("digestSeq","digestSeq",{unique:!0})}(fe);var _e=me.currentTarget.transaction;me.oldVersion<3&&function(me){me.createObjectStore(Un,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(fe),me.oldVersion<4&&function(me){var fe=me.createObjectStore(mr,{autoIncrement:!0});fe.createIndex("seq","seq"),fe.createIndex("digestSeq","digestSeq",{unique:!0})}(fe);var Te=[h,F,J,ae],Me=me.oldVersion;!function Ie(){var je=Te[Me-1];Me++,je&&je(_e,Ie)}()},we.onsuccess=function(me){(i=me.target.result).onversionchange=function(){i.close(),Zr.delete(r)},i.onabort=function(Ke){rt("error","Database has a global failure",Ke.target.error),i.close(),Zr.delete(r)};var Te,Me,Ie,je,fe=i.transaction([on,Ss,en],"readwrite"),_e=!1;function $e(){void 0===Ie||!_e||(e._meta={name:r,instanceId:je,blobSupport:Ie},Zr.set(r,{idb:i,global:e._meta}),n(null,e))}function Je(){if(void 0!==Me&&void 0!==Te){var Ke=r+"_id";Ke in Te?je=Te[Ke]:Te[Ke]=je=ro(),Te.docCount=Me,fe.objectStore(on).put(Te)}}fe.objectStore(on).get(on).onsuccess=function(Ke){Te=Ke.target.result||{id:on},Je()},function(e,t){e.objectStore(en).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(r){Me=r.target.result,Je()}}(fe),Is||(Is=function(e){return new Promise(function(t){var n=_n([""]),r=e.objectStore(Ss).put(n,"key");r.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),f=navigator.userAgent.match(/Edge\//);t(f||!i||parseInt(i[1],10)>=43)},r.onerror=e.onabort=function(i){i.preventDefault(),i.stopPropagation(),t(!1)}}).catch(function(){return!1})}(fe)),Is.then(function(Ke){Ie=Ke,$e()}),fe.oncomplete=function(){_e=!0,$e()},fe.onabort=kn(n)},we.onerror=function(me){var fe=me.target.error&&me.target.error.message;fe?-1!==fe.indexOf("stored database is a higher version")&&(fe=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):fe="Failed to open indexedDB, are you in private browsing mode?",rt("error",fe),n(Ne(be,fe))}}(n,e,r)},t,n.constructor)}Ra.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch{return!1}};const bo=function(e){e.adapter("idb",Ra,!0)};var Ht=l(4004),zn=l(4966),xa=l.n(zn),ka=l(1452),La=l.n(ka),Eo=l(9456),Ki=l.n(Eo);function Bt(e){var t=e.split("-"),n="RxDB";return t.forEach(function(r){n+=tn(r)}),n+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+n+" } from 'rxdb/plugins/"+e+"';\n            addRxPlugin("+n+");\n        ")}function Ts(e){return"string"!=typeof e&&(e=JSON.stringify(e)),La().hash("rxdb-specific-hash-salt"+e)}var Rs=0;function Gn(){var e=(new Date).getTime();return e<=Rs&&(e=Rs+1),Rs=e,e}function xr(){return new Promise(function(e){return setTimeout(e,0)})}function wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){return setTimeout(t,e)})}Promise.resolve(!0);var En=Promise.resolve(!1),mi=Promise.resolve(null),nr=Promise.resolve();function tn(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)}function kr(e){for(;"."===e.charAt(0);)e=e.substr(1);for(;"."===e.slice(-1);)e=e.slice(0,-1);return e}function vi(e){if(!e)throw new Error("ensureNotFalsy() is falsy");return e}function Hi(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;if(!t&&Array.isArray(e))return e.sort(function(r,i){return"string"==typeof r&&"string"==typeof i?r.localeCompare(i):"object"==typeof r?1:-1}).map(function(r){return Hi(r,t)});if("object"==typeof e&&!Array.isArray(e)){if(e instanceof RegExp)return e;var n={};return Object.keys(e).sort(function(r,i){return r.localeCompare(i)}).forEach(function(r){n[r]=Hi(e[r],t)}),n}return e}function Vi(e,t){return t instanceof RegExp?t.toString():t}function rr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="abcdefghijklmnopqrstuvwxyz",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function Qi(e){var t={db:e};return"string"==typeof e&&(t={adapter:e,db:void 0}),t}var Sn=function(e){return e&&xa()(e,!1)};function Ct(e){return Object.assign({},e)}function gi(e){return e[Object.keys(e)[0]]}var ks=Ki()();function Yi(e){var t={};for(var n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]){var r=Yi(e[n]);for(var i in r)!r.hasOwnProperty(i)||(t[n+"."+i]=r[i])}else t[n]=e[n];return t}function Lr(e){return function(e){var t=e.split("-");return{height:parseInt(t[0],10),hash:t[1]}}(e).height}function Br(e,t,n){return Object.defineProperty(e,t,{get:function(){return n}}),n}function Fr(e){return!(!e.includes("/")&&!e.includes("\\"))}function vr(e,t){var n=e.get(t);if(!n)throw new Error("missing value from map "+t);return n}function gr(e){return Array.isArray(e)}var $n_createBlobBuffer=function(t,n){var r;if(ks)return Buffer.from(t,{type:n});try{r=new Blob([t],{type:n})}catch{r=Buffer.from(t,{type:n})}return r},$n_toString=function(t){return"string"==typeof t?Promise.resolve(t):"undefined"!=typeof Buffer&&t instanceof Buffer?xr().then(function(){return t.toString()}):new Promise(function(n){var r=new FileReader;r.addEventListener("loadend",function(f){n(f.target.result)}),"[object Uint8Array]"===Object.prototype.toString.call(t)&&(t=new Blob([t])),r.readAsText(t)})},ir={bufferSize:1,refCount:!0};function Nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t,n){return t&&Nr(e.prototype,t),n&&Nr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function or(e,t){return(or=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r})(e,t)}function Ro(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,or(e,t)}function Bs(e){return(Bs=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(e)}function yi(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qn(e,t,n){return(Qn=yi()?Reflect.construct:function(i,f,h){var D=[null];D.push.apply(D,f);var H=new(Function.bind.apply(i,D));return h&&or(H,h.prototype),H}).apply(null,arguments)}function _i(e){var t="function"==typeof Map?new Map:void 0;return _i=function(r){if(null===r||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(r))return r;if("function"!=typeof r)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return Qn(r,arguments,Bs(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),or(i,r)},_i(e)}var cn={isDevMode:function(){return!1},deepFreezeWhenDevMode:function(t){return t},validatePassword:function(t){throw Bt("encryption")},tunnelErrorMessage:function(t){return"RxDB Error-Code "+t+".\n        - To find out what this means, use the dev-mode-plugin https://pubkey.github.io/rxdb/custom-build.html#dev-mode\n        - Or search for this code https://github.com/pubkey/rxdb/search?q="+t+"\n        "}};function xo(e,t,n){return"RxError ("+t+"):\n"+e+"\n"+function(e){var t="";return 0===Object.keys(e).length||(t+="Given parameters: {\n",t+=Object.keys(e).map(function(n){var r="[object Object]";try{r=JSON.stringify(e[n],function(i,f){return void 0===f?null:f},2)}catch{}return n+":"+r}).join("\n"),t+="}"),t}(n)}var bi=function(e){function t(r,i){var f,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},D=xo(i,r,h);return(f=e.call(this,D)||this).code=r,f.message=D,f.parameters=h,f.rxdb=!0,f}return Ro(t,e),t.prototype.toString=function(){return this.message},sr(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),t}(_i(Error)),ko=function(e){function t(r,i){var f,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},D=xo(i,r,h);return(f=e.call(this,D)||this).code=r,f.message=D,f.parameters=h,f.rxdb=!0,f}return Ro(t,e),t.prototype.toString=function(){return this.message},sr(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),t}(_i(TypeError));function Fe(e,t){return new bi(e,cn.tunnelErrorMessage(e),t)}function Ft(e,t){return new ko(e,cn.tunnelErrorMessage(e),t)}var jr={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],createRxQuery:[],preQueryMatcher:[],preSortComparator:[],prePrepareQuery:[],preWriteToStorageInstance:[],postReadFromInstance:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[]};function nn(e,t){jr[e].forEach(function(n){return n(t)})}function wn(e,t){return Promise.all(jr[e].map(function(n){return n(t)}))}var yr=function(t,n){try{return Promise.resolve(t.findLocalDocumentsById([n])).then(function(r){return r[n]||null})}catch(r){return Promise.reject(r)}},Wn=function(t,n){try{return Promise.resolve(t.bulkWrite([n])).then(function(r){if(Object.keys(r.error).length>0)throw gi(r.error);return gi(r.success)})}catch(r){return Promise.reject(r)}},Ji=function(t,n){try{return Promise.resolve(t.findDocumentsById([n],!1)).then(function(r){return r[n]||null})}catch(r){return Promise.reject(r)}},Ei=function(t,n){try{var r=t.statics.prepareQuery(n.schema,{selector:{}});return Promise.resolve(n.query(r)).then(function(i){return i.documents})}catch(i){return Promise.reject(i)}};function Ns(e,t,n){var r,f;if("DELETE"!==t.change.operation)if(n){var i={collection:n,doc:t.change.doc};nn("postReadFromInstance",i),r=n._crypter.decrypt(r=i.doc)}else r=t.change.doc;if("INSERT"!==t.change.operation)if(n){var h={collection:n,doc:t.change.previous};nn("postReadFromInstance",h),f=n._crypter.decrypt(f=h.doc)}else f=t.change.previous;return{eventId:t.eventId,documentId:t.documentId,collectionName:n?n.name:void 0,startTime:t.startTime,endTime:t.endTime,isLocal:e,operation:t.change.operation,documentData:cn.deepFreezeWhenDevMode(r),previousDocumentData:cn.deepFreezeWhenDevMode(f)}}function No(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}function ut(e,t,n){if(!e.s){if(n instanceof js){if(!n.s)return void(n.o=ut.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(ut.bind(null,e,t),ut.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var js=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var f=1&i?t:n;if(f){try{ut(r,1,f(this.v))}catch(h){ut(r,2,h)}return r}return this}return this.o=function(h){try{var D=h.v;1&h.s?ut(r,1,t?t(D):D):n?ut(r,1,n(D)):ut(r,2,D)}catch(F){ut(r,2,F)}},r},e}();function q(e){return e instanceof js&&1&e.s}function O(e,t,n){for(var r;;){var i=e();if(q(i)&&(i=i.v),!i)return f;if(i.then){r=0;break}var f=n();if(f&&f.then){if(!q(f)){r=1;break}f=f.s}if(t){var h=t();if(h&&h.then&&!q(h)){r=2;break}}}var D=new js,F=ut.bind(null,D,2);return(0===r?i.then(J):1===r?f.then(H):h.then(ae)).then(void 0,F),D;function H(ce){f=ce;do{if(t&&(h=t())&&h.then&&!q(h))return void h.then(ae).then(void 0,F);if(!(i=e())||q(i)&&!i.v)return void ut(D,1,f);if(i.then)return void i.then(J).then(void 0,F);q(f=n())&&(f=f.v)}while(!f||!f.then);f.then(H).then(void 0,F)}function J(ce){ce?(f=n())&&f.then?f.then(H).then(void 0,F):H(f):ut(D,1,f)}function ae(){(i=e())?i.then?i.then(J).then(void 0,F):J(i):ut(D,1,f)}}var _=function(t,n,r,i){try{return r.multiInstance=n.multiInstance,Promise.resolve(Promise.all([n.storage.createStorageInstance(r),n.storage.createKeyObjectStorageInstance({databaseName:n.name,collectionName:Re(t),options:i,multiInstance:n.multiInstance})])).then(function(f){return{storageInstance:f[0],localDocumentsStore:f[1]}})}catch(f){return Promise.reject(f)}},z=function(t,n){try{var r=!1,i=arguments,f=i.length>2&&void 0!==i[2]&&i[2],h={previous:n.previous?V(t,Ct(n.previous)):void 0,document:V(t,Ct(n.document))};return Promise.resolve(O(function(){return!r},void 0,function(){return No(function(){return Promise.resolve(t.database.lockedRun(function(){return Wn(t.storageInstance,h)})).then(function(D){var F=ue(t,D);return r=!0,F})},function(D){var F=D,H=F.documentId;return function(){if(f&&409===F.status)return Promise.resolve(t.database.lockedRun(function(){return Ji(t.storageInstance,H)})).then(function(J){if(!J)throw Fe("SNH",{args:{writeRow:n}});h.previous=J});throw 409===F.status?Fe("COL19",{collection:t.name,id:H,pouchDbError:F,data:n}):F}()})}))}catch(D){return Promise.reject(D)}};function V(e,t){cn.isDevMode()&&e.schema.fillPrimaryKey(t),t=e._crypter.encrypt(t);var n={collection:e,doc:t};return nn("preWriteToStorageInstance",n),n.doc}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={collection:e,doc:t};return nn("postReadFromInstance",r),n?r.doc:e._crypter.decrypt(r.doc)}function Ce(e,t){var n=e.schema.fillObjectWithDefaults(t);return e.schema.fillPrimaryKey(n)}function Re(e){return e+"-local"}function We(e){if(!e.collection.schema.jsonSchema.attachments)throw Fe("AT1",{link:"https://pubkey.github.io/rxdb/rx-attachment.html"})}var et=function(t,n){try{return Promise.resolve(t.hash(n)).then(function(r){var i=function(t){return"undefined"!=typeof Buffer&&t instanceof Buffer?Buffer.byteLength(t):t.size}(n);return{digest:t.hashKey+"-"+r,length:i}})}catch(r){return Promise.reject(r)}},Bn=function(t){try{var n=function(){var ce=i.collection.database.storage.statics;return i._atomicQueue=i._atomicQueue.then(function(){try{var we=function(Te){if(me)return Te;var Me=Ct(i._data);return Me._attachments=Ct(Me._attachments),Promise.resolve(et(i.collection.database.storage.statics,h)).then(function(Ie){Me._attachments[f]={digest:Ie.digest,length:Ie.length,type:F,data:h};var je={previous:V(i.collection,Ct(i._data)),document:V(i.collection,Ct(Me))};return Promise.resolve(Wn(i.collection.storageInstance,je)).then(function($e){var Ke=ar(f,$e._attachments[f],i),tt=Ct(i._data);return tt._rev=$e._rev,tt._attachments=$e._attachments,i._dataSync$.next(tt),Ke})})},me=!1,fe=function(){if(H&&i._data._attachments&&i._data._attachments[f]){var _e=i._data._attachments[f];return Promise.resolve(ce.hash(h)).then(function(Te){if(_e.type===F&&_e.digest===ce.hashKey+"-"+Te){var Ie=i.getAttachment(f);return me=!0,Ie}})}}();return Promise.resolve(fe&&fe.then?fe.then(we):we(fe))}catch(_e){return Promise.reject(_e)}}),i._atomicQueue},r=arguments,i=this,f=t.id,h=t.data,D=t.type,F=void 0===D?"text/plain":D,H=!(r.length>1&&void 0!==r[1])||r[1];We(i);var J=function(){if(fn(i.collection.schema))return Promise.resolve($n_toString(h)).then(function(ae){var ce=i.collection._crypter._encryptString(ae);h=$n_createBlobBuffer(ce,"text/plain")})}();return Promise.resolve(J&&J.then?J.then(n):n(J))}catch(ae){return Promise.reject(ae)}},Ur=function(){function e(n){var i=n.id,f=n.type,h=n.length,D=n.digest;this.doc=n.doc,this.id=i,this.type=f,this.length=h,this.digest=D,function(t){Object.entries(t.doc.collection.attachments).forEach(function(n){var i=n[1];Object.defineProperty(t,n[0],{get:function(){return i.bind(t)}})})}(this)}var t=e.prototype;return t.remove=function(){try{var r=this;return r.doc._atomicQueue=r.doc._atomicQueue.then(function(){try{var i=Ct(r.doc._data);return i._attachments=Ct(i._attachments),delete i._attachments[r.id],Promise.resolve(Wn(r.doc.collection.storageInstance,{previous:V(r.doc.collection,Ct(r.doc._data)),document:V(r.doc.collection,i)})).then(function(f){var h=Ct(r.doc._data);h._rev=f._rev,h._attachments=f._attachments,r.doc._dataSync$.next(h)})}catch(f){return Promise.reject(f)}}),Promise.resolve(r.doc._atomicQueue)}catch(i){return Promise.reject(i)}},t.getData=function(){try{var r=this;return Promise.resolve(r.doc.collection.storageInstance.getAttachmentData(r.doc.primary,r.id)).then(function(i){return fn(r.doc.collection.schema)?Promise.resolve($n_toString(i)).then(function(f){return $n_createBlobBuffer(r.doc.collection._crypter._decryptString(f),r.type)}):i})}catch(i){return Promise.reject(i)}},t.getStringData=function(){return this.getData().then(function(r){return $n_toString(r)})},e}();function ar(e,t,n){return new Ur({doc:n,id:e,type:t.type,length:t.length,digest:t.digest})}function fn(e){return!(!e.jsonSchema.attachments||!e.jsonSchema.attachments.encrypted)}function Us(e){We(this);var t=this._dataSync$.getValue();return t._attachments&&t._attachments[e]?ar(e,t._attachments[e],this):null}function jo(){var e=this;We(this);var t=this._dataSync$.getValue();return t._attachments?Object.keys(t._attachments).map(function(n){return ar(n,t._attachments[n],e)}):[]}var Uo={RxDocument:function(t){t.putAttachment=Bn,t.getAttachment=Us,t.allAttachments=jo,Object.defineProperty(t,"allAttachments$",{get:function(){var r=this;return this._dataSync$.pipe((0,Ht.U)(function(i){return i._attachments?i._attachments:{}}),(0,Ht.U)(function(i){return Object.entries(i)}),(0,Ht.U)(function(i){return i.map(function(f){return ar(f[0],f[1],r)})}))}})}},zo={preMigrateDocument:function(t){try{var n=t.docData._attachments,r=function(){if(n){var i=!!fn(t.oldCollection.schema),f={};return Promise.resolve(Promise.all(Object.keys(n).map(function(h){try{var D=n[h];return Promise.resolve(t.oldCollection.storageInstance.getAttachmentData(t.docData[t.oldCollection.schema.primaryPath],h)).then(function(H){function J(){return Promise.resolve(et(t.oldCollection.database.storage.statics,H)).then(function(ce){f[h]={digest:ce.digest,length:ce.length,type:D.type,data:H}})}var ae=function(){if(i)return Promise.resolve($n_toString(H).then(function(ce){return $n_createBlobBuffer(t.oldCollection._crypter._decryptString(ce),D.type)})).then(function(ce){H=ce})}();return ae&&ae.then?ae.then(J):J()})}catch(H){return Promise.reject(H)}}))).then(function(){t.docData._attachments=f})}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(i){return Promise.reject(i)}},postMigrateDocument:function(t){return Promise.resolve()}},ja={name:"attachments",rxdb:!0,prototypes:Uo,overwritable:{},hooks:zo},Fc=l(2559),Tu=l.n(Fc),Ru=l(8624),Cn=l.n(Ru),$o=l(1135),Wo=l(1884);function za(e,t){var n;return{version:e,type:"object",primaryKey:t,properties:(n={},n[t]={type:"string"},n),required:[t]}}function Xi(e,t){var n=t;return n=kr(n="properties."+(n=n.replace(/\./g,".properties."))),Cn().get(e,n)}function mn(e,t,n){if(!e.s){if(n instanceof wi){if(!n.s)return void(n.o=mn.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(mn.bind(null,e,t),mn.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var wi=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var f=1&i?t:n;if(f){try{mn(r,1,f(this.v))}catch(h){mn(r,2,h)}return r}return this}return this.o=function(h){try{var D=h.v;1&h.s?mn(r,1,t?t(D):D):n?mn(r,1,n(D)):mn(r,2,D)}catch(F){mn(r,2,F)}},r},e}();function qi(e){return e instanceof wi&&1&e.s}var $s={get _data(){if(this.isInstanceOfRxDocument)return this._dataSync$.getValue()},get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this._isDeleted$.asObservable()},get deleted(){if(this.isInstanceOfRxDocument)return this._isDeleted$.getValue()},get $(){return this._dataSync$.asObservable().pipe((0,Ht.U)(function(t){return cn.deepFreezeWhenDevMode(t)}))},_handleChangeEvent:function(t){if(t.documentId===this.primary){var r=Lr(((e=t).documentData?e.documentData:e.previousDocumentData)._rev);if(!(Lr(this._data._rev)>r))switch(t.operation){case"INSERT":break;case"UPDATE":this._dataSync$.next(t.documentData);break;case"DELETE":this.collection._docCache.delete(this.primary),this._isDeleted$.next(!0)}}var e},get$:function(t){if(t.includes(".item."))throw Fe("DOC1",{path:t});if(t===this.primaryPath)throw Fe("DOC2");if(this.collection.schema.finalFields.includes(t))throw Fe("DOC3",{path:t});if(!Xi(this.collection.schema.jsonSchema,t))throw Fe("DOC4",{path:t});return this._dataSync$.pipe((0,Ht.U)(function(r){return Cn().get(r,t)}),(0,Wo.x)())},populate:function(t){var n=Xi(this.collection.schema.jsonSchema,t),r=this.get(t);if(!r)return mi;if(!n)throw Fe("DOC5",{path:t});if(!n.ref)throw Fe("DOC6",{path:t,schemaObj:n});var i=this.collection.database.collections[n.ref];if(!i)throw Fe("DOC7",{ref:n.ref,path:t,schemaObj:n});return"array"===n.type?i.findByIds(r).then(function(f){var h=f.values();return Array.from(h)}):i.findOne(r).exec()},get:function(t){if(this._data){var n=Cn().get(this._data,t);return"object"!=typeof n||Array.isArray(n)?cn.deepFreezeWhenDevMode(n):(n=Sn(n),xu(this.collection.schema,n,t,this),n)}},toJSON:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)return cn.deepFreezeWhenDevMode(this._data);var n=Ct(this._data);return delete n._rev,delete n._attachments,cn.deepFreezeWhenDevMode(n)},set:function(t,n){if(!this._isTemporary)throw Ft("DOC16",{objPath:t,value:n});if("string"!=typeof t)throw Ft("DOC15",{objPath:t,value:n});if(!Object.is(this.get(t),n)){var r=t.split(".");r.pop();var i=r.join(".");if(void 0===Cn().get(this._data,i))throw Fe("DOC10",{childpath:t,rootPath:i});return Cn().set(this._data,t,n),this}},update:function(t){throw Bt("update")},putAttachment:function(){throw Bt("attachments")},getAttachment:function(){throw Bt("attachments")},allAttachments:function(){throw Bt("attachments")},get allAttachments$(){throw Bt("attachments")},atomicUpdate:function(t){var n=this;return new Promise(function(r,i){n._atomicQueue=n._atomicQueue.then(function(){try{var f=function(J){if(h)return J;r(n)},h=!1,D=!1,F=function(e,t,n){for(var r;;){var i=e();if(qi(i)&&(i=i.v),!i)return f;if(i.then){r=0;break}var h,f=n();if(f&&f.then){if(!qi(f)){r=1;break}f=f.s}}var D=new wi,F=mn.bind(null,D,2);return(0===r?i.then(J):1===r?f.then(H):h.then(ae)).then(void 0,F),D;function H(ce){f=ce;do{if(!(i=e())||qi(i)&&!i.v)return void mn(D,1,f);if(i.then)return void i.then(J).then(void 0,F);qi(f=n())&&(f=f.v)}while(!f||!f.then);f.then(H).then(void 0,F)}function J(ce){ce?(f=n())&&f.then?f.then(H).then(void 0,F):H(f):mn(D,1,f)}function ae(){(i=e())?i.then?i.then(J).then(void 0,F):J(i):mn(D,1,f)}}(function(){return!h&&!D},0,function(){var H=n._dataSync$.getValue(),J=function(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}(function(){return Promise.resolve(t(Sn(n._dataSync$.getValue()),n)).then(function(ae){return n.collection&&(ae=n.collection.schema.fillObjectWithDefaults(ae)),Promise.resolve(n._saveData(ae,H)).then(function(){D=!0})})},function(ae){var ce=function(){if((e=ae).parameters&&e.parameters.pouchDbError&&409===e.parameters.pouchDbError.status)return Promise.resolve(xr()).then(function(){});var e;i(ae),h=!0}();return ce&&ce.then?ce.then(function(){}):void 0});if(J&&J.then)return J.then(function(){})});return Promise.resolve(F&&F.then?F.then(f):f(F))}catch(H){return Promise.reject(H)}})})},atomicPatch:function(t){return this.atomicUpdate(function(n){return Object.entries(t).forEach(function(r){n[r[0]]=r[1]}),n})},_saveData:function(t,n){try{var r=this;if(t=t,r._isDeleted$.getValue())throw Fe("DOC11",{id:r.primary,document:r});return r.collection.schema.validateChange(n,t),Promise.resolve(r.collection._runHooks("pre","save",t,r)).then(function(){return r.collection.schema.validate(t),Promise.resolve(z(r.collection,{previous:n,document:t})).then(function(){return r.collection._runHooks("post","save",t,r)})})}catch(i){return Promise.reject(i)}},save:function(){var t=this;if(!this._isTemporary)throw Fe("DOC17",{id:this.primary,document:this});return this.collection.insert(this).then(function(){return t._isTemporary=!1,t.collection._docCache.set(t.primary,t),t._dataSync$.next(t._data),!0})},remove:function(){var t=this;if(this.deleted)return Promise.reject(Fe("DOC13",{document:this,id:this.primary}));var n=Ct(this._data);return this.collection._runHooks("pre","remove",n,this).then(function(){return n._deleted=!0,z(t.collection,{previous:t._data,document:n})}).then(function(){return t.collection._runHooks("post","remove",n,t)}).then(function(){return t})},destroy:function(){throw Fe("DOC14")}};function Mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$s,t=function(r,i){this.collection=r,this._isTemporary=!1,this._dataSync$=new $o.X(i),this._isDeleted$=new $o.X(!1),this._atomicQueue=nr,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function xu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!==t){var i=Xi(e.jsonSchema,n);void 0!==i&&(i.properties&&(i=i.properties),Object.keys(i).forEach(function(f){var h=kr(n+"."+f);t.__defineGetter__(f,function(){var D=r||this;if(D.get&&"function"==typeof D.get)return D.get(h)}),Object.defineProperty(t,f+"$",{get:function(){return(r||this).get$(h)},enumerable:!1,configurable:!1}),Object.defineProperty(t,f+"_",{get:function(){return(r||this).populate(h)},enumerable:!1,configurable:!1}),t.__defineSetter__(f,function(D){return(r||this).set(h,D)})}))}}function ku(e,t,n){if(n[t.schema.primaryPath]&&n[t.schema.primaryPath].startsWith("_design"))return null;var r=new e(t,n);return nn("createRxDocument",r),r}var $a=function(){function e(n){this.jsonSchema=n,this.indexes=function(e){return(e.indexes||[]).map(function(t){return gr(t)?t:[t]})}(this.jsonSchema),this.primaryPath=ur(this.jsonSchema.primaryKey),this.finalFields=function(e){var t=Object.keys(e.properties).filter(function(r){return e.properties[r].final}),n=ur(e.primaryKey);return t.push(n),"string"!=typeof e.primaryKey&&e.primaryKey.fields.forEach(function(r){return t.push(r)}),t}(this.jsonSchema),this.jsonSchema.required=this.jsonSchema.required.concat(this.finalFields).filter(function(r){return!r.includes(".")}).filter(function(r,i,f){return f.indexOf(r)===i})}var t=e.prototype;return t.validateChange=function(r,i){var f=this;this.finalFields.forEach(function(h){if(!Tu()(r[h],i[h]))throw Fe("DOC9",{dataBefore:r,dataAfter:i,fieldName:h,schema:f.jsonSchema})})},t.validate=function(r,i){},t.fillObjectWithDefaults=function(r){return r=Ct(r),Object.entries(this.defaultValues).filter(function(i){var f=i[0];return!r.hasOwnProperty(f)||void 0===r[f]}).forEach(function(i){return r[i[0]]=i[1]}),r},t.getDocumentPrototype=function(){var r={};return xu(this,r,""),Br(this,"getDocumentPrototype",function(){return r}),r},t.getPrimaryOfDocumentData=function(r){return Lu(this.jsonSchema,r)},t.fillPrimaryKey=function(r){var i=Ct(r),f=Lu(this.jsonSchema,r),h=r[this.primaryPath];if(h&&h!==f)throw Fe("DOC19",{args:{documentData:r,existingPrimary:h,newPrimary:f},schema:this.jsonSchema});return i[this.primaryPath]=f,i},sr(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"normalized",get:function(){return Br(this,"normalized",function(e){var t=Hi(Sn(e));return e.indexes&&(t.indexes=Array.from(e.indexes)),"object"==typeof t.primaryKey&&"object"==typeof e.primaryKey&&(t.primaryKey.fields=e.primaryKey.fields),t}(this.jsonSchema))}},{key:"topLevelFields",get:function(){return Object.keys(this.normalized.properties)}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.normalized.properties).filter(function(i){return i[1].hasOwnProperty("default")}).forEach(function(i){return r[i[0]]=i[1].default}),Br(this,"defaultValues",r)}},{key:"crypt",get:function(){return!!(this.jsonSchema.encrypted&&this.jsonSchema.encrypted.length>0||this.jsonSchema.attachments&&this.jsonSchema.attachments.encrypted)}},{key:"encryptedPaths",get:function(){return this.jsonSchema.encrypted||[]}},{key:"hash",get:function(){return Br(this,"hash",Ts(this.normalized))}}]),e}();function ur(e){return"string"==typeof e?e:e.key}function Lu(e,t){if("string"==typeof e.primaryKey)return t[e.primaryKey];var n=e.primaryKey;return n.fields.map(function(r){var i=Cn().get(t,r);if(void 0===i)throw Fe("DOC18",{args:{field:r,documentData:t}});return i}).join(n.separator)}function Vc(e){return(e=Sn(e)).additionalProperties=!1,e.hasOwnProperty("keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes||[],e.required=e.required||[],e.encrypted=e.encrypted||[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.version=e.version||0,e}var Bu=function(){function e(n,r){this.password=n,this.schema=r}var t=e.prototype;return t._encryptString=function(r){throw Bt("encryption")},t._decryptString=function(r){throw Bt("encryption")},t.encrypt=function(r){var i=this;if(!this.password)return r;var f=(r=Ct(r))._attachments;delete r._attachments;var h=Sn(r);return f&&(h._attachments=f),this.schema.encryptedPaths.forEach(function(D){var F=Cn().get(h,D);if(void 0!==F){var H=JSON.stringify(F),J=i._encryptString(H);Cn().set(h,D,J)}}),h},t.decrypt=function(r){var i=this;if(!this.password)return r;var f=(r=Ct(r))._attachments;delete r._attachments;var h=Sn(r);return f&&(h._attachments=f),this.schema.encryptedPaths.forEach(function(D){var F=Cn().get(h,D);if(void 0!==F){var H=i._decryptString(F),J=JSON.parse(H);Cn().set(h,D,J)}}),h},e}(),Zc=l(3905),Yc=l(6451),Ks=l(5577),In=l(9300),Hs=l(7579),Jc=l(6063);class Fu extends Hs.x{constructor(t=1/0,n=1/0,r=Jc.l){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:f,_windowTime:h}=this;n||(r.push(t),!i&&r.push(f.now()+h)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,f=i.slice();for(let h=0;h<f.length&&!t.closed;h+=r?1:2)t.next(f[h]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){const{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,f=(i?1:2)*t;if(t<1/0&&f<r.length&&r.splice(0,r.length-f),!i){const h=n.now();let D=0;for(let F=1;F<r.length&&r[F]<=h;F+=2)D=F;D&&r.splice(0,D+1)}}}var Xc=l(3099);function Nu(e,t,n){var r,i;let f,h=!1;return e&&"object"==typeof e?(f=null!==(r=e.bufferSize)&&void 0!==r?r:1/0,t=null!==(i=e.windowTime)&&void 0!==i?i:1/0,h=!!e.refCount,n=e.scheduler):f=e??1/0,(0,Xc.B)({connector:()=>new Fu(f,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:h})}var Vs=l(8505),Ka=new WeakMap,Ha=new WeakMap;function ju(e){if(!Ha.has(e)){var t=Mu(function(e){if(!Ka.has(e)){var t=e.schema.getDocumentPrototype(),n=function(e){var t={};return Object.entries(e.methods).forEach(function(n){t[n[0]]=n[1]}),t}(e),i={};[t,n,$s].forEach(function(f){Object.getOwnPropertyNames(f).forEach(function(D){var F=Object.getOwnPropertyDescriptor(f,D),H=!0;(D.startsWith("_")||D.endsWith("_")||D.startsWith("$")||D.endsWith("$"))&&(H=!1),"function"==typeof F.value?Object.defineProperty(i,D,{get:function(){return F.value.bind(this)},enumerable:H,configurable:!1}):(F.enumerable=H,F.configurable=!1,F.writable&&(F.writable=!1),Object.defineProperty(i,D,F))})}),Ka.set(e,i)}return Ka.get(e)}(e));Ha.set(e,t)}return Ha.get(e)}function es(e,t){var n=t[e.schema.primaryPath],r=e._docCache.get(n);if(r)return r;var i=ku(ju(e),e,cn.deepFreezeWhenDevMode(t));return e._docCache.set(n,i),e._runHooksSync("post","create",t,i),nn("postCreateRxDocument",i),i}var Ga=function(e){e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},Qa=function(e){e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},Gs=function(e){var t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},Qs=function(e){var t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},Za=function(e){e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);for(var t=e.queryParams.primaryKey,n=e.previousResults,r=0;r<n.length;r++)if(n[r][t]===e.changeEvent.id){n.splice(r,1);break}},ts=function(e){var t=e.changeEvent.id,n=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,n)}else if(e.previousResults.find(function(i){return i[e.queryParams.primaryKey]===t}))return;!function(e,t,n,r){var i=e,f=i.length-1,h=0,D=0;if(0===i.length)return i.push(t),i;for(;h<=f;)n(i[D=h+(f-h>>1)],t)<=0?h=D+1:f=D-1;n(i[D],t)<=0&&D++,i.splice(D,0,t)}(e.previousResults,n,e.queryParams.sortComparator)},$u=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Ho={doNothing:function(e){},insertFirst:Ga,insertLast:Qa,removeFirstItem:Gs,removeLastItem:Qs,removeFirstInsertLast:function(e){Gs(e),Qa(e)},removeLastInsertFirst:function(e){Qs(e),Ga(e)},removeFirstInsertFirst:function(e){Gs(e),Ga(e)},removeLastInsertLast:function(e){Qs(e),Qa(e)},removeExisting:Za,replaceExisting:function(e){for(var t=e.changeEvent.doc,n=e.queryParams.primaryKey,r=e.previousResults,i=0;i<r.length;i++)if(r[i][n]===e.changeEvent.id){r[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},alwaysWrong:function(e){var t={_id:"wrongHuman"+(new Date).getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},insertAtSortPosition:ts,removeExistingAndInsertAtSortPosition:function(e){Za(e),ts(e)},runFullQueryAgain:function(e){throw new Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:function(e){throw new Error("Action unknownAction should never be called")}};function Ku(e){return e?"1":"0"}function qa(e,t){for(var n=[],r=0,i=e.length;r<i;r+=t)n.push(e.substring(r,r+t));return n}function eu(e){return e.charCodeAt(0)-40}!function(e){void 0===e&&(e=6);for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,i=0;i<e;i++)n.charAt(Math.floor(Math.random()*r))}(4);var Ci="UNKNOWN";function Qo(e){return e[e.length-1]}var Qt,Zo=function(e){return!!e.queryParams.limit},At={0:function(e){return"INSERT"===e.changeEvent.operation},1:function(e){return"UPDATE"===e.changeEvent.operation},2:function(e){return"DELETE"===e.changeEvent.operation},3:Zo,4:function(e){return 1===e.queryParams.limit},5:function(e){return!!(e.queryParams.skip&&e.queryParams.skip>0)},6:function(e){return 0===e.previousResults.length},7:function(e){return e.changeEvent.previous===Ci},8:function(e){return Zo(e)&&e.previousResults.length>=e.queryParams.limit},9:function(e){var t=e.previousResults[0];return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},10:function(e){var t=Qo(e.previousResults);return!(!t||t[e.queryParams.primaryKey]!==e.changeEvent.id)},11:function(e){var t=e.queryParams.sortFields,n=e.changeEvent.previous,r=e.changeEvent.doc;if(!r)return!1;if(!n||n===Ci)return!0;for(var i=0;i<t.length;i++){var f=t[i];if(Cn().get(n,f)!==Cn().get(r,f))return!0}return!1},12:function(e){var t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);for(var r=e.queryParams.primaryKey,i=e.previousResults,f=0;f<i.length;f++)if(i[f][r]===t)return!0;return!1},13:function(e){var t=e.changeEvent.previous;if(!t||t===Ci)return!1;var n=e.previousResults[0];return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)<0)},14:function(e){var t=e.changeEvent.previous;if(!t||t===Ci)return!1;var n=Qo(e.previousResults);return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)>0)},15:function(e){var t=e.changeEvent.doc;if(!t)return!1;var n=e.previousResults[0];return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)<0)},16:function(e){var t=e.changeEvent.doc;if(!t)return!1;var n=Qo(e.previousResults);return!!n&&(n[e.queryParams.primaryKey]===e.changeEvent.id||e.queryParams.sortComparator(t,n)>0)},17:function(e){var t=e.changeEvent.previous;return!(!t||t===Ci)&&e.queryParams.queryMatcher(t)},18:function(e){var t=e.changeEvent.doc;return!!t&&e.queryParams.queryMatcher(t)}};var dn=function(e){return function(e,t,n){for(var r=e,i=e.l;;){if("number"==typeof(r=r[Ku(t[i](n))])||"string"==typeof r)return r;i=r.l}}((Qt||(Qt=function(e){for(var t=new Map,r=2+2*parseInt(e.charAt(0)+e.charAt(1),10),f=qa(e.substring(2,r),2),h=0;h<f.length;h++){var F=(D=f[h]).charAt(0),H=eu(D.charAt(1));t.set(F,H)}var ae=qa(e.substring(r,e.length-3),4);for(h=0;h<ae.length;h++){F=(D=ae[h]).charAt(0);var D,ce=D.charAt(1),we=D.charAt(2),me=eu(D.charAt(3));if(!t.has(ce))throw new Error("missing node with id "+ce);if(!t.has(we))throw new Error("missing node with id "+we);var fe=t.get(ce),_e=t.get(we);t.set(F,{l:me,0:fe,1:_e})}var Me=e.slice(-3),Ie=Me.charAt(0),je=Me.charAt(1);return{l:eu(Me.charAt(2)),0:t.get(Ie),1:t.get(je)}}("14a2b0c/d1e,f+g5h.i4j*k-l)m(n6ohk1pdf1qef1rin-sjn-ton-ugn-vmn-whn-xkn-yln-zdf5{ef5|wx5}df7~dz7\x7fef7\xa1bk7\xa2e{7\xa3g|7\xa4ry7\xa5dp7\xa6gk7\xa7eq7\xa8gt7\xa9ac7\xaamv7\xabgu7\xacnm7\xadiy7\xaenw7\xaf\xa4s8\xb0\xab\xa68\xb1\xack8\xb2\xaam8\xb3\xaev8\xb4\xabn8\xb5\xacn8\xb6vm8\xb7xv8\xb8mn8\xb9\xadj8\xba\xaem8\xbbxm8\xbc\xad\xb93\xbd}~3\xbe\xa9\xb03\xbf\x7f\xa23\xc0\xa1\xa33\xc1m\xb13\xc2\xae\xba3\xc3m\xba3\xc4\xa9\xb43\xc5b\xae3\xc6m\xb53\xc7m\xbb3\xc8x\xbb3\xc9kn3\xcam\xb83\xcb\xbcj6\xcc\xc2m6\xcd\xc6\xc36\xce\xc8m6\xcfnm6\xd0\xca\xc76\xd1\xcc\xce,\xd2\xcd\xd0,\xd3\xc5\xc9,\xd4\xb2\xb6,\xd5\xb3\xb7,\xd6\xaen,\xd7\xba\xbb,\xd8mf9\xd9\xcb\xc19\xdaym9\xdbm\xcf9\xdc\xd1\xd29\xddz{2\xdepq2\xdf\xbd\xbf2\xe0\xbe\xc02\xe1\xa5\xa72\xe2\xb0\xa82\xe3\xc4\xd32\xe4\xb4\xd62\xe5\xddn0\xe6\xden0\xe7\xd8\xdb0\xe8\xd9\xdc0\xe9\xdfn0\xea\xe0\xe30\xeb\xb2\xd40\xec\xaf\xd50\xed\xe1n0\xee\xe2\xe40\xef\xb9\xd70\xf0\xe7v/\xf1\xe5\xe6/\xf2\xe7\xeb/\xf3\xe8\xec/\xf4\xe9\xed/\xf5\xea\xee/\xf6\xday/\xf7\xf2m(\xf8\xf3\xef(\xf9\xf6y(\xfa\xf7\xf8:\xfb\xf4\xf5:\xfcm\xf9:\xfd\xf0\xf14\xfe\xfa\xfb4\xff\xfe\xfd*\u0100\xfcm*\xff\u0100.")),Qt),At,e)};function Er(e,t){return t.sort&&0!==t.sort.length?t.sort.map(function(n){return Object.keys(n)[0]}):[e]}var Yn=new WeakMap;function rs(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var n=function(e){if(Yn.has(e))return Yn.get(e);var t=e.collection,n=e.getPreparedQuery(),r=t.schema.primaryPath,i=t.database.storage.statics.getSortComparator(t.storageInstance.schema,n),h=t.database.storage.statics.getQueryMatcher(t.storageInstance.schema,n),F={primaryKey:e.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:Er(r,e.mangoQuery),sortComparator:function(J,ae){var ce={docA:J,docB:ae,rxQuery:e};return nn("preSortComparator",ce),i(ce.docA,ce.docB)},queryMatcher:function(J){var ae={doc:J,rxQuery:e};return nn("preQueryMatcher",ae),h(ae.doc)}};return Yn.set(e,F),F}(e),r=e._resultsData.slice(),i=e._resultsDataMap,f=!1,h=t.find(function(D){var F=function(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:cn.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}(D),J=function(e){var t=dn(e);return $u[t]}({queryParams:n,changeEvent:F,previousResults:r,keyDocumentMap:i});return"runFullQueryAgain"===J||("doNothing"!==J?(f=!0,function(e,t,n,r,i){(0,Ho[e])({queryParams:t,changeEvent:n,previousResults:r,keyDocumentMap:i})}(J,n,F,r,i),!1):void 0)});return h?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:f,newResults:r}}var Xr=function(){function e(){this._map=new Map}return e.prototype.getByQuery=function(r){var i=r.toString();return this._map.has(i)||this._map.set(i,r),this._map.get(i)},e}();function fu(){return new Xr}function Yo(e,t){t.uncached=!0;var n=t.toString();e._map.delete(n)}var an=(100,3e4,function(r,i){if(!(i._map.size<100)){for(var f=Gn()-3e4,h=[],F=0,H=Array.from(i._map.values());F<H.length;F++){var J=H[F];if(!(J.refCount$.observers.length>0)){if(0===J._lastEnsureEqual&&J._creationTime<f){Yo(i,J);continue}h.push(J)}}var ae=h.length-100;ae<=0||h.sort(function(me,fe){return me._lastEnsureEqual-fe._lastEnsureEqual}).slice(0,ae).forEach(function(me){return Yo(i,me)})}}),Kn=new WeakSet;var zr=0,is=function(){function e(n,r,i){this.id=++zr,this._execOverDatabaseCount=0,this._creationTime=Gn(),this._lastEnsureEqual=0,this.other={},this.uncached=!1,this.refCount$=new $o.X(null),this._latestChangeEvent=-1,this._resultsData=null,this._resultsDataMap=new Map,this._lastExecStart=0,this._lastExecEnd=0,this._resultsDocs$=new $o.X(null),this._ensureEqualQueue=En,this.op=n,this.mangoQuery=r,this.collection=i,r||(r={selector:{}})}var t=e.prototype;return t._setResultData=function(r){var i=this,f=function(e,t){return t.map(function(n){return es(e,n)})}(this.collection,r),h=this.collection.schema.primaryPath;return this._resultsDataMap=new Map,this._resultsData=f.map(function(D){var F=D._dataSync$.getValue();return i._resultsDataMap.set(F[h],F),F}),this._resultsDocs$.next(f),f},t._execOverDatabase=function(){var i,r=this;switch(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=Gn(),this.op){case"find":i=this.collection._queryStorageInstance(this);break;case"findOne":i=this.collection._queryStorageInstance(this,1);break;default:throw Fe("QU1",{collection:this.collection.name,op:this.op})}return i.then(function(f){return r._lastExecEnd=Gn(),f})},t.exec=function(r){var i=this;if(r&&"findOne"!==this.op)throw Fe("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Sr(this).then(function(){return(0,Zc.z)(i.$)}).then(function(f){if(!f&&r)throw Fe("QU10",{collection:i.collection.name,query:i.mangoQuery,op:i.op});return f})},t.toString=function(){var r=Hi({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(r,Vi);return this.toString=function(){return i},i},t.getPreparedQuery=function(){var r={rxQuery:this,mangoQuery:Sn(this.mangoQuery)};nn("prePrepareQuery",r);var i=this.collection.database.storage.statics.prepareQuery(this.collection.storageInstance.schema,r.mangoQuery);return this.getPreparedQuery=function(){return i},i},t.doesDocumentDataMatch=function(r){return!r._deleted&&this.queryMatcher(V(this.collection,r))},t.remove=function(){var r;return this.exec().then(function(i){return r=i,Array.isArray(i)?Promise.all(i.map(function(f){return f.remove()})):i.remove()}).then(function(){return r})},t.update=function(r){throw Bt("update")},t.where=function(r){throw Bt("query-builder")},t.sort=function(r){throw Bt("query-builder")},t.skip=function(r){throw Bt("query-builder")},t.limit=function(r){throw Bt("query-builder")},sr(e,[{key:"$",get:function(){var r=this;if(!this._$){var i=this._resultsDocs$.pipe((0,Ks.z)(function(h){return Sr(r).then(function(D){return!D&&h})}),(0,In.h)(function(h){return!!h}),(0,Ht.U)(function(h){return h.slice(0)}),(0,Ht.U)(function(h){return"findOne"===r.op?0===h.length?null:h[0]:h}),Nu(ir)).asObservable(),f=this.collection.$.pipe((0,Vs.b)(function(){return Sr(r)}),(0,In.h)(function(){return!1}));this._$=(0,Yc.T)(i,f,this.refCount$.pipe((0,In.h)(function(){return!1})))}return this._$}},{key:"queryMatcher",get:function(){return Br(this,"queryMatcher",this.collection.database.storage.statics.getQueryMatcher(this.collection.storageInstance.schema,this.getPreparedQuery()))}},{key:"asRxQuery",get:function(){return this}}]),e}();function Nn(e){return e.collection._queryCache.getByQuery(e)}function qr(e,t,n){if(t&&"object"!=typeof t)throw Ft("QU7",{queryObj:t});if(Array.isArray(t))throw Ft("QU8",{queryObj:t});nn("preCreateRxQuery",{op:e,queryObj:t,collection:n});var r=new is(e,t,n);return nn("createRxQuery",r=Nn(r)),function(e){Kn.has(e)||(Kn.add(e),xr().then(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"object"==typeof window&&window.requestIdleCallback?new Promise(function(t){return window.requestIdleCallback(t,{timeout:e})}):wo(0)}(200)}).then(function(){e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),Kn.delete(e)}))}(n),r}function ss(e){return e._latestChangeEvent>=e.asRxQuery.collection._changeEventBuffer.counter}function Sr(e){return e.collection.database.destroyed||ss(e)?En:(e._ensureEqualQueue=e._ensureEqualQueue.then(function(){return function(e){if(e._lastEnsureEqual=Gn(),e.collection.database.destroyed||ss(e))return En;var t=!1,n=!1;if(-1===e._latestChangeEvent&&(n=!0),!n){var r=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(null===r)n=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter;var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(r),f=rs(e,i);f.runFullQueryAgain?n=!0:f.changed&&(t=!0,e._setResultData(f.newResults))}}if(n){var h=e.collection._changeEventBuffer.counter;return e._execOverDatabase().then(function(D){return e._latestChangeEvent=h,Tu()(D,e._resultsData)||(t=!0,e._setResultData(D)),t})}return t}(e)}),e._ensureEqualQueue)}var Xf=l(8675),qf=function(){function e(){this._map=new Map,this._map=new Map}var t=e.prototype;return t.get=function(r){return this._map.get(r)},t.set=function(r,i){return this._map.set(r,i)},t.delete=function(r){return this._map.delete(r)},e}();function ed(){return new qf}var td=function(){function e(n){var r=this;this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=n,this.subs.push(this.collection.$.pipe((0,In.h)(function(i){return!i.isLocal})).subscribe(function(i){return r._handleChangeEvent(i)}))}var t=e.prototype;return t._handleChangeEvent=function(r){for(this.counter++,this.buffer.push(r),this.eventCounterMap.set(r,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(r){var f=this.eventCounterMap.get(this.buffer[0]);return r<f?null:r-f},t.getFrom=function(r){var i=[],f=this.getArrayIndexByPointer(r);if(null===f)return null;for(;;){var h=this.buffer[f];if(f++,!h)return i;i.push(h)}},t.runFrom=function(r,i){var f=this.getFrom(r);if(null===f)throw new Error("out of bounds");f.forEach(function(h){return i(h)})},t.reduceByLastOfDoc=function(r){return r.slice(0)},t.hasChangeWithRevision=function(r){for(var i=this.buffer.length;i>0;){i--;var f=this.buffer[i];if(f.documentData&&f.documentData._rev===r)return!0}return!1},t.destroy=function(){this.subs.forEach(function(r){return r.unsubscribe()})},e}(),Ml=["pre","post"],xl=["insert","save","remove","create"],kl=!1,du=function(){function e(n,r,i,f,h){var D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},H=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},J=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},ae=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},ce=arguments.length>10&&void 0!==arguments[10]?arguments[10]:an,we=arguments.length>11&&void 0!==arguments[11]?arguments[11]:{};this._isInMemory=!1,this.destroyed=!1,this._atomicUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._repStates=new Set,this._docCache=ed(),this._queryCache=fu(),this._crypter={},this._observable$={},this._changeEventBuffer={},this.database=n,this.name=r,this.schema=i,this.storageInstance=f,this.localDocumentsStore=h,this.instanceCreationOptions=D,this.migrationStrategies=F,this.methods=H,this.attachments=J,this.options=ae,this.cacheReplacementPolicy=ce,this.statics=we,rd(this.asRxCollection)}var t=e.prototype;return t.prepare=function(r){try{var i=this;i._crypter=function(e,t){return new Bu(e,t)}(i.database.password,i.schema),i._observable$=i.database.eventBulks$.pipe((0,In.h)(function(D){return D.collectionName===i.name}),(0,Ks.z)(function(D){return D.events})),i._changeEventBuffer=function(e){return new td(e)}(i.asRxCollection);var f=i.storageInstance.changeStream().subscribe(function(D){var F={id:D.id,internal:!1,collectionName:i.name,storageToken:vi(i.database.storageToken),events:D.events.map(function(H){return Ns(!1,H,i)}),databaseToken:i.database.token};i.database.$emit(F)});i._subs.push(f);var h=i.localDocumentsStore.changeStream().subscribe(function(D){var F={id:D.id,internal:!1,collectionName:i.name,storageToken:vi(i.database.storageToken),events:D.events.map(function(H){return Ns(!0,H,i)}),databaseToken:i.database.token};i.database.$emit(F)});return i._subs.push(h),i._subs.push(i._observable$.pipe((0,In.h)(function(D){return!D.isLocal})).subscribe(function(D){var F=i._docCache.get(D.documentId);F&&F._handleChangeEvent(D)})),Promise.resolve()}catch(D){return Promise.reject(D)}},t.migrationNeeded=function(){throw Bt("migration")},t.getDataMigrator=function(){throw Bt("migration")},t.migrate=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migrate(r)},t.migratePromise=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getDataMigrator().migratePromise(r)},t._queryStorageInstance=function(r,i){try{var f=arguments,h=this,D=f.length>2&&void 0!==f[2]&&f[2],F=r.getPreparedQuery();return i&&(F.limit=i),Promise.resolve(h.database.lockedRun(function(){return h.storageInstance.query(F)})).then(function(H){return H.documents.map(function(ae){return ue(h,ae,D)})})}catch(H){return Promise.reject(H)}},t.insert=function(r){try{var i=this,f=null;if(function(e){return void 0!==e&&!!e.isInstanceOfRxDocument}(r)){if(!(f=r)._isTemporary)throw Fe("COL1",{data:r});r=f.toJSON()}var h=Ce(i,r),D=f;return Promise.resolve(i._runHooks("pre","insert",h)).then(function(){return i.schema.validate(h),Promise.resolve(z(i,{document:h})).then(function(F){return f?f._dataSync$.next(F):D=es(i,F),Promise.resolve(i._runHooks("post","insert",h,D)).then(function(){return D})})})}catch(F){return Promise.reject(F)}},t.bulkInsert=function(r){try{var i=this;if(0===r.length)return Promise.resolve({success:[],error:[]});var f=r.map(function(h){return Ce(i,h)});return Promise.resolve(Promise.all(f.map(function(h){return i._runHooks("pre","insert",h).then(function(){return i.schema.validate(h),h})}))).then(function(h){var D=h.map(function(H){return{document:V(i,H)}}),F=new Map;return h.forEach(function(H){F.set(H[i.schema.primaryPath],H)}),Promise.resolve(i.database.lockedRun(function(){return i.storageInstance.bulkWrite(D)})).then(function(H){var ae=Object.entries(H.success).map(function(ce){var me=ce[1],fe=vr(F,ce[0]);return fe._rev=me._rev,es(i,fe)});return Promise.resolve(Promise.all(ae.map(function(ce){return i._runHooks("post","insert",F.get(ce.primary),ce)}))).then(function(){return{success:ae,error:Object.values(H.error)}})})})}catch(h){return Promise.reject(h)}},t.bulkRemove=function(r){try{var i=this;return 0===r.length?Promise.resolve({success:[],error:[]}):Promise.resolve(i.findByIds(r)).then(function(f){var h=[],D=new Map;return Array.from(f.values()).forEach(function(F){var H=Sn(F.toJSON(!0));h.push(H),D.set(F.primary,H)}),Promise.resolve(Promise.all(h.map(function(F){return i._runHooks("pre","remove",F,f.get(F[i.schema.primaryPath]))}))).then(function(){var F=h.map(function(H){var J=Ct(H);return J._deleted=!0,{previous:V(i,H),document:V(i,J)}});return Promise.resolve(i.database.lockedRun(function(){return i.storageInstance.bulkWrite(F)})).then(function(H){var J=Object.keys(H.success);return Promise.resolve(Promise.all(J.map(function(ae){return i._runHooks("post","remove",D.get(ae),f.get(ae))}))).then(function(){return{success:J.map(function(ce){return f.get(ce)}),error:Object.values(H.error)}})})})})}catch(f){return Promise.reject(f)}},t.upsert=function(r){var i=this,f=Ce(this,r),h=f[this.schema.primaryPath];if(!h)throw Fe("COL3",{primaryPath:this.schema.primaryPath,data:f,schema:this.schema.jsonSchema});return this.findOne(h).exec().then(function(D){return D&&!D.deleted?(f._rev=D._rev,D.atomicUpdate(function(){return f}).then(function(){return D})):i.insert(r)})},t.atomicUpsert=function(r){var D,i=this,f=Ce(this,r),h=f[this.schema.primaryPath];if(!h)throw Fe("COL4",{data:r});return D=(D=this._atomicUpsertQueues.has(h)?this._atomicUpsertQueues.get(h):nr).then(function(){return function(e,t,n){var r=e._docCache.get(t);return r?Promise.resolve({doc:r,inserted:!1}):e.findOne(t).exec().then(function(i){return i?{doc:i,inserted:!1}:e.insert(n).then(function(f){return{doc:f,inserted:!0}})})}(i,h,f)}).then(function(F){return F.inserted?F.doc:function(e,t){return e.atomicUpdate(function(n){return t._rev=n._rev,n._data=t,n._data}).then(function(){return e})}(F.doc,f).then(function(){return xr()}).then(function(){return xr()}).then(function(){return xr()}).then(function(){return F.doc})}),this._atomicUpsertQueues.set(h,D),D},t.find=function(r){if("string"==typeof r)throw Fe("COL5",{queryObj:r});return r||(r={selector:{}}),qr("find",r,this)},t.findOne=function(r){var i;if("string"==typeof r){var f;i=qr("findOne",{selector:(f={},f[this.schema.primaryPath]=r,f)},this)}else{if(r||(r={selector:{}}),r.limit)throw Fe("QU6");i=qr("findOne",r,this)}if("number"==typeof r||Array.isArray(r))throw Ft("COL6",{queryObj:r});return i},t.findByIds=function(r){try{var i=this,f=new Map,h=[];r.forEach(function(F){var H=i._docCache.get(F);H?f.set(F,H):h.push(F)});var D=function(){if(h.length>0)return Promise.resolve(i.storageInstance.findDocumentsById(h,!1)).then(function(F){Object.values(F).forEach(function(H){H=ue(i,H);var J=es(i,H);f.set(J.primary,J)})})}();return Promise.resolve(D&&D.then?D.then(function(){return f}):f)}catch(F){return Promise.reject(F)}},t.findByIds$=function(r){var i=this,f=null,h=-1,D=this.findByIds(r).then(function(F){h=i._changeEventBuffer.counter,f=F});return this.$.pipe((0,Xf.O)(null),(0,Ks.z)(function(F){return D.then(function(){return F})}),(0,Ks.z)(function(F){try{var H=vi(f),J=i._changeEventBuffer.getFrom(h+1),ae=function(){if(null===J)return Promise.resolve(i.findByIds(r)).then(function(ce){h=i._changeEventBuffer.counter,Array.from(ce.entries()).forEach(function(we){return H.set(we[0],we[1])})});J.filter(function(ce){return r.includes(ce.documentId)}).forEach(function(ce){var we=ce.operation;"INSERT"===we||"UPDATE"===we?H.set(ce.documentId,i._docCache.get(ce.documentId)):H.delete(ce.documentId)})}();return Promise.resolve(ae&&ae.then?ae.then(function(){return H}):H)}catch(ce){return Promise.reject(ce)}}),(0,In.h)(function(F){return!!F}),Nu(ir))},t.exportJSON=function(){throw Bt("json-dump")},t.importJSON=function(r){throw Bt("json-dump")},t.syncCouchDB=function(r){throw Bt("replication")},t.syncGraphQL=function(r){throw Bt("replication-graphql")},t.inMemory=function(){throw Bt("in-memory")},t.addHook=function(r,i,f){var h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"!=typeof f)throw Ft("COL7",{key:i,when:r});if(!Ml.includes(r))throw Ft("COL8",{key:i,when:r});if(!xl.includes(i))throw Fe("COL9",{key:i});if("post"===r&&"create"===i&&!0===h)throw Fe("COL10",{when:r,key:i,parallel:h});var D=f.bind(this),F=h?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][r]=this.hooks[i][r]||{series:[],parallel:[]},this.hooks[i][r][F].push(D)},t.getHooks=function(r,i){try{return this.hooks[i][r]}catch{return{series:[],parallel:[]}}},t._runHooks=function(r,i,f,h){var D=this.getHooks(r,i);return D?function(e,t){return e.reduce(function(n,r){return n.then(r)},Promise.resolve(void 0))}(D.series.map(function(H){return function(){return H(f,h)}})).then(function(){return Promise.all(D.parallel.map(function(H){return H(f,h)}))}):nr},t._runHooksSync=function(r,i,f,h){var D=this.getHooks(r,i);!D||D.series.forEach(function(F){return F(f,h)})},t.newDocument=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=this.schema.fillObjectWithDefaults(r);var i=ku(ju(this),this,r);return i._isTemporary=!0,this._runHooksSync("post","create",r,i),i},t.destroy=function(){var r=this;return this.destroyed?En:(this._onDestroyCall&&this._onDestroyCall(),this._subs.forEach(function(i){return i.unsubscribe()}),this._changeEventBuffer&&this._changeEventBuffer.destroy(),Array.from(this._repStates).forEach(function(i){return i.cancel()}),Promise.all([this.storageInstance.close(),this.localDocumentsStore.close()]).then(function(){return delete r.database.collections[r.name],r.destroyed=!0,wn("postDestroyRxCollection",r).then(function(){return!0})}))},t.remove=function(){return this.database.removeCollection(this.name)},sr(e,[{key:"$",get:function(){return this._observable$}},{key:"insert$",get:function(){return this.$.pipe((0,In.h)(function(r){return"INSERT"===r.operation}))}},{key:"update$",get:function(){return this.$.pipe((0,In.h)(function(r){return"UPDATE"===r.operation}))}},{key:"remove$",get:function(){return this.$.pipe((0,In.h)(function(r){return"DELETE"===r.operation}))}},{key:"onDestroy",get:function(){var r=this;return this._onDestroy||(this._onDestroy=new Promise(function(i){return r._onDestroyCall=i})),this._onDestroy}},{key:"asRxCollection",get:function(){return this}}]),e}();function rd(e){if(!kl){kl=!0;var t=Object.getPrototypeOf(e);xl.forEach(function(n){Ml.map(function(r){var i=r+tn(n);t[i]=function(f,h){return this.addHook(r,n,f,h)}})})}}var Ll=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function Yu(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var n=e._pHM.get(t);e._hPM.delete(n),e._pHM.delete(t)}e._iC.delete(t)}}function Ju(e){e._tryIR||0===e._iC.size||(e._tryIR=!0,setTimeout(function(){e.isIdle()?setTimeout(function(){e.isIdle()?(function(e){0!==e._iC.size&&(e._iC.values().next().value._manRes(),setTimeout(function(){return Ju(e)},0))}(e),e._tryIR=!1):e._tryIR=!1},0):e._tryIR=!1},0))}Ll.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Ju(this)},wrapCall:function(t){var r,n=this;this.lock();try{r=t()}catch(i){throw this.unlock(),i}return r.then&&"function"==typeof r.then?r.then(function(i){return n.unlock(),i}).catch(function(i){throw n.unlock(),i}):(this.unlock(),r)},requestIdlePromise:function(t){var n=this;t=t||{};var r,i=new Promise(function(D){return r=D});if(i._manRes=function(){Yu(n,i),r()},t.timeout){var h=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=h}return this._iC.add(i),Ju(this),i},cancelIdlePromise:function(t){Yu(this,t)},requestIdleCallback:function(t,n){var r=this._lHN++,i=this.requestIdlePromise(n);return this._hPM.set(r,i),this._pHM.set(i,r),i.then(function(){return t()}),r},cancelIdleCallback:function(t){var n=this._hPM.get(t);this.cancelIdlePromise(n)},clear:function(){var t=this;this._iC.forEach(function(n){return Yu(t,n)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}},Promise.resolve(!1),Promise.resolve(!0);var os=Promise.resolve();function Bl(e,t){return e||(e=0),new Promise(function(n){return setTimeout(function(){return n(t)},e)})}function Xu(){return Math.random().toString(36).substring(2)}var Fl=0,qu=0;function hu(){var e=(new Date).getTime();return e===Fl?1e3*e+ ++qu:(Fl=e,qu=0,1e3*e)}var pu="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);const yd={create:function(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t},close:function(e){e.bc.close(),e.subFns=[]},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){try{return e.bc.postMessage(t,!1),os}catch(n){return Promise.reject(n)}},canBeUsed:function(){if(pu&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function(){return 150},microSeconds:hu};var mu=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,Nl()),this.set.add(t),setTimeout(function(){!function(e){for(var t=Nl()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;if(!(e.timeMap.get(r)<t))return;e.timeMap.delete(r),e.set.delete(r)}}(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function Nl(){return(new Date).getTime()}function ec(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=45e3),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=12e4),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),void 0===t.node.useFastPath&&(t.node.useFastPath=!0),t}var wr="messages";function jl(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function Ul(e){e.closed||zl(e).then(function(){return Bl(e.options.idb.fallbackInterval)}).then(function(){return Ul(e)})}function zl(e){return e.closed||!e.messagesCallback?os:function(e,t){var n=e.transaction(wr).objectStore(wr),r=[];return new Promise(function(f){(function(){try{var f=IDBKeyRange.bound(t+1,1/0);return n.openCursor(f)}catch{return n.openCursor()}}()).onsuccess=function(h){var D=h.target.result;D?D.value.id<t+1?D.continue(t+1):(r.push(D.value),D.continue()):f(r)}})}(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),os})}const Bd={create:function(e,t){return t=ec(t),function(e){var r=jl().open("pubkey.broadcast-channel-0-"+e,1);return r.onupgradeneeded=function(f){f.target.result.createObjectStore(wr,{keyPath:"id",autoIncrement:!0})},new Promise(function(f,h){r.onerror=function(D){return h(D)},r.onsuccess=function(){f(r.result)}})}(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Xu(),eMIs:new mu(2*t.idb.ttl),writeBlockPromise:os,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},Ul(r),r})},close:function(e){e.closed=!0,e.db.close()},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,zl(e)},postMessage:function(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return function(e,t,n){var i={uuid:t,time:(new Date).getTime(),data:n},f=e.transaction([wr],"readwrite");return new Promise(function(h,D){f.oncomplete=function(){return h()},f.onerror=function(H){return D(H)},f.objectStore(wr).add(i)})}(e.db,e.uuid,t)}).then(function(){0===Math.floor(11*Math.random()+0)&&function(e,t){(function(e,t){var n=(new Date).getTime()-t,r=e.transaction(wr).objectStore(wr),i=[];return new Promise(function(f){r.openCursor().onsuccess=function(h){var D=h.target.result;if(D){var F=D.value;if(!(F.time<n))return void f(i);i.push(F),D.continue()}else f(i)}})})(e,t).then(function(n){return Promise.all(n.map(function(r){return function(e,t){var n=e.transaction([wr],"readwrite").objectStore(wr).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}(e,r.id)}))})}(e.db,e.options.idb.ttl)}),e.writeBlockPromise},canBeUsed:function(){return!pu&&!!jl()},type:"idb",averageResponseTime:function(e){return 2*e.idb.fallbackInterval},microSeconds:hu};function $l(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Wl(e){return"pubkey.broadcastChannel-"+e}function Kl(){if(pu)return!1;var e=$l();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}const Gd={create:function(e,t){if(t=ec(t),!Kl())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Xu(),r=new mu(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=function(e,t){var n=Wl(e),r=function(f){f.key===n&&t(JSON.parse(f.newValue))};return window.addEventListener("storage",r),r}(e,function(f){!i.messagesCallback||f.uuid!==n&&(!f.token||r.has(f.token)||f.data.time&&f.data.time<i.messagesCallbackTime||(r.add(f.token),i.messagesCallback(f.data)))}),i},close:function(e){!function(e){window.removeEventListener("storage",e)}(e.listener)},onMessage:function(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(n){Bl().then(function(){var r=Wl(e.channelName),i={token:Xu(),time:(new Date).getTime(),data:t,uuid:e.uuid},f=JSON.stringify(i);$l().setItem(r,f);var h=document.createEvent("Event");h.initEvent("storage",!0,!0),h.key=r,h.newValue=f,window.dispatchEvent(h),n()})})},canBeUsed:Kl,type:"localstorage",averageResponseTime:function(){var t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?240:120},microSeconds:hu};var Qd=hu,tc=new Set;const nh={create:function(e){var t={name:e,messagesCallback:null};return tc.add(t),t},close:function(e){tc.delete(e)},onMessage:function(e,t){e.messagesCallback=t},postMessage:function(e,t){return new Promise(function(n){return setTimeout(function(){Array.from(tc).filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:Qd};var Hl=[yd,Bd,Gd],Vl=new Set,ih=0,nc=function(t,n){this.id=ih++,Vl.add(this),this.name=t,this.options=ec(n),this.method=function(e){var t=[].concat(e.methods,Hl).filter(Boolean);if(e.type){if("simulate"===e.type)return nh;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!pu&&(t=t.filter(function(i){return"idb"!==i.type}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable method found in "+JSON.stringify(Hl.map(function(i){return i.type})))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function(e){var t=e.method.create(e.name,e.options);!function(e){return!(!e||"function"!=typeof e.then)}(t)?e._state=t:(e._prepP=t,t.then(function(n){e._state=n}))}(this)};function Gl(e,t,n){var i={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:os).then(function(){var h=e.method.postMessage(e._state,i);return e._uMP.add(h),h.catch().then(function(){return e._uMP.delete(h)}),h})}function Ql(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Zl(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&Ql(e)){var t=function(i){e._addEL[i.type].forEach(function(f){i.time>=f.time-1e5&&f.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function Yl(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),function(e){if(e._iL&&!Ql(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}nc._pubkey=!0,nc.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return Gl(this,"message",t)},postInternal:function(t){return Gl(this,"internal",t)},set onmessage(e){var n={time:this.method.microSeconds(),fn:e};Yl(this,"message",this._onML),e&&"function"==typeof e?(this._onML=n,Zl(this,"message",n)):this._onML=null},addEventListener:function(t,n){Zl(this,t,{time:this.method.microSeconds(),fn:n})},removeEventListener:function(t,n){Yl(this,t,this._addEL[t].find(function(i){return i.fn===n}))},close:function(){var t=this;if(!this.closed){Vl.delete(this),this.closed=!0;var n=this._prepP?this._prepP:os;return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};var Jl=function(t,n,r,i){try{return Promise.resolve(t.createStorageInstance({databaseName:n,collectionName:"_rxdb_internal",schema:za(0,"collectionName"),options:r,multiInstance:i})).then(function(f){return Promise.resolve(t.createKeyObjectStorageInstance({databaseName:n,collectionName:"",options:r,multiInstance:i})).then(function(h){return{internalStore:f,localDocumentsStore:h}})})}catch(f){return Promise.reject(f)}},fh=function(t){try{var n="storageToken";return Promise.resolve(yr(t.localDocumentsStore,n)).then(function(r){if(r)return r.value;var i=rr(10);return Promise.resolve(t.localDocumentsStore.bulkWrite([{document:{_id:n,value:i,_attachments:{}}}])).then(function(){return i})})}catch(r){return Promise.reject(r)}},ic=new Set,vu=function(){function e(n,r,i,f,h){var D=arguments.length>5&&void 0!==arguments[5]&&arguments[5],F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},H=arguments.length>7?arguments[7]:void 0,J=arguments.length>8?arguments[8]:void 0,ae=arguments.length>9?arguments[9]:void 0,ce=arguments.length>10?arguments[10]:void 0;this.token=rr(10),this._subs=[],this.destroyed=!1,this.eventBulks$=new Hs.x,this.observable$=this.eventBulks$.pipe((0,Ks.z)(function(we){return we.events})),this.emittedEventBulkIds=new mu(6e4),this.name=n,this.storage=r,this.instanceCreationOptions=i,this.password=f,this.multiInstance=h,this.eventReduce=D,this.options=F,this.idleQueue=H,this.internalStore=J,this.localDocumentsStore=ae,this.broadcastChannel=ce,this.collections={}}var t=e.prototype;return t.dangerousRemoveCollectionInfo=function(){try{var r=this;return Promise.resolve(Ei(r.storage,r.internalStore)).then(function(i){var f=i.map(function(h){var D=Ct(h);return D._deleted=!0,{previous:h,document:D}});return Promise.resolve(r.internalStore.bulkWrite(f)).then(function(){})})}catch(i){return Promise.reject(i)}},t.$emit=function(r){this.emittedEventBulkIds.has(r.id)||(this.emittedEventBulkIds.add(r.id),this.eventBulks$.next(r),function(e,t){e.destroyed||e.multiInstance&&e.broadcastChannel&&!t.internal&&e.token===t.databaseToken&&e.storageToken===t.storageToken&&e.broadcastChannel.postMessage(t).then(function(){return!0})}(this,r))},t.removeCollectionDoc=function(r,i){try{var f=this,h=gu(r,i);return Promise.resolve(Ji(f.internalStore,h)).then(function(D){if(!D)throw Fe("SNH",{name:r,schema:i});var F=Ct(D);return F._deleted=!0,Promise.resolve(f.lockedRun(function(){return f.internalStore.bulkWrite([{document:F,previous:D}])})).then(function(){})})}catch(D){return Promise.reject(D)}},t.addCollections=function(r){try{var i=this;return Promise.resolve(i.lockedRun(function(){return i.internalStore.findDocumentsById(Object.keys(r).map(function(f){return gu(f,r[f].schema)}),!1)})).then(function(f){var h={};Object.entries(f).forEach(function(F){h[F[0]]=F[1]});var D={};return Promise.resolve(Promise.all(Object.entries(r).map(function(F){var H=F[0],J=F[1],ae=H,ce=h[gu(H,r[ae].schema)],we=Ct(J);we.name=ae;var me=function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&nn("preCreateRxSchema",e);var n=new $a(Vc(e));return nn("createRxSchema",n),n}(J.schema);if(D[ae]=me.hash,we.schema=me,we.database=i,me.crypt&&!i.password)throw Fe("DB7",{name:H});if(i.collections[H])throw Fe("DB3",{name:H});if(ce&&ce.schemaHash!==D[ae])throw Fe("DB6",{name:H,previousSchemaHash:ce.schemaHash,schemaHash:D[ae],previousSchema:ce.schema,schema:J.schema});var fe=Ct(J);return fe.database=i,fe.name=H,nn("preCreateRxCollection",fe),function(e,t){var n=e.database,r=e.name,i=e.schema,f=e.instanceCreationOptions,h=void 0===f?{}:f,D=e.migrationStrategies,F=void 0===D?{}:D,H=e.autoMigrate,J=void 0===H||H,ae=e.statics,ce=void 0===ae?{}:ae,we=e.methods,me=void 0===we?{}:we,fe=e.attachments,_e=void 0===fe?{}:fe,Te=e.options,Me=void 0===Te?{}:Te,Ie=e.cacheReplacementPolicy,je=void 0===Ie?an:Ie;cn.isDevMode()&&Object.keys(me).filter(function(Je){return i.topLevelFields.includes(Je)}).forEach(function(Je){throw Fe("COL18",{funName:Je})});var $e={databaseName:n.name,collectionName:r,schema:i.jsonSchema,options:h,multiInstance:n.multiInstance};return nn("preCreateRxStorageInstance",$e),_(r,n,$e,h).then(function(Je){var Ke=new du(n,r,i,Je.storageInstance,Je.localDocumentsStore,h,F,me,_e,Me,je,ce);return Ke.prepare(t).then(function(){Object.entries(ce).forEach(function(yt){var Dt=yt[1];Object.defineProperty(Ke,yt[0],{get:function(){return Dt.bind(Ke)}})});var tt=nr;return J&&0!==Ke.schema.version&&(tt=Ke.migratePromise()),tt}).then(function(){return nn("createRxCollection",Ke),Ke}).catch(function(tt){return Promise.all([Je.storageInstance.close(),Je.localDocumentsStore.close()]).then(function(){return Promise.reject(tt)})})})}(we,!!ce)}))).then(function(F){var H=[],J={};F.forEach(function(ce){var we=ce.name;J[we]=ce;var me=gu(we,r[we].schema);h[me]||H.push({document:{collectionName:me,schemaHash:D[we],schema:ce.schema.normalized,version:ce.schema.version,_attachments:{}}}),i.collections[we]=ce,i[we]||Object.defineProperty(i,we,{get:function(){return i.collections[we]}})});var ae=function(){if(H.length>0)return Promise.resolve(i.lockedRun(function(){return i.internalStore.bulkWrite(H)})).then(function(){})}();return ae&&ae.then?ae.then(function(){return J}):J})})}catch(f){return Promise.reject(f)}},t.removeCollection=function(r){var i=this,f=nr;return this.collections[r]&&(f=this.collections[r].destroy()),f.then(function(){return function(t,n){try{return Promise.resolve(t.lockedRun(function(){return Ei(t.storage,t.internalStore)})).then(function(r){var i=r.filter(function(f){return f.collectionName.split("-")[0]===n});return Promise.all(i.map(function(f){var h=Ct(f);return h._deleted=!0,t.lockedRun(function(){return Wn(t.internalStore,{previous:f,document:h})})})).then(function(){return i.map(function(f){return f.version})})})}catch(r){return Promise.reject(r)}}(i,r)}).then(function(h){return Promise.all(h.map(function(D){return _(r,i,{databaseName:i.name,collectionName:r,schema:za(D,"collectionName"),options:i.instanceCreationOptions,multiInstance:i.multiInstance},{})}))}).then(function(h){return Promise.all(h.map(function(D){return i.lockedRun(function(){return Promise.all([D.storageInstance.remove(),D.localDocumentsStore.remove()])})}))}).then(function(){})},t.lockedRun=function(r){return this.idleQueue.wrapCall(r)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(){throw Bt("json-dump")},t.importJSON=function(r){throw Bt("json-dump")},t.server=function(r){throw Bt("server")},t.backup=function(r){throw Bt("backup")},t.leaderElector=function(){throw Bt("leader-election")},t.isLeader=function(){throw Bt("leader-election")},t.waitForLeadership=function(){throw Bt("leader-election")},t.migrationStates=function(){throw Bt("migration")},t.destroy=function(){var r=this;return this.destroyed||(nn("preDestroyRxDatabase",this),this.destroyed=!0,this._subs.map(function(i){return i.unsubscribe()}),"pseudoInstance"===this.name)?En:this.requestIdlePromise().then(function(){return Promise.all(Object.keys(r.collections).map(function(i){return r.collections[i]}).map(function(i){return i.destroy()}))}).then(function(){return r.internalStore.close()}).then(function(){return r.localDocumentsStore.close()}).then(function(){return r.broadcastChannel?r.broadcastChannel.close():null}).then(function(){return ic.delete(r.name)}).then(function(){return!0})},t.remove=function(){var r=this;return this.destroy().then(function(){return function(t,n){return Promise.resolve(Jl(n,t,{},!1)).then(function(r){return Promise.resolve(Ei(n,r.internalStore)).then(function(i){return Promise.resolve(Promise.all(i.map(function(f){try{var D=f.schema,F=f.collectionName.split("-"),H=F[0],J=parseInt(F[1],10),ae=ur(D.primaryKey);return Promise.resolve(Promise.all([n.createStorageInstance({databaseName:t,collectionName:H,schema:za(J,ae),options:{},multiInstance:!1}),n.createKeyObjectStorageInstance({databaseName:t,collectionName:Re(H),options:{},multiInstance:!1})])).then(function(ce){var me=ce[1];return Promise.resolve(Promise.all([ce[0].remove(),me.remove()])).then(function(){})})}catch(ce){return Promise.reject(ce)}}))).then(function(){return Promise.all([r.internalStore.remove(),r.localDocumentsStore.remove()])})})})}(r.name,r.storage)})},sr(e,[{key:"$",get:function(){return this.observable$}}]),e}();function gu(e,t){return e+"-"+t.version}function mh(e){var we,t=e.storage,n=e.instanceCreationOptions,r=e.name,i=e.password,f=e.multiInstance,h=void 0===f||f,D=e.eventReduce,F=void 0!==D&&D,H=e.ignoreDuplicate,J=void 0!==H&&H,ae=e.options,ce=void 0===ae?{}:ae;nn("preCreateRxDatabase",{storage:t,instanceCreationOptions:n,name:r,password:i,multiInstance:h,eventReduce:F,ignoreDuplicate:J,options:ce}),i&&cn.validatePassword(i),J||function(e){if(ic.has(e))throw Fe("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}(r),ic.add(r),h&&(we=new nc("RxDB:"+r+":socket"));var me=new Ll;return Jl(t,r,n,h).then(function(fe){var _e=new vu(r,t,n,i,h,F,ce,me,fe.internalStore,fe.localDocumentsStore,we);return function(t){try{return Promise.resolve(fh(t)).then(function(n){t.storageToken=n;var e,r=t.localDocumentsStore.changeStream().subscribe(function(i){var f={id:i.id,internal:!1,storageToken:vi(t.storageToken),events:i.events.map(function(h){return Ns(!0,h)}),databaseToken:t.token};t.$emit(f)});t._subs.push(r),t.multiInstance&&vi((e=t).broadcastChannel).addEventListener("message",function(t){t.storageToken!==e.storageToken||t.databaseToken===e.token||e.$emit(t)})})}catch(n){return Promise.reject(n)}}(_e).then(function(){return wn("createRxDatabase",_e)}).then(function(){return _e})})}var vh={RxSchema:$a.prototype,Crypter:Bu.prototype,RxDocument:$s,RxQuery:is.prototype,RxCollection:du.prototype,RxDatabase:vu.prototype},oc=new Set;function Ys(e){if(nn("preAddRxPlugin",{plugin:e,plugins:oc}),!oc.has(e)){if(oc.add(e),!e.rxdb)throw Ft("PL1",{plugin:e});e.prototypes&&Object.entries(e.prototypes).forEach(function(t){return(0,t[1])(vh[t[0]])}),e.overwritable&&Object.assign(cn,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(function(t){return jr[t[0]].push(t[1])})}}var ac,uc,cc,Xl={UT1:"given name is no string or empty",UT2:"collection- and database-names must match the regex to be compatible with couchdb databases.\n    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'",UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",PL1:"Given plugin is not RxDB plugin. Pouchdb plugins must be added via addPouchPlugin()",PL2:"You tried importy a RxDB plugin to pouchdb. Use addRxPlugin() instead.",P1:"PouchDB.getBatch: limit must be > 2",P2:"bulkWrite() cannot be called with an empty array",P3:"bulkAddRevisions cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU7:"query must be an object",QU8:"query cannot be an array",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase.[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://pubkey.github.io/rxdb/questions-answers.html#cant-change-the-schema",DB7:"RxDatabase.addCollections(): schema encrypted but no password given",DB8:"RxDatabase.create(): A RxDatabase with the same name and adapter already exists.\nMake sure to use this combination only once or set ignoreDuplicate to true if you do this intentional",DB9:"RxDatabase.create(): Adapter not added. Use RxDB.plugin(require('pouchdb-adapter-[adaptername]'));",DB10:"RxDatabase.create(): To use leveldown-adapters, you have to add the leveldb-plugin. Use RxDB.plugin(require('pouchdb-adapter-leveldb'));",DB11:"RxDatabase.create(): Invalid db-name, folder-paths must not have an ending slash",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.atomicUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL19:"Document document update conflict, when changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): cant save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",AT1:"to use attachments, please define this in your schema",EN1:"password is no string",EN2:"validatePassword: min-length of password not complied",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ cant use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not useable on local documents",LD7:"Local document already exists",RC1:"Replication: already added",RC2:"RxCollection.syncCouchDB() query must be from the same RxCollection",RC3:"RxCollection.syncCouchDB() Do not use a collection's pouchdb as remote, use the collection instead",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await inital replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await inital replication if multiInstance because the replication might run on another instance",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",DEV1:"dev-mode added multiple times, this is likely because you have mixed up the import from the the plugins/core and the full RxDB",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",IM1:"InMemory: Memory-Adapter must be added. Use addPouchPlugin(require('pouchdb-adapter-memory'));",IM2:"inMemoryCollection.sync(): Do not replicate with the in-memory instance. Replicate with the parent instead",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"cannot find sub schema by key",SNH:"This should never happen"},bh=new(Mu($s));function ql(){if(!cc){var t=Object.getOwnPropertyNames(bh),n=Object.getOwnPropertyNames($s);cc=[].concat(t,n,["deleted","synced"])}return cc}function Sh(e){var t=ur(e.primaryKey);return function r(i,f){"object"==typeof i&&Object.keys(i).forEach(function(h){i.properties||function(i,f,h){if("string"==typeof i&&"object"==typeof f&&!Array.isArray(f)&&function(e){if(""!==e&&"_deleted"!==e){if(["properties","language"].includes(e))throw Fe("SC23",{fieldName:e});var t="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",n=new RegExp(t);if("_id"!==e&&!e.match(n))throw Fe("SC1",{regex:t,fieldName:e})}}(i),f.hasOwnProperty("item")&&"array"!==f.type)throw Fe("SC2",{fieldName:i});if(f.hasOwnProperty("required")&&"boolean"==typeof f.required)throw Fe("SC24",{fieldName:i});if(f.hasOwnProperty("ref"))if(Array.isArray(f.type)){if(f.type.length>2||!f.type.includes("string")||!f.type.includes("null"))throw Fe("SC4",{fieldName:i})}else switch(f.type){case"string":break;case"array":if(!f.items||!f.items.type||"string"!==f.items.type)throw Fe("SC3",{fieldName:i});break;default:throw Fe("SC4",{fieldName:i})}var D=h.split(".").length>=2;if(D){if(f.primary)throw Fe("SC6",{path:h,primary:f.primary});if(f.default)throw Fe("SC7",{path:h})}if(!D){if("_id"===i&&"_id"!==t)throw Fe("COL2",{fieldName:i});if("_"===i.charAt(0)){if("_id"===i||"_deleted"===i)return;throw Fe("SC8",{fieldName:i})}}}(h,i[h],f);var D=f;"properties"!==h&&(D=D+"."+h),r(i[h],D)})}(e,""),!0}function ef(e){for(var t=e.split("."),n="",r=0;r<t.length;r+=1)n=n.concat("[]"!==t[r]?".properties.".concat(t[r]):".items");return kr(n)}function lc(e){!e||Object.entries(e).forEach(function(t){var n=t[0],r=t[1];if("string"!=typeof n)throw Ft("COL14",{name:n});if(n.startsWith("_"))throw Ft("COL15",{name:n});if("function"!=typeof r)throw Ft("COL16",{name:n,type:typeof n});if(function(){if(!ac){var e=new du,t=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));ac=[].concat(t,n)}return ac}().includes(n)||ql().includes(n))throw Fe("COL17",{name:n})})}var tf="^[a-z][_$a-z0-9\\-]*$",Oh=new RegExp(tf);function nf(e){if("string"!=typeof e||0===e.length)throw Ft("UT1",{name:e});if(Fr(e))return!0;if(!e.match(Oh))throw Fe("UT2",{regex:tf,givenName:e});return!0}var Th=l(4949),Rh=l.n(Th),rf="dev-mode",xh={name:rf,rxdb:!0,overwritable:{isDevMode:function(){return!0},deepFreezeWhenDevMode:function(e){return e&&Rh()(e)},tunnelErrorMessage:function(t){if(!Xl[t])throw console.error("RxDB: Error-Code not known: "+t),new Error("Error-Code "+t+" not known, contact the maintainer");return Xl[t]}},hooks:{preAddRxPlugin:function(t){if(t.plugin.name===rf)throw Fe("DEV1",{plugins:t.plugins})},preCreateRxSchema:function(e){if(!e.primaryKey)throw Fe("SC30",{schema:e});if(!e.hasOwnProperty("properties"))throw Fe("SC29",{schema:e});if(e.properties._rev)throw Fe("SC10",{schema:e});if(!e.hasOwnProperty("version")||"number"!=typeof e.version||e.version<0)throw Fe("SC11",{version:e.version});if(Sh(e),function(e){if(!e.primaryKey)throw Fe("SC30",{schema:e});function t(h){if(!h)throw Fe("SC33",{schema:e});var D=h.type;if(!D||!["string","number","integer"].includes(D))throw Fe("SC32",{schema:e,args:{schemaPart:h}})}if("string"==typeof e.primaryKey)t(e.properties[e.primaryKey]);else{var i=e.primaryKey;t(Xi(e,i.key)),i.fields.forEach(function(h){t(Xi(e,h))})}}(e),Object.keys(e.properties).forEach(function(t){var n=e.properties[t];if(t===e.primaryKey){if(e.indexes&&e.indexes.includes(t))throw Fe("SC13",{value:n,schema:e});if(n.unique)throw Fe("SC14",{value:n,schema:e});if(e.encrypted&&e.encrypted.includes(t))throw Fe("SC15",{value:n,schema:e});if("string"!==n.type)throw Fe("SC16",{value:n,schema:e})}if(ql().includes(t))throw Fe("SC17",{key:t,schema:e})}),e.indexes){if(!gr(e.indexes))throw Fe("SC18",{indexes:e.indexes,schema:e});e.indexes.forEach(function(t){if("string"!=typeof t&&!Array.isArray(t))throw Fe("SC19",{index:t,schema:e});if(Array.isArray(t))for(var n=0;n<t.length;n+=1)if("string"!=typeof t[n])throw Fe("SC20",{index:t,schema:e})})}if(Object.keys(e).includes("compoundIndexes"))throw Fe("SC25",{schema:e});Object.keys(Yi(e)).map(function(t){var n=t.split(".");return n.pop(),n.join(".")}).filter(function(t){return""!==t}).filter(function(t,n,r){return r.indexOf(t)===n}).filter(function(t){return!!Cn().get(e,t).index}).forEach(function(t){throw Fe("SC26",{index:kr(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})}),(e.indexes||[]).reduce(function(t,n){return gr(n)?t.concat(n):t.push(n),t},[]).filter(function(t,n,r){return r.indexOf(t)===n}).map(function(t){var n=ef(t),r=Cn().get(e,n);if(!r||"object"!=typeof r)throw Fe("SC21",{index:t,schema:e});return{indexPath:t,schemaObj:r}}).filter(function(t){return"string"!==t.schemaObj.type&&"integer"!==t.schemaObj.type&&"number"!==t.schemaObj.type}).forEach(function(t){throw Fe("SC22",{key:t.indexPath,type:t.schemaObj.type,schema:e})}),Object.keys(Yi(e)).map(function(t){var n=t.split(".");return n.pop(),n.join(".")}).filter(function(t){return""!==t&&"attachments"!==t}).filter(function(t,n,r){return r.indexOf(t)===n}).filter(function(t){return!!Cn().get(e,t).encrypted}).forEach(function(t){throw Fe("SC27",{index:kr(t=(t=t.replace("properties.","")).replace(/\.properties\./g,".")),schema:e})}),e.encrypted&&e.encrypted.forEach(function(t){var n=ef(t),r=Cn().get(e,n);if(!r||"object"!=typeof r)throw Fe("SC28",{field:t,schema:e})})},preCreateRxDatabase:function(t){!function(e){if(nf(e.name),Fr(e.name)&&(e.name.endsWith("/")||e.name.endsWith("\\")))throw Fe("DB11",{name:e.name})}(t)},preCreateRxCollection:function(t){if(function(e){if(function(){if(!uc){var e=new vu("pseudoInstance","memory"),t=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));uc=[].concat(t,n),e.destroy()}return uc}().includes(e.name))throw Fe("DB5",{name:e.name});nf(e.name)}(t),"_"===t.name.charAt(0))throw Fe("DB2",{name:t.name});if(!t.schema)throw Fe("DB4",{name:t.name,args:t})},preCreateRxQuery:function(t){!function(e){if("[object Object]"!==Object.prototype.toString.call(e.queryObj))throw Ft("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj});var n=["selector","limit","skip","sort"];Object.keys(e.queryObj).forEach(function(r){if(!n.includes(r))throw Ft("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj,key:r})})}(t)},createRxCollection:function(t){lc(t.statics),lc(t.methods),lc(t.attachments),t.schema&&t.migrationStrategies&&function(e,t){if("object"!=typeof t||Array.isArray(t))throw Ft("COL11",{schema:e});var n=function(e){var n=0;return new Array(e.version?e.version:0).fill(0).map(function(){return n++})}(e);if(n.length!==Object.keys(t).length)throw Fe("COL12",{have:Object.keys(t),should:n});n.map(function(r){return{v:r,s:t[r+1]}}).filter(function(r){return"function"!=typeof r.s}).forEach(function(r){throw Ft("COL13",{version:r.v,type:typeof r,schema:e})})}(t.schema,t.migrationStrategies)}}},kh=l(7466),sf=l.n(kh),Lh=l(4384),jh=function(t){return function(e,t){return sf().encrypt(e,t).toString()}(t,this.password)},Uh=function(t){var n=function(e,t){return sf().decrypt(e,t).toString(Lh)}(t,this.password);return n},$h={Crypter:function(t){t._encryptString=jh,t._decryptString=Uh}},Wh={validatePassword:function(t){if(t&&"string"!=typeof t)throw Ft("EN1",{password:t});if(t&&t.length<8)throw Fe("EN2",{minPassLength:8,password:t})}},Kh={name:"encryption",rxdb:!0,prototypes:$h,overwritable:Wh,hooks:{createRxDatabase:function(t){return function(t){try{if(!t.password)return Promise.resolve(En);var n=Ts(t.password),r="pwHash";return Promise.resolve(yr(t.localDocumentsStore,r)).then(function(i){return i?n===i.value||Promise.resolve(t.destroy()).then(function(){throw Fe("DB1",{passwordHash:Ts(t.password),existingPasswordHash:i.value})}):Promise.resolve(t.localDocumentsStore.bulkWrite([{document:{_id:r,value:n,_attachments:{}}}])).then(function(){return!0})})}catch(i){return Promise.reject(i)}}(t)}}},Hh=("undefined"!=typeof AbortController&&AbortController,fetch),yu=Headers;function Dn(e,t){if(e===t)return 0;e=as(e),t=as(t);var n=hc(e),r=hc(t);if(n-r!=0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=Dn(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),f=0;f<i;f++){var h=Dn(n[f],r[f]);if(0!==h||0!==(h=Dn(e[n[f]],t[r[f]])))return h}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function as(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=as(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var f=t[i];void 0!==f&&(e[i]=as(f))}}}return e}function Cr(e){return hc(e=as(e))+""+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",h=function(e,t,n){var r=function(e,t,n){for(var r="",i=3-e.length;r.length<i;)r+="0";return r}(e);return r+e}(((r?-n:n)- -324).toString());i+=""+h;var D=Math.abs(parseFloat(t[0]));r&&(D=10-D);var F=D.toFixed(20);return i+""+F.replace(/\.?0+$/,"")}(e);case"string":return e.replace(/\u0002/g,"\x02\x02").replace(/\u0001/g,"\x01\x02").replace(/\u0000/g,"\x01\x01");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,f="";if(t)for(;++r<i;)f+=Cr(n[r]);else for(;++r<i;){var h=n[r];f+=Cr(h)+Cr(e[h])}return f}return""}(e)+"\0"}function Zh(e,t){var r,n=t;if("1"===e[t])r=0,t++;else{var f="0"===e[t];t++;var h="",D=e.substring(t,t+3),F=parseInt(D,10)+-324;for(f&&(F=-F),t+=3;;){var H=e[t];if("\0"===H)break;h+=H,t++}r=1===(h=h.split(".")).length?parseInt(h,10):parseFloat(h[0]+"."+h[1]),f&&(r-=10),0!==F&&(r=parseFloat(r+"e"+F))}return{num:r,length:t-n}}function Yh(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,f=r.index;Array.isArray(i)?i.push(n):f===e.length-2?i[e.pop()]=n:e.push(n)}}function hc(e){var n=["boolean","number","string","object"].indexOf(typeof e);return~n?null===e?1:Array.isArray(e)?5:n<3?n+2:n+3:Array.isArray(e)?5:void 0}function pc(e,t){for(var n=e,r=0,i=t.length;r<i&&(n=n[t[r]]);r++);return n}function np(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var f=t[r];e=e[f]=e[f]||{}}e[t[i-1]]=n}function mc(e,t){return e<t?-1:e>t?1:0}function qo(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var f=e[r];"."===f?r>0&&"\\"===e[r-1]?n=n.substring(0,n.length-1)+".":(t.push(n),n=""):n+=f}return t.push(n),t}var rp=["$or","$nor","$not"];function cf(e){return rp.indexOf(e)>-1}function Jn(e){return Object.keys(e)[0]}function vc(e){return e[Jn(e)]}function ea(e){var t={};return e.forEach(function(n){Object.keys(n).forEach(function(r){var i=n[r];if("object"!=typeof i&&(i={$eq:i}),cf(r))t[r]=i instanceof Array?i.map(function(h){return ea([h])}):ea([i]);else{var f=t[r]=t[r]||{};Object.keys(i).forEach(function(h){var D=i[h];return"$gt"===h||"$gte"===h?function(e,t,n){void 0===n.$eq&&(void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}(h,D,f):"$lt"===h||"$lte"===h?function(e,t,n){void 0===n.$eq&&(void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}(h,D,f):"$ne"===h?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(D,f):"$eq"===h?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(D,f):void(f[h]=D)})}})}),t}function lf(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=ea(e[n].$and));var r=e[t];"object"==typeof r&&lf(r)}return e}function ff(e,t){for(var n in e){"$and"===n&&(t=!0);var r=e[n];"object"==typeof r&&(t=ff(r,t))}return t}function gc(e){var t=pn(e),n=!1;ff(t,!1)&&("$and"in(t=lf(t))&&(t=ea(t.$and)),n=!0),["$or","$nor"].forEach(function(D){D in t&&t[D].forEach(function(F){for(var H=Object.keys(F),J=0;J<H.length;J++){var ae=H[J],ce=F[ae];("object"!=typeof ce||null===ce)&&(F[ae]={$eq:ce})}})}),"$not"in t&&(t.$not=ea([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var f=r[i],h=t[f];"object"!=typeof h||null===h?h={$eq:h}:"$ne"in h&&!n&&(h.$ne=[h.$ne]),t[f]=h}return t}function _u(e,t,n){if(e=e.filter(function(h){return Js(h.doc,t.selector,n)}),t.sort){var r=function(e){function t(n){return e.map(function(r){var f=qo(Jn(r));return pc(n,f)})}return function(n,r){var h=Dn(t(n.doc),t(r.doc));return 0!==h?h:mc(n.doc._id,r.doc._id)}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===vc(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0;e=e.slice(i,("limit"in t?t.limit:e.length)+i)}return e}function Js(e,t,n){return n.every(function(r){var i=t[r],f=qo(r),h=pc(e,f);return cf(r)?function(e,t,n){return"$or"===e?t.some(function(r){return Js(n,r,Object.keys(r))}):"$not"===e?!Js(n,t,Object.keys(t)):!t.find(function(r){return Js(n,r,Object.keys(r))})}(r,i,e):yc(i,e,f,h)})}function yc(e,t,n,r){return!e||("object"==typeof e?Object.keys(e).every(function(i){return function(e,t,n,r,i){if(!hf[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return hf[e](t,n,r,i)}(i,t,e[i],n,r)}):e===r)}function ta(e){return null!=e}function us(e){return void 0!==e}function df(e,t){return t.some(function(n){return e instanceof Array?e.indexOf(n)>-1:e===n})}var hf={$elemMatch:function(e,t,n,r){return!(!Array.isArray(r)||0===r.length)&&r.some("object"==typeof r[0]?function(i){return Js(i,t,Object.keys(t))}:function(i){return yc(t,e,n,i)})},$allMatch:function(e,t,n,r){return!(!Array.isArray(r)||0===r.length)&&r.every("object"==typeof r[0]?function(i){return Js(i,t,Object.keys(t))}:function(i){return yc(t,e,n,i)})},$eq:function(e,t,n,r){return us(r)&&0===Dn(r,t)},$gte:function(e,t,n,r){return us(r)&&Dn(r,t)>=0},$gt:function(e,t,n,r){return us(r)&&Dn(r,t)>0},$lte:function(e,t,n,r){return us(r)&&Dn(r,t)<=0},$lt:function(e,t,n,r){return us(r)&&Dn(r,t)<0},$exists:function(e,t,n,r){return t?us(r):!us(r)},$mod:function(e,t,n,r){return ta(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every(function(i){return 0!==Dn(r,i)})},$in:function(e,t,n,r){return ta(r)&&df(r,t)},$nin:function(e,t,n,r){return ta(r)&&!df(r,t)},$size:function(e,t,n,r){return ta(r)&&function(e,t){return e.length===t}(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&function(e,t){return t.every(function(n){return e.indexOf(n)>-1})}(r,t)},$regex:function(e,t,n,r){return ta(r)&&function(e,t){return new RegExp(t).test(e)}(r,t)},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};function _p(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter)return t(new Error('selector invalid for filter "'+("string"==typeof e.filter?e.filter:"function")+'"'));t()}function bp(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=Ii(e.view):e.filter=Ii(e.filter))}function Ep(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!On(e.db)}function Sp(e,t){var n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=Ne(G,"`view` filter parameter not found or invalid.");return n(r)}var i=ms(t.view);e.db.get("_design/"+i[0],function(h,D){if(e.isCancelled)return n(null,{status:"cancelled"});if(h)return n(Ye(h));var F=D&&D.views&&D.views[i[1]]&&D.views[i[1]].map;if(!F)return n(Ne(o,D.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=function(e){return gs(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+e+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}(F),e.doChanges(t)})}else if(t.selector)t.filter=function(h){return function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var r=_u([{doc:e}],{selector:t=gc(t)},Object.keys(t));return r&&1===r.length}(h,t.selector)},e.doChanges(t);else{var f=ms(t.filter);e.db.get("_design/"+f[0],function(h,D){if(e.isCancelled)return n(null,{status:"cancelled"});if(h)return n(Ye(h));var F=D&&D.filters&&D.filters[f[1]];if(!F)return n(Ne(o,D&&D.filters?"missing json key: "+f[1]:"missing json key: filters"));t.filter=function(e){return gs('"use strict";\nreturn '+e+";",{})}(F),e.doChanges(t)})}}function na(e,t,n){nt().call(this);var r=this;this.db=e;var i=(t=t?pn(t):{}).complete=Di(function(D,F){D?function(e,t){return"listenerCount"in e?e.listenerCount(t):nt().listenerCount(e,t)}(r,"error")>0&&r.emit("error",D):r.emit("complete",F),r.removeAllListeners(),e.removeListener("destroyed",f)});function f(){r.cancel()}n&&(r.on("complete",function(D){n(null,D)}),r.on("error",n)),e.once("destroyed",f),t.onChange=function(D,F,H){r.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(i){rt("error",'Error in .on("change", function):',i)}}(r,D,F,H)};var h=new Promise(function(D,F){t.complete=function(H,J){H?F(H):D(J)}});r.once("cancel",function(){e.removeListener("destroyed",f),t.complete(null,{status:"cancelled"})}),this.then=h.then.bind(h),this.catch=h.catch.bind(h),this.then(function(D){i(null,D)},i),e.taskqueue.isReady?r.validateChanges(t):e.taskqueue.addTask(function(D){D?t.complete(D):r.isCancelled?r.emit("cancel"):r.validateChanges(t)})}function Dp(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=Mi(t.rev_tree).map(function(f){return{rev:f.rev}}));var i={id:t.id,changes:r,doc:e};return tr(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=di(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function pf(e,t){return e<t?-1:e>t?1:0}function _c(e,t){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=t,e(n)):e(null,r.length?r[0]:r)}}function Op(e,t){var n=pf(e._id,t._id);return 0!==n?n:pf(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function mf(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),e._compact(n,function(f,h){f?r(f):r(null,h),T()(function(){e._compactionQueue.shift(),e._compactionQueue.length&&mf(e)})})})}function Yt(){for(var e in nt().call(this),Yt.prototype)"function"==typeof this[e]&&(this[e]=this[e].bind(this))}function ra(){this.isReady=!1,this.failed=!1,this.queue=[]}function Et(e,t){if(!(this instanceof Et))return new Et(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=pn(t),n.auto_compaction=t.auto_compaction,n.prefix=Et.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var i=function(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Et.adapters,i=Et.preferredAdapters,f=Et.prefix,h=t.adapter;if(!h)for(var D=0;D<i.length&&"idb"===(h=i[D])&&"websql"in r&&ie()&&localStorage["_pouch__websqldb_"+f+e];++D)rt("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var F=r[h];return{name:F&&"use_prefix"in F&&!F.use_prefix?e:f+e,adapter:h}}((t.prefix||"")+e,t);if(t.name=i.name,t.adapter=t.adapter||i.adapter,n.name=e,n._adapter=t.adapter,Et.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Et.adapters[t.adapter]||!Et.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);Yt.call(n),n.taskqueue=new ra,n.adapter=t.adapter,Et.adapters[t.adapter].call(n,t,function(f){if(f)return n.taskqueue.fail(f);(function(e){function t(r){e.removeListener("closed",n),r||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)})(n),n.emit("created",n),Et.emit("created",n.name),n.taskqueue.ready(n)})}P()(na,nt()),na.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},na.prototype.validateChanges=function(e){var t=e.complete,n=this;Et._changesFilterPlugin?Et._changesFilterPlugin.validate(e,function(r){if(r)return t(r);n.doChanges(e)}):n.doChanges(e)},na.prototype.doChanges=function(e){var t=this,n=e.complete;if("live"in(e=pn(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Dp,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(Et._changesFilterPlugin){if(Et._changesFilterPlugin.normalize(e),Et._changesFilterPlugin.shouldFilter(this,e))return Et._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(f){f in e&&rt("warn",'The "'+f+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&"function"==typeof r.cancel){var i=t.cancel;t.cancel=M()(function(f){r.cancel(),i.apply(this,f)})}}else this.db.info().then(function(f){t.isCancelled?n(null,{status:"cancelled"}):(e.since=f.update_seq,t.doChanges(e))},n)},P()(Yt,nt()),Yt.prototype.post=Gt("post",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(Ne(X));this.bulkDocs({docs:[e]},t,_c(n,e._id))}),Yt.prototype.put=Gt("put",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(Ne(X));if(to(e._id),Ir(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);var h,D,H,J,r=this;function f(h){"function"==typeof r._put&&!1!==t.new_edits?r._put(e,t,h):r.bulkDocs({docs:[e]},t,_c(h,e._id))}t.force&&e._rev?(D=(h=e._rev.split("-"))[1],H=parseInt(h[0],10)+1,J=Ri(),e._revisions={start:H,ids:[J,D]},e._rev=H+"-"+J,t.new_edits=!1,f(function(h){n(h,h?null:{ok:!0,id:e._id,rev:e._rev})})):f(n)}),Yt.prototype.putAttachment=Gt("putAttachment",function(e,t,n,r,i){var f=this;function h(D){var F="_rev"in D?parseInt(D._rev,10):0;return D._attachments=D._attachments||{},D._attachments[t]={content_type:i,data:r,revpos:++F},f.put(D)}return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||rt("warn","Attachment",t,"on document",e,"is missing content_type"),f.get(e).then(function(D){if(D._rev!==n)throw Ne(m);return h(D)},function(D){if(D.reason===o.message)return h({_id:e});throw D})}),Yt.prototype.removeAttachment=Gt("removeAttachment",function(e,t,n,r){var i=this;i.get(e,function(f,h){if(f)r(f);else{if(h._rev===n)return h._attachments?(delete h._attachments[t],0===Object.keys(h._attachments).length&&delete h._attachments,void i.put(h,r)):r();r(Ne(m))}})}),Yt.prototype.remove=Gt("remove",function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),(n=n||{}).was_delete=!0;var f={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(Ir(f._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[f]},n,_c(r,f._id))}),Yt.prototype.revsDiff=Gt("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var i=0,f=new E;function h(F,H){f.has(F)||f.set(F,{missing:[]}),f.get(F).missing.push(H)}r.map(function(F){this._getRevisionTree(F,function(H,J){if(H&&404===H.status&&"missing"===H.message)f.set(F,{missing:e[F]});else{if(H)return n(H);!function(F,H){var J=e[F].slice(0);Or(H,function(ae,ce,we,me,fe){var _e=ce+"-"+we,Te=J.indexOf(_e);-1!==Te&&(J.splice(Te,1),"available"!==fe.status&&h(F,_e))}),J.forEach(function(ae){h(F,ae)})}(F,J)}if(++i===r.length){var ae={};return f.forEach(function(ce,we){ae[we]=ce}),n(null,ae)}})},this)}),Yt.prototype.bulkGet=Gt("bulkGet",function(e,t){Ee(this,e,t)}),Yt.prototype.compactDocument=Gt("compactDocument",function(e,t,n){var r=this;this._getRevisionTree(e,function(i,f){if(i)return n(i);var h=function(e){var t={},n=[];return Or(e,function(r,i,f,h){var D=i+"-"+f;return r&&(t[D]=0),void 0!==h&&n.push({from:h,to:D}),D}),n.reverse(),n.forEach(function(r){t[r.from]=void 0===t[r.from]?1+t[r.to]:Math.min(t[r.from],1+t[r.to])}),t}(f),D=[],F=[];Object.keys(h).forEach(function(H){h[H]>t&&D.push(H)}),Or(f,function(H,J,ae,ce,we){var me=J+"-"+ae;"available"===we.status&&-1!==D.indexOf(me)&&F.push(me)}),r._doCompaction(e,F,n)})}),Yt.prototype.compact=Gt("compact",function(e,t){"function"==typeof e&&(t=e,e={});var n=this;e=e||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:e,callback:t}),1===n._compactionQueue.length&&mf(n)}),Yt.prototype._compact=function(e,t){var n=this,i=[];n.changes({return_docs:!1,last_seq:e.last_seq||0}).on("change",function(D){i.push(n.compactDocument(D.id,0))}).on("complete",function(D){var F=D.last_seq;Promise.all(i).then(function(){return Gr(n,"_local/compaction",function(J){return(!J.last_seq||J.last_seq<F)&&(J.last_seq=F,J)})}).then(function(){t(null,{ok:!0})}).catch(t)}).on("error",t)},Yt.prototype.get=Gt("get",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"string"!=typeof e)return n(Ne(d));if(Ir(e)&&"function"==typeof this._getLocal)return this._getLocal(e,n);var r=[],i=this;function f(){var F=[],H=r.length;if(!H)return n(null,F);r.forEach(function(J){i.get(e,{rev:J,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},function(ae,ce){if(ae)F.push({missing:J});else{for(var we,me=0,fe=F.length;me<fe;me++)if(F[me].ok&&F[me].ok._rev===ce._rev){we=!0;break}we||F.push({ok:ce})}--H||n(null,F)})})}if(!t.open_revs)return this._get(e,t,function(F,H){if(F)return F.docId=e,n(F);var J=H.doc,ae=H.metadata,ce=H.ctx;if(t.conflicts){var we=di(ae);we.length&&(J._conflicts=we)}if(tr(ae,J._rev)&&(J._deleted=!0),t.revs||t.revs_info){for(var me=J._rev.split("-"),fe=parseInt(me[0],10),_e=me[1],Te=so(ae.rev_tree),Me=null,Ie=0;Ie<Te.length;Ie++){var je=Te[Ie],$e=je.ids.map(function(Lt){return Lt.id}).indexOf(_e);($e===fe-1||!Me&&-1!==$e)&&(Me=je)}if(!Me)return(F=new Error("invalid rev tree")).docId=e,n(F);var Ke=Me.ids.map(function(Lt){return Lt.id}).indexOf(J._rev.split("-")[1])+1;if(Me.ids.splice(Ke,Me.ids.length-Ke),Me.ids.reverse(),t.revs&&(J._revisions={start:Me.pos+Me.ids.length-1,ids:Me.ids.map(function(Lt){return Lt.id})}),t.revs_info){var yt=Me.pos+Me.ids.length;J._revs_info=Me.ids.map(function(Lt){return{rev:--yt+"-"+Lt.id,status:Lt.opts.status}})}}if(t.attachments&&J._attachments){var St=J._attachments,Dt=Object.keys(St).length;if(0===Dt)return n(null,J);Object.keys(St).forEach(function(Lt){this._getAttachment(J._id,Lt,St[Lt],{rev:J._rev,binary:t.binary,ctx:ce},function(bt,Tt){var jt=J._attachments[Lt];jt.data=Tt,delete jt.stub,delete jt.length,--Dt||n(null,J)})},i)}else{if(J._attachments)for(var Nt in J._attachments)J._attachments.hasOwnProperty(Nt)&&(J._attachments[Nt].stub=!0);n(null,J)}});if("all"===t.open_revs)this._getRevisionTree(e,function(F,H){if(F)return n(F);r=Mi(H).map(function(J){return J.rev}),f()});else{if(!Array.isArray(t.open_revs))return n(Ne(pe,"function_clause"));r=t.open_revs;for(var h=0;h<r.length;h++){var D=r[h];if("string"!=typeof D||!/^\d+-/.test(D))return n(Ne(ge))}f()}}),Yt.prototype.getAttachment=Gt("getAttachment",function(e,t,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(e,n,function(f,h){return f?r(f):h.doc._attachments&&h.doc._attachments[t]?(n.ctx=h.ctx,n.binary=!0,void i._getAttachment(e,t,h.doc._attachments[t],n,r)):r(Ne(o))})}),Yt.prototype.allDocs=Gt("allDocs",function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(r){return r in e})[0];if(n)return void t(Ne(W,"Query parameter `"+n+"` is not compatible with multi-get"));if(!On(this)&&(function(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)}),Yt.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new na(this,e,t)},Yt.prototype.close=Gt("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),Yt.prototype.info=Gt("info",function(e){var t=this;this._info(function(n,r){if(n)return e(n);r.db_name=r.db_name||t.name,r.auto_compaction=!(!t.auto_compaction||On(t)),r.adapter=t.adapter,e(null,r)})}),Yt.prototype.id=Gt("id",function(e){return this._id(e)}),Yt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Yt.prototype.bulkDocs=Gt("bulkDocs",function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(Ne(c));for(var r=0;r<e.docs.length;++r)if("object"!=typeof e.docs[r]||Array.isArray(e.docs[r]))return n(Ne(X));var i;if(e.docs.forEach(function(D){D._attachments&&Object.keys(D._attachments).forEach(function(F){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(F),D._attachments[F].content_type||rt("warn","Attachment",F,"on document",D._id,"is missing content_type")})}),i)return n(Ne(G,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var f=this;!t.new_edits&&!On(f)&&e.docs.sort(Op),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var f=r[i];n._attachments[f]=Ar(n._attachments[f],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var h=e.docs.map(function(D){return D._id});return this._bulkDocs(e,t,function(D,F){if(D)return n(D);if(t.new_edits||(F=F.filter(function(ae){return ae.error})),!On(f))for(var H=0,J=F.length;H<J;H++)F[H].id=F[H].id||h[H];n(null,F)})}),Yt.prototype.registerDependentDatabase=Gt("registerDependentDatabase",function(e,t){var n=new this.constructor(e,this.__opts);Gr(this,"_local/_pouch_dependentDbs",function(i){return i.dependentDbs=i.dependentDbs||{},!i.dependentDbs[e]&&(i.dependentDbs[e]=!0,i)}).then(function(){t(null,{db:n})}).catch(t)}),Yt.prototype.destroy=Gt("destroy",function(e,t){"function"==typeof e&&(t=e,e={});var n=this,r=!("use_prefix"in n)||n.use_prefix;function i(){n._destroy(e,function(f,h){if(f)return t(f);n._destroyed=!0,n.emit("destroyed"),t(null,h||{ok:!0})})}if(On(n))return i();n.get("_local/_pouch_dependentDbs",function(f,h){if(f)return 404!==f.status?t(f):i();var F=n.constructor,H=Object.keys(h.dependentDbs).map(function(J){var ae=r?J.replace(new RegExp("^"+F.prefix),""):J;return new F(ae,n.__opts).destroy()});Promise.all(H).then(i,t)})}),ra.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},ra.prototype.fail=function(e){this.failed=e,this.execute()},ra.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},ra.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},P()(Et,Yt),Et.adapters={},Et.preferredAdapters=[],Et.prefix="_pouch_";var vf=new(nt());(function(e){Object.keys(nt().prototype).forEach(function(n){"function"==typeof nt().prototype[n]&&(e[n]=vf[n].bind(vf))});var t=e._destructionListeners=new E;e.on("ref",function(r){t.has(r.name)||t.set(r.name,[]),t.get(r.name).push(r)}),e.on("unref",function(r){if(t.has(r.name)){var i=t.get(r.name),f=i.indexOf(r);f<0||(i.splice(f,1),i.length>1?t.set(r.name,i):t.delete(r.name))}}),e.on("destroyed",function(r){if(t.has(r)){var i=t.get(r);t.delete(r),i.forEach(function(f){f.emit("destroyed",!0)})}})})(Et),Et.adapter=function(e,t,n){t.valid()&&(Et.adapters[e]=t,n&&Et.preferredAdapters.push(e))},Et.plugin=function(e){if("function"==typeof e)e(Et);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach(function(t){Et.prototype[t]=e[t]})}return this.__defaults&&(Et.__defaults=Dr({},this.__defaults)),Et},Et.defaults=function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);r=r||{},n&&"object"==typeof n&&(n=(r=n).name,delete r.name),r=Dr({},t.__defaults,r),Et.call(this,n,r)}return P()(t,Et),t.preferredAdapters=Et.preferredAdapters.slice(),Object.keys(Et).forEach(function(n){n in t||(t[n]=Et[n])}),t.__defaults=Dr({},this.__defaults,e),t},Et.fetch=function(e,t){return Hh(e,t)},Et.plugin(function(e){e._changesFilterPlugin={validate:_p,normalize:bp,shouldFilter:Ep,filter:Sp}}),Et.version="7.2.2";const bu=Et;function cs(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,cs)}catch{}}function bc(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,bc)}catch{}}function Ec(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Ec)}catch{}}function gf(e,t){return t&&e.then(function(n){T()(function(){t(null,n)})},function(n){T()(function(){t(n)})}),e}function Sc(e,t){return function(){var n=arguments,r=this;return e.add(function(){return t.apply(r,n)})}}function yf(e){var t=new w(e),n=new Array(t.size),r=-1;return t.forEach(function(i){n[++r]=i}),n}function wc(e){var t=new Array(e.size),n=-1;return e.forEach(function(r,i){t[++n]=i}),t}function ia(){this.promise=new Promise(function(e){e()})}function _f(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function bf(e,t,n,r,i,f){var D,h=function(e,t){return _f(e)+_f(t)+"undefined"}(n,r);if(!i&&(D=e._cachedViews=e._cachedViews||{})[h])return D[h];var F=e.info().then(function(H){var J=H.db_name+"-mrview-"+(i?"temp":Hr(h));return Gr(e,"_local/"+f,function(ce){ce.views=ce.views||{};var we=t;-1===we.indexOf("/")&&(we=t+"/"+t);var me=ce.views[we]=ce.views[we]||{};if(!me[J])return me[J]=!0,ce}).then(function(){return e.registerDependentDatabase(J).then(function(ce){var we=ce.db;we.auto_compaction=!0;var me={name:J,db:we,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};return me.db.get("_local/lastSeq").catch(function(fe){if(404!==fe.status)throw fe}).then(function(fe){return me.seq=fe?fe.seq:0,D&&me.db.once("destroyed",function(){delete D[h]}),me})})})});return D&&(D[h]=F),F}P()(cs,Error),P()(bc,Error),P()(Ec,Error),ia.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},ia.prototype.finish=function(){return this.promise};var Ef={},Sf=new ia;function Cc(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function Cf(e,t){try{e.emit("error",t)}catch{rt("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),rt("error",t)}}function Af(e){return(e=pn(e)).index||(e.index={}),["type","name","ddoc"].forEach(function(t){e.index[t]&&(e[t]=e.index[t],delete e.index[t])}),e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function sa(e,t,n,r){var i,f;n.headers=new yu({"Content-type":"application/json"}),e.fetch(t,n).then(function(h){return i=h.status,f=h.ok,h.json()}).then(function(h){if(f)r(null,h);else{h.status=i;var D=Ye(h);r(D)}}).catch(r)}function $p(e,t,n){t=Af(t),sa(e,"_index",{method:"POST",body:JSON.stringify(t)},n)}function Wp(e,t,n){sa(e,"_find",{method:"POST",body:JSON.stringify(t)},n)}function Kp(e,t,n){sa(e,"_explain",{method:"POST",body:JSON.stringify(t)},n)}function Hp(e,t){sa(e,"_index",{method:"GET"},t)}function Vp(e,t,n){var r=t.ddoc,f=t.name;return r?f?void sa(e,"_index/"+[r,t.type||"json",f].map(encodeURIComponent).join("/"),{method:"DELETE"},n):n(new Error("you must provide an index's name")):n(new Error("you must provide an index's ddoc"))}function Df(e){return function(){for(var t=arguments.length,n=new Array(t),r=-1;++r<t;)n[r]=arguments[r];return e.call(this,n)}}function oa(e){return Df(function(t){var n=t.pop(),r=e.apply(this,t);return function(e,t){e.then(function(n){T()(function(){t(null,n)})},function(n){T()(function(){t(n)})})}(r,n),r})}var Ac=Df(function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?t=t.concat(Ac.apply(null,i)):t.push(i)}return t});function Dc(e){for(var t={},n=0,r=e.length;n<r;n++)t=Dr(t,e[n]);return t}function Pf(e,t){for(var n=0,r=Math.min(e.length,t.length);n<r;n++)if(e[n]!==t[n])return!1;return!0}function Of(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}var cm=function(e,t,n,r){function i(Ae,De,ke){try{De(ke)}catch(Ge){Cf(Ae,Ge)}}function f(Ae,De,ke,Ge,Ue){try{return{output:De(ke,Ge,Ue)}}catch(Ze){return Cf(Ae,Ze),{error:Ze}}}function h(Ae,De){var ke=Dn(Ae.key,De.key);return 0!==ke?ke:Dn(Ae.value,De.value)}function D(Ae,De,ke){return ke=ke||0,"number"==typeof De?Ae.slice(ke,De+ke):ke>0?Ae.slice(ke):Ae}function F(Ae){var De=Ae.value;return De&&"object"==typeof De&&De._id||Ae.id}function J(Ae){return function(De){return Ae.include_docs&&Ae.attachments&&Ae.binary&&function(Ae){Ae.rows.forEach(function(De){var ke=De.doc&&De.doc._attachments;!ke||Object.keys(ke).forEach(function(Ge){var Ue=ke[Ge];ke[Ge].data=xe(Ue.data,Ue.content_type)})})}(De),De}}function ae(Ae,De,ke,Ge){var Ue=De[Ae];void 0!==Ue&&(Ge&&(Ue=encodeURIComponent(JSON.stringify(Ue))),ke.push(Ae+"="+Ue))}function ce(Ae){if(void 0!==Ae){var De=Number(Ae);return isNaN(De)||De!==parseInt(Ae,10)?Ae:De}}function fe(Ae,De){var ke=Ae.descending?"endkey":"startkey",Ge=Ae.descending?"startkey":"endkey";if(void 0!==Ae[ke]&&void 0!==Ae[Ge]&&Dn(Ae[ke],Ae[Ge])>0)throw new cs("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(De.reduce&&!1!==Ae.reduce){if(Ae.include_docs)throw new cs("{include_docs:true} is invalid for reduce");if(Ae.keys&&Ae.keys.length>1&&!Ae.group&&!Ae.group_level)throw new cs("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(Ue){var Ze=function(Ae){if(Ae){if("number"!=typeof Ae)return new cs('Invalid value for integer: "'+Ae+'"');if(Ae<0)return new cs('Invalid value for positive integer: "'+Ae+'"')}}(Ae[Ue]);if(Ze)throw Ze})}function Ie(Ae){return function(De){if(404===De.status)return Ae;throw De}}function Je(Ae){var De="string"==typeof Ae?Ae:Ae.name,ke=Ef[De];return ke||(ke=Ef[De]=new ia),ke}function Ke(Ae){return Sc(Je(Ae),function(){return function(Ae){var De,ke;var Ue=t(Ae.mapFun,function(ft,wt){var Vt={id:ke._id,key:as(ft)};null!=wt&&(Vt.value=as(wt)),De.push(Vt)}),Ze=Ae.seq||0;function it(ft,wt){return function(){return function(Ae,De,ke){var Ge="_local/lastSeq";return Ae.db.get(Ge).catch(Ie({_id:Ge,seq:0})).then(function(Ue){var Ze=wc(De);return Promise.all(Ze.map(function(it){return function(Ae,De,ke){var Ge="_local/doc_"+Ae,Ue={_id:Ge,keys:[]},Ze=ke.get(Ae),it=Ze[0];return(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(Ze[1])?Promise.resolve(Ue):De.db.get(Ge).catch(Ie(Ue))).then(function(Ve){return function(Ve){return Ve.keys.length?De.db.allDocs({keys:Ve.keys,include_docs:!0}):Promise.resolve({rows:[]})}(Ve).then(function(ft){return function(Ve,ft){for(var wt=[],Vt=new w,$t=0,Ut=ft.rows.length;$t<Ut;$t++){var rn=ft.rows[$t].doc;if(rn&&(wt.push(rn),Vt.add(rn._id),rn._deleted=!it.has(rn._id),!rn._deleted)){var fr=it.get(rn._id);"value"in fr&&(rn.value=fr.value)}}var qn=wc(it);return qn.forEach(function(da){if(!Vt.has(da)){var ha={_id:da},Yf=it.get(da);"value"in Yf&&(ha.value=Yf.value),wt.push(ha)}}),Ve.keys=yf(qn.concat(Ve.keys)),wt.push(Ve),wt}(Ve,ft)})})}(it,Ae,De)})).then(function(it){var dt=pr(it);return Ue.seq=ke,dt.push(Ue),Ae.db.bulkDocs({docs:dt})})})}(Ae,ft,wt)}}var dt=new ia;function ot(){return Ae.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:Ze,limit:50}).then(pt)}function pt(ft){var wt=ft.results;if(wt.length){var Vt=function(ft){for(var wt=new E,Vt=0,$t=ft.length;Vt<$t;Vt++){var Ut=ft[Vt];if("_"!==Ut.doc._id[0]){De=[],(ke=Ut.doc)._deleted||i(Ae.sourceDB,Ue,ke),De.sort(h);var Wt=Ve(De);wt.set(Ut.doc._id,[Wt,Ut.changes])}Ze=Ut.seq}return wt}(wt);if(dt.add(it(Vt,Ze)),!(wt.length<50))return ot()}}function Ve(ft){for(var Vt,wt=new E,$t=0,Ut=ft.length;$t<Ut;$t++){var Wt=ft[$t],rn=[Wt.key,Wt.id];$t>0&&0===Dn(Wt.key,Vt)&&rn.push($t),wt.set(Cr(rn),Wt),Vt=Wt.key}return wt}return ot().then(function(){return dt.finish()}).then(function(){Ae.seq=Ze})}(Ae)})()}function St(Ae,De){return Sc(Je(Ae),function(){return function(Ae,De){var ke,Ge=Ae.reduceFun&&!1!==De.reduce,Ue=De.skip||0;function Ze($t){return $t.include_docs=!0,Ae.db.allDocs($t).then(function(Ut){return ke=Ut.total_rows,Ut.rows.map(function(Wt){if("value"in Wt.doc&&"object"==typeof Wt.doc.value&&null!==Wt.doc.value){var rn=Object.keys(Wt.doc.value).sort(),fr=["id","key","value"];if(!(rn<fr||rn>fr))return Wt.doc.value}var qn=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var f=Zh(e,r);t.push(f.num),r+=f.length;break;case"4":for(var h="";;){var D=e[r];if("\0"===D)break;h+=D,r++}h=h.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"\x01").replace(/\u0002\u0002/g,"\x02"),t.push(h);break;case"5":var F={element:[],index:t.length};t.push(F.element),n.push(F);break;case"6":var H={element:{},index:t.length};t.push(H.element),n.push(H);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();Yh(t,n)}}}(Wt.doc._id);return{key:qn[0],id:qn[1],value:"value"in Wt.doc?Wt.doc.value:null}})})}function it($t){var Ut;if(Ut=Ge?function(Ae,De,ke){0===ke.group_level&&delete ke.group_level;var Ge=ke.group||ke.group_level,Ue=n(Ae.reduceFun),Ze=[],it=isNaN(ke.group_level)?Number.POSITIVE_INFINITY:ke.group_level;De.forEach(function(Ve){var ft=Ze[Ze.length-1],wt=Ge?Ve.key:null;if(Ge&&Array.isArray(wt)&&(wt=wt.slice(0,it)),ft&&0===Dn(ft.groupKey,wt))return ft.keys.push([Ve.key,Ve.id]),void ft.values.push(Ve.value);Ze.push({keys:[[Ve.key,Ve.id]],values:[Ve.value],groupKey:wt})}),De=[];for(var dt=0,ot=Ze.length;dt<ot;dt++){var pt=Ze[dt],lt=f(Ae.sourceDB,Ue,pt.keys,pt.values,!1);if(lt.error&&lt.error instanceof Ec)throw lt.error;De.push({value:lt.error?null:lt.output,key:pt.groupKey})}return{rows:D(De,ke.limit,ke.skip)}}(Ae,$t,De):{total_rows:ke,offset:Ue,rows:$t},De.update_seq&&(Ut.update_seq=Ae.seq),De.include_docs){var Wt=yf($t.map(F));return Ae.sourceDB.allDocs({keys:Wt,include_docs:!0,conflicts:De.conflicts,attachments:De.attachments,binary:De.binary}).then(function(rn){var fr=new E;return rn.rows.forEach(function(qn){fr.set(qn.id,qn.doc)}),$t.forEach(function(qn){var da=F(qn),ha=fr.get(da);ha&&(qn.doc=ha)}),Ut})}return Ut}if(void 0!==De.keys&&!De.keys.length&&(De.limit=0,delete De.keys),void 0!==De.keys){var ot=De.keys.map(function($t){var Ut={startkey:Cr([$t]),endkey:Cr([$t,{}])};return De.update_seq&&(Ut.update_seq=!0),Ze(Ut)});return Promise.all(ot).then(pr).then(it)}var lt,Ve,pt={descending:De.descending};if(De.update_seq&&(pt.update_seq=!0),"start_key"in De&&(lt=De.start_key),"startkey"in De&&(lt=De.startkey),"end_key"in De&&(Ve=De.end_key),"endkey"in De&&(Ve=De.endkey),void 0!==lt&&(pt.startkey=Cr(De.descending?[lt,{}]:[lt])),void 0!==Ve){var ft=!1!==De.inclusive_end;De.descending&&(ft=!ft),pt.endkey=Cr(ft?[Ve,{}]:[Ve])}if(void 0!==De.key){var wt=Cr([De.key]),Vt=Cr([De.key,{}]);pt.descending?(pt.endkey=wt,pt.startkey=Vt):(pt.startkey=wt,pt.endkey=Vt)}return Ge||("number"==typeof De.limit&&(pt.limit=De.limit),pt.skip=Ue),Ze(pt).then(it)}(Ae,De)})()}var jt=function(e){return M()(function(t){var n=t.pop(),r=e.apply(this,t);return"function"==typeof n&&gf(r,n),r})}(function(){var Ae=this;return"function"==typeof Ae._viewCleanup?function(Ae){return new Promise(function(De,ke){Ae._viewCleanup(function(Ge,Ue){if(Ge)return ke(Ge);De(Ue)})})}(Ae):On(Ae)?function(Ae){return Ae.fetch("_view_cleanup",{headers:new yu({"Content-Type":"application/json"}),method:"POST"}).then(function(De){return De.json()})}(Ae):function(Ae){return Ae.get("_local/"+e).then(function(De){var ke=new E;Object.keys(De.views).forEach(function(Ue){var Ze=Cc(Ue),it="_design/"+Ze[0],dt=Ze[1],ot=ke.get(it);ot||(ot=new w,ke.set(it,ot)),ot.add(dt)});var Ge={keys:wc(ke),include_docs:!0};return Ae.allDocs(Ge).then(function(Ue){var Ze={};Ue.rows.forEach(function(ot){var pt=ot.key.substring(8);ke.get(ot.key).forEach(function(lt){var Ve=pt+"/"+lt;De.views[Ve]||(Ve=lt);var ft=Object.keys(De.views[Ve]),wt=ot.doc&&ot.doc.views&&ot.doc.views[lt];ft.forEach(function(Vt){Ze[Vt]=Ze[Vt]||wt})})});var dt=Object.keys(Ze).filter(function(ot){return!Ze[ot]}).map(function(ot){return Sc(Je(ot),function(){return new Ae.constructor(ot,Ae.__opts).destroy()})()});return Promise.all(dt).then(function(){return{ok:!0}})})},Ie({ok:!0}))}(Ae)});return{query:function(Ae,De,ke){var Ge=this;"function"==typeof De&&(ke=De,De={}),De=De?function(Ae){return Ae.group_level=ce(Ae.group_level),Ae.limit=ce(Ae.limit),Ae.skip=ce(Ae.skip),Ae}(De):{},"function"==typeof Ae&&(Ae={map:Ae});var Ue=Promise.resolve().then(function(){return function(Ae,De,ke){if("function"==typeof Ae._query)return function(Ae,De,ke){return new Promise(function(Ge,Ue){Ae._query(De,ke,function(Ze,it){if(Ze)return Ue(Ze);Ge(it)})})}(Ae,De,ke);if(On(Ae))return function(Ae,De,ke){var Ue,it,dt,Ge=[],Ze="GET";if(ae("reduce",ke,Ge),ae("include_docs",ke,Ge),ae("attachments",ke,Ge),ae("limit",ke,Ge),ae("descending",ke,Ge),ae("group",ke,Ge),ae("group_level",ke,Ge),ae("skip",ke,Ge),ae("stale",ke,Ge),ae("conflicts",ke,Ge),ae("startkey",ke,Ge,!0),ae("start_key",ke,Ge,!0),ae("endkey",ke,Ge,!0),ae("end_key",ke,Ge,!0),ae("inclusive_end",ke,Ge),ae("key",ke,Ge,!0),ae("update_seq",ke,Ge),Ge=""===(Ge=Ge.join("&"))?"":"?"+Ge,void 0!==ke.keys){var pt="keys="+encodeURIComponent(JSON.stringify(ke.keys));pt.length+Ge.length+1<=2e3?Ge+=("?"===Ge[0]?"&":"?")+pt:(Ze="POST","string"==typeof De?Ue={keys:ke.keys}:De.keys=ke.keys)}if("string"==typeof De){var lt=Cc(De);return Ae.fetch("_design/"+lt[0]+"/_view/"+lt[1]+Ge,{headers:new yu({"Content-Type":"application/json"}),method:Ze,body:JSON.stringify(Ue)}).then(function(Ve){return it=Ve.ok,dt=Ve.status,Ve.json()}).then(function(Ve){if(!it)throw Ve.status=dt,Ye(Ve);return Ve.rows.forEach(function(ft){if(ft.value&&ft.value.error&&"builtin_reduce_error"===ft.value.error)throw new Error(ft.reason)}),Ve}).then(J(ke))}return Ue=Ue||{},Object.keys(De).forEach(function(Ve){Ue[Ve]=Array.isArray(De[Ve])?De[Ve]:De[Ve].toString()}),Ae.fetch("_temp_view"+Ge,{headers:new yu({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(Ue)}).then(function(Ve){return it=Ve.ok,dt=Ve.status,Ve.json()}).then(function(Ve){if(!it)throw Ve.status=dt,Ye(Ve);return Ve}).then(J(ke))}(Ae,De,ke);if("string"!=typeof De)return fe(ke,De),Sf.add(function(){return bf(Ae,"temp_view/temp_view",De.map,De.reduce,!0,e).then(function(ot){return function(e,t){return e.then(function(n){return t().then(function(){return n})},function(n){return t().then(function(){throw n})})}(Ke(ot).then(function(){return St(ot,ke)}),function(){return ot.db.destroy()})})}),Sf.finish();var Ge=De,Ue=Cc(Ge),it=Ue[1];return Ae.get("_design/"+Ue[0]).then(function(dt){var ot=dt.views&&dt.views[it];if(!ot)throw new bc("ddoc "+dt._id+" has no view named "+it);return r(dt,it),fe(ke,ot),bf(Ae,Ge,ot.map,ot.reduce,!1,e).then(function(lt){return"ok"===ke.stale||"update_after"===ke.stale?("update_after"===ke.stale&&T()(function(){Ke(lt)}),St(lt,ke)):Ke(lt).then(function(){return St(lt,ke)})})})}(Ge,Ae,De)});return gf(Ue,ke),Ue},viewCleanup:jt}}("indexes",function(e,t){return function(e,t){var n=function(e){for(var t=0,n=e.length;t<n;t++)if(-1!==e[t].indexOf("."))return!1;return!0}(e),r=1===e.length;return n?r?function(e,t){return function(n){t(n[e])}}(e[0],t):function(e,t){return function(n){for(var r=[],i=0,f=e.length;i<f;i++)r.push(n[e[i]]);t(r)}}(e,t):r?function(e,t){var n=qo(e);return function(r){for(var i=r,f=0,h=n.length;f<h;f++)if(void 0===(i=i[n[f]]))return;t(i)}}(e[0],t):function(e,t){return function(n){for(var r=[],i=0,f=e.length;i<f;i++){for(var h=qo(e[i]),D=n,F=0,H=h.length;F<H;F++)if(void 0===(D=D[h[F]]))return;r.push(D)}t(r)}}(e,t)}(Object.keys(e.fields),t)},function(){throw new Error("reduce not supported")},function(e,t){var n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")});function Pc(e){return e._customFindAbstractMapper||cm}function If(e){return e.fields=e.fields.map(function(t){if("string"==typeof t){var n={};return n[t]="asc",n}return t}),e}function dm(e,t){for(var n=[],r=0;r<t.def.fields.length;r++){var i=Jn(t.def.fields[r]);n.push(e[i])}return n}function Tf(e){return e.allDocs({startkey:"_design/",endkey:"_design/\uffff",include_docs:!0}).then(function(t){var n={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return n.indexes=Ac(n.indexes,t.rows.filter(function(r){return"query"===r.doc.language}).map(function(r){return(void 0!==r.doc.views?Object.keys(r.doc.views):[]).map(function(f){return{ddoc:r.id,name:f,type:"json",def:If(r.doc.views[f].options.def)}})})),n.indexes.sort(function(r,i){return mc(r.name,i.name)}),n.total_rows=n.indexes.length,n})}var Oc={"\uffff":{}};const bm={queryOpts:{limit:0,startkey:Oc,endkey:null},inMemoryFields:[]};function Em(e,t){for(var n=e.def.fields.map(Jn),r=0,i=n.length;r<i;r++)if(t===n[r])return!0;return!1}function Sm(e,t){return"$eq"!==Jn(e[t])}function Rf(e,t){var n=t.def.fields.map(Jn);return e.slice().sort(function(r,i){var f=n.indexOf(r),h=n.indexOf(i);return-1===f&&(f=Number.MAX_VALUE),-1===h&&(h=Number.MAX_VALUE),mc(f,h)})}function Am(e,t,n,r){var i=Ac(e,function(e,t,n){for(var r=!1,i=0,f=(n=Rf(n,e)).length;i<f;i++){var h=n[i];if(r||!Em(e,h))return n.slice(i);i<f-1&&Sm(t,h)&&(r=!0)}return[]}(t,n,r),function(e){var t=[];return Object.keys(e).forEach(function(n){Object.keys(e[n]).forEach(function(i){"$ne"===i&&t.push(n)})}),t}(n));return Rf(function(e){for(var t={},n=0;n<e.length;n++)t["$"+e[n]]=!0;return Object.keys(t).map(function(r){return r.substring(1)})}(i),t)}var Pm=["$eq","$gt","$gte","$lt","$lte"];function Mf(e){return-1===Pm.indexOf(e)}function Im(e,t,n,r){var i=e.def.fields.map(Jn);return!!function(e,t,n){if(t){var r=function(e,t){return!(e.length>t.length)&&Pf(e,t)}(t,e),i=Pf(n,e);return r&&i}return function(e,t){e=e.slice();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(!e.length)break;var f=e.indexOf(i);if(-1===f)return!1;e.splice(f,1)}return!0}(n,e)}(i,t,n)&&function(e,t){var r=t[e[0]];return void 0===r||!(1===Object.keys(r).length&&"$ne"===Jn(r))}(i,r)}function km(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}function jm(e,t){var n=e.selector,r=e.sort;if(function(e){return Object.keys(e).map(function(n){return e[n]}).some(function(n){return"object"==typeof n&&0===Object.keys(n).length})}(n))return Dr({},bm,{index:t[0]});var i=function(e,t){var i,n=Object.keys(e),r=t?t.map(Jn):[];return i=n.length>=r.length?n:r,0===r.length?{fields:i}:{fields:i=i.sort(function(f,h){var D=r.indexOf(f);-1===D&&(D=Number.MAX_VALUE);var F=r.indexOf(h);return-1===F&&(F=Number.MAX_VALUE),D<F?-1:D>F?1:0}),sortOrder:t.map(Jn)}}(n,r),f=i.fields,D=function(e,t,n,r,i){var f=function(e,t,n,r){return r.filter(function(i){return Im(i,n,t,e)})}(e,t,n,r);if(0===f.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var h=r[0];return h.defaultUsed=!0,h}if(1===f.length&&!i)return f[0];var D=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}(t);if(i){var H="_design/"+i[0],J=2===i.length&&i[1],ae=f.find(function(ce){return!!(J&&ce.ddoc===H&&J===ce.name||ce.ddoc===H)});if(!ae)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return ae}return function(e,t){for(var n=null,r=-1,i=0,f=e.length;i<f;i++){var h=e[i],D=t(h);D>r&&(r=D,n=h)}return n}(f,function(ce){for(var we=ce.def.fields.map(Jn),me=0,fe=0,_e=we.length;fe<_e;fe++)D[we[fe]]&&me++;return me})}(n,f,i.sortOrder,t,e.use_index),F=function(e,t){return t.defaultUsed?function(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}(e):1===t.def.fields.length?function(e,t){var h,n=Jn(t.def.fields[0]),r=e[n]||{},i=[];return Object.keys(r).forEach(function(D){Mf(D)&&i.push(n);var H=function(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:null}}(D,r[D]);h=h?Dc([h,H]):H}),{queryOpts:h,inMemoryFields:i}}(e,t):function(e,t){var h,D,n=t.def.fields.map(Jn),r=[],i=[],f=[];function F(yt){!1!==h&&i.push(null),!1!==D&&f.push(Oc),r=n.slice(yt)}for(var H=0,J=n.length;H<J;H++){var ce=e[n[H]];if(!ce||!Object.keys(ce).length){F(H);break}if(Object.keys(ce).some(Mf)){F(H);break}if(H>0){var we="$gt"in ce||"$gte"in ce||"$lt"in ce||"$lte"in ce,me=Object.keys(e[n[H-1]]),fe=Of(me,["$eq"]),_e=Of(me,Object.keys(ce));if(we&&!fe&&!_e){F(H);break}}for(var Me=Object.keys(ce),Ie=null,je=0;je<Me.length;je++){var $e=Me[je],Ke=km($e,ce[$e]);Ie=Ie?Dc([Ie,Ke]):Ke}i.push("startkey"in Ie?Ie.startkey:null),f.push("endkey"in Ie?Ie.endkey:Oc),"inclusive_start"in Ie&&(h=Ie.inclusive_start),"inclusive_end"in Ie&&(D=Ie.inclusive_end)}var tt={startkey:i,endkey:f};return void 0!==h&&(tt.inclusive_start=h),void 0!==D&&(tt.inclusive_end=D),{queryOpts:tt,inMemoryFields:r}}(e,t)}(n,D);return{queryOpts:F.queryOpts,index:D,inMemoryFields:Am(F.inMemoryFields,D,n,f)}}function xf(e,t,n){return t.selector&&(t.selector=gc(t.selector)),t.sort&&(t.sort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map(function(t){if("string"==typeof t){var n={};return n[t]="asc",n}return t})}(t.sort)),t.use_index&&(t.use_index=function(e){var t=[];return"string"==typeof e?t.push(e):t=e,t.map(function(n){return n.replace("_design/","")})}(t.use_index)),function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}(t),Tf(e).then(function(r){e.constructor.emit("debug",["find","planning query",t]);var i=jm(t,r.indexes);e.constructor.emit("debug",["find","query plan",i]);var f=i.index;!function(e,t){if(t.defaultUsed&&e.sort){var n=e.sort.filter(function(r){return"_id"!==Object.keys(r)[0]}).map(function(r){return Object.keys(r)[0]});if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}}(t,f);var h=Dr({include_docs:!0,reduce:!1,indexes_count:r.total_rows},i.queryOpts);return"startkey"in h&&"endkey"in h&&Dn(h.startkey,h.endkey)>0?{docs:[]}:(t.sort&&"string"!=typeof t.sort[0]&&"desc"===vc(t.sort[0])&&(h.descending=!0,h=function(e){var t=pn(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}(h)),i.inMemoryFields.length||("limit"in t&&(h.limit=t.limit),"skip"in t&&(h.skip=t.skip)),n?Promise.resolve(i,h):Promise.resolve().then(function(){if("_all_docs"===f.name)return function(e,t){var n=pn(t);return n.descending?("endkey"in n&&"string"!=typeof n.endkey&&(n.endkey=""),"startkey"in n&&"string"!=typeof n.startkey&&(n.limit=0)):("startkey"in n&&"string"!=typeof n.startkey&&(n.startkey=""),"endkey"in n&&"string"!=typeof n.endkey&&(n.limit=0)),"key"in n&&"string"!=typeof n.key&&(n.limit=0),n.limit>0&&n.indexes_count&&(n.original_limit=n.limit,n.limit+=n.indexes_count),e.allDocs(n).then(function(r){return r.rows=r.rows.filter(function(i){return!/^_design\//.test(i.id)}),n.original_limit&&(n.limit=n.original_limit),r.rows=r.rows.slice(0,n.limit),r})}(e,h);var F=function(e){return e.ddoc.substring(8)+"/"+e.name}(f);return Pc(e).query.call(e,F,h)}).then(function(F){!1===h.inclusive_start&&(F.rows=function(e,t,n){for(var r=n.def.fields,i=0,f=e.length;i<f;i++){var D=dm(e[i].doc,n);if(1===r.length)D=D[0];else for(;D.length>t.length;)D.pop();if(Math.abs(Dn(D,t))>0)break}return i>0?e.slice(i):e}(F.rows,h.startkey,f)),i.inMemoryFields.length&&(F.rows=_u(F.rows,t,i.inMemoryFields));var H={docs:F.rows.map(function(J){var ae=J.doc;return t.fields?function(e,t){for(var n={},r=0,i=t.length;r<i;r++){var f=qo(t[r]),h=pc(e,f);void 0!==h&&np(n,f,h)}return n}(ae,t.fields):ae})};return f.defaultUsed&&(H.warning="No matching index found, create an index to optimize query time."),H}))})}var Km=oa(function(e,t){var r,n=pn((t=Af(t)).index);function i(){return r||(r=Hr(JSON.stringify(t)))}t.index=If(t.index),function(e){var t=e.fields.filter(function(n){return"asc"===vc(n)});if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}(t.index);var f=t.name||"idx-"+i(),h=t.ddoc||"idx-"+i(),D="_design/"+h,F=!1,H=!1;return e.constructor.emit("debug",["find","creating index",D]),Gr(e,D,function(ae){return ae._rev&&"query"!==ae.language&&(F=!0),ae.language="query",ae.views=ae.views||{},!(H=!!ae.views[f])&&(ae.views[f]={map:{fields:Dc(t.index.fields)},reduce:"_count",options:{def:n}},ae)}).then(function(){if(F)throw new Error('invalid language for ddoc with id "'+D+'" (should be "query")')}).then(function(){var ae=h+"/"+f;return Pc(e).query.call(e,ae,{limit:0,reduce:!1}).then(function(){return{id:D,name:f,result:H?"exists":"created"}})})}),Hm=oa(xf),Vm=oa(function(e,t){return xf(e,t,!0).then(function(n){return{dbname:e.name,index:n.index,selector:t.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}})}),Gm=oa(Tf),Qm=oa(function(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");var n=t.ddoc,r=t.name;return Gr(e,n,function(f){return 1===Object.keys(f.views).length&&f.views[r]?{_id:n,_deleted:!0}:(delete f.views[r],f)}).then(function(){return Pc(e).viewCleanup.apply(e)}).then(function(){return{ok:!0}})}),Xs={};Xs.createIndex=qt(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to create"));(On(this)?$p:Km)(this,e,t)}),Xs.find=qt(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to find()"));(On(this)?Wp:Hm)(this,e,t)}),Xs.explain=qt(function(e,t){if(void 0===t&&(t=e,e=void 0),"object"!=typeof e)return t(new Error("you must provide search parameters to explain()"));(On(this)?Kp:Vm)(this,e,t)}),Xs.getIndexes=qt(function(e){(On(this)?Hp:Gm)(this,e)}),Xs.deleteIndex=qt(function(e,t){if("object"!=typeof e)return t(new Error("you must provide an index to delete"));(On(this)?Vp:Qm)(this,e,t)});const Zm=Xs;var aa=function(t){try{if(!t)return Promise.resolve({});var n={};return Promise.resolve(Promise.all(Object.entries(t).map(function(r){try{var i=r[0],f=r[1];if(!f.type)throw Fe("SNH",{args:{obj:f}});var h=function(){if(f.data){var D=f;return Promise.resolve(Promise.all([Ff(D.data),$n_toString(D.data)])).then(function(F){n[i]={digest:Nf+"-"+F[0],length:F[1].length,type:D.type}})}n[i]=f}();return Promise.resolve(h&&h.then?h.then(function(){}):void 0)}catch(D){return Promise.reject(D)}}))).then(function(){return n})}catch(r){return Promise.reject(r)}},qs=new Set,Su="_local/",kf="_design/";function wu(e,t){return"_id"===e||t[e]||((t=Ct(t))[e]=t._id,delete t._id),t}function cr(e,t){var n=wu(e,t);return delete(n=Ct(n))._revisions,n._attachments={},t._attachments&&Object.entries(t._attachments).forEach(function(r){var f=r[1];n._attachments[r[0]]=f.data?{data:f.data,type:f.type?f.type:f.content_type}:{digest:f.digest,type:f.type?f.type:f.content_type,length:f.length}}),n}function Lf(e,t){var n=Ic(e,t);return(n=Ct(n))._attachments={},t._attachments&&Object.entries(t._attachments).forEach(function(r){var f=r[1];n._attachments[r[0]]=f.data?{data:f.data,content_type:f.type}:{digest:f.digest,content_type:f.type,length:f.length,stub:!0}}),n}function Ic(e,t){if("_id"===e)return t;var n=t[e],r=Ct(t);return delete r[e],r._id=n,r}function Bf(e,t,n){if(!t)throw new Error("primary missing !!");return(e?"local":"non-local")+"|"+t+"|"+n}function Tc(e,t){if("_id"===t)return e;if(Array.isArray(e))return e.map(function(r){return Tc(r,t)});if("object"==typeof e){var n={};return Object.entries(e).forEach(function(r){var i=r[0],f=r[1];i===t?n._id=f:n[i]=i.startsWith("$")?Tc(f,t):f}),n}return e}function Ff(e){return new Promise(function(t){ii(e,function(n){t(n)})})}var Nf="md5",jf=!1,Uf=new Map;function zf(e){var t=[e.name,e.adapter].join("|"),n=Uf.get(t);return n||(n={subject:new Hs.x},Uf.set(t,n)),n}var qm=0;function Rc(e,t,n,r){var i="DELETE"===t.operation?t.previous:t.doc,f=i[e];return{eventId:Bf(!1,f,i._rev),documentId:f,change:t,startTime:n,endTime:r}}function $f(e){if(e.rxdb)throw Ft("PL2",{plugin:e});"object"==typeof e&&e.default&&(e=e.default),bu.plugin(e)}$f(Zm),function(){if(!jf){jf=!0;var e=bu.prototype.bulkDocs;bu.plugin({bulkDocs:function(r,i,f){try{var J,h=function(){var me=Ct(i);return me.isDeeper=!0,e.call(D,J,me,function(fe,_e){if(!fe)return function(){try{var Te=function(){if(!f)return _e;f(null,_e)},Me=function(){if(!i.isDeeper){var Ie=Gn();return Promise.resolve(function(t,n){try{var r=[],i=function(){if(n.writeOptions.hasOwnProperty("new_edits")&&!n.writeOptions.new_edits)return Promise.resolve(Promise.all(n.writeDocs.map(function(h){try{var D=h._id;return h=cr(t,h),Promise.resolve(aa(h._attachments)).then(function(F){h._attachments=F;var H=n.previousDocs.get(D);if(H&&(H=cr(t,H)),!(H&&Lr(H._rev)>Lr(h._rev))&&(H||!h._deleted)&&!(H&&H._deleted&&h._deleted)){var J;if(H&&!H._deleted||h._deleted)if(h._deleted&&H&&!H._deleted)H._rev=h._rev,J={operation:"DELETE",doc:null,id:D,previous:H};else{if(!H)throw Fe("SNH",{args:{writeDoc:h}});J={operation:"UPDATE",doc:h,id:D,previous:H}}else J={operation:"INSERT",doc:h,id:D,previous:null};var ae=Rc(t,J,n.startTime,n.endTime);r.push(ae)}})}catch(F){return Promise.reject(F)}}))).then(function(){});var f=function(){if(!n.writeOptions.custom||n.writeOptions.custom&&!n.writeOptions.custom.writeRowById){var h=new Map;return n.writeDocs.forEach(function(F){return h.set(F._id,F)}),Promise.resolve(Promise.all(n.writeResult.map(function(F){try{var H=F.id;if(H.startsWith(kf)||H.startsWith(Su))return Promise.resolve();var J=vr(h,F.id);return J=cr(t,J),Promise.resolve(aa(J._attachments)).then(function(ae){J._attachments=ae,(J=Ct(J))._rev=F.rev;var ce=function(e,t){if(!t)throw Fe("SNH",{args:{pouchDoc:t}});var n=t._id,r=cr(e,t),i=r._rev?Lr(r._rev):1;return t._deleted?{operation:"DELETE",id:n,doc:null,previous:r}:1===i?{operation:"INSERT",id:n,doc:r,previous:null}:{operation:"UPDATE",id:n,doc:r,previous:"UNKNOWN"}}(t,J),we=Rc(t,ce);r.push(we)})}catch(ae){return Promise.reject(ae)}}))).then(function(){})}var D=n.writeOptions.custom.writeRowById;return Promise.resolve(Promise.all(n.writeResult.map(function(F){try{if(F.error)return Promise.resolve();var H=F.id,J=vr(D,H),ae=cr(t,J.document);return Promise.resolve(aa(ae._attachments)).then(function(ce){function we(){if(!J.document._deleted||J.previous&&!J.previous._deleted){var _e=Rc(n.writeOptions.custom.primaryPath,me,n.startTime,n.endTime);r.push(_e)}}ae._attachments=ce,ae._rev=F.rev;var me,fe=function(){if(!J.previous||J.previous._deleted)me={operation:"INSERT",doc:ae,id:H,previous:null};else{var _e=function(){if(J.document._deleted){var Te=cr(t,J.previous);return Promise.resolve(aa(Te._attachments)).then(function(Me){Te._attachments=Me,Te._rev=F.rev,me={operation:"DELETE",doc:null,id:F.id,previous:Te}})}me={operation:"UPDATE",doc:ae,id:F.id,previous:J.previous}}();if(_e&&_e.then)return _e.then(function(){})}}();return fe&&fe.then?fe.then(we):we()})}catch(ce){return Promise.reject(ce)}}))).then(function(){})}();return f&&f.then?f.then(function(){}):void 0}();return Promise.resolve(i&&i.then?i.then(function(){return r}):r)}catch(f){return Promise.reject(f)}}("_id",{emitId:H,writeDocs:J,writeOptions:i,writeResult:_e,previousDocs:ae,startTime:F,endTime:Ie})).then(function($e){var Je={id:rr(10),events:$e};zf(D).subject.next(Je)})}}();return Promise.resolve(Me&&Me.then?Me.then(Te):Te())}catch(Ie){return Promise.reject(Ie)}}();if(!f)throw fe;f(fe)})},D=this,F=Gn(),H=qm++;if("function"==typeof i&&(f=i,i={}),i||(i={}),Array.isArray(r)?J=r:void 0===r?J=[]:(J=r.docs,r.hasOwnProperty("new_edits")&&(i.new_edits=r.new_edits)),0===J.length)throw Fe("SNH",{args:{body:r,options:i}});var ae=new Map,ce=function(){if(i.hasOwnProperty("new_edits")&&!1===i.new_edits){var we=J.map(function(me){return me._id});return Promise.resolve(D.changes({live:!1,since:0,doc_ids:we,style:"all_docs"})).then(function(me){return Promise.resolve(Promise.all(me.results.map(function(fe){try{return Promise.resolve(D.get(fe.id,{rev:fe.changes[0].rev,deleted:"ok",revs:!!i.set_new_edit_as_latest_revision,style:"all_docs"}))}catch(_e){return Promise.reject(_e)}}))).then(function(fe){fe.forEach(function(_e){return ae.set(_e._id,_e)}),i.set_new_edit_as_latest_revision&&J.forEach(function(_e){var Me=ae.get(_e._id);if(Me){var Ie=_e._rev.split("-"),je=parseInt(Ie[0],10),$e=Ie[1];Me._revisions||(Me._revisions={ids:[]}),_e._revisions={start:je,ids:Me._revisions.ids},_e._revisions.ids.unshift($e),delete Me._revisions}})})})}}();return Promise.resolve(ce&&ce.then?ce.then(h):h())}catch(we){return Promise.reject(we)}}})}}();var ua=bu,nv=0,rv=function(){function e(n,r,i,f,h){var D=this;this.id=nv++,this.changes$=new Hs.x,this.subs=[],this.databaseName=n,this.collectionName=r,this.schema=i,this.internals=f,this.options=h,qs.add(this),this.primaryPath=ur(this.schema.primaryKey);var F=zf(this.internals.pouch),H=new mu(6e4),J=F.subject.subscribe(function(ae){try{return 0===ae.events.length||H.has(ae.id)||(H.add(ae.id),ae.events.forEach(function(ce){ce.change.doc&&(ce.change.doc=wu(D.primaryPath,ce.change.doc)),ce.change.previous&&(ce.change.previous=wu(D.primaryPath,ce.change.previous))}),D.changes$.next(ae)),Promise.resolve()}catch(ce){return Promise.reject(ce)}});this.subs.push(J)}var t=e.prototype;return t.close=function(){return this.subs.forEach(function(r){return r.unsubscribe()}),qs.delete(this),nr},t.remove=function(){try{var r=this;return r.subs.forEach(function(i){return i.unsubscribe()}),qs.delete(r),Promise.resolve(r.internals.pouch.destroy()).then(function(){})}catch(i){return Promise.reject(i)}},t.bulkAddRevisions=function(r){try{var i=this;if(0===r.length)throw Fe("P3",{args:{documents:r}});var f=r.map(function(h){return Lf(i.primaryPath,h)});return Promise.resolve(i.internals.pouch.bulkDocs(f,{new_edits:!1,set_new_edit_as_latest_revision:!0})).then(function(){})}catch(h){return Promise.reject(h)}},t.bulkWrite=function(r){try{var i=this;if(0===r.length)throw Fe("P2",{args:{documentWrites:r}});var f=new Map,h=r.map(function(D){f.set(D.document[i.primaryPath],D);var H=Lf(i.primaryPath,D.document);return D.previous&&(H._rev=D.previous._rev),H});return Promise.resolve(i.internals.pouch.bulkDocs(h,{custom:{primaryPath:i.primaryPath,writeRowById:f}})).then(function(D){var F={success:{},error:{}};return Promise.resolve(Promise.all(D.map(function(H){try{var J=vr(f,H.id),ae=function(){if(!H.error){var we=function(){F.success[H.id]=me},me=Ct(J.document);(me=wu(i.primaryPath,me))._rev=H.rev,me._attachments={};var fe=function(){if(J.document._attachments)return Promise.resolve(aa(J.document._attachments)).then(function(_e){me._attachments=_e});J.document._attachments={}}();return fe&&fe.then?fe.then(we):we()}F.error[H.id]={isError:!0,status:409,documentId:H.id,writeRow:J}}();return Promise.resolve(ae&&ae.then?ae.then(function(){}):void 0)}catch(ce){return Promise.reject(ce)}}))).then(function(){return F})})}catch(D){return Promise.reject(D)}},t.query=function(r){try{var i=this;return Promise.resolve(i.internals.pouch.find(r)).then(function(f){return{documents:f.docs.map(function(D){return cr(i.primaryPath,D)})}})}catch(f){return Promise.reject(f)}},t.getAttachmentData=function(r,i){try{return Promise.resolve(this.internals.pouch.getAttachment(r,i))}catch(h){return Promise.reject(h)}},t.findDocumentsById=function(r,i){try{var f=function(J){return h?J:Promise.resolve(D.internals.pouch.allDocs({include_docs:!0,keys:r})).then(function(ae){var ce={};return ae.rows.filter(function(we){return!!we.doc}).forEach(function(we){var me=we.doc;me=cr(D.primaryPath,me),ce[we.id]=me}),ce})},h=!1,D=this,F=function(){if(i)return Promise.resolve(D.internals.pouch.changes({live:!1,since:0,doc_ids:r,style:"all_docs"})).then(function(H){var J={};return Promise.resolve(Promise.all(H.results.map(function(ae){try{return Promise.resolve(D.internals.pouch.get(ae.id,{rev:ae.changes[0].rev,deleted:"ok",style:"all_docs"})).then(function(ce){var we=cr(D.primaryPath,ce);J[ae.id]=we})}catch(ce){return Promise.reject(ce)}}))).then(function(){return h=!0,J})})}();return Promise.resolve(F&&F.then?F.then(f):f(F))}catch(H){return Promise.reject(H)}},t.changeStream=function(){return this.changes$.asObservable()},t.getChangedDocuments=function(r){try{return Promise.resolve(this.internals.pouch.changes({live:!1,limit:r.limit,include_docs:!1,since:r.sinceSequence,descending:"before"===r.direction})).then(function(h){return{changedDocuments:h.results.filter(function(H){return!H.id.startsWith(kf)}).map(function(H){return{id:H.id,sequence:H.seq}}),lastSequence:h.last_seq}})}catch(h){return Promise.reject(h)}},e}(),sv=function(){function e(n,r,i,f){this.changes$=new Hs.x,this.databaseName=n,this.collectionName=r,this.internals=i,this.options=f,qs.add(this)}var t=e.prototype;return t.close=function(){return qs.delete(this),nr},t.remove=function(){try{return qs.delete(this),Promise.resolve(this.internals.pouch.destroy()).then(function(){})}catch(i){return Promise.reject(i)}},t.bulkWrite=function(r){try{var i=this;if(0===r.length)throw Fe("P2",{args:{documentWrites:r}});var f=new Map,h=r.map(function(F){f.set(F.document._id,F);var H=Ct(F.document);return H._id=Su+H._id,F.previous&&(H._rev=F.previous._rev),H}),D=Gn();return Promise.resolve(i.internals.pouch.bulkDocs(h)).then(function(F){var H=Gn(),J={success:{},error:{}},ae={id:rr(10),events:[]};return F.forEach(function(ce){ce.id=function(e){return e.substring(Su.length)}(ce.id);var we=vr(f,ce.id);if(ce.error)J.error[ce.id]={isError:!0,status:409,documentId:ce.id,writeRow:we};else{var _e,fe=Ct(we.document);if(fe._rev=ce.rev,fe._attachments={},J.success[ce.id]=fe,we.previous)if(we.document._deleted){var Te=Ct(we.previous);Te._rev=ce.rev,_e={operation:"DELETE",doc:null,id:ce.id,previous:Te}}else _e={operation:"UPDATE",doc:fe,id:ce.id,previous:we.previous};else _e={operation:"INSERT",doc:fe,id:ce.id,previous:null};if(!we.document._deleted||we.previous&&!we.previous._deleted){var Me="DELETE"===_e.operation?_e.previous:_e.doc,Ie=Bf(!0,Me._id,Me._rev?Me._rev:"");ae.events.push({eventId:Ie,documentId:ce.id,change:_e,startTime:D,endTime:H})}}}),i.changes$.next(ae),J})}catch(F){return Promise.reject(F)}},t.findLocalDocumentsById=function(r){try{var i=this,f={};return Promise.resolve(Promise.all(r.map(function(h){try{var D=Su+h,F=function(e,t){try{var n=Promise.resolve(i.internals.pouch.get(D)).then(function(H){H._id=h,f[h]=H})}catch(r){return}return n&&n.then?n.then(void 0,t):n}(0,function(){});return Promise.resolve(F&&F.then?F.then(function(){}):void 0)}catch(H){return Promise.reject(H)}}))).then(function(){return f})}catch(h){return Promise.reject(h)}},t.changeStream=function(){return this.changes$.asObservable()},e}(),ov={hash:function(t){return Ff(t)},hashKey:Nf,getSortComparator:function(t,n){var r,i=ur(t.primaryKey),f=n.sort?n.sort:[(r={},r[i]="asc",r)],h=Object.keys(n.selector).filter(function(F){return!F.startsWith("$")});return function(H,J){if(H[i]===J[i])throw Fe("SNH",{args:{a:H,b:J},primaryPath:i});var ae=[H,J].map(function(we){return{doc:Ic(i,we)}}),ce=_u(ae,{selector:{},sort:f},h);if(2!==ce.length)throw Fe("SNH",{query:n,primaryPath:i,args:{rows:ae,sortedRows:ce}});return ce[0].doc._id===ae[0].doc._id?-1:1}},getQueryMatcher:function(t,n){var r=ur(t.primaryKey),i=gc(n.selector);return function(D){var J=_u([{doc:Ic(r,D)}],{selector:i},Object.keys(n.selector));return J&&1===J.length}},prepareQuery:function(t,n){var r=ur(t.primaryKey),i=n;if(i.sort&&i.sort.forEach(function(h){var D=Object.keys(h)[0],F=["$gt","$gte","$lt","$lte"];if(!i.selector[D]||!Object.keys(i.selector[D]).some(function(ae){return F.includes(ae)})){var J=Xi(t,D);if(!J)throw Fe("QU5",{query:i,key:D,schema:t});switch(i.selector[D]||(i.selector[D]={}),J.type){case"number":case"integer":i.selector[D].$gt=-1e28;break;case"string":"string"!=typeof i.selector[D]&&(i.selector[D].$gt="");break;default:i.selector[D].$gt=null}}}),i.selector[r]&&i.selector[r].$regex)throw Fe("QU4",{path:r,query:n});if(i.sort){var f=i.sort.map(function(h){var D,F=Object.keys(h)[0],H=Object.values(h)[0];return(D={})[F===r?"_id":F]=H,D});i.sort=f}return Object.entries(i.selector).forEach(function(h){var D=h[0],F=h[1];"object"==typeof F&&null!==F&&!Array.isArray(F)&&0===Object.keys(F).length&&delete i.selector[D]}),i.selector=Tc(i.selector,r),i}},uv=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.name="pouchdb",this.statics=ov,this.adapter=n,this.pouchSettings=r,cv(n)}var t=e.prototype;return t.createPouch=function(r,i){try{var h={location:r,adapter:Qi(this.adapter),settings:i},D=Object.assign({},h.adapter,this.pouchSettings,h.settings),F=new ua(h.location,D);return Promise.resolve(F)}catch(H){return Promise.reject(H)}},t.createStorageInstance=function(r){try{var f=Wf(r.databaseName,r.collectionName,r.schema.version);return Promise.resolve(this.createPouch(f,r.options)).then(function(h){return Promise.resolve(function(t,n){try{if(!n.indexes)return Promise.resolve();var r=ur(n.primaryKey);return Promise.resolve(t.getIndexes()).then(function(i){var f=new Set(i.indexes.map(function(h){return h.name}));return Promise.resolve(Promise.all(n.indexes.map(function(h){try{var D=gr(h)?h:[h],F="idx-rxdb-index-"+(D=D.map(function(H){return H===r?"_id":H})).join(",");return f.has(F)?Promise.resolve():Promise.resolve(t.createIndex({name:F,ddoc:F,index:{fields:D}}))}catch(H){return Promise.reject(H)}}))).then(function(){})})}catch(i){return Promise.reject(i)}}(h,r.schema)).then(function(){return new rv(r.databaseName,r.collectionName,r.schema,{pouch:h},r.options)})})}catch(h){return Promise.reject(h)}},t.createKeyObjectStorageInstance=function(r){try{var f=Ct(r.options);f.auto_compaction=!1,f.revs_limit=1;var h=Wf(r.databaseName,r.collectionName,0);return Promise.resolve(this.createPouch(h,r.options)).then(function(D){return new sv(r.databaseName,r.collectionName,{pouch:D},r.options)})}catch(D){return Promise.reject(D)}},e}();function cv(e){if("string"==typeof e){if(!ua.adapters||!ua.adapters[e])throw Fe("DB9",{adapter:e})}else if(function(e){if(!e||"function"!=typeof e.super_)throw Fe("UT4",{adapter:e})}(e),!ua.adapters||!ua.adapters.leveldb)throw Fe("DB10",{adapter:e})}function Wf(e,t,n){var r=e+"-rxdb-"+n+"-";if(t.includes("/")){var i=t.split("/"),f=i.pop();return i.join("/")+"/"+r+f}return r+t}function lv(e,t){if(!e)throw new Error("adapter missing");return new uv(e,t)}var fv=["__proto__","constructor","prototype"];function ca(e,t){Object.keys(t).forEach(function(n){fv.includes(n)||(void 0===e[n]?e[n]=t[n]:la(t[n])?ca(e[n],t[n]):e[n]=t[n])})}function la(e){return"[object Object]"===e.toString()}var Cu=function(){function e(n){if(this.options={},this._conditions={},this._fields={},n){var r=this;n.selector&&r.find(n.selector),n.limit&&r.limit(n.limit),n.skip&&r.skip(n.skip),n.sort&&n.sort.forEach(function(i){return r.sort(i)})}}var t=e.prototype;return t.where=function(r,i){if(!arguments.length)return this;var f=typeof arguments[0];if("string"===f)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"===f&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw Ft("MQ1",{path:arguments[0]})},t.equals=function(r){return this._ensurePath("equals"),this._conditions[this._path]=r,this},t.eq=function(r){return this._ensurePath("eq"),this._conditions[this._path]=r,this},t.or=function(r){var i=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},t.nor=function(r){var i=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},t.and=function(r){var i=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(r)||(r=[r]),i.push.apply(i,r),this},t.mod=function(r,i){var f,h;1===arguments.length?(this._ensurePath("mod"),f=arguments[0],h=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(f=arguments.slice(1),h=arguments[0]):(f=arguments[1],h=arguments[0]):(this._ensurePath("mod"),f=arguments.slice(),h=this._path);var D=this._conditions[h]||(this._conditions[h]={});return D.$mod=f,this},t.exists=function(r,i){var f,h;0===arguments.length?(this._ensurePath("exists"),f=this._path,h=!0):1===arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),f=this._path,h=arguments[0]):(f=arguments[0],h=!0):2===arguments.length&&(f=arguments[0],h=arguments[1]);var D=this._conditions[f]||(this._conditions[f]={});return D.$exists=h,this},t.elemMatch=function(r,i){if(null===arguments[0])throw Ft("MQ2");var f,h,D;if("function"==typeof arguments[0])this._ensurePath("elemMatch"),h=this._path,f=arguments[0];else if(la(arguments[0]))this._ensurePath("elemMatch"),h=this._path,D=arguments[0];else if("function"==typeof arguments[1])h=arguments[0],f=arguments[1];else{if(!arguments[1]||!la(arguments[1]))throw Ft("MQ2");h=arguments[0],D=arguments[1]}f&&(f(D=new e),D=D._conditions);var F=this._conditions[h]||(this._conditions[h]={});return F.$elemMatch=D,this},t.sort=function(r){var i=this;if(!r)return this;var f,h=typeof r;if(Array.isArray(r)){f=r.length;for(var D=0;D<r.length;++D)hv(this.options,r[D][0],r[D][1]);return this}if(1===arguments.length&&"string"===h){f=(r=r.split(/\s+/)).length;for(var F=0;F<f;++F){var H=r[F];if(H){var J="-"===H[0]?-1:1;-1===J&&(H=H.substring(1)),Vf(this.options,H,J)}}return this}if(la(r)){var ae=Object.keys(r);return ae.forEach(function(ce){return Vf(i.options,ce,r[ce])}),this}throw Ft("MQ3",{args:arguments})},t.merge=function(r){if(!r)return this;if(!Gf(r))throw Ft("MQ4",{source:r});return r instanceof e?(r._conditions&&ca(this._conditions,r._conditions),r._fields&&(this._fields||(this._fields={}),ca(this._fields,r._fields)),r.options&&(this.options||(this.options={}),ca(this.options,r.options)),r._distinct&&(this._distinct=r._distinct),this):(ca(this._conditions,r),this)},t.find=function(r){return Gf(r)&&this.merge(r),this},t._ensurePath=function(r){if(!this._path)throw Fe("MQ5",{method:r})},t.toJSON=function(){var r={selector:this._conditions};return this.options.skip&&(r.skip=this.options.skip),this.options.limit&&(r.limit=this.options.limit),this.options.sort&&(r.sort=function(e){return Object.entries(e).map(function(t){var n;return(n={})[t[0]]=1===t[1]?"asc":"desc",n})}(this.options.sort)),{query:r,path:this._path}},e}(),Kf=["limit","skip","maxScan","batchSize","comment"];Kf.forEach(function(e){Cu.prototype[e]=function(t){return this.options[e]=t,this}});var Hf=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];function Vf(e,t,n){if(Array.isArray(e.sort))throw Ft("MQ6",{opts:e,field:t,value:n});if(n&&n.$meta)(e.sort||(e.sort={}))[t]={$meta:n.$meta};else{var i=String(n||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(i))throw Array.isArray(n)&&(n="["+n+"]"),Ft("MQ7",{field:t,value:n});var f=e.sort||(e.sort={}),h=n.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");f[t]=parseInt(h,10)}}function hv(e,t,n){if(e.sort=e.sort||[],!Array.isArray(e.sort))throw Ft("MQ8",{opts:e,field:t,value:n});e.sort.push([t,n])}function Gf(e){return e instanceof Cu||la(e)}Hf.forEach(function(e){Cu.prototype[e]=function(){var t,n;1===arguments.length?(this._ensurePath(e),n=arguments[0],t=this._path):(n=arguments[1],t=arguments[0]);var r=null===this._conditions[t]||"object"==typeof this._conditions[t]?this._conditions[t]:this._conditions[t]={};return r["$"+e]=n,this}});var Mc="queryBuilderPath";function xc(e,t){e[t]=function(n){return function(e,t,n){var r=function(e){return new Cu(e)}(Sn(e.mangoQuery));e.other[Mc]&&(r._path=e.other[Mc]),r[t](n);var i=r.toJSON(),f=new is(e.op,i.query,e.collection);return i.path&&(f.other[Mc]=i.path),Nn(f)}(this,t,n)}}var vv={name:"query-builder",rxdb:!0,prototypes:{RxQuery:function(t){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach(function(n){xc(t,n)}),Kf.forEach(function(n){xc(t,n)}),Hf.forEach(function(n){xc(t,n)})}}},gv=l(9790),yv=l.n(gv);function _v(e){var t=this._data,n=yv()(t,e);return this._saveData(n,t)}function bv(e){return this.exec().then(function(t){return t?Array.isArray(t)?Promise.all(t.map(function(n){return n.update(e)})).then(function(){return t}):t.update(e).then(function(){return t}):null})}var Sv={RxDocument:function(t){t.update=_v},RxQuery:function(t){t.update=bv}},wv={name:"update",rxdb:!0,prototypes:Sv},Cv=l(8167),Av=l.n(Cv),kc=new Map;function Lc(e){var t=e.hash;if(!kc.has(t)){var n=Av()(e.jsonSchema);kc.set(t,n)}return kc.get(t)}var Dv=function(t){var n=Lc(this);if(n(t))return t;throw Fe("VD2",{errors:n.errors,obj:t,schema:this.jsonSchema})},Iv={RxSchema:function(t){t._getValidator=Lc,t.validate=Dv}},Tv={createRxSchema:function(t){"object"==typeof window&&window.requestIdleCallback&&window.requestIdleCallback(function(){Lc(t)})}},Rv={name:"validate",rxdb:!0,prototypes:Iv,hooks:Tv},Jt=l(3900),lr=l(2843),ei=l(9646),Au=l(9770),ti=l(2076),fa=l(4128),Mv=l(1042);let xv=(()=>{class e{constructor(){this.isInitialized=!1}initialize(n){this.isInitialized?console.warn("PermissionsService already initialized"):(this.collection=n,this.isInitialized=!0)}requestPermissions(n){return(0,Au.P)(()=>this.isInitialized&&this.collection?(0,ti.D)(this.collection.bulkInsert(n)).pipe((0,Ht.U)(({success:r})=>!!r)):(0,lr._)(()=>new Error("PermissionsService not initialized")))}hasPermission(n){return(0,Au.P)(()=>{if(!this.isInitialized||!this.collection)return(0,lr._)(()=>new Error("PermissionsService not initialized"));const r=this.collection.findOne({selector:{id:`${n.appId}:${n.kind}:${n.mode}:${n.target}`}});return(0,ti.D)(r.exec()).pipe((0,Ht.U)(i=>!!i))})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Xn=l(899);class kv{constructor(t,n,r){this.appId=t,this.collection=n,this.acl=r}insert(t){return this.requestPermission(Xn.R.Write).pipe((0,Jt.w)(()=>this.collection.insert(t)),(0,Ht.U)(n=>this.docToJSON(n)))}upsert(t){return this.requestPermission(Xn.R.Write).pipe((0,Jt.w)(()=>this.collection.upsert(t)),(0,Ht.U)(n=>this.docToJSON(n)))}findOne(t){return this.requestPermission(Xn.R.Read).pipe((0,Jt.w)(()=>this.collection.findOne(t).exec()),(0,Ht.U)(n=>n?this.docToJSON(n):null))}find(t){return this.requestPermission(Xn.R.Read).pipe((0,Jt.w)(()=>this.collection.find(t).exec()),(0,Ht.U)(n=>n.map(r=>this.docToJSON(r))))}observe(t){return this.requestPermission(Xn.R.Read).pipe((0,Jt.w)(()=>this.collection.find(t).$),(0,Ht.U)(n=>n.map(r=>this.docToJSON(r))))}observeOne(t){return this.observe(t).pipe((0,Ht.U)(n=>n.length>0?n[0]:null))}update(t,n){return this.requestPermission(Xn.R.Write).pipe((0,Jt.w)(()=>this.collection.find(t).update(n)),(0,Ht.U)(r=>r.map(i=>this.docToJSON(i))))}remove(t){return this.requestPermission(Xn.R.Write).pipe((0,Jt.w)(()=>this.collection.find(t).remove()),(0,Ht.U)(n=>n.map(r=>this.docToJSON(r))))}putAttachment(t,n,r=!1){return this.requestPermission(Xn.R.Write).pipe((0,Jt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Jt.w)(i=>i?i.putAttachment(n,r):(0,lr._)(()=>new Error("No document found for id "+t))),(0,Ht.U)(i=>i.id))}getAttachment(t,n){return this.requestPermission(Xn.R.Read).pipe((0,Jt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Jt.w)(r=>r?(0,ei.of)(r.getAttachment(n)):(0,lr._)(()=>new Error("No document found for id "+t))),(0,Jt.w)(r=>r?(0,ti.D)(r.getData()).pipe((0,Ht.U)(i=>({id:r.id,data:i,type:r.type}))):(0,lr._)(()=>new Error("No attachment found for id "+n))))}getAllAttachments(t){return this.requestPermission(Xn.R.Read).pipe((0,Jt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Jt.w)(n=>n?(0,ei.of)(n.allAttachments()):(0,lr._)(()=>new Error("No document found for id "+t))),(0,Jt.w)(n=>n.length<=0?(0,ei.of)([]):(0,fa.D)(n.map(r=>(0,ti.D)(r.getData()).pipe((0,Ht.U)(i=>({id:r.id,data:i,type:r.type})))))))}removeAttachment(t,n){return this.requestPermission(Xn.R.Write).pipe((0,Jt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Jt.w)(r=>{if(!r)return(0,lr._)(()=>new Error("No document found for id "+t));const i=r.getAttachment(n);return i?i.remove():(0,lr._)(()=>new Error("No attachment found for id "+n))}))}observeAttachments(t){return this.requestPermission(Xn.R.Read).pipe((0,Jt.w)(()=>this.collection.findOne({selector:{id:t}}).exec()),(0,Jt.w)(n=>n?n.allAttachments$:(0,lr._)(()=>new Error("No document found for id "+t))),(0,Jt.w)(n=>(0,fa.D)(n.map(r=>(0,ti.D)(r.getData()).pipe((0,Ht.U)(i=>({id:r.id,data:i,type:r.type})))))))}requestPermission(t){return this.acl.hasPermission({appId:this.appId,kind:Xn.k.Collection,mode:t,target:this.collection.name}).pipe((0,Jt.w)(n=>n?(0,ei.of)(n):(0,lr._)(()=>new Error(`No permission to perform action ${t} on ${this.collection.name} with appId ${this.appId}`))))}docToJSON(t){const n=JSON.parse(JSON.stringify(t));return n._attachments=t._attachments,n}}$f(v),Ys(xh),Ys(Rv),Ys(Kh),Ys(vv),Ys(wv),Ys(ja);const Qf=new a.InjectionToken("ENTITY_MANAGER_BASE_COLLECTIONS_TOKEN"),Zf=new a.InjectionToken("ENTITY_MANAGER_INITIAL_DATA_TOKEN");let Lv=(()=>{class e{constructor(n,r,i){this.acl=n,this.baseCollections=r,this.initialData=i,this.initialize$=new Fu(0)}setupDatabase(n,r){return this.createDatabase(n,r).pipe((0,Jt.w)(i=>this.addBaseCollections(i)),(0,Vs.b)(i=>this.acl.initialize(i.applicationpermissions)),(0,Jt.w)(i=>this.addInitialData(i)),(0,Vs.b)(()=>this.initialize$.next()),(0,Ht.U)(()=>{}))}isDatabaseCreated(){return void 0!==this._dbInstance}getRepository(n,r){if(!this._dbInstance)return(0,lr._)(()=>new Error("Database not initialized"));const i=this._dbInstance.collections[n];if(!i)return(0,lr._)(()=>new Error("Collection not initialized"));const f=new kv(r,i,this.acl);return(0,ei.of)(f)}createDatabase(n,r){return(0,Au.P)(()=>(0,ti.D)(mh({name:n,password:r,storage:lv("idb")})).pipe((0,Vs.b)(i=>this._dbInstance=i)))}addBaseCollections(n){const r=this.baseCollections.reduce((i,f)=>Object.assign(i,{[f.name]:f.creator}),{});return(0,Au.P)(()=>(0,ti.D)(n.addCollections(r)).pipe((0,Vs.b)(i=>{Object.values(i).forEach(f=>{f.preInsert(h=>{const D=(new Date).toISOString();h.id=h.id||(0,Mv.Z)(),h.createdAt=h.createdAt||D,h.updatedAt=h.updatedAt||D},!1),f.preSave((h,D)=>{const F=(new Date).toISOString();h.createdAt=D.createdAt||F,h.updatedAt=F},!1)})})))}addInitialData(n){return(0,fa.D)(this.initialData.map(r=>{const i=n[r.name],f=!("upsert"in r)||r.upsert;return(0,fa.D)(r.data.map(h=>(f?(0,ei.of)(!0):(0,ti.D)(i.findOne({selector:{id:h.id}}).exec()).pipe((0,Ht.U)(F=>!F))).pipe((0,Jt.w)(F=>F?(0,ti.D)(i.upsert(h)).pipe((0,Jt.w)(()=>{if("userapplications"!==r.name)return(0,ei.of)(void 0);const H=(h.additionalProperties?.permissions||[]).map(J=>({...J,appId:h.id,id:`${h.id}:${J.kind}:${J.mode}:${J.target}`}));return H.length?(0,fa.D)(H.map(J=>n.applicationpermissions.upsert(J))):(0,ei.of)(void 0)})):(0,ei.of)(void 0)))))}))}}return e.\u0275fac=function(n){return new(n||e)(a.\u0275\u0275inject(xv),a.\u0275\u0275inject(Qf),a.\u0275\u0275inject(Zf))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},43:(se,U,l)=>{l.d(U,{T:()=>I});var v=l(1457),C=l(6435),M=l(1135),N=l(3900),L=l(4128),j=l(8505),B=l(2843),S=l(9841),w=l(7777);let I=(()=>{class P{constructor(T,b){this.document=T,this.entityManager=b,this.customizationSettings$=new M.X(void 0),this.entityManager.initialize$.pipe((0,N.w)(()=>(0,L.D)([this.entityManager.getRepository("userpreferences","com.central-factory.settings")])),(0,j.b)(([y])=>{this.userPreferencesRepository=y,this.subscribeToDataChanges()})).subscribe()}setCustomizationSettings(T,b){return this.userPreferencesRepository?this.userPreferencesRepository.upsert({id:"settings.customization"+(b?`.${b}`:""),key:"settings.customization",value:T,avatar:b}):(0,B._)(()=>new Error("Repositories not initialized"))}subscribeToDataChanges(){if(!this.userPreferencesRepository)throw new Error("Repositories not initialized");this.customizationSettings$.pipe((0,j.b)(T=>{!T||T.theme&&this.loadThemeFromUrl(T.theme.path)})).subscribe(),(0,S.a)([this.userPreferencesRepository.observeOne({selector:{key:"userAvatars.selectedAvatar"}}),this.userPreferencesRepository.observe({selector:{key:"settings.customization"}})]).pipe((0,j.b)(([T,b])=>{if(b.length<=0)return;const y=b.find(c=>c.avatar===T?.value)||b[0];this.customizationSettings$.next(y.value)})).subscribe()}loadThemeFromUrl(T){if(this.activeThemeLinkElem&&this.activeThemeLinkElem?.href.endsWith(T))return;const y=this.document.getElementsByTagName("head")[0],c=this.document.createElement("link");c.rel="stylesheet",c.href=T,y.appendChild(c),this.activeThemeLinkElem&&y.removeChild(this.activeThemeLinkElem),this.activeThemeLinkElem=c}}return P.\u0275fac=function(T){return new(T||P)(w.\u0275\u0275inject(v.DOCUMENT),w.\u0275\u0275inject(C.v2))},P.\u0275prov=w.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},1549:(se,U,l)=>{l.d(U,{w:()=>I});var v=l(1457),C=l(6435),M=l(1135),N=l(3900),L=l(4128),j=l(8505),B=l(2843),S=l(4004),w=l(7777);let I=(()=>{class P{constructor(T,b){this.document=T,this.entityManager=b,this.userPreferences$=new M.X([]),this.entityManager.initialize$.pipe((0,N.w)(()=>(0,L.D)([this.entityManager.getRepository("userpreferences","com.central-factory.settings")])),(0,j.b)(([y])=>{this.userPreferencesRepository=y,this.subscribeToDataChanges()})).subscribe()}setValue(T,b){return this.userPreferencesRepository?this.userPreferencesRepository.upsert({id:T,key:T,value:b}):(0,B._)(()=>new Error("Repositories not initialized"))}subscribeToDataChanges(){if(!this.userPreferencesRepository)throw new Error("Repositories not initialized")}byKey(T){if(!this.userPreferencesRepository)throw new Error("Repositories not initialized");return this.userPreferencesRepository.observeOne({selector:{key:T}}).pipe((0,S.U)(b=>b||void 0))}}return P.\u0275fac=function(T){return new(T||P)(w.\u0275\u0275inject(v.DOCUMENT),w.\u0275\u0275inject(C.v2))},P.\u0275prov=w.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()},4438:(se,U,l)=>{l.d(U,{O:()=>C});var v=l(7777);let C=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275mod=v.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=v.\u0275\u0275defineInjector({}),M})()},1894:(se,U,l)=>{l.d(U,{t:()=>C});var v=l(7777);let C=(()=>{class M{constructor(){this.separators={el:"__",mod:"--",val:"-"},this.ignoreValues=!1,this.modCase="kebab"}setMods(L,j,B,S,w,E){Object.keys(B).forEach(I=>{if(S[I]){if(B[I]===S[I])return;E.removeClass(w.nativeElement,this.generateClass(L,j,I,S[I]))}B[I]&&E.addClass(w.nativeElement,this.generateClass(L,j,I,B[I]))}),Object.keys(S).forEach(I=>{!(I in B)&&S[I]&&E.removeClass(w.nativeElement,this.generateClass(L,j,I,S[I]))})}generateClass(L,j,B,S){this.ignoreValues&&(S=!!S),"string"!=typeof S&&"boolean"!=typeof S&&(S=!!S);let w=L;return j&&(w+=this.separators.el+j),B&&(B=this.modNameHandler(B),w+=this.separators.mod+B,"boolean"!=typeof S&&null!=S&&(w+=this.separators.val+S)),w}parseMods(L){if("string"==typeof L&&(L=L.split(/\s+/)),Array.isArray(L)){const j=L;L={},j.forEach(B=>{L[B]=!0})}else if("object"!=typeof L)return{};return L}modNameHandler(L){switch(this.modCase){case"kebab":return L?L.replace(/[A-Z]/g,function(j){return"-"+j.toLowerCase()}).replace(/$\-/,""):"";case"snake":return L?L.replace(/[A-Z]/g,function(j){return"_"+j.toLowerCase()}).replace(/$\-/,""):"";default:return L}}}return M.\u0275fac=function(L){return new(L||M)},M.\u0275prov=v.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},1623:(se,U,l)=>{l.d(U,{G:()=>M});var v=l(7777),C=l(1894);let M=(()=>{class N{constructor(j,B,S,w){this.bemService=w,this.name=S,this.element=j,this.renderer=B,B.addClass(j.nativeElement,this.bemService.generateClass(S))}ngOnChanges(){if(JSON.stringify(this.cfMod)!==this._modSerialized){this._modSerialized=JSON.stringify(this.cfMod);let j=this.cfMod;const{renderer:B,element:S,name:w}=this;j=this.bemService.parseMods(j),this.bemService.setMods(w,"",j,this._mods||{},S,B),this._mods=this._mods===j?Object.assign({},j):j}}}return N.\u0275fac=function(j){return new(j||N)(v.\u0275\u0275directiveInject(v.ElementRef),v.\u0275\u0275directiveInject(v.Renderer2),v.\u0275\u0275injectAttribute("cfBlock"),v.\u0275\u0275directiveInject(C.t))},N.\u0275dir=v.\u0275\u0275defineDirective({type:N,selectors:[["","cfBlock",""]],inputs:{cfMod:"cfMod"},features:[v.\u0275\u0275NgOnChangesFeature]}),N})()},3454:(se,U,l)=>{l.d(U,{e:()=>N});var v=l(7777),C=l(1894),M=l(1623);let N=(()=>{class L{constructor(B,S,w,E,I){this.bemService=I,this.blockName=E.name,this.name=w,this.element=B,this.renderer=S,S.addClass(B.nativeElement,this.bemService.generateClass(E.name,w))}ngOnChanges(){if(JSON.stringify(this.cfMod)!==this._modSerialized){this._modSerialized=JSON.stringify(this.cfMod);let B=this.cfMod;const{renderer:S,element:w,blockName:E,name:I}=this;B=this.bemService.parseMods(B),this.bemService.setMods(E,I,B,this._mods||{},w,S),this._mods=this._mods===B?Object.assign({},B):B}}}return L.\u0275fac=function(B){return new(B||L)(v.\u0275\u0275directiveInject(v.ElementRef),v.\u0275\u0275directiveInject(v.Renderer2),v.\u0275\u0275injectAttribute("cfElem"),v.\u0275\u0275directiveInject(M.G),v.\u0275\u0275directiveInject(C.t))},L.\u0275dir=v.\u0275\u0275defineDirective({type:L,selectors:[["","cfElem",""]],inputs:{cfMod:"cfMod"},features:[v.\u0275\u0275NgOnChangesFeature]}),L})()},7967:(se,U,l)=>{l.d(U,{I:()=>C});var v=l(7777);let C=(()=>{class M{}return M.\u0275fac=function(L){return new(L||M)},M.\u0275dir=v.\u0275\u0275defineDirective({type:M,selectors:[["","cfMod",""]]}),M})()},5183:(se,U,l)=>{l.d(U,{L:()=>B});var v=l(1457),C=l(7777);function N(S,w){if(1&S){const E=C.\u0275\u0275getCurrentView();C.\u0275\u0275elementStart(0,"div",2),C.\u0275\u0275listener("click",function(){return C.\u0275\u0275restoreView(E),C.\u0275\u0275nextContext()._onBackdropClicked()}),C.\u0275\u0275elementEnd()}if(2&S){const E=C.\u0275\u0275nextContext();C.\u0275\u0275property("ngClass",E.backdropClass)}}const L=[[["cf-sidebar"],["","cf-sidebar",""]],[["","cf-sidebar-content",""]]],j=["cf-sidebar,[cf-sidebar]","[cf-sidebar-content]"];let B=(()=>{class S{constructor(E,I){this._ref=E,this.animate=!0,this.allowSidebarBackdropControl=!0,this.showBackdrop=!1,this.showBackdropChange=new C.EventEmitter,this.backdropClick=new C.EventEmitter,this._sidebars=[],this._isBrowser=(0,v.isPlatformBrowser)(I)}ngAfterContentInit(){!this._isBrowser||this._onToggle()}ngOnChanges(E){!this._isBrowser||E.showBackdrop&&this.showBackdropChange.emit(E.showBackdrop.currentValue)}ngOnDestroy(){!this._isBrowser||this._unsubscribe()}_addSidebar(E){this._sidebars.push(E),this._subscribe(E)}_removeSidebar(E){const I=this._sidebars.indexOf(E);-1!==I&&this._sidebars.splice(I,1)}_getContentStyle(){let E=0,I=0,P=0,R=0,T="",b="",y="";for(const c of this._sidebars)if(c._isModeSlide&&c.opened&&(T=`translate${c._isLeftOrRight?"X":"Y"}(${c._isLeftOrTop?"":"-"}${c._isLeftOrRight?c._width:c._height}px)`),c._isModePush&&c.opened||c.dock){let o=0;switch(c._isModeSlide&&c.opened?c._isLeftOrRight?y="100%":b="100%":o=c._isDocked||c._isModeOver&&c.dock?c._dockedSize:c._isLeftOrRight?c._width:c._height,c.position){case"left":E=Math.max(E,o);break;case"right":I=Math.max(I,o);break;case"top":P=Math.max(P,o);break;case"bottom":R=Math.max(R,o)}}return{padding:`${P}px ${I}px ${R}px ${E}px`,webkitTransform:T,transform:T,height:b,width:y}}_onBackdropClicked(){let E=!1;for(const I of this._sidebars)I.opened&&I.showBackdrop&&I.closeOnClickBackdrop&&(I.close(),E=!0);E&&this.backdropClick.emit()}_subscribe(E){E.openStart.subscribe(()=>this._onToggle()),E.sidebarOpen.subscribe(()=>this._markForCheck()),E.closeStart.subscribe(()=>this._onToggle()),E.sidebarClose.subscribe(()=>this._markForCheck()),E.modeChange.subscribe(()=>this._markForCheck()),E.positionChange.subscribe(()=>this._markForCheck()),E._onRerender.subscribe(()=>this._markForCheck())}_unsubscribe(){for(const E of this._sidebars)E.openStart.unsubscribe(),E.sidebarOpen.unsubscribe(),E.closeStart.unsubscribe(),E.sidebarClose.unsubscribe(),E.modeChange.unsubscribe(),E.positionChange.unsubscribe(),E._onRerender.unsubscribe()}_onToggle(){if(this._sidebars.length>0&&this.allowSidebarBackdropControl){const E=this._sidebars.some(I=>I.opened&&I.showBackdrop);this.showBackdrop=E,this.showBackdropChange.emit(E)}setTimeout(()=>{this._markForCheck()})}_markForCheck(){this._ref.markForCheck()}}return S.\u0275fac=function(E){return new(E||S)(C.\u0275\u0275directiveInject(C.ChangeDetectorRef),C.\u0275\u0275directiveInject(C.PLATFORM_ID))},S.\u0275cmp=C.\u0275\u0275defineComponent({type:S,selectors:[["cf-sidebar-container"]],inputs:{animate:"animate",allowSidebarBackdropControl:"allowSidebarBackdropControl",showBackdrop:"showBackdrop",contentClass:"contentClass",backdropClass:"backdropClass"},outputs:{showBackdropChange:"showBackdropChange",backdropClick:"backdropClick"},features:[C.\u0275\u0275NgOnChangesFeature],ngContentSelectors:j,decls:4,vars:5,consts:[["aria-hidden","true","class","cf-sidebar__backdrop",3,"ngClass","click",4,"ngIf"],[1,"cf-sidebar__content",3,"ngClass","ngStyle"],["aria-hidden","true",1,"cf-sidebar__backdrop",3,"ngClass","click"]],template:function(E,I){1&E&&(C.\u0275\u0275projectionDef(L),C.\u0275\u0275template(0,N,1,1,"div",0),C.\u0275\u0275projection(1),C.\u0275\u0275elementStart(2,"div",1),C.\u0275\u0275projection(3,1),C.\u0275\u0275elementEnd()),2&E&&(C.\u0275\u0275property("ngIf",I.showBackdrop),C.\u0275\u0275advance(2),C.\u0275\u0275classProp("cf-sidebar__content--animate",I.animate),C.\u0275\u0275property("ngClass",I.contentClass)("ngStyle",I._getContentStyle()))},directives:[v.NgIf,v.NgClass,v.NgStyle],encapsulation:2,changeDetection:0}),S})()},6111:(se,U,l)=>{l.d(U,{k:()=>B});var v=l(1457),a=l(7777),N=l(5183);const L=["sidebar"],j=["*"];let B=(()=>{class S{constructor(E,I,P){if(this._container=E,this._ref=I,this.opened=!1,this.openedChange=new a.EventEmitter,this.mode="over",this.dock=!1,this.dockedSize="0px",this.position="start",this.animate=!0,this.autoCollapseOnInit=!0,this.trapFocus=!1,this.autoFocus=!0,this.showBackdrop=!1,this.closeOnClickBackdrop=!1,this.closeOnClickOutside=!1,this.keyClose=!1,this.keyCode=27,this.contentInit=new a.EventEmitter,this.openStart=new a.EventEmitter,this.sidebarOpen=new a.EventEmitter,this.closeStart=new a.EventEmitter,this.sidebarClose=new a.EventEmitter,this.transitionEnd=new a.EventEmitter,this.modeChange=new a.EventEmitter,this.positionChange=new a.EventEmitter,this._onRerender=new a.EventEmitter,this._focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]),textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], [contenteditable]",this._tabIndexAttr="__tabindex__",this._tabIndexIndicatorAttr="__ngsidebar-tabindex__",this._clickEvent="click",this._onClickOutsideAttached=!1,this._onKeyDownAttached=!1,this._onResizeAttached=!1,!this._container)throw new Error("<cf-sidebar> must be inside a <cf-sidebar-container>. See https://github.com/arkon/ng-sidebar#usage for more info.");this._isBrowser=(0,v.isPlatformBrowser)(P),this._isBrowser&&"undefined"!=typeof window&&"undefined"!=typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!("onclick"in window)&&(this._clickEvent="touchstart"),this._normalizePosition(),this.open=this.open.bind(this),this._onTransitionEnd=this._onTransitionEnd.bind(this),this._onFocusTrap=this._onFocusTrap.bind(this),this._onClickOutside=this._onClickOutside.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._collapse=this._collapse.bind(this)}ngOnInit(){!this._isBrowser||(this.animate&&(this._shouldAnimate=!0,this.animate=!1),this._container._addSidebar(this),this.autoCollapseOnInit&&this._collapse())}ngAfterContentInit(){this.contentInit.emit()}ngOnChanges(E){!this._isBrowser||(E.animate&&this._shouldAnimate&&(this._shouldAnimate=E.animate.currentValue),E.closeOnClickOutside&&(E.closeOnClickOutside.currentValue?this._initCloseClickListener():this._destroyCloseClickListener()),E.keyClose&&(E.keyClose.currentValue?this._initCloseKeyDownListener():this._destroyCloseKeyDownListener()),E.position&&(this._normalizePosition(),setTimeout(()=>{this.positionChange.emit(E.position.currentValue)})),E.mode&&setTimeout(()=>{this.modeChange.emit(E.mode.currentValue)}),E.dock&&this.triggerRerender(),E.opened&&(this._shouldAnimate&&(this.animate=!0,this._shouldAnimate=!1),E.opened.currentValue?this.open():this.close()),(E.autoCollapseHeight||E.autoCollapseWidth)&&this._initCollapseListeners())}ngOnDestroy(){!this._isBrowser||(this._destroyCloseListeners(),this._destroyCollapseListeners(),this._container._removeSidebar(this))}open(){!this._isBrowser||(this.opened=!0,this.openedChange.emit(!0),this.openStart.emit(),this._ref.detectChanges(),setTimeout(()=>{this.animate&&!this._isModeSlide?this._elSidebar.nativeElement.addEventListener("transitionend",this._onTransitionEnd):(this._setFocused(),this._initCloseListeners(),this.opened&&this.sidebarOpen.emit())}))}close(){!this._isBrowser||(this.opened=!1,this.openedChange.emit(!1),this.closeStart.emit(),this._ref.detectChanges(),setTimeout(()=>{this.animate&&!this._isModeSlide?this._elSidebar.nativeElement.addEventListener("transitionend",this._onTransitionEnd):(this._setFocused(),this._destroyCloseListeners(),this.opened||this.sidebarClose.emit())}))}triggerRerender(){!this._isBrowser||setTimeout(()=>{this._onRerender.emit()})}_getStyle(){let E="";if(!this.opened){const I="translate"+(this._isLeftOrRight?"X":"Y");E=`${I}(${(this._isLeftOrTop?"-":"")+"100%"})`,this.dock&&this._dockedSize>0&&(!this._isModeSlide||!this.opened)&&(E+=` ${I}(${this._isLeftOrTop?"+":"-"}${this.dockedSize})`)}return{webkitTransform:E,transform:E}}_onTransitionEnd(E){E.target===this._elSidebar.nativeElement&&E.propertyName.endsWith("transform")&&(this._setFocused(),this.opened?(this._initCloseListeners(),this.sidebarOpen.emit()):(this._destroyCloseListeners(),this.sidebarClose.emit()),this.transitionEnd.emit(),this._elSidebar.nativeElement.removeEventListener("transitionend",this._onTransitionEnd))}get _shouldTrapFocus(){return this.opened&&this.trapFocus}_focusFirstItem(){this._focusableElements&&this._focusableElements.length>0&&this._focusableElements[0].focus()}_onFocusTrap(E){this._shouldTrapFocus&&!this._elSidebar.nativeElement.contains(E.target)&&this._focusFirstItem()}_setFocused(){if(this._focusableElements=Array.from(this._elSidebar.nativeElement.querySelectorAll(this._focusableElementsString)),this.opened){this._focusedBeforeOpen=document.activeElement;for(const E of this._focusableElements){const I=E.getAttribute(this._tabIndexAttr),P=null!==E.getAttribute(this._tabIndexIndicatorAttr);null!==I?(E.setAttribute("tabindex",I),E.removeAttribute(this._tabIndexAttr)):P&&(E.removeAttribute("tabindex"),E.removeAttribute(this._tabIndexIndicatorAttr))}this.autoFocus&&this._focusFirstItem(),document.addEventListener("focus",this._onFocusTrap,!0)}else{for(const E of this._focusableElements){const I=E.getAttribute("tabindex");E.setAttribute("tabindex","-1"),E.setAttribute(this._tabIndexIndicatorAttr,""),null!==I&&E.setAttribute(this._tabIndexAttr,I)}document.removeEventListener("focus",this._onFocusTrap,!0),this._focusedBeforeOpen&&this.autoFocus&&this._isModeOver&&(this._focusedBeforeOpen.focus(),this._focusedBeforeOpen=null)}}_initCloseListeners(){this._initCloseClickListener(),this._initCloseKeyDownListener()}_initCloseClickListener(){setTimeout(()=>{this.opened&&this.closeOnClickOutside&&!this._onClickOutsideAttached&&(document.addEventListener(this._clickEvent,this._onClickOutside),this._onClickOutsideAttached=!0)})}_initCloseKeyDownListener(){setTimeout(()=>{this.opened&&this.keyClose&&!this._onKeyDownAttached&&(document.addEventListener("keydown",this._onKeyDown),this._onKeyDownAttached=!0)})}_destroyCloseListeners(){this._destroyCloseClickListener(),this._destroyCloseKeyDownListener()}_destroyCloseClickListener(){this._onClickOutsideAttached&&(document.removeEventListener(this._clickEvent,this._onClickOutside),this._onClickOutsideAttached=!1)}_destroyCloseKeyDownListener(){this._onKeyDownAttached&&(document.removeEventListener("keydown",this._onKeyDown),this._onKeyDownAttached=!1)}_onClickOutside(E){this._onClickOutsideAttached&&this._elSidebar&&!this._elSidebar.nativeElement.contains(E.target)&&this.close()}_onKeyDown(E){(E=E||window.event).keyCode===this.keyCode&&this.close()}_initCollapseListeners(){(this.autoCollapseHeight||this.autoCollapseWidth)&&setTimeout(()=>{this._onResizeAttached||(window.addEventListener("resize",this._collapse),this._onResizeAttached=!0)})}_destroyCollapseListeners(){this._onResizeAttached&&(window.removeEventListener("resize",this._collapse),this._onResizeAttached=!1)}_collapse(){const E=window.innerHeight,I=window.innerWidth;this.autoCollapseHeight&&(E<=this.autoCollapseHeight&&this.opened?(this._wasCollapsed=!0,this.close()):E>this.autoCollapseHeight&&this._wasCollapsed&&(this.open(),this._wasCollapsed=!1)),this.autoCollapseWidth&&(I<=this.autoCollapseWidth&&this.opened?(this._wasCollapsed=!0,this.close()):I>this.autoCollapseWidth&&this._wasCollapsed&&(this.open(),this._wasCollapsed=!1))}get _height(){return this._elSidebar.nativeElement?this._isDocked?this._dockedSize:this._elSidebar.nativeElement.offsetHeight:0}get _width(){return this._elSidebar.nativeElement?this._isDocked?this._dockedSize:this._elSidebar.nativeElement.offsetWidth:0}get _dockedSize(){return parseFloat(this.dockedSize)}get _isModeOver(){return"over"===this.mode}get _isModePush(){return"push"===this.mode}get _isModeSlide(){return"slide"===this.mode}get _isDocked(){return!(!this.dock||!this.dockedSize||this.opened)}get _isLeftOrTop(){return"left"===this.position||"top"===this.position}get _isLeftOrRight(){return"left"===this.position||"right"===this.position}get _isInert(){return!this.opened&&!this.dock}_normalizePosition(){const E=(()=>{let S="ltr";return"undefined"!=typeof window&&(S=window.getComputedStyle?window.getComputedStyle(document.body,null).getPropertyValue("direction"):document.body.currentStyle.direction),"ltr"===S})();"start"===this.position?this.position=E?"left":"right":"end"===this.position&&(this.position=E?"right":"left")}}return S.\u0275fac=function(E){return new(E||S)(a.\u0275\u0275directiveInject(N.L,8),a.\u0275\u0275directiveInject(a.ChangeDetectorRef),a.\u0275\u0275directiveInject(a.PLATFORM_ID))},S.\u0275cmp=a.\u0275\u0275defineComponent({type:S,selectors:[["cf-sidebar"]],viewQuery:function(E,I){if(1&E&&a.\u0275\u0275viewQuery(L,5),2&E){let P;a.\u0275\u0275queryRefresh(P=a.\u0275\u0275loadQuery())&&(I._elSidebar=P.first)}},inputs:{opened:"opened",mode:"mode",dock:"dock",dockedSize:"dockedSize",position:"position",animate:"animate",autoCollapseHeight:"autoCollapseHeight",autoCollapseWidth:"autoCollapseWidth",autoCollapseOnInit:"autoCollapseOnInit",sidebarClass:"sidebarClass",ariaLabel:"ariaLabel",trapFocus:"trapFocus",autoFocus:"autoFocus",showBackdrop:"showBackdrop",closeOnClickBackdrop:"closeOnClickBackdrop",closeOnClickOutside:"closeOnClickOutside",keyClose:"keyClose",keyCode:"keyCode"},outputs:{openedChange:"openedChange",contentInit:"contentInit",openStart:"openStart",sidebarOpen:"sidebarOpen",closeStart:"closeStart",sidebarClose:"sidebarClose",transitionEnd:"transitionEnd",modeChange:"modeChange",positionChange:"positionChange",_onRerender:"_onRerender"},features:[a.\u0275\u0275NgOnChangesFeature],ngContentSelectors:j,decls:3,vars:15,consts:[["role","complementary",3,"ngClass","ngStyle"],["sidebar",""]],template:function(E,I){1&E&&(a.\u0275\u0275projectionDef(),a.\u0275\u0275elementStart(0,"aside",0,1),a.\u0275\u0275projection(2),a.\u0275\u0275elementEnd()),2&E&&(a.\u0275\u0275classMapInterpolate3("cf-sidebar cf-sidebar--",I.opened?"opened":"closed"," cf-sidebar--",I.position," cf-sidebar--",I.mode,""),a.\u0275\u0275classProp("cf-sidebar--docked",I._isDocked)("cf-sidebar--inert",I._isInert)("cf-sidebar--animate",I.animate),a.\u0275\u0275property("ngClass",I.sidebarClass)("ngStyle",I._getStyle()),a.\u0275\u0275attribute("aria-hidden",!I.opened)("aria-label",I.ariaLabel))},directives:[v.NgClass,v.NgStyle],encapsulation:2,changeDetection:0}),S})()},5687:(se,U,l)=>{l.d(U,{l:()=>N});var v=l(1457),C=l(7777);let N=(()=>{class L{}return L.\u0275fac=function(B){return new(B||L)},L.\u0275mod=C.\u0275\u0275defineNgModule({type:L}),L.\u0275inj=C.\u0275\u0275defineInjector({imports:[[v.CommonModule]]}),L})()},5605:(se,U,l)=>{l.d(U,{wn:()=>T});var v=l(5861),a=l(7340),C=l(7777),M=l(1623),N=l(7967),L=l(1457),j=l(3454),B=l(9750);let S=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=C.\u0275\u0275defineComponent({type:b,selectors:[["cf-spinner"]],decls:2,vars:0,consts:[["cfBlock","spinner","cfMod","3x"]],template:function(c,o){1&c&&(C.\u0275\u0275elementStart(0,"div",0),C.\u0275\u0275element(1,"div"),C.\u0275\u0275elementEnd())},directives:[M.G,N.I],styles:["[_nghost-%COMP%]{display:contents}"]}),b})();function w(b,y){1&b&&(C.\u0275\u0275elementStart(0,"div",8),C.\u0275\u0275element(1,"cf-spinner"),C.\u0275\u0275elementEnd())}function E(b,y){if(1&b&&(C.\u0275\u0275elementStart(0,"p",9),C.\u0275\u0275text(1),C.\u0275\u0275elementEnd()),2&b){const c=C.\u0275\u0275nextContext();C.\u0275\u0275advance(1),C.\u0275\u0275textInterpolate1(" ",c.loadingText," ")}}const I=function(b){return{"background-color":b}};var P=(()=>{return(b=P||(P={})).Visible="visible",b.Hidden="hidden",P;var b})(),R=(()=>{return(b=R||(R={})).Visible="visible",b.Hidden="hidden",R;var b})();let T=(()=>{class b{constructor(){this.title="Portal",this.logo="assets/logo.svg",this.loadingTexts=["Setting up the rockets...","Calling the crew..","Jumping to the cyber space..."],this.welcomeMessage="Welcome to the Metaverse",this.displayLoadingTime=5e3,this.displayWelcomeTime=3e3,this.mods="",this.splashScreenHide=new C.EventEmitter,this.state=P.Visible,this.logoState=R.Hidden,this.selectedLoadingTextIndex=void 0}ngOnInit(){this.displaySplashScreen()}displaySplashScreen(){var c=this;return(0,v.Z)(function*(){c.displayLoadingText(),yield c.wait(c.displayLoadingTime),c.logoState=R.Visible,c.selectedLoadingTextIndex=void 0,c.loadingText=c.welcomeMessage,yield c.wait(c.displayWelcomeTime),c.state=P.Hidden,c.splashScreenHide.emit()})()}displayLoadingText(){var c=this;return(0,v.Z)(function*(){if(c.logoState===R.Visible)return c.selectedLoadingTextIndex=void 0,void(c.loadingText=c.welcomeMessage);const m=(void 0===c.selectedLoadingTextIndex?-1:c.selectedLoadingTextIndex)+1;if(m>=c.loadingTexts.length)return c.selectedLoadingTextIndex=void 0,yield c.wait(1e3),void c.displayLoadingText();c.selectedLoadingTextIndex=m,c.loadingText=c.loadingTexts[m],yield c.wait(1e3),c.displayLoadingText()})()}wait(c){return new Promise(o=>setTimeout(o,c))}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=C.\u0275\u0275defineComponent({type:b,selectors:[["cf-splash-screen"]],inputs:{title:"title",logo:"logo",backgroundColor:"backgroundColor",loadingTexts:"loadingTexts",welcomeMessage:"welcomeMessage",displayLoadingTime:"displayLoadingTime",displayWelcomeTime:"displayWelcomeTime",mods:"mods"},outputs:{splashScreenHide:"splashScreenHide"},decls:9,vars:10,consts:[["cfBlock","splash-screen",3,"cfMod","ngStyle"],["cfElem","content"],["cfElem","title"],["cfElem","spinner"],["cfElem","logo"],["cfElem","logo-image",3,"src"],["cfElem","spinner-content",4,"ngIf"],["cfElem","loading-text",4,"ngIf"],["cfElem","spinner-content"],["cfElem","loading-text"]],template:function(c,o){1&c&&(C.\u0275\u0275elementStart(0,"div",0),C.\u0275\u0275elementStart(1,"div",1),C.\u0275\u0275elementStart(2,"h1",2),C.\u0275\u0275text(3),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(4,"div",3),C.\u0275\u0275elementStart(5,"div",4),C.\u0275\u0275element(6,"cf-svg-icon",5),C.\u0275\u0275elementEnd(),C.\u0275\u0275template(7,w,2,0,"div",6),C.\u0275\u0275elementEnd(),C.\u0275\u0275template(8,E,2,1,"p",7),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd()),2&c&&(C.\u0275\u0275property("@splashState",o.state)("cfMod",o.mods)("ngStyle",C.\u0275\u0275pureFunction1(8,I,o.backgroundColor)),C.\u0275\u0275advance(3),C.\u0275\u0275textInterpolate(o.title),C.\u0275\u0275advance(2),C.\u0275\u0275property("@logoState",o.logoState),C.\u0275\u0275advance(1),C.\u0275\u0275property("src",o.logo),C.\u0275\u0275advance(1),C.\u0275\u0275property("ngIf","visible"!==o.logoState),C.\u0275\u0275advance(1),C.\u0275\u0275property("ngIf",o.loadingText))},directives:[M.G,N.I,L.NgStyle,j.e,B.b,L.NgIf,S],encapsulation:2,data:{animation:[(0,a.X$)("splashState",[(0,a.SB)(P.Visible,(0,a.oB)({opacity:1,display:"block"})),(0,a.SB)(P.Hidden,(0,a.oB)({opacity:0,display:"none"})),(0,a.eR)(`${P.Hidden} => ${P.Visible}`,[(0,a.oB)({opacity:0}),(0,a.jt)("1s",(0,a.oB)({opacity:1}))]),(0,a.eR)(`${P.Visible} => ${P.Hidden}`,[(0,a.jt)("1s",(0,a.oB)({opacity:0}))])]),(0,a.X$)("logoState",[(0,a.SB)(R.Visible,(0,a.oB)({opacity:1,display:"flex"})),(0,a.SB)(R.Hidden,(0,a.oB)({opacity:0,display:"none"})),(0,a.eR)(`${R.Hidden} => ${R.Visible}`,[(0,a.oB)({display:"flex",opacity:0}),(0,a.jt)("1s",(0,a.oB)({opacity:1}))]),(0,a.eR)(`${R.Visible} => ${R.Hidden}`,[(0,a.jt)("1s",(0,a.oB)({opacity:0}))])])]}}),b})()},2085:(se,U,l)=>{l.d(U,{x:()=>L});var v=l(1457),a=l(4438),C=l(7777);let M=(()=>{class j{}return j.\u0275fac=function(S){return new(S||j)},j.\u0275mod=C.\u0275\u0275defineNgModule({type:j}),j.\u0275inj=C.\u0275\u0275defineInjector({imports:[[a.O]]}),j})();var N=l(2051);let L=(()=>{class j{}return j.\u0275fac=function(S){return new(S||j)},j.\u0275mod=C.\u0275\u0275defineNgModule({type:j}),j.\u0275inj=C.\u0275\u0275defineInjector({imports:[[v.CommonModule,a.O,M,N.Y]]}),j})()},5028:(se,U,l)=>{l.d(U,{M6:()=>R,Kb:()=>b});var v=l(1457),C=l(7777),N=l(9646),L=l(2843),j=l(4004),B=l(8505),S=l(262),w=l(8746),E=l(3099),I=l(7191);const P=new C.InjectionToken("SERVER_URL");let R=(()=>{class y{constructor(o,m,d,$){this.loader=o,this.platformId=m,this.serverUrl=d,this._document=$,this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map,this.document=this._document}addSvg(o,m){if(!this.iconsByUrl.has(o)){const d=this.document.createElement("DIV");d.innerHTML=m;const $=d.querySelector("svg");this.iconsByUrl.set(o,$)}}loadSvg(o,m=o){if(this.serverUrl&&null===o.match(/^(http(s)?):/)&&(m=o=this.serverUrl+o),this.iconsByUrl.has(m))return(0,N.of)(this.iconsByUrl.get(m));if(this.iconsLoadingByUrl.has(m))return this.iconsLoadingByUrl.get(m);const d=this.loader.getSvg(o).pipe((0,j.U)($=>{const ne=this.document.createElement("DIV");return ne.innerHTML=$,ne.querySelector("svg")}),(0,B.b)($=>this.iconsByUrl.set(m,$)),(0,S.K)($=>(console.error($),(0,L._)($))),(0,w.x)(()=>this.iconsLoadingByUrl.delete(m)),(0,E.B)());return this.iconsLoadingByUrl.set(m,d),d}getSvgByName(o){return this.iconsByUrl.has(o)?(0,N.of)(this.iconsByUrl.get(o)):this.iconsLoadingByUrl.has(o)?this.iconsLoadingByUrl.get(o):(0,L._)(`No svg with name '${o}' has been loaded`)}unloadSvg(o){this.iconsByUrl.has(o)&&this.iconsByUrl.delete(o)}}return y.\u0275fac=function(o){return new(o||y)(C.\u0275\u0275inject(I.S),C.\u0275\u0275inject(C.PLATFORM_ID),C.\u0275\u0275inject(P,8),C.\u0275\u0275inject(v.DOCUMENT,8))},y.\u0275prov=C.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y})();const b={provide:R,deps:[[new C.Optional,new C.SkipSelf,R],I.S,[C.PLATFORM_ID],[new C.Optional,P],[new C.Optional,v.DOCUMENT]],useFactory:function(y,c,o,m,d){return y||new R(c,o,m,d)}}},9750:(se,U,l)=>{l.d(U,{b:()=>L});var v=l(7777),C=l(5028);const M=["*"];class N{constructor(){this.loaded=!1}}let L=(()=>{class j{constructor(S,w,E,I,P){this.element=S,this.differs=w,this.renderer=E,this.iconReg=I,this.cdr=P,this.stretch=!1,this.applyClass=!1,this.svgClass="icon__svg",this.helper=new N,this._svgStyle=null}set svgStyle(S){this._svgStyle=S,!this.helper.differ&&S&&(this.helper.differ=this.differs.find(S).create())}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}ngOnChanges(S){const w=this.element.nativeElement.firstChild;(S.src||S.name)&&(this.helper.loaded&&this.destroy(),this.init()),S.stretch&&this.stylize(),S.applyClass&&(this.applyClass?this.setClass(w,null,this.klass):this.setClass(w,this.klass,null)),S.svgClass&&this.setClass(w,S.svgClass.previousValue,S.svgClass.currentValue),S.klass&&(this.setClass(this.element.nativeElement,S.klass.previousValue,S.klass.currentValue),this.setClass(w,S.klass.previousValue,this.applyClass?S.klass.currentValue:null)),S.viewBox&&(this.helper.loaded&&this.destroy(),this.init()),S.svgAriaLabel&&this.doAria(S.svgAriaLabel.currentValue)}ngDoCheck(){if(this.helper.svg&&this.helper.differ){const S=this.helper.differ.diff(this._svgStyle);S&&this.applyChanges(S)}}init(){if(this.name){const S=this.iconReg.getSvgByName(this.name);S&&(this.helper.icnSub=S.subscribe(w=>this.initSvg(w)))}else if(this.src){const S=this.iconReg.loadSvg(this.src);S&&(this.helper.icnSub=S.subscribe(w=>this.initSvg(w)))}else this.element.nativeElement.innerHTML="",this.cdr.markForCheck()}initSvg(S){!this.helper.loaded&&S&&(this.setSvg(S),this.resetDiffer())}destroy(){this.helper.icnSub&&this.helper.icnSub.unsubscribe(),this.helper=new N}resetDiffer(){this._svgStyle&&!this.helper.differ&&(this.helper.differ=this.differs.find(this._svgStyle).create())}setSvg(S){if(!this.helper.loaded&&S){this.helper.svg=S;const w=S.cloneNode(!0),E=this.element.nativeElement;if(E.innerHTML="",this.renderer.appendChild(E,w),this.helper.loaded=!0,this.copyNgContentAttribute(E,w),this.klass&&this.applyClass&&this.setClass(E.firstChild,null,this.klass),this.svgClass&&this.setClass(E.firstChild,null,this.svgClass),this.viewBox)if("auto"===this.viewBox){const I=w.getAttribute("width"),P=w.getAttribute("height");P&&I&&(this.renderer.setAttribute(w,"viewBox",`0 0 ${I} ${P}`),this.renderer.removeAttribute(w,"width"),this.renderer.removeAttribute(w,"height"))}else""!==this.viewBox&&(this.renderer.setAttribute(w,"viewBox",this.viewBox),this.renderer.removeAttribute(w,"width"),this.renderer.removeAttribute(w,"height"));this.stylize(),void 0===this.svgAriaLabel&&E.firstChild.hasAttribute("aria-label")||this.doAria(this.svgAriaLabel||""),this.cdr.markForCheck()}}copyNgContentAttribute(S,w){const E=S.attributes,I=E.length;for(let P=0;P<I;P+=1){const R=E.item(P);if(R&&R.name.startsWith("_ngcontent")){this.setNgContentAttribute(w,R.name);break}}}setNgContentAttribute(S,w){this.renderer.setAttribute(S,w,"");const E=S.childNodes.length;for(let I=0;I<E;I+=1){const P=S.childNodes[I];P instanceof Element&&this.setNgContentAttribute(P,w)}}stylize(){if(this.helper.svg){const S=this.element.nativeElement.firstChild;!0===this.stretch?this.renderer.setAttribute(S,"preserveAspectRatio","none"):!1===this.stretch&&this.renderer.removeAttribute(S,"preserveAspectRatio")}}applyChanges(S){S.forEachRemovedItem(w=>this.setStyle(w.key,null)),S.forEachAddedItem(w=>this.setStyle(w.key,w.currentValue)),S.forEachChangedItem(w=>this.setStyle(w.key,w.currentValue))}setStyle(S,w){const[E,I]=S.split("."),P=this.element.nativeElement.firstChild;null!==(w=null!==w&&I?`${w}${I}`:w)?this.renderer.setStyle(P,E,w):this.renderer.removeStyle(P,E)}setClass(S,w,E){if(S){if(w){const I=(Array.isArray(w)?w:w.split(" ")).filter(P=>P);for(const P of I)this.renderer.removeClass(S,P)}if(E){const I=(Array.isArray(E)?E:E.split(" ")).filter(P=>P);for(const P of I)this.renderer.addClass(S,P)}}}doAria(S){const w=this.element.nativeElement.firstChild;w&&(""===S?(this.renderer.setAttribute(w,"aria-hidden","true"),this.renderer.removeAttribute(w,"aria-label")):(this.renderer.removeAttribute(w,"aria-hidden"),this.renderer.setAttribute(w,"aria-label",S)))}}return j.\u0275fac=function(S){return new(S||j)(v.\u0275\u0275directiveInject(v.ElementRef),v.\u0275\u0275directiveInject(v.KeyValueDiffers),v.\u0275\u0275directiveInject(v.Renderer2),v.\u0275\u0275directiveInject(C.M6),v.\u0275\u0275directiveInject(v.ChangeDetectorRef))},j.\u0275cmp=v.\u0275\u0275defineComponent({type:j,selectors:[["cf-svg-icon"]],inputs:{src:"src",name:"name",stretch:"stretch",applyClass:"applyClass",svgClass:"svgClass",klass:["class","klass"],viewBox:"viewBox",svgAriaLabel:"svgAriaLabel",svgStyle:"svgStyle"},features:[v.\u0275\u0275NgOnChangesFeature],ngContentSelectors:M,decls:1,vars:0,template:function(S,w){1&S&&(v.\u0275\u0275projectionDef(),v.\u0275\u0275projection(0))},encapsulation:2}),j})()},2051:(se,U,l)=>{l.d(U,{Y:()=>B});var v=l(1457),C=l(7777),N=l(4438),L=l(5028),j=l(7191);let B=(()=>{class S{static forRoot(E={}){return{ngModule:S,providers:[L.Kb,E.loader||{provide:j.S,useClass:j.o}]}}}return S.\u0275fac=function(E){return new(E||S)},S.\u0275mod=C.\u0275\u0275defineNgModule({type:S}),S.\u0275inj=C.\u0275\u0275defineInjector({imports:[[v.CommonModule,N.O]]}),S})()},7191:(se,U,l)=>{l.d(U,{S:()=>N,o:()=>L});var v=l(9283),C=l(7777);class N{}let L=(()=>{class j extends N{constructor(S){super(),this.http=S}getSvg(S){return this.http.get(S,{responseType:"text"})}}return j.\u0275fac=function(S){return new(S||j)(C.\u0275\u0275inject(v.HttpClient))},j.\u0275prov=C.\u0275\u0275defineInjectable({token:j,factory:j.\u0275fac}),j})()},1611:se=>{se.exports=function(l){return function(){var v=arguments.length;if(v){for(var a=[],C=-1;++C<v;)a[C]=arguments[C];return l.call(this,a)}return l.call(this,[])}}},5834:(se,U,l)=>{var v=l(5203),a=l(5685),C=a(v("String.prototype.indexOf"));se.exports=function(N,L){var j=v(N,!!L);return"function"==typeof j&&C(N,".prototype.")>-1?a(j):j}},5685:(se,U,l)=>{var v=l(4444),a=l(5203),C=a("%Function.prototype.apply%"),M=a("%Function.prototype.call%"),N=a("%Reflect.apply%",!0)||v.call(M,C),L=a("%Object.getOwnPropertyDescriptor%",!0),j=a("%Object.defineProperty%",!0),B=a("%Math.max%");if(j)try{j({},"a",{value:1})}catch{j=null}se.exports=function(E){var I=N(v,M,arguments);if(L&&j){var P=L(I,"length");P.configurable&&j(I,"length",{value:1+B(0,E.length-(arguments.length-1))})}return I};var S=function(){return N(v,C,arguments)};j?j(se.exports,"apply",{value:S}):se.exports.apply=S},7466:function(se,U,l){var v;se.exports=(v=l(7585),l(8319),l(9493),l(7865),l(3057),function(){var a=v,M=a.lib.BlockCipher,N=a.algo,L=[],j=[],B=[],S=[],w=[],E=[],I=[],P=[],R=[],T=[];!function(){for(var c=[],o=0;o<256;o++)c[o]=o<128?o<<1:o<<1^283;var m=0,d=0;for(o=0;o<256;o++){var $=d^d<<1^d<<2^d<<3^d<<4;L[m]=$=$>>>8^255&$^99,j[$]=m;var x,ne=c[m],ve=c[ne],pe=c[ve];B[m]=(x=257*c[$]^16843008*$)<<24|x>>>8,S[m]=x<<16|x>>>16,w[m]=x<<8|x>>>24,E[m]=x,I[$]=(x=16843009*pe^65537*ve^257*ne^16843008*m)<<24|x>>>8,P[$]=x<<16|x>>>16,R[$]=x<<8|x>>>24,T[$]=x,m?(m=ne^c[c[c[pe^ne]]],d^=c[c[d]]):m=d=1}}();var b=[0,1,2,4,8,16,32,64,128,27,54],y=N.AES=M.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var o=this._keyPriorReset=this._key,m=o.words,d=o.sigBytes/4,ne=4*((this._nRounds=d+6)+1),ve=this._keySchedule=[],pe=0;pe<ne;pe++)pe<d?ve[pe]=m[pe]:(c=ve[pe-1],pe%d?d>6&&pe%d==4&&(c=L[c>>>24]<<24|L[c>>>16&255]<<16|L[c>>>8&255]<<8|L[255&c]):(c=L[(c=c<<8|c>>>24)>>>24]<<24|L[c>>>16&255]<<16|L[c>>>8&255]<<8|L[255&c],c^=b[pe/d|0]<<24),ve[pe]=ve[pe-d]^c);for(var x=this._invKeySchedule=[],Y=0;Y<ne;Y++){if(pe=ne-Y,Y%4)var c=ve[pe];else c=ve[pe-4];x[Y]=Y<4||pe<=4?c:I[L[c>>>24]]^P[L[c>>>16&255]]^R[L[c>>>8&255]]^T[L[255&c]]}}},encryptBlock:function(c,o){this._doCryptBlock(c,o,this._keySchedule,B,S,w,E,L)},decryptBlock:function(c,o){var m=c[o+1];c[o+1]=c[o+3],c[o+3]=m,this._doCryptBlock(c,o,this._invKeySchedule,I,P,R,T,j),m=c[o+1],c[o+1]=c[o+3],c[o+3]=m},_doCryptBlock:function(c,o,m,d,$,ne,ve,pe){for(var x=this._nRounds,Y=c[o]^m[0],W=c[o+1]^m[1],Q=c[o+2]^m[2],G=c[o+3]^m[3],X=4,te=1;te<x;te++){var be=d[Y>>>24]^$[W>>>16&255]^ne[Q>>>8&255]^ve[255&G]^m[X++],Le=d[W>>>24]^$[Q>>>16&255]^ne[G>>>8&255]^ve[255&Y]^m[X++],Qe=d[Q>>>24]^$[G>>>16&255]^ne[Y>>>8&255]^ve[255&W]^m[X++],Se=d[G>>>24]^$[Y>>>16&255]^ne[W>>>8&255]^ve[255&Q]^m[X++];Y=be,W=Le,Q=Qe,G=Se}be=(pe[Y>>>24]<<24|pe[W>>>16&255]<<16|pe[Q>>>8&255]<<8|pe[255&G])^m[X++],Le=(pe[W>>>24]<<24|pe[Q>>>16&255]<<16|pe[G>>>8&255]<<8|pe[255&Y])^m[X++],Qe=(pe[Q>>>24]<<24|pe[G>>>16&255]<<16|pe[Y>>>8&255]<<8|pe[255&W])^m[X++],Se=(pe[G>>>24]<<24|pe[Y>>>16&255]<<16|pe[W>>>8&255]<<8|pe[255&Q])^m[X++],c[o]=be,c[o+1]=Le,c[o+2]=Qe,c[o+3]=Se},keySize:8});a.AES=M._createHelper(y)}(),v.AES)},3057:function(se,U,l){var C,M,N,L,j,B,w,I,P,T,b,y,o,d,ne,ve,x,Y,v;se.exports=(v=l(7585),l(7865),void(v.lib.Cipher||(C=v,M=C.lib,N=M.Base,L=M.WordArray,j=M.BufferedBlockAlgorithm,B=C.enc,w=B.Base64,I=C.algo.EvpKDF,P=M.Cipher=j.extend({cfg:N.extend(),createEncryptor:function(W,Q){return this.create(this._ENC_XFORM_MODE,W,Q)},createDecryptor:function(W,Q){return this.create(this._DEC_XFORM_MODE,W,Q)},init:function(W,Q,G){this.cfg=this.cfg.extend(G),this._xformMode=W,this._key=Q,this.reset()},reset:function(){j.reset.call(this),this._doReset()},process:function(W){return this._append(W),this._process()},finalize:function(W){return W&&this._append(W),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function W(Q){return"string"==typeof Q?Y:ve}return function(Q){return{encrypt:function(G,X,te){return W(X).encrypt(Q,G,X,te)},decrypt:function(G,X,te){return W(X).decrypt(Q,G,X,te)}}}}()}),M.StreamCipher=P.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),T=C.mode={},b=M.BlockCipherMode=N.extend({createEncryptor:function(W,Q){return this.Encryptor.create(W,Q)},createDecryptor:function(W,Q){return this.Decryptor.create(W,Q)},init:function(W,Q){this._cipher=W,this._iv=Q}}),y=T.CBC=function(){var W=b.extend();function Q(G,X,te){var be,Le=this._iv;Le?(be=Le,this._iv=undefined):be=this._prevBlock;for(var Qe=0;Qe<te;Qe++)G[X+Qe]^=be[Qe]}return W.Encryptor=W.extend({processBlock:function(G,X){var te=this._cipher,be=te.blockSize;Q.call(this,G,X,be),te.encryptBlock(G,X),this._prevBlock=G.slice(X,X+be)}}),W.Decryptor=W.extend({processBlock:function(G,X){var te=this._cipher,be=te.blockSize,Le=G.slice(X,X+be);te.decryptBlock(G,X),Q.call(this,G,X,be),this._prevBlock=Le}}),W}(),o=(C.pad={}).Pkcs7={pad:function(W,Q){for(var G=4*Q,X=G-W.sigBytes%G,te=X<<24|X<<16|X<<8|X,be=[],Le=0;Le<X;Le+=4)be.push(te);var Qe=L.create(be,X);W.concat(Qe)},unpad:function(W){W.sigBytes-=255&W.words[W.sigBytes-1>>>2]}},M.BlockCipher=P.extend({cfg:P.cfg.extend({mode:y,padding:o}),reset:function(){var W;P.reset.call(this);var Q=this.cfg,G=Q.iv,X=Q.mode;this._xformMode==this._ENC_XFORM_MODE?W=X.createEncryptor:(W=X.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==W?this._mode.init(this,G&&G.words):(this._mode=W.call(X,this,G&&G.words),this._mode.__creator=W)},_doProcessBlock:function(W,Q){this._mode.processBlock(W,Q)},_doFinalize:function(){var W,Q=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Q.pad(this._data,this.blockSize),W=this._process(!0)):(W=this._process(!0),Q.unpad(W)),W},blockSize:4}),d=M.CipherParams=N.extend({init:function(W){this.mixIn(W)},toString:function(W){return(W||this.formatter).stringify(this)}}),ne=(C.format={}).OpenSSL={stringify:function(W){var G=W.ciphertext,X=W.salt;return(X?L.create([1398893684,1701076831]).concat(X).concat(G):G).toString(w)},parse:function(W){var Q,G=w.parse(W),X=G.words;return 1398893684==X[0]&&1701076831==X[1]&&(Q=L.create(X.slice(2,4)),X.splice(0,4),G.sigBytes-=16),d.create({ciphertext:G,salt:Q})}},ve=M.SerializableCipher=N.extend({cfg:N.extend({format:ne}),encrypt:function(W,Q,G,X){X=this.cfg.extend(X);var te=W.createEncryptor(G,X),be=te.finalize(Q),Le=te.cfg;return d.create({ciphertext:be,key:G,iv:Le.iv,algorithm:W,mode:Le.mode,padding:Le.padding,blockSize:W.blockSize,formatter:X.format})},decrypt:function(W,Q,G,X){return X=this.cfg.extend(X),Q=this._parse(Q,X.format),W.createDecryptor(G,X).finalize(Q.ciphertext)},_parse:function(W,Q){return"string"==typeof W?Q.parse(W,this):W}}),x=(C.kdf={}).OpenSSL={execute:function(W,Q,G,X){X||(X=L.random(8));var te=I.create({keySize:Q+G}).compute(W,X),be=L.create(te.words.slice(Q),4*G);return te.sigBytes=4*Q,d.create({key:te,iv:be,salt:X})}},Y=M.PasswordBasedCipher=ve.extend({cfg:ve.cfg.extend({kdf:x}),encrypt:function(W,Q,G,X){var te=(X=this.cfg.extend(X)).kdf.execute(G,W.keySize,W.ivSize);X.iv=te.iv;var be=ve.encrypt.call(this,W,Q,te.key,X);return be.mixIn(te),be},decrypt:function(W,Q,G,X){X=this.cfg.extend(X),Q=this._parse(Q,X.format);var te=X.kdf.execute(G,W.keySize,W.ivSize,Q.salt);return X.iv=te.iv,ve.decrypt.call(this,W,Q,te.key,X)}}))))},7585:function(se,U,l){var v;se.exports=(v=v||function(a,C){var M;if("undefined"!=typeof window&&window.crypto&&(M=window.crypto),"undefined"!=typeof self&&self.crypto&&(M=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(M=globalThis.crypto),!M&&"undefined"!=typeof window&&window.msCrypto&&(M=window.msCrypto),!M&&"undefined"!=typeof global&&global.crypto&&(M=global.crypto),!M)try{M=l(2480)}catch{}var N=function(){if(M){if("function"==typeof M.getRandomValues)try{return M.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof M.randomBytes)try{return M.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},L=Object.create||function(){function c(){}return function(o){var m;return c.prototype=o,m=new c,c.prototype=null,m}}(),j={},B=j.lib={},S=B.Base={extend:function(c){var o=L(this);return c&&o.mixIn(c),(!o.hasOwnProperty("init")||this.init===o.init)&&(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var c=this.extend();return c.init.apply(c,arguments),c},init:function(){},mixIn:function(c){for(var o in c)c.hasOwnProperty(o)&&(this[o]=c[o]);c.hasOwnProperty("toString")&&(this.toString=c.toString)},clone:function(){return this.init.prototype.extend(this)}},w=B.WordArray=S.extend({init:function(c,o){c=this.words=c||[],this.sigBytes=null!=o?o:4*c.length},toString:function(c){return(c||I).stringify(this)},concat:function(c){var o=this.words,m=c.words,d=this.sigBytes,$=c.sigBytes;if(this.clamp(),d%4)for(var ne=0;ne<$;ne++)o[d+ne>>>2]|=(m[ne>>>2]>>>24-ne%4*8&255)<<24-(d+ne)%4*8;else for(var pe=0;pe<$;pe+=4)o[d+pe>>>2]=m[pe>>>2];return this.sigBytes+=$,this},clamp:function(){var c=this.words,o=this.sigBytes;c[o>>>2]&=4294967295<<32-o%4*8,c.length=a.ceil(o/4)},clone:function(){var c=S.clone.call(this);return c.words=this.words.slice(0),c},random:function(c){for(var o=[],m=0;m<c;m+=4)o.push(N());return new w.init(o,c)}}),E=j.enc={},I=E.Hex={stringify:function(c){for(var o=c.words,m=c.sigBytes,d=[],$=0;$<m;$++){var ne=o[$>>>2]>>>24-$%4*8&255;d.push((ne>>>4).toString(16)),d.push((15&ne).toString(16))}return d.join("")},parse:function(c){for(var o=c.length,m=[],d=0;d<o;d+=2)m[d>>>3]|=parseInt(c.substr(d,2),16)<<24-d%8*4;return new w.init(m,o/2)}},P=E.Latin1={stringify:function(c){for(var o=c.words,m=c.sigBytes,d=[],$=0;$<m;$++)d.push(String.fromCharCode(o[$>>>2]>>>24-$%4*8&255));return d.join("")},parse:function(c){for(var o=c.length,m=[],d=0;d<o;d++)m[d>>>2]|=(255&c.charCodeAt(d))<<24-d%4*8;return new w.init(m,o)}},R=E.Utf8={stringify:function(c){try{return decodeURIComponent(escape(P.stringify(c)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(c){return P.parse(unescape(encodeURIComponent(c)))}},T=B.BufferedBlockAlgorithm=S.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(c){"string"==typeof c&&(c=R.parse(c)),this._data.concat(c),this._nDataBytes+=c.sigBytes},_process:function(c){var o,m=this._data,d=m.words,$=m.sigBytes,ne=this.blockSize,pe=$/(4*ne),x=(pe=c?a.ceil(pe):a.max((0|pe)-this._minBufferSize,0))*ne,Y=a.min(4*x,$);if(x){for(var W=0;W<x;W+=ne)this._doProcessBlock(d,W);o=d.splice(0,x),m.sigBytes-=Y}return new w.init(o,Y)},clone:function(){var c=S.clone.call(this);return c._data=this._data.clone(),c},_minBufferSize:0}),y=(B.Hasher=T.extend({cfg:S.extend(),init:function(c){this.cfg=this.cfg.extend(c),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(c){return this._append(c),this._process(),this},finalize:function(c){return c&&this._append(c),this._doFinalize()},blockSize:16,_createHelper:function(c){return function(o,m){return new c.init(m).finalize(o)}},_createHmacHelper:function(c){return function(o,m){return new y.HMAC.init(c,m).finalize(o)}}}),j.algo={});return j}(Math),v)},8319:function(se,U,l){var v,M;se.exports=(v=l(7585),M=v.lib.WordArray,v.enc.Base64={stringify:function(B){var S=B.words,w=B.sigBytes,E=this._map;B.clamp();for(var I=[],P=0;P<w;P+=3)for(var y=(S[P>>>2]>>>24-P%4*8&255)<<16|(S[P+1>>>2]>>>24-(P+1)%4*8&255)<<8|S[P+2>>>2]>>>24-(P+2)%4*8&255,c=0;c<4&&P+.75*c<w;c++)I.push(E.charAt(y>>>6*(3-c)&63));var o=E.charAt(64);if(o)for(;I.length%4;)I.push(o);return I.join("")},parse:function(B){var S=B.length,w=this._map,E=this._reverseMap;if(!E){E=this._reverseMap=[];for(var I=0;I<w.length;I++)E[w.charCodeAt(I)]=I}var P=w.charAt(64);if(P){var R=B.indexOf(P);-1!==R&&(S=R)}return function(B,S,w){for(var E=[],I=0,P=0;P<S;P++)if(P%4){var R=w[B.charCodeAt(P-1)]<<P%4*2,T=w[B.charCodeAt(P)]>>>6-P%4*2;E[I>>>2]|=(R|T)<<24-I%4*8,I++}return M.create(E,I)}(B,S,E)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},v.enc.Base64)},4384:function(se,U,l){se.exports=l(7585).enc.Utf8},7865:function(se,U,l){var a,C,M,N,L,B,v;se.exports=(v=l(7585),l(5162),l(3764),N=(C=(a=v).lib).WordArray,B=(L=a.algo).EvpKDF=(M=C.Base).extend({cfg:M.extend({keySize:4,hasher:L.MD5,iterations:1}),init:function(S){this.cfg=this.cfg.extend(S)},compute:function(S,w){for(var E,I=this.cfg,P=I.hasher.create(),R=N.create(),T=R.words,b=I.keySize,y=I.iterations;T.length<b;){E&&P.update(E),E=P.update(S).finalize(w),P.reset();for(var c=1;c<y;c++)E=P.finalize(E),P.reset();R.concat(E)}return R.sigBytes=4*b,R}}),a.EvpKDF=function(S,w,E){return B.create(E).compute(S,w)},v.EvpKDF)},3764:function(se,U,l){var v,L;se.exports=(v=l(7585),L=v.enc.Utf8,void(v.algo.HMAC=v.lib.Base.extend({init:function(S,w){S=this._hasher=new S.init,"string"==typeof w&&(w=L.parse(w));var E=S.blockSize,I=4*E;w.sigBytes>I&&(w=S.finalize(w)),w.clamp();for(var P=this._oKey=w.clone(),R=this._iKey=w.clone(),T=P.words,b=R.words,y=0;y<E;y++)T[y]^=1549556828,b[y]^=909522486;P.sigBytes=R.sigBytes=I,this.reset()},reset:function(){var S=this._hasher;S.reset(),S.update(this._iKey)},update:function(S){return this._hasher.update(S),this},finalize:function(S){var w=this._hasher,E=w.finalize(S);return w.reset(),w.finalize(this._oKey.clone().concat(E))}})))},9493:function(se,U,l){var v;se.exports=(v=l(7585),function(a){var C=v,M=C.lib,N=M.WordArray,L=M.Hasher,j=C.algo,B=[];!function(){for(var R=0;R<64;R++)B[R]=4294967296*a.abs(a.sin(R+1))|0}();var S=j.MD5=L.extend({_doReset:function(){this._hash=new N.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(R,T){for(var b=0;b<16;b++){var y=T+b,c=R[y];R[y]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var o=this._hash.words,m=R[T+0],d=R[T+1],$=R[T+2],ne=R[T+3],ve=R[T+4],pe=R[T+5],x=R[T+6],Y=R[T+7],W=R[T+8],Q=R[T+9],G=R[T+10],X=R[T+11],te=R[T+12],be=R[T+13],Le=R[T+14],Qe=R[T+15],Se=o[0],ge=o[1],oe=o[2],le=o[3];Se=w(Se,ge,oe,le,m,7,B[0]),le=w(le,Se,ge,oe,d,12,B[1]),oe=w(oe,le,Se,ge,$,17,B[2]),ge=w(ge,oe,le,Se,ne,22,B[3]),Se=w(Se,ge,oe,le,ve,7,B[4]),le=w(le,Se,ge,oe,pe,12,B[5]),oe=w(oe,le,Se,ge,x,17,B[6]),ge=w(ge,oe,le,Se,Y,22,B[7]),Se=w(Se,ge,oe,le,W,7,B[8]),le=w(le,Se,ge,oe,Q,12,B[9]),oe=w(oe,le,Se,ge,G,17,B[10]),ge=w(ge,oe,le,Se,X,22,B[11]),Se=w(Se,ge,oe,le,te,7,B[12]),le=w(le,Se,ge,oe,be,12,B[13]),oe=w(oe,le,Se,ge,Le,17,B[14]),Se=E(Se,ge=w(ge,oe,le,Se,Qe,22,B[15]),oe,le,d,5,B[16]),le=E(le,Se,ge,oe,x,9,B[17]),oe=E(oe,le,Se,ge,X,14,B[18]),ge=E(ge,oe,le,Se,m,20,B[19]),Se=E(Se,ge,oe,le,pe,5,B[20]),le=E(le,Se,ge,oe,G,9,B[21]),oe=E(oe,le,Se,ge,Qe,14,B[22]),ge=E(ge,oe,le,Se,ve,20,B[23]),Se=E(Se,ge,oe,le,Q,5,B[24]),le=E(le,Se,ge,oe,Le,9,B[25]),oe=E(oe,le,Se,ge,ne,14,B[26]),ge=E(ge,oe,le,Se,W,20,B[27]),Se=E(Se,ge,oe,le,be,5,B[28]),le=E(le,Se,ge,oe,$,9,B[29]),oe=E(oe,le,Se,ge,Y,14,B[30]),Se=I(Se,ge=E(ge,oe,le,Se,te,20,B[31]),oe,le,pe,4,B[32]),le=I(le,Se,ge,oe,W,11,B[33]),oe=I(oe,le,Se,ge,X,16,B[34]),ge=I(ge,oe,le,Se,Le,23,B[35]),Se=I(Se,ge,oe,le,d,4,B[36]),le=I(le,Se,ge,oe,ve,11,B[37]),oe=I(oe,le,Se,ge,Y,16,B[38]),ge=I(ge,oe,le,Se,G,23,B[39]),Se=I(Se,ge,oe,le,be,4,B[40]),le=I(le,Se,ge,oe,m,11,B[41]),oe=I(oe,le,Se,ge,ne,16,B[42]),ge=I(ge,oe,le,Se,x,23,B[43]),Se=I(Se,ge,oe,le,Q,4,B[44]),le=I(le,Se,ge,oe,te,11,B[45]),oe=I(oe,le,Se,ge,Qe,16,B[46]),Se=P(Se,ge=I(ge,oe,le,Se,$,23,B[47]),oe,le,m,6,B[48]),le=P(le,Se,ge,oe,Y,10,B[49]),oe=P(oe,le,Se,ge,Le,15,B[50]),ge=P(ge,oe,le,Se,pe,21,B[51]),Se=P(Se,ge,oe,le,te,6,B[52]),le=P(le,Se,ge,oe,ne,10,B[53]),oe=P(oe,le,Se,ge,G,15,B[54]),ge=P(ge,oe,le,Se,d,21,B[55]),Se=P(Se,ge,oe,le,W,6,B[56]),le=P(le,Se,ge,oe,Qe,10,B[57]),oe=P(oe,le,Se,ge,x,15,B[58]),ge=P(ge,oe,le,Se,be,21,B[59]),Se=P(Se,ge,oe,le,ve,6,B[60]),le=P(le,Se,ge,oe,X,10,B[61]),oe=P(oe,le,Se,ge,$,15,B[62]),ge=P(ge,oe,le,Se,Q,21,B[63]),o[0]=o[0]+Se|0,o[1]=o[1]+ge|0,o[2]=o[2]+oe|0,o[3]=o[3]+le|0},_doFinalize:function(){var R=this._data,T=R.words,b=8*this._nDataBytes,y=8*R.sigBytes;T[y>>>5]|=128<<24-y%32;var c=a.floor(b/4294967296),o=b;T[15+(y+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),T[14+(y+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),R.sigBytes=4*(T.length+1),this._process();for(var m=this._hash,d=m.words,$=0;$<4;$++){var ne=d[$];d[$]=16711935&(ne<<8|ne>>>24)|4278255360&(ne<<24|ne>>>8)}return m},clone:function(){var R=L.clone.call(this);return R._hash=this._hash.clone(),R}});function w(R,T,b,y,c,o,m){var d=R+(T&b|~T&y)+c+m;return(d<<o|d>>>32-o)+T}function E(R,T,b,y,c,o,m){var d=R+(T&y|b&~y)+c+m;return(d<<o|d>>>32-o)+T}function I(R,T,b,y,c,o,m){var d=R+(T^b^y)+c+m;return(d<<o|d>>>32-o)+T}function P(R,T,b,y,c,o,m){var d=R+(b^(T|~y))+c+m;return(d<<o|d>>>32-o)+T}C.MD5=L._createHelper(S),C.HmacMD5=L._createHmacHelper(S)}(Math),v.MD5)},5162:function(se,U,l){var a,C,M,N,j,B,v;se.exports=(v=l(7585),M=(C=(a=v).lib).WordArray,j=[],B=a.algo.SHA1=(N=C.Hasher).extend({_doReset:function(){this._hash=new M.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,w){for(var E=this._hash.words,I=E[0],P=E[1],R=E[2],T=E[3],b=E[4],y=0;y<80;y++){if(y<16)j[y]=0|S[w+y];else{var c=j[y-3]^j[y-8]^j[y-14]^j[y-16];j[y]=c<<1|c>>>31}var o=(I<<5|I>>>27)+b+j[y];o+=y<20?1518500249+(P&R|~P&T):y<40?1859775393+(P^R^T):y<60?(P&R|P&T|R&T)-1894007588:(P^R^T)-899497514,b=T,T=R,R=P<<30|P>>>2,P=I,I=o}E[0]=E[0]+I|0,E[1]=E[1]+P|0,E[2]=E[2]+R|0,E[3]=E[3]+T|0,E[4]=E[4]+b|0},_doFinalize:function(){var S=this._data,w=S.words,E=8*this._nDataBytes,I=8*S.sigBytes;return w[I>>>5]|=128<<24-I%32,w[14+(I+64>>>9<<4)]=Math.floor(E/4294967296),w[15+(I+64>>>9<<4)]=E,S.sigBytes=4*w.length,this._process(),this._hash},clone:function(){var S=N.clone.call(this);return S._hash=this._hash.clone(),S}}),a.SHA1=N._createHelper(B),a.HmacSHA1=N._createHmacHelper(B),v.SHA1)},6952:(se,U,l)=>{var v=l(1356),a=l(3407),C=l(2e3),M=l(2342),N=l(9235),L=l(2374),j=Date.prototype.getTime;function S(I){return null==I}function w(I){return!(!I||"object"!=typeof I||"number"!=typeof I.length||"function"!=typeof I.copy||"function"!=typeof I.slice||I.length>0&&"number"!=typeof I[0])}se.exports=function B(I,P,R){var T=R||{};return!!(T.strict?C(I,P):I===P)||(!I||!P||"object"!=typeof I&&"object"!=typeof P?T.strict?C(I,P):I==P:function(I,P,R){var T,b;if(typeof I!=typeof P||S(I)||S(P)||I.prototype!==P.prototype||a(I)!==a(P))return!1;var y=M(I),c=M(P);if(y!==c)return!1;if(y||c)return I.source===P.source&&N(I)===N(P);if(L(I)&&L(P))return j.call(I)===j.call(P);var o=w(I),m=w(P);if(o!==m)return!1;if(o||m){if(I.length!==P.length)return!1;for(T=0;T<I.length;T++)if(I[T]!==P[T])return!1;return!0}if(typeof I!=typeof P)return!1;try{var d=v(I),$=v(P)}catch{return!1}if(d.length!==$.length)return!1;for(d.sort(),$.sort(),T=d.length-1;T>=0;T--)if(d[T]!=$[T])return!1;for(T=d.length-1;T>=0;T--)if(!B(I[b=d[T]],P[b],R))return!1;return!0}(I,P,T))}},4949:se=>{se.exports=function U(l){return Object.freeze(l),Object.getOwnPropertyNames(l).forEach(function(v){l.hasOwnProperty(v)&&null!==l[v]&&("object"==typeof l[v]||"function"==typeof l[v])&&!Object.isFrozen(l[v])&&U(l[v])}),l}},2358:(se,U,l)=>{var v=l(1356),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),C=Object.prototype.toString,M=Array.prototype.concat,N=Object.defineProperty,B=N&&function(){var E={};try{for(var I in N(E,"x",{enumerable:!1,value:E}),E)return!1;return E.x===E}catch{return!1}}(),S=function(E,I,P,R){I in E&&(!function(E){return"function"==typeof E&&"[object Function]"===C.call(E)}(R)||!R())||(B?N(E,I,{configurable:!0,enumerable:!1,value:P,writable:!0}):E[I]=P)},w=function(E,I){var P=arguments.length>2?arguments[2]:{},R=v(I);a&&(R=M.call(R,Object.getOwnPropertySymbols(I)));for(var T=0;T<R.length;T+=1)S(E,R[T],I[R[T]],P[R[T]])};w.supportsDescriptors=!!B,se.exports=w},9069:se=>{var v,U="object"==typeof Reflect?Reflect:null,l=U&&"function"==typeof U.apply?U.apply:function(m,d,$){return Function.prototype.apply.call(m,d,$)};v=U&&"function"==typeof U.ownKeys?U.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:function(m){return Object.getOwnPropertyNames(m)};var C=Number.isNaN||function(m){return m!=m};function M(){M.init.call(this)}se.exports=M,se.exports.once=function(o,m){return new Promise(function(d,$){function ne(pe){o.removeListener(m,ve),$(pe)}function ve(){"function"==typeof o.removeListener&&o.removeListener("error",ne),d([].slice.call(arguments))}c(o,m,ve,{once:!0}),"error"!==m&&function(o,m,d){"function"==typeof o.on&&c(o,"error",m,{once:!0})}(o,ne)})},M.EventEmitter=M,M.prototype._events=void 0,M.prototype._eventsCount=0,M.prototype._maxListeners=void 0;var N=10;function L(o){if("function"!=typeof o)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}function j(o){return void 0===o._maxListeners?M.defaultMaxListeners:o._maxListeners}function B(o,m,d,$){var ne,ve,pe;if(L(d),void 0===(ve=o._events)?(ve=o._events=Object.create(null),o._eventsCount=0):(void 0!==ve.newListener&&(o.emit("newListener",m,d.listener?d.listener:d),ve=o._events),pe=ve[m]),void 0===pe)pe=ve[m]=d,++o._eventsCount;else if("function"==typeof pe?pe=ve[m]=$?[d,pe]:[pe,d]:$?pe.unshift(d):pe.push(d),(ne=j(o))>0&&pe.length>ne&&!pe.warned){pe.warned=!0;var x=new Error("Possible EventEmitter memory leak detected. "+pe.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");x.name="MaxListenersExceededWarning",x.emitter=o,x.type=m,x.count=pe.length,function(o){console&&console.warn&&console.warn(o)}(x)}return o}function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(o,m,d){var $={fired:!1,wrapFn:void 0,target:o,type:m,listener:d},ne=S.bind($);return ne.listener=d,$.wrapFn=ne,ne}function E(o,m,d){var $=o._events;if(void 0===$)return[];var ne=$[m];return void 0===ne?[]:"function"==typeof ne?d?[ne.listener||ne]:[ne]:d?function(o){for(var m=new Array(o.length),d=0;d<m.length;++d)m[d]=o[d].listener||o[d];return m}(ne):P(ne,ne.length)}function I(o){var m=this._events;if(void 0!==m){var d=m[o];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function P(o,m){for(var d=new Array(m),$=0;$<m;++$)d[$]=o[$];return d}function c(o,m,d,$){if("function"==typeof o.on)$.once?o.once(m,d):o.on(m,d);else{if("function"!=typeof o.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof o);o.addEventListener(m,function ne(ve){$.once&&o.removeEventListener(m,ne),d(ve)})}}Object.defineProperty(M,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(o){if("number"!=typeof o||o<0||C(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");N=o}}),M.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},M.prototype.setMaxListeners=function(m){if("number"!=typeof m||m<0||C(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this},M.prototype.getMaxListeners=function(){return j(this)},M.prototype.emit=function(m){for(var d=[],$=1;$<arguments.length;$++)d.push(arguments[$]);var ne="error"===m,ve=this._events;if(void 0!==ve)ne=ne&&void 0===ve.error;else if(!ne)return!1;if(ne){var pe;if(d.length>0&&(pe=d[0]),pe instanceof Error)throw pe;var x=new Error("Unhandled error."+(pe?" ("+pe.message+")":""));throw x.context=pe,x}var Y=ve[m];if(void 0===Y)return!1;if("function"==typeof Y)l(Y,this,d);else{var W=Y.length,Q=P(Y,W);for($=0;$<W;++$)l(Q[$],this,d)}return!0},M.prototype.on=M.prototype.addListener=function(m,d){return B(this,m,d,!1)},M.prototype.prependListener=function(m,d){return B(this,m,d,!0)},M.prototype.once=function(m,d){return L(d),this.on(m,w(this,m,d)),this},M.prototype.prependOnceListener=function(m,d){return L(d),this.prependListener(m,w(this,m,d)),this},M.prototype.off=M.prototype.removeListener=function(m,d){var $,ne,ve,pe,x;if(L(d),void 0===(ne=this._events))return this;if(void 0===($=ne[m]))return this;if($===d||$.listener===d)0==--this._eventsCount?this._events=Object.create(null):(delete ne[m],ne.removeListener&&this.emit("removeListener",m,$.listener||d));else if("function"!=typeof $){for(ve=-1,pe=$.length-1;pe>=0;pe--)if($[pe]===d||$[pe].listener===d){x=$[pe].listener,ve=pe;break}if(ve<0)return this;0===ve?$.shift():function(o,m){for(;m+1<o.length;m++)o[m]=o[m+1];o.pop()}($,ve),1===$.length&&(ne[m]=$[0]),void 0!==ne.removeListener&&this.emit("removeListener",m,x||d)}return this},M.prototype.removeAllListeners=function(m){var d,$,ne;if(void 0===($=this._events))return this;if(void 0===$.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==$[m]&&(0==--this._eventsCount?this._events=Object.create(null):delete $[m]),this;if(0===arguments.length){var pe,ve=Object.keys($);for(ne=0;ne<ve.length;++ne)"removeListener"!==(pe=ve[ne])&&this.removeAllListeners(pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(d=$[m]))this.removeListener(m,d);else if(void 0!==d)for(ne=d.length-1;ne>=0;ne--)this.removeListener(m,d[ne]);return this},M.prototype.listeners=function(m){return E(this,m,!0)},M.prototype.rawListeners=function(m){return E(this,m,!1)},M.listenerCount=function(o,m){return"function"==typeof o.listenerCount?o.listenerCount(m):I.call(o,m)},M.prototype.listenerCount=I,M.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]}},2559:se=>{se.exports=function U(l,v){if(l===v)return!0;if(l&&v&&"object"==typeof l&&"object"==typeof v){if(l.constructor!==v.constructor)return!1;var a,C,M;if(Array.isArray(l)){if((a=l.length)!=v.length)return!1;for(C=a;0!=C--;)if(!U(l[C],v[C]))return!1;return!0}if(l.constructor===RegExp)return l.source===v.source&&l.flags===v.flags;if(l.valueOf!==Object.prototype.valueOf)return l.valueOf()===v.valueOf();if(l.toString!==Object.prototype.toString)return l.toString()===v.toString();if((a=(M=Object.keys(l)).length)!==Object.keys(v).length)return!1;for(C=a;0!=C--;)if(!Object.prototype.hasOwnProperty.call(v,M[C]))return!1;for(C=a;0!=C--;){var N=M[C];if(!U(l[N],v[N]))return!1}return!0}return l!=l&&v!=v}},9076:se=>{var U=Object.prototype.hasOwnProperty,l=Object.prototype.toString;se.exports=function(a,C,M){if("[object Function]"!==l.call(C))throw new TypeError("iterator must be a function");var N=a.length;if(N===+N)for(var L=0;L<N;L++)C.call(M,a[L],L,a);else for(var j in a)U.call(a,j)&&C.call(M,a[j],j,a)}},3457:se=>{var U="Function.prototype.bind called on incompatible ",l=Array.prototype.slice,v=Object.prototype.toString,a="[object Function]";se.exports=function(M){var N=this;if("function"!=typeof N||v.call(N)!==a)throw new TypeError(U+N);for(var j,L=l.call(arguments,1),B=function(){if(this instanceof j){var P=N.apply(this,L.concat(l.call(arguments)));return Object(P)===P?P:this}return N.apply(M,L.concat(l.call(arguments)))},S=Math.max(0,N.length-L.length),w=[],E=0;E<S;E++)w.push("$"+E);if(j=Function("binder","return function ("+w.join(",")+"){ return binder.apply(this,arguments); }")(B),N.prototype){var I=function(){};I.prototype=N.prototype,j.prototype=new I,I.prototype=null}return j}},4444:(se,U,l)=>{var v=l(3457);se.exports=Function.prototype.bind||v},1227:(se,U,l)=>{for(var v=l(6788),a=l(7549),C=/[\{\[]/,M=/[\}\]]/,N=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],L={},j=0;j<N.length;j++)L[N[j]]=!0;var B=function(E){return a(E)&&!L.hasOwnProperty(E)},S={s:function(E){return""+E},d:function(E){return""+Number(E)},o:function(E){return JSON.stringify(E)}},w=function(){var E=[],I=0,P={},R=function(y){for(var c="";c.length<2*I;)c+="  ";E.push(c+y)},T=function(y){return M.test(y.trim()[0])&&C.test(y[y.length-1])?(I--,R(y),void I++):C.test(y[y.length-1])?(R(y),void I++):M.test(y.trim()[0])?(I--,void R(y)):void R(y)},b=function(y){if(!y)return b;if(1===arguments.length&&y.indexOf("\n")>-1)for(var c=y.trim().split("\n"),o=0;o<c.length;o++)T(c[o].trim());else T(v.format.apply(v,arguments));return b};return b.scope={},b.formats=S,b.sym=function(y){return(!y||!B(y))&&(y="tmp"),P[y]||(P[y]=0),y+(P[y]++||"")},b.property=function(y,c){return 1===arguments.length&&(c=y,y=""),a(c+="")?y?y+"."+c:c:y?y+"["+JSON.stringify(c)+"]":JSON.stringify(c)},b.toString=function(){return E.join("\n")},b.toFunction=function(y){y||(y={});var c="return ("+b.toString()+")";Object.keys(b.scope).forEach(function(d){y[d]||(y[d]=b.scope[d])});var o=Object.keys(y).map(function(d){return d}),m=o.map(function(d){return y[d]});return Function.apply(null,o.concat(c)).apply(null,m)},arguments.length&&b.apply(null,arguments),b};w.formats=S,se.exports=w},2562:(se,U,l)=>{var v=l(7549),a=function(C,M){return v(M)?C+"."+M:C+"["+JSON.stringify(M)+"]"};a.valid=v,a.property=function(C){return v(C)?C:JSON.stringify(C)},se.exports=a},5203:(se,U,l)=>{var v,a=SyntaxError,C=Function,M=TypeError,N=function(x){try{return C('"use strict"; return ('+x+").constructor;")()}catch{}},L=Object.getOwnPropertyDescriptor;if(L)try{L({},"")}catch{L=null}var j=function(){throw new M},B=L?function(){try{return j}catch{try{return L(arguments,"callee").get}catch{return j}}}():j,S=l(2969)(),w=Object.getPrototypeOf||function(x){return x.__proto__},E={},I="undefined"==typeof Uint8Array?v:w(Uint8Array),P={"%AggregateError%":"undefined"==typeof AggregateError?v:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?v:ArrayBuffer,"%ArrayIteratorPrototype%":S?w([][Symbol.iterator]()):v,"%AsyncFromSyncIteratorPrototype%":v,"%AsyncFunction%":E,"%AsyncGenerator%":E,"%AsyncGeneratorFunction%":E,"%AsyncIteratorPrototype%":E,"%Atomics%":"undefined"==typeof Atomics?v:Atomics,"%BigInt%":"undefined"==typeof BigInt?v:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?v:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?v:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?v:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?v:FinalizationRegistry,"%Function%":C,"%GeneratorFunction%":E,"%Int8Array%":"undefined"==typeof Int8Array?v:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?v:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?v:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S?w(w([][Symbol.iterator]())):v,"%JSON%":"object"==typeof JSON?JSON:v,"%Map%":"undefined"==typeof Map?v:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&S?w((new Map)[Symbol.iterator]()):v,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?v:Promise,"%Proxy%":"undefined"==typeof Proxy?v:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?v:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?v:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&S?w((new Set)[Symbol.iterator]()):v,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?v:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S?w(""[Symbol.iterator]()):v,"%Symbol%":S?Symbol:v,"%SyntaxError%":a,"%ThrowTypeError%":B,"%TypedArray%":I,"%TypeError%":M,"%Uint8Array%":"undefined"==typeof Uint8Array?v:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?v:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?v:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?v:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?v:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?v:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?v:WeakSet},R=function x(Y){var W;if("%AsyncFunction%"===Y)W=N("async function () {}");else if("%GeneratorFunction%"===Y)W=N("function* () {}");else if("%AsyncGeneratorFunction%"===Y)W=N("async function* () {}");else if("%AsyncGenerator%"===Y){var Q=x("%AsyncGeneratorFunction%");Q&&(W=Q.prototype)}else if("%AsyncIteratorPrototype%"===Y){var G=x("%AsyncGenerator%");G&&(W=w(G.prototype))}return P[Y]=W,W},T={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=l(4444),y=l(3164),c=b.call(Function.call,Array.prototype.concat),o=b.call(Function.apply,Array.prototype.splice),m=b.call(Function.call,String.prototype.replace),d=b.call(Function.call,String.prototype.slice),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ne=/\\(\\)?/g,ve=function(Y){var W=d(Y,0,1),Q=d(Y,-1);if("%"===W&&"%"!==Q)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===Q&&"%"!==W)throw new a("invalid intrinsic syntax, expected opening `%`");var G=[];return m(Y,$,function(X,te,be,Le){G[G.length]=be?m(Le,ne,"$1"):te||X}),G},pe=function(Y,W){var G,Q=Y;if(y(T,Q)&&(Q="%"+(G=T[Q])[0]+"%"),y(P,Q)){var X=P[Q];if(X===E&&(X=R(Q)),void 0===X&&!W)throw new M("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:G,name:Q,value:X}}throw new a("intrinsic "+Y+" does not exist!")};se.exports=function(Y,W){if("string"!=typeof Y||0===Y.length)throw new M("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof W)throw new M('"allowMissing" argument must be a boolean');var Q=ve(Y),G=Q.length>0?Q[0]:"",X=pe("%"+G+"%",W),te=X.name,be=X.value,Le=!1,Qe=X.alias;Qe&&(G=Qe[0],o(Q,c([0,1],Qe)));for(var Se=1,ge=!0;Se<Q.length;Se+=1){var oe=Q[Se],le=d(oe,0,1),Oe=d(oe,-1);if(('"'===le||"'"===le||"`"===le||'"'===Oe||"'"===Oe||"`"===Oe)&&le!==Oe)throw new a("property names with quotes must have matching quotes");if(("constructor"===oe||!ge)&&(Le=!0),y(P,te="%"+(G+="."+oe)+"%"))be=P[te];else if(null!=be){if(!(oe in be)){if(!W)throw new M("base intrinsic for "+Y+" exists, but the property is not available.");return}if(L&&Se+1>=Q.length){var Ne=L(be,oe);be=(ge=!!Ne)&&"get"in Ne&&!("originalValue"in Ne.get)?Ne.get:be[oe]}else ge=y(be,oe),be=be[oe];ge&&!Le&&(P[te]=be)}}return be}},2969:(se,U,l)=>{var v="undefined"!=typeof Symbol&&Symbol,a=l(1983);se.exports=function(){return"function"==typeof v&&"function"==typeof Symbol&&"symbol"==typeof v("foo")&&"symbol"==typeof Symbol("bar")&&a()}},1983:se=>{se.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var l={},v=Symbol("test"),a=Object(v);if("string"==typeof v||"[object Symbol]"!==Object.prototype.toString.call(v)||"[object Symbol]"!==Object.prototype.toString.call(a))return!1;for(v in l[v]=42,l)return!1;if("function"==typeof Object.keys&&0!==Object.keys(l).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(l).length)return!1;var M=Object.getOwnPropertySymbols(l);if(1!==M.length||M[0]!==v||!Object.prototype.propertyIsEnumerable.call(l,v))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var N=Object.getOwnPropertyDescriptor(l,v);if(42!==N.value||!0!==N.enumerable)return!1}return!0}},6259:(se,U,l)=>{var v=l(1983);se.exports=function(){return v()&&!!Symbol.toStringTag}},3164:(se,U,l)=>{var v=l(4444);se.exports=v.call(Function.call,Object.prototype.hasOwnProperty)},3894:se=>{se.exports="function"==typeof Object.create?function(l,v){v&&(l.super_=v,l.prototype=Object.create(v.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:function(l,v){if(v){l.super_=v;var a=function(){};a.prototype=v.prototype,l.prototype=new a,l.prototype.constructor=l}}},3407:(se,U,l)=>{var v=l(6259)(),C=l(5834)("Object.prototype.toString"),M=function(B){return!(v&&B&&"object"==typeof B&&Symbol.toStringTag in B)&&"[object Arguments]"===C(B)},N=function(B){return!!M(B)||null!==B&&"object"==typeof B&&"number"==typeof B.length&&B.length>=0&&"[object Array]"!==C(B)&&"[object Function]"===C(B.callee)},L=function(){return M(arguments)}();M.isLegacyArguments=N,se.exports=L?M:N},2374:(se,U,l)=>{var v=Date.prototype.getDay,C=Object.prototype.toString,N=l(6259)();se.exports=function(j){return"object"==typeof j&&null!==j&&(N?function(j){try{return v.call(j),!0}catch{return!1}}(j):"[object Date]"===C.call(j))}},9456:se=>{se.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"==typeof process.versions&&!!process.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}},110:(se,U,l)=>{var j,v=Object.prototype.toString,a=Function.prototype.toString,C=/^\s*(?:function)?\*/,M=l(6259)(),N=Object.getPrototypeOf;se.exports=function(S){if("function"!=typeof S)return!1;if(C.test(a.call(S)))return!0;if(!M)return"[object GeneratorFunction]"===v.call(S);if(!N)return!1;if(void 0===j){var E=function(){if(!M)return!1;try{return Function("return function*() {}")()}catch{}}();j=!!E&&N(E)}return N(S)===j}},1570:se=>{var U=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l=/\/\d{1,3}(?=%|$)/,v=/\//,a=/%.*$/,C=/([^0-9a-f:/%])/i,M=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/i;function N(B){if(!U.test(B))return!1;var S=B.split(".");if(4!==S.length||"0"===S[0][0]&&S[0].length>1||"0"===S[1][0]&&S[1].length>1||"0"===S[2][0]&&S[2].length>1||"0"===S[3][0]&&S[3].length>1)return!1;var w=Number(S[0]),E=Number(S[1]),I=Number(S[2]),P=Number(S[3]);return w>=0&&w<256&&E>=0&&E<256&&I>=0&&I<256&&P>=0&&P<256}function L(B){var S=B.replace(l,""),w=B.length!==S.length;if(w||!w&&v.test(B))return!1;var E=S.replace(a,""),I=E.lastIndexOf(":");if(-1===I)return!1;var T=N(E.substring(I+1))?E.substring(0,I+1)+"1234:5678":E;if(C.test(T)||M.test(T))return!1;var b=T.split("::");if(b.length>2)return!1;if(2===b.length){var y=""===b[0]?[]:b[0].split(":"),c=""===b[1]?[]:b[1].split(":");if(8-(y.length+c.length)<=0)return!1}else if(8!==T.split(":").length)return!1;return!0}function j(B){return N(B)||L(B)}se.exports=function(S){if(S||(S={}),4===S.version)return N;if(6===S.version)return L;if(null==S.version)return j;throw new Error("Unknown version: "+S.version)},se.exports.__all_regexes__=[U,l,v,a,C,M]},1367:(se,U,l)=>{var v=l(1570),a=/\s/,C=/^[a-zA-Z0-9.-]+$/,M=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/,N=/^\+[0-9][0-9 ]{5,27}[0-9]$/,L=/ {2}/,j=/ /g;U["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(?:\.\d+|)([zZ]|[+-]\d{2}:\d{2})$/,U.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,U.time=/^\d{2}:\d{2}:\d{2}$/,U.email=function(B){return-1!==B.indexOf("@")&&!a.test(B)},U["ip-address"]=U.ipv4=v({version:4}),U.ipv6=v({version:6}),U.uri=/^[a-zA-Z][a-zA-Z0-9+\-.]*:[^\s]*$/,U.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,U.hostname=function(B){if(!C.test(B))return!1;for(var S=B.split("."),w=0;w<S.length;w++)if(!M.test(S[w]))return!1;return!0},U.alpha=/^[a-zA-Z]+$/,U.alphanumeric=/^[a-zA-Z0-9]+$/,U.style=/.:\s*[^;]/g,U.phone=function(B){if(!N.test(B)||L.test(B))return!1;var S=B.substring(1).replace(j,"").length;return S>=7&&S<=15},U["utc-millisec"]=/^[0-9]{1,15}\.?[0-9]{0,15}$/},8167:(se,U,l)=>{var v=l(2562),a=l(1227),C=l(6936),M=l(1995),N=l(1367),j={any:function(){return"true"},null:function(I){return I+" === null"},boolean:function(I){return"typeof "+I+' === "boolean"'},array:function(I){return"Array.isArray("+I+")"},object:function(I){return"typeof "+I+' === "object" && '+I+" && !Array.isArray("+I+")"},number:function(I){return"typeof "+I+' === "number" && isFinite('+I+")"},integer:function(I){return"typeof "+I+' === "number" && (Math.floor('+I+") === "+I+" || "+I+" > 9007199254740992 || "+I+" < -9007199254740992)"},string:function(I){return"typeof "+I+' === "string"'}},B=function(I,P){P=Math.min(-1===P?I.length:P,I.length);for(var R=[],T=0;T<P;T++)R.push("object"==typeof I[T]?JSON.stringify(I[T]):I[T]);for(T=1;T<R.length;T++)if(R.indexOf(R[T])!==T)return!1;return!0},S=function(I,P){var T=(0|P)!==P?Math.pow(10,P.toString().split(".").pop().length):1;return!(T>1?((0|I)!==I?Math.pow(10,I.toString().split(".").pop().length):1)>T||Math.round(T*I)%(T*P):I%P)},w=function(I,P,R){return R>-1&&P.length>R||I.test(P)},E=function(I,P,R,T,b){var y=b?M(N,b.formats):N,c={unique:B,formats:y,isMultipleOf:S,testLimitedRegex:w},o=!!b&&!!b.verbose,m=!(!b||void 0===b.greedy)&&b.greedy,d={},$=[],ne=function(X){var te=X+(d[X]=(d[X]||0)+1);return $.push(te),te},ve=function(X){var te=JSON.stringify(X);try{for(var be=/\[([^\[\]"]+)\]/;be.test(te);)te=te.replace(be,Le);return te}catch{return JSON.stringify(X)}function Le(Qe,Se){if(-1===$.indexOf(Se))throw new Error("Unreplaceable");return'." + '+Se+' + "'}},pe={},x=function(X){if(pe[X])return pe[X];var te=ne("pattern");return c[te]=new RegExp(X),pe[X]=te,te},Y=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],W=function(){var X=Y.shift();return Y.push(X+X[0]),$.push(X),X},Q=function(X,te,be,Le,Qe){var Se=te.properties,ge=te.type,oe=!1;Array.isArray(te.items)&&(Se={},te.items.forEach(function(Ot,It){Se[It]=Ot}),ge="array",oe=!0);var le=0,Oe=function(Ot,It,zt){G("errors++"),!0===be&&(G("if (validate.errors === null) validate.errors = []"),o?G("validate.errors.push({field:%s,message:%s,value:%s,type:%s,schemaPath:%s})",ve(It||X),JSON.stringify(Ot),zt||X,JSON.stringify(ge),JSON.stringify(Qe)):G("validate.errors.push({field:%s,message:%s})",ve(It||X),JSON.stringify(Ot)))};!0===te.required?(le++,G("if (%s === undefined) {",X),Oe("is required"),G("} else {")):(le++,G("if (%s !== undefined) {",X));var Ne=[].concat(ge).map(function(Ot){if(Ot&&!j.hasOwnProperty(Ot))throw new Error("Unknown type: "+Ot);return j[Ot||"any"](X)}).join(" || ")||"true";if("true"!==Ne&&(le++,G("if (!(%s)) {",Ne),Oe("is the wrong type"),G("} else {")),oe)if(!1===te.additionalItems)G("if (%s.length > %d) {",X,te.items.length),Oe("has additional items"),G("}");else if(te.additionalItems){var Ye=W();G("for (var %s = %d; %s < %s.length; %s++) {",Ye,te.items.length,Ye,X,Ye),Q(X+"["+Ye+"]",te.additionalItems,be,Le,Qe.concat("additionalItems")),G("}")}if(te.format&&y[te.format]){"string"!==ge&&N[te.format]&&G("if (%s) {",j.string(X));var mt=ne("format");c[mt]=y[te.format],"function"==typeof c[mt]?G("if (!%s(%s)) {",mt,X):G("if (!testLimitedRegex(%s, %s, %d)) {",mt,X,void 0===te.maxLength?-1:te.maxLength),Oe("must be "+te.format+" format"),G("}"),"string"!==ge&&N[te.format]&&G("}")}if(Array.isArray(te.required)&&(mt=ne("missing"),G("var %s = 0",mt),G("if ((%s)) {","object"!==ge?j.object(X):"true"),te.required.map(function(It){var zt=v(X,It);G("if (%s === undefined) {",zt),Oe("is required",zt),G("%s++",mt),G("}")}),G("}"),m||(G("if (%s === 0) {",mt),le++)),te.uniqueItems&&("array"!==ge&&G("if (%s) {",j.array(X)),G("if (!(unique(%s, %d))) {",X,te.maxItems||-1),Oe("must be unique"),G("}"),"array"!==ge&&G("}")),te.enum){var vt=te.enum.some(function(Ot){return"object"==typeof Ot});G("if (%s) {",te.enum.map(vt?function(Ot){return"JSON.stringify("+X+") !== JSON.stringify("+JSON.stringify(Ot)+")"}:function(Ot){return X+" !== "+JSON.stringify(Ot)}).join(" && ")||"false"),Oe("must be an enum value"),G("}")}if(te.dependencies&&("object"!==ge&&G("if (%s) {",j.object(X)),Object.keys(te.dependencies).forEach(function(Ot){var It=te.dependencies[Ot];"string"==typeof It&&(It=[It]),Array.isArray(It)&&(G("if (%s !== undefined && !(%s)) {",v(X,Ot),It.map(function(dr){return v(X,dr)+" !== undefined"}).join(" && ")||"true"),Oe("dependencies not set"),G("}")),"object"==typeof It&&(G("if (%s !== undefined) {",v(X,Ot)),Q(X,It,be,Le,Qe.concat(["dependencies",Ot])),G("}"))}),"object"!==ge&&G("}")),te.additionalProperties||!1===te.additionalProperties){"object"!==ge&&G("if (%s) {",j.object(X)),Ye=W();var kt=ne("keys"),gn=Object.keys(Se||{}).map(function(It){return kt+"["+Ye+"] !== "+JSON.stringify(It)}).concat(Object.keys(te.patternProperties||{}).map(function(It){return"!"+x(It)+".test("+kt+"["+Ye+"])"})).join(" && ")||"true";G("var %s = Object.keys(%s)",kt,X)("for (var %s = 0; %s < %s.length; %s++) {",Ye,Ye,kt,Ye)("if (%s) {",gn),!1===te.additionalProperties?(Le&&G("delete %s",X+"["+kt+"["+Ye+"]]"),Oe("has additional properties",null,JSON.stringify(X+".")+" + "+kt+"["+Ye+"]")):Q(X+"["+kt+"["+Ye+"]]",te.additionalProperties,be,Le,Qe.concat(["additionalProperties"])),G("}")("}"),"object"!==ge&&G("}")}if(te.$ref){var yn=function(I,P,R){var T=function(d){return d&&d.id===R?d:"object"==typeof d&&d?Object.keys(d).reduce(function($,ne){return $||T(d[ne])},null):null},b=T(I);if(b)return b;R=(R=R.replace(/^#/,"")).replace(/\/$/,"");try{return C.get(I,decodeURI(R))}catch{var c,y=R.indexOf("#");if(0!==y)if(-1===y)c=P[R];else{c=P[R.slice(0,y)];var m=R.slice(y).replace(/^#/,"");try{return C.get(c,m)}catch{}}else c=P[R];return c||null}}(R,b&&b.schemas||{},te.$ref);if(yn){var _n=P[te.$ref];_n||(P[te.$ref]=function(zt){return _n(zt)},_n=E(yn,P,R,!1,b)),mt=ne("ref"),c[mt]=_n,G("if (!(%s(%s))) {",mt,X),Oe("referenced schema does not match"),G("}")}}if(te.not){var Xt=ne("prev");G("var %s = errors",Xt),Q(X,te.not,!1,Le,Qe.concat("not")),G("if (%s === errors) {",Xt),Oe("negative schema matches"),G("} else {")("errors = %s",Xt)("}")}if(te.items&&!oe&&("array"!==ge&&G("if (%s) {",j.array(X)),Ye=W(),G("for (var %s = 0; %s < %s.length; %s++) {",Ye,Ye,X,Ye),Q(X+"["+Ye+"]",te.items,be,Le,Qe.concat("items")),G("}"),"array"!==ge&&G("}")),te.patternProperties&&("object"!==ge&&G("if (%s) {",j.object(X)),kt=ne("keys"),Ye=W(),G("var %s = Object.keys(%s)",kt,X)("for (var %s = 0; %s < %s.length; %s++) {",Ye,Ye,kt,Ye),Object.keys(te.patternProperties).forEach(function(zt){var dr=x(zt);G("if (%s.test(%s)) {",dr,kt+"["+Ye+"]"),Q(X+"["+kt+"["+Ye+"]]",te.patternProperties[zt],be,Le,Qe.concat(["patternProperties",zt])),G("}")}),G("}"),"object"!==ge&&G("}")),te.pattern){var Hn=x(te.pattern);"string"!==ge&&G("if (%s) {",j.string(X)),G("if (!(testLimitedRegex(%s, %s, %d))) {",Hn,X,void 0===te.maxLength?-1:te.maxLength),Oe("pattern mismatch"),G("}"),"string"!==ge&&G("}")}if(te.allOf&&te.allOf.forEach(function(Ot,It){Q(X,Ot,be,Le,Qe.concat(["allOf",It]))}),te.anyOf&&te.anyOf.length&&(Xt=ne("prev"),te.anyOf.forEach(function(It,zt){0===zt?G("var %s = errors",Xt):G("if (errors !== %s) {",Xt)("errors = %s",Xt),Q(X,It,!1,!1,Qe)}),te.anyOf.forEach(function(It,zt){zt&&G("}")}),G("if (%s !== errors) {",Xt),Oe("no schemas match"),G("}")),te.oneOf&&te.oneOf.length){Xt=ne("prev");var xe=ne("passes");G("var %s = errors",Xt)("var %s = 0",xe),te.oneOf.forEach(function(It,zt){Q(X,It,!1,!1,Qe),G("if (%s === errors) {",Xt)("%s++",xe)("} else {")("errors = %s",Xt)("}")}),G("if (%s !== 1) {",xe),Oe("no (or more than one) schemas match"),G("}")}for(void 0!==te.multipleOf&&("number"!==ge&&"integer"!==ge&&G("if (%s) {",j.number(X)),G("if (!isMultipleOf(%s, %d)) {",X,te.multipleOf),Oe("has a remainder"),G("}"),"number"!==ge&&"integer"!==ge&&G("}")),void 0!==te.maxProperties&&("object"!==ge&&G("if (%s) {",j.object(X)),G("if (Object.keys(%s).length > %d) {",X,te.maxProperties),Oe("has more properties than allowed"),G("}"),"object"!==ge&&G("}")),void 0!==te.minProperties&&("object"!==ge&&G("if (%s) {",j.object(X)),G("if (Object.keys(%s).length < %d) {",X,te.minProperties),Oe("has less properties than allowed"),G("}"),"object"!==ge&&G("}")),void 0!==te.maxItems&&("array"!==ge&&G("if (%s) {",j.array(X)),G("if (%s.length > %d) {",X,te.maxItems),Oe("has more items than allowed"),G("}"),"array"!==ge&&G("}")),void 0!==te.minItems&&("array"!==ge&&G("if (%s) {",j.array(X)),G("if (%s.length < %d) {",X,te.minItems),Oe("has less items than allowed"),G("}"),"array"!==ge&&G("}")),void 0!==te.maxLength&&("string"!==ge&&G("if (%s) {",j.string(X)),G("if (%s.length > %d) {",X,te.maxLength),Oe("has longer length than allowed"),G("}"),"string"!==ge&&G("}")),void 0!==te.minLength&&("string"!==ge&&G("if (%s) {",j.string(X)),G("if (%s.length < %d) {",X,te.minLength),Oe("has less length than allowed"),G("}"),"string"!==ge&&G("}")),void 0!==te.minimum&&("number"!==ge&&"integer"!==ge&&G("if (%s) {",j.number(X)),G("if (%s %s %d) {",X,te.exclusiveMinimum?"<=":"<",te.minimum),Oe("is less than minimum"),G("}"),"number"!==ge&&"integer"!==ge&&G("}")),void 0!==te.maximum&&("number"!==ge&&"integer"!==ge&&G("if (%s) {",j.number(X)),G("if (%s %s %d) {",X,te.exclusiveMaximum?">=":">",te.maximum),Oe("is more than maximum"),G("}"),"number"!==ge&&"integer"!==ge&&G("}")),Se&&Object.keys(Se).forEach(function(Ot){Array.isArray(ge)&&-1!==ge.indexOf("null")&&G("if (%s !== null) {",X),Q(v(X,Ot),Se[Ot],be,Le,Qe.concat(oe?Ot:["properties",Ot])),Array.isArray(ge)&&-1!==ge.indexOf("null")&&G("}")});le--;)G("}")},G=a("function validate(data) {")("if (data === undefined) data = null")("validate.errors = null")("var errors = 0");return Q("data",I,T,b&&b.filter,[]),G("return errors === 0")("}"),(G=G.toFunction(c)).errors=null,Object.defineProperty&&Object.defineProperty(G,"error",{get:function(){return G.errors?G.errors.map(function(X){return X.field+" "+X.message}).join("\n"):""}}),G.toJSON=function(){return I},G};se.exports=function(I,P){return"string"==typeof I&&(I=JSON.parse(I)),E(I,{},I,!0,P)},se.exports.filter=function(I,P){var R=se.exports(I,M(P,{filter:!0}));return function(T){return R(T),T}}},7549:se=>{se.exports=function(l){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(l)}},2342:(se,U,l)=>{var C,M,N,L,v=l(5834),a=l(6259)();if(a){C=v("Object.prototype.hasOwnProperty"),M=v("RegExp.prototype.exec"),N={};var j=function(){throw N};L={toString:j,valueOf:j},"symbol"==typeof Symbol.toPrimitive&&(L[Symbol.toPrimitive]=j)}var B=v("Object.prototype.toString"),S=Object.getOwnPropertyDescriptor;se.exports=a?function(I){if(!I||"object"!=typeof I)return!1;var P=S(I,"lastIndex");if(!P||!C(P,"value"))return!1;try{M(I,L)}catch(T){return T===N}}:function(I){return!(!I||"object"!=typeof I&&"function"!=typeof I)&&"[object RegExp]"===B(I)}},597:(se,U,l)=>{var v=l(9076),a=l(7029),C=l(5834),M=C("Object.prototype.toString"),N=l(6259)(),L="undefined"==typeof globalThis?global:globalThis,j=a(),B=C("Array.prototype.indexOf",!0)||function(T,b){for(var y=0;y<T.length;y+=1)if(T[y]===b)return y;return-1},S=C("String.prototype.slice"),w={},E=l(8555),I=Object.getPrototypeOf;N&&E&&I&&v(j,function(R){var T=new L[R];if(Symbol.toStringTag in T){var b=I(T),y=E(b,Symbol.toStringTag);if(!y){var c=I(b);y=E(c,Symbol.toStringTag)}w[R]=y.get}}),se.exports=function(T){if(!T||"object"!=typeof T)return!1;if(!N||!(Symbol.toStringTag in T)){var b=S(M(T),8,-1);return B(j,b)>-1}return!!E&&function(T){var b=!1;return v(w,function(y,c){if(!b)try{b=y.call(T)===c}catch{}}),b}(T)}},6936:(se,U)=>{var l=/~/,v=/~[01]/g;function a(S){switch(S){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+S)}function C(S){return l.test(S)?S.replace(v,a):S}function N(S){if("string"==typeof S){if(""===(S=S.split("/"))[0])return S;throw new Error("Invalid JSON pointer.")}if(Array.isArray(S)){for(const w of S)if("string"!=typeof w&&"number"!=typeof w)throw new Error("Invalid JSON pointer. Must be of type string or number.");return S}throw new Error("Invalid JSON pointer.")}function L(S,w){if("object"!=typeof S)throw new Error("Invalid input object.");var E=(w=N(w)).length;if(1===E)return S;for(var I=1;I<E;){if(S=S[C(w[I++])],E===I)return S;if("object"!=typeof S)return}}function j(S,w,E){if("object"!=typeof S)throw new Error("Invalid input object.");if(0===(w=N(w)).length)throw new Error("Invalid JSON pointer for set.");return function(S,w,E){for(var I,P,R=1,T=w.length;R<T;){if("constructor"===w[R]||"prototype"===w[R]||"__proto__"===w[R])return S;if(I=C(w[R++]),P=T>R,void 0===S[I]&&(Array.isArray(S)&&"-"===I&&(I=S.length),P&&(S[I]=""!==w[R]&&w[R]<1/0||"-"===w[R]?[]:{})),!P)break;S=S[I]}var b=S[I];return void 0===E?delete S[I]:S[I]=E,b}(S,w,E)}U.get=L,U.set=j,U.compile=function(S){var w=N(S);return{get:function(E){return L(E,w)},set:function(E,I){return j(E,w,I)}}}},9790:(se,U,l)=>{function v(x){return x&&"object"==typeof x&&"default"in x?x.default:x}var a=v(l(8309)),C=v(l(6952)),M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},N=Object.assign||function(x){for(var Y=1;Y<arguments.length;Y++){var W=arguments[Y];for(var Q in W)Object.prototype.hasOwnProperty.call(W,Q)&&(x[Q]=W[Q])}return x},w=function(x,Y){Object.keys(x).forEach(function(W){Y(x[W],W)})},I=function(x){return!!("undefined"!=typeof Uint8Array&&x instanceof Uint8Array||x&&x.$Uint8ArrayPolyfill)},P_each=w,R=function(Y){return Array.isArray(Y)&&!I(Y)},T=function(Y){return R(Y)||c(Y)},y=function(Y){return/^[0-9]+$/.test(Y)},c=function(x){return!(!x||"number"==typeof x||"string"==typeof x||"boolean"==typeof x||R(x)||null===x||x instanceof RegExp||"function"==typeof x||x instanceof Date||I(x))},o=function(x){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof x&&Y.field&&(x+=" for field '"+Y.field+"'");var W=new Error(x);return W.name="ModifyJsError",W},m_each=w,$=function(Y,W,Q){if(Q=Q||{},!c(W))throw o("Modifier must be an object");var X,G=function(Y,W){if(!c(Y))return!1;var Q=void 0;return P_each(Y,function(G,X){var te="$"===X.substr(0,1);if(void 0===Q)Q=te;else if(Q!==te)throw new Error("Inconsistent operator: "+JSON.stringify(Y))}),!!Q}(W=a(W));if(G?(X=a(Y),m_each(W,function(te,be){var Le=pe[be];if(!Le)throw o("Invalid modifier specified "+be);m_each(te,function(Qe,Se){if(""===Se)throw o("An empty update path is not valid.");var ge=Se.split(".");if(!function(x,Y){return x.every(function(W){return Y&&Y(W)||W})}(ge))throw o("The update path '"+Se+"' contains an empty field name, which is not allowed.");var oe=ne(X,ge,{noCreate:ve[be],forbidArray:"$rename"===be,arrayIndices:Q.arrayIndices}),le=ge.pop();Le(oe,le,Qe,Se,X)})})):X=W,Q.returnInsteadOfReplacing)return X;m_each(Object.keys(Y),function(te){"_id"!==te&&delete Y[te]}),m_each(X,function(te,be){Y[be]=te})},ne=function(Y,W,Q){Q=Q||{};for(var G=!1,X=0;X<W.length;X++){var te=X===W.length-1,be=W[X];if(!T(Y)){if(Q.noCreate)return;var Qe=o("cannot use the part '"+be+"' to traverse "+Y);throw Qe.setPropertyError=!0,Qe}if(Y instanceof Array){if(Q.forbidArray)return null;if("$"===be){if(G)throw o("Too many positional (i.e. '$') elements");if(!Q.arrayIndices||!Q.arrayIndices.length)throw o("The positional operator did not find the match needed from the query");be=Q.arrayIndices[0],G=!0}else{if(!y(be)){if(Q.noCreate)return;throw o("can't append to array using string field name ["+be+"]")}be=parseInt(be)}if(te&&(W[X]=be),Q.noCreate&&be>=Y.length)return;for(;Y.length<be;)Y.push(null);if(!te)if(Y.length===be)Y.push({});else if("object"!==M(Y[be]))throw o("can't modify field '"+W[X+1]+"' of list value "+JSON.stringify(Y[be]))}else if(!(be in Y)){if(Q.noCreate)return;te||(Y[be]={})}if(te)return Y;Y=Y[be]}},ve={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},pe={$currentDate:function(Y,W,Q){if("object"===(void 0===Q?"undefined":M(Q))&&Q.hasOwnProperty("$type")){if("date"!==Q.$type)throw o("Minimongo does currently only support the date type in $currentDate modifiers",{field:W})}else if(!0!==Q)throw o("Invalid $currentDate modifier",{field:W});Y[W]=new Date},$min:function(Y,W,Q){if("number"!=typeof Q)throw o("Modifier $min allowed for numbers only",{field:W});if(W in Y){if("number"!=typeof Y[W])throw o("Cannot apply $min modifier to non-number",{field:W});Y[W]>Q&&(Y[W]=Q)}else Y[W]=Q},$max:function(Y,W,Q){if("number"!=typeof Q)throw o("Modifier $max allowed for numbers only",{field:W});if(W in Y){if("number"!=typeof Y[W])throw o("Cannot apply $max modifier to non-number",{field:W});Y[W]<Q&&(Y[W]=Q)}else Y[W]=Q},$inc:function(Y,W,Q){if("number"!=typeof Q)throw o("Modifier $inc allowed for numbers only",{field:W});if(W in Y){if("number"!=typeof Y[W])throw o("Cannot apply $inc modifier to non-number",{field:W});Y[W]+=Q}else Y[W]=Q},$set:function(Y,W,Q){var G,x;if("object"!==(void 0===(x=Y)?"undefined":M(x))||null===x)throw(G=o("Cannot set property on non-object field",{field:W})).setPropertyError=!0,G;if(null===Y)throw(G=o("Cannot set property on null",{field:W})).setPropertyError=!0,G;Y[W]=Q},$setOnInsert:function(Y,W,Q){},$unset:function(Y,W,Q){void 0!==Y&&(Y instanceof Array?W in Y&&(Y[W]=null):delete Y[W])},$push:function(Y,W,Q){if(void 0===Y[W]&&(Y[W]=[]),!(Y[W]instanceof Array))throw o("Cannot apply $push modifier to non-array",{field:W});if(Q&&Q.$each){var G=Q.$each;if(!(G instanceof Array))throw o("$each must be an array",{field:W});var X=void 0;if("$position"in Q){if("number"!=typeof Q.$position)throw o("$position must be a numeric value",{field:W});if(Q.$position<0)throw o("$position in $push must be zero or positive",{field:W});X=Q.$position}var te=void 0;if("$slice"in Q){if("number"!=typeof Q.$slice)throw o("$slice must be a numeric value",{field:W});if(Q.$slice>0)throw o("$slice in $push must be zero or negative",{field:W});te=Q.$slice}if(Q.$sort)throw o("$sort in $push not implemented yet");if(void 0===X)for(var Le=0;Le<G.length;Le++)Y[W].push(G[Le]);else{var Qe=[X,0];for(Le=0;Le<G.length;Le++)Qe.push(G[Le]);Array.prototype.splice.apply(Y[W],Qe)}void 0!==te&&(Y[W]=0===te?[]:Y[W].slice(te))}else Y[W].push(Q)},$pushAll:function(Y,W,Q){if(!("object"===(void 0===Q?"undefined":M(Q))&&Q instanceof Array))throw o("Modifier $pushAll/pullAll allowed for arrays only");var G=Y[W];if(void 0===G)Y[W]=Q;else{if(!(G instanceof Array))throw o("Cannot apply $pushAll modifier to non-array",{field:W});for(var X=0;X<Q.length;X++)G.push(Q[X])}},$addToSet:function(Y,W,Q){var G=!1;"object"===(void 0===Q?"undefined":M(Q))&&"$each"===Object.keys(Q)[0]&&(G=!0);var te=G?Q.$each:[Q],be=Y[W];if(void 0===be)Y[W]=te;else{if(!(be instanceof Array))throw o("Cannot apply $addToSet modifier to non-array",{field:W});m_each(te,function(Le){for(var Qe=0;Qe<be.length;Qe++)if(C(Le,be[Qe]))return;be.push(Le)})}},$pop:function(Y,W,Q){if(void 0!==Y){var G=Y[W];if(void 0!==G){if(!(G instanceof Array))throw o("Cannot apply $pop modifier to non-array",{field:W});"number"==typeof Q&&Q<0?G.splice(0,1):G.pop()}}},$pull:function(Y,W,Q){if(void 0!==Y){var G=Y[W];if(void 0!==G)throw G instanceof Array?o("$pull not implemented yet"):o("Cannot apply $pull/pullAll modifier to non-array",{field:W})}},$pullAll:function(Y,W,Q){if(!("object"===(void 0===Q?"undefined":M(Q))&&Q instanceof Array))throw o("Modifier $pushAll/pullAll allowed for arrays only",{field:W});if(void 0!==Y){var G=Y[W];if(void 0!==G){if(!(G instanceof Array))throw o("Cannot apply $pull/pullAll modifier to non-array",{field:W});for(var X=[],te=0;te<G.length;te++){for(var be=!1,Le=0;Le<Q.length;Le++)if(C(G[te],Q[Le])){be=!0;break}be||X.push(G[te])}Y[W]=X}}},$rename:function(Y,W,Q,G,X){if(G===Q)throw o("$rename source must differ from target",{field:W});if(null===Y)throw o("$rename source field invalid",{field:W});if("string"!=typeof Q)throw o("$rename target must be a string",{field:W});if(Q.indexOf("\0")>-1)throw o("The 'to' field for $rename cannot contain an embedded null byte",{field:W});if(void 0!==Y){var te=Y[W];delete Y[W];var be=Q.split("."),Le=ne(X,be,{forbidArray:!0});if(null===Le)throw o("$rename target field invalid",{field:W});Le[be.pop()]=te}},$bit:function(Y,W,Q){throw o("$bit is not supported",{field:W})}};se.exports=function(x,Y,W){if(!W||!W.each)return $(x,Y,N({},W,{returnInsteadOfReplacing:!0}))}},8309:se=>{var U=function(){"use strict";function l(w,E){return null!=E&&w instanceof E}var v,a,C;try{v=Map}catch{v=function(){}}try{a=Set}catch{a=function(){}}try{C=Promise}catch{C=function(){}}function M(w,E,I,P,R){"object"==typeof E&&(I=E.depth,P=E.prototype,R=E.includeNonEnumerable,E=E.circular);var T=[],b=[],y="undefined"!=typeof Buffer;return void 0===E&&(E=!0),void 0===I&&(I=1/0),function c(o,m){if(null===o)return null;if(0===m)return o;var d,$;if("object"!=typeof o)return o;if(l(o,v))d=new v;else if(l(o,a))d=new a;else if(l(o,C))d=new C(function(X,te){o.then(function(be){X(c(be,m-1))},function(be){te(c(be,m-1))})});else if(M.__isArray(o))d=[];else if(M.__isRegExp(o))d=new RegExp(o.source,S(o)),o.lastIndex&&(d.lastIndex=o.lastIndex);else if(M.__isDate(o))d=new Date(o.getTime());else{if(y&&Buffer.isBuffer(o))return d=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(d),d;l(o,Error)?d=Object.create(o):void 0===P?($=Object.getPrototypeOf(o),d=Object.create($)):(d=Object.create(P),$=P)}if(E){var ne=T.indexOf(o);if(-1!=ne)return b[ne];T.push(o),b.push(d)}for(var ve in l(o,v)&&o.forEach(function(X,te){var be=c(te,m-1),Le=c(X,m-1);d.set(be,Le)}),l(o,a)&&o.forEach(function(X){var te=c(X,m-1);d.add(te)}),o){var pe;$&&(pe=Object.getOwnPropertyDescriptor($,ve)),(!pe||null!=pe.set)&&(d[ve]=c(o[ve],m-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(o);for(ve=0;ve<x.length;ve++){var Y=x[ve];(W=Object.getOwnPropertyDescriptor(o,Y))&&!W.enumerable&&!R||(d[Y]=c(o[Y],m-1),W.enumerable||Object.defineProperty(d,Y,{enumerable:!1}))}}if(R){var Q=Object.getOwnPropertyNames(o);for(ve=0;ve<Q.length;ve++){var W,G=Q[ve];(W=Object.getOwnPropertyDescriptor(o,G))&&W.enumerable||(d[G]=c(o[G],m-1),Object.defineProperty(d,G,{enumerable:!1}))}}return d}(w,I)}function N(w){return Object.prototype.toString.call(w)}function S(w){var E="";return w.global&&(E+="g"),w.ignoreCase&&(E+="i"),w.multiline&&(E+="m"),E}return M.clonePrototype=function(E){if(null===E)return null;var I=function(){};return I.prototype=E,new I},M.__objToStr=N,M.__isDate=function(w){return"object"==typeof w&&"[object Date]"===N(w)},M.__isArray=function(w){return"object"==typeof w&&"[object Array]"===N(w)},M.__isRegExp=function(w){return"object"==typeof w&&"[object RegExp]"===N(w)},M.__getRegExpFlags=S,M}();se.exports&&(se.exports=U)},1175:se=>{var U=function(l){return l!=l};se.exports=function(v,a){return 0===v&&0===a?1/v==1/a:!!(v===a||U(v)&&U(a))}},2e3:(se,U,l)=>{var v=l(2358),a=l(5685),C=l(1175),M=l(6305),N=l(3859),L=a(M(),Object);v(L,{getPolyfill:M,implementation:C,shim:N}),se.exports=L},6305:(se,U,l)=>{var v=l(1175);se.exports=function(){return"function"==typeof Object.is?Object.is:v}},3859:(se,U,l)=>{var v=l(6305),a=l(2358);se.exports=function(){var M=v();return a(Object,{is:M},{is:function(){return Object.is!==M}}),M}},2450:(se,U,l)=>{var v;if(!Object.keys){var a=Object.prototype.hasOwnProperty,C=Object.prototype.toString,M=l(9978),N=Object.prototype.propertyIsEnumerable,L=!N.call({toString:null},"toString"),j=N.call(function(){},"prototype"),B=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],S=function(P){var R=P.constructor;return R&&R.prototype===P},w={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},E=function(){if("undefined"==typeof window)return!1;for(var P in window)try{if(!w["$"+P]&&a.call(window,P)&&null!==window[P]&&"object"==typeof window[P])try{S(window[P])}catch{return!0}}catch{return!0}return!1}();v=function(R){var T=null!==R&&"object"==typeof R,b="[object Function]"===C.call(R),y=M(R),c=T&&"[object String]"===C.call(R),o=[];if(!T&&!b&&!y)throw new TypeError("Object.keys called on a non-object");var m=j&&b;if(c&&R.length>0&&!a.call(R,0))for(var d=0;d<R.length;++d)o.push(String(d));if(y&&R.length>0)for(var $=0;$<R.length;++$)o.push(String($));else for(var ne in R)(!m||"prototype"!==ne)&&a.call(R,ne)&&o.push(String(ne));if(L)for(var ve=function(P){if("undefined"==typeof window||!E)return S(P);try{return S(P)}catch{return!1}}(R),pe=0;pe<B.length;++pe)(!ve||"constructor"!==B[pe])&&a.call(R,B[pe])&&o.push(B[pe]);return o}}se.exports=v},1356:(se,U,l)=>{var v=Array.prototype.slice,a=l(9978),C=Object.keys,M=C?function(j){return C(j)}:l(2450),N=Object.keys;M.shim=function(){if(Object.keys){var j=function(){var B=Object.keys(arguments);return B&&B.length===arguments.length}(1,2);j||(Object.keys=function(S){return a(S)?N(v.call(S)):N(S)})}else Object.keys=M;return Object.keys||M},se.exports=M},9978:se=>{var U=Object.prototype.toString;se.exports=function(v){var a=U.call(v),C="[object Arguments]"===a;return C||(C="[object Array]"!==a&&null!==v&&"object"==typeof v&&"number"==typeof v.length&&v.length>=0&&"[object Function]"===U.call(v.callee)),C}},8624:function(se,U){var l,v,a;!function(C,M){"use strict";"object"==typeof se.exports?se.exports=M():(v=[],void 0!==(a="function"==typeof(l=M)?l.apply(U,v):l)&&(se.exports=a))}(0,function(){"use strict";var C=Object.prototype.toString;function M(P,R){return null!=P&&Object.prototype.hasOwnProperty.call(P,R)}function N(P){if(!P||B(P)&&0===P.length)return!0;if("string"!=typeof P){for(var R in P)if(M(P,R))return!1;return!0}return!1}function L(P){return C.call(P)}var B=Array.isArray||function(P){return"[object Array]"===C.call(P)};function w(P){var R=parseInt(P);return R.toString()===P?R:P}function E(P){var T,y,R=function(o){return Object.keys(R).reduce(function(m,d){return"create"===d||"function"==typeof R[d]&&(m[d]=R[d].bind(R,o)),m},{})};function b(o,m){if(T(o,m))return o[m]}function c(o,m,d,$){if("number"==typeof m&&(m=[m]),!m||0===m.length)return o;if("string"==typeof m)return c(o,m.split(".").map(w),d,$);var ne=m[0],ve=y(o,ne);return 1===m.length?((void 0===ve||!$)&&(o[ne]=d),ve):(void 0===ve&&(o[ne]="number"==typeof m[1]?[]:{}),c(o[ne],m.slice(1),d,$))}return T=(P=P||{}).includeInheritedProps?function(){return!0}:function(o,m){return"number"==typeof m&&Array.isArray(o)||M(o,m)},y=P.includeInheritedProps?function(o,m){"string"!=typeof m&&"number"!=typeof m&&(m=String(m));var d=b(o,m);if("__proto__"===m||"prototype"===m||"constructor"===m&&"function"==typeof d)throw new Error("For security reasons, object's magic properties cannot be set");return d}:function(o,m){return b(o,m)},R.has=function(o,m){if("number"==typeof m?m=[m]:"string"==typeof m&&(m=m.split(".")),!m||0===m.length)return!!o;for(var d=0;d<m.length;d++){var $=w(m[d]);if(!("number"==typeof $&&B(o)&&$<o.length||(P.includeInheritedProps?$ in Object(o):M(o,$))))return!1;o=o[$]}return!0},R.ensureExists=function(o,m,d){return c(o,m,d,!0)},R.set=function(o,m,d,$){return c(o,m,d,$)},R.insert=function(o,m,d,$){var ne=R.get(o,m);$=~~$,B(ne)||R.set(o,m,ne=[]),ne.splice($,0,d)},R.empty=function(o,m){var d,$;if(!N(m)&&null!=o&&(d=R.get(o,m))){if("string"==typeof d)return R.set(o,m,"");if(function(P){return"boolean"==typeof P||"[object Boolean]"===L(P)}(d))return R.set(o,m,!1);if("number"==typeof d)return R.set(o,m,0);if(B(d))d.length=0;else{if(!function(P){return"object"==typeof P&&"[object Object]"===L(P)}(d))return R.set(o,m,null);for($ in d)T(d,$)&&delete d[$]}}},R.push=function(o,m){var d=R.get(o,m);B(d)||R.set(o,m,d=[]),d.push.apply(d,Array.prototype.slice.call(arguments,2))},R.coalesce=function(o,m,d){for(var $,ne=0,ve=m.length;ne<ve;ne++)if(void 0!==($=R.get(o,m[ne])))return $;return d},R.get=function(o,m,d){if("number"==typeof m&&(m=[m]),!m||0===m.length)return o;if(null==o)return d;if("string"==typeof m)return R.get(o,m.split("."),d);var $=w(m[0]),ne=y(o,$);return void 0===ne?d:1===m.length?ne:R.get(o[$],m.slice(1),d)},R.del=function(m,d){if("number"==typeof d&&(d=[d]),null==m||N(d))return m;if("string"==typeof d)return R.del(m,d.split("."));var $=w(d[0]);return y(m,$),T(m,$)?1!==d.length?R.del(m[$],d.slice(1)):(B(m)?m.splice($,1):delete m[$],m):m},R}var I=E();return I.create=E,I.withInheritedProps=E({includeInheritedProps:!0}),I})},3625:se=>{se.exports=function(U){"use strict";var v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function C(b,y){var c=b[0],o=b[1],m=b[2],d=b[3];o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[0]-680876936|0)<<7|c>>>25)+o|0)&o|~c&m)+y[1]-389564586|0)<<12|d>>>20)+c|0)&c|~d&o)+y[2]+606105819|0)<<17|m>>>15)+d|0)&d|~m&c)+y[3]-1044525330|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[4]-176418897|0)<<7|c>>>25)+o|0)&o|~c&m)+y[5]+1200080426|0)<<12|d>>>20)+c|0)&c|~d&o)+y[6]-1473231341|0)<<17|m>>>15)+d|0)&d|~m&c)+y[7]-45705983|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[8]+1770035416|0)<<7|c>>>25)+o|0)&o|~c&m)+y[9]-1958414417|0)<<12|d>>>20)+c|0)&c|~d&o)+y[10]-42063|0)<<17|m>>>15)+d|0)&d|~m&c)+y[11]-1990404162|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[12]+1804603682|0)<<7|c>>>25)+o|0)&o|~c&m)+y[13]-40341101|0)<<12|d>>>20)+c|0)&c|~d&o)+y[14]-1502002290|0)<<17|m>>>15)+d|0)&d|~m&c)+y[15]+1236535329|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[1]-165796510|0)<<5|c>>>27)+o|0)&m|o&~m)+y[6]-1069501632|0)<<9|d>>>23)+c|0)&o|c&~o)+y[11]+643717713|0)<<14|m>>>18)+d|0)&c|d&~c)+y[0]-373897302|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[5]-701558691|0)<<5|c>>>27)+o|0)&m|o&~m)+y[10]+38016083|0)<<9|d>>>23)+c|0)&o|c&~o)+y[15]-660478335|0)<<14|m>>>18)+d|0)&c|d&~c)+y[4]-405537848|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[9]+568446438|0)<<5|c>>>27)+o|0)&m|o&~m)+y[14]-1019803690|0)<<9|d>>>23)+c|0)&o|c&~o)+y[3]-187363961|0)<<14|m>>>18)+d|0)&c|d&~c)+y[8]+1163531501|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[13]-1444681467|0)<<5|c>>>27)+o|0)&m|o&~m)+y[2]-51403784|0)<<9|d>>>23)+c|0)&o|c&~o)+y[7]+1735328473|0)<<14|m>>>18)+d|0)&c|d&~c)+y[12]-1926607734|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[5]-378558|0)<<4|c>>>28)+o|0)^o^m)+y[8]-2022574463|0)<<11|d>>>21)+c|0)^c^o)+y[11]+1839030562|0)<<16|m>>>16)+d|0)^d^c)+y[14]-35309556|0)<<23|o>>>9)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[1]-1530992060|0)<<4|c>>>28)+o|0)^o^m)+y[4]+1272893353|0)<<11|d>>>21)+c|0)^c^o)+y[7]-155497632|0)<<16|m>>>16)+d|0)^d^c)+y[10]-1094730640|0)<<23|o>>>9)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[13]+681279174|0)<<4|c>>>28)+o|0)^o^m)+y[0]-358537222|0)<<11|d>>>21)+c|0)^c^o)+y[3]-722521979|0)<<16|m>>>16)+d|0)^d^c)+y[6]+76029189|0)<<23|o>>>9)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[9]-640364487|0)<<4|c>>>28)+o|0)^o^m)+y[12]-421815835|0)<<11|d>>>21)+c|0)^c^o)+y[15]+530742520|0)<<16|m>>>16)+d|0)^d^c)+y[2]-995338651|0)<<23|o>>>9)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[0]-198630844|0)<<6|c>>>26)+o|0)|~m))+y[7]+1126891415|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[14]-1416354905|0)<<15|m>>>17)+d|0)|~c))+y[5]-57434055|0)<<21|o>>>11)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[12]+1700485571|0)<<6|c>>>26)+o|0)|~m))+y[3]-1894986606|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[10]-1051523|0)<<15|m>>>17)+d|0)|~c))+y[1]-2054922799|0)<<21|o>>>11)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[8]+1873313359|0)<<6|c>>>26)+o|0)|~m))+y[15]-30611744|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[6]-1560198380|0)<<15|m>>>17)+d|0)|~c))+y[13]+1309151649|0)<<21|o>>>11)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[4]-145523070|0)<<6|c>>>26)+o|0)|~m))+y[11]-1120210379|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[2]+718787259|0)<<15|m>>>17)+d|0)|~c))+y[9]-343485551|0)<<21|o>>>11)+m|0,b[0]=c+b[0]|0,b[1]=o+b[1]|0,b[2]=m+b[2]|0,b[3]=d+b[3]|0}function M(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b.charCodeAt(c)+(b.charCodeAt(c+1)<<8)+(b.charCodeAt(c+2)<<16)+(b.charCodeAt(c+3)<<24);return y}function N(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b[c]+(b[c+1]<<8)+(b[c+2]<<16)+(b[c+3]<<24);return y}function L(b){var o,m,d,$,ne,ve,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)C(c,M(b.substring(o-64,o)));for(m=(b=b.substring(o-64)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<m;o+=1)d[o>>2]|=b.charCodeAt(o)<<(o%4<<3);if(d[o>>2]|=128<<(o%4<<3),o>55)for(C(c,d),o=0;o<16;o+=1)d[o]=0;return $=($=8*y).toString(16).match(/(.*?)(.{0,8})$/),ne=parseInt($[2],16),ve=parseInt($[1],16)||0,d[14]=ne,d[15]=ve,C(c,d),c}function B(b){var c,y="";for(c=0;c<4;c+=1)y+=v[b>>8*c+4&15]+v[b>>8*c&15];return y}function S(b){var y;for(y=0;y<b.length;y+=1)b[y]=B(b[y]);return b.join("")}function w(b){return/[\u0080-\uFFFF]/.test(b)&&(b=unescape(encodeURIComponent(b))),b}function R(b){var o,y=[],c=b.length;for(o=0;o<c-1;o+=2)y.push(parseInt(b.substr(o,2),16));return String.fromCharCode.apply(String,y)}function T(){this.reset()}return S(L("hello")),"undefined"!=typeof ArrayBuffer&&!ArrayBuffer.prototype.slice&&function(){function b(y,c){return(y=0|y||0)<0?Math.max(y+c,0):Math.min(y,c)}ArrayBuffer.prototype.slice=function(y,c){var $,ne,ve,pe,o=this.byteLength,m=b(y,o),d=o;return undefined!==c&&(d=b(c,o)),m>d?new ArrayBuffer(0):($=d-m,ne=new ArrayBuffer($),ve=new Uint8Array(ne),pe=new Uint8Array(this,m,$),ve.set(pe),ne)}}(),T.prototype.append=function(b){return this.appendBinary(w(b)),this},T.prototype.appendBinary=function(b){this._buff+=b,this._length+=b.length;var c,y=this._buff.length;for(c=64;c<=y;c+=64)C(this._hash,M(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},T.prototype.end=function(b){var o,d,y=this._buff,c=y.length,m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<c;o+=1)m[o>>2]|=y.charCodeAt(o)<<(o%4<<3);return this._finish(m,c),d=S(this._hash),b&&(d=R(d)),this.reset(),d},T.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},T.prototype.setState=function(b){return this._buff=b.buff,this._length=b.length,this._hash=b.hash,this},T.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},T.prototype._finish=function(b,y){var o,m,d,c=y;if(b[c>>2]|=128<<(c%4<<3),c>55)for(C(this._hash,b),c=0;c<16;c+=1)b[c]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),m=parseInt(o[2],16),d=parseInt(o[1],16)||0,b[14]=m,b[15]=d,C(this._hash,b)},T.hash=function(b,y){return T.hashBinary(w(b),y)},T.hashBinary=function(b,y){var o=S(L(b));return y?R(o):o},(T.ArrayBuffer=function(){this.reset()}).prototype.append=function(b){var o,y=function(b,y,c){var o=new Uint8Array(b.byteLength+y.byteLength);return o.set(new Uint8Array(b)),o.set(new Uint8Array(y),b.byteLength),c?o:o.buffer}(this._buff.buffer,b,!0),c=y.length;for(this._length+=b.byteLength,o=64;o<=c;o+=64)C(this._hash,N(y.subarray(o-64,o)));return this._buff=o-64<c?new Uint8Array(y.buffer.slice(o-64)):new Uint8Array(0),this},T.ArrayBuffer.prototype.end=function(b){var m,d,y=this._buff,c=y.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(m=0;m<c;m+=1)o[m>>2]|=y[m]<<(m%4<<3);return this._finish(o,c),d=S(this._hash),b&&(d=R(d)),this.reset(),d},T.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.ArrayBuffer.prototype.getState=function(){var b=T.prototype.getState.call(this);return b.buff=function(b){return String.fromCharCode.apply(null,new Uint8Array(b))}(b.buff),b},T.ArrayBuffer.prototype.setState=function(b){return b.buff=function(b,y){var d,c=b.length,o=new ArrayBuffer(c),m=new Uint8Array(o);for(d=0;d<c;d+=1)m[d]=b.charCodeAt(d);return y?m:o}(b.buff,!0),T.prototype.setState.call(this,b)},T.ArrayBuffer.prototype.destroy=T.prototype.destroy,T.ArrayBuffer.prototype._finish=T.prototype._finish,T.ArrayBuffer.hash=function(b,y){var o=S(function(b){var o,m,d,$,ne,ve,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)C(c,N(b.subarray(o-64,o)));for(m=(b=o-64<y?b.subarray(o-64):new Uint8Array(0)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<m;o+=1)d[o>>2]|=b[o]<<(o%4<<3);if(d[o>>2]|=128<<(o%4<<3),o>55)for(C(c,d),o=0;o<16;o+=1)d[o]=0;return $=($=8*y).toString(16).match(/(.*?)(.{0,8})$/),ne=parseInt($[2],16),ve=parseInt($[1],16)||0,d[14]=ne,d[15]=ve,C(c,d),c}(new Uint8Array(b)));return y?R(o):o},T}()},2302:(se,U,l)=>{var a,C,v=[l(4703),l(3328),l(6139),l(5675),l(1767),l(3259)],M=-1,N=[],L=!1;function j(){!a||!C||(a=!1,C.length?N=C.concat(N):M=-1,N.length&&B())}function B(){if(!a){L=!1,a=!0;for(var R=N.length,T=setTimeout(j);R;){for(C=N,N=[];C&&++M<R;)C[M].run();M=-1,R=N.length}C=null,M=-1,a=!1,clearTimeout(T)}}for(var S,w=-1,E=v.length;++w<E;)if(v[w]&&v[w].test&&v[w].test()){S=v[w].install(B);break}function I(R,T){this.fun=R,this.array=T}I.prototype.run=function(){var R=this.fun,T=this.array;switch(T.length){case 0:return R();case 1:return R(T[0]);case 2:return R(T[0],T[1]);case 3:return R(T[0],T[1],T[2]);default:return R.apply(null,T)}},se.exports=function(R){var T=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)T[b-1]=arguments[b];N.push(new I(R,T)),!L&&!a&&(L=!0,S())}},5675:(se,U)=>{U.test=function(){return!global.setImmediate&&void 0!==global.MessageChannel},U.install=function(l){var v=new global.MessageChannel;return v.port1.onmessage=l,function(){v.port2.postMessage(0)}}},6139:(se,U)=>{var l=global.MutationObserver||global.WebKitMutationObserver;U.test=function(){return l},U.install=function(v){var a=0,C=new l(v),M=global.document.createTextNode("");return C.observe(M,{characterData:!0}),function(){M.data=a=++a%2}}},3328:(se,U)=>{U.test=function(){return"function"==typeof global.queueMicrotask},U.install=function(l){return function(){global.queueMicrotask(l)}}},1767:(se,U)=>{U.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")},U.install=function(l){return function(){var v=global.document.createElement("script");return v.onreadystatechange=function(){l(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},global.document.documentElement.appendChild(v),l}}},3259:(se,U)=>{U.test=function(){return!0},U.install=function(l){return function(){setTimeout(l,0)}}},2448:(se,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;const l=[];for(let C=0;C<256;++C)l.push((C+256).toString(16).substr(1));U.default=function(C,M){const N=M||0;return(l[C[N+0]]+l[C[N+1]]+l[C[N+2]]+l[C[N+3]]+"-"+l[C[N+4]]+l[C[N+5]]+"-"+l[C[N+6]]+l[C[N+7]]+"-"+l[C[N+8]]+l[C[N+9]]+"-"+l[C[N+10]]+l[C[N+11]]+l[C[N+12]]+l[C[N+13]]+l[C[N+14]]+l[C[N+15]]).toLowerCase()}},3306:(se,U,l)=>{Object.defineProperty(U,"v1",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(U,"v3",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(U,"v4",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(U,"v5",{enumerable:!0,get:function(){return N.default}});var a=L(l(9110)),C=L(l(8693)),M=L(l(491)),N=L(l(8518));function L(j){return j&&j.__esModule?j:{default:j}}},872:(se,U)=>{function a(P){return 14+(P+64>>>9<<4)+1}function N(P,R){const T=(65535&P)+(65535&R);return(P>>16)+(R>>16)+(T>>16)<<16|65535&T}function j(P,R,T,b,y,c){return N(function(P,R){return P<<R|P>>>32-R}(N(N(R,P),N(b,c)),y),T)}function B(P,R,T,b,y,c,o){return j(R&T|~R&b,P,R,y,c,o)}function S(P,R,T,b,y,c,o){return j(R&b|T&~b,P,R,y,c,o)}function w(P,R,T,b,y,c,o){return j(R^T^b,P,R,y,c,o)}function E(P,R,T,b,y,c,o){return j(T^(R|~b),P,R,y,c,o)}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(P){if("string"==typeof P){const R=unescape(encodeURIComponent(P));P=new Uint8Array(R.length);for(let T=0;T<R.length;++T)P[T]=R.charCodeAt(T)}return function(P){const R=[],T=32*P.length,b="0123456789abcdef";for(let y=0;y<T;y+=8){const c=P[y>>5]>>>y%32&255,o=parseInt(b.charAt(c>>>4&15)+b.charAt(15&c),16);R.push(o)}return R}(function(P,R){P[R>>5]|=128<<R%32,P[a(R)-1]=R;let T=1732584193,b=-271733879,y=-1732584194,c=271733878;for(let o=0;o<P.length;o+=16){const m=T,d=b,$=y,ne=c;T=B(T,b,y,c,P[o],7,-680876936),c=B(c,T,b,y,P[o+1],12,-389564586),y=B(y,c,T,b,P[o+2],17,606105819),b=B(b,y,c,T,P[o+3],22,-1044525330),T=B(T,b,y,c,P[o+4],7,-176418897),c=B(c,T,b,y,P[o+5],12,1200080426),y=B(y,c,T,b,P[o+6],17,-1473231341),b=B(b,y,c,T,P[o+7],22,-45705983),T=B(T,b,y,c,P[o+8],7,1770035416),c=B(c,T,b,y,P[o+9],12,-1958414417),y=B(y,c,T,b,P[o+10],17,-42063),b=B(b,y,c,T,P[o+11],22,-1990404162),T=B(T,b,y,c,P[o+12],7,1804603682),c=B(c,T,b,y,P[o+13],12,-40341101),y=B(y,c,T,b,P[o+14],17,-1502002290),b=B(b,y,c,T,P[o+15],22,1236535329),T=S(T,b,y,c,P[o+1],5,-165796510),c=S(c,T,b,y,P[o+6],9,-1069501632),y=S(y,c,T,b,P[o+11],14,643717713),b=S(b,y,c,T,P[o],20,-373897302),T=S(T,b,y,c,P[o+5],5,-701558691),c=S(c,T,b,y,P[o+10],9,38016083),y=S(y,c,T,b,P[o+15],14,-660478335),b=S(b,y,c,T,P[o+4],20,-405537848),T=S(T,b,y,c,P[o+9],5,568446438),c=S(c,T,b,y,P[o+14],9,-1019803690),y=S(y,c,T,b,P[o+3],14,-187363961),b=S(b,y,c,T,P[o+8],20,1163531501),T=S(T,b,y,c,P[o+13],5,-1444681467),c=S(c,T,b,y,P[o+2],9,-51403784),y=S(y,c,T,b,P[o+7],14,1735328473),b=S(b,y,c,T,P[o+12],20,-1926607734),T=w(T,b,y,c,P[o+5],4,-378558),c=w(c,T,b,y,P[o+8],11,-2022574463),y=w(y,c,T,b,P[o+11],16,1839030562),b=w(b,y,c,T,P[o+14],23,-35309556),T=w(T,b,y,c,P[o+1],4,-1530992060),c=w(c,T,b,y,P[o+4],11,1272893353),y=w(y,c,T,b,P[o+7],16,-155497632),b=w(b,y,c,T,P[o+10],23,-1094730640),T=w(T,b,y,c,P[o+13],4,681279174),c=w(c,T,b,y,P[o],11,-358537222),y=w(y,c,T,b,P[o+3],16,-722521979),b=w(b,y,c,T,P[o+6],23,76029189),T=w(T,b,y,c,P[o+9],4,-640364487),c=w(c,T,b,y,P[o+12],11,-421815835),y=w(y,c,T,b,P[o+15],16,530742520),b=w(b,y,c,T,P[o+2],23,-995338651),T=E(T,b,y,c,P[o],6,-198630844),c=E(c,T,b,y,P[o+7],10,1126891415),y=E(y,c,T,b,P[o+14],15,-1416354905),b=E(b,y,c,T,P[o+5],21,-57434055),T=E(T,b,y,c,P[o+12],6,1700485571),c=E(c,T,b,y,P[o+3],10,-1894986606),y=E(y,c,T,b,P[o+10],15,-1051523),b=E(b,y,c,T,P[o+1],21,-2054922799),T=E(T,b,y,c,P[o+8],6,1873313359),c=E(c,T,b,y,P[o+15],10,-30611744),y=E(y,c,T,b,P[o+6],15,-1560198380),b=E(b,y,c,T,P[o+13],21,1309151649),T=E(T,b,y,c,P[o+4],6,-145523070),c=E(c,T,b,y,P[o+11],10,-1120210379),y=E(y,c,T,b,P[o+2],15,718787259),b=E(b,y,c,T,P[o+9],21,-343485551),T=N(T,m),b=N(b,d),y=N(y,$),c=N(c,ne)}return[T,b,y,c]}(function(P){if(0===P.length)return[];const R=8*P.length,T=new Uint32Array(a(R));for(let b=0;b<R;b+=8)T[b>>5]|=(255&P[b/8])<<b%32;return T}(P),8*P.length))}},5468:(se,U)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=function(){if(!l)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(v)};const l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),v=new Uint8Array(16)},209:(se,U)=>{function l(M,N,L,j){switch(M){case 0:return N&L^~N&j;case 1:case 3:return N^L^j;case 2:return N&L^N&j^L&j}}function v(M,N){return M<<N|M>>>32-N}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0,U.default=function(M){const N=[1518500249,1859775393,2400959708,3395469782],L=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof M){const w=unescape(encodeURIComponent(M));M=[];for(let E=0;E<w.length;++E)M.push(w.charCodeAt(E))}M.push(128);const B=Math.ceil((M.length/4+2)/16),S=new Array(B);for(let w=0;w<B;++w){const E=new Uint32Array(16);for(let I=0;I<16;++I)E[I]=M[64*w+4*I]<<24|M[64*w+4*I+1]<<16|M[64*w+4*I+2]<<8|M[64*w+4*I+3];S[w]=E}S[B-1][14]=8*(M.length-1)/Math.pow(2,32),S[B-1][14]=Math.floor(S[B-1][14]),S[B-1][15]=8*(M.length-1)&4294967295;for(let w=0;w<B;++w){const E=new Uint32Array(80);for(let y=0;y<16;++y)E[y]=S[w][y];for(let y=16;y<80;++y)E[y]=v(E[y-3]^E[y-8]^E[y-14]^E[y-16],1);let I=L[0],P=L[1],R=L[2],T=L[3],b=L[4];for(let y=0;y<80;++y){const c=Math.floor(y/20),o=v(I,5)+l(c,P,R,T)+b+N[c]+E[y]>>>0;b=T,T=R,R=v(P,30)>>>0,P=I,I=o}L[0]=L[0]+I>>>0,L[1]=L[1]+P>>>0,L[2]=L[2]+R>>>0,L[3]=L[3]+T>>>0,L[4]=L[4]+b>>>0}return[L[0]>>24&255,L[0]>>16&255,L[0]>>8&255,255&L[0],L[1]>>24&255,L[1]>>16&255,L[1]>>8&255,255&L[1],L[2]>>24&255,L[2]>>16&255,L[2]>>8&255,255&L[2],L[3]>>24&255,L[3]>>16&255,L[3]>>8&255,255&L[3],L[4]>>24&255,L[4]>>16&255,L[4]>>8&255,255&L[4]]}},9110:(se,U,l)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var v=C(l(5468)),a=C(l(2448));function C(w){return w&&w.__esModule?w:{default:w}}let M,N,L=0,j=0;U.default=function(w,E,I){let P=E&&I||0;const R=E||[];let T=(w=w||{}).node||M,b=void 0!==w.clockseq?w.clockseq:N;if(null==T||null==b){const $=w.random||(w.rng||v.default)();null==T&&(T=M=[1|$[0],$[1],$[2],$[3],$[4],$[5]]),null==b&&(b=N=16383&($[6]<<8|$[7]))}let y=void 0!==w.msecs?w.msecs:Date.now(),c=void 0!==w.nsecs?w.nsecs:j+1;const o=y-L+(c-j)/1e4;if(o<0&&void 0===w.clockseq&&(b=b+1&16383),(o<0||y>L)&&void 0===w.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");L=y,j=c,N=b,y+=122192928e5;const m=(1e4*(268435455&y)+c)%4294967296;R[P++]=m>>>24&255,R[P++]=m>>>16&255,R[P++]=m>>>8&255,R[P++]=255&m;const d=y/4294967296*1e4&268435455;R[P++]=d>>>8&255,R[P++]=255&d,R[P++]=d>>>24&15|16,R[P++]=d>>>16&255,R[P++]=b>>>8|128,R[P++]=255&b;for(let $=0;$<6;++$)R[P+$]=T[$];return E||(0,a.default)(R)}},8693:(se,U,l)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var v=C(l(1657)),a=C(l(872));function C(L){return L&&L.__esModule?L:{default:L}}var N=(0,v.default)("v3",48,a.default);U.default=N},1657:(se,U,l)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=function(B,S,w){function E(I,P,R,T){const b=R&&T||0;if("string"==typeof I&&(I=function(B){B=unescape(encodeURIComponent(B));const S=[];for(let w=0;w<B.length;++w)S.push(B.charCodeAt(w));return S}(I)),"string"==typeof P&&(P=function(B){const S=[];return B.replace(/[a-fA-F0-9]{2}/g,function(w){S.push(parseInt(w,16))}),S}(P)),!Array.isArray(I))throw TypeError("value must be an array of bytes");if(!Array.isArray(P)||16!==P.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");const y=w(P.concat(I));if(y[6]=15&y[6]|S,y[8]=63&y[8]|128,R)for(let c=0;c<16;++c)R[b+c]=y[c];return R||(0,v.default)(y)}try{E.name=B}catch{}return E.DNS=N,E.URL=L,E},U.URL=U.DNS=void 0;var B,v=(B=l(2448))&&B.__esModule?B:{default:B};const N="6ba7b810-9dad-11d1-80b4-00c04fd430c8";U.DNS=N;const L="6ba7b811-9dad-11d1-80b4-00c04fd430c8";U.URL=L},491:(se,U,l)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var v=C(l(5468)),a=C(l(2448));function C(L){return L&&L.__esModule?L:{default:L}}U.default=function(L,j,B){"string"==typeof L&&(j="binary"===L?new Uint8Array(16):null,L=null);const S=(L=L||{}).random||(L.rng||v.default)();if(S[6]=15&S[6]|64,S[8]=63&S[8]|128,j){const w=B||0;for(let E=0;E<16;++E)j[w+E]=S[E];return j}return(0,a.default)(S)}},8518:(se,U,l)=>{Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var v=C(l(1657)),a=C(l(209));function C(L){return L&&L.__esModule?L:{default:L}}var N=(0,v.default)("v5",80,a.default);U.default=N},4468:se=>{var U=Object,l=TypeError;se.exports=function(){if(null!=this&&this!==U(this))throw new l("RegExp.prototype.flags getter called on non-object");var a="";return this.global&&(a+="g"),this.ignoreCase&&(a+="i"),this.multiline&&(a+="m"),this.dotAll&&(a+="s"),this.unicode&&(a+="u"),this.sticky&&(a+="y"),a}},9235:(se,U,l)=>{var v=l(2358),a=l(5685),C=l(4468),M=l(6343),N=l(1956),L=a(C);v(L,{getPolyfill:M,implementation:C,shim:N}),se.exports=L},6343:(se,U,l)=>{var v=l(4468),a=l(2358).supportsDescriptors,C=Object.getOwnPropertyDescriptor,M=TypeError;se.exports=function(){if(!a)throw new M("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var L=C(RegExp.prototype,"flags");if(L&&"function"==typeof L.get&&"boolean"==typeof/a/.dotAll)return L.get}return v}},1956:(se,U,l)=>{var v=l(2358).supportsDescriptors,a=l(6343),C=Object.getOwnPropertyDescriptor,M=Object.defineProperty,N=TypeError,L=Object.getPrototypeOf,j=/a/;se.exports=function(){if(!v||!L)throw new N("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var S=a(),w=L(j),E=C(w,"flags");return(!E||E.get!==S)&&M(w,"flags",{configurable:!0,enumerable:!1,get:S}),S}},4966:se=>{var U=function(){"use strict";function l(w,E){return null!=E&&w instanceof E}var v,a,C;try{v=Map}catch{v=function(){}}try{a=Set}catch{a=function(){}}try{C=Promise}catch{C=function(){}}function M(w,E,I,P,R){"object"==typeof E&&(I=E.depth,P=E.prototype,R=E.includeNonEnumerable,E=E.circular);var T=[],b=[],y="undefined"!=typeof Buffer;return void 0===E&&(E=!0),void 0===I&&(I=1/0),function c(o,m){if(null===o)return null;if(0===m)return o;var d,$;if("object"!=typeof o)return o;if(l(o,v))d=new v;else if(l(o,a))d=new a;else if(l(o,C))d=new C(function(X,te){o.then(function(be){X(c(be,m-1))},function(be){te(c(be,m-1))})});else if(M.__isArray(o))d=[];else if(M.__isRegExp(o))d=new RegExp(o.source,S(o)),o.lastIndex&&(d.lastIndex=o.lastIndex);else if(M.__isDate(o))d=new Date(o.getTime());else{if(y&&Buffer.isBuffer(o))return d=Buffer.allocUnsafe?Buffer.allocUnsafe(o.length):new Buffer(o.length),o.copy(d),d;l(o,Error)?d=Object.create(o):void 0===P?($=Object.getPrototypeOf(o),d=Object.create($)):(d=Object.create(P),$=P)}if(E){var ne=T.indexOf(o);if(-1!=ne)return b[ne];T.push(o),b.push(d)}for(var ve in l(o,v)&&o.forEach(function(X,te){var be=c(te,m-1),Le=c(X,m-1);d.set(be,Le)}),l(o,a)&&o.forEach(function(X){var te=c(X,m-1);d.add(te)}),o){var pe;$&&(pe=Object.getOwnPropertyDescriptor($,ve)),(!pe||null!=pe.set)&&(d[ve]=c(o[ve],m-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(o);for(ve=0;ve<x.length;ve++){var Y=x[ve];(W=Object.getOwnPropertyDescriptor(o,Y))&&!W.enumerable&&!R||(d[Y]=c(o[Y],m-1),W.enumerable||Object.defineProperty(d,Y,{enumerable:!1}))}}if(R){var Q=Object.getOwnPropertyNames(o);for(ve=0;ve<Q.length;ve++){var W,G=Q[ve];(W=Object.getOwnPropertyDescriptor(o,G))&&W.enumerable||(d[G]=c(o[G],m-1),Object.defineProperty(d,G,{enumerable:!1}))}}return d}(w,I)}function N(w){return Object.prototype.toString.call(w)}function S(w){var E="";return w.global&&(E+="g"),w.ignoreCase&&(E+="i"),w.multiline&&(E+="m"),E}return M.clonePrototype=function(E){if(null===E)return null;var I=function(){};return I.prototype=E,new I},M.__objToStr=N,M.__isDate=function(w){return"object"==typeof w&&"[object Date]"===N(w)},M.__isArray=function(w){return"object"==typeof w&&"[object Array]"===N(w)},M.__isRegExp=function(w){return"object"==typeof w&&"[object RegExp]"===N(w)},M.__getRegExpFlags=S,M}();se.exports&&(se.exports=U)},1135:(se,U,l)=>{l.d(U,{X:()=>a});var v=l(7579);class a extends v.x{constructor(M){super(),this._value=M}get value(){return this.getValue()}_subscribe(M){const N=super._subscribe(M);return!N.closed&&M.next(this._value),N}getValue(){const{hasError:M,thrownError:N,_value:L}=this;if(M)throw N;return this._throwIfClosed(),L}next(M){super.next(this._value=M)}}},8306:(se,U,l)=>{l.d(U,{y:()=>w});var v=l(930),a=l(727),C=l(8822),M=l(4671);var j=l(2416),B=l(576),S=l(2806);let w=(()=>{class R{constructor(b){b&&(this._subscribe=b)}lift(b){const y=new R;return y.source=this,y.operator=b,y}subscribe(b,y,c){const o=function(R){return R&&R instanceof v.Lv||function(R){return R&&(0,B.m)(R.next)&&(0,B.m)(R.error)&&(0,B.m)(R.complete)}(R)&&(0,a.Nn)(R)}(b)?b:new v.Hp(b,y,c);return(0,S.x)(()=>{const{operator:m,source:d}=this;o.add(m?m.call(o,d):d?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(b){try{return this._subscribe(b)}catch(y){b.error(y)}}forEach(b,y){return new(y=E(y))((c,o)=>{const m=new v.Hp({next:d=>{try{b(d)}catch($){o($),m.unsubscribe()}},error:o,complete:c});this.subscribe(m)})}_subscribe(b){var y;return null===(y=this.source)||void 0===y?void 0:y.subscribe(b)}[C.L](){return this}pipe(...b){return function(R){return 0===R.length?M.y:1===R.length?R[0]:function(b){return R.reduce((y,c)=>c(y),b)}}(b)(this)}toPromise(b){return new(b=E(b))((y,c)=>{let o;this.subscribe(m=>o=m,m=>c(m),()=>y(o))})}}return R.create=T=>new R(T),R})();function E(R){var T;return null!==(T=R??j.v.Promise)&&void 0!==T?T:Promise}},7579:(se,U,l)=>{l.d(U,{x:()=>j});var v=l(8306),a=l(727);const M=(0,l(3888).d)(S=>function(){S(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var N=l(8737),L=l(2806);let j=(()=>{class S extends v.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(E){const I=new B(this,this);return I.operator=E,I}_throwIfClosed(){if(this.closed)throw new M}next(E){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const I=this.observers.slice();for(const P of I)P.next(E)}})}error(E){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=E;const{observers:I}=this;for(;I.length;)I.shift().error(E)}})}complete(){(0,L.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:E}=this;for(;E.length;)E.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var E;return(null===(E=this.observers)||void 0===E?void 0:E.length)>0}_trySubscribe(E){return this._throwIfClosed(),super._trySubscribe(E)}_subscribe(E){return this._throwIfClosed(),this._checkFinalizedStatuses(E),this._innerSubscribe(E)}_innerSubscribe(E){const{hasError:I,isStopped:P,observers:R}=this;return I||P?a.Lc:(R.push(E),new a.w0(()=>(0,N.P)(R,E)))}_checkFinalizedStatuses(E){const{hasError:I,thrownError:P,isStopped:R}=this;I?E.error(P):R&&E.complete()}asObservable(){const E=new v.y;return E.source=this,E}}return S.create=(w,E)=>new B(w,E),S})();class B extends j{constructor(w,E){super(),this.destination=w,this.source=E}next(w){var E,I;null===(I=null===(E=this.destination)||void 0===E?void 0:E.next)||void 0===I||I.call(E,w)}error(w){var E,I;null===(I=null===(E=this.destination)||void 0===E?void 0:E.error)||void 0===I||I.call(E,w)}complete(){var w,E;null===(E=null===(w=this.destination)||void 0===w?void 0:w.complete)||void 0===E||E.call(w)}_subscribe(w){var E,I;return null!==(I=null===(E=this.source)||void 0===E?void 0:E.subscribe(w))&&void 0!==I?I:a.Lc}}},930:(se,U,l)=>{l.d(U,{Hp:()=>P,Lv:()=>I});var v=l(576),a=l(727),C=l(2416),M=l(7849),N=l(5032);const L=S("C",void 0,void 0);function S(c,o,m){return{kind:c,value:o,error:m}}var w=l(3410),E=l(2806);class I extends a.w0{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,(0,a.Nn)(o)&&o.add(this)):this.destination=y}static create(o,m,d){return new P(o,m,d)}next(o){this.isStopped?b(S("N",o,void 0),this):this._next(o)}error(o){this.isStopped?b(S("E",void 0,o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?b(L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class P extends I{constructor(o,m,d){let $;if(super(),(0,v.m)(o))$=o;else if(o){let ne;({next:$,error:m,complete:d}=o),this&&C.v.useDeprecatedNextContext?(ne=Object.create(o),ne.unsubscribe=()=>this.unsubscribe()):ne=o,$=null==$?void 0:$.bind(ne),m=null==m?void 0:m.bind(ne),d=null==d?void 0:d.bind(ne)}this.destination={next:$?R($):N.Z,error:R(m??T),complete:d?R(d):N.Z}}}function R(c,o){return(...m)=>{try{c(...m)}catch(d){C.v.useDeprecatedSynchronousErrorHandling?(0,E.O)(d):(0,M.h)(d)}}}function T(c){throw c}function b(c,o){const{onStoppedNotification:m}=C.v;m&&w.z.setTimeout(()=>m(c,o))}const y={closed:!0,next:N.Z,error:T,complete:N.Z}},727:(se,U,l)=>{l.d(U,{Lc:()=>L,w0:()=>N,Nn:()=>j});var v=l(576);const C=(0,l(3888).d)(S=>function(E){S(this),this.message=E?`${E.length} errors occurred during unsubscription:\n${E.map((I,P)=>`${P+1}) ${I.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=E});var M=l(8737);class N{constructor(w){this.initialTeardown=w,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let w;if(!this.closed){this.closed=!0;const{_parentage:E}=this;if(E)if(this._parentage=null,Array.isArray(E))for(const R of E)R.remove(this);else E.remove(this);const{initialTeardown:I}=this;if((0,v.m)(I))try{I()}catch(R){w=R instanceof C?R.errors:[R]}const{_teardowns:P}=this;if(P){this._teardowns=null;for(const R of P)try{B(R)}catch(T){w=w??[],T instanceof C?w=[...w,...T.errors]:w.push(T)}}if(w)throw new C(w)}}add(w){var E;if(w&&w!==this)if(this.closed)B(w);else{if(w instanceof N){if(w.closed||w._hasParent(this))return;w._addParent(this)}(this._teardowns=null!==(E=this._teardowns)&&void 0!==E?E:[]).push(w)}}_hasParent(w){const{_parentage:E}=this;return E===w||Array.isArray(E)&&E.includes(w)}_addParent(w){const{_parentage:E}=this;this._parentage=Array.isArray(E)?(E.push(w),E):E?[E,w]:w}_removeParent(w){const{_parentage:E}=this;E===w?this._parentage=null:Array.isArray(E)&&(0,M.P)(E,w)}remove(w){const{_teardowns:E}=this;E&&(0,M.P)(E,w),w instanceof N&&w._removeParent(this)}}N.EMPTY=(()=>{const S=new N;return S.closed=!0,S})();const L=N.EMPTY;function j(S){return S instanceof N||S&&"closed"in S&&(0,v.m)(S.remove)&&(0,v.m)(S.add)&&(0,v.m)(S.unsubscribe)}function B(S){(0,v.m)(S)?S():S.unsubscribe()}},2416:(se,U,l)=>{l.d(U,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3905:(se,U,l)=>{l.d(U,{z:()=>C});var v=l(6805),a=l(930);function C(M,N){const L="object"==typeof N;return new Promise((j,B)=>{const S=new a.Hp({next:w=>{j(w),S.unsubscribe()},error:B,complete:()=>{L?j(N.defaultValue):B(new v.K)}});M.subscribe(S)})}},9841:(se,U,l)=>{l.d(U,{a:()=>w});var v=l(8306),a=l(4742),C=l(2076),M=l(4671),N=l(3268),L=l(3269),j=l(1810),B=l(5403),S=l(9672);function w(...P){const R=(0,L.yG)(P),T=(0,L.jO)(P),{args:b,keys:y}=(0,a.D)(P);if(0===b.length)return(0,C.D)([],R);const c=new v.y(function(P,R,T=M.y){return b=>{I(R,()=>{const{length:y}=P,c=new Array(y);let o=y,m=y;for(let d=0;d<y;d++)I(R,()=>{const $=(0,C.D)(P[d],R);let ne=!1;$.subscribe(new B.Q(b,ve=>{c[d]=ve,ne||(ne=!0,m--),m||b.next(T(c.slice()))},()=>{--o||b.complete()}))},b)},b)}}(b,R,y?o=>(0,j.n)(y,o):M.y));return T?c.pipe((0,N.Z)(T)):c}function I(P,R,T){P?(0,S.f)(T,P,R):R()}},7272:(se,U,l)=>{l.d(U,{z:()=>N});var v=l(8189),C=l(3269),M=l(2076);function N(...L){return(0,v.J)(1)((0,M.D)(L,(0,C.yG)(L)))}},9770:(se,U,l)=>{l.d(U,{P:()=>C});var v=l(8306),a=l(8421);function C(M){return new v.y(N=>{(0,a.Xf)(M()).subscribe(N)})}},515:(se,U,l)=>{l.d(U,{E:()=>a});const a=new(l(8306).y)(N=>N.complete())},4128:(se,U,l)=>{l.d(U,{D:()=>B});var v=l(8306),a=l(4742),C=l(8421),M=l(3269),N=l(5403),L=l(3268),j=l(1810);function B(...S){const w=(0,M.jO)(S),{args:E,keys:I}=(0,a.D)(S),P=new v.y(R=>{const{length:T}=E;if(!T)return void R.complete();const b=new Array(T);let y=T,c=T;for(let o=0;o<T;o++){let m=!1;(0,C.Xf)(E[o]).subscribe(new N.Q(R,d=>{m||(m=!0,c--),b[o]=d},()=>y--,void 0,()=>{(!y||!m)&&(c||R.next(I?(0,j.n)(I,b):b),R.complete())}))}});return w?P.pipe((0,L.Z)(w)):P}},2076:(se,U,l)=>{l.d(U,{D:()=>ve});var v=l(8421),a=l(9672),C=l(4482),M=l(5403);function N(pe,x=0){return(0,C.e)((Y,W)=>{Y.subscribe(new M.Q(W,Q=>(0,a.f)(W,pe,()=>W.next(Q),x),()=>(0,a.f)(W,pe,()=>W.complete(),x),Q=>(0,a.f)(W,pe,()=>W.error(Q),x)))})}function L(pe,x=0){return(0,C.e)((Y,W)=>{W.add(pe.schedule(()=>Y.subscribe(W),x))})}var S=l(8306),E=l(2202),I=l(576);function R(pe,x){if(!pe)throw new Error("Iterable cannot be null");return new S.y(Y=>{(0,a.f)(Y,x,()=>{const W=pe[Symbol.asyncIterator]();(0,a.f)(Y,x,()=>{W.next().then(Q=>{Q.done?Y.complete():Y.next(Q.value)})},0,!0)})})}var T=l(3670),b=l(8239),y=l(1144),c=l(6495),o=l(2206),m=l(4532),d=l(3260);function ve(pe,x){return x?function(pe,x){if(null!=pe){if((0,T.c)(pe))return function(pe,x){return(0,v.Xf)(pe).pipe(L(x),N(x))}(pe,x);if((0,y.z)(pe))return function(pe,x){return new S.y(Y=>{let W=0;return x.schedule(function(){W===pe.length?Y.complete():(Y.next(pe[W++]),Y.closed||this.schedule())})})}(pe,x);if((0,b.t)(pe))return function(pe,x){return(0,v.Xf)(pe).pipe(L(x),N(x))}(pe,x);if((0,o.D)(pe))return R(pe,x);if((0,c.T)(pe))return function(pe,x){return new S.y(Y=>{let W;return(0,a.f)(Y,x,()=>{W=pe[E.h](),(0,a.f)(Y,x,()=>{let Q,G;try{({value:Q,done:G}=W.next())}catch(X){return void Y.error(X)}G?Y.complete():Y.next(Q)},0,!0)}),()=>(0,I.m)(null==W?void 0:W.return)&&W.return()})}(pe,x);if((0,d.L)(pe))return function(pe,x){return R((0,d.Q)(pe),x)}(pe,x)}throw(0,m.z)(pe)}(pe,x):(0,v.Xf)(pe)}},4968:(se,U,l)=>{l.d(U,{R:()=>w});var v=l(8421),a=l(8306),C=l(5577),M=l(1144),N=l(576),L=l(3268);const j=["addListener","removeListener"],B=["addEventListener","removeEventListener"],S=["on","off"];function w(T,b,y,c){if((0,N.m)(y)&&(c=y,y=void 0),c)return w(T,b,y).pipe((0,L.Z)(c));const[o,m]=function(T){return(0,N.m)(T.addEventListener)&&(0,N.m)(T.removeEventListener)}(T)?B.map(d=>$=>T[d](b,$,y)):function(T){return(0,N.m)(T.addListener)&&(0,N.m)(T.removeListener)}(T)?j.map(E(T,b)):function(T){return(0,N.m)(T.on)&&(0,N.m)(T.off)}(T)?S.map(E(T,b)):[];if(!o&&(0,M.z)(T))return(0,C.z)(d=>w(d,b,y))((0,v.Xf)(T));if(!o)throw new TypeError("Invalid event target");return new a.y(d=>{const $=(...ne)=>d.next(1<ne.length?ne:ne[0]);return o($),()=>m($)})}function E(T,b){return y=>c=>T[y](b,c)}},8421:(se,U,l)=>{l.d(U,{Xf:()=>P});var v=l(655),a=l(1144),C=l(8239),M=l(8306),N=l(3670),L=l(2206),j=l(4532),B=l(6495),S=l(3260),w=l(576),E=l(7849),I=l(8822);function P(d){if(d instanceof M.y)return d;if(null!=d){if((0,N.c)(d))return function(d){return new M.y($=>{const ne=d[I.L]();if((0,w.m)(ne.subscribe))return ne.subscribe($);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(d);if((0,a.z)(d))return function(d){return new M.y($=>{for(let ne=0;ne<d.length&&!$.closed;ne++)$.next(d[ne]);$.complete()})}(d);if((0,C.t)(d))return function(d){return new M.y($=>{d.then(ne=>{$.closed||($.next(ne),$.complete())},ne=>$.error(ne)).then(null,E.h)})}(d);if((0,L.D)(d))return c(d);if((0,B.T)(d))return function(d){return new M.y($=>{for(const ne of d)if($.next(ne),$.closed)return;$.complete()})}(d);if((0,S.L)(d))return function(d){return c((0,S.Q)(d))}(d)}throw(0,j.z)(d)}function c(d){return new M.y($=>{(function(d,$){var ne,ve,pe,x;return(0,v.mG)(this,void 0,void 0,function*(){try{for(ne=(0,v.KL)(d);!(ve=yield ne.next()).done;)if($.next(ve.value),$.closed)return}catch(Y){pe={error:Y}}finally{try{ve&&!ve.done&&(x=ne.return)&&(yield x.call(ne))}finally{if(pe)throw pe.error}}$.complete()})})(d,$).catch(ne=>$.error(ne))})}},6451:(se,U,l)=>{l.d(U,{T:()=>L});var v=l(8189),a=l(8421),C=l(515),M=l(3269),N=l(2076);function L(...j){const B=(0,M.yG)(j),S=(0,M._6)(j,1/0),w=j;return w.length?1===w.length?(0,a.Xf)(w[0]):(0,v.J)(S)((0,N.D)(w,B)):C.E}},9646:(se,U,l)=>{l.d(U,{of:()=>C});var v=l(3269),a=l(2076);function C(...M){const N=(0,v.yG)(M);return(0,a.D)(M,N)}},2843:(se,U,l)=>{l.d(U,{_:()=>C});var v=l(8306),a=l(576);function C(M,N){const L=(0,a.m)(M)?M:()=>M,j=B=>B.error(L());return new v.y(N?B=>N.schedule(j,0,B):j)}},5963:(se,U,l)=>{l.d(U,{H:()=>N});var v=l(8306),a=l(4986),C=l(3532);function N(L=0,j,B=a.P){let S=-1;return null!=j&&((0,C.K)(j)?B=j:S=j),new v.y(w=>{let E=function(L){return L instanceof Date&&!isNaN(L)}(L)?+L-B.now():L;E<0&&(E=0);let I=0;return B.schedule(function(){w.closed||(w.next(I++),0<=S?this.schedule(void 0,S):w.complete())},E)})}},5403:(se,U,l)=>{l.d(U,{Q:()=>a});var v=l(930);class a extends v.Lv{constructor(M,N,L,j,B){super(M),this.onFinalize=B,this._next=N?function(S){try{N(S)}catch(w){M.error(w)}}:super._next,this._error=j?function(S){try{j(S)}catch(w){M.error(w)}finally{this.unsubscribe()}}:super._error,this._complete=L?function(){try{L()}catch(S){M.error(S)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var M;const{closed:N}=this;super.unsubscribe(),!N&&(null===(M=this.onFinalize)||void 0===M||M.call(this))}}},3601:(se,U,l)=>{l.d(U,{e:()=>j});var v=l(4986),a=l(4482),C=l(8421),M=l(5403),L=l(5963);function j(B,S=v.P){return function(B){return(0,a.e)((S,w)=>{let E=!1,I=null,P=null,R=!1;const T=()=>{if(null==P||P.unsubscribe(),P=null,E){E=!1;const y=I;I=null,w.next(y)}R&&w.complete()},b=()=>{P=null,R&&w.complete()};S.subscribe(new M.Q(w,y=>{E=!0,I=y,P||(0,C.Xf)(B()).subscribe(P=new M.Q(w,T,b))},()=>{R=!0,(!E||!P||P.closed)&&w.complete()}))})}(()=>(0,L.H)(B,S))}},262:(se,U,l)=>{l.d(U,{K:()=>M});var v=l(8421),a=l(5403),C=l(4482);function M(N){return(0,C.e)((L,j)=>{let w,B=null,S=!1;B=L.subscribe(new a.Q(j,void 0,void 0,E=>{w=(0,v.Xf)(N(E,M(N)(L))),B?(B.unsubscribe(),B=null,w.subscribe(j)):S=!0})),S&&(B.unsubscribe(),B=null,w.subscribe(j))})}},8372:(se,U,l)=>{l.d(U,{b:()=>M});var v=l(4986),a=l(4482),C=l(5403);function M(N,L=v.z){return(0,a.e)((j,B)=>{let S=null,w=null,E=null;const I=()=>{if(S){S.unsubscribe(),S=null;const R=w;w=null,B.next(R)}};function P(){const R=E+N,T=L.now();if(T<R)return S=this.schedule(void 0,R-T),void B.add(S);I()}j.subscribe(new C.Q(B,R=>{w=R,E=L.now(),S||(S=L.schedule(P,N),B.add(S))},()=>{I(),B.complete()},void 0,()=>{w=S=null}))})}},1884:(se,U,l)=>{l.d(U,{x:()=>M});var v=l(4671),a=l(4482),C=l(5403);function M(L,j=v.y){return L=L??N,(0,a.e)((B,S)=>{let w,E=!0;B.subscribe(new C.Q(S,I=>{const P=j(I);(E||!L(w,P))&&(E=!1,w=P,S.next(I))}))})}function N(L,j){return L===j}},9300:(se,U,l)=>{l.d(U,{h:()=>C});var v=l(4482),a=l(5403);function C(M,N){return(0,v.e)((L,j)=>{let B=0;L.subscribe(new a.Q(j,S=>M.call(N,S,B++)&&j.next(S)))})}},8746:(se,U,l)=>{l.d(U,{x:()=>a});var v=l(4482);function a(C){return(0,v.e)((M,N)=>{try{M.subscribe(N)}finally{N.add(C)}})}},4004:(se,U,l)=>{l.d(U,{U:()=>C});var v=l(4482),a=l(5403);function C(M,N){return(0,v.e)((L,j)=>{let B=0;L.subscribe(new a.Q(j,S=>{j.next(M.call(N,S,B++))}))})}},8189:(se,U,l)=>{l.d(U,{J:()=>C});var v=l(5577),a=l(4671);function C(M=1/0){return(0,v.z)(a.y,M)}},5577:(se,U,l)=>{l.d(U,{z:()=>B});var v=l(4004),a=l(8421),C=l(4482),N=(l(9672),l(5403)),j=l(576);function B(S,w,E=1/0){return(0,j.m)(w)?B((I,P)=>(0,v.U)((R,T)=>w(I,R,P,T))((0,a.Xf)(S(I,P))),E):("number"==typeof w&&(E=w),(0,C.e)((I,P)=>function(S,w,E,I,P,R,T,b){const y=[];let c=0,o=0,m=!1;const d=()=>{m&&!y.length&&!c&&w.complete()},$=ve=>c<I?ne(ve):y.push(ve),ne=ve=>{c++;let pe=!1;(0,a.Xf)(E(ve,o++)).subscribe(new N.Q(w,x=>{w.next(x)},()=>{pe=!0},void 0,()=>{if(pe)try{for(c--;y.length&&c<I;){const x=y.shift();ne(x)}d()}catch(x){w.error(x)}}))};return S.subscribe(new N.Q(w,$,()=>{m=!0,d()})),()=>{}}(I,P,S,E)))}},3099:(se,U,l)=>{l.d(U,{B:()=>L});var v=l(2076),a=l(5698),C=l(7579),M=l(930),N=l(4482);function L(B={}){const{connector:S=(()=>new C.x),resetOnError:w=!0,resetOnComplete:E=!0,resetOnRefCountZero:I=!0}=B;return P=>{let R=null,T=null,b=null,y=0,c=!1,o=!1;const m=()=>{null==T||T.unsubscribe(),T=null},d=()=>{m(),R=b=null,c=o=!1},$=()=>{const ne=R;d(),null==ne||ne.unsubscribe()};return(0,N.e)((ne,ve)=>{y++,!o&&!c&&m();const pe=b=b??S();ve.add(()=>{y--,0===y&&!o&&!c&&(T=j($,I))}),pe.subscribe(ve),R||(R=new M.Hp({next:x=>pe.next(x),error:x=>{o=!0,m(),T=j(d,w,x),pe.error(x)},complete:()=>{c=!0,m(),T=j(d,E),pe.complete()}}),(0,v.D)(ne).subscribe(R))})(P)}}function j(B,S,...w){return!0===S?(B(),null):!1===S?null:S(...w).pipe((0,a.q)(1)).subscribe(()=>B())}},8675:(se,U,l)=>{l.d(U,{O:()=>M});var v=l(7272),a=l(3269),C=l(4482);function M(...N){const L=(0,a.yG)(N);return(0,C.e)((j,B)=>{(L?(0,v.z)(N,j,L):(0,v.z)(N,j)).subscribe(B)})}},3900:(se,U,l)=>{l.d(U,{w:()=>M});var v=l(8421),a=l(4482),C=l(5403);function M(N,L){return(0,a.e)((j,B)=>{let S=null,w=0,E=!1;const I=()=>E&&!S&&B.complete();j.subscribe(new C.Q(B,P=>{null==S||S.unsubscribe();let R=0;const T=w++;(0,v.Xf)(N(P,T)).subscribe(S=new C.Q(B,b=>B.next(L?L(P,b,T,R++):b),()=>{S=null,I()}))},()=>{E=!0,I()}))})}},5698:(se,U,l)=>{l.d(U,{q:()=>M});var v=l(515),a=l(4482),C=l(5403);function M(N){return N<=0?()=>v.E:(0,a.e)((L,j)=>{let B=0;L.subscribe(new C.Q(j,S=>{++B<=N&&(j.next(S),N<=B&&j.complete())}))})}},2722:(se,U,l)=>{l.d(U,{R:()=>N});var v=l(4482),a=l(5403),C=l(8421),M=l(5032);function N(L){return(0,v.e)((j,B)=>{(0,C.Xf)(L).subscribe(new a.Q(B,()=>B.complete(),M.Z)),!B.closed&&j.subscribe(B)})}},8505:(se,U,l)=>{l.d(U,{b:()=>N});var v=l(576),a=l(4482),C=l(5403),M=l(4671);function N(L,j,B){const S=(0,v.m)(L)||j||B?{next:L,error:j,complete:B}:L;return S?(0,a.e)((w,E)=>{var I;null===(I=S.subscribe)||void 0===I||I.call(S);let P=!0;w.subscribe(new C.Q(E,R=>{var T;null===(T=S.next)||void 0===T||T.call(S,R),E.next(R)},()=>{var R;P=!1,null===(R=S.complete)||void 0===R||R.call(S),E.complete()},R=>{var T;P=!1,null===(T=S.error)||void 0===T||T.call(S,R),E.error(R)},()=>{var R,T;P&&(null===(R=S.unsubscribe)||void 0===R||R.call(S)),null===(T=S.finalize)||void 0===T||T.call(S)}))}):M.y}},4408:(se,U,l)=>{l.d(U,{o:()=>N});var v=l(727);class a extends v.w0{constructor(j,B){super()}schedule(j,B=0){return this}}const C={setInterval(...L){const{delegate:j}=C;return((null==j?void 0:j.setInterval)||setInterval)(...L)},clearInterval(L){const{delegate:j}=C;return((null==j?void 0:j.clearInterval)||clearInterval)(L)},delegate:void 0};var M=l(8737);class N extends a{constructor(j,B){super(j,B),this.scheduler=j,this.work=B,this.pending=!1}schedule(j,B=0){if(this.closed)return this;this.state=j;const S=this.id,w=this.scheduler;return null!=S&&(this.id=this.recycleAsyncId(w,S,B)),this.pending=!0,this.delay=B,this.id=this.id||this.requestAsyncId(w,this.id,B),this}requestAsyncId(j,B,S=0){return C.setInterval(j.flush.bind(j,this),S)}recycleAsyncId(j,B,S=0){if(null!=S&&this.delay===S&&!1===this.pending)return B;C.clearInterval(B)}execute(j,B){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const S=this._execute(j,B);if(S)return S;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(j,B){let w,S=!1;try{this.work(j)}catch(E){S=!0,w=E||new Error("Scheduled action threw falsy error")}if(S)return this.unsubscribe(),w}unsubscribe(){if(!this.closed){const{id:j,scheduler:B}=this,{actions:S}=B;this.work=this.state=this.scheduler=null,this.pending=!1,(0,M.P)(S,this),null!=j&&(this.id=this.recycleAsyncId(B,j,null)),this.delay=null,super.unsubscribe()}}}},7565:(se,U,l)=>{l.d(U,{v:()=>C});var v=l(6063);class a{constructor(N,L=a.now){this.schedulerActionCtor=N,this.now=L}schedule(N,L=0,j){return new this.schedulerActionCtor(this,N).schedule(j,L)}}a.now=v.l.now;class C extends a{constructor(N,L=a.now){super(N,L),this.actions=[],this._active=!1,this._scheduled=void 0}flush(N){const{actions:L}=this;if(this._active)return void L.push(N);let j;this._active=!0;do{if(j=N.execute(N.state,N.delay))break}while(N=L.shift());if(this._active=!1,j){for(;N=L.shift();)N.unsubscribe();throw j}}}},6406:(se,U,l)=>{l.d(U,{Z:()=>j});var v=l(4408),a=l(727);const C={schedule(S){let w=requestAnimationFrame,E=cancelAnimationFrame;const{delegate:I}=C;I&&(w=I.requestAnimationFrame,E=I.cancelAnimationFrame);const P=w(R=>{E=void 0,S(R)});return new a.w0(()=>null==E?void 0:E(P))},requestAnimationFrame(...S){const{delegate:w}=C;return((null==w?void 0:w.requestAnimationFrame)||requestAnimationFrame)(...S)},cancelAnimationFrame(...S){const{delegate:w}=C;return((null==w?void 0:w.cancelAnimationFrame)||cancelAnimationFrame)(...S)},delegate:void 0};var N=l(7565);const j=new class extends N.v{flush(w){this._active=!0;const E=this._scheduled;this._scheduled=void 0;const{actions:I}=this;let P;w=w||I.shift();do{if(P=w.execute(w.state,w.delay))break}while((w=I[0])&&w.id===E&&I.shift());if(this._active=!1,P){for(;(w=I[0])&&w.id===E&&I.shift();)w.unsubscribe();throw P}}}(class extends v.o{constructor(w,E){super(w,E),this.scheduler=w,this.work=E}requestAsyncId(w,E,I=0){return null!==I&&I>0?super.requestAsyncId(w,E,I):(w.actions.push(this),w._scheduled||(w._scheduled=C.requestAnimationFrame(()=>w.flush(void 0))))}recycleAsyncId(w,E,I=0){if(null!=I&&I>0||null==I&&this.delay>0)return super.recycleAsyncId(w,E,I);w.actions.some(P=>P.id===E)||(C.cancelAnimationFrame(E),w._scheduled=void 0)}})},3101:(se,U,l)=>{l.d(U,{E:()=>R});var v=l(4408);let C,a=1;const M={};function N(b){return b in M&&(delete M[b],!0)}const L={setImmediate(b){const y=a++;return M[y]=!0,C||(C=Promise.resolve()),C.then(()=>N(y)&&b()),y},clearImmediate(b){N(b)}},{setImmediate:B,clearImmediate:S}=L,w={setImmediate(...b){const{delegate:y}=w;return((null==y?void 0:y.setImmediate)||B)(...b)},clearImmediate(b){const{delegate:y}=w;return((null==y?void 0:y.clearImmediate)||S)(b)},delegate:void 0};var I=l(7565);const R=new class extends I.v{flush(y){this._active=!0;const c=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let m;y=y||o.shift();do{if(m=y.execute(y.state,y.delay))break}while((y=o[0])&&y.id===c&&o.shift());if(this._active=!1,m){for(;(y=o[0])&&y.id===c&&o.shift();)y.unsubscribe();throw m}}}(class extends v.o{constructor(y,c){super(y,c),this.scheduler=y,this.work=c}requestAsyncId(y,c,o=0){return null!==o&&o>0?super.requestAsyncId(y,c,o):(y.actions.push(this),y._scheduled||(y._scheduled=w.setImmediate(y.flush.bind(y,void 0))))}recycleAsyncId(y,c,o=0){if(null!=o&&o>0||null==o&&this.delay>0)return super.recycleAsyncId(y,c,o);y.actions.some(m=>m.id===c)||(w.clearImmediate(c),y._scheduled=void 0)}})},4986:(se,U,l)=>{l.d(U,{z:()=>C,P:()=>M});var v=l(4408);const C=new(l(7565).v)(v.o),M=C},6063:(se,U,l)=>{l.d(U,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},3410:(se,U,l)=>{l.d(U,{z:()=>v});const v={setTimeout(...a){const{delegate:C}=v;return((null==C?void 0:C.setTimeout)||setTimeout)(...a)},clearTimeout(a){const{delegate:C}=v;return((null==C?void 0:C.clearTimeout)||clearTimeout)(a)},delegate:void 0}},2202:(se,U,l)=>{l.d(U,{h:()=>a});const a="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},8822:(se,U,l)=>{l.d(U,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(se,U,l)=>{l.d(U,{K:()=>a});const a=(0,l(3888).d)(C=>function(){C(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(se,U,l)=>{l.d(U,{jO:()=>M,yG:()=>N,_6:()=>L});var v=l(576),a=l(3532);function C(j){return j[j.length-1]}function M(j){return(0,v.m)(C(j))?j.pop():void 0}function N(j){return(0,a.K)(C(j))?j.pop():void 0}function L(j,B){return"number"==typeof C(j)?j.pop():B}},4742:(se,U,l)=>{l.d(U,{D:()=>N});const{isArray:v}=Array,{getPrototypeOf:a,prototype:C,keys:M}=Object;function N(j){if(1===j.length){const B=j[0];if(v(B))return{args:B,keys:null};if(function(j){return j&&"object"==typeof j&&a(j)===C}(B)){const S=M(B);return{args:S.map(w=>B[w]),keys:S}}}return{args:j,keys:null}}},8737:(se,U,l)=>{function v(a,C){if(a){const M=a.indexOf(C);0<=M&&a.splice(M,1)}}l.d(U,{P:()=>v})},3888:(se,U,l)=>{function v(a){const M=a(N=>{Error.call(N),N.stack=(new Error).stack});return M.prototype=Object.create(Error.prototype),M.prototype.constructor=M,M}l.d(U,{d:()=>v})},1810:(se,U,l)=>{function v(a,C){return a.reduce((M,N,L)=>(M[N]=C[L],M),{})}l.d(U,{n:()=>v})},2806:(se,U,l)=>{l.d(U,{x:()=>C,O:()=>M});var v=l(2416);let a=null;function C(N){if(v.v.useDeprecatedSynchronousErrorHandling){const L=!a;if(L&&(a={errorThrown:!1,error:null}),N(),L){const{errorThrown:j,error:B}=a;if(a=null,j)throw B}}else N()}function M(N){v.v.useDeprecatedSynchronousErrorHandling&&a&&(a.errorThrown=!0,a.error=N)}},9672:(se,U,l)=>{function v(a,C,M,N=0,L=!1){const j=C.schedule(function(){M(),L?a.add(this.schedule(null,N)):this.unsubscribe()},N);if(a.add(j),!L)return j}l.d(U,{f:()=>v})},4671:(se,U,l)=>{function v(a){return a}l.d(U,{y:()=>v})},1144:(se,U,l)=>{l.d(U,{z:()=>v});const v=a=>a&&"number"==typeof a.length&&"function"!=typeof a},2206:(se,U,l)=>{l.d(U,{D:()=>a});var v=l(576);function a(C){return Symbol.asyncIterator&&(0,v.m)(null==C?void 0:C[Symbol.asyncIterator])}},576:(se,U,l)=>{function v(a){return"function"==typeof a}l.d(U,{m:()=>v})},3670:(se,U,l)=>{l.d(U,{c:()=>C});var v=l(8822),a=l(576);function C(M){return(0,a.m)(M[v.L])}},6495:(se,U,l)=>{l.d(U,{T:()=>C});var v=l(2202),a=l(576);function C(M){return(0,a.m)(null==M?void 0:M[v.h])}},8239:(se,U,l)=>{l.d(U,{t:()=>a});var v=l(576);function a(C){return(0,v.m)(null==C?void 0:C.then)}},3260:(se,U,l)=>{l.d(U,{Q:()=>C,L:()=>M});var v=l(655),a=l(576);function C(N){return(0,v.FC)(this,arguments,function*(){const j=N.getReader();try{for(;;){const{value:B,done:S}=yield(0,v.qq)(j.read());if(S)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(B)}}finally{j.releaseLock()}})}function M(N){return(0,a.m)(null==N?void 0:N.getReader)}},3532:(se,U,l)=>{l.d(U,{K:()=>a});var v=l(576);function a(C){return C&&(0,v.m)(C.schedule)}},4482:(se,U,l)=>{l.d(U,{A:()=>a,e:()=>C});var v=l(576);function a(M){return(0,v.m)(null==M?void 0:M.lift)}function C(M){return N=>{if(a(N))return N.lift(function(L){try{return M(L,this)}catch(j){this.error(j)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(se,U,l)=>{l.d(U,{Z:()=>M});var v=l(4004);const{isArray:a}=Array;function M(N){return(0,v.U)(L=>function(N,L){return a(L)?N(...L):N(L)}(N,L))}},5032:(se,U,l)=>{function v(){}l.d(U,{Z:()=>v})},7849:(se,U,l)=>{l.d(U,{h:()=>C});var v=l(2416),a=l(3410);function C(M){a.z.setTimeout(()=>{const{onUnhandledError:N}=v.v;if(!N)throw M;N(M)})}},4532:(se,U,l)=>{function v(a){return new TypeError(`You provided ${null!==a&&"object"==typeof a?"an invalid object":`'${a}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}l.d(U,{z:()=>v})},1452:se=>{se.exports=function(U){"use strict";var v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function C(b,y){var c=b[0],o=b[1],m=b[2],d=b[3];o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[0]-680876936|0)<<7|c>>>25)+o|0)&o|~c&m)+y[1]-389564586|0)<<12|d>>>20)+c|0)&c|~d&o)+y[2]+606105819|0)<<17|m>>>15)+d|0)&d|~m&c)+y[3]-1044525330|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[4]-176418897|0)<<7|c>>>25)+o|0)&o|~c&m)+y[5]+1200080426|0)<<12|d>>>20)+c|0)&c|~d&o)+y[6]-1473231341|0)<<17|m>>>15)+d|0)&d|~m&c)+y[7]-45705983|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[8]+1770035416|0)<<7|c>>>25)+o|0)&o|~c&m)+y[9]-1958414417|0)<<12|d>>>20)+c|0)&c|~d&o)+y[10]-42063|0)<<17|m>>>15)+d|0)&d|~m&c)+y[11]-1990404162|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&m|~o&d)+y[12]+1804603682|0)<<7|c>>>25)+o|0)&o|~c&m)+y[13]-40341101|0)<<12|d>>>20)+c|0)&c|~d&o)+y[14]-1502002290|0)<<17|m>>>15)+d|0)&d|~m&c)+y[15]+1236535329|0)<<22|o>>>10)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[1]-165796510|0)<<5|c>>>27)+o|0)&m|o&~m)+y[6]-1069501632|0)<<9|d>>>23)+c|0)&o|c&~o)+y[11]+643717713|0)<<14|m>>>18)+d|0)&c|d&~c)+y[0]-373897302|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[5]-701558691|0)<<5|c>>>27)+o|0)&m|o&~m)+y[10]+38016083|0)<<9|d>>>23)+c|0)&o|c&~o)+y[15]-660478335|0)<<14|m>>>18)+d|0)&c|d&~c)+y[4]-405537848|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[9]+568446438|0)<<5|c>>>27)+o|0)&m|o&~m)+y[14]-1019803690|0)<<9|d>>>23)+c|0)&o|c&~o)+y[3]-187363961|0)<<14|m>>>18)+d|0)&c|d&~c)+y[8]+1163531501|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o&d|m&~d)+y[13]-1444681467|0)<<5|c>>>27)+o|0)&m|o&~m)+y[2]-51403784|0)<<9|d>>>23)+c|0)&o|c&~o)+y[7]+1735328473|0)<<14|m>>>18)+d|0)&c|d&~c)+y[12]-1926607734|0)<<20|o>>>12)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[5]-378558|0)<<4|c>>>28)+o|0)^o^m)+y[8]-2022574463|0)<<11|d>>>21)+c|0)^c^o)+y[11]+1839030562|0)<<16|m>>>16)+d|0)^d^c)+y[14]-35309556|0)<<23|o>>>9)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[1]-1530992060|0)<<4|c>>>28)+o|0)^o^m)+y[4]+1272893353|0)<<11|d>>>21)+c|0)^c^o)+y[7]-155497632|0)<<16|m>>>16)+d|0)^d^c)+y[10]-1094730640|0)<<23|o>>>9)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[13]+681279174|0)<<4|c>>>28)+o|0)^o^m)+y[0]-358537222|0)<<11|d>>>21)+c|0)^c^o)+y[3]-722521979|0)<<16|m>>>16)+d|0)^d^c)+y[6]+76029189|0)<<23|o>>>9)+m|0,o=((o+=((m=((m+=((d=((d+=((c=((c+=(o^m^d)+y[9]-640364487|0)<<4|c>>>28)+o|0)^o^m)+y[12]-421815835|0)<<11|d>>>21)+c|0)^c^o)+y[15]+530742520|0)<<16|m>>>16)+d|0)^d^c)+y[2]-995338651|0)<<23|o>>>9)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[0]-198630844|0)<<6|c>>>26)+o|0)|~m))+y[7]+1126891415|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[14]-1416354905|0)<<15|m>>>17)+d|0)|~c))+y[5]-57434055|0)<<21|o>>>11)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[12]+1700485571|0)<<6|c>>>26)+o|0)|~m))+y[3]-1894986606|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[10]-1051523|0)<<15|m>>>17)+d|0)|~c))+y[1]-2054922799|0)<<21|o>>>11)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[8]+1873313359|0)<<6|c>>>26)+o|0)|~m))+y[15]-30611744|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[6]-1560198380|0)<<15|m>>>17)+d|0)|~c))+y[13]+1309151649|0)<<21|o>>>11)+m|0,o=((o+=((d=((d+=(o^((c=((c+=(m^(o|~d))+y[4]-145523070|0)<<6|c>>>26)+o|0)|~m))+y[11]-1120210379|0)<<10|d>>>22)+c|0)^((m=((m+=(c^(d|~o))+y[2]+718787259|0)<<15|m>>>17)+d|0)|~c))+y[9]-343485551|0)<<21|o>>>11)+m|0,b[0]=c+b[0]|0,b[1]=o+b[1]|0,b[2]=m+b[2]|0,b[3]=d+b[3]|0}function M(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b.charCodeAt(c)+(b.charCodeAt(c+1)<<8)+(b.charCodeAt(c+2)<<16)+(b.charCodeAt(c+3)<<24);return y}function N(b){var c,y=[];for(c=0;c<64;c+=4)y[c>>2]=b[c]+(b[c+1]<<8)+(b[c+2]<<16)+(b[c+3]<<24);return y}function L(b){var o,m,d,$,ne,ve,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)C(c,M(b.substring(o-64,o)));for(m=(b=b.substring(o-64)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<m;o+=1)d[o>>2]|=b.charCodeAt(o)<<(o%4<<3);if(d[o>>2]|=128<<(o%4<<3),o>55)for(C(c,d),o=0;o<16;o+=1)d[o]=0;return $=($=8*y).toString(16).match(/(.*?)(.{0,8})$/),ne=parseInt($[2],16),ve=parseInt($[1],16)||0,d[14]=ne,d[15]=ve,C(c,d),c}function B(b){var c,y="";for(c=0;c<4;c+=1)y+=v[b>>8*c+4&15]+v[b>>8*c&15];return y}function S(b){var y;for(y=0;y<b.length;y+=1)b[y]=B(b[y]);return b.join("")}function w(b){return/[\u0080-\uFFFF]/.test(b)&&(b=unescape(encodeURIComponent(b))),b}function R(b){var o,y=[],c=b.length;for(o=0;o<c-1;o+=2)y.push(parseInt(b.substr(o,2),16));return String.fromCharCode.apply(String,y)}function T(){this.reset()}return S(L("hello")),"undefined"!=typeof ArrayBuffer&&!ArrayBuffer.prototype.slice&&function(){function b(y,c){return(y=0|y||0)<0?Math.max(y+c,0):Math.min(y,c)}ArrayBuffer.prototype.slice=function(y,c){var $,ne,ve,pe,o=this.byteLength,m=b(y,o),d=o;return undefined!==c&&(d=b(c,o)),m>d?new ArrayBuffer(0):($=d-m,ne=new ArrayBuffer($),ve=new Uint8Array(ne),pe=new Uint8Array(this,m,$),ve.set(pe),ne)}}(),T.prototype.append=function(b){return this.appendBinary(w(b)),this},T.prototype.appendBinary=function(b){this._buff+=b,this._length+=b.length;var c,y=this._buff.length;for(c=64;c<=y;c+=64)C(this._hash,M(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},T.prototype.end=function(b){var o,d,y=this._buff,c=y.length,m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<c;o+=1)m[o>>2]|=y.charCodeAt(o)<<(o%4<<3);return this._finish(m,c),d=S(this._hash),b&&(d=R(d)),this.reset(),d},T.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},T.prototype.setState=function(b){return this._buff=b.buff,this._length=b.length,this._hash=b.hash,this},T.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},T.prototype._finish=function(b,y){var o,m,d,c=y;if(b[c>>2]|=128<<(c%4<<3),c>55)for(C(this._hash,b),c=0;c<16;c+=1)b[c]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),m=parseInt(o[2],16),d=parseInt(o[1],16)||0,b[14]=m,b[15]=d,C(this._hash,b)},T.hash=function(b,y){return T.hashBinary(w(b),y)},T.hashBinary=function(b,y){var o=S(L(b));return y?R(o):o},(T.ArrayBuffer=function(){this.reset()}).prototype.append=function(b){var o,y=function(b,y,c){var o=new Uint8Array(b.byteLength+y.byteLength);return o.set(new Uint8Array(b)),o.set(new Uint8Array(y),b.byteLength),c?o:o.buffer}(this._buff.buffer,b,!0),c=y.length;for(this._length+=b.byteLength,o=64;o<=c;o+=64)C(this._hash,N(y.subarray(o-64,o)));return this._buff=o-64<c?new Uint8Array(y.buffer.slice(o-64)):new Uint8Array(0),this},T.ArrayBuffer.prototype.end=function(b){var m,d,y=this._buff,c=y.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(m=0;m<c;m+=1)o[m>>2]|=y[m]<<(m%4<<3);return this._finish(o,c),d=S(this._hash),b&&(d=R(d)),this.reset(),d},T.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.ArrayBuffer.prototype.getState=function(){var b=T.prototype.getState.call(this);return b.buff=function(b){return String.fromCharCode.apply(null,new Uint8Array(b))}(b.buff),b},T.ArrayBuffer.prototype.setState=function(b){return b.buff=function(b,y){var d,c=b.length,o=new ArrayBuffer(c),m=new Uint8Array(o);for(d=0;d<c;d+=1)m[d]=b.charCodeAt(d);return y?m:o}(b.buff,!0),T.prototype.setState.call(this,b)},T.ArrayBuffer.prototype.destroy=T.prototype.destroy,T.ArrayBuffer.prototype._finish=T.prototype._finish,T.ArrayBuffer.hash=function(b,y){var o=S(function(b){var o,m,d,$,ne,ve,y=b.length,c=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=y;o+=64)C(c,N(b.subarray(o-64,o)));for(m=(b=o-64<y?b.subarray(o-64):new Uint8Array(0)).length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<m;o+=1)d[o>>2]|=b[o]<<(o%4<<3);if(d[o>>2]|=128<<(o%4<<3),o>55)for(C(c,d),o=0;o<16;o+=1)d[o]=0;return $=($=8*y).toString(16).match(/(.*?)(.{0,8})$/),ne=parseInt($[2],16),ve=parseInt($[1],16)||0,d[14]=ne,d[15]=ve,C(c,d),c}(new Uint8Array(b)));return y?R(o):o},T}()},1451:se=>{se.exports=function(l){return l&&"object"==typeof l&&"function"==typeof l.copy&&"function"==typeof l.fill&&"function"==typeof l.readUInt8}},8791:(se,U,l)=>{var v=l(3407),a=l(110),C=l(2031),M=l(597);function N(xe){return xe.call.bind(xe)}var L="undefined"!=typeof BigInt,j="undefined"!=typeof Symbol,B=N(Object.prototype.toString),S=N(Number.prototype.valueOf),w=N(String.prototype.valueOf),E=N(Boolean.prototype.valueOf);if(L)var I=N(BigInt.prototype.valueOf);if(j)var P=N(Symbol.prototype.valueOf);function R(xe,Ot){if("object"!=typeof xe)return!1;try{return Ot(xe),!0}catch{return!1}}function W(xe){return"[object Map]"===B(xe)}function G(xe){return"[object Set]"===B(xe)}function te(xe){return"[object WeakMap]"===B(xe)}function Le(xe){return"[object WeakSet]"===B(xe)}function Se(xe){return"[object ArrayBuffer]"===B(xe)}function ge(xe){return"undefined"!=typeof ArrayBuffer&&(Se.working?Se(xe):xe instanceof ArrayBuffer)}function oe(xe){return"[object DataView]"===B(xe)}function le(xe){return"undefined"!=typeof DataView&&(oe.working?oe(xe):xe instanceof DataView)}U.isArgumentsObject=v,U.isGeneratorFunction=a,U.isTypedArray=M,U.isPromise=function(xe){return"undefined"!=typeof Promise&&xe instanceof Promise||null!==xe&&"object"==typeof xe&&"function"==typeof xe.then&&"function"==typeof xe.catch},U.isArrayBufferView=function(xe){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(xe):M(xe)||le(xe)},U.isUint8Array=function(xe){return"Uint8Array"===C(xe)},U.isUint8ClampedArray=function(xe){return"Uint8ClampedArray"===C(xe)},U.isUint16Array=function(xe){return"Uint16Array"===C(xe)},U.isUint32Array=function(xe){return"Uint32Array"===C(xe)},U.isInt8Array=function(xe){return"Int8Array"===C(xe)},U.isInt16Array=function(xe){return"Int16Array"===C(xe)},U.isInt32Array=function(xe){return"Int32Array"===C(xe)},U.isFloat32Array=function(xe){return"Float32Array"===C(xe)},U.isFloat64Array=function(xe){return"Float64Array"===C(xe)},U.isBigInt64Array=function(xe){return"BigInt64Array"===C(xe)},U.isBigUint64Array=function(xe){return"BigUint64Array"===C(xe)},W.working="undefined"!=typeof Map&&W(new Map),U.isMap=function(xe){return"undefined"!=typeof Map&&(W.working?W(xe):xe instanceof Map)},G.working="undefined"!=typeof Set&&G(new Set),U.isSet=function(xe){return"undefined"!=typeof Set&&(G.working?G(xe):xe instanceof Set)},te.working="undefined"!=typeof WeakMap&&te(new WeakMap),U.isWeakMap=function(xe){return"undefined"!=typeof WeakMap&&(te.working?te(xe):xe instanceof WeakMap)},Le.working="undefined"!=typeof WeakSet&&Le(new WeakSet),U.isWeakSet=function(xe){return Le(xe)},Se.working="undefined"!=typeof ArrayBuffer&&Se(new ArrayBuffer),U.isArrayBuffer=ge,oe.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&oe(new DataView(new ArrayBuffer(1),0,1)),U.isDataView=le;var Oe="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function Ne(xe){return"[object SharedArrayBuffer]"===B(xe)}function Ye(xe){return void 0!==Oe&&(void 0===Ne.working&&(Ne.working=Ne(new Oe)),Ne.working?Ne(xe):xe instanceof Oe)}function un(xe){return R(xe,S)}function er(xe){return R(xe,w)}function gn(xe){return R(xe,E)}function yn(xe){return L&&R(xe,I)}function _n(xe){return j&&R(xe,P)}U.isSharedArrayBuffer=Ye,U.isAsyncFunction=function(xe){return"[object AsyncFunction]"===B(xe)},U.isMapIterator=function(xe){return"[object Map Iterator]"===B(xe)},U.isSetIterator=function(xe){return"[object Set Iterator]"===B(xe)},U.isGeneratorObject=function(xe){return"[object Generator]"===B(xe)},U.isWebAssemblyCompiledModule=function(xe){return"[object WebAssembly.Module]"===B(xe)},U.isNumberObject=un,U.isStringObject=er,U.isBooleanObject=gn,U.isBigIntObject=yn,U.isSymbolObject=_n,U.isBoxedPrimitive=function(xe){return un(xe)||er(xe)||gn(xe)||yn(xe)||_n(xe)},U.isAnyArrayBuffer=function(xe){return"undefined"!=typeof Uint8Array&&(ge(xe)||Ye(xe))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(xe){Object.defineProperty(U,xe,{enumerable:!1,value:function(){throw new Error(xe+" is not supported in userland")}})})},6788:(se,U,l)=>{var v=Object.getOwnPropertyDescriptors||function(le){for(var Oe=Object.keys(le),Ne={},Ye=0;Ye<Oe.length;Ye++)Ne[Oe[Ye]]=Object.getOwnPropertyDescriptor(le,Oe[Ye]);return Ne},a=/%[sdj%]/g;U.format=function(oe){if(!d(oe)){for(var le=[],Oe=0;Oe<arguments.length;Oe++)le.push(L(arguments[Oe]));return le.join(" ")}Oe=1;for(var Ne=arguments,Ye=Ne.length,mt=String(oe).replace(a,function(vt){if("%%"===vt)return"%";if(Oe>=Ye)return vt;switch(vt){case"%s":return String(Ne[Oe++]);case"%d":return Number(Ne[Oe++]);case"%j":try{return JSON.stringify(Ne[Oe++])}catch{return"[Circular]"}default:return vt}}),nt=Ne[Oe];Oe<Ye;nt=Ne[++Oe])c(nt)||!pe(nt)?mt+=" "+nt:mt+=" "+L(nt);return mt},U.deprecate=function(oe,le){if("undefined"!=typeof process&&!0===process.noDeprecation)return oe;if("undefined"==typeof process)return function(){return U.deprecate(oe,le).apply(this,arguments)};var Oe=!1;return function(){if(!Oe){if(process.throwDeprecation)throw new Error(le);process.traceDeprecation?console.trace(le):console.error(le),Oe=!0}return oe.apply(this,arguments)}};var C={},M=/^$/;if(process.env.NODE_DEBUG){var N=process.env.NODE_DEBUG;N=N.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),M=new RegExp("^"+N+"$","i")}function L(oe,le){var Oe={seen:[],stylize:B};return arguments.length>=3&&(Oe.depth=arguments[2]),arguments.length>=4&&(Oe.colors=arguments[3]),y(le)?Oe.showHidden=le:le&&U._extend(Oe,le),ne(Oe.showHidden)&&(Oe.showHidden=!1),ne(Oe.depth)&&(Oe.depth=2),ne(Oe.colors)&&(Oe.colors=!1),ne(Oe.customInspect)&&(Oe.customInspect=!0),Oe.colors&&(Oe.stylize=j),w(Oe,oe,Oe.depth)}function j(oe,le){var Oe=L.styles[le];return Oe?"\x1b["+L.colors[Oe][0]+"m"+oe+"\x1b["+L.colors[Oe][1]+"m":oe}function B(oe,le){return oe}function w(oe,le,Oe){if(oe.customInspect&&le&&W(le.inspect)&&le.inspect!==U.inspect&&(!le.constructor||le.constructor.prototype!==le)){var Ne=le.inspect(Oe,oe);return d(Ne)||(Ne=w(oe,Ne,Oe)),Ne}var Ye=function(oe,le){if(ne(le))return oe.stylize("undefined","undefined");if(d(le)){var Oe="'"+JSON.stringify(le).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return oe.stylize(Oe,"string")}return m(le)?oe.stylize(""+le,"number"):y(le)?oe.stylize(""+le,"boolean"):c(le)?oe.stylize("null","null"):void 0}(oe,le);if(Ye)return Ye;var mt=Object.keys(le),nt=function(oe){var le={};return oe.forEach(function(Oe,Ne){le[Oe]=!0}),le}(mt);if(oe.showHidden&&(mt=Object.getOwnPropertyNames(le)),Y(le)&&(mt.indexOf("message")>=0||mt.indexOf("description")>=0))return I(le);if(0===mt.length){if(W(le))return oe.stylize("[Function"+(le.name?": "+le.name:"")+"]","special");if(ve(le))return oe.stylize(RegExp.prototype.toString.call(le),"regexp");if(x(le))return oe.stylize(Date.prototype.toString.call(le),"date");if(Y(le))return I(le)}var gn,Rt="",kt=!1,un=["{","}"];return b(le)&&(kt=!0,un=["[","]"]),W(le)&&(Rt=" [Function"+(le.name?": "+le.name:"")+"]"),ve(le)&&(Rt=" "+RegExp.prototype.toString.call(le)),x(le)&&(Rt=" "+Date.prototype.toUTCString.call(le)),Y(le)&&(Rt=" "+I(le)),0!==mt.length||kt&&0!=le.length?Oe<0?ve(le)?oe.stylize(RegExp.prototype.toString.call(le),"regexp"):oe.stylize("[Object]","special"):(oe.seen.push(le),gn=kt?function(oe,le,Oe,Ne,Ye){for(var mt=[],nt=0,vt=le.length;nt<vt;++nt)Le(le,String(nt))?mt.push(R(oe,le,Oe,Ne,String(nt),!0)):mt.push("");return Ye.forEach(function(Rt){Rt.match(/^\d+$/)||mt.push(R(oe,le,Oe,Ne,Rt,!0))}),mt}(oe,le,Oe,nt,mt):mt.map(function(yn){return R(oe,le,Oe,nt,yn,kt)}),oe.seen.pop(),function(oe,le,Oe){var Ye=oe.reduce(function(mt,nt){return nt.indexOf("\n"),mt+nt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ye>60?Oe[0]+(""===le?"":le+"\n ")+" "+oe.join(",\n  ")+" "+Oe[1]:Oe[0]+le+" "+oe.join(", ")+" "+Oe[1]}(gn,Rt,un)):un[0]+Rt+un[1]}function I(oe){return"["+Error.prototype.toString.call(oe)+"]"}function R(oe,le,Oe,Ne,Ye,mt){var nt,vt,Rt;if((Rt=Object.getOwnPropertyDescriptor(le,Ye)||{value:le[Ye]}).get?vt=oe.stylize(Rt.set?"[Getter/Setter]":"[Getter]","special"):Rt.set&&(vt=oe.stylize("[Setter]","special")),Le(Ne,Ye)||(nt="["+Ye+"]"),vt||(oe.seen.indexOf(Rt.value)<0?(vt=c(Oe)?w(oe,Rt.value,null):w(oe,Rt.value,Oe-1)).indexOf("\n")>-1&&(vt=mt?vt.split("\n").map(function(kt){return"  "+kt}).join("\n").substr(2):"\n"+vt.split("\n").map(function(kt){return"   "+kt}).join("\n")):vt=oe.stylize("[Circular]","special")),ne(nt)){if(mt&&Ye.match(/^\d+$/))return vt;(nt=JSON.stringify(""+Ye)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(nt=nt.substr(1,nt.length-2),nt=oe.stylize(nt,"name")):(nt=nt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),nt=oe.stylize(nt,"string"))}return nt+": "+vt}function b(oe){return Array.isArray(oe)}function y(oe){return"boolean"==typeof oe}function c(oe){return null===oe}function m(oe){return"number"==typeof oe}function d(oe){return"string"==typeof oe}function ne(oe){return void 0===oe}function ve(oe){return pe(oe)&&"[object RegExp]"===G(oe)}function pe(oe){return"object"==typeof oe&&null!==oe}function x(oe){return pe(oe)&&"[object Date]"===G(oe)}function Y(oe){return pe(oe)&&("[object Error]"===G(oe)||oe instanceof Error)}function W(oe){return"function"==typeof oe}function G(oe){return Object.prototype.toString.call(oe)}function X(oe){return oe<10?"0"+oe.toString(10):oe.toString(10)}U.debuglog=function(oe){if(oe=oe.toUpperCase(),!C[oe])if(M.test(oe)){var le=process.pid;C[oe]=function(){var Oe=U.format.apply(U,arguments);console.error("%s %d: %s",oe,le,Oe)}}else C[oe]=function(){};return C[oe]},U.inspect=L,L.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},L.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},U.types=l(8791),U.isArray=b,U.isBoolean=y,U.isNull=c,U.isNullOrUndefined=function(oe){return null==oe},U.isNumber=m,U.isString=d,U.isSymbol=function(oe){return"symbol"==typeof oe},U.isUndefined=ne,U.isRegExp=ve,U.types.isRegExp=ve,U.isObject=pe,U.isDate=x,U.types.isDate=x,U.isError=Y,U.types.isNativeError=Y,U.isFunction=W,U.isPrimitive=function(oe){return null===oe||"boolean"==typeof oe||"number"==typeof oe||"string"==typeof oe||"symbol"==typeof oe||void 0===oe},U.isBuffer=l(1451);var te=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function be(){var oe=new Date,le=[X(oe.getHours()),X(oe.getMinutes()),X(oe.getSeconds())].join(":");return[oe.getDate(),te[oe.getMonth()],le].join(" ")}function Le(oe,le){return Object.prototype.hasOwnProperty.call(oe,le)}U.log=function(){console.log("%s - %s",be(),U.format.apply(U,arguments))},U.inherits=l(3894),U._extend=function(oe,le){if(!le||!pe(le))return oe;for(var Oe=Object.keys(le),Ne=Oe.length;Ne--;)oe[Oe[Ne]]=le[Oe[Ne]];return oe};var Qe="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function Se(oe,le){if(!oe){var Oe=new Error("Promise was rejected with a falsy value");Oe.reason=oe,oe=Oe}return le(oe)}U.promisify=function(le){if("function"!=typeof le)throw new TypeError('The "original" argument must be of type Function');if(Qe&&le[Qe]){var Oe;if("function"!=typeof(Oe=le[Qe]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Oe,Qe,{value:Oe,enumerable:!1,writable:!1,configurable:!0}),Oe}function Oe(){for(var Ne,Ye,mt=new Promise(function(Rt,kt){Ne=Rt,Ye=kt}),nt=[],vt=0;vt<arguments.length;vt++)nt.push(arguments[vt]);nt.push(function(Rt,kt){Rt?Ye(Rt):Ne(kt)});try{le.apply(this,nt)}catch(Rt){Ye(Rt)}return mt}return Object.setPrototypeOf(Oe,Object.getPrototypeOf(le)),Qe&&Object.defineProperty(Oe,Qe,{value:Oe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Oe,v(le))},U.promisify.custom=Qe,U.callbackify=function(oe){if("function"!=typeof oe)throw new TypeError('The "original" argument must be of type Function');function le(){for(var Oe=[],Ne=0;Ne<arguments.length;Ne++)Oe.push(arguments[Ne]);var Ye=Oe.pop();if("function"!=typeof Ye)throw new TypeError("The last argument must be of type Function");var mt=this,nt=function(){return Ye.apply(mt,arguments)};oe.apply(this,Oe).then(function(vt){process.nextTick(nt.bind(null,null,vt))},function(vt){process.nextTick(Se.bind(null,vt,nt))})}return Object.setPrototypeOf(le,Object.getPrototypeOf(oe)),Object.defineProperties(le,v(oe)),le}},1042:(se,U,l)=>{l.d(U,{Z:()=>I});var v,a=new Uint8Array(16);function C(){if(!v&&!(v="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(a)}const M=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,L=function(P){return"string"==typeof P&&M.test(P)};for(var j=[],B=0;B<256;++B)j.push((B+256).toString(16).substr(1));const I=function(P,R,T){var b=(P=P||{}).random||(P.rng||C)();if(b[6]=15&b[6]|64,b[8]=63&b[8]|128,R){T=T||0;for(var y=0;y<16;++y)R[T+y]=b[y];return R}return function(P){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,T=(j[P[R+0]]+j[P[R+1]]+j[P[R+2]]+j[P[R+3]]+"-"+j[P[R+4]]+j[P[R+5]]+"-"+j[P[R+6]]+j[P[R+7]]+"-"+j[P[R+8]]+j[P[R+9]]+"-"+j[P[R+10]]+j[P[R+11]]+j[P[R+12]]+j[P[R+13]]+j[P[R+14]]+j[P[R+15]]).toLowerCase();if(!L(T))throw TypeError("Stringified UUID is invalid");return T}(b)}},2899:(se,U)=>{function l(v,a,C){var M=C[C.length-1];v===M.element&&(C.pop(),M=C[C.length-1]);var N=M.element,L=M.index;Array.isArray(N)?N.push(v):L===a.length-2?N[a.pop()]=v:a.push(v)}U.stringify=function(a){var C=[];C.push({obj:a});for(var N,L,B,S,E,I,P,R,T,M="";N=C.pop();)if(L=N.obj,M+=N.prefix||"",B=N.val||"")M+=B;else if("object"!=typeof L)M+=void 0===L?null:JSON.stringify(L);else if(null===L)M+="null";else if(Array.isArray(L)){for(C.push({val:"]"}),S=L.length-1;S>=0;S--)C.push({obj:L[S],prefix:0===S?"":","});C.push({val:"["})}else{for(I in E=[],L)L.hasOwnProperty(I)&&E.push(I);for(C.push({val:"}"}),S=E.length-1;S>=0;S--)R=L[P=E[S]],T=S>0?",":"",T+=JSON.stringify(P)+":",C.push({obj:R,prefix:T});C.push({val:"{"})}return M},U.parse=function(v){for(var N,L,j,B,S,w,E,I,P,a=[],C=[],M=0;;)if("}"!==(N=v[M++])&&"]"!==N&&void 0!==N)switch(N){case" ":case"\t":case"\n":case":":case",":break;case"n":M+=3,l(null,a,C);break;case"t":M+=3,l(!0,a,C);break;case"f":M+=4,l(!1,a,C);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(L="",M--;;){if(j=v[M++],!/[\d\.\-e\+]/.test(j)){M--;break}L+=j}l(parseFloat(L),a,C);break;case'"':for(B="",S=void 0,w=0;'"'!==(E=v[M++])||"\\"===S&&w%2==1;)B+=E,"\\"===(S=E)?w++:w=0;l(JSON.parse('"'+B+'"'),a,C);break;case"[":a.push((I={element:[],index:a.length}).element),C.push(I);break;case"{":a.push((P={element:{},index:a.length}).element),C.push(P);break;default:throw new Error("unexpectedly reached end of input: "+N)}else{if(1===a.length)return a.pop();l(a.pop(),a,C)}}},2031:(se,U,l)=>{var v=l(9076),a=l(7029),C=l(5834),M=C("Object.prototype.toString"),N=l(6259)(),L="undefined"==typeof globalThis?global:globalThis,j=a(),B=C("String.prototype.slice"),S={},w=l(8555),E=Object.getPrototypeOf;N&&w&&E&&v(j,function(R){if("function"==typeof L[R]){var T=new L[R];if(Symbol.toStringTag in T){var b=E(T),y=w(b,Symbol.toStringTag);if(!y){var c=E(b);y=w(c,Symbol.toStringTag)}S[R]=y.get}}});var P=l(597);se.exports=function(T){return!!P(T)&&(N&&Symbol.toStringTag in T?function(T){var b=!1;return v(S,function(y,c){if(!b)try{var o=y.call(T);o===c&&(b=o)}catch{}}),b}(T):B(M(T),8,-1))}},1995:se=>{se.exports=function(){for(var v={},a=0;a<arguments.length;a++){var C=arguments[a];for(var M in C)U.call(C,M)&&(v[M]=C[M])}return v};var U=Object.prototype.hasOwnProperty},655:(se,U,l)=>{function B(Y,W,Q,G){return new(Q||(Q=Promise))(function(te,be){function Le(ge){try{Se(G.next(ge))}catch(oe){be(oe)}}function Qe(ge){try{Se(G.throw(ge))}catch(oe){be(oe)}}function Se(ge){ge.done?te(ge.value):function(te){return te instanceof Q?te:new Q(function(be){be(te)})}(ge.value).then(Le,Qe)}Se((G=G.apply(Y,W||[])).next())})}function y(Y){return this instanceof y?(this.v=Y,this):new y(Y)}function c(Y,W,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X,G=Q.apply(Y,W||[]),te=[];return X={},be("next"),be("throw"),be("return"),X[Symbol.asyncIterator]=function(){return this},X;function be(le){G[le]&&(X[le]=function(Oe){return new Promise(function(Ne,Ye){te.push([le,Oe,Ne,Ye])>1||Le(le,Oe)})})}function Le(le,Oe){try{!function(le){le.value instanceof y?Promise.resolve(le.value.v).then(Se,ge):oe(te[0][2],le)}(G[le](Oe))}catch(Ne){oe(te[0][3],Ne)}}function Se(le){Le("next",le)}function ge(le){Le("throw",le)}function oe(le,Oe){le(Oe),te.shift(),te.length&&Le(te[0][0],te[0][1])}}function m(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,W=Y[Symbol.asyncIterator];return W?W.call(Y):(Y=function(Y){var W="function"==typeof Symbol&&Symbol.iterator,Q=W&&Y[W],G=0;if(Q)return Q.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&G>=Y.length&&(Y=void 0),{value:Y&&Y[G++],done:!Y}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),Q={},G("next"),G("throw"),G("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function G(te){Q[te]=Y[te]&&function(be){return new Promise(function(Le,Qe){!function(te,be,Le,Qe){Promise.resolve(Qe).then(function(Se){te({value:Se,done:Le})},be)}(Le,Qe,(be=Y[te](be)).done,be.value)})}}}l.d(U,{mG:()=>B,qq:()=>y,FC:()=>c,KL:()=>m})},2480:()=>{},4703:()=>{},7029:se=>{var U=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],l="undefined"==typeof globalThis?global:globalThis;se.exports=function(){for(var a=[],C=0;C<U.length;C++)"function"==typeof l[U[C]]&&(a[a.length]=U[C]);return a}},8555:(se,U,l)=>{var a=l(5203)("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch{a=null}se.exports=a},7340:(se,U,l)=>{l.d(U,{l3:()=>C,_j:()=>v,LC:()=>a,ZN:()=>c,jt:()=>N,oQ:()=>I,F4:()=>w,vP:()=>j,SB:()=>S,oB:()=>B,eR:()=>E,X$:()=>M,_7:()=>R,ZE:()=>o,k1:()=>m});class v{}class a{}const C="*";function M(d,$){return{type:7,name:d,definitions:$,options:{}}}function N(d,$=null){return{type:4,styles:$,timings:d}}function j(d,$=null){return{type:2,steps:d,options:$}}function B(d){return{type:6,styles:d,offset:null}}function S(d,$,ne){return{type:0,name:d,styles:$,options:ne}}function w(d){return{type:5,steps:d}}function E(d,$,ne=null){return{type:1,expr:d,animation:$,options:ne}}function I(d,$=null){return{type:8,animation:d,options:$}}function R(d,$=null){return{type:10,animation:d,options:$}}function y(d){Promise.resolve(null).then(d)}class c{constructor($=0,ne=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=$+ne}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach($=>$()),this._onDoneFns=[])}onStart($){this._onStartFns.push($)}onDone($){this._onDoneFns.push($)}onDestroy($){this._onDestroyFns.push($)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){y(()=>this._onFinish())}_onStart(){this._onStartFns.forEach($=>$()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach($=>$()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition($){this._position=this.totalTime?$*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback($){const ne="start"==$?this._onStartFns:this._onDoneFns;ne.forEach(ve=>ve()),ne.length=0}}class o{constructor($){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=$;let ne=0,ve=0,pe=0;const x=this.players.length;0==x?y(()=>this._onFinish()):this.players.forEach(Y=>{Y.onDone(()=>{++ne==x&&this._onFinish()}),Y.onDestroy(()=>{++ve==x&&this._onDestroy()}),Y.onStart(()=>{++pe==x&&this._onStart()})}),this.totalTime=this.players.reduce((Y,W)=>Math.max(Y,W.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach($=>$()),this._onDoneFns=[])}init(){this.players.forEach($=>$.init())}onStart($){this._onStartFns.push($)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach($=>$()),this._onStartFns=[])}onDone($){this._onDoneFns.push($)}onDestroy($){this._onDestroyFns.push($)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach($=>$.play())}pause(){this.players.forEach($=>$.pause())}restart(){this.players.forEach($=>$.restart())}finish(){this._onFinish(),this.players.forEach($=>$.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach($=>$.destroy()),this._onDestroyFns.forEach($=>$()),this._onDestroyFns=[])}reset(){this.players.forEach($=>$.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition($){const ne=$*this.totalTime;this.players.forEach(ve=>{const pe=ve.totalTime?Math.min(1,ne/ve.totalTime):1;ve.setPosition(pe)})}getPosition(){const $=this.players.reduce((ne,ve)=>null===ne||ve.totalTime>ne.totalTime?ve:ne,null);return null!=$?$.getPosition():0}beforeDestroy(){this.players.forEach($=>{$.beforeDestroy&&$.beforeDestroy()})}triggerCallback($){const ne="start"==$?this._onStartFns:this._onDoneFns;ne.forEach(ve=>ve()),ne.length=0}}const m="!"},1281:(se,U,l)=>{l.d(U,{Eq:()=>N,Ig:()=>a,fI:()=>j,su:()=>C});var v=l(7777);function a(S){return null!=S&&"false"!=`${S}`}function C(S,w=0){return function(S){return!isNaN(parseFloat(S))&&!isNaN(Number(S))}(S)?Number(S):w}function N(S){return Array.isArray(S)?S:[S]}function j(S){return S instanceof v.ElementRef?S.nativeElement:S}},4691:(se,U,l)=>{l.d(U,{Zt:()=>ut,Hk:()=>Ei,Wj:()=>Wn,_t:()=>js});var v=l(7777),a=l(1457),C=l(1281),M=l(7579),N=l(9646),L=l(8306),j=l(4968),B=l(6406),w=(l(3101),l(3601)),E=l(9300),I=l(3353);let m=(()=>{class q{constructor(_,z,V){this._ngZone=_,this._platform=z,this._scrolled=new M.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=V}register(_){this.scrollContainers.has(_)||this.scrollContainers.set(_,_.elementScrolled().subscribe(()=>this._scrolled.next(_)))}deregister(_){const z=this.scrollContainers.get(_);z&&(z.unsubscribe(),this.scrollContainers.delete(_))}scrolled(_=20){return this._platform.isBrowser?new L.y(z=>{this._globalSubscription||this._addGlobalListener();const V=_>0?this._scrolled.pipe((0,w.e)(_)).subscribe(z):this._scrolled.subscribe(z);return this._scrolledCount++,()=>{V.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,N.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((_,z)=>this.deregister(z)),this._scrolled.complete()}ancestorScrolled(_,z){const V=this.getAncestorScrollContainers(_);return this.scrolled(z).pipe((0,E.h)(ue=>!ue||V.indexOf(ue)>-1))}getAncestorScrollContainers(_){const z=[];return this.scrollContainers.forEach((V,ue)=>{this._scrollableContainsElement(ue,_)&&z.push(ue)}),z}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(_,z){let V=(0,C.fI)(z),ue=_.getElementRef().nativeElement;do{if(V==ue)return!0}while(V=V.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const _=this._getWindow();return(0,j.R)(_.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275inject(v.NgZone),v.\u0275\u0275inject(I.t4),v.\u0275\u0275inject(a.DOCUMENT,8))},q.\u0275prov=v.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"}),q})(),ne=(()=>{class q{constructor(_,z,V){this._platform=_,this._change=new M.x,this._changeListener=ue=>{this._change.next(ue)},this._document=V,z.runOutsideAngular(()=>{if(_.isBrowser){const ue=this._getWindow();ue.addEventListener("resize",this._changeListener),ue.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const _=this._getWindow();_.removeEventListener("resize",this._changeListener),_.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const _={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),_}getViewportRect(){const _=this.getViewportScrollPosition(),{width:z,height:V}=this.getViewportSize();return{top:_.top,left:_.left,bottom:_.top+V,right:_.left+z,height:V,width:z}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const _=this._document,z=this._getWindow(),V=_.documentElement,ue=V.getBoundingClientRect();return{top:-ue.top||_.body.scrollTop||z.scrollY||V.scrollTop||0,left:-ue.left||_.body.scrollLeft||z.scrollX||V.scrollLeft||0}}change(_=20){return _>0?this._change.pipe((0,w.e)(_)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const _=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:_.innerWidth,height:_.innerHeight}:{width:0,height:0}}}return q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275inject(I.t4),v.\u0275\u0275inject(v.NgZone),v.\u0275\u0275inject(a.DOCUMENT,8))},q.\u0275prov=v.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"}),q})(),Q=(()=>{class q{}return q.\u0275fac=function(_){return new(_||q)},q.\u0275mod=v.\u0275\u0275defineNgModule({type:q}),q.\u0275inj=v.\u0275\u0275defineInjector({}),q})();var Gn=l(4986),xr=l(5963),pi=l(727),Co=l(6451),En=l(2722),mi=l(8675),nr=l(4004),Ms=l(5698),Ao=l(8505),Ba=l(3900);const tn=new v.InjectionToken("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,v.inject)(a.DOCUMENT)}});let Do=(()=>{class q{constructor(_){if(this.value="ltr",this.change=new v.EventEmitter,_){const V=_.documentElement?_.documentElement.dir:null,ue=(_.body?_.body.dir:null)||V;this.value="ltr"===ue||"rtl"===ue?ue:"ltr"}}ngOnDestroy(){this.change.complete()}}return q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275inject(tn,8))},q.\u0275prov=v.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();function Vi(q,O,_){for(let z in O)if(O.hasOwnProperty(z)){const V=O[z];V?q.setProperty(z,V,_?.has(z)?"important":""):q.removeProperty(z)}return q}function rr(q,O){const _=O?"":"none";Vi(q.style,{"touch-action":O?"":"none","-webkit-user-drag":O?"":"none","-webkit-tap-highlight-color":O?"":"transparent","user-select":_,"-ms-user-select":_,"-webkit-user-select":_,"-moz-user-select":_})}function Po(q,O,_){Vi(q.style,{position:O?"":"fixed",top:O?"":"0",opacity:O?"":"0",left:O?"":"-999em"},_)}function Gi(q,O){return O&&"none"!=O?q+" "+O:q}function Xe(q){const O=q.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(q)*O}function xs(q,O){return q.getPropertyValue(O).split(",").map(z=>z.trim())}function Qi(q){const O=q.getBoundingClientRect();return{top:O.top,right:O.right,bottom:O.bottom,left:O.left,width:O.width,height:O.height,x:O.x,y:O.y}}function Zi(q,O,_){const{top:z,bottom:V,left:ue,right:Ce}=q;return _>=z&&_<=V&&O>=ue&&O<=Ce}function Sn(q,O,_){q.top+=O,q.bottom=q.top+q.height,q.left+=_,q.right=q.left+q.width}function Ct(q,O,_,z){const{top:V,right:ue,bottom:Ce,left:Re,width:We,height:et}=q,_t=We*O,ln=et*O;return z>V-ln&&z<Ce+ln&&_>Re-_t&&_<ue+_t}class Io{constructor(O,_){this._document=O,this._viewportRuler=_,this.positions=new Map}clear(){this.positions.clear()}cache(O){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),O.forEach(_=>{this.positions.set(_,{scrollPosition:{top:_.scrollTop,left:_.scrollLeft},clientRect:Qi(_)})})}handleScroll(O){const _=(0,I.sA)(O),z=this.positions.get(_);if(!z)return null;const V=z.scrollPosition;let ue,Ce;if(_===this._document){const et=this._viewportRuler.getViewportScrollPosition();ue=et.top,Ce=et.left}else ue=_.scrollTop,Ce=_.scrollLeft;const Re=V.top-ue,We=V.left-Ce;return this.positions.forEach((et,_t)=>{et.clientRect&&_!==_t&&_.contains(_t)&&Sn(et.clientRect,Re,We)}),V.top=ue,V.left=Ce,{top:Re,left:We}}}function gi(q){const O=q.cloneNode(!0),_=O.querySelectorAll("[id]"),z=q.nodeName.toLowerCase();O.removeAttribute("id");for(let V=0;V<_.length;V++)_[V].removeAttribute("id");return"canvas"===z?Lr(q,O):("input"===z||"select"===z||"textarea"===z)&&Ls(q,O),ks("canvas",q,O,Lr),ks("input, textarea, select",q,O,Ls),O}function ks(q,O,_,z){const V=O.querySelectorAll(q);if(V.length){const ue=_.querySelectorAll(q);for(let Ce=0;Ce<V.length;Ce++)z(V[Ce],ue[Ce])}}let Yi=0;function Ls(q,O){"file"!==O.type&&(O.value=q.value),"radio"===O.type&&O.name&&(O.name=`mat-clone-${O.name}-${Yi++}`)}function Lr(q,O){const _=O.getContext("2d");if(_)try{_.drawImage(q,0,0)}catch{}}const To=(0,I.i$)({passive:!0}),Br=(0,I.i$)({passive:!1}),vr=new Set(["position"]);class Fa{constructor(O,_,z,V,ue,Ce){this._config=_,this._document=z,this._ngZone=V,this._viewportRuler=ue,this._dragDropRegistry=Ce,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new M.x,this._pointerMoveSubscription=pi.w0.EMPTY,this._pointerUpSubscription=pi.w0.EMPTY,this._scrollSubscription=pi.w0.EMPTY,this._resizeSubscription=pi.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new M.x,this.started=new M.x,this.released=new M.x,this.ended=new M.x,this.entered=new M.x,this.exited=new M.x,this.dropped=new M.x,this.moved=this._moveEvents,this._pointerDown=Re=>{if(this.beforeStarted.next(),this._handles.length){const We=this._handles.find(et=>Re.target&&(Re.target===et||et.contains(Re.target)));We&&!this._disabledHandles.has(We)&&!this.disabled&&this._initializeDragSequence(We,Re)}else this.disabled||this._initializeDragSequence(this._rootElement,Re)},this._pointerMove=Re=>{const We=this._getPointerPositionOnPage(Re);if(!this._hasStartedDragging){if(Math.abs(We.x-this._pickupPositionOnPage.x)+Math.abs(We.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const Si=Date.now()>=this._dragStartTime+this._getDragStartDelay(Re),Ur=this._dropContainer;if(!Si)return void this._endDragSequence(Re);(!Ur||!Ur.isDragging()&&!Ur.isReceiving())&&(Re.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(Re)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),Re.preventDefault();const et=this._getConstrainedPointerPosition(We);if(this._hasMoved=!0,this._lastKnownPointerPosition=We,this._updatePointerDirectionDelta(et),this._dropContainer)this._updateActiveDropContainer(et,We);else{const _t=this._activeTransform;_t.x=et.x-this._pickupPositionOnPage.x+this._passiveTransform.x,_t.y=et.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(_t.x,_t.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:et,event:Re,distance:this._getDragDistance(et),delta:this._pointerDirectionDelta})})},this._pointerUp=Re=>{this._endDragSequence(Re)},this.withRootElement(O).withParent(_.parentDragRef||null),this._parentPositions=new Io(z,ue),Ce.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(O){const _=(0,C.Ig)(O);_!==this._disabled&&(this._disabled=_,this._toggleNativeDragInteractions(),this._handles.forEach(z=>rr(z,_)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(O){this._handles=O.map(z=>(0,C.fI)(z)),this._handles.forEach(z=>rr(z,this.disabled)),this._toggleNativeDragInteractions();const _=new Set;return this._disabledHandles.forEach(z=>{this._handles.indexOf(z)>-1&&_.add(z)}),this._disabledHandles=_,this}withPreviewTemplate(O){return this._previewTemplate=O,this}withPlaceholderTemplate(O){return this._placeholderTemplate=O,this}withRootElement(O){const _=(0,C.fI)(O);return _!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{_.addEventListener("mousedown",this._pointerDown,Br),_.addEventListener("touchstart",this._pointerDown,To)}),this._initialTransform=void 0,this._rootElement=_),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(O){return this._boundaryElement=O?(0,C.fI)(O):null,this._resizeSubscription.unsubscribe(),O&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(O){return this._parentDragRef=O,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(O){!this._disabledHandles.has(O)&&this._handles.indexOf(O)>-1&&(this._disabledHandles.add(O),rr(O,!0))}enableHandle(O){this._disabledHandles.has(O)&&(this._disabledHandles.delete(O),rr(O,this.disabled))}withDirection(O){return this._direction=O,this}_withDropContainer(O){this._dropContainer=O}getFreeDragPosition(){const O=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:O.x,y:O.y}}setFreeDragPosition(O){return this._activeTransform={x:0,y:0},this._passiveTransform.x=O.x,this._passiveTransform.y=O.y,this._dropContainer||this._applyRootElementTransform(O.x,O.y),this}withPreviewContainer(O){return this._previewContainer=O,this}_sortFromLastPointerPosition(){const O=this._lastKnownPointerPosition;O&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(O),O)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(O){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(O),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const _=this._getPointerPositionOnPage(O);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(_),dropPoint:_})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(O){ir(O)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const _=this._dropContainer;if(_){const z=this._rootElement,V=z.parentNode,ue=this._placeholder=this._createPlaceholderElement(),Ce=this._anchor=this._anchor||this._document.createComment(""),Re=this._getShadowRoot();V.insertBefore(Ce,z),this._initialTransform=z.style.transform||"",this._preview=this._createPreviewElement(),Po(z,!1,vr),this._document.body.appendChild(V.replaceChild(ue,z)),this._getPreviewInsertionPoint(V,Re).appendChild(this._preview),this.started.next({source:this}),_.start(),this._initialContainer=_,this._initialIndex=_.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(_?_.getScrollableParents():[])}_initializeDragSequence(O,_){this._parentDragRef&&_.stopPropagation();const z=this.isDragging(),V=ir(_),ue=!V&&0!==_.button,Ce=this._rootElement,Re=(0,I.sA)(_),We=!V&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),et=V?function(q){const O=q.touches&&q.touches[0]||q.changedTouches&&q.changedTouches[0];return!(!O||-1!==O.identifier||null!=O.radiusX&&1!==O.radiusX||null!=O.radiusY&&1!==O.radiusY)}(_):0===(q=_).offsetX&&0===q.offsetY;var q;if(Re&&Re.draggable&&"mousedown"===_.type&&_.preventDefault(),z||ue||We||et)return;if(this._handles.length){const Bn=Ce.style;this._rootElementTapHighlight=Bn.webkitTapHighlightColor||"",Bn.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Bn=>this._updateOnScroll(Bn)),this._boundaryElement&&(this._boundaryRect=Qi(this._boundaryElement));const _t=this._previewTemplate;this._pickupPositionInElement=_t&&_t.template&&!_t.matchSize?{x:0,y:0}:this._getPointerPositionInElement(O,_);const ln=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(_);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:ln.x,y:ln.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,_)}_cleanupDragArtifacts(O){Po(this._rootElement,!0,vr),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const _=this._dropContainer,z=_.getItemIndex(this),V=this._getPointerPositionOnPage(O),ue=this._getDragDistance(V),Ce=_._isOverContainer(V.x,V.y);this.ended.next({source:this,distance:ue,dropPoint:V}),this.dropped.next({item:this,currentIndex:z,previousIndex:this._initialIndex,container:_,previousContainer:this._initialContainer,isPointerOverContainer:Ce,distance:ue,dropPoint:V}),_.drop(this,z,this._initialIndex,this._initialContainer,Ce,ue,V),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:O,y:_},{x:z,y:V}){let ue=this._initialContainer._getSiblingContainerFromPosition(this,O,_);!ue&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(O,_)&&(ue=this._initialContainer),ue&&ue!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=ue,this._dropContainer.enter(this,O,_,ue===this._initialContainer&&ue.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:ue,currentIndex:ue.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(z,V),this._dropContainer._sortItem(this,O,_,this._pointerDirectionDelta),this._applyPreviewTransform(O-this._pickupPositionInElement.x,_-this._pickupPositionInElement.y))}_createPreviewElement(){const O=this._previewTemplate,_=this.previewClass,z=O?O.template:null;let V;if(z&&O){const ue=O.matchSize?this._rootElement.getBoundingClientRect():null,Ce=O.viewContainer.createEmbeddedView(z,O.context);Ce.detectChanges(),V=Nr(Ce,this._document),this._previewRef=Ce,O.matchSize?sr(V,ue):V.style.transform=gr(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const ue=this._rootElement;V=gi(ue),sr(V,ue.getBoundingClientRect()),this._initialTransform&&(V.style.transform=this._initialTransform)}return Vi(V.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},vr),rr(V,!1),V.classList.add("cdk-drag-preview"),V.setAttribute("dir",this._direction),_&&(Array.isArray(_)?_.forEach(ue=>V.classList.add(ue)):V.classList.add(_)),V}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const O=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(O.left,O.top);const _=function(q){const O=getComputedStyle(q),_=xs(O,"transition-property"),z=_.find(Re=>"transform"===Re||"all"===Re);if(!z)return 0;const V=_.indexOf(z),ue=xs(O,"transition-duration"),Ce=xs(O,"transition-delay");return Xe(ue[V])+Xe(Ce[V])}(this._preview);return 0===_?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(z=>{const V=Ce=>{(!Ce||(0,I.sA)(Ce)===this._preview&&"transform"===Ce.propertyName)&&(this._preview?.removeEventListener("transitionend",V),z(),clearTimeout(ue))},ue=setTimeout(V,1.5*_);this._preview.addEventListener("transitionend",V)}))}_createPlaceholderElement(){const O=this._placeholderTemplate,_=O?O.template:null;let z;return _?(this._placeholderRef=O.viewContainer.createEmbeddedView(_,O.context),this._placeholderRef.detectChanges(),z=Nr(this._placeholderRef,this._document)):z=gi(this._rootElement),z.classList.add("cdk-drag-placeholder"),z}_getPointerPositionInElement(O,_){const z=this._rootElement.getBoundingClientRect(),V=O===this._rootElement?null:O,ue=V?V.getBoundingClientRect():z,Ce=ir(_)?_.targetTouches[0]:_,Re=this._getViewportScrollPosition();return{x:ue.left-z.left+(Ce.pageX-ue.left-Re.left),y:ue.top-z.top+(Ce.pageY-ue.top-Re.top)}}_getPointerPositionOnPage(O){const _=this._getViewportScrollPosition(),z=ir(O)?O.touches[0]||O.changedTouches[0]||{pageX:0,pageY:0}:O,V=z.pageX-_.left,ue=z.pageY-_.top;if(this._ownerSVGElement){const Ce=this._ownerSVGElement.getScreenCTM();if(Ce){const Re=this._ownerSVGElement.createSVGPoint();return Re.x=V,Re.y=ue,Re.matrixTransform(Ce.inverse())}}return{x:V,y:ue}}_getConstrainedPointerPosition(O){const _=this._dropContainer?this._dropContainer.lockAxis:null;let{x:z,y:V}=this.constrainPosition?this.constrainPosition(O,this):O;if("x"===this.lockAxis||"x"===_?V=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===_)&&(z=this._pickupPositionOnPage.x),this._boundaryRect){const{x:ue,y:Ce}=this._pickupPositionInElement,Re=this._boundaryRect,We=this._previewRect,et=Re.top+Ce,_t=Re.bottom-(We.height-Ce);z=$n(z,Re.left+ue,Re.right-(We.width-ue)),V=$n(V,et,_t)}return{x:z,y:V}}_updatePointerDirectionDelta(O){const{x:_,y:z}=O,V=this._pointerDirectionDelta,ue=this._pointerPositionAtLastDirectionChange,Ce=Math.abs(_-ue.x),Re=Math.abs(z-ue.y);return Ce>this._config.pointerDirectionChangeThreshold&&(V.x=_>ue.x?1:-1,ue.x=_),Re>this._config.pointerDirectionChangeThreshold&&(V.y=z>ue.y?1:-1,ue.y=z),V}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const O=this._handles.length>0||!this.isDragging();O!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=O,rr(this._rootElement,O))}_removeRootElementListeners(O){O.removeEventListener("mousedown",this._pointerDown,Br),O.removeEventListener("touchstart",this._pointerDown,To)}_applyRootElementTransform(O,_){const z=gr(O,_),V=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=V.transform&&"none"!=V.transform?V.transform:""),V.transform=Gi(z,this._initialTransform)}_applyPreviewTransform(O,_){const z=this._previewTemplate?.template?void 0:this._initialTransform,V=gr(O,_);this._preview.style.transform=Gi(V,z)}_getDragDistance(O){const _=this._pickupPositionOnPage;return _?{x:O.x-_.x,y:O.y-_.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:O,y:_}=this._passiveTransform;if(0===O&&0===_||this.isDragging()||!this._boundaryElement)return;const z=this._boundaryElement.getBoundingClientRect(),V=this._rootElement.getBoundingClientRect();if(0===z.width&&0===z.height||0===V.width&&0===V.height)return;const ue=z.left-V.left,Ce=V.right-z.right,Re=z.top-V.top,We=V.bottom-z.bottom;z.width>V.width?(ue>0&&(O+=ue),Ce>0&&(O-=Ce)):O=0,z.height>V.height?(Re>0&&(_+=Re),We>0&&(_-=We)):_=0,(O!==this._passiveTransform.x||_!==this._passiveTransform.y)&&this.setFreeDragPosition({y:_,x:O})}_getDragStartDelay(O){const _=this.dragStartDelay;return"number"==typeof _?_:ir(O)?_.touch:_?_.mouse:0}_updateOnScroll(O){const _=this._parentPositions.handleScroll(O);if(_){const z=(0,I.sA)(O);this._boundaryRect&&z!==this._boundaryElement&&z.contains(this._boundaryElement)&&Sn(this._boundaryRect,_.top,_.left),this._pickupPositionOnPage.x+=_.left,this._pickupPositionOnPage.y+=_.top,this._dropContainer||(this._activeTransform.x-=_.left,this._activeTransform.y-=_.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const O=this._parentPositions.positions.get(this._document);return O?O.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,I.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(O,_){const z=this._previewContainer||"global";if("parent"===z)return O;if("global"===z){const V=this._document;return _||V.fullscreenElement||V.webkitFullscreenElement||V.mozFullScreenElement||V.msFullscreenElement||V.body}return(0,C.fI)(z)}}function gr(q,O){return`translate3d(${Math.round(q)}px, ${Math.round(O)}px, 0)`}function $n(q,O,_){return Math.max(O,Math.min(_,q))}function ir(q){return"t"===q.type[0]}function Nr(q,O){const _=q.rootNodes;if(1===_.length&&_[0].nodeType===O.ELEMENT_NODE)return _[0];const z=O.createElement("div");return _.forEach(V=>z.appendChild(V)),z}function sr(q,O){q.style.width=`${O.width}px`,q.style.height=`${O.height}px`,q.style.transform=gr(O.left,O.top)}function Yr(q,O){return Math.max(0,Math.min(O,q))}class _i{constructor(O,_,z,V,ue){this._dragDropRegistry=_,this._ngZone=V,this._viewportRuler=ue,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new M.x,this.entered=new M.x,this.exited=new M.x,this.dropped=new M.x,this.sorted=new M.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=pi.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new M.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(q=0,O=Gn.z){return q<0&&(q=0),(0,xr.H)(q,q,O)}(0,B.Z).pipe((0,En.R)(this._stopScrollTimers)).subscribe(()=>{const Ce=this._scrollNode,Re=this.autoScrollStep;1===this._verticalScrollDirection?Ce.scrollBy(0,-Re):2===this._verticalScrollDirection&&Ce.scrollBy(0,Re),1===this._horizontalScrollDirection?Ce.scrollBy(-Re,0):2===this._horizontalScrollDirection&&Ce.scrollBy(Re,0)})},this.element=(0,C.fI)(O),this._document=z,this.withScrollableParents([this.element]),_.registerDropContainer(this),this._parentPositions=new Io(z,ue)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(O,_,z,V){let ue;this._draggingStarted(),null==V?(ue=this.sortingDisabled?this._draggables.indexOf(O):-1,-1===ue&&(ue=this._getItemIndexFromPointerPosition(O,_,z))):ue=V;const Ce=this._activeDraggables,Re=Ce.indexOf(O),We=O.getPlaceholderElement();let et=Ce[ue];if(et===O&&(et=Ce[ue+1]),Re>-1&&Ce.splice(Re,1),et&&!this._dragDropRegistry.isDragging(et)){const _t=et.getRootElement();_t.parentElement.insertBefore(We,_t),Ce.splice(ue,0,O)}else if(this._shouldEnterAsFirstChild(_,z)){const _t=Ce[0].getRootElement();_t.parentNode.insertBefore(We,_t),Ce.unshift(O)}else(0,C.fI)(this.element).appendChild(We),Ce.push(O);We.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:O,container:this,currentIndex:this.getItemIndex(O)})}exit(O){this._reset(),this.exited.next({item:O,container:this})}drop(O,_,z,V,ue,Ce,Re){this._reset(),this.dropped.next({item:O,currentIndex:_,previousIndex:z,container:this,previousContainer:V,isPointerOverContainer:ue,distance:Ce,dropPoint:Re})}withItems(O){const _=this._draggables;return this._draggables=O,O.forEach(z=>z._withDropContainer(this)),this.isDragging()&&(_.filter(V=>V.isDragging()).every(V=>-1===O.indexOf(V))?this._reset():this._cacheItems()),this}withDirection(O){return this._direction=O,this}connectedTo(O){return this._siblings=O.slice(),this}withOrientation(O){return this._orientation=O,this}withScrollableParents(O){const _=(0,C.fI)(this.element);return this._scrollableElements=-1===O.indexOf(_)?[_,...O]:O.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(O){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(z=>z.drag===O):this._draggables.indexOf(O)}isReceiving(){return this._activeSiblings.size>0}_sortItem(O,_,z,V){if(this.sortingDisabled||!this._clientRect||!Ct(this._clientRect,.05,_,z))return;const ue=this._itemPositions,Ce=this._getItemIndexFromPointerPosition(O,_,z,V);if(-1===Ce&&ue.length>0)return;const Re="horizontal"===this._orientation,We=ue.findIndex(fn=>fn.drag===O),et=ue[Ce],ln=et.clientRect,Bn=We>Ce?1:-1,Si=this._getItemOffsetPx(ue[We].clientRect,ln,Bn),Ur=this._getSiblingOffsetPx(We,ue,Bn),ar=ue.slice();(function(q,O,_){const z=Yr(O,q.length-1),V=Yr(_,q.length-1);if(z===V)return;const ue=q[z],Ce=V<z?-1:1;for(let Re=z;Re!==V;Re+=Ce)q[Re]=q[Re+Ce];q[V]=ue})(ue,We,Ce),this.sorted.next({previousIndex:We,currentIndex:Ce,container:this,item:O}),ue.forEach((fn,Us)=>{if(ar[Us]===fn)return;const jo=fn.drag===O,zs=jo?Si:Ur,Uo=jo?O.getPlaceholderElement():fn.drag.getRootElement();fn.offset+=zs,Re?(Uo.style.transform=Gi(`translate3d(${Math.round(fn.offset)}px, 0, 0)`,fn.initialTransform),Sn(fn.clientRect,0,zs)):(Uo.style.transform=Gi(`translate3d(0, ${Math.round(fn.offset)}px, 0)`,fn.initialTransform),Sn(fn.clientRect,zs,0))}),this._previousSwap.overlaps=Zi(ln,_,z),this._previousSwap.drag=et.drag,this._previousSwap.delta=Re?V.x:V.y}_startScrollingIfNecessary(O,_){if(this.autoScrollDisabled)return;let z,V=0,ue=0;if(this._parentPositions.positions.forEach((Ce,Re)=>{Re===this._document||!Ce.clientRect||z||Ct(Ce.clientRect,.05,O,_)&&([V,ue]=function(q,O,_,z){const V=cn(O,z),ue=Mo(O,_);let Ce=0,Re=0;if(V){const We=q.scrollTop;1===V?We>0&&(Ce=1):q.scrollHeight-We>q.clientHeight&&(Ce=2)}if(ue){const We=q.scrollLeft;1===ue?We>0&&(Re=1):q.scrollWidth-We>q.clientWidth&&(Re=2)}return[Ce,Re]}(Re,Ce.clientRect,O,_),(V||ue)&&(z=Re))}),!V&&!ue){const{width:Ce,height:Re}=this._viewportRuler.getViewportSize(),We={width:Ce,height:Re,top:0,right:Ce,bottom:Re,left:0};V=cn(We,_),ue=Mo(We,O),z=window}z&&(V!==this._verticalScrollDirection||ue!==this._horizontalScrollDirection||z!==this._scrollNode)&&(this._verticalScrollDirection=V,this._horizontalScrollDirection=ue,this._scrollNode=z,(V||ue)&&z?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const O=(0,C.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=O.msScrollSnapType||O.scrollSnapType||"",O.scrollSnapType=O.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const O=(0,C.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(O).clientRect}_cacheItemPositions(){const O="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(_=>{const z=_.getVisibleElement();return{drag:_,offset:0,initialTransform:z.style.transform||"",clientRect:Qi(z)}}).sort((_,z)=>O?_.clientRect.left-z.clientRect.left:_.clientRect.top-z.clientRect.top)}_reset(){this._isDragging=!1;const O=(0,C.fI)(this.element).style;O.scrollSnapType=O.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(_=>{const z=_.getRootElement();if(z){const V=this._itemPositions.find(ue=>ue.drag===_)?.initialTransform;z.style.transform=V||""}}),this._siblings.forEach(_=>_._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(O,_,z){const V="horizontal"===this._orientation,ue=_[O].clientRect,Ce=_[O+-1*z];let Re=ue[V?"width":"height"]*z;if(Ce){const We=V?"left":"top",et=V?"right":"bottom";-1===z?Re-=Ce.clientRect[We]-ue[et]:Re+=ue[We]-Ce.clientRect[et]}return Re}_getItemOffsetPx(O,_,z){const V="horizontal"===this._orientation;let ue=V?_.left-O.left:_.top-O.top;return-1===z&&(ue+=V?_.width-O.width:_.height-O.height),ue}_shouldEnterAsFirstChild(O,_){if(!this._activeDraggables.length)return!1;const z=this._itemPositions,V="horizontal"===this._orientation;if(z[0].drag!==this._activeDraggables[0]){const Ce=z[z.length-1].clientRect;return V?O>=Ce.right:_>=Ce.bottom}{const Ce=z[0].clientRect;return V?O<=Ce.left:_<=Ce.top}}_getItemIndexFromPointerPosition(O,_,z,V){const ue="horizontal"===this._orientation,Ce=this._itemPositions.findIndex(({drag:Re,clientRect:We})=>{if(Re===O)return!1;if(V){const et=ue?V.x:V.y;if(Re===this._previousSwap.drag&&this._previousSwap.overlaps&&et===this._previousSwap.delta)return!1}return ue?_>=Math.floor(We.left)&&_<Math.floor(We.right):z>=Math.floor(We.top)&&z<Math.floor(We.bottom)});return-1!==Ce&&this.sortPredicate(Ce,O,this)?Ce:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(O,_){return null!=this._clientRect&&Zi(this._clientRect,O,_)}_getSiblingContainerFromPosition(O,_,z){return this._siblings.find(V=>V._canReceive(O,_,z))}_canReceive(O,_,z){if(!this._clientRect||!Zi(this._clientRect,_,z)||!this.enterPredicate(O,this))return!1;const V=this._getShadowRoot().elementFromPoint(_,z);if(!V)return!1;const ue=(0,C.fI)(this.element);return V===ue||ue.contains(V)}_startReceiving(O,_){const z=this._activeSiblings;!z.has(O)&&_.every(V=>this.enterPredicate(V,this)||this._draggables.indexOf(V)>-1)&&(z.add(O),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(O){this._activeSiblings.delete(O),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(O=>{if(this.isDragging()){const _=this._parentPositions.handleScroll(O);_&&(this._itemPositions.forEach(({clientRect:z})=>{Sn(z,_.top,_.left)}),this._itemPositions.forEach(({drag:z})=>{this._dragDropRegistry.isDragging(z)&&z._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const O=(0,I.kV)((0,C.fI)(this.element));this._cachedShadowRoot=O||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const O=this._activeDraggables.filter(_=>_.isDragging());this._siblings.forEach(_=>_._startReceiving(this,O))}}function cn(q,O){const{top:_,bottom:z,height:V}=q,ue=.05*V;return O>=_-ue&&O<=_+ue?1:O>=z-ue&&O<=z+ue?2:0}function Mo(q,O){const{left:_,right:z,width:V}=q,ue=.05*V;return O>=_-ue&&O<=_+ue?1:O>=z-ue&&O<=z+ue?2:0}const bi=(0,I.i$)({passive:!1,capture:!0});let ko=(()=>{class q{constructor(_,z){this._ngZone=_,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=V=>V.isDragging(),this.pointerMove=new M.x,this.pointerUp=new M.x,this.scroll=new M.x,this._preventDefaultWhileDragging=V=>{this._activeDragInstances.length>0&&V.preventDefault()},this._persistentTouchmoveListener=V=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&V.preventDefault(),this.pointerMove.next(V))},this._document=z}registerDropContainer(_){this._dropInstances.has(_)||this._dropInstances.add(_)}registerDragItem(_){this._dragInstances.add(_),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,bi)})}removeDropContainer(_){this._dropInstances.delete(_)}removeDragItem(_){this._dragInstances.delete(_),this.stopDragging(_),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,bi)}startDragging(_,z){if(!(this._activeDragInstances.indexOf(_)>-1)&&(this._activeDragInstances.push(_),1===this._activeDragInstances.length)){const V=z.type.startsWith("touch");this._globalListeners.set(V?"touchend":"mouseup",{handler:ue=>this.pointerUp.next(ue),options:!0}).set("scroll",{handler:ue=>this.scroll.next(ue),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:bi}),V||this._globalListeners.set("mousemove",{handler:ue=>this.pointerMove.next(ue),options:bi}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((ue,Ce)=>{this._document.addEventListener(Ce,ue.handler,ue.options)})})}}stopDragging(_){const z=this._activeDragInstances.indexOf(_);z>-1&&(this._activeDragInstances.splice(z,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(_){return this._activeDragInstances.indexOf(_)>-1}scrolled(_){const z=[this.scroll];return _&&_!==this._document&&z.push(new L.y(V=>this._ngZone.runOutsideAngular(()=>{const Ce=Re=>{this._activeDragInstances.length&&V.next(Re)};return _.addEventListener("scroll",Ce,!0),()=>{_.removeEventListener("scroll",Ce,!0)}}))),(0,Co.T)(...z)}ngOnDestroy(){this._dragInstances.forEach(_=>this.removeDragItem(_)),this._dropInstances.forEach(_=>this.removeDropContainer(_)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((_,z)=>{this._document.removeEventListener(z,_.handler,_.options)}),this._globalListeners.clear()}}return q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275inject(v.NgZone),v.\u0275\u0275inject(a.DOCUMENT))},q.\u0275prov=v.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();const Fe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ft=(()=>{class q{constructor(_,z,V,ue){this._document=_,this._ngZone=z,this._viewportRuler=V,this._dragDropRegistry=ue}createDrag(_,z=Fe){return new Fa(_,z,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(_){return new _i(_,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275inject(a.DOCUMENT),v.\u0275\u0275inject(v.NgZone),v.\u0275\u0275inject(ne),v.\u0275\u0275inject(ko))},q.\u0275prov=v.\u0275\u0275defineInjectable({token:q,factory:q.\u0275fac,providedIn:"root"}),q})();const Fs=new v.InjectionToken("CDK_DRAG_PARENT"),jr=new v.InjectionToken("CdkDropListGroup"),wn=new v.InjectionToken("CDK_DRAG_CONFIG");let yr=0;const Lo=new v.InjectionToken("CdkDropList");let Wn=(()=>{class q{constructor(_,z,V,ue,Ce,Re,We){this.element=_,this._changeDetectorRef=V,this._scrollDispatcher=ue,this._dir=Ce,this._group=Re,this._destroyed=new M.x,this.connectedTo=[],this.id="cdk-drop-list-"+yr++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new v.EventEmitter,this.entered=new v.EventEmitter,this.exited=new v.EventEmitter,this.sorted=new v.EventEmitter,this._unsortedItems=new Set,this._dropListRef=z.createDropList(_),this._dropListRef.data=this,We&&this._assignDefaults(We),this._dropListRef.enterPredicate=(et,_t)=>this.enterPredicate(et.data,_t.data),this._dropListRef.sortPredicate=(et,_t,ln)=>this.sortPredicate(et,_t.data,ln.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),q._dropLists.push(this),Re&&Re._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(_){this._dropListRef.disabled=this._disabled=(0,C.Ig)(_)}addItem(_){this._unsortedItems.add(_),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(_){this._unsortedItems.delete(_),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((_,z)=>_._dragRef.getVisibleElement().compareDocumentPosition(z._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const _=q._dropLists.indexOf(this);_>-1&&q._dropLists.splice(_,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(_){this._dir&&this._dir.change.pipe((0,mi.O)(this._dir.value),(0,En.R)(this._destroyed)).subscribe(z=>_.withDirection(z)),_.beforeStarted.subscribe(()=>{const z=(0,C.Eq)(this.connectedTo).map(V=>"string"==typeof V?q._dropLists.find(Ce=>Ce.id===V):V);if(this._group&&this._group._items.forEach(V=>{-1===z.indexOf(V)&&z.push(V)}),!this._scrollableParentsResolved){const V=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(ue=>ue.getElementRef().nativeElement);this._dropListRef.withScrollableParents(V),this._scrollableParentsResolved=!0}_.disabled=this.disabled,_.lockAxis=this.lockAxis,_.sortingDisabled=(0,C.Ig)(this.sortingDisabled),_.autoScrollDisabled=(0,C.Ig)(this.autoScrollDisabled),_.autoScrollStep=(0,C.su)(this.autoScrollStep,2),_.connectedTo(z.filter(V=>V&&V!==this).map(V=>V._dropListRef)).withOrientation(this.orientation)})}_handleEvents(_){_.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),_.entered.subscribe(z=>{this.entered.emit({container:this,item:z.item.data,currentIndex:z.currentIndex})}),_.exited.subscribe(z=>{this.exited.emit({container:this,item:z.item.data}),this._changeDetectorRef.markForCheck()}),_.sorted.subscribe(z=>{this.sorted.emit({previousIndex:z.previousIndex,currentIndex:z.currentIndex,container:this,item:z.item.data})}),_.dropped.subscribe(z=>{this.dropped.emit({previousIndex:z.previousIndex,currentIndex:z.currentIndex,previousContainer:z.previousContainer.data,container:z.container.data,item:z.item.data,isPointerOverContainer:z.isPointerOverContainer,distance:z.distance,dropPoint:z.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(_){const{lockAxis:z,draggingDisabled:V,sortingDisabled:ue,listAutoScrollDisabled:Ce,listOrientation:Re}=_;this.disabled=V??!1,this.sortingDisabled=ue??!1,this.autoScrollDisabled=Ce??!1,this.orientation=Re||"vertical",z&&(this.lockAxis=z)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(_=>_._dragRef))}}return q._dropLists=[],q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275directiveInject(v.ElementRef),v.\u0275\u0275directiveInject(Ft),v.\u0275\u0275directiveInject(v.ChangeDetectorRef),v.\u0275\u0275directiveInject(m),v.\u0275\u0275directiveInject(Do,8),v.\u0275\u0275directiveInject(jr,12),v.\u0275\u0275directiveInject(wn,8))},q.\u0275dir=v.\u0275\u0275defineDirective({type:q,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(_,z){2&_&&(v.\u0275\u0275attribute("id",z.id),v.\u0275\u0275classProp("cdk-drop-list-disabled",z.disabled)("cdk-drop-list-dragging",z._dropListRef.isDragging())("cdk-drop-list-receiving",z._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[v.\u0275\u0275ProvidersFeature([{provide:jr,useValue:void 0},{provide:Lo,useExisting:q}])]}),q})();const Bo=new v.InjectionToken("CdkDragHandle"),Ji=new v.InjectionToken("CdkDragPlaceholder");let Ei=(()=>{class q{constructor(_){this.templateRef=_}}return q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275directiveInject(v.TemplateRef))},q.\u0275dir=v.\u0275\u0275defineDirective({type:q,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"},features:[v.\u0275\u0275ProvidersFeature([{provide:Ji,useExisting:q}])]}),q})();const Fo=new v.InjectionToken("CdkDragPreview");let ut=(()=>{class q{constructor(_,z,V,ue,Ce,Re,We,et,_t,ln,Bn){this.element=_,this.dropContainer=z,this._ngZone=ue,this._viewContainerRef=Ce,this._dir=We,this._changeDetectorRef=_t,this._selfHandle=ln,this._parentDrag=Bn,this._destroyed=new M.x,this.started=new v.EventEmitter,this.released=new v.EventEmitter,this.ended=new v.EventEmitter,this.entered=new v.EventEmitter,this.exited=new v.EventEmitter,this.dropped=new v.EventEmitter,this.moved=new L.y(Si=>{const Ur=this._dragRef.moved.pipe((0,nr.U)(ar=>({source:this,pointerPosition:ar.pointerPosition,event:ar.event,delta:ar.delta,distance:ar.distance}))).subscribe(Si);return()=>{Ur.unsubscribe()}}),this._dragRef=et.createDrag(_,{dragStartThreshold:Re&&null!=Re.dragStartThreshold?Re.dragStartThreshold:5,pointerDirectionChangeThreshold:Re&&null!=Re.pointerDirectionChangeThreshold?Re.pointerDirectionChangeThreshold:5,zIndex:Re?.zIndex}),this._dragRef.data=this,q._dragInstances.push(this),Re&&this._assignDefaults(Re),z&&(this._dragRef._withDropContainer(z._dropListRef),z.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(_){this._disabled=(0,C.Ig)(_),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Ms.q)(1),(0,En.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(_){const z=_.rootElementSelector,V=_.freeDragPosition;z&&!z.firstChange&&this._updateRootElement(),V&&!V.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const _=q._dragInstances.indexOf(this);_>-1&&q._dragInstances.splice(_,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const _=this.element.nativeElement;let z=_;this.rootElementSelector&&(z=void 0!==_.closest?_.closest(this.rootElementSelector):_.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(z||_)}_getBoundaryElement(){const _=this.boundaryElement;return _?"string"==typeof _?this.element.nativeElement.closest(_):(0,C.fI)(_):null}_syncInputs(_){_.beforeStarted.subscribe(()=>{if(!_.isDragging()){const z=this._dir,V=this.dragStartDelay,ue=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,Ce=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;_.disabled=this.disabled,_.lockAxis=this.lockAxis,_.dragStartDelay="object"==typeof V&&V?V:(0,C.su)(V),_.constrainPosition=this.constrainPosition,_.previewClass=this.previewClass,_.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(ue).withPreviewTemplate(Ce).withPreviewContainer(this.previewContainer||"global"),z&&_.withDirection(z.value)}}),_.beforeStarted.pipe((0,Ms.q)(1)).subscribe(()=>{if(this._parentDrag)return void _.withParent(this._parentDrag._dragRef);let z=this.element.nativeElement.parentElement;for(;z;){if(z.classList.contains("cdk-drag")){_.withParent(q._dragInstances.find(V=>V.element.nativeElement===z)?._dragRef||null);break}z=z.parentElement}})}_handleEvents(_){_.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),_.released.subscribe(()=>{this.released.emit({source:this})}),_.ended.subscribe(z=>{this.ended.emit({source:this,distance:z.distance,dropPoint:z.dropPoint}),this._changeDetectorRef.markForCheck()}),_.entered.subscribe(z=>{this.entered.emit({container:z.container.data,item:this,currentIndex:z.currentIndex})}),_.exited.subscribe(z=>{this.exited.emit({container:z.container.data,item:this})}),_.dropped.subscribe(z=>{this.dropped.emit({previousIndex:z.previousIndex,currentIndex:z.currentIndex,previousContainer:z.previousContainer.data,container:z.container.data,isPointerOverContainer:z.isPointerOverContainer,item:this,distance:z.distance,dropPoint:z.dropPoint})})}_assignDefaults(_){const{lockAxis:z,dragStartDelay:V,constrainPosition:ue,previewClass:Ce,boundaryElement:Re,draggingDisabled:We,rootElementSelector:et,previewContainer:_t}=_;this.disabled=We??!1,this.dragStartDelay=V||0,z&&(this.lockAxis=z),ue&&(this.constrainPosition=ue),Ce&&(this.previewClass=Ce),Re&&(this.boundaryElement=Re),et&&(this.rootElementSelector=et),_t&&(this.previewContainer=_t)}_setupHandlesListener(){this._handles.changes.pipe((0,mi.O)(this._handles),(0,Ao.b)(_=>{const z=_.filter(V=>V._parentDrag===this).map(V=>V.element);this._selfHandle&&this.rootElementSelector&&z.push(this.element),this._dragRef.withHandles(z)}),(0,Ba.w)(_=>(0,Co.T)(..._.map(z=>z._stateChanges.pipe((0,mi.O)(z))))),(0,En.R)(this._destroyed)).subscribe(_=>{const z=this._dragRef,V=_.element.nativeElement;_.disabled?z.disableHandle(V):z.enableHandle(V)})}}return q._dragInstances=[],q.\u0275fac=function(_){return new(_||q)(v.\u0275\u0275directiveInject(v.ElementRef),v.\u0275\u0275directiveInject(Lo,12),v.\u0275\u0275directiveInject(a.DOCUMENT),v.\u0275\u0275directiveInject(v.NgZone),v.\u0275\u0275directiveInject(v.ViewContainerRef),v.\u0275\u0275directiveInject(wn,8),v.\u0275\u0275directiveInject(Do,8),v.\u0275\u0275directiveInject(Ft),v.\u0275\u0275directiveInject(v.ChangeDetectorRef),v.\u0275\u0275directiveInject(Bo,10),v.\u0275\u0275directiveInject(Fs,12))},q.\u0275dir=v.\u0275\u0275defineDirective({type:q,selectors:[["","cdkDrag",""]],contentQueries:function(_,z,V){if(1&_&&(v.\u0275\u0275contentQuery(V,Fo,5),v.\u0275\u0275contentQuery(V,Ji,5),v.\u0275\u0275contentQuery(V,Bo,5)),2&_){let ue;v.\u0275\u0275queryRefresh(ue=v.\u0275\u0275loadQuery())&&(z._previewTemplate=ue.first),v.\u0275\u0275queryRefresh(ue=v.\u0275\u0275loadQuery())&&(z._placeholderTemplate=ue.first),v.\u0275\u0275queryRefresh(ue=v.\u0275\u0275loadQuery())&&(z._handles=ue)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(_,z){2&_&&v.\u0275\u0275classProp("cdk-drag-disabled",z.disabled)("cdk-drag-dragging",z._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[v.\u0275\u0275ProvidersFeature([{provide:Fs,useExisting:q}]),v.\u0275\u0275NgOnChangesFeature]}),q})(),js=(()=>{class q{}return q.\u0275fac=function(_){return new(_||q)},q.\u0275mod=v.\u0275\u0275defineNgModule({type:q}),q.\u0275inj=v.\u0275\u0275defineInjector({providers:[Ft],imports:[Q]}),q})()},3353:(se,U,l)=>{l.d(U,{t4:()=>M,sA:()=>m,kV:()=>c,i$:()=>E});var v=l(7777),a=l(1457);let C;try{C="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch{C=!1}let S,b,M=(()=>{class ${constructor(ve){this._platformId=ve,this.isBrowser=this._platformId?(0,a.isPlatformBrowser)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!C)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return $.\u0275fac=function(ve){return new(ve||$)(v.\u0275\u0275inject(v.PLATFORM_ID))},$.\u0275prov=v.\u0275\u0275defineInjectable({token:$,factory:$.\u0275fac,providedIn:"root"}),$})();function E($){return function(){if(null==S&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>S=!0}))}finally{S=S||!1}return S}()?$:!!$.capture}function c($){if(function(){if(null==b){const $="undefined"!=typeof document?document.head:null;b=!(!$||!$.createShadowRoot&&!$.attachShadow)}return b}()){const ne=$.getRootNode?$.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&ne instanceof ShadowRoot)return ne}return null}function m($){return $.composedPath?$.composedPath()[0]:$.target}},1481:(se,U,l)=>{l.d(U,{b2:()=>yn,H7:()=>Ar,q6:()=>er,se:()=>X});var v=l(1457),a=l(7777);class C extends v.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class M extends C{static makeCurrent(){(0,v.\u0275setRootDomAdapter)(new M)}onAndCancel(de,ie,ye){return de.addEventListener(ie,ye,!1),()=>{de.removeEventListener(ie,ye,!1)}}dispatchEvent(de,ie){de.dispatchEvent(ie)}remove(de){de.parentNode&&de.parentNode.removeChild(de)}createElement(de,ie){return(ie=ie||this.getDefaultDocument()).createElement(de)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(de){return de.nodeType===Node.ELEMENT_NODE}isShadowRoot(de){return de instanceof DocumentFragment}getGlobalEventTarget(de,ie){return"window"===ie?window:"document"===ie?de:"body"===ie?de.body:null}getBaseHref(de){const ie=(N=N||document.querySelector("base"),N?N.getAttribute("href"):null);return null==ie?null:function(Ee){j=j||document.createElement("a"),j.setAttribute("href",Ee);const de=j.pathname;return"/"===de.charAt(0)?de:`/${de}`}(ie)}resetBaseElement(){N=null}getUserAgent(){return window.navigator.userAgent}getCookie(de){return(0,v.\u0275parseCookieValue)(document.cookie,de)}}let j,N=null;const S=new a.InjectionToken("TRANSITION_ID"),E=[{provide:a.APP_INITIALIZER,useFactory:function(Ee,de,ie){return()=>{ie.get(a.ApplicationInitStatus).donePromise.then(()=>{const ye=(0,v.\u0275getDOM)(),Be=de.querySelectorAll(`style[ng-transition="${Ee}"]`);for(let rt=0;rt<Be.length;rt++)ye.remove(Be[rt])})}},deps:[S,v.DOCUMENT,a.Injector],multi:!0}];class I{static init(){(0,a.setTestabilityGetter)(new I)}addToWindow(de){a.\u0275global.getAngularTestability=(ye,Be=!0)=>{const rt=de.findTestabilityInTree(ye,Be);if(null==rt)throw new Error("Could not find testability for element.");return rt},a.\u0275global.getAllAngularTestabilities=()=>de.getAllTestabilities(),a.\u0275global.getAllAngularRootElements=()=>de.getAllRootElements(),a.\u0275global.frameworkStabilizers||(a.\u0275global.frameworkStabilizers=[]),a.\u0275global.frameworkStabilizers.push(ye=>{const Be=a.\u0275global.getAllAngularTestabilities();let rt=Be.length,Mt=!1;const bn=function(Pn){Mt=Mt||Pn,rt--,0==rt&&ye(Mt)};Be.forEach(function(Pn){Pn.whenStable(bn)})})}findTestabilityInTree(de,ie,ye){return null==ie?null:de.getTestability(ie)??(ye?(0,v.\u0275getDOM)().isShadowRoot(ie)?this.findTestabilityInTree(de,ie.host,!0):this.findTestabilityInTree(de,ie.parentElement,!0):null)}}let P=(()=>{class Ee{build(){return new XMLHttpRequest}}return Ee.\u0275fac=function(ie){return new(ie||Ee)},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})();const R=new a.InjectionToken("EventManagerPlugins");let T=(()=>{class Ee{constructor(ie,ye){this._zone=ye,this._eventNameToPlugin=new Map,ie.forEach(Be=>Be.manager=this),this._plugins=ie.slice().reverse()}addEventListener(ie,ye,Be){return this._findPluginFor(ye).addEventListener(ie,ye,Be)}addGlobalEventListener(ie,ye,Be){return this._findPluginFor(ye).addGlobalEventListener(ie,ye,Be)}getZone(){return this._zone}_findPluginFor(ie){const ye=this._eventNameToPlugin.get(ie);if(ye)return ye;const Be=this._plugins;for(let rt=0;rt<Be.length;rt++){const Mt=Be[rt];if(Mt.supports(ie))return this._eventNameToPlugin.set(ie,Mt),Mt}throw new Error(`No event manager plugin found for event ${ie}`)}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(a.\u0275\u0275inject(R),a.\u0275\u0275inject(a.NgZone))},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})();class b{constructor(de){this._doc=de}addGlobalEventListener(de,ie,ye){const Be=(0,v.\u0275getDOM)().getGlobalEventTarget(this._doc,de);if(!Be)throw new Error(`Unsupported event target ${Be} for event ${ie}`);return this.addEventListener(Be,ie,ye)}}let y=(()=>{class Ee{constructor(){this._stylesSet=new Set}addStyles(ie){const ye=new Set;ie.forEach(Be=>{this._stylesSet.has(Be)||(this._stylesSet.add(Be),ye.add(Be))}),this.onStylesAdded(ye)}onStylesAdded(ie){}getAllStyles(){return Array.from(this._stylesSet)}}return Ee.\u0275fac=function(ie){return new(ie||Ee)},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})(),c=(()=>{class Ee extends y{constructor(ie){super(),this._doc=ie,this._hostNodes=new Map,this._hostNodes.set(ie.head,[])}_addStylesToHost(ie,ye,Be){ie.forEach(rt=>{const Mt=this._doc.createElement("style");Mt.textContent=rt,Be.push(ye.appendChild(Mt))})}addHost(ie){const ye=[];this._addStylesToHost(this._stylesSet,ie,ye),this._hostNodes.set(ie,ye)}removeHost(ie){const ye=this._hostNodes.get(ie);ye&&ye.forEach(o),this._hostNodes.delete(ie)}onStylesAdded(ie){this._hostNodes.forEach((ye,Be)=>{this._addStylesToHost(ie,Be,ye)})}ngOnDestroy(){this._hostNodes.forEach(ie=>ie.forEach(o))}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(a.\u0275\u0275inject(v.DOCUMENT))},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})();function o(Ee){(0,v.\u0275getDOM)().remove(Ee)}const m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},d=/%COMP%/g;function W(Ee,de,ie){for(let ye=0;ye<de.length;ye++){let Be=de[ye];Array.isArray(Be)?W(Ee,Be,ie):(Be=Be.replace(d,Ee),ie.push(Be))}return ie}function Q(Ee){return de=>{if("__ngUnwrap__"===de)return Ee;!1===Ee(de)&&(de.preventDefault(),de.returnValue=!1)}}let X=(()=>{class Ee{constructor(ie,ye,Be){this.eventManager=ie,this.sharedStylesHost=ye,this.appId=Be,this.rendererByCompId=new Map,this.defaultRenderer=new te(ie)}createRenderer(ie,ye){if(!ie||!ye)return this.defaultRenderer;switch(ye.encapsulation){case a.ViewEncapsulation.Emulated:{let Be=this.rendererByCompId.get(ye.id);return Be||(Be=new Qe(this.eventManager,this.sharedStylesHost,ye,this.appId),this.rendererByCompId.set(ye.id,Be)),Be.applyToHost(ie),Be}case 1:case a.ViewEncapsulation.ShadowDom:return new Se(this.eventManager,this.sharedStylesHost,ie,ye);default:if(!this.rendererByCompId.has(ye.id)){const Be=W(ye.id,ye.styles,[]);this.sharedStylesHost.addStyles(Be),this.rendererByCompId.set(ye.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(a.\u0275\u0275inject(T),a.\u0275\u0275inject(c),a.\u0275\u0275inject(a.APP_ID))},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})();class te{constructor(de){this.eventManager=de,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(de,ie){return ie?document.createElementNS(m[ie]||ie,de):document.createElement(de)}createComment(de){return document.createComment(de)}createText(de){return document.createTextNode(de)}appendChild(de,ie){de.appendChild(ie)}insertBefore(de,ie,ye){de&&de.insertBefore(ie,ye)}removeChild(de,ie){de&&de.removeChild(ie)}selectRootElement(de,ie){let ye="string"==typeof de?document.querySelector(de):de;if(!ye)throw new Error(`The selector "${de}" did not match any elements`);return ie||(ye.textContent=""),ye}parentNode(de){return de.parentNode}nextSibling(de){return de.nextSibling}setAttribute(de,ie,ye,Be){if(Be){ie=Be+":"+ie;const rt=m[Be];rt?de.setAttributeNS(rt,ie,ye):de.setAttribute(ie,ye)}else de.setAttribute(ie,ye)}removeAttribute(de,ie,ye){if(ye){const Be=m[ye];Be?de.removeAttributeNS(Be,ie):de.removeAttribute(`${ye}:${ie}`)}else de.removeAttribute(ie)}addClass(de,ie){de.classList.add(ie)}removeClass(de,ie){de.classList.remove(ie)}setStyle(de,ie,ye,Be){Be&(a.RendererStyleFlags2.DashCase|a.RendererStyleFlags2.Important)?de.style.setProperty(ie,ye,Be&a.RendererStyleFlags2.Important?"important":""):de.style[ie]=ye}removeStyle(de,ie,ye){ye&a.RendererStyleFlags2.DashCase?de.style.removeProperty(ie):de.style[ie]=""}setProperty(de,ie,ye){de[ie]=ye}setValue(de,ie){de.nodeValue=ie}listen(de,ie,ye){return"string"==typeof de?this.eventManager.addGlobalEventListener(de,ie,Q(ye)):this.eventManager.addEventListener(de,ie,Q(ye))}}class Qe extends te{constructor(de,ie,ye,Be){super(de),this.component=ye;const rt=W(Be+"-"+ye.id,ye.styles,[]);ie.addStyles(rt),this.contentAttr="_ngcontent-%COMP%".replace(d,Be+"-"+ye.id),this.hostAttr="_nghost-%COMP%".replace(d,Be+"-"+ye.id)}applyToHost(de){super.setAttribute(de,this.hostAttr,"")}createElement(de,ie){const ye=super.createElement(de,ie);return super.setAttribute(ye,this.contentAttr,""),ye}}class Se extends te{constructor(de,ie,ye,Be){super(de),this.sharedStylesHost=ie,this.hostEl=ye,this.shadowRoot=ye.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const rt=W(Be.id,Be.styles,[]);for(let Mt=0;Mt<rt.length;Mt++){const bn=document.createElement("style");bn.textContent=rt[Mt],this.shadowRoot.appendChild(bn)}}nodeOrShadowRoot(de){return de===this.hostEl?this.shadowRoot:de}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(de,ie){return super.appendChild(this.nodeOrShadowRoot(de),ie)}insertBefore(de,ie,ye){return super.insertBefore(this.nodeOrShadowRoot(de),ie,ye)}removeChild(de,ie){return super.removeChild(this.nodeOrShadowRoot(de),ie)}parentNode(de){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(de)))}}let ge=(()=>{class Ee extends b{constructor(ie){super(ie)}supports(ie){return!0}addEventListener(ie,ye,Be){return ie.addEventListener(ye,Be,!1),()=>this.removeEventListener(ie,ye,Be)}removeEventListener(ie,ye,Be){return ie.removeEventListener(ye,Be)}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(a.\u0275\u0275inject(v.DOCUMENT))},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})();const oe=["alt","control","meta","shift"],Oe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ne={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ye={alt:Ee=>Ee.altKey,control:Ee=>Ee.ctrlKey,meta:Ee=>Ee.metaKey,shift:Ee=>Ee.shiftKey};let mt=(()=>{class Ee extends b{constructor(ie){super(ie)}supports(ie){return null!=Ee.parseEventName(ie)}addEventListener(ie,ye,Be){const rt=Ee.parseEventName(ye),Mt=Ee.eventCallback(rt.fullKey,Be,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,v.\u0275getDOM)().onAndCancel(ie,rt.domEventName,Mt))}static parseEventName(ie){const ye=ie.toLowerCase().split("."),Be=ye.shift();if(0===ye.length||"keydown"!==Be&&"keyup"!==Be)return null;const rt=Ee._normalizeKey(ye.pop());let Mt="";if(oe.forEach(Pn=>{const Vr=ye.indexOf(Pn);Vr>-1&&(ye.splice(Vr,1),Mt+=Pn+".")}),Mt+=rt,0!=ye.length||0===rt.length)return null;const bn={};return bn.domEventName=Be,bn.fullKey=Mt,bn}static getEventFullKey(ie){let ye="",Be=function(Ee){let de=Ee.key;if(null==de){if(de=Ee.keyIdentifier,null==de)return"Unidentified";de.startsWith("U+")&&(de=String.fromCharCode(parseInt(de.substring(2),16)),3===Ee.location&&Ne.hasOwnProperty(de)&&(de=Ne[de]))}return Oe[de]||de}(ie);return Be=Be.toLowerCase()," "===Be?Be="space":"."===Be&&(Be="dot"),oe.forEach(rt=>{rt!=Be&&Ye[rt](ie)&&(ye+=rt+".")}),ye+=Be,ye}static eventCallback(ie,ye,Be){return rt=>{Ee.getEventFullKey(rt)===ie&&Be.runGuarded(()=>ye(rt))}}static _normalizeKey(ie){return"esc"===ie?"escape":ie}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(a.\u0275\u0275inject(v.DOCUMENT))},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:Ee.\u0275fac}),Ee})();const er=(0,a.createPlatformFactory)(a.platformCore,"browser",[{provide:a.PLATFORM_ID,useValue:v.\u0275PLATFORM_BROWSER_ID},{provide:a.PLATFORM_INITIALIZER,useValue:function(){M.makeCurrent(),I.init()},multi:!0},{provide:v.DOCUMENT,useFactory:function(){return(0,a.\u0275setDocument)(document),document},deps:[]}]),gn=[{provide:a.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:a.ErrorHandler,useFactory:function(){return new a.ErrorHandler},deps:[]},{provide:R,useClass:ge,multi:!0,deps:[v.DOCUMENT,a.NgZone,a.PLATFORM_ID]},{provide:R,useClass:mt,multi:!0,deps:[v.DOCUMENT]},{provide:X,useClass:X,deps:[T,c,a.APP_ID]},{provide:a.RendererFactory2,useExisting:X},{provide:y,useExisting:c},{provide:c,useClass:c,deps:[v.DOCUMENT]},{provide:a.Testability,useClass:a.Testability,deps:[a.NgZone]},{provide:T,useClass:T,deps:[R,a.NgZone]},{provide:v.XhrFactory,useClass:P,deps:[]}];let yn=(()=>{class Ee{constructor(ie){if(ie)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(ie){return{ngModule:Ee,providers:[{provide:a.APP_ID,useValue:ie.appId},{provide:S,useExisting:a.APP_ID},E]}}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(a.\u0275\u0275inject(Ee,12))},Ee.\u0275mod=a.\u0275\u0275defineNgModule({type:Ee}),Ee.\u0275inj=a.\u0275\u0275defineInjector({providers:gn,imports:[v.CommonModule,a.ApplicationModule]}),Ee})();"undefined"!=typeof window&&window;let Ar=(()=>{class Ee{}return Ee.\u0275fac=function(ie){return new(ie||Ee)},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:function(ie){let ye=null;return ye=ie?new(ie||Ee):a.\u0275\u0275inject(ui),ye},providedIn:"root"}),Ee})(),ui=(()=>{class Ee extends Ar{constructor(ie){super(),this._doc=ie}sanitize(ie,ye){if(null==ye)return null;switch(ie){case a.SecurityContext.NONE:return ye;case a.SecurityContext.HTML:return(0,a.\u0275allowSanitizationBypassAndThrow)(ye,"HTML")?(0,a.\u0275unwrapSafeValue)(ye):(0,a.\u0275_sanitizeHtml)(this._doc,String(ye)).toString();case a.SecurityContext.STYLE:return(0,a.\u0275allowSanitizationBypassAndThrow)(ye,"Style")?(0,a.\u0275unwrapSafeValue)(ye):ye;case a.SecurityContext.SCRIPT:if((0,a.\u0275allowSanitizationBypassAndThrow)(ye,"Script"))return(0,a.\u0275unwrapSafeValue)(ye);throw new Error("unsafe value used in a script context");case a.SecurityContext.URL:return(0,a.\u0275getSanitizationBypassType)(ye),(0,a.\u0275allowSanitizationBypassAndThrow)(ye,"URL")?(0,a.\u0275unwrapSafeValue)(ye):(0,a.\u0275_sanitizeUrl)(String(ye));case a.SecurityContext.RESOURCE_URL:if((0,a.\u0275allowSanitizationBypassAndThrow)(ye,"ResourceURL"))return(0,a.\u0275unwrapSafeValue)(ye);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ie} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(ie){return(0,a.\u0275bypassSanitizationTrustHtml)(ie)}bypassSecurityTrustStyle(ie){return(0,a.\u0275bypassSanitizationTrustStyle)(ie)}bypassSecurityTrustScript(ie){return(0,a.\u0275bypassSanitizationTrustScript)(ie)}bypassSecurityTrustUrl(ie){return(0,a.\u0275bypassSanitizationTrustUrl)(ie)}bypassSecurityTrustResourceUrl(ie){return(0,a.\u0275bypassSanitizationTrustResourceUrl)(ie)}}return Ee.\u0275fac=function(ie){return new(ie||Ee)(a.\u0275\u0275inject(v.DOCUMENT))},Ee.\u0275prov=a.\u0275\u0275defineInjectable({token:Ee,factory:function(ie){let ye=null;return ye=ie?new ie:function(Ee){return new ui(Ee.get(v.DOCUMENT))}(a.\u0275\u0275inject(a.Injector)),ye},providedIn:"root"}),Ee})()},5861:(se,U,l)=>{function v(C,M,N,L,j,B,S){try{var w=C[B](S),E=w.value}catch(I){return void N(I)}w.done?M(E):Promise.resolve(E).then(L,j)}function a(C){return function(){var M=this,N=arguments;return new Promise(function(L,j){var B=C.apply(M,N);function S(E){v(B,L,j,S,w,"next",E)}function w(E){v(B,L,j,S,w,"throw",E)}S(void 0)})}}l.d(U,{Z:()=>a})}}]);